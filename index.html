<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="38246032">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/generative-ai-training"
              >MLPerf training tests put Nvidia ahead, Intel close, and Google
              well behind</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-13 @ 01:57:35</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38246032"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38245935">
          <h3>
            <a class="item" href="https://www.troyhunt.com/beg-bounties/"
              >Beg Bounties</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-13 @ 01:39:37</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38245935"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38245762">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2023-11-11/diamond-prices-miners-take-radical-steps-to-support-the-market"
              >The Diamond World Takes Radical Steps to Stop a Pricing Plunge</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-13 @ 01:04:36</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38245762"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38245665">
          <h3>
            <a
              class="item"
              href="https://www.protoconstruct.com/chat/652af6c4238991f5e5f2eb57"
              >Show HN: Interactive AI Resume/LinkedIn for better networking/job
              hunting</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-13 @ 00:44:29</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38245665"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                I wanted the 'marketing tool' of networking to get myself out
                there. Something that lets me: 1) Draw people into a
                conversation before they've realized it 2) Make them remember me
                and ultimately reach out to me 3) See what people asked me so I
                can further refine my interactive profile and start the
                networking cycle again
              </p>
              <p>
                So I built a website where anyone can create these interactive
                profiles starting with a resume import.
              </p>
              <p>
                The one I linked is a test profile but on my personal one, I
                got: 1) &gt;10x more people reaching out to me when I put myself
                out there to network (some were VCs actually; though I'm not
                fundraising right now) 2) A bunch of engagement questions where
                I can see what people want to know about me so I can further
                enhance my profile and improve my own outreach
              </p>
              <p>
                This is still in early stages, but if I go to a conference/join
                a new team at a new job/need to network for some other reason, I
                think I'll put this on my LinkedIn/business card/etc.
              </p>
              <p>
                The (limited) data so far suggests people are more willing to
                first talk to the interactive profile before reaching out to me.
                I guess that makes sense, it's less commitment than emailing me.
                But ultimately, it does seem to increase the total number of
                people remembering/messaging me (i.e. improving the professional
                networking funnel as it were).
              </p>
              <p>I would love y'all's thoughts on it</p>
              <p>
                Edit: I can see some of you asking questions lol. Way more fun
                than LinkedIn's 'This random person looked at your profile but
                what did they want to know? We have no idea'.
              </p>
            </div>
          </section>
        </section>
        <section id="38245295">
          <h3>
            <a
              class="item"
              href="https://www.sfgate.com/bayarea/article/i-10-closure-california-state-of-emergency-18486449.php"
              >I-10 closure in California prompts state of emergency</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 23:39:21</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38245295"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38245187">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Geohash"
              >Geohash</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 23:24:12</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38245187"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38244927">
          <h3>
            <a
              class="item"
              href="https://www.computer.org/csdl/magazine/mi/2021/06/09623432/1yJTxgRWQgg"
              >The Apollo Guidance Computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 22:49:33</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38244927"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38244769">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=38244769"
              >Ask HN: What are your most used Chat GPT prompts</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 22:30:35</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38244769"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
            <div class="text">
              At the moment it seems like discussion of GPT prompts falls
              largely into two camps. 1) The camp that has adopted GPT and uses
              it daily or 2) The camp that can’t seem to get anything useful out
              of GPT despite multiple attempts. Since 2 often asks 1 what they
              use GPT for I thought a thread might be a useful place to collect
              some examples!
            </div>
          </section>
        </section>
        <section id="38243949">
          <h3>
            <a class="item" href="https://github.com/Jcparkyn/dpoint"
              >Show HN: Open-source digital stylus with six degrees of
              freedom</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 20:48:30</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38243949"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38242992">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/books/2023/nov/09/andrew-wylie-agency-days-of-the-jackal-serious-literature-big-business"
              >Days of The Jackal: how Andrew Wylie turned serious literature
              into big business</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 18:50:43</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38242992"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38242946">
          <h3>
            <a
              class="item"
              href="https://grossack.site/2023/11/08/37-median.html"
              >37, the median value for the second prime factor of an integer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 18:45:48</span
              ><span class="points-container"
                >Points: <span class="points">274</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38242946"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38242343">
          <h3>
            <a
              class="item"
              href="https://github.com/KillianLucas/open-interpreter"
              >Open-interpreter: OpenAI's Code Interpreter in your terminal,
              running locally</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 17:41:03</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38242343"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38241951">
          <h3>
            <a class="item" href="https://sievedata.com/about/jobs"
              >Sieve (YC W22), a video/audio AI cloud, is hiring AI/product
              engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 17:02:09</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38241674">
          <h3>
            <a
              class="item"
              href="https://lcamtuf.substack.com/p/the-evolution-of-expert-communities"
              >The evolution of expert communities</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 16:36:00</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38241674"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38241583">
          <h3>
            <a
              class="item"
              href="https://www.tomshardware.com/news/sandisk-extreme-pro-failures-are-due-to-design-flaw"
              >SanDisk Extreme Pro failures result from design flaw, says
              researcher</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 16:27:25</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38241583"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38241304">
          <h3><a class="item" href="https://html-first.com/">HTML First</a></h3>
          <section>
            <h4>
              <span>2023-11-12 @ 16:00:36</span
              ><span class="points-container"
                >Points: <span class="points">656</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38241304"
                  >Comments</a
                ><span class="descendants">: 409</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38241235">
          <h3>
            <a
              class="item"
              href="https://twitter.com/abidlabs/status/1723074108739706959"
              >Generate images fast with SD 1.5 while typing on Gradio</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 15:54:46</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38241235"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38240370">
          <h3>
            <a
              class="item"
              href="https://www.vicyyn.com/blog/shamir-secret-sharing"
              >How to Share a Secret (Shamir Secret Sharing)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 14:32:13</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38240370"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38240333">
          <h3>
            <a class="item" href="https://free.oberon.org/en/"
              >Free Oberon: Cross-platform Oberon IDE</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 14:28:22</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38240333"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38239728">
          <h3>
            <a
              class="item"
              href="https://stanforddatascience.github.io/best-practices/index.html"
              >Open, rigorous and reproducible research: A practitioner’s
              handbook (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 13:04:19</span
              ><span class="points-container"
                >Points: <span class="points">251</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38239728"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38239503">
          <h3>
            <a
              class="item"
              href="https://github.com/AsahiLinux/docs/wiki/SW:Speakers"
              >Speaker Support in Asahi Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 12:20:01</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38239503"
                  >Comments</a
                ><span class="descendants">: 138</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38239358">
          <h3>
            <a
              class="item"
              href="https://arne.me/articles/archive-your-old-projects"
              >Archive your old projects</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 11:40:22</span
              ><span class="points-container"
                >Points: <span class="points">226</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38239358"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38238658">
          <h3>
            <a class="item" href="https://pnote.eu/projects/invaders/map.html"
              >Map of Space Invader Mosaics in Paris</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 09:11:07</span
              ><span class="points-container"
                >Points: <span class="points">249</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38238658"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38236607">
          <h3>
            <a class="item" href="https://lewiscampbell.tech/blog/231112.html"
              >Wisdom from computing's past</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-12 @ 02:15:28</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38236607"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38232767">
          <h3>
            <a
              class="item"
              href="https://krebsonsecurity.com/2023/11/its-still-easy-for-anyone-to-become-you-at-experian/"
              >It's still easy for anyone to become you at Experian</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-11 @ 18:05:58</span
              ><span class="points-container"
                >Points: <span class="points">805</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38232767"
                  >Comments</a
                ><span class="descendants">: 296</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38230141">
          <h3>
            <a
              class="item"
              href="https://www.nextplatform.com/2023/11/08/you-can-load-up-on-cheap-cores-with-updated-milan-epycs/"
              >You Can Load Up on Cheap Cores with Updated Milan Epycs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-11 @ 13:31:43</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38230141"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38229998">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/tv-and-radio/2023/nov/11/lost-doctor-who-episodes-found-owner-reluctant-to-hand-them-to-bbc"
              >Lost "Doctor Who" episodes found but owner is reluctant to hand
              them to BBC</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-11 @ 13:08:33</span
              ><span class="points-container"
                >Points: <span class="points">229</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38229998"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38228122">
          <h3>
            <a
              class="item"
              href="https://poignardazur.github.io//2023/11/08/time-for-variadic-generics/"
              >Variadic generics, again</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-11 @ 06:49:50</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38228122"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38226799">
          <h3>
            <a class="item" href="https://www.mattblaze.org/photos/locks.html"
              >Locks and Security (2005)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-11 @ 01:44:27</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38226799"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38225150">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/in-the-wild-west-of-geometry-mathematicians-redefine-the-sphere-20231107/"
              >In the 'Wild West' of geometry, mathematicians redefine the
              sphere</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-10 @ 22:04:28</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38225150"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
