<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40949021">
          <h3>
            <a
              class="item"
              href="https://9elements.com/blog/responsive-bar-charts-in-html-and-css/"
              >Responsive bar charts in HTML and CSS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 20:17:40</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40949021"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40948952">
          <h3>
            <a
              class="item"
              href="https://blog.system76.com/post/cosmic-july-2024"
              >Cosmic Updates (Feat. Community)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 20:10:58</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40948952"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40948942">
          <h3>
            <a
              class="item"
              href="https://www.phoronix.com/news/COSMIC-July-Updates"
              >Cosmic Desktop Close to Alpha Release, Adds Compositor
              Multi-Threading</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 20:10:11</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40948942"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40948806">
          <h3>
            <a
              class="item"
              href="https://labs.quansight.org/blog/free-threaded-python-rollout"
              >Free-threaded CPython is ready to experiment with</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 19:52:52</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40948806"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40948692">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/new-york-drones-shorebirds-beach-safety-c2cbfb6ca03f771082ff57a28701f915"
              >Oystercatchers are waging war on NYC's beach drones</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 19:38:05</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40948692"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40948566">
          <h3>
            <a class="item" href="https://github.com/clarkmcc/cel-rust"
              >Common Expression Language interpreter written in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 19:19:31</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40948566"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40948353">
          <h3>
            <a
              class="item"
              href="https://www.mattkeeter.com/blog/2024-07-12-interpreter/"
              >Beating the Compiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 18:54:17</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40948353"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40948202">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/what-could-explain-the-gallium-anomaly-20240712/"
              >What could explain the gallium anomaly?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 18:35:08</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40948202"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40948064">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/07/12/cisa_broke_into_fed_agency/"
              >CISA broke into a US federal agency, and no one noticed for a
              full 5 months</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 18:19:14</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40948064"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40947540">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-024-02214-x"
              >Ex-Meta scientists debut gigantic AI protein design model</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 17:22:29</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40947540"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40947415">
          <h3>
            <a class="item" href="https://github.com/DropbaseHQ/dropbase"
              >Show HN: Dropbase AI – A Prompt-Based Python Web App Builder</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 17:08:19</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40947415"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>Dropbase is an AI-based Python web app builder.</p>
              <p>
                To build this, we had to make significant changes from our
                original launch:
                <a href="https://news.ycombinator.com/item?id=38534920"
                  >https://news.ycombinator.com/item?id=38534920</a
                >. Now, any web app can be entirely defined using just two
                files: `properties.json` for the UI and `main.py` for the
                backend logic, which makes it significantly easier for GPT to
                work with.
              </p>
              <p>
                In the latest version, developers can use natural language
                prompts to build apps. But instead of generating a black-box app
                or promising an AI software engineer we just generate simple
                Python code that is easily interpreted by our internal web
                framework. This allows developers to:
              </p>
              <p>
                (1) See and understand the generated app code. We regenerate the
                `main.py` file and highlight changes in a diff viewer, allowing
                developers to understand what exactly was changed.
              </p>
              <p>
                (2) Edit the app code: Developers can correct any errors,
                occasional hallucinations, or edit code to handle specific use
                cases. Once they like the code, they can commit changes and
                immediately preview the app.
              </p>
              <p>
                Incidentally, if you’ve tried Anthropic’s Artifacts to create
                “apps”, our experience will feel familiar. Dropbase AI is like
                Claude Artifacts, but for fully functional apps: you can connect
                to your database, make external API calls, and deploy to
                servers.
              </p>
              <p>
                Our goal is to create a universal, prompt-based app builder
                that’s highly customizable. Code should always be accessible and
                developers should be in control. We believe most apps will be
                built or prototyped this way, and we're taking the first steps
                towards that goal.
              </p>
              <p>
                A fun fact is that model improvements were critical here: we
                could not achieve the consistent results we needed with any LLM
                prior to GPT-4o and Claude 3.5 Sonnet. In the future, we’ll
                allow users to modify the code to call their local GPT/LLM
                deployment via Ollama, rather than relying on OpenAI or
                Anthropic calls.
              </p>
              <p>
                If you’re building admin panels, database editors, back-office
                tools, billing/customer dashboards, and internal dev tools that
                can fetch data and trigger actions across any database,
                internal/external service or API, please give Dropbase a shot!
              </p>
              <p>We're excited to get your thoughts and questions!</p>
              <p>Demos:</p>
              <p>
                - Here’s a demo video:
                <a href="https://youtu.be/RaxHOjhy3hY"
                  >https://youtu.be/RaxHOjhy3hY</a
                >
              </p>
              <p>
                - We also introduced Charts (beta) in this version based on
                suggestions from cjohnson318 in our previous HN post:
                <a href="https://youtu.be/YWtdD7THTxE"
                  >https://youtu.be/YWtdD7THTxE</a
                >
              </p>
              <p>Useful links:</p>
              <p>
                - Repo here:
                <a href="https://github.com/DropbaseHQ/dropbase"
                  >https://github.com/DropbaseHQ/dropbase</a
                >. To setup locally, follow the quickstart guide in our docs
              </p>
              <p>
                - Docs:
                <a href="https://docs.dropbase.io">https://docs.dropbase.io</a>
              </p>
              <p>
                - Homepage:
                <a href="https://dropbase.io">https://dropbase.io</a>
              </p>
            </div>
          </section>
        </section>
        <section id="40947357">
          <h3>
            <a class="item" href="https://www.tesorio.com/careers#job-openings"
              >Tesorio (YC S15) Is Hiring a Senior GenAI/LLM Engineer (100%
              Remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 17:00:54</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40947238">
          <h3>
            <a class="item" href="https://github.com/vysakh0/dravid"
              >Show HN: Open-source CLI coding framework using Claude</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 16:50:30</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40947238"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40947222">
          <h3>
            <a class="item" href="http://robhagemans.github.io/pcbasic/"
              >PC-BASIC, a cross-platform interpreter for GW-BASIC</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 16:48:59</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40947222"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40946033">
          <h3>
            <a class="item" href="https://github.com/taubyte/tau"
              >Tau: Open-source PaaS – A self-hosted Vercel / Netlify /
              Cloudflare alternative</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 14:41:22</span
              ><span class="points-container"
                >Points: <span class="points">250</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40946033"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40945961">
          <h3>
            <a class="item" href="https://github.com/finos/perspective"
              >Perspective: High-performance data visualization and analytics in
              WebAssembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 14:34:34</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40945961"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40945846">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2407.08447"
              >WildGaussians: 3D Gaussian Splatting in the Wild</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 14:22:25</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40945846"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40945671">
          <h3>
            <a class="item" href="https://silogy-io.github.io/smelt/"
              >Show HN: Smelt — an open source test runner for chip
              developers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 14:04:21</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40945671"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re excited to open-source our test runner, Smelt. Smelt is a
                simple and extensible test runner optimized for chip development
                workflows. Smelt enables developers to:
              </p>
              <p>* Programmatically define numerous test variants</p>
              <p>* Execute these tests in parallel</p>
              <p>* Easily analyze test results</p>
              <p>
                As chip designs get more complex, the state space that needs to
                be explored in design verification is exploding. In chip
                development, it's common to run thousands of tests, each with
                multiple hyperparameters that result in even more variation.
                Smelt offers a straightforward approach to generating test
                variants and extracting valuable insights from your test runs.
                Smelt integrates seamlessly with most popular simulators and
                other chip design tools.
              </p>
              <p>Key features:</p>
              <p>
                * Procedural test generation: Programmatically generate tests
                with python
              </p>
              <p>
                * Automatic rerun on failure: Describe the computation required
                re-run failing tests
              </p>
              <p>
                * Analysis APIs: All of the data needed to track and reproduce
                tests
              </p>
              <p>
                * Extensible: Define your tests with a simple python interface
              </p>
              <p>
                Yves (<a href="https://github.com/silogy-io/yves"
                  >https://github.com/silogy-io/yves</a
                >) is a suite of directed performance tests that we brought up
                with smelt – check it out if you’d like to see smelt in action.
              </p>
              <p>
                Repo:
                <a href="https://github.com/silogy-io/smelt"
                  >https://github.com/silogy-io/smelt</a
                >
              </p>
              <p>
                We built Smelt to streamline the testing process for chip
                developers. We're eager to hear your feedback and see how it
                performs in your projects!
              </p>
            </div>
          </section>
        </section>
        <section id="40945532">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40945532"
              >Ask HN: How to grow concert visuals business?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 13:45:33</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40945532"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text">
              <p>
                As a side hustle for the last few years, I've been designing
                custom concert visuals and releasing them on a monthly schedule.
                I've released 48 VJ packs so far and created a following within
                the niche community of VJs. These VJ performers then remix my
                visuals into their live performances at concerts. My setup is
                unique in that you can download every VJ pack by becoming a
                member on Patreon.
              </p>
              <p>
                I want to take it to the next level and make it into a full-time
                business but I'm struggling to figure out next steps. It would
                be helpful to get an outsider's perspective since there are so
                few people doing this line of work and I feel a bit lost.
              </p>
              <p>As far as I can see, there are two routes to go down:</p>
              <p>
                1) Create custom visuals for touring musicians. Should I find a
                rep or agency to represent me for landing big projects? Should I
                start reaching out directly to the business managers of
                musicians? Should I start a company with a partner?
              </p>
              <p>
                2) Continue making VJ packs for thousands of VJs
                internationally. Should I move to an annual membership fee
                instead of a monthly membership fee on Patreon? Should I move to
                an online shop format instead of a Patreon membership?
              </p>
              <p>
                Biz folk, what am I missing? What am I not considering? Thanks!
              </p>
              <p>
                https://www.jasonfletcher.info/vjloops/ ---
                https://www.patreon.com/isoscelesVJ
              </p>
            </div>
          </section>
        </section>
        <section id="40945355">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/entertainment/art/2024/07/12/guillaume-lethiere-exhibition-life/"
              >Born into slavery, he rose to the top of France's art world</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 13:24:24</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40945355"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40945076">
          <h3>
            <a class="item" href="https://github.com/Wack0/maciNTosh"
              >Windows NT for Power Macintosh</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 12:51:58</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40945076"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40944505">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2024/07/12/att-phone-records-stolen-data-breach/"
              >AT&amp;amp;T says criminals stole phone records of 'nearly all'
              customers in data breach</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 11:17:54</span
              ><span class="points-container"
                >Points: <span class="points">425</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40944505"
                  >Comments</a
                ><span class="descendants">: 431</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40943904">
          <h3>
            <a class="item" href="https://daminik.com"
              >Show HN: Daminik – An Open source digital asset manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 09:06:15</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40943904"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
            <div class="text">
              <p>
                Over the last 10 years we have built small to large web-projects
                of all kind. Almost every project involved managing images and
                files in one way or another. How do we manage our images and
                where? What happens if an image or logo changes, does it get
                updated across all sites? Which Host/CDN to choose? Is
                everything we do GDPR-compliant? With Daminik, we are trying to
                build a simple solution to solve these problems. One DAM with an
                integrated CDN. That’s it.
              </p>
              <p>
                You can check it out at:
                <a href="https://daminik.com/?ref=hackernews"
                  >https://daminik.com/?ref=hackernews</a
                >
                (hackernews being the invitation code)
              </p>
              <p>
                Repo:
                <a href="https://github.com/daminikhq/daminik"
                  >https://github.com/daminikhq/daminik</a
                >
              </p>
              <p>We would love to get your guys feedback on our alpha.</p>
            </div>
          </section>
        </section>
        <section id="40943460">
          <h3>
            <a
              class="item"
              href="https://community.arm.com/arm-community-blogs/b/graphics-gaming-and-vr-blog/posts/introducing-arm-accuracy-super-resolution"
              >Arm Accuracy Super Resolution</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 07:46:10</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40943460"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40942732">
          <h3>
            <a
              class="item"
              href="https://ochagavia.nl/blog/using-s3-as-a-container-registry/"
              >Using S3 as a Container Registry</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-12 @ 04:26:23</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40942732"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40940241">
          <h3>
            <a class="item" href="https://mazzo.li/posts/value-speculation.html"
              >Beating the L1 cache with value speculation (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-11 @ 20:17:58</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40940241"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40933048">
          <h3>
            <a
              class="item"
              href="https://www.verywellhealth.com/carbon-monoxide-poisoning-treatment-4161055"
              >How Carbon Monoxide Poisoning Is Treated</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-11 @ 01:33:51</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40933048"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40914635">
          <h3>
            <a
              class="item"
              href="https://www.photoroom.com/inside-photoroom/so-you-want-to-rent-an-nvidia-h100-cluster-2024-consumer-guide?slug=inside-photoroom/so-you-want-to-rent-an-nvidia-h100-cluster-2024-consumer-guide&amp;_storyblok_published=511470179&amp;"
              >So you want to rent an NVIDIA H100 cluster? 2024 Consumer
              Guide</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 11:02:22</span
              ><span class="points-container"
                >Points: <span class="points">206</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40914635"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40908165">
          <h3>
            <a class="item" href="https://testflight.apple.com/join/N9wigfoi"
              >Show HN: Click counter using iPhone volume buttons</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-08 @ 18:48:55</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40908165"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40907826">
          <h3>
            <a
              class="item"
              href="https://theory.stanford.edu/~aiken/publications/papers/pldi24.pdf"
              >Recursive Program Synthesis using Paramorphisms [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-08 @ 18:18:35</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40907826"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
