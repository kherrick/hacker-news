<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45723558">
          <h3>
            <a
              class="item"
              href="https://www.nber.org/system/files/working_papers/w34223/w34223.pdf"
              >Artificial Writing and Automated Detection [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 17:09:05</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45723558"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45723426">
          <h3>
            <a class="item" href="https://www.sievedata.com/"
              >Sieve (YC X25) Is Hiring Engineers to build video datasets for
              frontier AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 17:01:05</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45723359">
          <h3>
            <a
              class="item"
              href="https://benbrubaker.com/why-busy-beaver-hunters-fear-the-antihydra/"
              >Why Busy Beaver Hunters Fear the Antihydra</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 16:56:04</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45723359"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45723159">
          <h3>
            <a class="item" href="https://jetkvm.com/products"
              >JetKVM Is Now Available for Retail Purchase</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 16:44:17</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45723159"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45722826">
          <h3>
            <a class="item" href="https://jsonquerylang.org/">JSON Query</a>
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 16:22:52</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45722826"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45722733">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45722733"
              >Ask HN: Is AWS Down Again?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 16:16:05</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45722733"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
            <div class="text">
              <p>
                Downdetector is also recording failure reports:
                https://downdetector.com/status/aws-amazon-web-services/
              </p>
            </div>
          </section>
        </section>
        <section id="45722639">
          <h3>
            <a class="item" href="https://www.claude.com/claude-for-excel"
              >Claude for Excel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 16:09:22</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45722639"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45722635">
          <h3>
            <a class="item" href="https://www.lotas.ai/erdos"
              >Show HN: Erdos – open-source, AI data science IDE</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 16:08:58</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45722635"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.lotas.ai/">https://www.lotas.ai/</a>), and
              we’ve built Erdos, a secure AI-powered data science IDE that’s
              fully open source (<a href="https://www.lotas.ai/erdos"
                >https://www.lotas.ai/erdos</a
              >).
              <p>
                A few months ago, we shared Rao, an AI coding assistant for
                RStudio (<a href="https://news.ycombinator.com/item?id=44638510"
                  >https://news.ycombinator.com/item?id=44638510</a
                >). We built Rao to bring the Cursor-like experience to RStudio
                users. Now we want to take the next step and deliver a tool for
                the entire data science community that handles Python, R, SQL,
                and Julia workflows.
              </p>
              <p>
                Erdos is a fork of VS Code designed for data science. It
                includes:
              </p>
              <p>
                - An AI that can search, read, and write across all file types
                for Python, R, SQL, and Julia. Also, for Jupyter notebooks,
                we’ve optimized a jupytext system to allow the AI to make faster
                edits.
              </p>
              <p>
                - Built-in Python, R, and Julia consoles accessible to both the
                user and AI
              </p>
              <p>
                - Plot pane that tracks and organizes plots by file and time
              </p>
              <p>
                - Database pane for connecting to and manipulating SQL or FTP
                data sources
              </p>
              <p>
                - Environment pane for viewing variables, packages, and
                environments
              </p>
              <p>- Help pane for Python, R, and Julia documentation</p>
              <p>- Remote development via SSH or containers</p>
              <p>
                - AI assistant available through a single-click sign-in to our
                zero data retention backend, bring your own key, or a local
                model
              </p>
              <p>- Open source AGPLv3 license</p>
              <p>
                We built Erdos because data scientists are often second-class
                citizens in modern IDEs. Tools like VS Code, Cursor, and Claude
                Code are made for software developers, not for people working
                across Jupyter notebooks, scripts, and SQL. We wanted an IDE
                that feels native to data scientists, while offering the same AI
                productivity boosts.
              </p>
              <p>
                You can try Erdos at
                <a href="https://www.lotas.ai/erdos"
                  >https://www.lotas.ai/erdos</a
                >, check out our source code on our GitHub (<a
                  href="https://github.com/lotas-ai/erdos"
                  >https://github.com/lotas-ai/erdos</a
                >), and let us know what features would make it more useful for
                your work. We’d love your feedback below!
              </p>
            </div>
          </section>
        </section>
        <section id="45722069">
          <h3>
            <a
              class="item"
              href="https://blog.pabloecortez.com/its-insulting-to-read-your-ai-generated-blog-post/"
              >It's insulting to read your AI-generated blog post</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 15:27:38</span
              ><span class="points-container"
                >Points: <span class="points">421</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45722069"
                  >Comments</a
                ><span class="descendants">: 226</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45721904">
          <h3>
            <a
              class="item"
              href="https://pyfound.blogspot.com/2025/10/NSF-funding-statement.html"
              >PSF has withdrawn $1.5M proposal to US Government grant
              program</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 15:12:08</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45721904"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45721801">
          <h3>
            <a
              class="item"
              href="https://exhibitdb.cmog.org/opacimages/Images/Pyrex/Rakow_1000132877.pdf"
              >Pyrex catalog from from 1938 with hand-drawn lab glassware
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 15:04:05</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45721801"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45721682">
          <h3>
            <a
              class="item"
              href="https://www.accc.gov.au/media-release/microsoft-in-court-for-allegedly-misleading-millions-of-australians-over-microsoft-365-subscriptions"
              >Microsoft in court for allegedly misleading Australians over 365
              subscriptions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 14:54:14</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45721682"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45721160">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2510.02330"
              >EntropyLong: Effective Long-Context Training via Predictive
              Uncertainty</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 14:04:48</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45721160"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45720345">
          <h3>
            <a
              class="item"
              href="https://github.com/bchiha/Ready-Z80/tree/main/29-Multitasking"
              >Pre-emptive Z80 multitasking explainer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 12:39:52</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45720345"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719927">
          <h3>
            <a
              class="item"
              href="https://www.source-material.org/amazon-leak-reveals-true-data-centres-water-usage-secret-plan/"
              >Amazon strategised about keeping water use secret</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 11:53:22</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719927"
                  >Comments</a
                ><span class="descendants">: 192</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719788">
          <h3>
            <a class="item" href="https://boz.com/articles/you-are-how-you-act"
              >You are how you act</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 11:35:58</span
              ><span class="points-container"
                >Points: <span class="points">250</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719788"
                  >Comments</a
                ><span class="descendants">: 162</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719669">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/tech/ai/microsoft-needs-to-open-up-more-about-its-openai-dealings-59102de8"
              >Microsoft needs to open up more about its OpenAI dealings</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 11:19:27</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719669"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719140">
          <h3>
            <a
              class="item"
              href="https://blog.jim-nielsen.com/2025/dont-forget-these-html-tags/"
              >Don't forget these tags to make HTML work like you expect</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 10:01:12</span
              ><span class="points-container"
                >Points: <span class="points">272</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719140"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719004">
          <h3>
            <a class="item" href="https://github.com/longbridge/gpui-component"
              >Rust cross-platform GPUI components</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 09:44:18</span
              ><span class="points-container"
                >Points: <span class="points">366</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719004"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45718231">
          <h3>
            <a
              class="item"
              href="https://github.com/rolflobker/recall-for-linux"
              >Recall for Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 07:24:19</span
              ><span class="points-container"
                >Points: <span class="points">471</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45718231"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45717724">
          <h3>
            <a
              class="item"
              href="https://www.npmjs.com/package/vite-plugin-use-golang"
              >Show HN: Write Go code in JavaScript files</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 05:36:13</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45717724"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
            <div class="text">
              I built a Vite plugin that lets you write Go code directly in .js
              files using a "use golang" directive. It compiles to WebAssembly
              automatically.
            </div>
          </section>
        </section>
        <section id="45717397">
          <h3>
            <a class="item" href="https://tgvaughan.github.io/sicm/toc.html"
              >Structure and Interpretation of Classical Mechanics (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 04:27:45</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45717397"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45716109">
          <h3>
            <a
              class="item"
              href="https://lalinsky.com/2025/10/26/zio-async-io-for-zig.html"
              >How I turned Zig into my favorite language to write network
              programs in</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 00:01:17</span
              ><span class="points-container"
                >Points: <span class="points">302</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45716109"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45693871">
          <h3>
            <a class="item" href="https://openbsd.llvm.moe/"
              >OpenBSD C/C++ Toolchain in the Browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 12:17:48</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45693871"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45683643">
          <h3>
            <a
              class="item"
              href="https://www.su.se/english/news/unexpected-patterns-in-historical-astronomical-observations-1.855042"
              >Unexpected patterns in historical astronomical observations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-23 @ 16:16:35</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45683643"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45680583">
          <h3>
            <a class="item" href="https://fly.io/blog/corrosion/">Corrosion</a>
          </h3>
          <section>
            <h4>
              <span>2025-10-23 @ 11:21:04</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45680583"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45677253">
          <h3>
            <a
              class="item"
              href="https://thevoltablog.wordpress.com/2014/01/27/nicolas-mugaveros-eight-million-copies-of-moby-dick-or-the-whale/"
              >Eight Million Copies of Moby-Dick</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-23 @ 01:38:48</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45677253"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45669394">
          <h3>
            <a
              class="item"
              href="https://www.hacktivate.app/why-teach-kids-to-hack"
              >Why I'm teaching kids to hack computers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 14:07:03</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45669394"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45664765">
          <h3>
            <a
              class="item"
              href="https://www.vice.com/en/article/viral-free-potatoes-post-cost-this-farmer-150-tons-of-crops/"
              >Viral 'Free Potatoes' Post Cost This Farmer 150 Tons of Crops</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 03:59:42</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45664765"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45652998">
          <h3>
            <a class="item" href="https://geoutil.com"
              >Geoutil.com – Measure distances, areas, and convert geo data in
              the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-21 @ 06:20:38</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45652998"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
