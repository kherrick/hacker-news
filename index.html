<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46036222">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46036222"
              >Corvus Robotics (YC S18): Hiring Head of Mfg/Ops, Next Door to YC
              Mountain View</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 17:00:33</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Our fleet of flying warehouse drones is 5x-ing in 2026, and I'm
                looking for a generalist ex-founder or manufacturing leader in
                the SF Bay Area who wants to get their hands dirty massively
                scaling manufacturing operations in the US and overseas.
              </p>
              <p>
                We need someone who has worked on hardware products (not just
                SaaS), communicates clearly, and is relentlessly resourceful.
                Mandarin proficiency and leading a product through EVT/DVT/PVT
                is an added bonus.
              </p>
              <p>
                If this resonates with you, DM me, or send a super short email
                to a@ our url with: - why you’re interested - what was the
                biggest manufacturing fuckup you've recovered from - your target
                comp
              </p>
              <p>
                PS - Please reshare our LinkedIn post!
                <a
                  href="https://www.linkedin.com/posts/mhkabirr_at-corvus-robotics-were-scaling-the-largest-activity-7397916377002500096-WiLm"
                  >https://www.linkedin.com/posts/mhkabirr_at-corvus-robotics-w...</a
                >
              </p>
              <p>Thanks, Jackie</p>
            </div>
          </section>
        </section>
        <section id="46036217">
          <h3>
            <a
              class="item"
              href="https://mamot.fr/@LaQuadrature/115581775965025042"
              >France threatens GrapheneOS with arrests / server seizure for
              refusing backdoors</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 17:00:07</span
              ><span class="points-container"
                >Points: <span class="points">175</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46036217"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46035533">
          <h3>
            <a
              class="item"
              href="https://www.aikido.dev/blog/shai-hulud-strikes-again-hitting-zapier-ensdomains"
              >SHA1-Hulud the Second Comming – Postman, Zapier, PostHog All
              Compromised via NPM</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 16:03:36</span
              ><span class="points-container"
                >Points: <span class="points">213</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46035533"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46034145">
          <h3>
            <a class="item" href="https://www.blaizenterprises.com/cynthia.html"
              >Show HN: Cynthia – Reliably play MIDI music files – MIT /
              Portable / Windows</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 13:58:05</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46034145"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <p>
                Brief Background - Used midi playback way back in the days of
                Windows 95 for some fun and entertaining apps, but as Windows
                progressed, it seemed their midi support (for Win32 anyway)
                regressed in both startup speed and reliability. Midi playback
                used to be near instant on Windows 95, but on later versions of
                Windows this was delayed to about 5-7 seconds. And reliability
                became somewhat patchy. This made working with midi a real
                headache.
              </p>
              <p>
                Cynthia was built to test and enjoy midi music once again. It's
                taken over a year of solid coding, recoding, testing,
                re-testing, and a lot more testing, and some hair pulling along
                the way, but finally Cynthia works pretty solidly on Windows
                now.
              </p>
              <p>
                Some of Cynthia's Key Features: * 25 built-in sample midis on a
                virtual disk - play right out-of-the box * Play Modes: Once,
                Repeat One, Repeat All, All Once, Random * Play ".mid", ".midi"
                and ".rmi" midi files in 0 and 1 formats * Realtime track data
                indicators, channel output volume indicators with peak hold, 128
                note usage indicators * Volume Bars to display realtime average
                volume and bass volume levels * Use an Xbox Controller to
                control Cynthia's main functions * Large list capacity for
                handling thousands of midi files * Switch between up to 10 midi
                playback devices in realtime * Playback through a single midi
                device, or multiple simultaneous midi devices with lag and
                channel output support * Custom built midi playback engine for
                high playback stability * Custom built codebase for low-level
                work to GUI level * Also runs on Linux/Mac (including apple
                silicon) via Wine * Smart Source Code - compiles in Borland
                Delphi 3 and Lazarus 2 * MIT License
              </p>
              <p>
                YouTube Video of Cynthia playing a midi:
                <a href="https://youtu.be/IDEOQUboTvQ"
                  >https://youtu.be/IDEOQUboTvQ</a
                >
              </p>
              <p>
                GitHub Repo:
                <a href="https://github.com/blaiz2023/Cynthia"
                  >https://github.com/blaiz2023/Cynthia</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46034142">
          <h3>
            <a class="item" href="https://astra.arkforge.net/"
              >Fast Lua runtime written in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 13:57:53</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46034142"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46033330">
          <h3>
            <a class="item" href="https://issues.chromium.org/issues/40168998"
              >Chrome Jpegxl Issue Reopened</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 12:23:02</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46033330"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46033151">
          <h3>
            <a class="item" href="https://blog.cr.yp.to/20251123-dodging.html"
              >NSA and IETF, part 3: Dodging the issues at hand</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 12:00:55</span
              ><span class="points-container"
                >Points: <span class="points">229</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46033151"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46032694">
          <h3>
            <a
              class="item"
              href="https://nixiesearch.substack.com/p/i-put-a-real-search-engine-into-a"
              >I put a real search engine into a Lambda, so you only pay when
              you search</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 11:02:51</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46032694"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46032539">
          <h3>
            <a
              class="item"
              href="https://helixguard.ai/blog/malicious-sha1hulud-2025-11-24"
              >Shai-Hulud Returns: Over 300 NPM Packages Infected</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 10:40:22</span
              ><span class="points-container"
                >Points: <span class="points">596</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46032539"
                  >Comments</a
                ><span class="descendants">: 478</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46030613">
          <h3>
            <a class="item" href="https://cruzgodar.com/applets/lambda-calculus"
              >Lambda Calculus – Animated Beta Reduction of Lambda Diagrams</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 05:17:15</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46030613"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46029932">
          <h3>
            <a class="item" href="https://computer.rip/2025-11-22-RuBee.html"
              >RuBee</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 03:08:10</span
              ><span class="points-container"
                >Points: <span class="points">311</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46029932"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46029929">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/c8676qpxgnqo"
              >Japan's gamble to turn island of Hokkaido into global chip hub</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 03:07:07</span
              ><span class="points-container"
                >Points: <span class="points">240</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46029929"
                  >Comments</a
                ><span class="descendants">: 368</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46029908">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/jbreckmckye/32587f2907e473dd06d68b0362fb0048"
              >The Cloudflare outage might be a good thing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 03:04:10</span
              ><span class="points-container"
                >Points: <span class="points">221</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46029908"
                  >Comments</a
                ><span class="descendants">: 153</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46029889">
          <h3>
            <a class="item" href="https://gibberifier.com"
              >Show HN: Stun LLMs with thousands of invisible Unicode
              characters</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 03:00:31</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46029889"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
            <div class="text">
              <p>
                *Use cases:* Anti-plagiarism, text obfuscation against LLM
                scrapers, or just for fun!
              </p>
              <p>
                Even just one word's worth of “gibberified” text is enough to
                block most LLMs from responding coherently.
              </p>
            </div>
          </section>
        </section>
        <section id="46029699">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46029699"
              >Ask HN: Hearing aid wearers, what's hot?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 02:25:39</span
              ><span class="points-container"
                >Points: <span class="points">299</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46029699"
                  >Comments</a
                ><span class="descendants">: 166</span></span
              >
            </h4>
            <div class="text">
              <p>
                Moderate loss, have worn them for many years, enjoy listening to
                music and nature, but also need help in meetings and noisy
                environments.
              </p>
              <p>
                Not worried about cost and wanting to get one more good deal out
                of work insurance before I retire.
              </p>
            </div>
          </section>
        </section>
        <section id="46029534">
          <h3>
            <a
              class="item"
              href="https://matthogg.fyi/a-unified-theory-of-ego-empathy-and-humility-at-work/"
              >Ego, empathy, and humility at work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 02:01:02</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46029534"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46027216">
          <h3>
            <a class="item" href="https://microcad.xyz/"
              >µcad: New open source programming language that can generate 2D
              sketches and 3D</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-23 @ 20:51:22</span
              ><span class="points-container"
                >Points: <span class="points">352</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46027216"
                  >Comments</a
                ><span class="descendants">: 113</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46025942">
          <h3>
            <a class="item" href="https://emilysneddon.com/fran-sans-essay"
              >Fran Sans – font inspired by San Francisco light rail displays</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-23 @ 18:20:27</span
              ><span class="points-container"
                >Points: <span class="points">1072</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46025942"
                  >Comments</a
                ><span class="descendants">: 130</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46024541">
          <h3>
            <a
              class="item"
              href="https://lalitm.com/fixits-are-good-for-the-soul/"
              >We stopped roadmap work for a week and fixed bugs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-23 @ 16:06:46</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46024541"
                  >Comments</a
                ><span class="descendants">: 260</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46013132">
          <h3>
            <a class="item" href="https://www.simpleguide.net/serflings.xhtml"
              >Serflings is a remake of The Settlers 1</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-22 @ 08:26:13</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46013132"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46012846">
          <h3>
            <a
              class="item"
              href="https://lawrencecpaulson.github.io//2025/11/21/Typed_Set_Theory.html"
              >Set theory with types</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-22 @ 07:22:55</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46012846"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46006891">
          <h3>
            <a
              class="item"
              href="https://cloud.google.com/blog/products/containers-kubernetes/how-we-built-a-130000-node-gke-cluster/"
              >Building the largest known Kubernetes cluster, with 130k nodes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-21 @ 17:56:50</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46006891"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45996527">
          <h3>
            <a
              class="item"
              href="https://www.core77.com/posts/138995/Historically-Accurate-Airport-Dioramas-by-AV-Pro-Designs"
              >Historically Accurate Airport Dioramas by AV Pro Designs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-20 @ 19:21:27</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45996527"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45989284">
          <h3>
            <a
              class="item"
              href="https://blog.cuongle.dev/p/inside-rusts-std-and-parking-lot-mutexes-who-win"
              >Inside Rust's std and parking_lot mutexes – who wins?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-20 @ 05:32:13</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45989284"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45985306">
          <h3>
            <a class="item" href="https://imedadel.com/outcrop/"
              >I built a faster Notion in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 21:15:45</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45985306"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45985008">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-11-magnetic-component-faraday-effect-centuries.html"
              >New magnetic component discovered in the Faraday effect</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 20:53:42</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45985008"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45982280">
          <h3>
            <a class="item" href="https://github.com/exactlab/vhpc"
              >Show HN: Virtual SLURM HPC cluster in a Docker Compose</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 17:33:45</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45982280"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                As part of my job, I'm working on a software solution that needs
                to interact with one of the largest Italian HPC clusters (Cineca
                Leonardo, 270 PFLOPS). Of course developing on the production
                system was out of question, as it would have led to unbearably
                long feedback loops. I thus started looking around for existing
                containerised solutions, which were always lacking some key
                ingredient in order to suitably mock our target system
                (accounting, MPI, out of date software, ...).
              </p>
              <p>
                I thus decided that it was worth it to make my own virtual
                cluster from scratch, learning a thing or two about SLURM in the
                process. Even though it satisfies the particular needs of the
                project I'm working on, I tried to keep vHPC as simple and
                versatile as possible.
              </p>
              <p>
                I proposed the company to open source it, and as of this morning
                (CET) vHPC is FLOSS for others to use and tweak. I am around to
                answer any question.
              </p>
            </div>
          </section>
        </section>
        <section id="45981441">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2510.08874"
              >Slicing Is All You Need: Towards a Universal One-Sided
              Distributed MatMul</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 16:22:32</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45981441"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45977386">
          <h3>
            <a class="item" href="https://nnethercote.github.io/perf-book/"
              >The Rust Performance Book (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 09:08:10</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45977386"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45968827">
          <h3>
            <a
              class="item"
              href="https://pluralistic.net/2025/11/18/im-not-bad/"
              >Disney Lost Roger Rabbit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-18 @ 16:54:22</span
              ><span class="points-container"
                >Points: <span class="points">402</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45968827"
                  >Comments</a
                ><span class="descendants">: 194</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
