<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="35980656">
          <h3>
            <a
              class="item"
              href="https://empathynovel.substack.com/p/dear-substack-quit-sending-me-your"
              >Dear Substack: Quit Sending Me Your Corporate Propaganda</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 20:13:49</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35980656"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35979977">
          <h3>
            <a class="item" href="https://imslp.org/"
              >International Music Score Library Project (IMSLP)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 19:22:22</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35979977"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35979712">
          <h3>
            <a
              class="item"
              href="https://help.duckduckgo.com/duckduckgo-help-pages/company/advertise-on-duckduckgo-search/"
              >DuckDuckGo owns the #2 position in mobile market share in the
              US</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 19:02:15</span
              ><span class="points-container"
                >Points: <span class="points">235</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35979712"
                  >Comments</a
                ><span class="descendants">: 177</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35978864">
          <h3>
            <a class="item" href="https://github.com/ray-project/llm-numbers"
              >Numbers every LLM Developer should know</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 17:50:07</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35978864"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35978757">
          <h3>
            <a
              class="item"
              href="https://blog.mastermind.dev/indexes-in-postgresql"
              >Understanding Database Indexes in PostgreSQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 17:42:15</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35978757"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35978575">
          <h3>
            <a
              class="item"
              href="https://david-delassus.medium.com/astmaker-a-dsl-in-rust-for-programming-language-designers-99691a00b831"
              >Astmaker – A DSL in Rust for programming language designers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 17:30:30</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35978575"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35978445">
          <h3>
            <a
              class="item"
              href="https://requestmetrics.com/blog/product/google-analytics-4-has-me-so-frustrated-we-built-our-own-analytics-service/"
              >Google Analytics 4 was frustrating, so we built our own analytics
              service</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 17:22:19</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35978445"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35978151">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35978151"
              >Retool (YC W17) is hiring hackers to combine visual programming
              with AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 17:00:29</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re Retool (<a href="https://retool.com">https://retool.com</a
                >), a visual programming environment for building internal
                tools. Here’s a 3 minute demo video:
                <a
                  href="https://d3399nw8s4ngfo.cloudfront.net/videos/intro-to-retool.mp4"
                  >https://d3399nw8s4ngfo.cloudfront.net/videos/intro-to-retool...</a
                >.
              </p>
              <p>
                You can think of Retool as something like Visual Basic, but in
                the cloud. The idea is that there are lots of internal
                applications that businesses need, and today, build from scratch
                (probably via React). But while React is great for many things
                (our landing page is built in React, our product is built in
                React, etc.), it’s possible that it might be overkill for
                building a simple form that POSTs data back to your API. (Who
                _wants_ to worry about debouncing the submit button, handling
                errors from the backend, and authenticating and authorizing the
                users?)
              </p>
              <p>
                We launched on HN around five years ago (<a
                  href="https://news.ycombinator.com/item?id=17725966"
                  >https://news.ycombinator.com/item?id=17725966</a
                >). Since then, we’ve launched three new products – a native
                mobile product (<a href="https://retool.com/products/mobile"
                  >https://retool.com/products/mobile</a
                >), an automation product for developers (<a
                  href="https://retool.com/products/workflows/"
                  >https://retool.com/products/workflows/</a
                >), and a database product (<a
                  href="https://retool.com/products/database/"
                  >https://retool.com/products/database/</a
                >). We’ve hired and grown the team to over 350, and are proud to
                have businesses like Doordash, NBC Universal, Mercedes Benz, and
                the NFL using Retool.
              </p>
              <p>
                The network at Retool is also fairly strong — our lead investors
                in the Series B and C were Sequoia, along with Elad Gil, Nat
                Friedman, as well as John and Patrick Collison. Other investors
                include the founders of Github, Gusto, Segment, PagerDuty,
                Plaid, etc.
              </p>
              <p>
                This year, while other companies are downsizing, we’re doubling
                down. (Literally.) We’re attempting to double our engineering,
                product, and design orgs this year. We think the opportunity to
                invent the future of programming is enormous, and we’re looking
                for more hackers to join our team.
              </p>
              <p>
                We think that AI is going to change the way people build
                software. We think that there is tremendous potential in
                building interfaces that help humans and AI collaborate together
                to build software. We want to build a world where humans can
                quickly assemble full applications by just providing high level
                directions to AI.
              </p>
              <p>
                We believe we’re set up especially well to do just that – we
                have all the building blocks for creating software (frontends,
                backend compute, data storage) as well as a live interactive
                builder environment. Why entangle yourself with messy things
                like Webpack, Docker, and Kubernetes when you can directly
                manipulate a live app, running right in front of you?
              </p>
              <p>
                We also think that the world, as a whole, is under-utilizing AI.
                Businesses are broadly interested in generative AI and LLMs, but
                don’t know how yet to leverage and use them. It should be simple
                for businesses to quickly set up flows to have AI automatically
                triage bug reports, summarize customer feedback, and enrich
                datasets.
              </p>
              <p>
                We’ve shared a sneak peak of what we think some of this could
                look like (<a href="https://retool.com/blog/gpt4-in-retool/"
                  >https://retool.com/blog/gpt4-in-retool/</a
                >), and there’s a bunch more coming up that we’re really excited
                to talk about soon.
              </p>
              <p>
                If you’re interested in working with AIs and LLMs to change the
                way companies build software, we’d love to hear from you. We've
                made multiple hires from HN in the past, so we’re posting here.
                But if you know any friends who are interested, feel free to
                tell them to reach out as well.
              </p>
              <p>
                Please email us at snir AT retool with “HN” in the subject line.
              </p>
              <p>Thanks!</p>
            </div>
          </section>
        </section>
        <section id="35977891">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35977891"
              >Ask HN: Can someone ELI5 Transformers and the “Attention is all
              we need” paper</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 16:43:26</span
              ><span class="points-container"
                >Points: <span class="points">219</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35977891"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
            <div class="text">
              <p>Makes me want to better understand this tech.</p>
              <p>
                Edit: thank you for some amazing top level responses and links
                to valuable content on this subject.
              </p>
            </div>
          </section>
        </section>
        <section id="35977057">
          <h3>
            <a
              class="item"
              href="https://blog.bigpicture.io/introducing-the-worlds-largest-open-source-company-dataset/"
              >A raw dump of companies from all over the world by LinkedIn
              handle</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 15:50:08</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35977057"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35976891">
          <h3>
            <a
              class="item"
              href="https://ishadeed.com/article/conditional-css-has-nth-last-child/"
              >Conditional CSS with:has and:nth-last-child</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 15:40:39</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35976891"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35976743">
          <h3>
            <a
              class="item"
              href="https://boulderbeat.news/2023/05/12/controlled-burn-rules/"
              >Controlled burns help prevent wildfires; regulations make them
              nearly impossible</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 15:30:09</span
              ><span class="points-container"
                >Points: <span class="points">331</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35976743"
                  >Comments</a
                ><span class="descendants">: 157</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35976488">
          <h3>
            <a class="item" href="https://beepberry.sqfmi.com/"
              >Show HN: Beepberry – a portable e-paper computer for hackers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 15:13:53</span
              ><span class="points-container"
                >Points: <span class="points">202</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35976488"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
            <div class="text">
              <p>
                I wanted to create a ‘weekend’ device that would let me stay in
                touch with friends and family, without the distractions of a
                full smartphone. I imagined a tiny, hackable e-paper screen with
                a physical keyboard, powered by a Raspberry Pi, that I could use
                to chat around my home…and pretty much nothing else.
              </p>
              <p>
                Before Beeper, the idea probably would not have gone anywhere.
                Most chat apps do not have an API, making it practically
                impossible to hack something like this together. Enter Beeper,
                with connections to 15+ chat networks. Built on top of Matrix,
                Beeper is fully hackable. You can write alternative fun clients
                [1], bots [2] and more!
              </p>
              <p>
                Today, sqfmi is starting to take pre-orders at
                <a href="https://beepberry.sqfmi.com"
                  >https://beepberry.sqfmi.com</a
                >
                for the first batch. It’s $79 (or $99 including a Pi Zero).
                Specs: Sharp Memory LCD (same display tech as in Pebble!), Pi
                Zero (BT/WIFI), physical keyboard, 2000mAh lipo.
              </p>
              <p>
                On top of being an amazing Beeper chat device, it’s basically an
                e-paper Cyberdeck that fits in your pocket. It’s a ton of fun to
                hack on. Keep in mind - THIS IS NOT A REAL FINISHED PRODUCT.
                It’s basically a devkit.
              </p>
              <p>
                More info in the blog post:
                <a href="https://blog.beeper.com/p/beeper-x-sqmfi-beepberry"
                  >https://blog.beeper.com/p/beeper-x-sqmfi-beepberry</a
                >, or join the Discord/Matrix channel
                <a
                  href="https://beepberry.sqfmi.com/docs/getting-started#join-the-beepberry-discord"
                  >https://beepberry.sqfmi.com/docs/getting-started#join-the-be...</a
                >. I’ll hang out a bit here to answer questions as well.
              </p>
              <p>
                [0] <a href="https://beeper.com">https://beeper.com</a> [1]
                <a href="https://github.com/tulir/gomuks"
                  >https://github.com/tulir/gomuks</a
                >
                [2]
                <a href="https://github.com/maubot/maubot"
                  >https://github.com/maubot/maubot</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="35975880">
          <h3>
            <a
              class="item"
              href="https://worldsensorium.com/the-regenerating-power-of-big-basins-redwoods/"
              >The Regenerating Power of Big Basin’s Redwoods</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 14:41:41</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35975880"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35975578">
          <h3>
            <a
              class="item"
              href="https://stability.ai/blog/stablestudio-open-source-community-driven-future-dreamstudio-release"
              >StableStudio, an open-source release of DreamStudio</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 14:21:51</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35975578"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35975353">
          <h3>
            <a
              class="item"
              href="https://med.stanford.edu/news/all-news/2023/05/depression-reverse-brain-signals.html"
              >Researchers treat depression by reversing brain signals traveling
              the wrong way</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 14:03:12</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35975353"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35974965">
          <h3>
            <a class="item" href="https://getpinbot.com"
              >Show HN: Pinbot – An extension to privately search one's browser
              history with AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 13:28:58</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35974965"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35974845">
          <h3>
            <a
              class="item"
              href="https://smyachenkov.com/posts/book-review-the-staff-engineers-path/"
              >The Staff Engineer's Path – Book Review</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 13:18:48</span
              ><span class="points-container"
                >Points: <span class="points">230</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35974845"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35974080">
          <h3>
            <a class="item" href="https://retrocomputermuseum.co.uk/"
              >Retro Computer Museum</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 12:02:42</span
              ><span class="points-container"
                >Points: <span class="points">216</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35974080"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35973947">
          <h3>
            <a
              class="item"
              href="https://www.aidemos.info/summarize-any-article-as-a-dialog-between-two-people-with-bing-chat/"
              >Summarize Any Article as a Dialog Between Two People with Bing
              Chat</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 11:45:43</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35973947"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35973882">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2023-05-16/americans-have-never-been-so-unwilling-to-relocate-for-a-new-job"
              >Americans Have Never Been So Unwilling to Relocate for a New
              Job</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 11:37:16</span
              ><span class="points-container"
                >Points: <span class="points">324</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35973882"
                  >Comments</a
                ><span class="descendants">: 594</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35972112">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35972112"
              >Show HN: Speeding up the code-test cycle for Java developers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 07:04:24</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35972112"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                Direct Invoke - lets you call any Java function directly,
                without the need to execute the whole call hierarchy. (e.g. an
                HTTP endpoint) In my normal coding workflow, I use the “Evaluate
                Expression” feature inside IntelliJ IDE. I usually put a
                breakpoint somewhere in the code and after hitting the
                breakpoint by calling an HTTP api, let the execution remain
                paused while I explore and see the return values of functions.
                “Evaluate Expression” was quite useful in exploring new
                codebases and checking return values of my own functions as a
                sanity test. The direct invoke feature implements the same
                functionality without needing to hit a breakpoint. Now, I can
                just navigate to any function in the editor and execute it. The
                parameter values are input as JSON and deserialize to an object
                of the required class instances.
              </p>
              <p>
                Atomic Run - lets you hot-reload the code changes and highlights
                the difference in the return values of the changed function
                before and after the hot-reload. I feel Atomic Run has the
                potential of replacing unit test cases, but there is a long way
                to go. I am thinking of implementing
              </p>
              <p></p>
              <pre><code>  - Option for mocking dependency calls: We want to give the developer more control over the testing environment by allowing them to mock downstream dependency calls.


  - Customizing assertions: Not all differences in return values indicate breaking changes. Assertions should be flexible to accommodate non-breaking changes.


  - Workflow to save this data to a file (thinking something like JSON based fixtures): making it easier to organize and reuse test data.

</code></pre>
              This plugin is still in the early stages, so we'd appreciate your
              help in ironing out any bugs you come across. Get in touch with me
              on my discord channel.
              <p>
                To try it out, install Unlogged from the IntelliJ Marketplace
                and start your java application using the java agent (the plugin
                has instructions to download)
              </p>
              <p>
                Link to try the plugin:
                <a href="https://plugins.jetbrains.com/plugin/18529-unlogged"
                  >https://plugins.jetbrains.com/plugin/18529-unlogged</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="35972096">
          <h3>
            <a
              class="item"
              href="https://github.com/madprops/blog/blob/main/docs/timers.md"
              >Give your brain time to think and remember</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-17 @ 07:00:31</span
              ><span class="points-container"
                >Points: <span class="points">269</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35972096"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35965824">
          <h3>
            <a
              class="item"
              href="https://web.archive.org/web/20080220175358/http://www.andrew-turnbull.net/tech/windows95.html"
              >I Still Use Windows 95 (2008)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-16 @ 18:35:51</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35965824"
                  >Comments</a
                ><span class="descendants">: 206</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35958460">
          <h3>
            <a
              class="item"
              href="https://www.infoq.com/articles/dropbox-magic-pocket-exabyte-storage/"
              >Magic Pocket: Dropbox’s Exabyte-Scale Blob Storage System</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-16 @ 06:49:30</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35958460"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35951594">
          <h3>
            <a
              class="item"
              href="https://hub.jhu.edu/magazine/2018/fall/cordwainer-smith-paul-linebarger/"
              >Paul Linebarger wrote science fiction as Cordwainer Smith
              (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-15 @ 17:28:42</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35951594"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35948987">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2023/05/the-complicated-history-of-how-the-earths-atmosphere-became-breathable/"
              >The complicated history of how the Earth’s atmosphere became
              breathable</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-15 @ 14:43:40</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35948987"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35947915">
          <h3>
            <a
              class="item"
              href="https://blog.jim-nielsen.com/2023/deadlines-as-technology/"
              >Deadlines as Technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-15 @ 13:36:15</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35947915"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35947125">
          <h3>
            <a
              class="item"
              href="https://www.quora.com/What-were-the-worst-jobs-for-poor-Romans-in-Ancient-Rome"
              >What were the worst jobs for poor Romans in Ancient Rome?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-15 @ 12:28:51</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35947125"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35945941">
          <h3>
            <a
              class="item"
              href="http://jackkelly.name/blog/archives/2023/05/14/the_maddest_my_code_made_anyone/"
              >The Maddest My Code Made Anyone</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-15 @ 10:18:09</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35945941"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
