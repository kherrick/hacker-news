<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44187645">
          <h3>
            <a
              class="item"
              href="https://seve.blog/p/i-made-a-3d-svg-renderer-that-projects"
              >Show HN: I made a 3D SVG Renderer that projects textures without
              rasterization</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-05 @ 02:05:33</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44187645"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44187518">
          <h3>
            <a
              class="item"
              href="https://www.kansas.com/entertainment/restaurants/dining-with-denise-neil/article226933934.html"
              >Couple has eaten at the same restaurant six nights a week for 15
              years (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-05 @ 01:42:55</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44187518"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44187457">
          <h3>
            <a
              class="item"
              href="http://www.astroautopens.com/autopen_guide1.shtml"
              >Autopen Guide</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-05 @ 01:32:51</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44187457"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44186780">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/legal/government/musks-tesla-seeks-guard-crash-data-public-disclosure-2025-06-04/"
              >Tesla seeks to guard crash data from public disclosure</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 23:40:47</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44186780"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44186736">
          <h3>
            <a
              class="item"
              href="https://mattrighetti.com/2025/05/03/authentication-with-axum"
              >Authentication with Axum</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 23:33:41</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44186736"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44186660">
          <h3>
            <a
              class="item"
              href="https://iopscience.iop.org/article/10.3847/1538-4357/adbf9b"
              >A Spiral Structure in the Inner Oort Cloud</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 23:22:07</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44186660"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44186607">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2506.03142"
              >Not All Tokens Are Meant to Be Forgotten</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 23:15:48</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44186607"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44186536">
          <h3>
            <a class="item" href="https://github.com/hugomd/parrot.live"
              >parrot.live</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 23:05:32</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44186536"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44186496">
          <h3>
            <a
              class="item"
              href="https://www.zachdaniel.dev/p/llms-and-elixir-windfall-or-deathblow"
              >LLMs and Elixir: Windfall or Deathblow?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 23:00:35</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44186496"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44186459">
          <h3>
            <a class="item" href="https://github.com/foambubble/foam"
              >Foam: A free Roam alternative for VSCode</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 22:57:08</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44186459"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44186284">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/promptarmor/jobs/hZ3xFlj-founding-engineer-full-stack"
              >PromptArmor (YC W24) Is Hiring in San Francisco</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 22:35:56</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44185913">
          <h3>
            <a
              class="item"
              href="https://mastodon.laurenweinstein.org/@lauren/114627064774788581"
              >After court order, OpenAI is now preserving all ChatGPT user
              logs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 21:47:33</span
              ><span class="points-container"
                >Points: <span class="points">532</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44185913"
                  >Comments</a
                ><span class="descendants">: 369</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44185836">
          <h3>
            <a
              class="item"
              href="https://www.dbreunig.com/2025/06/03/comparing-system-prompts-across-claude-versions.html"
              >Comparing Claude System Prompts Reveal Anthropic's Priorities</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 21:38:27</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44185836"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44185256">
          <h3>
            <a class="item" href="https://www.cursor.com/en/changelog/1-0"
              >Cursor 1.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 20:39:53</span
              ><span class="points-container"
                >Points: <span class="points">188</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44185256"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44185158">
          <h3>
            <a class="item" href="https://github.com/jaschadub/VectorSmuggle"
              >VectorSmuggle: Covertly Exfiltrate Data in Embeddings</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 20:31:37</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44185158"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44185078">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2025/06/09/amelia-earharts-reckless-final-flights"
              >Amelia Earhart's Reckless Final Flights</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 20:24:07</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44185078"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44184900">
          <h3>
            <a
              class="item"
              href="https://www.tudelft.nl/en/2025/lr/autonomous-drone-from-tu-delft-defeats-human-champions-in-historic-racing-first"
              >Autonomous drone defeats human champions in racing first</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 20:03:43</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44184900"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44184861">
          <h3>
            <a
              class="item"
              href="https://www.adacore.com/press/ada-and-spark-enter-the-automotive-iso-26262-market-with-nvidia"
              >Ada and SPARK enter the automotive ISO-26262 market with
              Nvidia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 19:59:51</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44184861"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44183923">
          <h3>
            <a
              class="item"
              href="https://www.macrumors.com/2025/06/04/apple-notes-rumored-markdown-support-ios-26/"
              >Apple Notes Expected to Gain Markdown Support in iOS 26</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 18:29:46</span
              ><span class="points-container"
                >Points: <span class="points">172</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44183923"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44183799">
          <h3>
            <a
              class="item"
              href="https://github.com/explainers-by-googlers/local-network-access"
              >A proposal to restrict sites from accessing a users’ local
              network</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 18:15:54</span
              ><span class="points-container"
                >Points: <span class="points">277</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44183799"
                  >Comments</a
                ><span class="descendants">: 165</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44183591">
          <h3>
            <a
              class="item"
              href="https://tech.marksblogg.com/apple-iphone-15-pro-depth-map-heic.html"
              >The iPhone 15 Pro’s Depth Maps</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 17:57:15</span
              ><span class="points-container"
                >Points: <span class="points">236</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44183591"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182698">
          <h3>
            <a
              class="item"
              href="https://www.softwareheritage.org/2025/06/04/history_computer_vision/"
              >When memory was measured in kilobytes: The art of efficient
              vision</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:46:24</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182698"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182356">
          <h3>
            <a
              class="item"
              href="https://chrisgiven.com/2025/05/direct-file-on-github/"
              >IRS Direct File on GitHub</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:16:39</span
              ><span class="points-container"
                >Points: <span class="points">507</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182356"
                  >Comments</a
                ><span class="descendants">: 221</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/IRS-Public/direct-file"
                >https://github.com/IRS-Public/direct-file</a
              >
            </div>
          </section>
        </section>
        <section id="44182206">
          <h3>
            <a class="item" href="https://www.adamcad.com/"
              >Show HN: GPT image editing, but for 3D models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:00:52</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182206"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’m Zach one of the co-founders of Adam (<a
                  href="https://www.adamcad.com"
                  >https://www.adamcad.com</a
                >). We're building AI-powered tools for CAD and 3D modeling [1].
              </p>
              <p>
                We’ve recently been exploring a new way to bring GPT-style image
                editing directly into 3D model generation and are excited to
                showcase this in our web-app today. We’re calling it creative
                mode and are intrigued by the fun use cases this could create by
                making 3D generation more conversational!
              </p>
              <p>
                For example you can put a prompt in such as “an elephant” then
                follow it up by “have it ride a skateboard” and it preserves the
                context, identity and maintains consistency with the previous
                model. We believe this lends itself better to an iterative
                design process when prototyping creative 3D assets or models for
                printing.
              </p>
              <p>
                We’re offering everyone 10 free generations to start (ramping up
                soon!). Here’s a short video explaining how it works:
                <a
                  href="https://www.loom.com/share/cf9ab91375374a4f93d6cc89619a043b"
                  >https://www.loom.com/share/cf9ab91375374a4f93d6cc89619a043b</a
                >
              </p>
              <p>
                We’d also love you to try our parametric mode (free!) which uses
                LLMs to create a conversational interface for solid modeling as
                touched on in a recent HN thread [2]. We are leveraging the code
                generation capabilities of these models to generate OpenSCAD
                code (an open-source script based CAD) and are surfacing the
                variables as sliders the user can toggle to adjust their design.
                We hope this can give a glimpse into what it could be like to
                “vibe-CAD”. We will soon be releasing our results on Will
                Patrick's Text to CAD eval [3] and adding B-rep compatible
                export!
              </p>
              <p>
                We’d love to hear what you think and where we should take this
                next :)
              </p>
              <p>
                [1]<a href="https://x.com/zachdive/status/1882858765613228287"
                  >https://x.com/zachdive/status/1882858765613228287</a
                >
              </p>
              <p>
                [2]<a href="https://news.ycombinator.com/item?id=43774990"
                  >https://news.ycombinator.com/item?id=43774990</a
                >
              </p>
              <p>
                [3]<a
                  href="https://willpatrick.xyz/technology/2025/04/23/teaching-llms-how-to-solid-model.html"
                  >https://willpatrick.xyz/technology/2025/04/23/teaching-llms-...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44182188">
          <h3>
            <a
              class="item"
              href="https://addyo.substack.com/p/the-prompt-engineering-playbook-for"
              >The Prompt Engineering Playbook for Programmers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 15:58:57</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182188"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182186">
          <h3>
            <a
              class="item"
              href="https://git.ffmpeg.org/gitweb/ffmpeg.git/commit/167e343bbe75515a80db8ee72ffa0c607c944a00"
              >FFmpeg merges WebRTC support</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 15:58:50</span
              ><span class="points-container"
                >Points: <span class="points">601</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182186"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182184">
          <h3>
            <a
              class="item"
              href="https://letsencrypt.org/2025/06/04/how-we-reduced-the-impact-of-zombie-clients/"
              >How we reduced the impact of zombie clients</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 15:58:36</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182184"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44181700">
          <h3>
            <a
              class="item"
              href="https://cdn.openai.com/business-guides-and-resources/a-practical-guide-to-building-agents.pdf"
              >A practical guide to building agents [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 15:21:22</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44181700"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44181613">
          <h3>
            <a
              class="item"
              href="https://thegradient.pub/agi-is-not-multimodal/"
              >AGI is not multimodal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 15:15:33</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44181613"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44179257">
          <h3>
            <a
              class="item"
              href="https://happihacking.com/blog/posts/2025/why_I_wrote_theBEAMBook/"
              >Why I wrote the BEAM book</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 10:36:49</span
              ><span class="points-container"
                >Points: <span class="points">438</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44179257"
                  >Comments</a
                ><span class="descendants">: 118</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
