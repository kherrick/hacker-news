<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44494430">
          <h3>
            <a class="item" href="https://words.filippo.io/run-sunlight/"
              >You Should Run a Certificate Transparency Log</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 20:36:54</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44494430"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44494255">
          <h3>
            <a
              class="item"
              href="https://www.aditharun.com/p/how-did-x-rays-gain-mass-adoption"
              >How did X-Rays gain mass adoption?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 20:18:30</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44494255"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44493640">
          <h3>
            <a
              class="item"
              href="https://www.collabora.com/news-and-blog/news-and-events/introducing-tyr-a-new-rust-drm-driver.html"
              >Tyr, a new Rust DRM driver targeting CSF-based ARM Mali GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 19:07:13</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44493640"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44493196">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/new-sphere-packing-record-stems-from-an-unexpected-source-20250707/"
              >New sphere-packing record stems from an unexpected source</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 18:19:13</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44493196"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44492986">
          <h3>
            <a
              class="item"
              href="https://markushimmel.de/blog/my-first-verified-imperative-program/"
              >My first verified imperative program</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 17:58:04</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44492986"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44492405">
          <h3>
            <a class="item" href="https://github.com/ossia/score"
              >Show HN: Ossia score – a sequencer for audio-visual artists</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 17:07:05</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44492405"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44491938">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44491938"
              >Show HN: I Got Tired of Calculator Sites, So I Built My Own</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 16:24:19</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44491938"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’ve noticed that fraction calculators (especially mixed
                fractions) are terrible to use, even on desktop. I haven’t built
                one of those yet, but it’s something I’m planning to tackle
                soon.
              </p>
              <p>
                This is a project I’ve always wanted to work on, but I’m
                relatively new to this space. So far, I’ve created a collection
                of simple calculators focused on math and finance.
              </p>
              <p>
                I’d really appreciate any feedback on the UI/UX or anything else
                you think could be improved.
              </p>
              <p>
                You can try it here:
                <a href="https://CalculateHow.com">https://CalculateHow.com</a>
              </p>
            </div>
          </section>
        </section>
        <section id="44491860">
          <h3>
            <a class="item" href="https://sus-lang.org/"
              >SUS Lang: The SUS Hardware Description Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 16:16:49</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44491860"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44491333">
          <h3>
            <a
              class="item"
              href="https://yidingjiang.github.io/blog/post/exploration/"
              >The Era of Exploration</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 15:23:57</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44491333"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44491071">
          <h3>
            <a
              class="item"
              href="https://www.holovaty.com/writing/chatgpt-fake-feature/"
              >Adding a feature because ChatGPT incorrectly thinks it exists</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 14:58:09</span
              ><span class="points-container"
                >Points: <span class="points">546</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44491071"
                  >Comments</a
                ><span class="descendants">: 206</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44490863">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44490863"
              >Launch HN: Morph (YC S23) – Apply AI code edits at 4,500
              tokens/sec</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 14:40:45</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44490863"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
            <div class="text">
              <p>
                Here's a demo video:
                <a href="https://www.youtube.com/watch?v=LdT8epGHJPk"
                  >https://www.youtube.com/watch?v=LdT8epGHJPk</a
                >.
              </p>
              <p>
                Why? AI spits out code that can’t reliably be inserted into
                existing code. Full file rewrites, brittle search-and-replace
                hacks are too slow, expensive, or error-prone.
              </p>
              <p>Morph's approach:</p>
              <p>
                - Your agent outputs edits “lazily”, referencing unmodified
                lines in the existing file (ex: // ...existing code...)
              </p>
              <p>
                - Morph instantly applies these edits to a file using our Fast
                Apply model + speculative decoding against the original file,
                making AI patches fast, reliable, and production-ready.
              </p>
              <p>
                This approach was pioneered by Cursor last year, but their
                models aren’t available as APIs—so we built Morph for developers
                everywhere (with a large free tier!)
              </p>
              <p>
                Live demo (no signup):
                <a href="https://morphllm.com/dashboard"
                  >https://morphllm.com/dashboard</a
                >
                and docs:
                <a href="https://docs.morphllm.com/quickstart"
                  >https://docs.morphllm.com/quickstart</a
                >
              </p>
              <p>
                We have 2 Fast Apply models: morph-v3-fast - 4500+ tok/sec, and
                morph-v3-large - 2500+ tok/sec. These models power Fast Apply at
                create.xyz, databutton, continue.dev, and more!
              </p>
              <p>
                We also provide retrieval models for embedding + reranking. Next
                Up: Inline Edit Model (Cmd-K): Extremely fast inline edits -
                keep dev flow state; and Morph Tab API: Our Next Edit Prediction
                model guesses your next code edit + action with sub-500ms
                latency. It's currently in private beta, but you can request
                early access here:
                <a href="https://morphllm.com/tab">https://morphllm.com/tab</a>
              </p>
              <p>Hot takes:</p>
              <p>
                1) Raw inference speed matters more than incremental accuracy
                gains for dev UX—agree or disagree?
              </p>
              <p>
                2) Full-file rewrites by frontier models are legacy—Fast Apply
                edits win on speed, cost, reliability.
              </p>
              <p>
                3) As benchmarks on narrow tasks saturate to 99%+, complexity is
                shifting from single frontier models to specialized
                inference-optimized models. As frontier models move upmarket,
                they'll leave simple tasks behind, and they'll be used to do
                tasks only frontier models can do
              </p>
              <p>
                We’d love to hear your ideas and experiences with coding agents!
              </p>
            </div>
          </section>
        </section>
        <section id="44490588">
          <h3>
            <a class="item" href="https://buildmytransit.nyc"
              >Show HN: NYC Subway Simulator and Route Designer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 14:13:56</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44490588"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              <p>
                As a long term NYC resident, I have read countless articles on
                ideas tweaking subway services, but always found them hard to
                follow without visual aid. So over the long weekend I decided to
                build one. It has all the basic features: trains would spawn at
                their origin, stop at stations, and slow down if it gets too
                close to another. You can also design custom routes by piecing
                tracks together.
              </p>
              <p>Have fun, and let me know what you think!</p>
            </div>
          </section>
        </section>
        <section id="44490386">
          <h3>
            <a
              class="item"
              href="https://thetumultuousunicornofdarkness.github.io/CPU-X/"
              >CPU-X: CPU-Z for Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 13:52:51</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44490386"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44489803">
          <h3>
            <a
              class="item"
              href="https://noperator.dev/posts/o3-pocket-profile/"
              >I used o3 to profile myself from my saved Pocket links</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 12:44:19</span
              ><span class="points-container"
                >Points: <span class="points">254</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44489803"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44489690">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2506.17298"
              >Mercury: Ultra-fast language models based on diffusion</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 12:31:08</span
              ><span class="points-container"
                >Points: <span class="points">337</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44489690"
                  >Comments</a
                ><span class="descendants">: 132</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44488331">
          <h3>
            <a
              class="item"
              href="https://www.businessinsider.com/anthropic-cut-pirated-millions-used-books-train-claude-copyright-2025-6"
              >Anthropic cut up millions of used books, and downloaded 7M
              pirated ones – judge</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 09:20:38</span
              ><span class="points-container"
                >Points: <span class="points">335</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44488331"
                  >Comments</a
                ><span class="descendants">: 467</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44485342">
          <h3>
            <a class="item" href="https://github.com/jackjackbits/bitchat"
              >Bitchat – A decentralized messaging app that works over Bluetooth
              mesh networks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 00:05:46</span
              ><span class="points-container"
                >Points: <span class="points">629</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44485342"
                  >Comments</a
                ><span class="descendants">: 293</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44484682">
          <h3>
            <a
              class="item"
              href="http://addxorrol.blogspot.com/2025/07/a-non-anthropomorphized-view-of-llms.html"
              >A non-anthropomorphized view of LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-06 @ 22:26:44</span
              ><span class="points-container"
                >Points: <span class="points">394</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44484682"
                  >Comments</a
                ><span class="descendants">: 338</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44482965">
          <h3>
            <a class="item" href="https://alpha.lisagui.com/"
              >Show HN: I wrote a "web OS" based on the Apple Lisa's UI, with
              1-bit graphics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-06 @ 18:32:55</span
              ><span class="points-container"
                >Points: <span class="points">464</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44482965"
                  >Comments</a
                ><span class="descendants">: 130</span></span
              >
            </h4>
            <div class="text">
              <a href="https://lisagui.com/info.html"
                >https://lisagui.com/info.html</a
              >
              <p>
                This is a web OS I wrote in vanilla JS that looks like the Apple
                Lisa Office System (1983-85), with other contemporaneous
                influences and additional improvements and features. It's
                currently in alpha and isn't remotely bug free. I had been
                holding off on posting this here until it was somewhat
                presentable and useful. Please note; the Lisa conforms more
                literally to the desktop metaphor than most modern GUIs - some
                of the important differences are mentioned in the readme.
              </p>
              <p>
                This is a complete recreation of the UI in JS; it all renders to
                a single canvas element. It's not a CSS theme, and not an
                emulator ported to JS. None of the code is written by Apple.
                I'll be happy to elaborate more in the comments, but the short
                version is the entire UI is defined outside the DOM using JS
                objects. Thus, every interface element - menus, windows,
                controls, and even typefaces - was recreated from scratch. There
                are no font files - I wrote my own typesetting system, which
                supports combining multiple text styles and generates new glyph
                variants on the fly.
              </p>
              <p>
                Many of the technical decisions I made were motivated by a
                desire to have this look the same in every browser. That's
                harder to do with the DOM and CSS, and why I moved as much logic
                as I could to JS. Also, the only part of the project outside of
                vanilla JS and standard web APIs is the Gulp toolkit, which I'm
                using as a minification/build tool. No vibe coding was used to
                make this!
              </p>
              <p>
                This is based on a UI from the 80s, and won't work well on your
                phone. If you insist on running it that way, turn on trackpad
                mode in the touchscreen settings panel of the preferences app.
                For best results, install it as a PWA (add it to your home
                screen). Also there are some odd Android bugs; the native
                touchscreen keyboard is currently broken, and there's an issue
                with the cursor when dragging windows.
              </p>
              <p>
                I realize there's not a whole lot to do within LisaGUI right
                now; I've got a big list of additional features and apps I'll be
                adding in the future. I've been working on this project for a
                while, and I'm eager to hear people's feedback and answer
                questions about it.
              </p>
            </div>
          </section>
        </section>
        <section id="44479502">
          <h3>
            <a
              class="item"
              href="https://designsystems.international/ideas/when-figma-starts-designing-us/"
              >When Figma starts designing us</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-06 @ 10:38:27</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44479502"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44476382">
          <h3>
            <a
              class="item"
              href="https://mildbyte.xyz/blog/solving-wordle-with-uv-dependency-resolver/"
              >Solving Wordle with uv's dependency resolver</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-05 @ 23:28:30</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44476382"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44476339">
          <h3>
            <a
              class="item"
              href="https://arjo129.github.io/blog/5-7-2025-From-Photos-To-Positions-Prototyping.html"
              >Show HN: From Photos to Positions: Prototyping VLM-Based Indoor
              Maps</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-05 @ 23:19:28</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44476339"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              Just a fun hack I did while bored over the weekend. My wife was
              busy shopping, it got me thinking that can VLMs solve the indoor
              location problem in a mall? Can I just show a VLM a map and an
              image and have it doa good enough job locating me? I hacked this
              P.O.C and it seems to work.
            </div>
          </section>
        </section>
        <section id="44470942">
          <h3>
            <a
              class="item"
              href="https://www.futureecologies.net/listen/fe-6-5-the-method"
              >The Miyawaki Method of micro-forestry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-05 @ 08:02:56</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44470942"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44468753">
          <h3>
            <a
              class="item"
              href="https://sarahrenaeclark.com/lightfast-testing-pencils/"
              >Lightfastness Testing of Colored Pencils</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-04 @ 23:15:18</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44468753"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44467838">
          <h3>
            <a class="item" href="https://github.com/ZaneH/piano-trainer"
              >Show HN: Piano Trainer – Learn piano scales, chords and more
              using MIDI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-04 @ 20:58:53</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44467838"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44466143">
          <h3>
            <a
              class="item"
              href="https://mathshistory.st-andrews.ac.uk/Extras/Babbage_deciphering/"
              >Charles Babbage and deciphering codes (1864)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-04 @ 17:03:31</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44466143"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44463429">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/future/article/20250701-the-chemical-secrets-that-help-keep-honey-fresh-for-so-long"
              >The chemical secrets that help keep honey fresh for so long</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-04 @ 11:04:41</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44463429"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44461082">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-07-hymn-babylon-millennium.html"
              >Hymn to Babylon, missing for a millennium, has been discovered</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-04 @ 04:16:12</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44461082"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44460498">
          <h3>
            <a
              class="item"
              href="https://archaeologymag.com/2025/07/neanderthals-operated-fat-factory-125000-years-ago/"
              >Neanderthals operated prehistoric “fat factory” on German
              lakeshore</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-04 @ 01:45:15</span
              ><span class="points-container"
                >Points: <span class="points">211</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44460498"
                  >Comments</a
                ><span class="descendants">: 160</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44455175">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=5QcCeSsNRks"
              >François Chollet: The Arc Prize and How We Get to AGI [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 14:00:16</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44455175"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
