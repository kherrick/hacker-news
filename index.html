<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45892809">
          <h3>
            <a class="item" href="https://dl.acm.org/doi/10.1145/3771297"
              >CACM Practice Welcomes Submissions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 21:03:19</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45892809"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45892773">
          <h3>
            <a
              class="item"
              href="https://jobs.ashbyhq.com/meticulous/3197ae3d-bb26-4750-9ed7-b830f640515e"
              >Meticulous (YC S21) is hiring to redefine software dev</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 21:00:35</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45892469">
          <h3>
            <a
              class="item"
              href="https://www.46brooklyn.com/research/welcome-to-private-label-park-nuf485-8h5kw-wk8y2"
              >PBM Drug Pricing Distortion Report</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 20:34:51</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45892469"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45892394">
          <h3>
            <a
              class="item"
              href="https://newsletter.posthog.com/p/collaboration-sucks"
              >Collaboration sucks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 20:27:38</span
              ><span class="points-container"
                >Points: <span class="points">173</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45892394"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45892191">
          <h3>
            <a class="item" href="https://jyn.dev/the-terminal-of-the-future"
              >The Terminal of the Future</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 20:11:33</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45892191"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45892174">
          <h3>
            <a class="item" href="https://github.com/dbrll/Xortran"
              >Xortran - A PDP-11 Neural Network With Backpropagation in Fortran
              IV</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 20:10:24</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45892174"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45891968">
          <h3>
            <a class="item" href="https://github.com/google/adk-go"
              >Adk-go: code-first Go toolkit for building, evaluating, and
              deploying AI agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 19:52:55</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45891968"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45891907">
          <h3>
            <a class="item" href="https://www.soke.engineering/"
              >A modern 35mm film scanner for home</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 19:48:19</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45891907"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45891868">
          <h3>
            <a
              class="item"
              href="https://bernsteinbear.com/blog/compiler-effects/"
              >A catalog of side effects</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 19:44:49</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45891868"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45891817">
          <h3>
            <a
              class="item"
              href="https://www.robert-glaser.de/agentic-pelican-on-a-bicycle/"
              >Agentic Pelican on a Bicycle</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 19:40:15</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45891817"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45891772">
          <h3>
            <a class="item" href="https://becca.ooo/blog/vertical-integration/"
              >Vertical Integration is the only thing that matters</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 19:36:05</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45891772"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45891319">
          <h3>
            <a
              class="item"
              href="https://creavi.tech/blog/creavi-macropad-build-log/"
              >Show HN: Creavi Macropad – Built a wireless macropad with a
              display</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 18:58:16</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45891319"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <p>
                We built a wireless, low-profile macropad with a display called
                the Creavi Macropad. It lasts at least 1 month on a single
                charge. We also put together a browser-based tool that lets you
                update macros in real time and even push OTA updates over BLE.
                Since we're software engineers by day, we had to figure out the
                hardware, mechanics, and industrial design as we went (and
                somehow make it all work together). This post covers the build
                process, and the final result.
              </p>
              <p>Hope you enjoy!</p>
            </div>
          </section>
        </section>
        <section id="45891016">
          <h3>
            <a
              class="item"
              href="https://thenewstack.io/ffmpeg-to-google-fund-us-or-stop-sending-bugs/"
              >FFmpeg to Google: Fund us or stop sending bugs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 18:32:11</span
              ><span class="points-container"
                >Points: <span class="points">340</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45891016"
                  >Comments</a
                ><span class="descendants">: 266</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45890726">
          <h3>
            <a
              class="item"
              href="https://chadaustin.me/2024/02/windows-terminal-latency/"
              >Terminal Latency on Windows (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 18:07:51</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45890726"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45890394">
          <h3>
            <a class="item" href="https://data-formulator.ai/"
              >Show HN: Data Formulator – interactive AI agents for data
              analysis (Microsoft)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 17:44:21</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45890394"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://github.com/microsoft/data-formulator/releases/tag/0.5"
                >https://github.com/microsoft/data-formulator/releases/tag/0....</a
              >.
              <p>
                This is a build-up from our release a year ago (<a
                  href="https://news.ycombinator.com/item?id=41907719"
                  >https://news.ycombinator.com/item?id=41907719</a
                >). We spent a year exploring how to blend agent mode with
                interactions to allow you more easily "vibe" with your data but
                still keeping in control. We don't think the future of data
                analysis is just "agent to do all for you from a high-level
                prompt" --- you should still be able to drive the open-ended
                exploration; but we also don't want you to do everything
                step-by-step. Thus we worked on this "interactive agent mode"
                for data analysis with some UI innovations.
              </p>
              <p>Our new demo features:</p>
              <p>
                * We want to let you import (almost) any data easily to get
                started exploration — either it's a screenshot of a web table,
                an unnormalized excel table, table in a chunk of text, a csv
                file, or a table in database, you should be able to load into
                the tool easily with a little bit of AI assistance.
              </p>
              <p>
                * We want you to easily choose between agent mode (more
                automation) vs interactive mode (more fine-grained control)
                yourself as you explore data. We designed an interface of "data
                threads": both your and agents' explorations are organized as
                threads so you can jump into any point to decide how you want to
                follow-up or revise using UI + NL instruction to provide
                fine-grained control.
              </p>
              <p>
                * The results should be easily interpretable. Data Formulator
                now presents "concept" behind the code generated by AI agents
                alongside code/explanation/data. Plus, you can compose a report
                easily based on your visualizations to share insights.
              </p>
              <p>
                We are sharing the online demo at
                <a href="https://data-formulator.ai/"
                  >https://data-formulator.ai/</a
                >
                for you to try! If you want more involvement and customization,
                checkout our source code
                <a href="https://github.com/microsoft/data-formulator"
                  >https://github.com/microsoft/data-formulator</a
                >
                and let's build something together as a community!
              </p>
            </div>
          </section>
        </section>
        <section id="45890186">
          <h3>
            <a
              class="item"
              href="https://latenitesoft.com/blog/evaluating-frontier-ai-image-generation-models/"
              >We ran over 600 image generations to compare AI image models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 17:26:54</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45890186"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45889891">
          <h3>
            <a
              class="item"
              href="https://lukefleed.xyz/posts/cache-friendly-low-memory-lanczos/"
              >Cache-friendly, low-memory Lanczos algorithm in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 17:08:00</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45889891"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45889793">
          <h3>
            <a class="item" href="https://cactoide.org/"
              >Show HN: Cactoide – Federated RSVP Platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 17:01:07</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45889793"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45888891">
          <h3>
            <a
              class="item"
              href="https://blog.mozilla.org/en/firefox/fingerprinting-protections/"
              >Firefox expands fingerprint protections</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 16:04:08</span
              ><span class="points-container"
                >Points: <span class="points">218</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45888891"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45887957">
          <h3>
            <a class="item" href="https://pikaday.dbushell.com"
              >Pikaday: A friendly guide to front-end date pickers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 14:58:47</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45887957"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45887857">
          <h3>
            <a
              class="item"
              href="https://cv.co.hu/csabi/drawing-text-performance-graphical-vs-console.html"
              >Drawing Text Isn't Simple: Benchmarking Console vs. Graphical
              Rendering</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 14:49:51</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45887857"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45887466">
          <h3>
            <a class="item" href="https://antirez.com/news/156"
              >Scaling HNSWs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 14:11:49</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45887466"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://en.wikipedia.org/wiki/Hierarchical_navigable_small_world"
                >https://en.wikipedia.org/wiki/Hierarchical_navigable_small_w...</a
              >
            </div>
          </section>
        </section>
        <section id="45887105">
          <h3>
            <a
              class="item"
              href="https://asteriskmag.com/issues/12-books/paradigm-shifted-the-perplexing-appeal-of-the-telepathy-tapes"
              >The Perplexing Appeal of the Telepathy Tapes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 13:34:15</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45887105"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45885813">
          <h3>
            <a
              class="item"
              href="https://www.apple.com/newsroom/2025/11/introducing-iphone-pocket-a-beautiful-way-to-wear-and-carry-iphone/"
              >iPhone Pocket</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 10:17:57</span
              ><span class="points-container"
                >Points: <span class="points">378</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45885813"
                  >Comments</a
                ><span class="descendants">: 1003</span></span
              >
            </h4>
            <div class="text">
              <i>iPod Socks</i> -
              <a href="https://news.ycombinator.com/item?id=45889602"
                >https://news.ycombinator.com/item?id=45889602</a
              >
            </div>
          </section>
        </section>
        <section id="45860552">
          <h3>
            <a
              class="item"
              href="https://www.casio.com/us/watches/50th/Heritage/1970s/"
              >The history of Casio watches</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-08 @ 22:16:40</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45860552"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45844419">
          <h3>
            <a class="item" href="https://www.swissmicros.com/product/model-r47"
              >The R47: A new physical RPN calculator</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-07 @ 08:00:08</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45844419"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45830178">
          <h3>
            <a
              class="item"
              href="https://ellis.codes/blog/my-fan-worked-fine-so-i-gave-it-wi-fi/"
              >My fan worked fine, so I gave it WiFi</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-06 @ 01:04:23</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45830178"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45817027">
          <h3>
            <a class="item" href="https://zserge.com/posts/etude-in-c/"
              >Étude in C minor (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-04 @ 23:18:04</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45817027"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45789674">
          <h3>
            <a class="item" href="https://stickertop.art/main/"
              >A unique collection of laptops adorned with creative stickers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 11:58:52</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45789674"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45785300">
          <h3>
            <a
              class="item"
              href="https://boragonul.com/post/falling-in-love-with-erlang"
              >How I fell in love with Erlang</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-01 @ 21:00:33</span
              ><span class="points-container"
                >Points: <span class="points">346</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45785300"
                  >Comments</a
                ><span class="descendants">: 204</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
