<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42773311">
          <h3>
            <a
              class="item"
              href="https://digitalcxo.com/article/matt-mullenweg-automattics-ceo-seems-bound-and-determined-to-wreck-wordpress/"
              >Matt Mullenweg, Automattic's CEO, Seems Bound and Determined to
              Wreck WordPress</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 21:32:31</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42773088">
          <h3>
            <a
              class="item"
              href="https://www.paddleyourownkanoo.com/2025/01/19/spacex-scrubs-falcon-9-rocket-launch-with-just-11-seconds-to-go-after-delta-air-jet-flies-into-restricted-airspace/"
              >Falcon 9 Rocket Launch Scrubbed After Delta Air Flies into
              Restricted Airspace</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 21:11:12</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42773088"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42772771">
          <h3>
            <a
              class="item"
              href="https://torrentfreak.com/authors-seek-metas-torrent-client-logs-and-seeding-data-in-ai-piracy-probe-250120/"
              >Authors Seek Meta's Torrent Client Logs and Seeding Data in AI
              Piracy Probe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 20:38:08</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42772771"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42772518">
          <h3>
            <a
              class="item"
              href="https://asteriskmag.com/issues/08/the-making-of-community-notes"
              >The Making of Community Notes (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 20:06:55</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42772518"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42772300">
          <h3>
            <a
              class="item"
              href="https://subpixel.space/entries/after-authenticity/"
              >After Authenticity (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 19:45:35</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42772300"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42772170">
          <h3>
            <a class="item" href="https://github.com/ROCm/ROCm/discussions/4276"
              >ROCm Device Support Wishlist</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 19:31:03</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42772170"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42771676">
          <h3>
            <a
              class="item"
              href="http://blog.rongarret.info/2025/01/i-am-not-failure-lessons-learned-from.html"
              >I am (not) a failure: Lessons learned from six failed startup
              attempts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 18:40:45</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42771676"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42770629">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/blog/announcing-yc-x25/"
              >YC X25, the spring 2025 batch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 17:02:11</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42770629"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42770200">
          <h3>
            <a class="item" href="https://github.com/baturyilmaz/wordpecker-app"
              >Show HN: Personalized Duolingo (Kind of) for Vocabulary
              Building</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 16:27:22</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42770200"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <p>
                My English is not the best but not the worst either. But I
                realized I can't boost it up after a certain level! In my
                belief, in order to truly learn a language, you need to be
                exposed to that language often. Vocabulary is the key factor
                here if you really want to improve in any language.
              </p>
              <p>
                My experience is that when I read a book to improve my English
                vocabulary, I encounter words that I don't know so often and my
                reading gets disturbed. I go look for the meaning, come back,
                put it in context, re-read it, etc. It didn't work for me. So I
                tried listening to audiobooks - I listen to the book and read
                along, and whenever I encounter a word, I write it down. I get
                these 50 words in 2-3 pages and I ask ChatGPT to give me their
                meanings. I read them, take the book, and now read it myself.
                That helps for sure, but still after a while I lose those words
                because I never encounter them again. Well then, in order to not
                forget those words, I need some kind of exercise, right? A
                flashcard app maybe? Well, I still need to go out there, ask
                ChatGPT to create questions, put them in a flashcard app, etc.
                It's still time-consuming and this is supposed to be fun!
              </p>
              <p>
                I need to be exposed to English in my daily life. I just need to
                save the words somewhere and whenever I want, I need to be able
                to practice them in a fun way, in Duolingo style maybe? So then
                I realized would it be better to store words in their own
                context? I mean, say I read Harry Potter and have a list of
                words I encountered in it, say I watch Breaking Bad and have a
                list of words I encountered watching it. I believe seeing those
                words together and practicing together makes it easier to
                remember them.
              </p>
              <p>
                But I shouldn't be the one adding the meaning of the word and
                the one to generate exercises, right? It all should be
                automated. The exercise part will be handled by LLM for sure,
                but for the meaning of the word, I can fetch from a dictionary?
                But I really don't like the dictionary definitions and one word
                can have multiple meanings in their own context. So then I need
                to use LLM for this task too and have the word's meaning in its
                own context.
              </p>
              <p>
                You create a list for your context, you add words, meanings get
                added automatically, and I see the word added in a different
                color (coloring is also a method used to remember words). It all
                takes seconds. And whenever I want to practice these lists, I
                can use learn mode to learn and test my knowledge in quiz mode.
                So I basically built this app ((thanks to Claude 3.5 Sonnet)). I
                want it to be like Duolingo, but of course I still have a way
                ahead to go, but wanted to share it in hopes of getting
                contributors.
              </p>
              <p>
                You can read more in the repository. I would love to get your
                thoughts on this.
              </p>
            </div>
          </section>
        </section>
        <section id="42770125">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42770125"
              >I'm Peter Roberts, immigration attorney, who does work for YC and
              startups. AMA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 16:20:29</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42770125"
                  >Comments</a
                ><span class="descendants">: 215</span></span
              >
            </h4>
            <div class="text">
              I'll be here for the next 3 hours and then again at around 4 pm
              EST for another 3 hours. As usual, there are many possible topics
              and I'll be guided by whatever you're concerned with but as much
              as possible - because we've received so many questions about this
              the past few months - I'd like to focus on the impact of the new
              administration on U.S. immigration law and policy. Please remember
              that I can't provide legal advice on specific cases for liability
              reasons because I won't have access to all the facts. Please stick
              to a factual discussion in your questions and comments and I'll
              try to do the same in my answers. Thanks!
            </div>
          </section>
        </section>
        <section id="42769871">
          <h3>
            <a class="item" href="https://mixxx.org/">Mixxx: GPL DJ Software</a>
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 15:53:31</span
              ><span class="points-container"
                >Points: <span class="points">323</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42769871"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42769325">
          <h3>
            <a
              class="item"
              href="https://danielwirtz.com/blog/successful-hacker-news-article"
              >Reverse engineering my #1 Hacker News article</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 14:53:45</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42769325"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42768072">
          <h3>
            <a class="item" href="https://github.com/deepseek-ai/DeepSeek-R1"
              >DeepSeek-R1</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 12:37:58</span
              ><span class="points-container"
                >Points: <span class="points">835</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42768072"
                  >Comments</a
                ><span class="descendants">: 264</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42767797">
          <h3>
            <a class="item" href="https://www.mdpi.com/2504-446X/8/11/652"
              >Celestial Navigation for Drones</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 12:02:19</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42767797"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42767584">
          <h3>
            <a
              class="item"
              href="https://neilzone.co.uk/2025/01/using-esims-with-devices-that-only-have-a-physical-sim-slot-via-a-9esim-sim-card-with-android-and-linux/"
              >Using eSIMs with devices that only have a physical SIM slot via a
              9eSIM SIM car</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 11:33:15</span
              ><span class="points-container"
                >Points: <span class="points">232</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42767584"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42767507">
          <h3>
            <a class="item" href="http://okayfail.com/2025/i-met-pg-once.html"
              >I Met Paul Graham Once</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 11:20:02</span
              ><span class="points-container"
                >Points: <span class="points">452</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42767507"
                  >Comments</a
                ><span class="descendants">: 279</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42767132">
          <h3>
            <a
              class="item"
              href="https://medium.com/swlh/zork-the-great-inner-workings-b68012952bdc"
              >Zork: The Great Inner Workings (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 10:23:31</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42767132"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42766825">
          <h3>
            <a
              class="item"
              href="https://grossack.site/2025/01/16/undergrad-divisibility-problems.html"
              >Where do those undergraduate divisibility problems come from?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 09:41:39</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42766825"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42766729">
          <h3>
            <a
              class="item"
              href="https://2ality.com/2025/01/typescript-enum-patterns.html"
              >TypeScript enums: use cases and alternatives</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 09:30:15</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42766729"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42766205">
          <h3>
            <a class="item" href="https://shaunlebron.github.io/parinfer/"
              >Parinfer: Simpler Lisp Editing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 08:21:16</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42766205"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42764762">
          <h3>
            <a
              class="item"
              href="https://ninkovic.dev/blog/2025/think-twice-before-using-github-actions"
              >I'll think twice before using GitHub Actions again</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 03:41:27</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42764762"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42764602">
          <h3>
            <a
              class="item"
              href="https://wiki.rossmanngroup.com/wiki/Reverse_Engineering_Bambu_Connect"
              >Reverse Engineering Bambu Connect</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-20 @ 03:08:49</span
              ><span class="points-container"
                >Points: <span class="points">476</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42764602"
                  >Comments</a
                ><span class="descendants">: 298</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42763386">
          <h3>
            <a class="item" href="https://josef.cn/blog/uk-talent"
              >UK's hardware talent is being wasted</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-19 @ 23:52:13</span
              ><span class="points-container"
                >Points: <span class="points">554</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42763386"
                  >Comments</a
                ><span class="descendants">: 975</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42754305">
          <h3>
            <a class="item" href="https://www.sacred.computer"
              >SRCL: Open-source React project to build web apps with terminal
              aesthetics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-19 @ 06:28:36</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42754305"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42746889">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/tech/annals-of-technology/the-strange-and-gruesome-story-of-the-greenland-shark-the-longest-living-vertebrate-on-earth"
              >The Greenland Shark, the Longest-Living Vertebrate on Earth
              (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-18 @ 08:56:11</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42746889"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42733905">
          <h3>
            <a
              class="item"
              href="https://collidingscopes.github.io/manual-brick-breaker/"
              >Show HN: Play brick breaker using webcam and hand tracking (open
              source)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-17 @ 03:56:40</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42733905"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                All processing is done in real-time within your browser. This
                project is built using javascript, html canvas, and mediapipe
                hand tracking.
              </p>
              <p>
                This game is free and open source, offered under an MIT license.
              </p>
              <p>
                Github repo:
                <a
                  href="https://github.com/collidingScopes/manual-brick-breaker"
                  >https://github.com/collidingScopes/manual-brick-breaker</a
                >
              </p>
              <p>
                Hope it's fun for you -- would love to hear feedback and
                suggestions for improvement.
              </p>
            </div>
          </section>
        </section>
        <section id="42732533">
          <h3>
            <a
              class="item"
              href="https://www.thecollector.com/byzantine-sassanian-war/"
              >Byzantine-Sassanian War (602-628 CE): The Last Great War of
              Antiquity (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-17 @ 00:00:17</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42732533"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42731588">
          <h3>
            <a
              class="item"
              href="https://blog.gingerbeardman.com/2025/01/16/slugs-on-a-cube-interactive-animation/"
              >Slugs on a Cube: An Interactive Animation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-16 @ 22:13:56</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42731588"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42729488">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2025-01-15/dutch-align-with-us-export-controls-on-some-asml-chip-tools"
              >Dutch Align with US Export Controls on Some ASML Chip Tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-16 @ 19:07:47</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42729488"
                  >Comments</a
                ><span class="descendants">: 194</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42725346">
          <h3>
            <a
              class="item"
              href="https://has.concord.org/groundwater-movement.html"
              >Groundwater Movement (Interactive)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-16 @ 14:13:58</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42725346"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
