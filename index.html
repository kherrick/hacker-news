<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46989117">
          <h3>
            <a class="item" href="https://lwn.net/Articles/1055590/"
              >The Future for Tyr, a Rust GPU Driver for Arm Mali Hardware</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 14:17:06</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46989117"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46989107">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2026/02/12/apple_ios_263/"
              >Apple patches decade-old iOS zero-day, possibly exploited by
              commercial spyware</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 14:16:10</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46989107"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46988928">
          <h3>
            <a
              class="item"
              href="https://marginalrevolution.com/marginalrevolution/2026/02/i-regret-to-inform-you-that-the-fda-is-still-fdaing.html"
              >I Regret to Inform You That the FDA Is FDAing Again</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 14:00:46</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46988928"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46988596">
          <h3>
            <a
              class="item"
              href="http://blog.can.ac/2026/02/12/the-harness-problem/"
              >Improving 15 LLMs at Coding in One Afternoon. Only the Harness
              Changed</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 13:30:20</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46988596"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46987963">
          <h3>
            <a
              class="item"
              href="https://www.threathunter.ai/blog/americas-cyber-defense-agency-burning-down/"
              >America's Cyber Defense Agency Is Burning Down and Nobody's
              Coming to Put It Out</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 12:27:23</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46987963"
                  >Comments</a
                ><span class="descendants">: 124</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46987919">
          <h3>
            <a
              class="item"
              href="https://theshamblog.com/the-crown-of-nobles-noble-gas-tube-display/"
              >The "Crown of Nobles" Noble Gas Tube Display</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 12:23:05</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46987919"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46987559">
          <h3>
            <a
              class="item"
              href="https://github.com/matplotlib/matplotlib/pull/31132"
              >AI agent opens a PR write a blogpost to shames the maintainer who
              closes it</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 11:46:01</span
              ><span class="points-container"
                >Points: <span class="points">539</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46987559"
                  >Comments</a
                ><span class="descendants">: 449</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46987425">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2026/02/byte-magazine-artist-robert-tinney-who-illustrated-the-birth-of-pcs-dies-at-78/"
              >Byte magazine artist Robert Tinney, who illustrated the birth of
              PCs, dies at 78</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 11:26:15</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46987425"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46987038">
          <h3>
            <a class="item" href="https://geo-racers.com/"
              >Show HN: Geo Racers – Race from London to Tokyo on a single bus
              pass</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 10:27:50</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46987038"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46986614">
          <h3>
            <a
              class="item"
              href="https://audioconvert.ai/british-accent-generator"
              >Show HN: A free online British accent generator for instant voice
              conversion</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 09:25:17</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46986614"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              I've developed a simple AI-powered British accent generator. Enter
              or paste your text, select the voice that best fits your project's
              tone, and generate speech for free. It supports up to 500
              characters and offers 8 distinct, lifelike voices. Everything runs
              entirely within your browser. I'm primarily seeking feedback on
              output quality, user experience, and any technical improvements
              worth exploring.
            </div>
          </section>
        </section>
        <section id="46986248">
          <h3>
            <a
              class="item"
              href="https://johncarlosbaez.wordpress.com/2026/02/12/stela-c/"
              >The missing digit of Stela C</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 08:35:34</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46986248"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46985609">
          <h3>
            <a
              class="item"
              href="https://www.openculture.com/2025/09/the-carl-sagan-baloney-detection-kit.html"
              >Carl Sagan's Baloney Detection Kit: Tools for Thinking Critically
              (2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 06:54:39</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46985609"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46985151">
          <h3>
            <a class="item" href="https://github.com/tonyyont/peon-ping"
              >Warcraft III Peon Voice Notifications for Claude Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 05:18:49</span
              ><span class="points-container"
                >Points: <span class="points">695</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46985151"
                  >Comments</a
                ><span class="descendants">: 222</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46984735">
          <h3>
            <a class="item" href="https://essays.fnnch.com/make-a-living"
              >How to make a living as an artist</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-12 @ 03:56:26</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46984735"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46982943">
          <h3>
            <a
              class="item"
              href="https://hologram.page/blog/porting-initiative-delivers-hologram-v0-7-0"
              >Hologram v0.7.0: Milestone release for Elixir-to-JavaScript
              porting initiative</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-11 @ 23:54:59</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46982943"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <p>
                This release is a milestone for our porting initiative. 49
                contributors ported 150 Erlang functions across 19 modules,
                pushing client-side Erlang runtime coverage from 34% to 96% and
                overall Elixir standard library readiness from 74% to 87%.
              </p>
              <p>
                This means the vast majority of Elixir standard library
                functions needed for full-stack web and basic local-first apps
                now work in the browser - string processing, collections, sets,
                binary operations, Unicode normalization, math, time operations,
                file path handling, and more.
              </p>
              <p>
                Beyond porting, the release includes enhancements, bug fixes,
                and infrastructure groundwork.
              </p>
              <p>Happy to answer any questions!</p>
            </div>
          </section>
        </section>
        <section id="46982421">
          <h3>
            <a class="item" href="https://age-verifier.kibty.town/"
              >Discord/Twitch/Snapchat age verification bypass</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-11 @ 22:56:41</span
              ><span class="points-container"
                >Points: <span class="points">866</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46982421"
                  >Comments</a
                ><span class="descendants">: 396</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46980355">
          <h3>
            <a
              class="item"
              href="https://www.terracenetworks.com/blog/2026-02-11-telnet-routing"
              >Reports of Telnet's death have been greatly exaggerated</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-11 @ 20:20:48</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46980355"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46978490">
          <h3>
            <a
              class="item"
              href="https://netnewswire.blog/2026/02/11/netnewswire-turns.html"
              >NetNewsWire Turns 23</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-11 @ 18:06:11</span
              ><span class="points-container"
                >Points: <span class="points">311</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46978490"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46977175">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/world/ireland-rolls-out-pioneering-basic-income-scheme-artists-2026-02-10/"
              >Ireland rolls out basic income scheme for artists</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-11 @ 16:39:11</span
              ><span class="points-container"
                >Points: <span class="points">421</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46977175"
                  >Comments</a
                ><span class="descendants">: 531</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46976911">
          <h3>
            <a class="item" href="https://fluorite.game/"
              >Fluorite – A console-grade game engine fully integrated with
              Flutter</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-11 @ 16:21:10</span
              ><span class="points-container"
                >Points: <span class="points">511</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46976911"
                  >Comments</a
                ><span class="descendants">: 286</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://fosdem.org/2026/schedule/event/7ZJJWW-fluorite-game-engine-flutter/"
                >https://fosdem.org/2026/schedule/event/7ZJJWW-fluorite-game-...</a
              >
            </div>
          </section>
        </section>
        <section id="46974853">
          <h3>
            <a class="item" href="https://z.ai/blog/glm-5"
              >GLM-5: Targeting complex systems engineering and long-horizon
              agentic tasks</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-11 @ 13:42:16</span
              ><span class="points-container"
                >Points: <span class="points">440</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46974853"
                  >Comments</a
                ><span class="descendants">: 497</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46949814">
          <h3>
            <a
              class="item"
              href="https://ntietz.com/blog/using-an-engineering-notebook/"
              >Using an engineering notebook</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 19:29:53</span
              ><span class="points-container"
                >Points: <span class="points">258</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46949814"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46945907">
          <h3>
            <a class="item" href="https://www.heywhatsthat.com/faq.html"
              >HeyWhatsThat</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 14:57:25</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46945907"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46942864">
          <h3>
            <a
              class="item"
              href="https://maxhalford.github.io/blog/text-classification-zstd/"
              >Text classification with Python 3.14's ZSTD module</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 08:14:28</span
              ><span class="points-container"
                >Points: <span class="points">236</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46942864"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46940959">
          <h3>
            <a
              class="item"
              href="https://thepointmag.com/examined-life/quitting/"
              >Quitting</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 02:36:09</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46940959"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46933529">
          <h3>
            <a class="item" href="https://www.vangemert.dev/blog/nothing"
              >“Nothing” is the secret to structuring your work</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 12:01:50</span
              ><span class="points-container"
                >Points: <span class="points">377</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46933529"
                  >Comments</a
                ><span class="descendants">: 141</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932533">
          <h3>
            <a
              class="item"
              href="https://www.library.hbs.edu/working-knowledge/clay-christensens-milkshake-marketing"
              >Clay Christensen's Milkshake Marketing (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 08:42:08</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932533"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46923051">
          <h3>
            <a
              class="item"
              href="https://github.com/simplex-micro/riscv-vector-primer/blob/main/index.md"
              >RISC-V Vector Primer</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 11:38:12</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46923051"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46921757">
          <h3>
            <a
              class="item"
              href="https://altermag.com/articles/kanchipuram-saris-and-thinking-machines"
              >Kanchipuram Saris and Thinking Machines</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 06:19:05</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46921757"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46920315">
          <h3>
            <a
              class="item"
              href="https://scitechdaily.com/researchers-warn-wifi-could-become-an-invisible-mass-surveillance-system/"
              >WiFi could become an invisible mass surveillance system</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 01:16:42</span
              ><span class="points-container"
                >Points: <span class="points">416</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46920315"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
