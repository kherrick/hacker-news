<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43543681">
          <h3>
            <a
              class="item"
              href="https://jobs.ashbyhq.com/photoroom?departmentId=5a691019-9344-462b-9f4b-4efb68086e05&amp;utm_source=yc"
              >Photoroom (YC S20) Is Hiring Rust, API, and Front End Engineers
              (Europe, Remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 07:01:30</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43543429">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/03/31/llm_providers_extinction/"
              >LLM providers on the cusp of an 'extinction' phase as capex
              realities bite</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 06:22:10</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43543429"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43543241">
          <h3>
            <a class="item" href="https://nuejs.org/blog/large-scale-apps/"
              >Show HN: Nue – Apps lighter than a React button</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 05:47:41</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43543241"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43543235">
          <h3>
            <a class="item" href="https://app.fluentsubs.com/exercises/daily"
              >Show HN: Duolingo-style exercises but with real-world content
              like the news</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 05:46:34</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43543235"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <p>
                Every video is transcribed to get much better transcripts than
                the closed captions. I filter on high quality transcripts, and
                afterwards a LLM selects only plausible segments for the
                exercises. This seems to work well for quality control and seems
                to be reliable enough for these short exercises.
              </p>
              <p>Would love your thoughts!</p>
            </div>
          </section>
        </section>
        <section id="43542131">
          <h3>
            <a
              class="item"
              href="https://julian.digital/2025/03/27/the-case-against-conversational-interfaces/"
              >The case against conversational interfaces</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 02:14:47</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43542131"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43541759">
          <h3>
            <a
              class="item"
              href="https://netflixtechblog.com/globalizing-productions-with-netflixs-media-production-suite-fc3c108c0a22"
              >Netflix's Media Production Suite</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 01:02:33</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43541759"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43539585">
          <h3>
            <a class="item" href="https://goperf.dev/">Go Optimization Guide</a>
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 20:29:58</span
              ><span class="points-container"
                >Points: <span class="points">250</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43539585"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43539103">
          <h3>
            <a class="item" href="https://github.com/koreader/koreader"
              >KOReader: Open-Source eBook Reader</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 19:52:29</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43539103"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43538919">
          <h3>
            <a class="item" href="https://openjdk.org/jeps/8349536"
              >JEP draft: Prepare to make final mean final</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 19:35:51</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43538919"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43538192">
          <h3>
            <a
              class="item"
              href="https://www.righto.com/2025/03/pentium-microcde-rom-circuitry.html"
              >Notes on the Pentium's microcode circuitry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 18:35:37</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43538192"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43538164">
          <h3>
            <a class="item" href="https://github.com/astronomer/airflow-ai-sdk"
              >LLM Workflows then Agents: Getting Started with Apache Airflow</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 18:32:28</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43538164"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43538113">
          <h3>
            <a
              class="item"
              href="https://9to5google.com/2025/03/31/honey-extension-users-dropped-chrome-march-2025/"
              >Honey has now lost 4M Chrome users after shady tactics were
              revealed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 18:28:03</span
              ><span class="points-container"
                >Points: <span class="points">532</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43538113"
                  >Comments</a
                ><span class="descendants">: 257</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43537505">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43537505"
              >Launch HN: Augento (YC W25) – Fine-tune your agents with
              reinforcement learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 17:29:04</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43537505"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
            <div class="text">
              <a href="https://augento.ai/">https://augento.ai/</a>). We’re
              building Deepseek R1-like fine-tuning as a service. You connect
              your agent, tell us when it’s right or wrong, and we deliver an
              LLM optimized for that agent. There’s a demo video
              <a href="https://www.youtube.com/watch?v=j5RQaTdRrKE"
                >https://www.youtube.com/watch?v=j5RQaTdRrKE</a
              >, and our docs are at
              <a href="https://docs.augento.ai/">https://docs.augento.ai/</a>.
              It’s open for anyone to use at
              <a href="https://augento.ai">https://augento.ai</a>.
              <p>
                Agents fail all the time, especially when you try to use them
                for something actually useful. Current solution approaches suck:
                prompting has intrinsic limits and supervised fine-tuning
                requires big explicit datasets that are hard to collect.
              </p>
              <p>
                Two months ago, the DeepSeek R1 paper outlined a way to
                post-train LLMs with (almost) pure reinforcement learning. We
                took up their research and built a fine-tuning platform around
                that.
              </p>
              <p>
                You let us intercept your agent's data flow, and we deliver you
                a fine-tuned open-source model, that is trained on the agent's
                specific task. Instead of providing big datasets of explicit
                fine-tuning samples, you provide a reward function, judging the
                model's outputs.
              </p>
              <p>Here are examples of what this can be used for:</p>
              <p>
                Coding Agent: We fine-tuned a coding agent that was constantly
                making syntax errors and failed to handle semantic edge cases
                properly. By providing a reward function that evaluated code
                against the compiler, the agent learned not to produce these
                errors. The fine-tuned model reduced critical bugs by 40% with
                just 20 training samples.
              </p>
              <p>
                MCP Tool Specialization: Imagine you have a custom set of
                internal tools using the MCP protocol, but your agent keeps
                selecting the wrong tool or passing incompatible parameters. You
                could fine-tune with a reward function that scores tool
                selection and parameter matching.
              </p>
              <p>
                Browser Agent Navigation: If you're building a browser agent
                that struggles with complex web UIs or specific sites, you could
                fine-tune it to better understand UI elements and navigation
                patterns. With a reward function that scores successful task
                completion (like "find the best price for this product" or
                "complete this multi-step form"), you could train an agent that
                better identifies clickable elements, understands form
                validation errors, and navigates through complex SPAs without
                getting stuck.
              </p>
              <p>
                VLA Robot Control: If you're using vision-language models to
                control robotic arms or other hardware, you could fine-tune for
                your specific actuator setup. With a reward function based on
                high-level task completion, you could train a
                Vision-Langauge-Action (VLA) model that translates natural
                language commands like "move the red block behind the blue
                cylinder" into actuator controls for your specific hardware.
              </p>
              <p>
                As you see from these examples, the current paradigm is best
                suited for "verifiable domains”, where it is possible to give an
                explicit function judging the model’s outputs. However, up next,
                we will also support an "alignment mode", where you don't have
                to provide a reward function but provide high-level feedback on
                past failure runs of your agent. Just tag where things went
                wrong, and we'll handle the rest. This makes it even easier to
                improve your agents without needing to write formal reward
                functions.
              </p>
              <p>
                Our platform is not itself open source, but it fine-tunes
                open-source language models. I.e. it is an alternative to the
                reinforcement fine-tuning API from OpenAI, but with Qwen, LLama,
                Deepseek, etc., and more customizability on the reward model. We
                charge users for the training and for their
                inference/interaction with the model later on ($0 monthly flat
                fee + training cost + inference cost).
              </p>
              <p>
                The platform is self-serving and open to use at
                <a href="https://augento.ai/dashboard"
                  >https://augento.ai/dashboard</a
                >. We’ll give you $20 in training credits, which should be
                enough for connecting your agent and delivering some observable
                improvement on your use case.
              </p>
              <p>We’d love to hear your thoughts and feedback!</p>
            </div>
          </section>
        </section>
        <section id="43536146">
          <h3>
            <a
              class="item"
              href="https://thelibertyline.com/2025/03/30/yankees-new-torpedo-bat/"
              >MLB says Yankees’ new “torpedo bats” are legal and likely
              coming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 15:27:03</span
              ><span class="points-container"
                >Points: <span class="points">261</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43536146"
                  >Comments</a
                ><span class="descendants">: 374</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43535943">
          <h3>
            <a
              class="item"
              href="https://turso.tech/blog/turso-offline-sync-public-beta"
              >Turso SQLite Offline Sync Public Beta</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 15:10:39</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43535943"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43535688">
          <h3>
            <a
              class="item"
              href="https://www.thephcheese.com/theres-white-stuff-growing-on-your-cheese-that-isnt-mold"
              >It’s not mold, it’s calcium lactate (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 14:49:42</span
              ><span class="points-container"
                >Points: <span class="points">339</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43535688"
                  >Comments</a
                ><span class="descendants">: 209</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43535653">
          <h3>
            <a
              class="item"
              href="https://www.sergey.fyi/articles/reliability-vs-capability"
              >AI agents: Less capability, more reliability, please</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 14:45:35</span
              ><span class="points-container"
                >Points: <span class="points">353</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43535653"
                  >Comments</a
                ><span class="descendants">: 215</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43533826">
          <h3>
            <a class="item" href="https://www.galactanet.com/oneoff/theegg.html"
              >The Egg (2009)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 11:45:32</span
              ><span class="points-container"
                >Points: <span class="points">198</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43533826"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43533496">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/blog-post/things-i-won-t-work-dioxygen-difluoride"
              >Things I Won't Work With: Dioxygen Difluoride (2010)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 10:58:53</span
              ><span class="points-container"
                >Points: <span class="points">245</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43533496"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43533362">
          <h3>
            <a
              class="item"
              href="https://www.goto80.com/the-demoscene-as-a-unesco-heritage-in-sweden"
              >The demoscene as a UNESCO heritage in Sweden</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 10:39:57</span
              ><span class="points-container"
                >Points: <span class="points">558</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43533362"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43533306">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/smart-news/james-webb-space-telescope-reveals-that-most-galaxies-rotate-clockwise-180986224/"
              >James Webb Space Telescope reveals that most galaxies rotate
              clockwise</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 10:31:39</span
              ><span class="points-container"
                >Points: <span class="points">321</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43533306"
                  >Comments</a
                ><span class="descendants">: 266</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43532830">
          <h3>
            <a
              class="item"
              href="https://developer.chrome.com/blog/a-customizable-select"
              >The element can now be customized with CSS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 09:11:47</span
              ><span class="points-container"
                >Points: <span class="points">410</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43532830"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43516325">
          <h3>
            <a class="item" href="https://www.exec.com/sales-comp"
              >Sales Compensation Simulator – Tool for Founders</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 15:34:07</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43516325"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43516117">
          <h3>
            <a
              class="item"
              href="http://jameswarnersmith.co.uk/canoeing-the-continent/canoeing-the-danube"
              >Canoeing on the Danube</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 15:05:55</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43516117"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43515877">
          <h3>
            <a
              class="item"
              href="https://diurnal.st/2025/03/02/the-pragmatic-open-source-contributor.html"
              >The Pragmatic Open Source Contributor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 14:32:40</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43515877"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43515622">
          <h3>
            <a class="item" href="https://knightride.rakhim.org/"
              >Show HN: I made a little puzzle game about a rogue chess
              knight</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 14:02:53</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43515622"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43512470">
          <h3>
            <a class="item" href="https://www.captrice.io/"
              >A deliberate practice app for guitar players who want to level
              up</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 03:27:31</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43512470"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43511529">
          <h3>
            <a
              class="item"
              href="https://nymag.com/intelligencer/article/how-the-guardian-us-flourishes-without-a-paywall.html"
              >The Guardian flourishes without a paywall</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 00:31:27</span
              ><span class="points-container"
                >Points: <span class="points">314</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43511529"
                  >Comments</a
                ><span class="descendants">: 159</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43509733">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/charlie-javice-convicted-fraud-jp-morgan-783cb7b089f6ab5d814c4c0984f0302b"
              >Charlie Javice convicted of defrauding JPMorgan in $175M startup
              sale</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 20:55:50</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43509733"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43505340">
          <h3>
            <a
              class="item"
              href="https://spillhistorie.no/interview-with-the-creator-of-deluxe-ski-jump/"
              >Interview with the Creator of Deluxe Ski Jump</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 13:41:00</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43505340"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
