<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41797009">
          <h3>
            <a
              class="item"
              href="https://rethinkingsoftware.substack.com/p/scrums-product-owner-problem"
              >Scrum's "Product Owner" Problem – By Adam Ard</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-10 @ 09:06:32</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41797009"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41796748">
          <h3>
            <a
              class="item"
              href="https://megabyterose.com/2024/10/leaving-wordpress-org-or-wpf-still-unsure-which-one/"
              >Leaving WordPress (.org or WPF, still unsure which one)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-10 @ 08:20:45</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41796748"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41796030">
          <h3>
            <a
              class="item"
              href="https://www.bleepingcomputer.com/news/security/mozilla-fixes-firefox-zero-day-actively-exploited-in-attacks/"
              >Mozilla fixes Firefox zero-day actively exploited in attacks</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-10 @ 06:11:18</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41796030"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41795919">
          <h3>
            <a
              class="item"
              href="https://www.os2museum.com/wp/os-2-tcpbeui-name-resolution/"
              >OS/2 TCPBEUI Name Resolution</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-10 @ 05:46:43</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41795919"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41795561">
          <h3>
            <a
              class="item"
              href="https://roborooter.com/post/wasm-is-the-new-cgi/"
              >WASM Is the New CGI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-10 @ 04:38:58</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41795561"
                  >Comments</a
                ><span class="descendants">: 154</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41795218">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Ratan_Tata"
              >Indian entrepreneur, industrialist, and philanthropist, Ratan
              Tata, dead at 86</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-10 @ 03:29:17</span
              ><span class="points-container"
                >Points: <span class="points">198</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41795218"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41794818">
          <h3>
            <a
              class="item"
              href="https://blog.miguelgrinberg.com/post/the-ultimate-guide-to-error-handling-in-python"
              >The Ultimate Guide to Error Handling in Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-10 @ 02:08:10</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41794818"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41794566">
          <h3>
            <a
              class="item"
              href="https://gieseanw.wordpress.com/2024/10/09/how-to-make-product-give-a-shit-about-your-architecture-proposal/"
              >How to make Product give a shit about your architecture
              proposal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-10 @ 01:13:09</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41794566"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41794019">
          <h3>
            <a
              class="item"
              href="https://forum.winworldpc.com/discussion/11503/software-spotlight-cassette-software-for-the-ibm-pc"
              >Software spotlight: Cassette software for the IBM PC</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 23:43:39</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41794019"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41793658">
          <h3>
            <a
              class="item"
              href="https://cacm.acm.org/practice/you-dont-know-jack-about-bandwidth/"
              >You Don’t Know Jack about Bandwidth</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 22:51:55</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41793658"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41793597">
          <h3>
            <a
              class="item"
              href="https://beeps.website/blog/2024-10-09-why-govuk-exit-this-page-doesnt-use-escape/"
              >Why Gov.uk's Exit this Page component doesn't use the Escape
              key</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 22:45:26</span
              ><span class="points-container"
                >Points: <span class="points">271</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41793597"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41792803">
          <h3>
            <a
              class="item"
              href="https://til.simonwillison.net/homebrew/no-verify-attestations"
              >Upgrading Homebrew and avoiding the "failed to verify
              attestation" error</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 21:22:51</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41792803"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41792500">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2024/10/9/24266419/internet-archive-ddos-attack-pop-up-message"
              >Internet Archive: Security breach alert</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 20:54:26</span
              ><span class="points-container"
                >Points: <span class="points">806</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41792500"
                  >Comments</a
                ><span class="descendants">: 466</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41790619">
          <h3>
            <a class="item" href="https://github.com/andrearaponi/dito"
              >Dito – an advanced Layer 7 reverse proxy server written in Go</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 17:44:31</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41790619"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41790295">
          <h3>
            <a class="item" href="https://www.dookiedemastered.com/"
              >Dookie Demastered</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 17:18:19</span
              ><span class="points-container"
                >Points: <span class="points">620</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41790295"
                  >Comments</a
                ><span class="descendants">: 162</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41790113">
          <h3>
            <a
              class="item"
              href="https://jobs.ashbyhq.com/motion/f1a2ebd8-c390-4d23-89e7-519979f4630b?utm_source=hn"
              >Motion (YC W20) is hiring our first customer success manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 17:00:41</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41789633">
          <h3>
            <a class="item" href="https://www.donobu.com/"
              >Show HN: Donobu – Mac App for Web Automation and Testing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 16:18:42</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41789633"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.donobu.com/">https://www.donobu.com/</a>).
              <p>
                You can optionally use AI (BYOK: bring your own keys) to create
                flows for you and to do other interesting things, like making
                vision-based semantic assertions. Also, your data lives on your
                own filesystem, and we do not see any of it (further still,
                there is no phoning home at all). A nice benefit of this being a
                desktop app rather than a SAAS product, is that if you happen to
                be developing/iterating on a webpage locally, this has no
                problem hooking into it.
              </p>
              <p>
                What this intends to be a good fit for: - Testing web pages,
                especially locally. - Exploring random webpages with a stated
                objective. - Automating tedious flows. Rerunning a flow won't
                get caught up on using a single selector (many websites
                randomize element IDs, for instance), there is smart failover
                using a prioritized list of selectors. - Getting a quick draft
                of an end-to-end test in Javascript.
              </p>
              <p>
                What this is a bad fit for: - Mass web scraping (too slow). -
                Adversarial websites.
              </p>
              <p>
                What we are still working out: - Click-and-drag operations. -
                Websites that are primarily controlled from canvas. - Smoothing
                out UI/UX (we are two backend engineers trying our best, and are
                handedly outgunned by real frontend engineers).
              </p>
              <p>
                Fun things to try: - Asking it to assert that a webpage has a
                certain theme. - Asking it to run an accessibility report for a
                page (uses
                <a href="https://github.com/dequelabs/axe-core"
                  >https://github.com/dequelabs/axe-core</a
                >). - Asking it to run a cookie report for a page.
              </p>
              <p>
                The tech: - Java 21 for the main business logic. - Javalin 6 for
                the web framework (<a href="https://javalin.io/"
                  >https://javalin.io/</a
                >). - Playwright for controlling the browser (<a
                  href="https://playwright.dev/java/"
                  >https://playwright.dev/java/</a
                >). - Axe for running accessibility reports (<a
                  href="https://github.com/dequelabs/axe-core"
                  >https://github.com/dequelabs/axe-core</a
                >).
              </p>
              <p>Critical feedback is welcome. Thanks for trying it out!</p>
              <p>Cheers, -Justin and Vaz</p>
            </div>
          </section>
        </section>
        <section id="41789242">
          <h3>
            <a
              class="item"
              href="https://www.arnaldur.be/writing/about/an-n-ball-between-n-balls"
              >An n-ball Between n-balls</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 15:50:00</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41789242"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41789176">
          <h3>
            <a class="item" href="https://finetunedb.com"
              >Show HN: FinetuneDB – AI fine-tuning platform to create custom
              LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 15:44:53</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41789176"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
            <div class="text">
              <a href="https://finetunedb.com/">https://finetunedb.com/</a>), an
              LLM fine-tuning platform. It enables teams to easily create and
              manage high-quality datasets, and streamlines the entire workflow
              from fine-tuning to serving and evaluating models with domain
              experts. You can check out our docs here: (<a
                href="https://docs.finetunedb.com/"
                >https://docs.finetunedb.com/</a
              >)
              <p>
                FinetuneDB exists because creating and managing high-quality
                datasets is a real bottleneck when fine-tuning LLMs. The quality
                of your data directly impacts the performance of your fine-tuned
                models, and existing tools didn’t offer an easy way for teams to
                build, organize, and iterate on their datasets. We’ve been
                working closely with our pilot customers, both AI startups and
                more traditional businesses like a large newspaper, which is
                fine-tuning models on their articles to automate content
                generation in their tone of voice.
              </p>
              <p>
                The platform is built with an end-to-end workflow in mind, from
                dataset building, fine-tuning, serving, and evaluating outputs.
                The centerpiece is a version-controlled, no-code dataset manager
                where you can upload existing datasets in JSONL, use production
                data, or collaborate with domain experts to create high-quality
                datasets for custom use cases. We also offer evaluation
                workflows that allow non-technical contributors to annotate
                data, review model outputs, and refine responses (LLM-as-judge
                also available).
              </p>
              <p>We offer:</p>
              <p>
                - A free tier for developers and hobbyists who want to
                streamline dataset management.
              </p>
              <p>
                - Business-tier with full feature access for teams, using
                per-seat pricing.
              </p>
              <p>
                - A custom tier for model hosting, custom integrations, and
                self-hosting.
              </p>
              <p>
                Most users still use OpenAI models, but if you're working with
                open-source LLMs, we offer pay-as-you-go pricing for serverless
                inference for Llama and Mistral models with up to €100 in free
                credits to get started.
              </p>
              <p>
                We're in public beta right now, so any feedback—whether it’s
                about features, usability, or anything else—would be incredibly
                valuable.
              </p>
              <p>
                If you've worked on fine-tuning models before or are curious
                about custom LLMs, we’d love to hear from you. Our goal is to
                make the fine-tuning process more accessible and help more
                companies leverage their data and domain experts to create
                custom LLMs.
              </p>
              <p>Thanks for checking it out!</p>
            </div>
          </section>
        </section>
        <section id="41787798">
          <h3>
            <a
              class="item"
              href="https://resobscura.substack.com/p/on-17th-century-cocaine"
              >On 17th century "cocaine"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-09 @ 13:33:01</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41787798"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41778882">
          <h3>
            <a
              class="item"
              href="https://www.swiftjectivec.com/elite-hoops-gaining-users-as-an-indie-app-with-paid-ads-and-lessons-learned/"
              >Using Paid Ads to Grow Elite Hoops as an Indie and 11 Other
              Lessons</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-08 @ 16:04:57</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41778882"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41765127">
          <h3>
            <a class="item" href="https://luckymike.dev/posts/warm-handoffs/"
              >Warm Handoffs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-07 @ 11:59:11</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41765127"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41764465">
          <h3>
            <a
              class="item"
              href="https://cacm.acm.org/research/50-years-of-queries/"
              >50 Years of Queries</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-07 @ 10:08:32</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41764465"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41764163">
          <h3>
            <a class="item" href="https://zod.dev/"
              >Zod: TypeScript-first schema validation with static type
              inference</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-07 @ 09:18:59</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41764163"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41763034">
          <h3>
            <a
              class="item"
              href="https://articles.foletta.org/post/2021-04-19-what-the/"
              >What the (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-07 @ 05:23:49</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41763034"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41762483">
          <h3>
            <a
              class="item"
              href="https://github.com/google/mozc-devices/tree/master/mozc-doublesided"
              >Gboard Double Sided Version</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-07 @ 03:23:56</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41762483"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41758870">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/future/article/20160930-the-mystery-of-why-left-handers-are-so-much-rarer"
              >The mystery of why left-handers are so much rarer (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-06 @ 18:07:25</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41758870"
                  >Comments</a
                ><span class="descendants">: 244</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41758371">
          <h3>
            <a
              class="item"
              href="http://number-none.com/blow/blog/programming/2014/09/26/carmack-on-inlined-code.html"
              >John Carmack on inlined code (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-06 @ 16:47:18</span
              ><span class="points-container"
                >Points: <span class="points">519</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41758371"
                  >Comments</a
                ><span class="descendants">: 355</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41757701">
          <h3>
            <a class="item" href="https://blog.regehr.org/archives/1307"
              >The Strict Aliasing Situation Is Pretty Bad (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-06 @ 15:16:41</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41757701"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41753626">
          <h3>
            <a class="item" href="https://scottaaronson.blog/?p=8375"
              >Quantum Advantage for NP Approximation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-05 @ 23:27:23</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41753626"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
