<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42684211">
          <h3>
            <a class="item" href="https://subwaystories.nyc/">Subway Stories</a>
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 15:10:11</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42684211"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42683630">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/01/11/opinion_column_us_moves/"
              >US-owned Greenland and Gulf of America? What a weird week</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 14:18:08</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42683630"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42683567">
          <h3>
            <a
              class="item"
              href="https://blog.trampolinetales.com/luck-be-a-landlord-might-be-banned-from-google-play-2/"
              >Luck Be a Landlord Might Be Banned from Google Play</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 14:10:33</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42683567"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42683009">
          <h3>
            <a
              class="item"
              href="https://akkartik.name/post/literate-programming"
              >Literate programming: Knuth is doing it wrong (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 13:06:42</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42683009"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42682876">
          <h3>
            <a class="item" href="https://traintimes.org.uk/map/tube/"
              >Live London Underground / bus maps taken down by TfL trademark
              complaint</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 12:51:37</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42682876"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42682671">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/01/13/anexia_vmware_to_kvm_migration/"
              >Euro-cloud provider Anexia moves 12,000 VMs off VMware to
              homebrew KVM platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 12:19:15</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42682671"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42682602">
          <h3>
            <a
              class="item"
              href="https://dwheeler.com/essays/debugging-agans.html"
              >Debugging: Indispensable rules for finding even the most elusive
              problems (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 12:07:42</span
              ><span class="points-container"
                >Points: <span class="points">176</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42682602"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42682560">
          <h3>
            <a
              class="item"
              href="https://www.raycast.com/jobs/software-engineer-full-stack"
              >Raycast (YC W20) Is Hiring Full Stack Engineer (EU, Remote,
              €105k-€160k)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 12:00:11</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42680499">
          <h3>
            <a class="item" href="https://www.ircdriven.com/"
              >IRC Driven – modern IRC indexing site and search engine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 05:58:32</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42680499"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42680437">
          <h3>
            <a
              class="item"
              href="https://utcc.utoronto.ca/~cks/space/blog/unix/EtcGlobHistory"
              >The history and use of /etc./glob in early Unixes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 05:44:29</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42680437"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42680048">
          <h3>
            <a class="item" href="https://www.birls.org"
              >Show HN: New search engine and free-FOIA-by-fax-via-web for US
              veteran records</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 04:22:06</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42680048"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
            <div class="text">
              <p>
                Back in September 2017, our organization made a Freedom of
                Information Act (FOIA) request to the US Department of Veterans
                Affairs (the VA) asking for a copy of a database they maintain
                called "BIRLS", which stands for the Beneficiary Identification
                Records Locator Subsystem. While it's not exactly an index of
                every single post-Civil-War veteran of every branch of the US
                military, it's possibly the closest thing that exists to it.
              </p>
              <p>
                BIRLS is a database that indexes all the
                known-to-the-VA-in-or-after-the-1970s *<i
                  >veterans' benefits claims files*</i
                >, also called C-Files or sometimes XC-Files. Older veterans'
                claims files have been moved to the National Archives (NARA),
                such as the famous Civil War pension files. But 95% of the later
                benefits claim files, from the late nineteenth century up to
                today, are still held at the VA, in their warehouses, and still
                haven't been sent to NARA.
              </p>
              <p>
                And even if you know these files exist, the VA really doesn't
                make it easy to get them. The Veterans Benefits Administration
                (VBA) group within the VA only seems to accept FOIA requests for
                copies of C-Files by fax (!) and also seems to have made up a
                whole new rule whereby you have to have an actual wet ink
                signature on your FOIA request, not just a typed letter.
              </p>
              <p>
                Well, seven years and one very successful FOIA lawsuit in SDNY
                against the VA later, we at Reclaim The Records are very proud
                to announce the acquisition and first-ever free public release
                of the BIRLS database, AND that we built a new website to make
                the data freely and easily searchable AND that we even built a
                free FOIA-by-FAX-API system (with a signature widget, to get
                around the dumb new not-FOIA rules!) built into our website's
                search results, that makes it much, much easier for people to
                finally get these files out of the VA warehouses and into your
                mailbox. :-)
              </p>
              <p>
                We also added the ability to do searches through the data for
                soundalike names, abbreviated names, common nicknames,
                wildcards, searches by date of birth or death, or ranges of
                birth and death years, or search by SSN, or by branch(es) of
                services, or by gender...
              </p>
              <p>
                For a lot more information about our FOIA lawsuit against the VA
                for the database, including copies of our court papers and the
                SDNY judge's order:
              </p>
              <p>
                <a
                  href="https://mailchi.mp/reclaimtherecords/the-birls-database-goes-online-with-eighteen-million-us-veteran-records-and-free-foia-by-fax-system"
                  >https://mailchi.mp/reclaimtherecords/the-birls-database-goes...</a
                >
              </p>
              <p>
                As for the tech stuff, actually building the website, the search
                engine, and its FOIAing capability...well, it has been a pretty
                fun project to build.
              </p>
              <p>
                The BIRLS dataset was eventually provided to us by the VA
                (several years after we originally asked for it...) as a large
                zip file which, when decompressed via the command line, yielded
                the hilarious file name of *<i>Redacted_Full.csv*</i>. I then
                loaded the cleaned CSV data into a MySQL database, and then used
                a modified version of the Apache Solr search engine to index the
                data, so that it could become searchable by soundalike names
                (using Beider-Morse Phonetic Matching), nicknames (using Solr's
                synonyms feature), partial names (using wildcards), with dates
                converted to ISO 8601 format to enable both exact date and date
                range searches, and various other search criteria.
              </p>
              <p>
                The front-end of the website is built with Nuxt and hosted on
                Digital Ocean's App Platform, with backups of the FOIA request
                data on the cloud storage service Wasabi. The fax interface for
                submitting FOIA requests is powered by the Notifyre API. We use
                Mailchimp to send e-mail newsletters, and their product Mandrill
                for programmatic e-mail sending. We use Sentry for error
                monitoring, Better Stack for server logging, and TinyBird to
                collect FOIA submission analytics.
              </p>
              <p>Enjoy!</p>
            </div>
          </section>
        </section>
        <section id="42679127">
          <h3>
            <a
              class="item"
              href="https://movies.stackexchange.com/questions/79161/how-did-they-make-cars-fall-apart-in-old-movies"
              >How did they make cars fall apart in old movies (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 01:41:52</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42679127"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42678754">
          <h3>
            <a class="item" href="https://doompdf.pages.dev/doom.pdf"
              >Show HN: Doom (1993) in a PDF</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 00:50:43</span
              ><span class="points-container"
                >Points: <span class="points">290</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42678754"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
            <div class="text">
              <p>
                I was inspired by the recent HN post about Tetris in a PDF (<a
                  href="https://news.ycombinator.com/item?id=42645218"
                  >https://news.ycombinator.com/item?id=42645218</a
                >) and I wondered if I could get Doom to run using a similar
                method.
              </p>
              <p>
                It turns out that old versions of Emscripten can compile C to
                asm.js code that will happily run inside the limited JS runtime
                of the PDF engine. I used the doomgeneric (<a
                  href="https://github.com/ozkl/doomgeneric"
                  >https://github.com/ozkl/doomgeneric</a
                >) fork of the original Doom source, as that made writing the IO
                fairly easy. All I had to do was implement a framebuffer and
                keyboard inputs.
              </p>
              <p>
                Unlike previous interactive PDF demos, the output for DoomPDF is
                achieved by creating a text field for each row of pixels in the
                screen, then setting their contents to various ASCII characters.
                This gives me a 6 color monochrome display, that can be updated
                reasonably quickly (80ms per frame).
              </p>
              <p>
                The source code is available at:
                <a href="https://github.com/ading2210/doompdf"
                  >https://github.com/ading2210/doompdf</a
                >
              </p>
              <p>
                Note that this PDF can only run in Chromium-based browsers that
                use the PDFium engine.
              </p>
            </div>
          </section>
        </section>
        <section id="42678647">
          <h3>
            <a
              class="item"
              href="https://heterogenoustasks.wordpress.com/2015/01/26/standard-patterns-in-choice-based-games/"
              >Standard patterns in choice-based games (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 00:35:22</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42678647"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42678584">
          <h3>
            <a class="item" href="https://thefreemovie.buzz/"
              >The Free Movie: Frame-by-frame, handrawn reproduction of "The Bee
              Movie" (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-13 @ 00:27:00</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42678584"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42677835">
          <h3>
            <a class="item" href="https://medhir.com/blog/right-to-root-access"
              >Right to root access</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 22:53:16</span
              ><span class="points-container"
                >Points: <span class="points">253</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42677835"
                  >Comments</a
                ><span class="descendants">: 241</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42676529">
          <h3>
            <a
              class="item"
              href="https://surfingcomplexity.blog/2024/12/21/the-canva-outage-another-tale-of-saturation-and-resilience/"
              >The Canva outage: another tale of saturation and resilience</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 20:18:43</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42676529"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42676123">
          <h3>
            <a
              class="item"
              href="https://www.jamesshore.com/v2/blog/2025/the-best-product-engineering-org-in-the-world"
              >If we had the best product engineering organization, what would
              it look like?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 19:27:07</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42676123"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42675725">
          <h3>
            <a class="item" href="https://github.com/TabbyML/tabby"
              >Tabby: Self-hosted AI coding assistant</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 18:43:05</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42675725"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42675025">
          <h3>
            <a
              class="item"
              href="https://www.righto.com/2025/01/its-time-to-abandon-cargo-cult-metaphor.html"
              >It's time to abandon the cargo cult metaphor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 17:14:37</span
              ><span class="points-container"
                >Points: <span class="points">235</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42675025"
                  >Comments</a
                ><span class="descendants">: 496</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42674455">
          <h3>
            <a
              class="item"
              href="https://labs.watchtowr.com/more-governments-backdoors-in-your-backdoors/"
              >Backdooring Your Backdoors – Another $20 Domain, More
              Governments</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 16:01:00</span
              ><span class="points-container"
                >Points: <span class="points">389</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42674455"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42674385">
          <h3>
            <a
              class="item"
              href="https://www.xtof.info/MacMiniG4-the-best-classic-macintosh-for-retrogaming.html"
              >Mac Mini G4 – The best « classic » Macintosh for retro-gaming?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 15:53:02</span
              ><span class="points-container"
                >Points: <span class="points">220</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42674385"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42674116">
          <h3>
            <a
              class="item"
              href="https://eieio.games/blog/bad-apple-with-regex-in-vim/"
              >Bad Apple but it's 6,500 regexes that I search for in Vim</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 15:13:14</span
              ><span class="points-container"
                >Points: <span class="points">517</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42674116"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42673435">
          <h3>
            <a class="item" href="https://www.cl.cam.ac.uk/~mr10/bcpl4raspi.pdf"
              >Young Persons Guide to BCPL Programming on the Raspberry Pi
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 13:37:07</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42673435"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42672863">
          <h3>
            <a class="item" href="https://simonask.github.io/introducing-werk/"
              >Show HN: Werk, a simple build tool and command runner</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-12 @ 11:40:56</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42672863"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              I made this for my personal workflow, but I'd love to get feedback
              from the community.
            </div>
          </section>
        </section>
        <section id="42661336">
          <h3>
            <a
              class="item"
              href="https://www.usenix.org/legacy/events/hotpar11/tech/final_files/Boehm.pdf"
              >How to miscompile programs with "benign" data races [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 23:01:50</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42661336"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42657585">
          <h3>
            <a
              class="item"
              href="https://www.filfre.net/2025/01/railroad-tycoon-ii/"
              >Railroad Tycoon II</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 17:15:22</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42657585"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42651043">
          <h3>
            <a
              class="item"
              href="https://collegetowns.substack.com/p/celebrating-the-timeless-allure-of"
              >Celebrating the Timeless Allure of Tintin's Aesthetics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 23:47:50</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42651043"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42649862">
          <h3>
            <a
              class="item"
              href="https://www.downtowndougbrown.com/2024/04/why-is-my-cpu-usage-always-100-upgrading-my-chumby-8-kernel-part-9/"
              >Why is my CPU usage always 100%?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 21:15:33</span
              ><span class="points-container"
                >Points: <span class="points">290</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42649862"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42649315">
          <h3>
            <a class="item" href="https://nikkin.dev/blog/llm-entropy.html"
              >Entropy of a Large Language Model output</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 20:00:47</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42649315"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
