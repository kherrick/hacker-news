<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40149630">
          <h3>
            <a
              class="item"
              href="https://finance.yahoo.com/video/meta-stock-falls-disappointing-q2-202013597.html"
              >Meta stock has lost $137B in market cap on weak Q2 revenue
              guidance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 21:05:08</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40149630"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40149581">
          <h3>
            <a
              class="item"
              href="https://jobs.lever.co/glass-health-inc?team=Product%20%26%20Engineering"
              >Glass Health (YC W23) is hiring founding, senior and lead
              full-stack engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 21:00:35</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40149446">
          <h3>
            <a
              class="item"
              href="https://exple.tive.org/blarg/2024/04/24/magic-numbers/"
              >Magic Numbers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 20:50:03</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40149446"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40149095">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/markets/deals/ibm-buy-hashicorp-64-billion-deal-expand-cloud-software-2024-04-24/"
              >IBM to buy HashiCorp in $6.4B deal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 20:21:32</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40149095"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40149093">
          <h3>
            <a
              class="item"
              href="https://www.404media.co/pixiv-manga-site-blocks-adult-content-but-only-for-us-and-uk-users/"
              >Pixiv Blocks Adult Content, but Only for US and UK Users</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 20:21:31</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40149093"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40149071">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2024/04/24/eric-schmidt-backed-augment-a-github-copilot-rival-launches-out-of-stealth-with-252m/"
              >Eric Schmidt-backed Augment, a GitHub Copilot rival, launches out
              of stealth</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 20:19:46</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40149071"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40148998">
          <h3>
            <a
              class="item"
              href="https://investor.fb.com/investor-news/press-release-details/2024/Meta-Reports-First-Quarter-2024-Results/default.aspx"
              >Meta Reports First Quarter 2024 Results</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 20:12:53</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40148998"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40148833">
          <h3>
            <a
              class="item"
              href="https://aftermath.site/lan-party-merritt-k-book-read-only-memory-rom"
              >The Rise and Fall of the LAN Party</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 19:56:40</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40148833"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40148795">
          <h3>
            <a
              class="item"
              href="https://www.os2museum.com/wp/why-does-windows-really-use-backslash-as-path-separator/"
              >Why does Windows use backslash as path separator? (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 19:52:56</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40148795"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40148707">
          <h3>
            <a
              class="item"
              href="https://theconversation.com/nearsightedness-is-at-epidemic-levels-and-the-problem-begins-in-childhood-225255"
              >Nearsightedness is at epidemic levels – and the problem begins in
              childhood</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 19:44:47</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40148707"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40148563">
          <h3>
            <a
              class="item"
              href="https://lithub.com/i-now-lack-the-juice-to-fuel-the-bluster-to-conceal-that-i-am-a-simpleton-padgett-powell-legend/"
              >I now lack the juice to fuel the bluster to conceal that I am a
              simpleton</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 19:32:20</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40148563"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40147883">
          <h3>
            <a
              class="item"
              href="https://github.com/atlassian/pragmatic-drag-and-drop"
              >A feature-rich front-end drag-and-drop component library</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 18:25:27</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40147883"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40147534">
          <h3>
            <a
              class="item"
              href="https://www.statsignificant.com/p/when-do-we-stop-finding-new-music"
              >When do we stop finding new music?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 17:50:18</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40147534"
                  >Comments</a
                ><span class="descendants">: 196</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40146751">
          <h3>
            <a
              class="item"
              href="https://prosopo.io/articles/typescript-branding/"
              >TypeScript: Branded Types</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 16:48:21</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40146751"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40146623">
          <h3>
            <a
              class="item"
              href="https://www.browserless.io/blog/managing-concurrencies-with-nginx-and-lua"
              >How we manage individual user concurrencies with Nginx and Lua</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 16:40:18</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40146623"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40146615">
          <h3>
            <a class="item" href="https://verdagon.dev/grimoire/grimoire"
              >Borrow Checking, RC, GC, and the Eleven () Other Memory Safety
              Approaches</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 16:39:48</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40146615"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40146505">
          <h3>
            <a
              class="item"
              href="https://www.stainlessapi.com/blog/announcing-the-stainless-sdk-generator"
              >The Stainless SDK Generator</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 16:34:35</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40146505"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40146088">
          <h3>
            <a
              class="item"
              href="https://replicate.com/snowflake/snowflake-arctic-instruct"
              >Snowflake Arctic Instruct (128x3B MoE), largest open source
              model</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 16:09:38</span
              ><span class="points-container"
                >Points: <span class="points">242</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40146088"
                  >Comments</a
                ><span class="descendants">: 173</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40145963">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2024/4/24/24139036/biden-signs-tiktok-ban-bill-divest-foreign-aid-package"
              >Biden signs TikTok bill into law, starting clock for ByteDance to
              divest</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 15:59:55</span
              ><span class="points-container"
                >Points: <span class="points">316</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40145963"
                  >Comments</a
                ><span class="descendants">: 697</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40143669">
          <h3>
            <a class="item" href="https://github.com/sarah-ek/faer-rs"
              >Faer-rs: Linear algebra foundation for Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 12:41:09</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40143669"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40143498">
          <h3>
            <a class="item" href="https://langcss.com/"
              >Show HN: LangCSS – An AI Assistant for Tailwind</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 12:20:32</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40143498"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
            <div class="text">
              <p>
                This is my personal project that is an IDE and AI assistant for
                creating tailwind components and pages. You can chat to create
                designs, then make small edits yourself, and continue chatting
                to refine them. I am always working to improve the UX.
              </p>
              <p>
                I have a time limited demo page here:
                <a href="https://langcss.com/demo">https://langcss.com/demo</a>
              </p>
              <p>Please let me know what you think! Feedback is welcome.</p>
              <p>
                Tech wise, this just uses NextJS (Hosted on Docker) and Azure
                Open AI.
              </p>
            </div>
          </section>
        </section>
        <section id="40141980">
          <h3>
            <a
              class="item"
              href="https://podlite.org/2024/4/23/1/podlite-specification-v1-0-released"
              >Show HN: Podlite - a lightweight markup language for organizing
              knowledge</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 08:35:30</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40141980"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
            <div class="text">
              <p>
                In addition, the support for Markdown markup as a standard block
                adds convenience and allows for the use of familiar syntax for
                text formatting
              </p>
              <p>
                It's perfect for documentation, educational materials, blogging,
                and much more for organizing knowledge.
              </p>
              <p>
                One of the key features of Podlite is its extensibility. This
                allows for defining unique and domain-specific blocks and
                expanding the language's functionality according to the
                requirements of your project.
              </p>
              <p>
                The Podlite specification is published under the Artistic
                license 2.0.
              </p>
              <p>
                Site:
                <a href="https://podlite.org">https://podlite.org</a> Thank You!
              </p>
            </div>
          </section>
        </section>
        <section id="40141967">
          <h3>
            <a
              class="item"
              href="https://blog.benjojo.co.uk/post/sn2010-linux-hacking-switchdev"
              >Sysadmin friendly high speed Ethernet switching</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 08:32:36</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40141967"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40141777">
          <h3>
            <a
              class="item"
              href="https://www.dangermouse.net/esoteric/piet.html"
              >Piet: Programming language in which programs look like abstract
              paintings (2002)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 07:52:58</span
              ><span class="points-container"
                >Points: <span class="points">379</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40141777"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40141463">
          <h3>
            <a
              class="item"
              href="https://seths.blog/2024/04/other-peoples-problems/"
              >Other People’s Problems</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 06:57:24</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40141463"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40139434">
          <h3>
            <a class="item" href="https://emildziewanowski.com/flowfields/"
              >Simulating Jupiter</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 01:32:39</span
              ><span class="points-container"
                >Points: <span class="points">323</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40139434"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40139398">
          <h3>
            <a class="item" href="https://github.com/apple/corenet"
              >CoreNet: A library for training deep neural networks</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-24 @ 01:26:48</span
              ><span class="points-container"
                >Points: <span class="points">450</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40139398"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40138228">
          <h3>
            <a class="item" href="https://esphome.io/index.html">ESPHome</a>
          </h3>
          <section>
            <h4>
              <span>2024-04-23 @ 22:46:44</span
              ><span class="points-container"
                >Points: <span class="points">456</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40138228"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40136130">
          <h3>
            <a
              class="item"
              href="https://www.elegantexperiments.net/en/post/length-and-thickness-of-bamboo-internodes-a-beautiful-curve/"
              >Length and thickness of bamboo internodes: a beautiful curve</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-23 @ 19:27:17</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40136130"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40130803">
          <h3>
            <a class="item" href="https://videogigagan.github.io/"
              >VideoGigaGAN: Towards detail-rich video super-resolution</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-23 @ 11:49:18</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40130803"
                  >Comments</a
                ><span class="descendants">: 183</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
