<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42424508">
          <h3>
            <a class="item" href="https://smarthome.steviep.xyz"
              >SmartHome: An Adventure Game</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 17:05:30</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42424508"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42424484">
          <h3>
            <a
              class="item"
              href="https://ycombinator.com/companies/trellis/jobs/7vGTphf-founding-engineer-backend-ai"
              >Trellis (YC W24) Is Hiring Eng to Automate PDFs Task at Scale</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 17:01:18</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42424370">
          <h3>
            <a class="item" href="https://github.com/JanNeuendorf/SVC16"
              >SVC16: Simplest Virtual Computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 16:39:26</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42424370"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42423988">
          <h3>
            <a class="item" href="https://railgunlabs.com/unicorn/"
              >Show HN: I built an embeddable Unicode library with MISRA C
              conformance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 15:41:27</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42423988"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                Unicorn is designed to be fully customizable: you can select
                which Unicode algorithms and character properties are included
                or excluded from compilation. You can also exclude Unicode
                character blocks wholesale for scripts your application does not
                support. It's perfect for resource constrained devices like
                microcontrollers and IoT devices.
              </p>
              <p>
                About me: I quit my Big Corp job a few years back to pursue my
                passion for software development and this is one of my first
                commercial releases.
              </p>
            </div>
          </section>
        </section>
        <section id="42423742">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42423742"
              >Lost IBM OS/2 Warp 3 and 4 localizations: Looking for help
              finding and archiving</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 14:59:46</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42423742"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <p>
                Building on a 2022 post about finding a copy of the long lost
                Slovenian OS/2 Warp 4 -
                https://www.os2museum.com/wp/slovenian-os-2-warp-4/ - some
                fellow software archaeologists have concluded some other
                localization editions are still missing - copied from the post's
                comments:
              </p>
              <p>
                -- OBattler says: December 8, 2024 at 9:53 am It turns out
                Slovenian isn’t the only version missing of OS/2 Warp 4.0 –
                Portuguese (Portugal) and Portuguese (Brazil) are also missing,
                as are Dutch, French, Finnish, Norwegian, and Swedish, and a
                non-trial version of Hungarian.
              </p>
              <p>
                OBattler says: December 8, 2024 at 10:01 am I just found FixPack
                5 for OS/2 Warp 3.0 (or at least, references thereof) Arabic,
                French (Canada), Hebrew, Thai, Turkish, and, apparently, also
                Bulgarian and Lithuaian! So OS/2 Warp 4.0 must have also existed
                in these languages.
              </p>
              <p>Source: https://ecsoft2.org/system-fixpacks-and-patches --</p>
              <p>
                Anyone who can help find these CDs and help the os2museum.com
                preserve them (and optionally upload them to archive.org, too)
                is very welcome to join our cause.
              </p>
              <p>
                Also looking for any (ex)IBM employees thst worked on the OS/2
                localization projects and can help with this!
              </p>
              <p>Marko Štamcar Computer History Museum Slovenia</p>
            </div>
          </section>
        </section>
        <section id="42423409">
          <h3>
            <a
              class="item"
              href="https://www.futilitycloset.com/2024/12/15/tidy-2/"
              >A visual proof that a^2 – b^2 = (a + b)(a – b)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 14:01:37</span
              ><span class="points-container"
                >Points: <span class="points">220</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42423409"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42422942">
          <h3>
            <a
              class="item"
              href="https://jpcamara.com/2024/12/14/my-rubyconf-talk.html"
              >In-Depth Ruby Concurrency: Navigating the Ruby Concurrency
              Landscape</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 11:46:21</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42422942"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42422077">
          <h3>
            <a class="item" href="https://elmwealth.com/crystal-ball/"
              >When a Crystal Ball Isn't Enough to Make You Rich</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 07:22:37</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42422077"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42421157">
          <h3>
            <a
              class="item"
              href="https://irrationalanalysis.substack.com/p/tenstorrent-and-the-state-of-ai-hardware"
              >Tenstorrent and the State of AI Hardware Startups</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 02:59:58</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42421157"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42420352">
          <h3>
            <a
              class="item"
              href="https://www.york.ac.uk/news-and-events/news/2024/research/school-smartphone-ban-better-sleep/"
              >School smartphone ban results in better sleep and improved mood:
              study</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 23:51:44</span
              ><span class="points-container"
                >Points: <span class="points">848</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42420352"
                  >Comments</a
                ><span class="descendants">: 528</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42420138">
          <h3>
            <a class="item" href="https://blog.jonas.foo/whats_vim.html"
              >What Is Vim?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 23:06:07</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42420138"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42420091">
          <h3>
            <a
              class="item"
              href="https://lambdaland.org/posts/2024-11-21_powerful_or_safe_languages/"
              >Should programming languages be safe or powerful?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 22:58:03</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42420091"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42419469">
          <h3>
            <a class="item" href="https://theyseeyourphotos.com/"
              >They see your photos</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 21:09:51</span
              ><span class="points-container"
                >Points: <span class="points">358</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42419469"
                  >Comments</a
                ><span class="descendants">: 198</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42419036">
          <h3>
            <a
              class="item"
              href="https://crookedtimber.org/2024/11/11/occasional-paper-four-hidden-species-of-portuguese-man-o-war/"
              >Four Hidden Species of Portuguese Man-O'-War</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 19:53:12</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42419036"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42418982">
          <h3>
            <a class="item" href="https://irata.online/"
              >IRATA.ONLINE: A Community for Retro-Computing Enthusiasts</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 19:42:50</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42418982"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42418264">
          <h3>
            <a
              class="item"
              href="https://www.sciencedirect.com/science/article/pii/S2666202724004518"
              >Antimatter production, storage, control, annihilation
              applications in propulsion</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 17:21:58</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42418264"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42417480">
          <h3>
            <a
              class="item"
              href="https://www.essesmag.com/articles/racings-deadliest-day"
              >The 1955 Le Mans disaster changed motorsport</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 14:52:36</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42417480"
                  >Comments</a
                ><span class="descendants">: 242</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42417330">
          <h3>
            <a class="item" href="https://github.com/gsidhu/buzee-tauri"
              >Show HN: Open-sourcing my failed startup Buzee – A file search
              application</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 14:24:59</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42417330"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
            <div class="text">
              <p>
                As a modern-day knowledge worker, I have several thousand
                documents, presentations and other files on my computer. I built
                Buzee in my free time to help me weave my way through this maze.
                I have been using it pretty much everyday since the day I built
                it - and I love it!
              </p>
              <p>
                I thought I could turn Buzee into a startup. I reached out to
                offices and helped set it up for them. But it didn't pan out.
              </p>
              <p>
                I am now letting go of this project because I have other
                priorities in life.
              </p>
              <p>
                Please feel free to do with this project as you wish. I am happy
                to help you get started with the codebase.
              </p>
              <p>Do share what you build. I would love to see it!</p>
              <p>Cheers</p>
            </div>
          </section>
        </section>
        <section id="42416681">
          <h3>
            <a
              class="item"
              href="http://www.appliedscience.studio/articles/array-programming-for-clojurists.html"
              >Array Languages for Clojurians (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 12:33:32</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42416681"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42416258">
          <h3>
            <a class="item" href="https://chords.yottanami.com/"
              >Show HN: A simple web game to help learn chords and basic
              progressions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 11:05:14</span
              ><span class="points-container"
                >Points: <span class="points">173</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42416258"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've created Chord Nebula, a simple web-based game designed to
                help users learn and practice piano chords, basic progressions,
                and harmony fundamentals. The game integrates with MIDI
                keyboards, allowing you to play chords in real-time and receive
                immediate feedback based on the key you choose.
              </p>
              <p>
                GitHub Repository:
                <a href="https://github.com/yottanami/chord_nebula"
                  >https://github.com/yottanami/chord_nebula</a
                >
                Live Demo:
                <a href="https://chords.yottanami.com"
                  >https://chords.yottanami.com</a
                >
              </p>
              <p>
                Requirements: To use Chord Nebula, you'll need a MIDI keyboard
                connected to your computer.
              </p>
              <p>
                Current Status: Chord Nebula is still a simple project. I'm
                committed to improving it based on user feedback and would
                greatly appreciate any support or contributions from the
                community.
              </p>
              <p>
                Looking for Feedback and Collaborators: I'm eager to hear your
                thoughts on Chord Nebula! Whether it's suggestions for new
                features, improvements, or bug reports, your feedback is
                invaluable. Additionally, if you're interested in collaborating
                to enhance the game, feel free to reach out or contribute
                directly via GitHub.
              </p>
              <p>Thanks for taking the time to check out Chord Nebula!</p>
            </div>
          </section>
        </section>
        <section id="42415875">
          <h3>
            <a
              class="item"
              href="https://willwhitney.com/computing-inside-ai.html"
              >Computing Inside an AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 09:52:06</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42415875"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42415637">
          <h3>
            <a class="item" href="https://veryfront.com/figma-kit"
              >I made a free Figma library packed with components for fast
              prototyping</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 08:54:03</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42415637"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42415386">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/what-is-entropy-a-measure-of-just-how-little-we-really-know-20241213/"
              >What is entropy? A measure of just how little we know</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 07:49:10</span
              ><span class="points-container"
                >Points: <span class="points">331</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42415386"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42415122">
          <h3>
            <a
              class="item"
              href="https://ai.meta.com/research/publications/byte-latent-transformer-patches-scale-better-than-tokens/?_fb_noscript=1"
              >Byte Latent Transformer: Patches Scale Better Than Tokens</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 06:36:35</span
              ><span class="points-container"
                >Points: <span class="points">365</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42415122"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42405559">
          <h3>
            <a
              class="item"
              href="https://www.pcmag.com/articles/nyc-wants-you-to-stop-taking-traffic-cam-selfies-but-heres-how-to-do-it"
              >NYC wants you to stop taking traffic cam selfies, but here's how
              to do it anyway</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-13 @ 02:49:01</span
              ><span class="points-container"
                >Points: <span class="points">361</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42405559"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42400365">
          <h3>
            <a
              class="item"
              href="https://www.owlposting.com/p/why-recursion-pharmaceuticals-abandoned"
              >Why Recursion Pharmaceuticals abandoned cell painting for
              brightfield imaging</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-12 @ 16:08:51</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42400365"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42398809">
          <h3>
            <a
              class="item"
              href="https://www.thetimes.com/article/why-conversations-are-better-with-four-people-zhxbsg06s"
              >Conversations are better with four people</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-12 @ 13:05:08</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42398809"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42393867">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/lifestyle/2024/12/02/strava-art-run-toronto-mccabe/"
              >Man ran 700 miles to make 'insanely impressive' art on GPS
              fitness app</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-11 @ 22:42:41</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42393867"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42390863">
          <h3>
            <a
              class="item"
              href="https://www.statnews.com/2024/12/10/triple-negative-breast-cancer-biontech-immunotherapy-bispecific/"
              >Promising early data in triple negative breast cancer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-11 @ 18:16:06</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42390863"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42388724">
          <h3>
            <a class="item" href="https://libc.llvm.org/gpu/using.html"
              >Using Libc for GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-11 @ 15:29:21</span
              ><span class="points-container"
                >Points: <span class="points">176</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42388724"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
