<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43996597">
          <h3>
            <a
              class="item"
              href="https://thepointmag.com/examined-life/gateway-books/"
              >Gateway Books: The lessons of a defunct canon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 16:23:17</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43996597"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43996555">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43996555"
              >Launch HN: Tinfoil (YC X25): Verifiable Privacy for Cloud AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 16:19:00</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43996555"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <a href="https://tinfoil.sh">https://tinfoil.sh</a>. We host
              models and AI workloads on the cloud while guaranteeing zero data
              access and retention. This lets us run open-source LLMs like
              Llama, or Deepseek R1 on cloud GPUs without you having to trust
              us—or any cloud provider—with private data.
              <p>
                Since AI performs better the more context you give it, we think
                solving AI privacy will unlock more valuable AI applications,
                just how TLS on the Internet enabled e-commerce to flourish
                knowing that your credit card info wouldn't be stolen by someone
                sniffing internet packets.
              </p>
              <p>
                We come from backgrounds in cryptography, security, and
                infrastructure. Jules did his PhD in trusted hardware and
                confidential computing at MIT, and worked with NVIDIA and
                Microsoft Research on the same, Sacha did his PhD in
                privacy-preserving cryptography at MIT, Nate worked on privacy
                tech like Tor, and I (Tanya) was on Cloudflare's cryptography
                team. We were unsatisfied with band-aid techniques like PII
                redaction (which is actually undesirable in some cases like AI
                personal assistants) or “pinky promise” security through legal
                contracts like DPAs. We wanted a real solution that replaced
                trust with provable security.
              </p>
              <p>
                Running models locally or on-prem is an option, but can be
                expensive and inconvenient. Fully Homomorphic Encryption (FHE)
                is not practical for LLM inference for the foreseeable future.
                The next best option is using secure enclaves: a secure
                environment on the chip that no other software running on the
                host machine can access. This lets us perform LLM inference in
                the cloud while being able to prove that no one, not even
                Tinfoil or the cloud provider, can access the data. And because
                these security mechanisms are implemented in hardware, there is
                minimal performance overhead.
              </p>
              <p>
                Even though we (Tinfoil) control the host machine, we do not
                have any visibility into the data processed inside of the
                enclave. At a high level, a secure enclave is a set of cores
                that are reserved, isolated, and locked down to create a
                sectioned off area. Everything that comes out of the enclave is
                encrypted: memory and network traffic, but also peripheral
                (PCIe) traffic to other devices such as the GPU. These
                encryptions are performed using secret keys that are generated
                inside the enclave during setup, which never leave its
                boundaries. Additionally, a “hardware root of trust” baked into
                the chip lets clients check security claims and verify that all
                security mechanisms are in place.
              </p>
              <p>
                Up until recently, secure enclaves were only available on CPUs.
                But NVIDIA confidential computing recently added these
                hardware-based capabilities to their latest GPUs, making it
                possible to run GPU-based workloads in a secure enclave.
              </p>
              <p>Here’s how it works in a nutshell:</p>
              <p>
                1. We publish the code that should run inside the secure enclave
                to Github, as well as a hash of the compiled binary to a
                transparency log called Sigstore
              </p>
              <p>
                2. Before sending data to the enclave, the client fetches a
                signed document from the enclave which includes a hash of the
                running code signed by the CPU manufacturer. It then verifies
                the signature with the hardware manufacturer to prove the
                hardware is genuine. Then the client fetches a hash of the
                source code from a transparency log (Sigstore) and checks that
                the hash equals the one we got from the enclave. This lets the
                client get verifiable proof that the enclave is running the
                exact code we claim.
              </p>
              <p>
                3. With the assurance that the enclave environment is what we
                expect, the client sends its data to the enclave, which travels
                encrypted (TLS) and is only decrypted inside the enclave.
              </p>
              <p>
                4. Processing happens entirely within this protected
                environment. Even an attacker that controls the host machine
                can’t access this data. We believe making end-to-end
                verifiability a “first class citizen” is key. Secure enclaves
                have traditionally been used to remove trust from the cloud
                provider, not necessarily from the application provider. This is
                evidenced by confidential VM technologies such as Azure
                Confidential VM allowing ssh access by the host into the
                confidential VM. Our goal is to provably remove trust both from
                ourselves, aka the application provider, as well as the cloud
                provider.
              </p>
              <p>
                We encourage you to be skeptical of our privacy claims.
                Verifiability is our answer. It’s not just us saying it’s
                private; the hardware and cryptography let you check. Here’s a
                guide that walks you through the verification process:
                <a
                  href="https://docs.tinfoil.sh/verification/attestation-architecture"
                  >https://docs.tinfoil.sh/verification/attestation-architectur...</a
                >.
              </p>
              <p>
                People are using us for analyzing sensitive docs, building
                copilots for proprietary code, and processing user data in
                agentic AI applications without the privacy risks that
                previously blocked cloud AI adoption.
              </p>
              <p>We’re excited to share Tinfoil with HN!</p>
              <p>
                * Try the chat (<a href="https://tinfoil.sh/chat"
                  >https://tinfoil.sh/chat</a
                >): It verifies attestation with an in-browser check. Free,
                limited messages, $20/month for unlimited messages and
                additional models
              </p>
              <p>
                * Use the API (<a href="https://tinfoil.sh/inference"
                  >https://tinfoil.sh/inference</a
                >): OpenAI API compatible interface. $2 / 1M tokens
              </p>
              <p>
                * Take your existing Docker image and make it end to end
                confidential by deploying on Tinfoil. Here's a demo of how you
                could use Tinfoil to run a deepfake detection service that could
                run securely on people's private videos:
                <a href="https://www.youtube.com/watch?v=_8hLmqoutyk"
                  >https://www.youtube.com/watch?v=_8hLmqoutyk</a
                >. Note: This feature is not currently self-serve.
              </p>
              <p>
                * Reach out to us at contact@tinfoil.sh if you want to run a
                different model or want to deploy a custom application, or if
                you just want to learn more!
              </p>
              <p>
                Let us know what you think, we’d love to hear about your
                experiences and ideas in this space!
              </p>
            </div>
          </section>
        </section>
        <section id="43996307">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2025/05/15/coinbase-says-hackers-bribed-staff-to-steal-customer-data-and-are-demanding-20-million-ransom.html"
              >Coinbase says hackers bribed staff to steal customer data,
              demanding $20M ransom</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 15:52:21</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43996307"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43996241">
          <h3>
            <a
              class="item"
              href="https://marcjenkins.co.uk/conflicted-about-ai/"
              >I've never been so conflicted about a technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 15:45:32</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43996241"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43996071">
          <h3>
            <a class="item" href="https://deno.com/blog/an-update-on-fresh"
              >An Update on Fresh</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 15:30:38</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43996071"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43996031">
          <h3>
            <a class="item" href="https://www.alexbowe.com/wavelet-trees/"
              >Wavelet Trees: An Introduction (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 15:27:04</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43996031"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43995302">
          <h3>
            <a
              class="item"
              href="https://themarkup.org/pixel-hunt/2025/04/28/how-california-sent-residents-personal-health-data-to-linkedin"
              >California sent residents' personal health data to LinkedIn</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 14:13:25</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43995302"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43995005">
          <h3>
            <a class="item" href="https://eoinmurray.info/boltzmann-machine"
              >A Tiny Boltzmann Machine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 13:41:37</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43995005"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43994987">
          <h3>
            <a class="item" href="https://github.com/marv1nnnnn/llm-min.txt"
              >Show HN: Min.js style compression of tech docs for LLM context</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 13:40:04</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43994987"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43994827">
          <h3>
            <a class="item" href="https://github.com/axbycc/LiveSplat"
              >Show HN: Real-Time Gaussian Splatting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 13:26:49</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43994827"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
            <div class="text">
              LiveSplat is a system for turning RGBD camera streams into
              Gaussian splat scenes in real-time. The system works by passing
              all the RGBD frames into a feed forward neural net that outputs
              the current scene as Gaussian splats. These splats are then
              rendered in real-time. I've put together a demo video at the link
              above.
            </div>
          </section>
        </section>
        <section id="43994779">
          <h3>
            <a class="item" href="https://blog.cloudflare.com/web-bot-auth/"
              >Forget IPs: using cryptography to verify bot and agent traffic</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 13:22:14</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43994779"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43994765">
          <h3>
            <a
              class="item"
              href="https://www.clientserver.dev/p/malicious-compliance-by-booking-an"
              >Malicious compliance by booking an available meeting room</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 13:20:28</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43994765"
                  >Comments</a
                ><span class="descendants">: 157</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43994635">
          <h3>
            <a class="item" href="https://lemmy.ml/post/30100312"
              >My Engineering Craft Regressed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 13:07:05</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43994635"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43994333">
          <h3>
            <a
              class="item"
              href="https://juhrjuhr.itch.io/deep-space-exploitation/devlog/945428/9-pathfinding"
              >Pathfinding</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 12:32:15</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43994333"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43994131">
          <h3>
            <a
              class="item"
              href="https://jobs.ashbyhq.com/permitflow?departmentId=d33195eb-8978-4439-abc6-5a8a072de808"
              >PermitFlow (YC W22) Is Hiring Senior/Staff Engineers in NYC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 12:03:38</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43991396">
          <h3>
            <a class="item" href="https://quarter--mile.com/Human">Human</a>
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 02:57:19</span
              ><span class="points-container"
                >Points: <span class="points">577</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43991396"
                  >Comments</a
                ><span class="descendants">: 234</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43991256">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2505.06120"
              >LLMs get lost in multi-turn conversation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 02:28:42</span
              ><span class="points-container"
                >Points: <span class="points">327</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43991256"
                  >Comments</a
                ><span class="descendants">: 200</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43988381">
          <h3>
            <a class="item" href="https://github.com/pig-dot-dev/muscle-mem"
              >Show HN: Muscle-Mem, a behavior cache for AI agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-14 @ 19:38:26</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43988381"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
            <div class="text">
              <p>
                Muscle Mem is an SDK that records your agent's tool-calling
                patterns as it solves tasks, and will deterministically replay
                those learned trajectories whenever the task is encountered
                again, falling back to agent mode if edge cases are detected.
                Like a JIT compiler, for behaviors.
              </p>
              <p>
                At Pig, we built computer-use agents for automating legacy
                Windows applications (healthcare, lending, manufacturing, etc).
              </p>
              <p>
                A recurring theme we ran into was that businesses
                <i>already</i> had RPA (pure-software scripts), and it worked
                for them in most cases. The pull to agents as an RPA alternative
                was <i>not</i> to have an infinitely flexible "AI Employees" as
                tech Twitter/X may want you to think, but simply because their
                RPA breaks under occasional edge-cases and agents can gracefully
                handle those cases.
              </p>
              <p>
                Using a pure-agent approach proved to be highly wasteful.
                Window's accessibility APIs are poor, so you're generally stuck
                using pure-vision agents, which can run around $40/hr in token
                costs and take 5x longer than a human to perform a workflow. At
                this point, you're better off hiring a human.
              </p>
              <p>
                The goal of Muscle-Mem is to get LLMs out of the hot path of
                repetitive automations, intelligently swapping between
                script-based execution for repeat cases, and agent-based
                automations for discovery and self-healing.
              </p>
              <p>
                While inspired by computer-use environments, Muscle Mem is
                designed to generalize to any automation performing discrete
                tasks in dynamic environments. It took a great deal of thought
                to figure out an API that generalizes, which I cover more deeply
                in this blog:
                <a href="https://erikdunteman.com/blog/muscle-mem/"
                  >https://erikdunteman.com/blog/muscle-mem/</a
                >
              </p>
              <p>
                Check out the repo, consider giving it a star, or dive deeper
                into the above blog. I look forward to your feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="43985971">
          <h3>
            <a
              class="item"
              href="https://it-notes.dragas.net/2025/05/13/the_server_that_wasnt_meant_to_exist/"
              >A server that wasn't meant to exist</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-14 @ 15:50:30</span
              ><span class="points-container"
                >Points: <span class="points">379</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43985971"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43985489">
          <h3>
            <a
              class="item"
              href="https://deepmind.google/discover/blog/alphaevolve-a-gemini-powered-coding-agent-for-designing-advanced-algorithms/"
              >AlphaEvolve: A Gemini-powered coding agent for designing advanced
              algorithms</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-14 @ 15:10:15</span
              ><span class="points-container"
                >Points: <span class="points">934</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43985489"
                  >Comments</a
                ><span class="descendants">: 245</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.nature.com/articles/d41586-025-01523-z"
                >https://www.nature.com/articles/d41586-025-01523-z</a
              >
              (<a href="https://archive.is/NBaXE">https://archive.is/NBaXE</a>)
            </div>
          </section>
        </section>
        <section id="43983871">
          <h3>
            <a class="item" href="https://www.lux.camera/what-is-hdr/"
              >What is HDR, anyway?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-14 @ 12:46:39</span
              ><span class="points-container"
                >Points: <span class="points">722</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43983871"
                  >Comments</a
                ><span class="descendants">: 306</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43972485">
          <h3>
            <a class="item" href="https://davelucia.com/blog/lua-elixir"
              >Lua for Elixir</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 13:03:51</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43972485"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43972004">
          <h3>
            <a
              class="item"
              href="https://jmmv.dev/2023/06/fast-machines-slow-machines.html"
              >Fast machines, slow machines (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 12:10:23</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43972004"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43971853">
          <h3>
            <a class="item" href="https://neal.fun/internet-artifacts/"
              >Internet Artifacts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 11:49:56</span
              ><span class="points-container"
                >Points: <span class="points">515</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43971853"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43971620">
          <h3>
            <a class="item" href="https://github.com/git-bug/git-bug"
              >Git Bug: Distributed, Offline-First Bug Tracker Embedded in Git,
              with Bridges</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 11:07:29</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43971620"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43971515">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/interactive/2025/05/11/upshot/congestion-pricing.html"
              >Changes since congestion pricing started in New York</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 10:43:20</span
              ><span class="points-container"
                >Points: <span class="points">387</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43971515"
                  >Comments</a
                ><span class="descendants">: 551</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43971177">
          <h3>
            <a class="item" href="https://www.thecoder.cafe/p/complex-systems"
              >Working on complex systems: What I learned working at Google</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 09:35:43</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43971177"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43970768">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/the-fastest-way-yet-to-color-graphs-20250512/"
              >The Fastest Way yet to Color Graphs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 08:29:10</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43970768"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43958846">
          <h3>
            <a class="item" href="https://github.com/cofob/autogenlib"
              >Python lib generates its code on-the-fly based on usage</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-12 @ 01:36:02</span
              ><span class="points-container"
                >Points: <span class="points">218</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43958846"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43954858">
          <h3>
            <a
              class="item"
              href="https://ohadravid.github.io/posts/2025-05-serde-reflect/"
              >A Rust API Inspired by Python, Powered by Serde</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-11 @ 16:28:19</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43954858"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
