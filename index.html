<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42181467">
          <h3>
            <a
              class="item"
              href="https://www.vox.com/2015/3/4/8147377/mp3-compressed-ghosts"
              >Listen to what gets lost when an MP3 is made (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 09:23:43</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42181467"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42181452">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2411.10406"
              >How to Build a Quantum Supercomputer: Scaling Challenges and
              Opportunities</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 09:22:11</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42181452"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42180763">
          <h3>
            <a
              class="item"
              href="https://www.digitalocean.com/community/tutorials/pytorch-101-understanding-graphs-and-automatic-differentiation"
              >PyTorch 101: Understanding Graphs, Automatic Differentiation and
              Autograd</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 07:13:01</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42180763"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42180516">
          <h3>
            <a
              class="item"
              href="https://raw.sh/posts/easy_reward_model_inference"
              >Batched reward model inference and Best-of-N sampling</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 06:19:48</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42180516"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42179969">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2411.10466"
              >Iumenta: A generic framework for animal digital twins</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 03:54:00</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42179969"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42179774">
          <h3>
            <a
              class="item"
              href="https://theconversation.com/im-a-neuroscientist-who-taught-rats-to-drive-their-joy-suggests-how-anticipating-fun-can-enrich-human-life-239029"
              >Rats learned to drive</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 03:12:19</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42179774"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42179773">
          <h3>
            <a class="item" href="https://github.com/ssoready/hyrumtoken"
              >Hyrumtoken: A Go package to encrypt pagination tokens</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 03:12:12</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42179773"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42179541">
          <h3>
            <a class="item" href="https://github.com/charmbracelet/sequin"
              >Sequin: A powerful little tool for inspecting ANSI escape
              sequences</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 02:25:14</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42179541"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42179467">
          <h3>
            <a class="item" href="https://www.maslowcnc.com"
              >Maslow 4: Large format CNC routing made accessible</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 02:09:27</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42179467"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42178761">
          <h3>
            <a class="item" href="https://cerebras.ai/blog/llama-405b-inference"
              >Llama 3.1 405B now runs at 969 tokens/s on Cerebras Inference</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-19 @ 00:15:04</span
              ><span class="points-container"
                >Points: <span class="points">387</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42178761"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42177767">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2024-11-18/doj-will-push-google-to-sell-off-chrome-to-break-search-monopoly"
              >DOJ will push Google to sell off Chrome</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 22:24:07</span
              ><span class="points-container"
                >Points: <span class="points">638</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42177767"
                  >Comments</a
                ><span class="descendants">: 750</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42177619">
          <h3>
            <a
              class="item"
              href="https://reason.com/2024/11/18/how-scientific-americans-departing-editor-helped-degrade-science/"
              >Scientific American's departing editor and the politicization of
              science</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 22:04:54</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42177619"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42177462">
          <h3>
            <a class="item" href="https://github.com/sharkdp/hyperfine"
              >Hyperfine: A command-line benchmarking tool</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 21:47:36</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42177462"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42175316">
          <h3>
            <a
              class="item"
              href="https://abdisalan.com/posts/tragedy-running-old-node-project/"
              >The tragedy of running an old Node project</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 18:24:21</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42175316"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42175023">
          <h3>
            <a
              class="item"
              href="https://blog.google/outreach-initiatives/education/google-scholar-20-years/"
              >20 years of Google Scholar</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 18:01:18</span
              ><span class="points-container"
                >Points: <span class="points">304</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42175023"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42174829">
          <h3>
            <a
              class="item"
              href="https://github.com/circlemind-ai/fast-graphrag"
              >Show HN: FastGraphRAG – Better RAG using good old PageRank</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 17:43:13</span
              ><span class="points-container"
                >Points: <span class="points">324</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42174829"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
            <div class="text">
              <p>
                Building a good RAG pipeline these days takes a lot of manual
                optimizations. Most engineers intuitively start from naive RAG:
                throw everything in a vector database and hope that semantic
                search is powerful enough. This can work for use cases where
                accuracy isn’t too important and hallucinations are tolerable,
                but it doesn’t work for more difficult queries that involve
                multi-hop reasoning or more advanced domain understanding. Also,
                it’s impossible to debug it.
              </p>
              <p>
                To address these limitations, many engineers find themselves
                adding extra layers like agent-based preprocessing, custom
                embeddings, reranking mechanisms, and hybrid search strategies.
                Much like the early days of machine learning when we manually
                crafted feature vectors to squeeze out marginal gains, building
                an effective RAG system often becomes an exercise in crafting
                engineering “hacks.”
              </p>
              <p>
                Earlier this year, Microsoft seeded the idea of using Knowledge
                Graphs for RAG and published GraphRAG - i.e. RAG with Knowledge
                Graphs. We believe that there is an incredible potential in this
                idea, but existing implementations are naive in the way they
                create and explore the graph. That’s why we developed Fast
                GraphRAG with a new algorithmic approach using good old
                PageRank.
              </p>
              <p>
                There are two main challenges when building a reliable RAG
                system:
              </p>
              <p>
                (1) Data Noise: Real-world data is often messy. Customer support
                tickets, chat logs, and other conversational data can include a
                lot of irrelevant information. If you push noisy data into a
                vector database, you’re likely to get noisy results.
              </p>
              <p>
                (2) Domain Specialization: For complex use cases, a RAG system
                must understand the domain-specific context. This requires
                creating representations that capture not just the words but the
                deeper relationships and structures within the data.
              </p>
              <p>
                Our solution builds on these insights by incorporating knowledge
                graphs into the RAG pipeline. Knowledge graphs store entities
                and their relationships, and can help structure data in a way
                that enables more accurate and context-aware information
                retrieval. 12 years ago Google announced the knowledge graph we
                all know about [1]. It was a pioneering move. Now we have LLMs,
                meaning that people can finally do RAG on their own data with
                tools that can be as powerful as Google’s original idea.
              </p>
              <p>
                Before we built this, Antonio was at Amazon, while Luca and
                Yuhang were finishing their PhDs at Oxford. We had been thinking
                about this problem for years and we always loved the parallel
                between pagerank and the human memory [2]. We believe that
                searching for memories is incredibly similar to searching the
                web.
              </p>
              <p>Here’s how it works:</p>
              <p>
                - Entity and Relationship Extraction: Fast GraphRAG uses LLMs to
                extract entities and their relationships from your data and
                stores them in a graph format [3].
              </p>
              <p>
                - Query Processing: When you make a query, Fast GraphRAG starts
                by finding the most relevant entities using vector search, then
                runs a personalized PageRank algorithm to determine the most
                important “memories” or pieces of information related to the
                query [4].
              </p>
              <p>
                - Incremental Updates: Unlike other graph-based RAG systems,
                Fast GraphRAG natively supports incremental data insertions.
                This means you can continuously add new data without
                reprocessing the entire graph.
              </p>
              <p>
                - Faster: These design choices make our algorithm faster and
                more affordable to run than other graph-based RAG systems
                because we eliminate the need for communities and clustering.
              </p>
              <p>
                Suppose you’re analyzing a book and want to focus on character
                interactions, locations, and significant events:
              </p>
              <p></p>
              <pre><code>  from fast_graphrag import GraphRAG
  
  DOMAIN = "Analyze this story and identify the characters. Focus on how they interact with each other, the locations they explore, and their relationships."
  
  EXAMPLE_QUERIES = [
      "What is the significance of Christmas Eve in A Christmas Carol?",
      "How does the setting of Victorian London contribute to the story's themes?",
      "Describe the chain of events that leads to Scrooge's transformation.",
      "How does Dickens use the different spirits (Past, Present, and Future) to guide Scrooge?",
      "Why does Dickens choose to divide the story into \"staves\" rather than chapters?"
  ]
  
  ENTITY_TYPES = ["Character", "Animal", "Place", "Object", "Activity", "Event"]
  
  grag = GraphRAG(
      working_dir="./book_example",
      domain=DOMAIN,
      example_queries="\n".join(EXAMPLE_QUERIES),
      entity_types=ENTITY_TYPES
  )
  
  with open("./book.txt") as f:
      grag.insert(f.read())
  
  print(grag.query("Who is Scrooge?").response)
</code></pre>
              This code creates a domain-specific knowledge graph based on your
              data, example queries, and specified entity types. Then you can
              query it in plain English while it automatically handles all the
              data fetching, entity extractions, co-reference resolutions,
              memory elections, etc. When you add new data, locking and
              checkpointing is handled for you as well.
              <p>
                This is the kind of infrastructure that GenAI apps need to
                handle large-scale real-world data. Our goal is to give you this
                infrastructure so that you can focus on what’s important:
                building great apps for your users without having to care about
                manually engineering a retrieval pipeline. In the managed
                service, we also have a suite of UI tools for you to explore and
                debug your knowledge graph.
              </p>
              <p>
                We have a free hosted solution with up to 100 monthly requests.
                When you’re ready to grow, we have paid plans that scale with
                you. And of course you can self host our open-source engine.
              </p>
              <p>
                Give us a spin today at
                <a href="https://circlemind.co">https://circlemind.co</a> and
                see our code at
                <a href="https://github.com/circlemind-ai/fast-graphrag"
                  >https://github.com/circlemind-ai/fast-graphrag</a
                >
              </p>
              <p>We’d love feedback :)</p>
              <p>
                [1]
                <a
                  href="https://blog.google/products/search/introducing-knowledge-graph-things-not/"
                  >https://blog.google/products/search/introducing-knowledge-gr...</a
                >
              </p>
              <p>
                [2] Griffiths, T. L., Steyvers, M., &amp; Firl, A. (2007).
                Google and the Mind: Predicting Fluency with PageRank.
                Psychological Science, 18(12), 1069–1076.
                <a href="http://www.jstor.org/stable/40064705"
                  >http://www.jstor.org/stable/40064705</a
                >
              </p>
              <p>
                [3] Similarly to Microsoft’s GraphRAG:
                <a href="https://github.com/microsoft/graphrag"
                  >https://github.com/microsoft/graphrag</a
                >
              </p>
              <p>
                [4] Similarly to OSU’s HippoRAG:
                <a href="https://github.com/OSU-NLP-Group/HippoRAG"
                  >https://github.com/OSU-NLP-Group/HippoRAG</a
                >
              </p>
              <p>
                <a href="https://vhs.charm.sh/vhs-4fCicgsbsc7UX0pemOcsMp.gif"
                  >https://vhs.charm.sh/vhs-4fCicgsbsc7UX0pemOcsMp.gif</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="42174231">
          <h3>
            <a class="item" href="https://mailcatcher.me/"
              >MailCatcher runs a super simple SMTP server</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 16:51:29</span
              ><span class="points-container"
                >Points: <span class="points">234</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42174231"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42174204">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42174204"
              >Launch HN: Regatta Storage (YC F24) – Turn S3 into a local-like,
              POSIX cloud FS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 16:49:09</span
              ><span class="points-container"
                >Points: <span class="points">445</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42174204"
                  >Comments</a
                ><span class="descendants">: 237</span></span
              >
            </h4>
            <div class="text">
              <a href="https://regattastorage.com">https://regattastorage.com</a
              >). Regatta Storage is a new cloud file system that provides
              unlimited pay-as-you-go capacity, local-like performance, and
              automatic synchronization to S3-compatible storage. For example,
              you can use Regatta to instantly access massive data sets in S3
              with Spark, Pytorch, or pandas without paying for large, local
              disks or waiting for the data to download.
              <p>
                Check out an overview of how the service works here:
                <a href="https://www.youtube.com/watch?v=xh1q5p7E4JY"
                  >https://www.youtube.com/watch?v=xh1q5p7E4JY</a
                >, and you can try it for free at
                <a href="https://regattastorage.com"
                  >https://regattastorage.com</a
                >
                after signing up for an account. We wanted to let you try it
                without an account, but we figured that “Hacker News shares a
                file system and S3 bucket” wouldn’t be the best experience for
                the community.
              </p>
              <p>
                I built Regatta after spending nearly a decade building and
                operating at-scale cloud storage at places like Amazon’s Elastic
                File System (EFS) and Netflix. During my 8 years at EFS, I
                learned a lot about how teams thought about their storage usage.
                Users frequently told me that they loved how simple and scalable
                EFS was, and -- like S3 -- they didn’t have to guess how much
                capacity they needed up front.
              </p>
              <p>
                When I got to Netflix, I was surprised that there wasn’t more
                usage of EFS. If you looked around, it seemed like a natural
                fit. Every application needed a POSIX file system. Lots of
                applications had unclear or spikey storage needs. Often,
                developers wanted their storage to last beyond the lifetime of
                an individual instance or container. In fact, if you looked
                across all Netflix applications, some ridiculous amount of money
                was being spent on <i>empty storage space</i> because each of
                these local drives had to be overprovisioned for potential
                usage.
              </p>
              <p>
                However, in many cases, EFS wasn’t the perfect choice for these
                workloads. Moving workloads from local disks to NFS often
                encountered performance issues. Further, applications which
                treated their local disks as ephemeral would have to manually
                “clean up” left over data in a persistent storage system.
              </p>
              <p>
                At this point, I realized that there was a missing solution in
                the cloud storage market which wasn’t being filled by either
                block or file storage, and I decided to build Regatta.
              </p>
              <p>
                Regatta is a pay-as-you-go cloud file system that automatically
                expands with your application. Because it automatically
                synchronizes with S3 using native file formats, you can connect
                it to existing data sets and use recently written file data
                directly from S3. When data isn’t actively being used, it’s
                removed from the Regatta cache, so you only pay for the backing
                S3 storage. Finally, we’re developing a custom file protocol
                which allows us to achieve local-like performance for small-file
                workloads <i>and</i> Lustre-like scale-out performance for
                distributed data jobs.
              </p>
              <p>
                Under the hood, customers mount a Regatta file system by
                connecting to our fleet of caching instances over NFSv3 (soon,
                our custom protocol). Our instances then connect to the
                customer’s S3 bucket on the backend, and provide sub-millisecond
                cached-read and write performance. This durable cache allows us
                to provide a strongly consistent, efficient view of the file
                system to all connected file clients. We can perform challenging
                operations (like directory renaming) quickly and durably, while
                they asynchronously propagate to the S3 bucket.
              </p>
              <p>
                We’re excited to see users share our vision for Regatta. We have
                teams who are using us to build totally serverless Jupyter
                notebook servers for their AI researchers who prefer to upload
                and share data using the S3 web UI. We have teams who are using
                us as a distributed caching layer on top of S3 for low-latency
                access to common files. We have teams who are replacing their
                thin-provisioned Ceph boot volumes with Regatta for significant
                savings. We can’t wait to see what other things people will
                build and we hope you’ll give us a try at regattastorage.com.
              </p>
              <p>
                We’d love to get any early feedback from the community, ideas
                for future direction, or experiences in this space. I’ll be in
                the comments for the next few hours to respond!
              </p>
            </div>
          </section>
        </section>
        <section id="42173233">
          <h3>
            <a
              class="item"
              href="https://www.joshtumath.uk/posts/2024-11-08-how-a-bbc-navigation-bar-component-broke-depending-on-which-external-monitor-it-was-on/"
              >A BBC navigation bar component broke depending on the external
              monitor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 15:28:57</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42173233"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42173114">
          <h3>
            <a
              class="item"
              href="https://jvernay.fr/en/blog/skyline-2d-packer/implementation/"
              >The Skyline algorithm for packing 2D rectangles</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 15:19:05</span
              ><span class="points-container"
                >Points: <span class="points">189</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42173114"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42172565">
          <h3>
            <a
              class="item"
              href="https://www.cnn.com/2024/11/18/europe/undersea-cable-disrupted-germany-finland-intl/index.html"
              >Two undersea cables in Baltic Sea disrupted</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 14:31:17</span
              ><span class="points-container"
                >Points: <span class="points">308</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42172565"
                  >Comments</a
                ><span class="descendants">: 542</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42170519">
          <h3>
            <a class="item" href="https://github.com/notrab/dumbo"
              >Show HN: Dumbo – Hono inspired framework for PHP</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 07:37:16</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42170519"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
            <div class="text">
              <p>
                In true JavaScript fashion, I decided to learn PHP again by
                building a framework to put all the pieces together in my brain.
              </p>
              <p>
                I absolutely love Hono.dev, and decided to base the PHP
                framework on that. Dumbo isn't intended to compete with Laravel,
                Symphony or Slim, if anything, it's something people can use in
                production, but also contribute to and be used as a learning
                resource for others.
              </p>
            </div>
          </section>
        </section>
        <section id="42168503">
          <h3>
            <a class="item" href="https://museumofbadart.org/"
              >Museum of Bad Art</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-18 @ 00:09:20</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42168503"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42146782">
          <h3>
            <a
              class="item"
              href="https://cmtops.dev/posts/building-observability-with-clickhouse/"
              >Building Observability with ClickHouse</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-15 @ 13:35:03</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42146782"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42146699">
          <h3>
            <a
              class="item"
              href="https://kidswholovemath.substack.com/p/its-hard-to-stop-math-acceleration"
              >It's hard to stop Math Acceleration once you start</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-15 @ 13:24:38</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42146699"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42136817">
          <h3>
            <a
              class="item"
              href="https://www.flightglobal.com/safety/uk-air-traffic-system-failure-triggered-by-misidentified-french-bee-flightplan-waypoint/157386.article"
              >Air traffic failure caused by two locations 3600nm apart sharing
              3-letter code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-14 @ 15:04:57</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42136817"
                  >Comments</a
                ><span class="descendants">: 229</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42129209">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/11/13/us/death-stairs-facebook.html"
              >Take the 'Death Stairs' If You Dare</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-13 @ 19:45:47</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42129209"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42122557">
          <h3>
            <a
              class="item"
              href="https://awadwatt.com/tezoatlipoca/rim-job-blackberry-tales-the-story-of-sumit-b"
              >Rim/Blackberry tales – reply all</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-13 @ 03:18:44</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42122557"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42119675">
          <h3>
            <a
              class="item"
              href="https://jalopnik.com/this-8-000-suzuki-from-india-received-a-5-star-crash-t-1851696481"
              >$8k Suzuki from India received a 5-star crash test rating</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 21:00:43</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42119675"
                  >Comments</a
                ><span class="descendants">: 197</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42111263">
          <h3>
            <a
              class="item"
              href="https://ece.engin.umich.edu/stories/new-textbook-teaches-students-about-matrix-methods-and-their-real-world-applications"
              >New textbook teaches students about matrix methods and their real
              world apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-11 @ 23:11:32</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42111263"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
