<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39116556">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39116556"
              >Tell HN: GitHub no longer readable without JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 12:41:03</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39116556"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
            <div class="text">
              <p>I've not seen any announcement about these changes.</p>
            </div>
          </section>
        </section>
        <section id="39116369">
          <h3>
            <a
              class="item"
              href="https://www.businessinsider.com/23andme-data-breach-victims-responsibility-not-updating-passwords-2024-1"
              >23andMe is reportedly turning the blame back on its customers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 12:14:04</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39116369"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39116290">
          <h3>
            <a
              class="item"
              href="https://jamsocket.com/blog/senior-rust-engineer"
              >Jamsocket (YC W22) is hiring a senior Rust systems engineer
              (NYC/remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 12:00:43</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39116032">
          <h3>
            <a
              class="item"
              href="https://www.engadget.com/ebay-is-laying-off-9-percent-of-its-workforce-035136287.html"
              >eBay is laying off 9 percent of its workforce</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 11:22:42</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39116032"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39115934">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-024-00165-x"
              >All arabica coffee is genetically similar: how can beans taste so
              different?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 11:02:09</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39115934"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39115926">
          <h3>
            <a
              class="item"
              href="https://www.visualcapitalist.com/all-the-major-tech-layoffs-in-2024-so-far/"
              >All the Major Tech Layoffs in 2024 So Far</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 11:00:50</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39115926"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39115878">
          <h3>
            <a
              class="item"
              href="https://www.nbcnews.com/business/business-news/alaska-airlines-found-more-loose-bolts-boeing-737-max-9-ceo-says-rcna135316"
              >Alaska CEO: We found many loose bolts on our Max planes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 10:53:03</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39115878"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39114259">
          <h3>
            <a class="item" href="https://www.secretlifeofmachines.com/"
              >The Secret Life of Machines (1988)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 06:23:42</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39114259"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39114075">
          <h3>
            <a class="item" href="https://lumiere-video.github.io/"
              >Lumiere: A Space-Time Diffusion Model for Realistic Video
              Generation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 05:49:09</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39114075"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39113972">
          <h3>
            <a class="item" href="https://github.com/nlmatics/nlm-ingestor"
              >Show HN: Open-source Rule-based PDF parser for RAG</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 05:31:11</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39113972"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
            <div class="text">
              <p>The PDF Parser offers the following features:</p>
              <p>
                * Sections and subsections along with their levels. * Paragraphs
                - combines lines. * Links between sections and paragraphs. *
                Tables along with the section the tables are found in. * Lists
                and nested lists. * Join content spread across pages. * Removal
                of repeating headers and footers. * Watermark removal. * OCR
                with boundary boxes
              </p>
            </div>
          </section>
        </section>
        <section id="39113879">
          <h3>
            <a class="item" href="https://teachyourselfmath.app/"
              >Show HN: I wished for a site with a growing list of math
              problems, I built it</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 05:12:49</span
              ><span class="points-container"
                >Points: <span class="points">173</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39113879"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
            <div class="text">
              <p>
                teachyourselfmath is a side project that was born out of this
                need. At its core, it is a math PDF extraction engine. The
                engine has some machine learning going on behind the scenes to
                extract math problems in LaTeX from any image or document.
              </p>
              <p>
                A little bit about me: I am Vivek, a software engineer based out
                of India with a diverse set of interests including math. This
                project is close to my heart for many different reasons and
                nothing would make me happier than finding people on the
                internet who would find this website to be useful.
              </p>
              <p>I’d love to hear your feedback on this. Thanks!</p>
            </div>
          </section>
        </section>
        <section id="39113168">
          <h3>
            <a class="item" href="https://overpass-turbo.eu/"
              >Overpass Turbo: A Web Based Data Mining Tool for OpenStreetMap</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 03:13:32</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39113168"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39112848">
          <h3>
            <a
              class="item"
              href="https://www.fishmanafnewsletter.com/p/balancing-engineering-cultures-debate-vs-do"
              >Balancing engineering cultures: Debate everything vs. just tell
              me what to build</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 02:21:10</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39112848"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39112486">
          <h3>
            <a
              class="item"
              href="https://kobzol.github.io/rust/cargo/2024/01/23/making-rust-binaries-smaller-by-default.html"
              >Making Rust binaries smaller by default</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 01:29:02</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39112486"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39111539">
          <h3>
            <a
              class="item"
              href="https://reason.com/2024/01/23/appeals-court-fbis-safe-deposit-box-seizures-violated-fourth-amendment/"
              >Appeals Court: FBI's Safe-Deposit Box Seizures Violated Fourth
              Amendment</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 23:36:24</span
              ><span class="points-container"
                >Points: <span class="points">337</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39111539"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39111406">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/oldnewthing/20230324-00/?p=107966"
              >The case of the jump into the middle of an instruction from
              nowhere (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 23:21:09</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39111406"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39111114">
          <h3>
            <a class="item" href="https://github.com/ashvardanian/SimSIMD"
              >SimSIMD: Hardware-accelerated similarity metrics and distance
              functions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 22:53:11</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39111114"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39110434">
          <h3>
            <a class="item" href="https://waterwaymap.org">Waterway Map</a>
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 21:51:06</span
              ><span class="points-container"
                >Points: <span class="points">330</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39110434"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39109481">
          <h3>
            <a
              class="item"
              href="https://ai.stanford.edu/~zayd/why-is-machine-learning-hard.html"
              >Why is machine learning 'hard'? (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 20:43:25</span
              ><span class="points-container"
                >Points: <span class="points">239</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39109481"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39107620">
          <h3>
            <a
              class="item"
              href="https://crowsonkb.github.io/hourglass-diffusion-transformers/"
              >Direct pixel-space megapixel image generation with diffusion
              models</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 18:38:58</span
              ><span class="points-container"
                >Points: <span class="points">244</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39107620"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39106972">
          <h3>
            <a class="item" href="https://sourcegraph.com/blog/slow-to-simd"
              >From slow to SIMD: A Go optimization story</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 17:57:31</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39106972"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39106464">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/01/23/health/deaf-gene-therapy.html"
              >Gene therapy allows an 11-year-old boy to hear</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 17:26:34</span
              ><span class="points-container"
                >Points: <span class="points">341</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39106464"
                  >Comments</a
                ><span class="descendants">: 177</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39104504">
          <h3>
            <a class="item" href="https://bernsteinbear.com/blog/scrapscript/"
              >scrapscript.py</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 15:19:22</span
              ><span class="points-container"
                >Points: <span class="points">210</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39104504"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39103419">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2401.09514"
              >Is the emergence of life an expected phase transition in the
              evolving universe?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 14:06:03</span
              ><span class="points-container"
                >Points: <span class="points">394</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39103419"
                  >Comments</a
                ><span class="descendants">: 339</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39100151">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/food/2024/jan/23/nicholas-saunders-forgotten-genius-changed-british-food"
              >Hippy, capitalist, guru, grocer: Nicholas Saunders and
              "Alternative London"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 06:13:32</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39100151"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39098013">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=wuN-bW_zS0Q"
              >Ode to Internet – V.90 56k dialup modem handshake for orchestra
              [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 01:07:11</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39098013"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39097504">
          <h3>
            <a class="item" href="https://www.abortretry.fail/p/the-itanic-saga"
              >The Itanic Saga: The History of VLIW and Itanium</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 00:14:45</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39097504"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39094875">
          <h3>
            <a
              class="item"
              href="https://github.com/Dicklesworthstone/introduction_to_temporal_logic"
              >An introduction to temporal logic and how it can be used to
              analyze concurrency</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 20:21:48</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39094875"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39088075">
          <h3>
            <a
              class="item"
              href="https://jmglov.net/blog/2024-01-17-clickr.html"
              >Clickr, or a young man's Flickr clonejure</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 10:35:05</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39088075"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39086632">
          <h3>
            <a
              class="item"
              href="https://www.csail.mit.edu/news/study-smart-devices-ambient-light-sensors-pose-imaging-privacy-risk"
              >Ambient light sensors pose imaging privacy risk</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 05:34:39</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39086632"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
