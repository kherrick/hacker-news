<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44311776">
          <h3>
            <a
              class="item"
              href="https://www.theatlantic.com/magazine/archive/2025/07/zachary-leader-richard-ellmann-james-joyce-review/682907/"
              >Yes I Will Read Ulysses Yes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 17:31:25</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44311776"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44311682">
          <h3>
            <a class="item" href="https://codeneverdies.github.io/posts/gh-2/"
              >Game Hacking – Valve Anti-Cheat (VAC)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 17:19:31</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44311682"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44311538">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/attimet/jobs/b1w9pjE-founding-engineer"
              >Attimet (YC F24) – Quant Trading Research Lab – Is Hiring
              Founding Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 17:00:36</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44311509">
          <h3>
            <a
              class="item"
              href="https://www.donnamagi.com/articles/karpathy-yc-talk"
              >Andrej Karpathy's YC AI SUS talk on the future of the industry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 16:56:18</span
              ><span class="points-container"
                >Points: <span class="points">160</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44311509"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44311241">
          <h3>
            <a
              class="item"
              href="https://rjp.io/blog/2025-06-17-unreasonable-effectiveness-of-fuzzing"
              >The Unreasonable Effectiveness of Fuzzing for Porting Programs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 16:26:35</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44311241"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44311217">
          <h3>
            <a
              class="item"
              href="https://docs.kapa.ai/improving/writing-best-practices"
              >Writing documentation for AI: best practices</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 16:23:46</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44311217"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44310944">
          <h3>
            <a
              class="item"
              href="https://terminalbytes.com/iphone-8-solar-powered-vision-ocr-server/"
              >My iPhone 8 Refuses to Die: Now It's a Solar-Powered Vision OCR
              Server</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 15:49:53</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44310944"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44310851">
          <h3>
            <a
              class="item"
              href="https://suthakamal.substack.com/p/revisiting-minskys-society-of-mind"
              >Revisiting Minsky's Society of Mind in 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 15:40:12</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44310851"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44310834">
          <h3>
            <a
              class="item"
              href="https://www.morling.dev/blog/this-ai-agent-should-have-been-sql-query/"
              >Building agents using streaming SQL queries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 15:38:15</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44310834"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44310678">
          <h3>
            <a class="item" href="https://github.com/nirw4nna/dsc"
              >Show HN: I built a tensor library from scratch in C++/CUDA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 15:20:05</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44310678"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <p>
                Over the past few months, I've been building `dsc`, a tensor
                library from scratch in C++/CUDA. My main focus has been on
                getting the basics right, prioritizing a clean API, simplicity,
                and clear observability for running small LLMs locally.
              </p>
              <p>
                The key features are: - C++ core with CUDA support written from
                scratch. - A familiar, PyTorch-like Python API. - Runs real
                models: it's complete enough to load a model like Qwen from
                HuggingFace and run inference on both CUDA and CPU with a single
                line change[1]. - Simple, built-in observability for both Python
                and C++.
              </p>
              <p>
                Next on the roadmap is adding BF16 support and then I'll be
                working on visualization for GPU workloads.
              </p>
              <p>
                The project is still early and I would be incredibly grateful
                for any feedback, code reviews, or questions from the HN
                community!
              </p>
              <p>
                GitHub Repo:
                <a href="https://github.com/nirw4nna/dsc"
                  >https://github.com/nirw4nna/dsc</a
                >
              </p>
              <p>
                [1]:
                <a
                  href="https://github.com/nirw4nna/dsc/blob/main/examples/models/qwen2_5.py"
                  >https://github.com/nirw4nna/dsc/blob/main/examples/models/qw...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44310583">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2025/06/framework-laptop-12-review-im-excited-to-see-what-the-2nd-generation-looks-like/"
              >Framework Laptop 12 review</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 15:09:34</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44310583"
                  >Comments</a
                ><span class="descendants">: 193</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44309520">
          <h3>
            <a
              class="item"
              href="https://jakelazaroff.com/words/homomorphically-encrypted-crdts/"
              >Homomorphically Encrypting CRDTs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 12:59:58</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44309520"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44309393">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44309393"
              >Show HN: Free local security checks for AI coding in VSCode,
              Cursor and Windsurf</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 12:42:51</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44309393"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <p>
                We just launched Codacy Guardrails, an IDE extension with a CLI
                for code analysis and MCP server that enforces security &amp;
                quality rules on AI-generated code in real-time. It hooks into
                AI coding assistants (like VS Code Agent Mode, Cursor,
                Windsurf), silently scanning and fixing AI-suggested code that
                has vulnerabilities or violates your coding standards, while the
                code it’s being generated.
              </p>
              <p>
                We built this because coding agents can be a double-edged sword.
                They do boost productivity, but can easily introduce insecure or
                non-compliant code. One recent research team at NYU found that
                40% of Copilot’s outputs were buggy or exploitable [1]. Other
                surveys mention that people are spending more time debugging
                AI-generated code [2].
              </p>
              <p>
                That's why we created “guardrails” to catch security problems
                early.
              </p>
              <p>
                Codacy Guardrails uses a collection of open-source static
                analyzers (like Semgrep and Trivy) to scan the AI’s output
                against 2000+ rules. We currently support JavaScript/TypeScript,
                Python, and Java, focusing on things like OWASP Top 10 vulns,
                hardcoded secrets, dependency checks, code complexity and
                styling violations, and you can customize the rules to match
                your project’s needs. We're not using any AI models, it's
                “classic” static code analysis working alongside your AI
                assistant.
              </p>
              <p>
                Here’s a quick demo:
                <a href="https://youtu.be/pB02u0ntQpM"
                  >https://youtu.be/pB02u0ntQpM</a
                >
              </p>
              <p>
                The extension is free for all developers. (We do have paid plans
                for teams to apply rules centrally, but that’s not needed to use
                the extension and local code analysis with agents.)
              </p>
              <p>
                Setup is pretty straightforward: Install the extension and
                enable Codacy’s CLI and MCP Server from the sidebar.
              </p>
              <p>
                We’re eager to hear what the HN community thinks! Does this
                approach sound useful in your AI coding workflow? Have you
                encountered security issues from AI-generated code?
              </p>
              <p>
                We hope Codacy Guardrails can make AI-assisted development a bit
                safer and more trustworthy. Thanks for reading!
              </p>
              <p>
                Get extension:
                <a href="https://www.codacy.com/get-ide-extension"
                  >https://www.codacy.com/get-ide-extension</a
                >
                Docs:
                <a
                  href="https://docs.codacy.com/codacy-guardrails/codacy-guardrails-getting-started/"
                  >https://docs.codacy.com/codacy-guardrails/codacy-guardrails-...</a
                >
              </p>
              <p>
                Sources [1]: NYU Research:
                <a
                  href="https://www.researchgate.net/publication/388193053_Asleep_at_the_Keyboard_Assessing_the_Security_of_GitHub_Copilot's_Code_Contributions"
                  >https://www.researchgate.net/publication/388193053_Asleep_at...</a
                >
                [2]:
                <a
                  href="https://devops.com/survey-ai-tools-are-increasing-amount-of-bad-code-needing-to-be-fixed"
                  >https://devops.com/survey-ai-tools-are-increasing-amount-of-...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44309345">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2505.12514"
              >Reasoning by Superposition: A Perspective on Chain of Continuous
              Thought</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 12:36:47</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44309345"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44309320">
          <h3>
            <a class="item" href="https://github.com/Snouzy/workout-cool"
              >Show HN: Workout.cool – Open-source fitness coaching platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 12:33:49</span
              ><span class="points-container"
                >Points: <span class="points">432</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44309320"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
            <div class="text">
              <p>
                Over the next 9 months, I sent 15 emails to try to save it : no
                replies. Feature requests &amp; issues were ignored. The
                community was left with a "broken" tool let's say.
              </p>
              <p>
                I couldn't just let it die So I built the new version from
                scratch with the same open-source spirit, but a better
                architecture long-term vision, more features and no license
                problems.
              </p>
              <p>
                It's called : Workout.cool (<a href="https://workout.cool"
                  >https://workout.cool</a
                >). What it offers: 100% open-source, MIT-licensed - 1200+
                exercises (with videos, attributes, translations) - Progress
                tracking - Multilingual-ready - Self-hostable
              </p>
              <p>
                I'm not doing this for money. I'm doing it because I believe in
                open fitness tools, and I’ve been passionate about strength
                training for 15+ years.
              </p>
              <p>
                If this resonates with you, feel free to: - Star the repo -
                Share with fitness/tech friends - Suggest features - Contribute
                code/design/docs
              </p>
              <p>
                Together, we can build the open-source fitness platform we all
                wanted to easily build a workout routine and get in shape
              </p>
              <p>
                Website:
                <a href="https://workout.cool">https://workout.cool</a> GitHub:
                <a href="https://github.com/Snouzy/workout-cool"
                  >https://github.com/Snouzy/workout-cool</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44308711">
          <h3>
            <a class="item" href="https://www.tobyord.com/writing/half-life"
              >Is There a Half-Life for the Success Rates of AI Agents?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 10:53:59</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44308711"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44308558">
          <h3>
            <a class="item" href="http://terpstrakeyboard.com/web-app/keys.htm"
              >Terpstra Keyboard</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 10:31:44</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44308558"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44307629">
          <h3>
            <a
              class="item"
              href="https://monroeclinton.com/counting-all-yurts-in-mongolia/"
              >I counted all of the yurts in Mongolia using machine learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 07:58:18</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44307629"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44307290">
          <h3>
            <a class="item" href="https://github.com/MiniMax-AI/MiniMax-M1"
              >MiniMax-M1 open-weight, large-scale hybrid-attention reasoning
              model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 06:53:34</span
              ><span class="points-container"
                >Points: <span class="points">291</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44307290"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44306859">
          <h3>
            <a class="item" href="https://pontus.granstrom.me/scrappy/"
              >Scrappy - make little apps for you and your friends</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 05:16:12</span
              ><span class="points-container"
                >Points: <span class="points">387</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44306859"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44306792">
          <h3>
            <a class="item" href="https://mjg59.dreamwidth.org/72095.html"
              >Locally hosting an internet-connected server</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 04:58:53</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44306792"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44303542">
          <h3>
            <a class="item" href="https://grugbrain.dev/"
              >The Grug Brained Developer (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-17 @ 20:24:36</span
              ><span class="points-container"
                >Points: <span class="points">983</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44303542"
                  >Comments</a
                ><span class="descendants">: 480</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44303021">
          <h3>
            <a
              class="item"
              href="https://www.pi.website/research/real_time_chunking"
              >Real-time action chunking with large models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-17 @ 19:39:26</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44303021"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44296523">
          <h3>
            <a
              class="item"
              href="https://www.redblobgames.com/pathfinding/a-star/introduction.html"
              >Introduction to the A* Algorithm</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-17 @ 07:25:23</span
              ><span class="points-container"
                >Points: <span class="points">198</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44296523"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44292652">
          <h3>
            <a class="item" href="https://arxiv.org/abs/1801.10130"
              >Spherical CNNs (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-16 @ 19:28:38</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44292652"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44290580">
          <h3>
            <a
              class="item"
              href="https://bytes.zone/posts/should-we-design-for-iffy-internet/"
              >Should we design for iffy internet?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-16 @ 15:34:26</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44290580"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44281756">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/tearflake/569db7fdc8b363b7d320ebfeef8ab503"
              >A different take on S-expressions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-15 @ 11:25:57</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44281756"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44280966">
          <h3>
            <a class="item" href="https://www.nature.com/articles/sdata201634"
              >Spatializing 6k years of global urbanization from 3700 BC to AD
              2000</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-15 @ 06:53:25</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44280966"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44279569">
          <h3>
            <a class="item" href="https://meodai.github.io/poline/"
              >"poline" is an enigmatic color palette generator using polar
              coordinates</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-14 @ 23:38:56</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44279569"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44271760">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/articles/carnivorous-plants-have-been-trapping-animals-for-millions-of-years-so-why-have-they-never-grown-larger-180986708/"
              >After millions of years, why are carnivorous plants still so
              small?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 20:04:03</span
              ><span class="points-container"
                >Points: <span class="points">176</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44271760"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
