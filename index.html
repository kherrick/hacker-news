<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45188114">
          <h3>
            <a
              class="item"
              href="https://the.scapegoat.dev/why-i-love-php-and-javascript/"
              >I still love PHP and JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 20:09:53</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45188114"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45187841">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/apple-event/774963/apple-september-launch-event-ai-apple-intelligence"
              >Apple barely talked about AI at its big iPhone 17 event</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 19:54:23</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45187841"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45187778">
          <h3>
            <a
              class="item"
              href="https://paulsmith.github.io/classic-mac-patterns/"
              >Classic Mac OS System 1 Patterns</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 19:50:11</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45187778"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45187687">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/economy/consumers/census-income-insurance-poverty-2024-31d82ad0"
              >Inflation Erased U.S. Income Gains Last Year</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 19:44:12</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45187687"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45187449">
          <h3>
            <a
              class="item"
              href="https://www.researchgate.net/publication/45275074_Polylaminin_a_polymeric_form_of_laminin_promotes_regeneration_after_spinal_cord_injury"
              >Polylaminin, promotes regeneration after spinal cord injury</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 19:27:28</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45187449"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45186904">
          <h3>
            <a class="item" href="https://sourcetable.com/superagents"
              >Show HN: Superagents – connect spreadsheets to any database, API
              or MCP server</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 18:55:35</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45186904"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <a href="https://sourcetable.com">https://sourcetable.com</a>).
              <p>
                Today, we’re launching Superagents. You can now connect your
                spreadsheet to any database, API or MCP server on the Internet.
                All of that data is available inside your spreadsheet, and you
                can use AI to analyze it and build models, reports and
                visualizations.
              </p>
              <p>
                The reason I started the company is because I spent 10 years at
                startups across engineering and operations roles and realized
                that Excel and Sheets weren't architected for the modern
                information environment. This creates a tremendous amount of
                nuisance and busywork cobbling together SaaS tools, reporting
                suites, and the misery of endless coordination meetings to make
                it all happen. (Boo meetings!)
              </p>
              <p>
                Spreadsheets aren’t just a business application: they’re the
                original thinking tool. The quality of these tools has a
                downstream impact on analytical thinking and creativity writ
                large, so this is a problem worth solving. Fast forward to
                today, we’re a 6 person team taking on Excel, Sheets and
                ChatGPT, so we’re excited to hear what you think!
              </p>
              <p>
                Who are Superagents for? Analysts, operators, and anyone doing
                data-centric work in spreadsheets. We see a tonne of finance
                people, of course, but also students, researchers and mom &amp;
                pop shops. Sourcetable's superagents democratize data access and
                analysis, which is nice because our company’s mission is to make
                data accessible to everyone.
              </p>
              <p>
                Why “Superagents”? Because they can plan and orchestrate other
                task-specific agents to complete your work for you. We have a
                lot of different AI tools and agents inside Sourcetable, but
                there’s a whole lot more on the Agentic Web. Superagents are
                like the conductor that coordinates them all and calls on them
                when needed. Also, it’s a fun feature name (thanks, Alyssa!)
              </p>
              <p>
                If you remember the linked-data dream of the semantic web
                movement, that future is now: all of your business data is
                available and connected in Sourcetable.
              </p>
              <p>
                How does it work? Sourcetable is running a python virtual
                machine under the hood. Everything is sandboxed, and there are
                hundreds of AI tools and libraries our AI can access.
                Superagents are also doing code-gen on the fly to solve
                problems. The closest system we have found is Replit’s sandboxed
                operating systems. Beyond that Mixtral, ChatGPT and Anthropic
                offer some limited data connectivity features, except these AI
                chat services lack the storage, compute, and code execution that
                Sourcetable and Replit provide. This is all very new.
              </p>
              <p>
                How is this different to your previous data connectors, etc? We
                started out using ETL services to sync data and provide a
                GUI-driven PowerBI like experience in your spreadsheet. This was
                useful for people who knew SQL and how to write joins to combine
                fragmented data, but for everyone else (read: practically
                everyone), this solution just didn’t provide the frictionless,
                self-serve experience that we wanted.
              </p>
              <p>
                Our choices were to switch the GTM motion or change the product,
                so we shelved that reporting suite and focused on our AI
                spreadsheet and waited for models to catch up with our
                ambitions. Now that they have, we’re re-launching Sourcetable
                with our original goal in mind: building a spreadsheet-based
                operating system for the Agent Web, with fully networked data
                access for <i>everyone</i> on your team.
              </p>
              <p>AI is the great UX enabler.</p>
              <p>Caveats:</p>
              <p>
                * We heavily use Postgres, Google Analytics, Stripe and Google
                Search Console with Superagents.
              </p>
              <p>
                * We haven’t tested every endpoint on the Internet. We find that
                mainstream, well documented applications work best.
              </p>
              <p>
                * Yes, you can write data back to 3rd party applications and
                databases. We generally advise against this unless you
                understand the risks involved in giving AI write-access to your
                data.
              </p>
              <p>Bonus round:</p>
              <p>
                * All data connectors added during this launch week are FREE.
                (Regular AI messaging limits still apply.)
              </p>
              <p>Product Feedback? eoin@sourcetable.com</p>
            </div>
          </section>
        </section>
        <section id="45186802">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/09/09/microsoft_return_to_work/"
              >Microserfs ordered back to the office, given 10 days to appeal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 18:50:46</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45186802"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45186726">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/web3-hardware-security"
              >The Dying Dream of a Decentralized Web</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 18:47:44</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45186726"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45186265">
          <h3>
            <a
              class="item"
              href="https://security.apple.com/blog/memory-integrity-enforcement/"
              >Memory Integrity Enforcement</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 18:25:03</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45186265"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45186023">
          <h3>
            <a
              class="item"
              href="https://www.apple.com/newsroom/2025/09/apple-debuts-iphone-17/"
              >Apple Debuts iPhone 17</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 18:13:06</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45186023"
                  >Comments</a
                ><span class="descendants">: 134</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45186015">
          <h3>
            <a
              class="item"
              href="https://www.apple.com/newsroom/2025/09/introducing-iphone-air-a-powerful-new-iphone-with-a-breakthrough-design/"
              >iPhone Air</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 18:12:51</span
              ><span class="points-container"
                >Points: <span class="points">258</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45186015"
                  >Comments</a
                ><span class="descendants">: 548</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45186011">
          <h3>
            <a
              class="item"
              href="https://help.dropbox.com/installs/paper-mobile-discontinuation"
              >Dropbox Paper mobile App Discontinuation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 18:12:28</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45186011"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45185756">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/e-paper-display-modos"
              >E-Paper Display Refresh Rate Reaches New Heights</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 17:57:35</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45185756"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45184921">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/weave-3/jobs/SqFnIFE-founding-ai-engineer"
              >Weave (YC W25) is hiring a founding AI engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 17:01:12</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45184368">
          <h3>
            <a
              class="item"
              href="https://www.forbes.com/sites/the-wiretap/2025/09/09/how-ice-is-using-fake-cell-towers-to-spy-on-peoples-phones/"
              >ICE Is Using Fake Cell Towers to Spy on People's Phones</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 16:27:41</span
              ><span class="points-container"
                >Points: <span class="points">367</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45184368"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45183050">
          <h3>
            <a class="item" href="https://cedardb.com/blog/doomql/"
              >Building a DOOM-like multiplayer shooter in pure SQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 15:12:18</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45183050"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45183039">
          <h3>
            <a class="item" href="https://github.com/twitter/the-algorithm"
              >Source code for the X recommendation algorithm</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 15:11:57</span
              ><span class="points-container"
                >Points: <span class="points">218</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45183039"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45183029">
          <h3>
            <a
              class="item"
              href="https://xeiaso.net/notes/2025/we-dodged-a-bullet/"
              >We all dodged a bullet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 15:11:26</span
              ><span class="points-container"
                >Points: <span class="points">459</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45183029"
                  >Comments</a
                ><span class="descendants">: 267</span></span
              >
            </h4>
            <div class="text">
              <i>NPM debug and chalk packages compromised</i> -
              <a href="https://news.ycombinator.com/item?id=45169657"
                >https://news.ycombinator.com/item?id=45169657</a
              >
            </div>
          </section>
        </section>
        <section id="45182770">
          <h3>
            <a class="item" href="https://go.dev/blog/jsonv2-exp"
              >A new experimental Go API for JSON</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 14:54:32</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45182770"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45182381">
          <h3>
            <a class="item" href="https://www.anthropic.com/news/create-files"
              >Claude can now create and edit files</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 14:25:55</span
              ><span class="points-container"
                >Points: <span class="points">337</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45182381"
                  >Comments</a
                ><span class="descendants">: 210</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45179889">
          <h3>
            <a
              class="item"
              href="https://github.com/naugtur/running-qix-malware"
              >You too can run malware from NPM (I mean without consequences)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 10:02:23</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45179889"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45179304">
          <h3>
            <a
              class="item"
              href="https://news.bloomberglaw.com/ip-law/anthropic-judge-blasts-copyright-pact-as-nowhere-close-to-done"
              >Anthropic judge rejects $1.5B AI copyright settlement</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 08:46:53</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45179304"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45178041">
          <h3>
            <a
              class="item"
              href="https://mistral.ai/news/mistral-ai-raises-1-7-b-to-accelerate-technological-progress-with-ai"
              >Mistral AI raises 1.7B€, enters strategic partnership with
              ASML</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 06:10:15</span
              ><span class="points-container"
                >Points: <span class="points">701</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45178041"
                  >Comments</a
                ><span class="descendants">: 373</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.asml.com/en/news/press-releases/2025/asml-mistral-ai-enter-strategic-partnership"
                >https://www.asml.com/en/news/press-releases/2025/asml-mistra...</a
              >
            </div>
          </section>
        </section>
        <section id="45167436">
          <h3>
            <a
              class="item"
              href="https://github.com/go-monk/from-bash-to-go-part-ii"
              >Go for Bash Programmers – Part II: CLI Tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-08 @ 12:26:15</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45167436"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45166245">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Anscombe%27s_quartet"
              >Anscombe's Quartet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-08 @ 09:29:36</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45166245"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45164892">
          <h3>
            <a class="item" href="https://www.dbos.dev/blog/durable-queues"
              >I solved a distributed queue problem after 15 years</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-08 @ 05:28:34</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45164892"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45157278">
          <h3>
            <a
              class="item"
              href="https://nautil.us/cities-obey-the-laws-of-living-things-1236057/"
              >Cities Obey the Laws of Living Things</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-07 @ 11:31:01</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45157278"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45157161">
          <h3>
            <a class="item" href="https://www.getxeneva.com/"
              >Show HN: An Open Source XR(AR/VR) Operating System</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-07 @ 11:09:43</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45157161"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/manaskamal/XenevaOS"
                >https://github.com/manaskamal/XenevaOS</a
              >
              .
              <p>
                The journey hasn't exactly been easy, we've been criticized by a
                lot saying that whatever we're doing is impractical and that
                we're too ambitious. Regardless, we've been committed to reach
                our goal.
              </p>
              <p>
                Here to answer all questions and doubts. Answering one question
                beforehand because we know someone is going to ask it -
              </p>
              <p>
                Q: Why use your own kernel/ Why don't you use Linux/ Why are you
                trying to reinvent the wheel?
              </p>
              <p>
                A: Using our own kernel helps us get rid of the baggage of
                legacy codes, bring the most optimal performance on our target
                hardware (XR/AR/VR) and achieve more efficiency than what we
                would've achieved on an existing kernel.
              </p>
              <p>
                We're not trying to reinvent the wheel, but just building
                Formula One racing tyres for it.
              </p>
            </div>
          </section>
        </section>
        <section id="45151641">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/news/ng-interactive/2025/aug/17/how-can-england-possibly-be-running-out-of-water"
              >How can England possibly be running out of water?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-06 @ 18:22:35</span
              ><span class="points-container"
                >Points: <span class="points">314</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45151641"
                  >Comments</a
                ><span class="descendants">: 469</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45140572">
          <h3>
            <a class="item" href="https://rustcurious.com/elements/"
              >A clickable visual guide to the Rust type system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-05 @ 16:39:40</span
              ><span class="points-container"
                >Points: <span class="points">223</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45140572"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
