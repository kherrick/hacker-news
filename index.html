<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43918620">
          <h3>
            <a class="item" href="https://github.com/rybbit-io/rybbit"
              >Open source Google Analytics replacement</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 17:45:33</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43918620"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43918484">
          <h3>
            <a class="item" href="https://github.com/astral-sh/ty"
              >Ty: A fast Python type checker and language server, written in
              Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 17:32:26</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43918484"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43918437">
          <h3>
            <a
              class="item"
              href="https://www.engadget.com/audio/samsung-is-paying-350-million-for-audio-brands-bowers--wilkins-denon-marantz-and-polk-131514754.html"
              >Samsung is paying $350M for audio brands B&amp;amp;W, Denon,
              Marantz and Polk</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 17:28:25</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43918437"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43918134">
          <h3>
            <a
              class="item"
              href="https://jobs.ashbyhq.com/motion/4f5f6a29-3af0-4d79-99a4-988ff7c5ba05?utm_source=hn"
              >Motion (YC W20) Is Hiring a Senior Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 17:01:45</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43917855">
          <h3>
            <a class="item" href="https://www.katycowan.co.uk/blog/getting-old"
              >Getting Older Isn't What You Think</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 16:41:04</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43917855"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43917461">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/generate-images-gemini-2-0-flash-preview/"
              >Create and edit images with Gemini 2.0 in preview</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 16:06:44</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43917461"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43917376">
          <h3>
            <a
              class="item"
              href="https://cybercultural.com/p/online-music-distribution-1996/"
              >Telling Lies: Bowie and Online Music Distribution in 1996</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 15:58:41</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43917376"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43917122">
          <h3>
            <a
              class="item"
              href="https://opensearch.org/blog/opensearch-3-0-enhances-vector-database-performance/"
              >OpenSearch 3.0 Released</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 15:38:46</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43917122"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43916956">
          <h3>
            <a class="item" href="https://github.com/ciromattia/kcc"
              >Show HN: eInk optimized manga with Kindle Comic Converter
              (+Kobo/ReMarkable)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 15:26:43</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43916956"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
            <div class="text">
              <p>
                Hey everyone! I'm the current maintainer of KCC since 2023,
                thanks for using it! I’ve been reading manga on Kindle ever
                since I got the big 9.7” Kindle DX from 2010 using mangle, and
                upgraded to the even bigger 10.2” Kindle Scribe 2022 using KCC.
              </p>
              <p>The biggest contributions I've made to KCC are:</p>
              <p>
                - added modern macOS support and removed homebrew requirement -
                ported code to run on native Apple silicon M1 chip and later for
                a 2x speed boost (qt5-&gt;qt6) - free open source windows
                codesign with SignPath - fixed Kindle Scribe support - and tons
                of other various features and bug fixes and developer friendly
                changes - created a legacy Windows 7 build with 300+ downloads…
              </p>
              <p>The biggest community PRs were:</p>
              <p>
                - huge 2x speed boosts due to various CPU/IO optimizations -
                Kobo/Remarkable support
              </p>
              <p>Enjoy using KCC and let me know if you have any questions!</p>
            </div>
          </section>
        </section>
        <section id="43916577">
          <h3>
            <a
              class="item"
              href="https://pganalyze.com/blog/postgres-18-async-io"
              >Waiting for Postgres 18: Accelerating Disk Reads with
              Asynchronous I/O</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 14:57:03</span
              ><span class="points-container"
                >Points: <span class="points">270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43916577"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43916098">
          <h3>
            <a class="item" href="https://mistral.ai/news/le-chat-enterprise"
              >Mistral ships le chat – enterprise AI assistant that can run on
              prem</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 14:24:09</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43916098"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914832">
          <h3>
            <a
              class="item"
              href="https://mfkl.github.io/2024/01/10/unity-double-oss-standards.html"
              >Unity’s Open-Source Double Standard: the ban of VLC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 12:33:40</span
              ><span class="points-container"
                >Points: <span class="points">402</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914832"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914784">
          <h3>
            <a
              class="item"
              href="https://www.qodo.ai/blog/java-unit-testing-how-to-use-tests-as-a-debugging-tool-for-logic-errors/"
              >Using tests as a debugging tool for logic errors</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 12:27:40</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914784"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914705">
          <h3>
            <a
              class="item"
              href="https://blog.jetbrains.com/clion/2025/05/clion-is-now-free-for-non-commercial-use/"
              >CLion Is Now Free for Non-Commercial Use</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 12:18:38</span
              ><span class="points-container"
                >Points: <span class="points">432</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914705"
                  >Comments</a
                ><span class="descendants">: 282</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914235">
          <h3>
            <a
              class="item"
              href="https://gill.net.in/posts/my-quest-to-make-motorcycle-riding-safer/"
              >My quest to make motorcycle riding that tad bit safer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 11:06:17</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914235"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43913751">
          <h3>
            <a class="item" href="https://dynomight.net/blood/"
              >So Much Blood</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 09:41:13</span
              ><span class="points-container"
                >Points: <span class="points">250</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43913751"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43912844">
          <h3>
            <a class="item" href="https://zed.dev/blog/fastest-ai-code-editor"
              >Zed: High-performance AI Code Editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 06:38:40</span
              ><span class="points-container"
                >Points: <span class="points">402</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43912844"
                  >Comments</a
                ><span class="descendants">: 282</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43910685">
          <h3>
            <a
              class="item"
              href="https://www.variance.co/post/alignment-is-not-free-how-a-model-silenced-our-confidence-signals"
              >Alignment is not free: How model upgrades can silence your
              confidence signals</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 23:22:49</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43910685"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43909409">
          <h3>
            <a
              class="item"
              href="https://github.com/asgeirtj/system_prompts_leaks/blob/main/claude.txt"
              >Claude's system prompt is over 24k tokens with tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 20:39:35</span
              ><span class="points-container"
                >Points: <span class="points">537</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43909409"
                  >Comments</a
                ><span class="descendants">: 277</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43907820">
          <h3>
            <a
              class="item"
              href="https://www.collabora.com/news-and-blog/blog/2025/05/06/matt-godbolt-sold-me-on-rust-by-showing-me-c-plus-plus/"
              >Matt Godbolt sold me on Rust by showing me C++</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 17:51:03</span
              ><span class="points-container"
                >Points: <span class="points">541</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43907820"
                  >Comments</a
                ><span class="descendants">: 513</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43906841">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43906841"
              >Launch HN: Exa (YC S21) – The web as a database</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 16:18:42</span
              ><span class="points-container"
                >Points: <span class="points">386</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43906841"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
            <div class="text">
              <a href="https://exa.ai">https://exa.ai</a>). We recently launched
              Exa Websets, an embeddings-powered search engine designed to
              return exactly what you’re asking for. You can get precise results
              for complex queries like “all startups working on open-source
              developer tools based in SF, founded 2021-2025”. Demo here -
              <a href="https://youtu.be/Unt8hJmCxd4"
                >https://youtu.be/Unt8hJmCxd4</a
              >
              <p>
                We started working on Exa because we were frustrated that while
                LLM state-of-the-art is advancing every week, Google has gotten
                worse over time. The Internet used to feel like a magical
                information portal, but it doesn’t feel that way anymore when
                you’re constantly being pushed towards SEO-optimized clickbait.
              </p>
              <p>
                Websets is a step in the opposite direction. For every search,
                we perform dozens of embedding searches over Exa’s vector
                database of the web to find good search candidates, then we run
                agentic workflows on each result to verify they match exactly
                what you asked for.
              </p>
              <p>
                Websets results are good for two reasons. First, we train custom
                embedding models for our main search algorithm, instead of
                typical keyword matching search algorithms. Our embeddings
                models are trained specifically to return exactly the type of
                entity you ask for. In practice, that means if you search
                “startups working in nanotech”, keyword-based search engines
                return listicles about nanotech startups, because these
                listicles match the keywords in the query. In contrast, our
                embedding models return actual startup homepages, because these
                startup homepages match the meaning of the query.
              </p>
              <p>
                The second is that LLMs provide the last-mile intelligence
                needed to verify every result. Each result and piece of data is
                backed with supporting references that we used to validate that
                the result is actually a match for your search criteria. That’s
                why Websets can take minutes or even hours to run, depending on
                your query and how many results you ask for. For valuable search
                queries, we think this is worth it.
              </p>
              <p>
                Also notably, Websets are tables, not lists. You can add
                “enrichment” columns to find more information about each result,
                like “# of employees” or “does author have blog?”, and the cells
                asynchronously load in. This table format hopefully makes the
                web feel more like a database.
              </p>
              <p>A few examples of searches that work with Websets:</p>
              <p>
                - “Math blogs created by teachers from outside the US”:
                <a href="https://websets.exa.ai/cma1oz9xf007sis0ipzxgbamn"
                  >https://websets.exa.ai/cma1oz9xf007sis0ipzxgbamn</a
                >
              </p>
              <p>
                - "research paper about ways to avoid the O(n^2) attention
                problem in transformers, where one of the first author's first
                name starts with "A","B", "S", or "T", and it was written
                between 2018 and 2022”:
                <a href="https://websets.exa.ai/cm7dpml8c001ylnymum4sp11h"
                  >https://websets.exa.ai/cm7dpml8c001ylnymum4sp11h</a
                >
              </p>
              <p>
                - “US based healthcare companies, with over 100 employees and a
                technical founder":
                <a href="https://websets.exa.ai/cm6lc0dlk004ilecmzej76qx2"
                  >https://websets.exa.ai/cm6lc0dlk004ilecmzej76qx2</a
                >
              </p>
              <p>
                - “all software engineers in the Bay Area, with experience in
                startups, who know Rust and have published technical content
                before”:
                <a href="https://youtu.be/knjrlm1aibQ"
                  >https://youtu.be/knjrlm1aibQ</a
                >
              </p>
              <p>
                You can try it at
                <a href="https://websets.exa.ai/">https://websets.exa.ai/</a>
                and API docs are at
                <a href="https://docs.exa.ai/websets"
                  >https://docs.exa.ai/websets</a
                >. We’d love to hear your feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="43906528">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/medical-devices/3d-printed-hairlike-eeg-electrode/"
              >Single hair-like electrode outperforms traditional 21-lead EEG</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 15:53:30</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43906528"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43904478">
          <h3>
            <a
              class="item"
              href="https://scienceblog.com/wildscience/2025/05/06/cuttlefish-talk-with-their-arms-study-reveals/"
              >Cuttlefish 'talk' with their arms, study reveals</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 12:46:49</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43904478"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.biorxiv.org/content/10.1101/2025.04.13.648584v3"
                >https://www.biorxiv.org/content/10.1101/2025.04.13.648584v3</a
              >
            </div>
          </section>
        </section>
        <section id="43900877">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2025-05-06/openai-reaches-agreement-to-buy-startup-windsurf-for-3-billion"
              >OpenAI reaches agreement to buy Windsurf for $3B</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 00:57:48</span
              ><span class="points-container"
                >Points: <span class="points">636</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43900877"
                  >Comments</a
                ><span class="descendants">: 547</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43899288">
          <h3>
            <a class="item" href="https://github.com/rzane/docker2exe"
              >docker2exe: Convert a Docker image to an executable</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-05 @ 20:47:04</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43899288"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43888634">
          <h3>
            <a class="item" href="https://100.st"
              >Show HN: 100.st – Dev utilities I built for format conversions
              and encoding</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-04 @ 18:53:29</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43888634"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text"><p>Andrei</p></div>
          </section>
        </section>
        <section id="43887874">
          <h3>
            <a class="item" href="https://github.com/VictorTaelin/WebMonkeys"
              >WebMonkeys: parallel GPU programming in JavaScript (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-04 @ 17:00:04</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43887874"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43887489">
          <h3>
            <a
              class="item"
              href="https://www.stefanjudis.com/blog/stringly-typed/"
              >Stringly Typed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-04 @ 16:01:05</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43887489"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43887068">
          <h3>
            <a class="item" href="https://specbranch.com/posts/fp-rand/"
              >Perfect Random Floating-Point Numbers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-04 @ 14:56:12</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43887068"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43884245">
          <h3>
            <a class="item" href="https://github.com/EvanZhouDev/polycompiler"
              >Polycompiler: Merge Python and JavaScript code into one file that
              runs in both</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-04 @ 03:27:01</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43884245"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
