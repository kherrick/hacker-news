<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37391848">
          <h3>
            <a class="item" href="https://github.com/measuredco/puck"
              >Show HN: An open source visual editor for React</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 14:08:34</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37391848"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37391521">
          <h3>
            <a
              class="item"
              href="https://httptoolkit.com/blog/android-14-breaks-system-certificate-installation/"
              >Android 14 blocks all modification of system certificates, even
              as root</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 13:42:57</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37391521"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37391365">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/australia-news/2023/sep/05/australian-mps-to-lobby-us-to-drop-julian-assange-prosecution-or-risk-very-dangerous-precedent-for-russia-and-china"
              >Australian MPs to lobby US to drop Julian Assange prosecution</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 13:28:52</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37391365"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37391272">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37391272"
              >Launch HN: Nullstone (YC W22) – An easier way to deploy and
              manage cloud apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 13:21:13</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37391272"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <a href="https://nullstone.io">https://nullstone.io</a>), a
              developer platform to deploy and manage cloud apps and
              infrastructure. Here’s a demo:
              <a
                href="https://www.loom.com/share/924b1f57ba2143eeabb43ee8cbe3fe88?sid=91afe471-e5ac-462d-829a-1f762f3ab2fd"
                >https://www.loom.com/share/924b1f57ba2143eeabb43ee8cbe3fe88?...</a
              >.
              <p>
                Running your app on a major cloud provider makes a lot of things
                easier, but it’s tedious to configure IAM, security groups,
                networking, secrets, autoscaling, health checks, zero-downtime
                deployments, and more. It is also difficult and time-consuming
                to release and synchronize app and infra changes across many
                apps and environments.
              </p>
              <p>
                Nullstone provides an intuitive developer experience to deploy
                any app—be it an API, web app, static site, or one-off job—to
                AWS or GCP. We provide a simple, consistent experience for
                automatically deploying to any platform (e.g., Fargate,
                Kubernetes, Lambda, etc.). We provision and configure
                infrastructure depending on your use case (e.g., networks,
                clusters, datastores, load balancers, third-party logging
                providers, and much more). We offer many features that are hard
                to build in-house: automatic secrets management, GitOps, and
                preview environments.
              </p>
              <p>
                Everything runs in your own cloud accounts. You own your data
                and we cannot access it. Secrets are stored in your secrets
                manager. We support all app types (e.g. APIs, web apps,
                frontends, jobs, etc.) and platforms (e.g. containers,
                serverless, s3 sites, VMs, etc.).
              </p>
              <p>
                Instead of being a black box, our infrastructure modules are
                open source and you can hot-swap each module for your own
                Terraform. You can automate deploys and preview environments via
                GitHub integrations, CI/CD integrations, CLI, or API. All
                infra/deploy logs are easily accessible through the UI, CLI, and
                API.
              </p>
              <p>
                We scan our modules against compliance frameworks to provide a
                foundation of compliance for your infrastructure. If there are
                vendors or platforms we don’t support, we provide a quick
                framework and open hooks to add support.
              </p>
              <p>
                Nullstone is intended for software teams that don’t want to
                build an in-house platform. Our customers span many industries
                and have used us to reduce cloud costs by up to 90%, provide
                developer self-service, fully automate deployments, migrate to
                containers, and more.
              </p>
              <p>
                Previously, we built an internal developer platform at McKinsey
                (serving 300 workloads across 1000 engineers) to solve a major
                pain point: engineers were building apps in weeks only to wait
                months to provision and secure infrastructure (and once
                provisioned, making changes to the apps was a frustrating
                back-and-forth process). Later I joined a cybersecurity company
                and as our team grew, I saw the same challenges: we were
                spending more time configuring infrastructure than building the
                product.
              </p>
              <p>
                We decided to build Nullstone because no existing solution fit
                our needs. Some of the products we found were all-in-one
                solutions, meaning we had to sacrifice the tooling we liked and
                use infrastructure with insufficient security, compliance, and
                reliability controls. Other products, built for enterprises,
                provide a poor developer experience in exchange for costly
                licenses and significant internal resources to operate.
              </p>
              <p>
                To provide a fully customizable experience that is easy-to-use
                for developers, we had to solve a few problems. (1) We had to
                present infrastructure as code configuration in a way that isn’t
                overwhelming, but allows for flexibility to handle various
                architectures. (2) We had to insulate developers from
                infrastructure-as-code errors that would confuse them, while
                maintaining a level of transparency that devs demand. (3) We had
                to build tooling around module development because
                infrastructure takes 10x longer than app code to get feedback on
                whether it’s working properly.
              </p>
              <p>
                Nullstone is free for individual use. After that, we charge
                $100/user/month. A user is anybody committing code that is
                deployed through Nullstone.
              </p>
              <p>
                Our docs are at
                <a href="https://docs.nullstone.io/"
                  >https://docs.nullstone.io/</a
                >
                and our public roadmap is at
                <a
                  href="https://github.com/orgs/nullstone-io/projects/1/views/1"
                  >https://github.com/orgs/nullstone-io/projects/1/views/1</a
                >.
              </p>
              <p>
                We would love for you to try it out and give us feedback, and we
                look forward to your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="37391244">
          <h3>
            <a
              class="item"
              href="https://petapixel.com/2023/09/05/at-70000-feet-in-a-u2-the-making-of-a-photo-shoot-at-the-edge-of-space/"
              >The World’s First U2 Spy Plane Photo Shoot at the Edge of
              Space</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 13:19:32</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37391244"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37390941">
          <h3>
            <a class="item" href="https://antonz.org/mastering-curl/"
              >Mastering curl: interactive text guide</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 12:49:10</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37390941"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37390430">
          <h3>
            <a
              class="item"
              href="https://restofworld.org/2023/delivery-driver-bikes-stolen-brazil/"
              >Come downstairs or we’ll eat your order, delivery workers tell
              customers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 11:45:51</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37390430"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37390184">
          <h3>
            <a class="item" href="https://github.com/deadbeefsociety/sshfs"
              >A currently maintained fork of SSHFS</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 11:04:51</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37390184"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37390108">
          <h3>
            <a class="item" href="https://huggingface.co/training-cluster"
              >HuggingFace Training Cluster as a Service</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 10:51:25</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37390108"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37389376">
          <h3>
            <a
              class="item"
              href="https://www.markround.com/blog/2023/08/30/amiga-systems-programming-in-2023/"
              >Amiga Systems Programming in 2023</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 08:53:13</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37389376"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37389361">
          <h3>
            <a
              class="item"
              href="https://nhigham.com/2023/09/05/what-is-a-flop/"
              >What is a flop?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 08:50:48</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37389361"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37388560">
          <h3>
            <a class="item" href="https://www.microfocus.com/en-us/cobol"
              >Learn COBOL in a day</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 06:35:09</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37388560"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37387585">
          <h3>
            <a class="item" href="https://github.com/jstrieb/paperify"
              >Show HN: Transform any website or eBook into a research paper (no
              LLM required)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 03:38:52</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37387585"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37387392">
          <h3>
            <a
              class="item"
              href="https://ikrima.dev/dev-notes/homelab/zfs-for-dummies/"
              >ZFS for Dummies</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 03:07:17</span
              ><span class="points-container"
                >Points: <span class="points">337</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37387392"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37387110">
          <h3>
            <a
              class="item"
              href="https://www.cambridge.org/core/journals/journal-of-economic-history/article/we-do-not-know-the-population-of-every-country-in-the-world-for-the-past-two-thousand-years/D747DDC6E499C799B0471DBE33FEB0BB"
              >Economists typically rely on bogus population data</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 02:14:16</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37387110"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37386711">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37386711"
              >Videobug (YC S22) is hiring a founding engineer – automated
              snapshot testing</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 01:00:31</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Company Overview: Unlogged (previously videobug) records inputs
                and return values of Java methods to enable developers to replay
                them and identify potential regressions instantly. Our mission
                is enable confident code changes and faster software
                development.
              </p>
              <p>
                We are currently seeking an experienced Backend Java Developer
                (4-6 years of hands on exp.) to join our team. If you like
                JVM-related technologies, and are hands-on with various Java
                frameworks - do consider working with us.
              </p>
              <p>
                Job Summary: We have built a fully offline record and replay
                IntelliJ plugin for Java. We are now looking to build
                production-ready pipeline so that Java developers can replay
                production traffic for their code changes and ensure regression
                free deployments.
              </p>
              <p>
                Responsibilities: - Design, develop, and maintain backend
                applications using Java and various Java frameworks. - Talk to
                other java developers and understand nuances of their day to day
                needs. Founders do this too. - Implement a fast and bug free log
                scanning pipeline . - Integrate 3rd party APIs with the
                dashboard. - Deploy and manage services on cloud platforms such
                as AWS, GCP, or Azure. - Identify and address performance
                bottlenecks in the software. - Participate in code reviews to
                maintain code quality and ensure best practices. - Proactively
                suggest process improvements and participate in technical
                discussions.
              </p>
              <p>
                Requirements: - 4-8 years of hands-on experience with Java
                development and various Java frameworks. - Strong knowledge and
                passion for JVM-related technologies and Java programming. -
                Experience working with at least one SQL database and one NoSQL
                database. - Proficiency in containerization using Docker for
                efficient deployment. - Hands-on experience with at least one
                cloud platforms such as AWS, GCP, or Azure. - Excellent
                problem-solving skills and ability to tackle complex technical
                challenges. - Strong communication and teamwork skills for
                effective collaboration. - Willingness to learn and explore new
                technologies.
              </p>
              <p>
                Benefits: - Competitive salary and equity options based on
                experience and performance. - Opportunity to work on
                cutting-edge projects with a talented team. - Collaborative and
                innovative work environment that encourages new ideas.
              </p>
              <p>
                Location: Preferred: Bangalore, India We are ok with Remote in
                exceptional cases.
              </p>
              <p>
                We are on a mission to automate regression testing. If you feel
                passionate about quality software engineering at speed, do
                consider joining us.
              </p>
              <p>
                To apply, please submit your resume, and GitHub repository links
                to us at ssl [at] bug.video
              </p>
            </div>
          </section>
        </section>
        <section id="37386661">
          <h3>
            <a
              class="item"
              href="https://news.stanford.edu/2023/09/04/farming-food-biodiversity/"
              >Farms that create habitat key to food security and
              biodiversity</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 00:52:29</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37386661"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37386397">
          <h3>
            <a class="item" href="http://telecom.csail.mit.edu/judy-sammel.html"
              >Get a cable modem, go to jail (1999)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-05 @ 00:02:51</span
              ><span class="points-container"
                >Points: <span class="points">472</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37386397"
                  >Comments</a
                ><span class="descendants">: 371</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37385716">
          <h3>
            <a class="item" href="https://sr.ht/~ashton314/emacs-bedrock/"
              >Emacs Bedrock: A minimal Emacs starter kit</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-04 @ 22:26:38</span
              ><span class="points-container"
                >Points: <span class="points">220</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37385716"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37383913">
          <h3>
            <a class="item" href="https://vgel.me/posts/c500/"
              >Writing a C compiler in 500 lines of Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-04 @ 19:17:37</span
              ><span class="points-container"
                >Points: <span class="points">450</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37383913"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37376519">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/world/2023/aug/27/competition-seeks-true-taste-of-thailands-national-dish"
              >Pad kaphrao contest seeks true taste of Thai dish</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-04 @ 02:16:40</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37376519"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37374908">
          <h3>
            <a
              class="item"
              href="https://journals.sagepub.com/doi/10.1177/00218286221128289"
              >Evidence for Hipparchus’ Star Catalogue revealed by multispectral
              imaging (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-03 @ 21:44:14</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37374908"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37370855">
          <h3>
            <a class="item" href="http://harmanhowtolisten.blogspot.com/"
              >Harman How to Listen (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-03 @ 14:46:48</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37370855"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37370835">
          <h3>
            <a
              class="item"
              href="https://petapixel.com/2023/05/24/pentax-k-3-iii-monochrome-review-a-dslr-just-for-bw-photo-lovers/"
              >Pentax K-3 III Monochrome: A DSLR Just for B&amp;amp;W Photo
              Lovers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-03 @ 14:44:13</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37370835"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37369732">
          <h3>
            <a
              class="item"
              href="https://hachyderm.io/@softwaredoug/111000936722843110"
              >Do we think about vector storage completely wrong?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-03 @ 12:07:06</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37369732"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37369490">
          <h3>
            <a
              class="item"
              href="https://www.404media.co/how-and-why-to-get-into-film-photography/"
              >How to Get into Film Photography (and Why You Should)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-03 @ 11:20:11</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37369490"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37369450">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/us-news/2023/sep/02/shipwreck-trinidad-lake-michigan-wisconsin"
              >19th-century shipwreck discovered in Lake Michigan</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-03 @ 11:13:32</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37369450"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37369440">
          <h3>
            <a
              class="item"
              href="https://nautil.us/the-social-life-of-bats-373018/"
              >The Social Life of Bats</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-03 @ 11:11:55</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37369440"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37367056">
          <h3>
            <a class="item" href="http://altmetrics.org/manifesto/"
              >Altmetrics: A Manifesto (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-03 @ 01:54:27</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37367056"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37365764">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=RFjGq55BglM"
              >Counterfeit Apple II computers (1985) [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-02 @ 21:39:39</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37365764"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
