<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39828963">
          <h3>
            <a class="item" href="https://github.com/nvim-neorg/neorg"
              >Neorg – organize your life in Neovim</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 15:16:23</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39828963"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39828686">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39828686"
              >Launch HN: Aqua Voice (YC W24) – Voice-driven text editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 14:53:52</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39828686"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.withaqua.com/">https://www.withaqua.com/</a
              >). Aqua is a voice-native document editor that combines reliable
              dictation and natural language commands, letting you say things
              like: “make this a list” or “it’s Erin with an E” or “add an
              inline citation here for page 86 of this book”. Here is a demo:
              <a href="https://youtu.be/qwSAKg1YafM"
                >https://youtu.be/qwSAKg1YafM</a
              >.
              <p>
                Finn, who is big-time dyslexic, has been using dictation
                software since the sixth grade when his dad set him up on Dragon
                Dictation. He used it through school to write papers, and has
                been keeping his own transcription benchmarks since college. All
                that time, writing with your voice has remained a cumbersome and
                brittle experience that is riddled with painpoints.
              </p>
              <p>
                Dictation software is still terrible. All the solutions
                basically compete on accuracy (i.e. speech recognition), but
                none of them deal with the fundamentally brittle nature of the
                text that they generate. They don't try to format text correctly
                and require you to learn a bunch of specialized commands, which
                often are not worth it. They're not even close to a voice
                replacement for a keyboard.
              </p>
              <p>
                Even post LLM, you are limited to a set of specific commands and
                the most accurate models don’t have any commands. Outside of
                these rules, the models have no sense for what is an instruction
                and what is content. You can’t say “and format this like an
                email” or “make the last bullet point shorter”. Aqua solves
                this.
              </p>
              <p>
                This problem is important to Finn and millions of other people
                who would write with their voice if they could. Initially, we
                didn't think of it as a startup project. It was just something
                we wanted for ourselves. We thought maybe we'd write a novel
                with it - or something. After friends started asking to use the
                early versions of Aqua, it occurred to us that, if we didn't
                build it, maybe nobody would.
              </p>
              <p>
                Aqua Voice is a text editor that you talk to like a person.
                Depending on the way that you say it and the context in which
                you're operating, Aqua decides whether to transcribe what you
                said verbatim, execute a command, or subtly modify what you said
                into what you meant to write.
              </p>
              <p>
                For example, if you were to dictate: "Gryphons have classic
                forms resembling shield volcanoes," Aqua would output your text
                verbatim. But if you stumble over your words or start a sentence
                over a few times, Aqua is smart enough to figure that out and to
                only take the last version of the sentence.
              </p>
              <p>
                The vision is not only to provide a more natural dictation
                experience, but to enable for the first time an AI-writing
                experience that feels natural and collaborative. This requires
                moving away from using LLMs for one-off chat requests and
                towards something that is more like streaming where you are in
                constant contact with the model. Voice is the natural medium for
                this.
              </p>
              <p>
                Aqua is actually 6 models working together to transcribe,
                interpret, and rewrite the document according to your intent.
                Technically, executing a real-time voice application with a
                language model at its core requires complex coordination between
                multiple pieces. We use MoE transcription to outperform what was
                previously thought possible in terms of real-time accuracy. Then
                we sync up with a language model to determine what should be on
                the screen as quickly as possible.
              </p>
              <p>
                The model isn't perfect, but it is ready for early adopters and
                we’ve already been getting feedback from grateful users. For
                example, a historian with carpal tunnel sent us an email he
                wrote using Aqua and said that he is now able to be five times
                as productive as he was previously. We've heard from other
                people with disabilities that prevent them from typing. We've
                also seen good adoption from people who are dyslexic or simply
                prefer talking to typing. It’s being used for everything from
                emails to brainstorming to papers to legal briefings.
              </p>
              <p>
                While there is much left to do in terms of latency and
                robustness, the best experiences with Aqua are beginning to feel
                magical. We would love for you to try it out and give us
                feedback, which you can do with no account on
                <a href="https://withaqua.com">https://withaqua.com</a>. If you
                find it useful, it’s $10/month after a 1000-token free trial.
                (We want to bump the free trial in the future, but we're a small
                team, and running this thing isn’t cheap.)
              </p>
              <p>
                We’d love to hear your ideas and comments with voice-to-text!
              </p>
            </div>
          </section>
        </section>
        <section id="39828481">
          <h3>
            <a
              class="item"
              href="https://sander.ai/2020/03/24/audio-generation.html"
              >Generating music in the waveform domain (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 14:38:48</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39828481"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39828424">
          <h3>
            <a class="item" href="https://github.com/Notselwyn/CVE-2024-1086"
              >Debian/Ubuntu privilege escalation PoC exploit for
              CVE-2024-1086</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 14:35:33</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39828424"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39828091">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/finance/banking/visa-mastercard-agree-to-lower-swipe-fees-settling-long-running-lawsuit-d6e5f0a8"
              >Visa, Mastercard Agree to Lower Swipe Fees, Settling Long-Running
              Lawsuit</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 14:15:02</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39828091"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39828058">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39828058"
              >Launch HN: CommodityAI (YC W24) – Shipment management for
              commodity traders</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 14:12:16</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39828058"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text">
              <a href="https://commodityai.io">https://commodityai.io</a>). We
              make commodity shipments easy to manage.
              <p>
                Commodities are the center of global trade. The food you eat and
                the coffee you drink all start with agricultural producers. A
                trader organizes a shipment of it to a receiver near you, who
                then manufactures and distributes it to your local supermarket
                or coffee shop.
              </p>
              <p>
                That sounds simple enough, but any shipment involving
                commodities involves around 200 processes, at least 50
                documents, and extensive coordination through emails and phone
                calls. The amount of paper and processes is staggering. Errors
                can be catastrophically costly, ending up with lawsuits over
                millions of dollars.
              </p>
              <p>
                Commodity trading companies allocate 40% of their workforce to
                logistics and operations. It’s a relationship-focused business.
                These aren't trading firms with Bloomberg terminals doing spot
                trading with algorithms all day. They are trading actual
                physical commodities. Many of these deals are agreed on via text
                message.
              </p>
              <p>
                Now imagine you're managing thousands of shipments a month.
                Nearly every trader we’ve talked to can recall a time in the
                past 6 months where a document or process error resulted in the
                firm losing hundreds of thousands of dollars.
              </p>
              <p>
                This led us to explore how we could tailor AI, automation, and
                collaboration tools to automate the handling of shipment
                workflows for more efficient operations and accurate
                documentation. Our team has the background to solve this
                problem—an ex-sugar trader with 8 years of experience and two
                engineers with a combined 14 years of experience from logistics
                and software companies.
              </p>
              <p>
                There are a few layers to solving the pain points of these
                customers:
              </p>
              <p>
                (1) Data Preprocessing: we give them a way to clean up and
                organize their existing data, which is usually a mess. We help
                them process documents, classify them, extract relevant fields,
                organize them by shipments, and search for them.
              </p>
              <p>
                (2) We use AI and automation to leverage OCR, Multi-Modal
                Transformers, and indexing methods across 150+ different
                commodity and logistics document types to automate business
                processes.
              </p>
              <p>
                (3) Actions and Workflows: Once the data is processed, we enable
                users to take actions or kickoff workflows with them, such as
                entering data into ERPs, using AI agents to compose emails,
                update freight matrices, track their shipments and predict
                delays, and more. All of these things are things the user does
                manually currently and are prone to error, so we automate them
                to save time and money. An ops team currently spends 60% of
                their day on these tasks. With our initial product, we are
                already saving them 2 hours a day.
              </p>
              <p>
                Our customers so far include one of the largest U.S.
                agricultural traders, who use our platform to process over a
                million documents and automate internal workflows, like creating
                vessel nominations and updating shipment statuses. They also use
                us to find critical documents quickly. Importers and exporters
                randomly get audited to make sure the commodity they declared
                matches what was actually delivered (quality, weight,
                polarization). These audits can happen years after the shipment,
                and searching for the relevant documents is a needle/haystack
                situation. Sometimes they have been unable to find them, and you
                can imagine how well that goes over with the auditors. We make
                this easy.
              </p>
              <p>
                We can’t give HN readers direct access to the product because it
                can only be used if you have commodity data and that data is
                sensitive. But here’s a video showing how it works:
                <a href="https://www.youtube.com/watch?v=slOGliSR6IM#t=26s"
                  >https://www.youtube.com/watch?v=slOGliSR6IM#t=26s</a
                >
              </p>
              <p>
                There probably aren’t too many commodity traders checking HN
                every day, but we figure some of you have worked as traders or
                know traders from previous work experience, and we’d love to
                hear whatever you think about this!
              </p>
            </div>
          </section>
        </section>
        <section id="39827972">
          <h3>
            <a class="item" href="https://viperfish.com.au/games/pinnacle.html"
              >Pinnacle – a modern tribute to the 1986 classic, The Sentinel</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 14:05:02</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39827972"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39827645">
          <h3>
            <a class="item" href="https://lucumr.pocoo.org/2024/3/26/rust-cdo/"
              >Tech Debt: My Rust Library Is Now a CDO</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 13:36:40</span
              ><span class="points-container"
                >Points: <span class="points">248</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39827645"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39827390">
          <h3>
            <a class="item" href="https://booksbymood.com"
              >Show HN: I Made a Books Recommendation App Based on Your Mood</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 13:13:04</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39827390"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
            <div class="text">
              <p>
                I noticed that I often looked for new books, depending on my
                mood (e.g., if I'm feeling tired, I want to find books that'll
                help me fix that and improve my sleep).
              </p>
              <p>So, I created my 1st indie project, BooksByMood.</p>
              <p>
                BooksByMood will help you find your next read based on your mood
                w/
              </p>
              <p>- Books averaging 4.09/5 on Goodreads</p>
              <p>
                - Each book comes with an explanation of why it's selected for
                your mood
              </p>
              <p>- 18 moods to explore</p>
              <p>I hope you'll enjoy using the website,</p>
              <p>Cheers!</p>
            </div>
          </section>
        </section>
        <section id="39827127">
          <h3>
            <a class="item" href="https://github.com/DoMusic/Hybrid-Net"
              >Hybrid-Net: Real-time audio source separation, generate lyrics,
              chords, beat</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 12:42:17</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39827127"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39826990">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/03/26/hmrc_linux_paye_tools/"
              >HMRC offers a Linux version of Basic PAYE Tools, but it recently
              stopped working</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 12:26:43</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39826990"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39826770">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/nimbus-3/jobs/SqMcSqM-founding-full-stack-engineer"
              >Nimbus (YC W21) Is Hiring Founding Engineer to Make Datadog
              Affordable Again</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 12:00:18</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39826315">
          <h3>
            <a class="item" href="https://github.com/incentius-foss/WhatTheDuck"
              >Show HN: WhatTheDuck – open-source, in-browser SQL on CSV
              files</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 10:55:49</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39826315"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>Please provide feedback/issues/pull requests.</p>
            </div>
          </section>
        </section>
        <section id="39825901">
          <h3>
            <a
              class="item"
              href="https://www.copetti.org/writings/consoles/sega-saturn/"
              >Sega Saturn Architecture – A practical analysis</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 09:51:42</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39825901"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39825033">
          <h3>
            <a
              class="item"
              href="https://twitter.com/sentdefender/status/1772514015790477667"
              >The Francis Scott Key Bridge in Baltimore, Maryland Has
              Collapsed</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 07:25:09</span
              ><span class="points-container"
                >Points: <span class="points">683</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39825033"
                  >Comments</a
                ><span class="descendants">: 506</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39824611">
          <h3>
            <a
              class="item"
              href="https://remyhax.xyz/posts/golang-packet-editing/"
              >Packet-Editing Games in Golang (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 05:52:12</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39824611"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39824589">
          <h3>
            <a class="item" href="https://www.fluffytutor.com"
              >Show HN: Learn Any Language with an AI Tutor at Your Own Pace</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 05:45:17</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39824589"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39824478">
          <h3>
            <a class="item" href="https://github.com/sugawarayuuta/charcoal"
              >Show HN: Charcoal – Faster utf8.Valid using multi-byte processing
              without SIMD</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 05:20:13</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39824478"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39824335">
          <h3>
            <a class="item" href="https://echochess.com"
              >Chess puzzle, but you are what you capture</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 04:46:01</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39824335"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39824191">
          <h3>
            <a
              class="item"
              href="https://finance.yahoo.com/news/canva-acquires-affinity-design-suite-004813952.html"
              >Canva has acquired Affinity in an effort to compete with Adobe</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 04:05:45</span
              ><span class="points-container"
                >Points: <span class="points">260</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39824191"
                  >Comments</a
                ><span class="descendants">: 183</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39824019">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2403.16341"
              >Nonlinearsolve.jl: Fast and Robust Solvers for Nonlinear
              Equations in Julia</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 03:27:56</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39824019"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39823373">
          <h3>
            <a class="item" href="https://github.com/omriharel/deej"
              >Deej: An open-source hardware volume mixer for Windows and
              Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 01:29:07</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39823373"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39823282">
          <h3>
            <a
              class="item"
              href="https://www.jneurosci.org/content/early/2024/03/07/JNEUROSCI.1231-23.2024"
              >Lifelong Disadvantage: How Socioeconomics Affect Brain
              Function</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 01:14:39</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39823282"
                  >Comments</a
                ><span class="descendants">: 196</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39823146">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/tulips-netherlands-robot-technology-46ec590b882188ee6d7428df8f04bb9e"
              >An AI robot is destroying sick tulips in Dutch bulb fields</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-26 @ 00:57:44</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39823146"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39822184">
          <h3>
            <a
              class="item"
              href="https://thechipletter.substack.com/p/googles-first-tpu-architecture"
              >Google's First Tensor Processing Unit: Architecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-25 @ 22:56:37</span
              ><span class="points-container"
                >Points: <span class="points">320</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39822184"
                  >Comments</a
                ><span class="descendants">: 171</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39819599">
          <h3>
            <a
              class="item"
              href="https://comsec.ethz.ch/research/dram/zenhammer/"
              >ZenHammer: Rowhammer attacks on AMD Zen-based platforms</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-25 @ 18:20:05</span
              ><span class="points-container"
                >Points: <span class="points">311</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39819599"
                  >Comments</a
                ><span class="descendants">: 124</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39813978">
          <h3>
            <a
              class="item"
              href="https://esoteric.codes/blog/calculating-with-jss-undefined"
              >Computing with JavaScript's Undefined (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-25 @ 08:52:44</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39813978"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39813724">
          <h3>
            <a
              class="item"
              href="https://blogs.gnome.org/rbultje/2017/07/14/writing-x86-simd-using-x86inc-asm/"
              >Writing x86 SIMD using x86inc.asm (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-25 @ 08:04:59</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39813724"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39813679">
          <h3>
            <a
              class="item"
              href="https://lcamtuf.substack.com/p/radios-how-do-they-work"
              >Radios, how do they work?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-25 @ 07:56:09</span
              ><span class="points-container"
                >Points: <span class="points">471</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39813679"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39813626">
          <h3>
            <a
              class="item"
              href="https://jornvernee.github.io/hotspot/jit/2023/08/18/debugging-jit.html"
              >Notes on debugging HotSpot's JIT compilation (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-25 @ 07:48:34</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39813626"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
