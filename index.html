<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41575908">
          <h3>
            <a
              class="item"
              href="https://old.reddit.com/r/CharteredAccountants/comments/1fj08v9/ey_employee_died_of_work_pressure"
              >26-Year-Old EY Employee Succumbs to 'Work Stress' Four Months
              After Joining</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-18 @ 04:50:22</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41575908"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41575323">
          <h3>
            <a class="item" href="https://github.com/zlwaterfield/scramble"
              >Scramble: Open-Source Alternative to Grammarly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-18 @ 02:59:34</span
              ><span class="points-container"
                >Points: <span class="points">198</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41575323"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41575300">
          <h3>
            <a
              class="item"
              href="https://www.tomshardware.com/pc-components/ram/asgard-launches-worlds-first-ddr5-9600-cudimms-promising-ddr5-10000-modules-are-on-the-way"
              >Asgard launches world's first DDR5-9600 DIMMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-18 @ 02:56:06</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41575300"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41574844">
          <h3>
            <a
              class="item"
              href="https://timculpan.substack.com/p/apple-mobile-processors-are-now-made"
              >Apple mobile processors are now made in America by TSMC</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-18 @ 01:38:01</span
              ><span class="points-container"
                >Points: <span class="points">722</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41574844"
                  >Comments</a
                ><span class="descendants">: 301</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41574700">
          <h3>
            <a
              class="item"
              href="https://sigwait.org/~alex/blog/2023/07/10/yqh6fX.html"
              >Exploring pre-1990 versions of wc(1) (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-18 @ 01:16:48</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41574700"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41574586">
          <h3>
            <a
              class="item"
              href="https://www.emergetools.com/careers/jobs/senior-frontend-engineer"
              >Emerge Tools (YC W21) is hiring a senior front end engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-18 @ 01:00:42</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41573866">
          <h3>
            <a class="item" href="https://github.com/ekzhang/rustpad"
              >Rustpad is an efficient and minimal open-source collaborative
              text editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 23:09:36</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41573866"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41573550">
          <h3>
            <a
              class="item"
              href="https://www.mcgill.ca/oss/article/medical-critical-thinking-technology/reports-death-dental-cavities-are-greatly-exaggerated"
              >Reports of the death of dental cavities are greatly
              exaggerated</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 22:26:58</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41573550"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41573034">
          <h3>
            <a
              class="item"
              href="https://investors.23andme.com/news-releases/news-release-details/independent-directors-23andme-resign-board/"
              >Independent directors of 23andMe resign from board</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 21:31:49</span
              ><span class="points-container"
                >Points: <span class="points">417</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41573034"
                  >Comments</a
                ><span class="descendants">: 195</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41571971">
          <h3>
            <a
              class="item"
              href="https://shikaan.github.io/assembly/x86/guide/2024/09/08/x86-64-introduction-hello.html"
              >A Friendly Introduction to Assembly for High-Level Programmers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 19:56:39</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41571971"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41571911">
          <h3>
            <a
              class="item"
              href="https://conversableeconomist.com/2024/09/12/the-double-irish-dutch-sandwich-end-of-a-tax-evasion-strategy/"
              >The Double Irish Dutch Sandwich: End of a Tax Evasion Strategy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 19:51:04</span
              ><span class="points-container"
                >Points: <span class="points">200</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41571911"
                  >Comments</a
                ><span class="descendants">: 169</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41571862">
          <h3>
            <a
              class="item"
              href="https://www.obdev.at/blog/warning-macos-sequoia-15-may-bypass-dns-encryption/"
              >macOS Sequoia 15 may bypass DNS encryption</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 19:46:05</span
              ><span class="points-container"
                >Points: <span class="points">448</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41571862"
                  >Comments</a
                ><span class="descendants">: 141</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41570708">
          <h3>
            <a class="item" href="https://www.graalvm.org/python/"
              >GraalPy – A high-performance embeddable Python 3 runtime for
              Java</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 18:04:31</span
              ><span class="points-container"
                >Points: <span class="points">249</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41570708"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41570163">
          <h3>
            <a
              class="item"
              href="https://jeremymorrell.dev/blog/minimal-js-tracing/"
              >OpenTelemetry Tracing in &amp;lt; 200 lines of code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 17:21:41</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41570163"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41569557">
          <h3>
            <a class="item" href="https://github.com/pencilresearch/OpenScanner"
              >Show HN: Open Scanner, an open-source document scanning app for
              iPhone</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 16:36:23</span
              ><span class="points-container"
                >Points: <span class="points">211</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41569557"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41569544">
          <h3>
            <a class="item" href="https://kovenyu.com/wonderworld/"
              >WonderWorld: Interactive 3D Scene Generation from a Single
              Image</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 16:35:29</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41569544"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41568343">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41568343"
              >Launch HN: Marblism (YC W24) – Generate full-stack web apps from
              a prompt</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 15:04:09</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41568343"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
            <div class="text">
              <p>
                We are Cyril &amp; Ulric and are building Marblism (<a
                  href="https://marblism.com"
                  >https://marblism.com</a
                >), an LLM-based dev platform to generate and iterate on
                full-stack web apps.
              </p>
              <p>
                Here’s a demo video that goes from a comment on Twitter to a
                working app in 10 minutes:
                <a href="https://www.youtube.com/watch?v=TapOPO-Gv20"
                  >https://www.youtube.com/watch?v=TapOPO-Gv20</a
                >.
              </p>
              <p>
                Marblism started when we realized that much of the code we write
                for web apps is just slightly modified boilerplate: similar
                login flows, dashboards, API integrations, CRUD operations, etc.
                While AI tools are helpful, they fall short in delivering a
                well-architected codebase. The idea of Marblism is to combine
                the best of both worlds: a solid boilerplate, customized and
                enhanced with AI.
              </p>
              <p>Here's how it works:</p>
              <p>
                <i>Generate your app</i> - Describe your product, and the AI
                will build your data model. We create a NextJS app with auth,
                custom CRUDs, permissions, payment, emails. The AI then
                generates your front-end pages.
              </p>
              <p>
                <i>Test and improve your app</i> - Now that your app is set up,
                use our online workspace to test your app and add more complex
                features via an AI Chat or directly yourself in the VSCode
                editor.
              </p>
              <p>
                <i>Go live</i> - Once you’re happy with your app, deploy it in
                production in one click.
              </p>
              <p>
                Here are some examples of apps generated on Marblism in couple
                of hours of prompting:
              </p>
              <p>
                Find and validate startup ideas:
                <a href="https://www.muckbrass.com/"
                  >https://www.muckbrass.com/</a
                >
              </p>
              <p>
                A design system directory:
                <a href="https://awesomedesignsystem.app.io"
                  >https://awesomedesignsystem.app.io</a
                >
              </p>
              <p>
                AI-Personalized candle:
                <a href="https://www.scent-a-scene.com/"
                  >https://www.scent-a-scene.com/</a
                >
              </p>
              <p>
                Marblism currently generates web apps like SaaS, marketplaces,
                and social networks. It doesn't support Chrome extensions or
                mobile apps, and it’s not really for small games like
                Snake/Tetris.
              </p>
              <p>
                The vision is to add more tech stacks later this year and enable
                people to create their own templates/tech stack that the AI can
                customize.
              </p>
              <p>
                We’re really excited to share this with you and we'd love to
                hear your thoughts on the potential directions we can take this
                product.
              </p>
            </div>
          </section>
        </section>
        <section id="41567299">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/world/middle-east/dozens-hezbollah-members-wounded-lebanon-when-pagers-exploded-sources-witnesses-2024-09-17/"
              >Hezbollah pager explosions kill several people in Lebanon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 13:15:57</span
              ><span class="points-container"
                >Points: <span class="points">845</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41567299"
                  >Comments</a
                ><span class="descendants">: 1852</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41567262">
          <h3>
            <a class="item" href="https://github.com/phiresky/ripgrep-all"
              >Rga: Ripgrep, but also search in PDFs, E-Books, Office documents,
              zip, etc.</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 13:11:31</span
              ><span class="points-container"
                >Points: <span class="points">412</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41567262"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41566446">
          <h3>
            <a
              class="item"
              href="https://mathforlove.com/2024/09/the-centrality-of-stupidity-in-mathematics/"
              >The centrality of stupidity in mathematics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-17 @ 11:15:42</span
              ><span class="points-container"
                >Points: <span class="points">249</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41566446"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41556295">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/why-this-great-mathematician-wanted-a-heptadecagon-on-his-tombstone/"
              >Why Gauss wanted a heptadecagon on his tombstone</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 14:14:34</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41556295"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41556088">
          <h3>
            <a class="item" href="https://github.com/noperator/sol"
              >Show HN: sol – A de-minifier for shell programs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 13:53:09</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41556088"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                - Choose which transformations you want (break on pipe, args,
                redirect, whatever)
              </p>
              <p>
                - "Peeks" into stringified commands (think xargs, parallel) and
                formats those, too
              </p>
              <p>- Auto-breaks at a given width (e.g., 80 characters)</p>
              <p>
                - Shows you non-standard aliases, functions, files, etc. that
                you might not have in your shell environment
              </p>
              <p>
                - Breaks up long jq lines with jqfmt because—let's be
                honest—they're getting out of hand
              </p>
              <p>
                As a security researcher and tool developer, I often encounter
                (or create) long pipelined Bash commands. While quick and
                powerful, they can be a nightmare to read or debug. I created
                sol to make it easier to understand and share these commands
                with others.
              </p>
            </div>
          </section>
        </section>
        <section id="41554193">
          <h3>
            <a class="item" href="https://github.com/react-R/reactR"
              >React for R</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 09:11:19</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41554193"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41553875">
          <h3>
            <a class="item" href="https://storm.genie.stanford.edu/"
              >STORM: Get a Wikipedia-like report on your topic</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 08:12:51</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41553875"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41550211">
          <h3>
            <a class="item" href="https://www.brailleinstitute.org/freefont/"
              >Atkinson Hyperlegible Font</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 20:42:03</span
              ><span class="points-container"
                >Points: <span class="points">495</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41550211"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41549102">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/07/29/windows_start_menu_port/"
              >The port of the Windows 95 Start Menu was not all it seemed</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 17:56:46</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41549102"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41548547">
          <h3>
            <a
              class="item"
              href="https://www.quantitativo.com/p/the-devil-is-in-the-details"
              >Implement algorithms that minimize slippage</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 16:45:20</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41548547"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41534551">
          <h3>
            <a
              class="item"
              href="https://kottke.org/24/09/the-lego-great-ball-contraption"
              >The Lego Great Ball Contraption</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-13 @ 19:53:47</span
              ><span class="points-container"
                >Points: <span class="points">216</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41534551"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41532516">
          <h3>
            <a
              class="item"
              href="https://www.thisiscolossal.com/2024/09/john-peralta-exploded-technology/"
              >John Peralta Explodes Historic Technology into Three-Dimensional
              Diagrams</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-13 @ 16:08:20</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41532516"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41528598">
          <h3>
            <a class="item" href="http://www.technoblogy.com/show?4WX8"
              >Scrolling Text Display</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-13 @ 06:40:08</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41528598"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
