<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37125628">
          <h3>
            <a
              class="item"
              href="https://www.bezosearthfund.org/news-and-insights/announcing-400-million-greening-americas-cities"
              >Bezos Earth Fund Grants $400M for Greening Underserved Urban U.S.
              Communities</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 19:25:01</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37125628"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37125561">
          <h3>
            <a
              class="item"
              href="https://www.getlago.com/blog/time-zone-nightmares"
              >Navigating the timezone nightmare in product development</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 19:19:57</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37125561"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37125458">
          <h3>
            <a
              class="item"
              href="https://www.michiganmedicine.org/health-lab/study-shows-dementia-more-common-older-adults-vision-issues"
              >Study shows dementia more common in older adults with vision
              issues</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 19:13:12</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37125458"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37125244">
          <h3>
            <a
              class="item"
              href="https://sixfeetup.com/company/news/80-talks-and-tutorials-from-2023-python-web-conference-released"
              >Videos from Python Web Conf 2023 Available on YouTube</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 18:59:37</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37125244"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37125118">
          <h3>
            <a class="item" href="https://github.com/normal-computing/outlines"
              >Show HN: LLMs can generate valid JSON 100% of the time</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 18:52:54</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37125118"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
            <div class="text">
              <p>
                Recently we came up with a fast way to generate text that
                matches a regex (<a
                  href="https://blog.normalcomputing.ai/posts/2023-07-27-regex-guided-generation/regex-guided-generation.html"
                  >https://blog.normalcomputing.ai/posts/2023-07-27-regex-guide...</a
                >). The basic idea is simple: regular expressions have an
                equivalent Deterministic-Finite Automaton (DFA) representation.
                We can transform this DFA into a generative model: in each state
                we get a list of symbols which correspond to completions that
                partially match the regular expression. We mask the other
                symbols in the logits returned by a large language model, sample
                a new symbol and move to the next state. The subtelty is that
                language models work with tokens, not symbols, so we derive a
                new FSM whose alphabet is the model's vocabulary. We can do this
                in only one pass over the vocabulary.
              </p>
              <p>
                Generating the token masks thus only requires a dictionary
                lookup at each state. Our method blows other libraries like
                Microsoft's guidance out of the water.
              </p>
              <p>
                From there it was only a small leap to be able to generate text
                that follows a JSON schema (<a href="https://json-schema.org/"
                  >https://json-schema.org/</a
                >), or is parseable into a Pydantic model (<a
                  href="https://docs.pydantic.dev/latest/usage/models/"
                  >https://docs.pydantic.dev/latest/usage/models/</a
                >). The method works with union types, optional types, nested
                schemas, arrays, everything. It is guaranteed that the output is
                parseable.
              </p>
              <p>
                I think it's cool, and I've spent a lot of time watching even
                tiny models output valid JSON over the weekend. Hope you will
                too.
              </p>
              <p>
                I look forward to feedback, bug reports, feature requests and
                discussions!
              </p>
              <p>
                Edit: Link to our pre-print explaining the method and how this
                can be extended to generate text that follows a Context-Free
                Grammar
                <a href="https://arxiv.org/abs/2307.09702"
                  >https://arxiv.org/abs/2307.09702</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="37124424">
          <h3>
            <a class="item" href="https://github.com/adbar/trafilatura"
              >Trafilatura: Python tool to gather text on the Web</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 18:10:19</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37124424"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37124373">
          <h3>
            <a
              class="item"
              href="https://www.innoq.com/en/news/2023/08/stefan-tilkov-english/"
              >We mourn the loss of Stefan Tilkov</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 18:06:15</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37124373"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37124187">
          <h3>
            <a
              class="item"
              href="https://stackdiary.com/the-data-of-760000-discord-io-users-was-put-up-for-sale-on-the-darknet/"
              >Discord.io breached, 760k user accounts for sale on darknet</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 17:52:00</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37124187"
                  >Comments</a
                ><span class="descendants">: 93</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37124059">
          <h3>
            <a
              class="item"
              href="https://mathoverflow.net/questions/374089/does-there-exist-a-complete-implementation-of-the-risch-algorithm"
              >Does there exist a complete implementation of the Risch
              algorithm?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 17:43:40</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37124059"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37123961">
          <h3>
            <a
              class="item"
              href="https://chrome.google.com/webstore/detail/anonymize-hn/ofclpgeijealmdamdfecbdccpjjoijnf"
              >Show HN: Anonymize HN – a Chrome extension to anonymize Hacker
              News users</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 17:36:00</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37123961"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
            <div class="text">
              I wrote a small Chrome extension that allows the user to replace
              all usernames on Hacker News with either the string `anonymous` or
              a deterministic hashed value.
            </div>
          </section>
        </section>
        <section id="37123792">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/jwst-spots-giant-black-holes-all-over-the-early-universe-20230814/"
              >JWST spots giant black holes all over the early universe</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 17:26:15</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37123792"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37123755">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/climate-environment/2023/08/14/youths-win-montana-climate-trial/"
              >Judge rules in favor of Montana youths in landmark climate
              decision</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 17:23:37</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37123755"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37123572">
          <h3>
            <a
              class="item"
              href="https://www.darkreading.com/analytics/following-pushback-zoom-says-it-won-t-use-customer-data-to-train-ai-models"
              >Following pushback, Zoom says it won't use customer data to train
              AI models</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 17:09:15</span
              ><span class="points-container"
                >Points: <span class="points">260</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37123572"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37123455">
          <h3>
            <a class="item" href="https://www.easypost.com/careers"
              >EasyPost (YC S13) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 17:01:29</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37123155">
          <h3>
            <a class="item" href="https://www.parkytowers.me.uk/thin/"
              >ParkyTowers: Thin Clients Laid Bare</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 16:44:05</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37123155"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37122871">
          <h3>
            <a class="item" href="https://go.dev/blog/compat"
              >Backward Compatibility, Go 1.21, and Go 2</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 16:22:24</span
              ><span class="points-container"
                >Points: <span class="points">239</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37122871"
                  >Comments</a
                ><span class="descendants">: 180</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37122064">
          <h3>
            <a class="item" href="https://github.com/epsilla-cloud/vectordb"
              >Show HN: Epsilla – Open-source vector database with low query
              latency</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 15:21:40</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37122064"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/epsilla-cloud/vectordb"
                >https://github.com/epsilla-cloud/vectordb</a
              >), an open-source, self-hostable vector database for semantic
              similarity search that specializes in low query latency.
              <p>
                When do we need a vector database? For example, GPT-3.5 has a
                16k context window limit. If we want to let it answer a question
                about a 300 page book, we cannot put the whole book content into
                the context. We have to choose the sections of the book that are
                most relevant to the question. Vector database is specialized at
                ranking and picking the most relevant content from a large pool
                of documents based on their semantic similarity.
              </p>
              <p>
                Most vector databases utilize hierarchical navigational small
                world (HNSW) for indexing the vectors for high precision vector
                search, and its latency significantly degrades when the
                precision target is higher than 95%.
              </p>
              <p>
                At a previous company, we worked on building the parallel graph
                traversal engine. We realized that the bottleneck of HNSW
                performance is because there are too many sequential traversal
                steps that don't fully leverage multi-core CPU computation
                resources. After some research, we found that there are
                algorithms such as SpeedANN that are targeting this problem,
                which is not leveraged by industry yet. So we built the Epsilla
                vector database to turn the research into a production system.
              </p>
              <p>
                With Epsilla, we shoot for 10x lower vector search latency
                compared to HNSW based vector databases. We did an initial
                benchmark against the top open source vector databases:
                <a
                  href="https://medium.com/@richard_50832/benchmarking-epsilla-with-some-of-the-top-vector-databases-543e2b7708e5"
                  >https://medium.com/@richard_50832/benchmarking-epsilla-with-...</a
                >
              </p>
              <p>
                We provide a Docker image for you to install Epsilla backend
                locally, and provide a Python client and a JavaScript client to
                connect and interact with it.
              </p>
              <p>Quickstart:</p>
              <p></p>
              <pre><code>      docker pull epsilla/vectordb

      docker run --pull=always -d -p 8888:8888 epsilla/vectordb

      pip install pyepsilla

      git clone https://github.com/epsilla-cloud/epsilla-python-client.git

      cd examples

      python hello_epsilla.py

</code></pre>
              We just started a month ago. We'd love to hear what you think, and
              more importantly, what you wish to see in the future. We are
              thinking about a serverless vector database on cloud with a
              consumption based pricing model, and we are eager to get your
              feedback.
            </div>
          </section>
        </section>
        <section id="37122006">
          <h3>
            <a class="item" href="https://dashbit.co/blog/why-the-dot"
              >Elixir – Why the dot when calling anonymous functions?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 15:16:43</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37122006"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37121501">
          <h3>
            <a class="item" href="https://yakshav.es/non-thoughts-on-the-osi/"
              >Non-Thoughts on the Open Source Initiative</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 14:34:19</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37121501"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37121180">
          <h3>
            <a
              class="item"
              href="https://abseil.io/resources/swe-book/html/toc.html"
              >Software Engineering at Google (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 14:06:09</span
              ><span class="points-container"
                >Points: <span class="points">259</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37121180"
                  >Comments</a
                ><span class="descendants">: 262</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37120967">
          <h3>
            <a
              class="item"
              href="https://claytonwramsey.github.io/2023/08/14/dumpster.html"
              >I built a garbage collector for a language that doesn’t need
              one</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 13:48:02</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37120967"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37120372">
          <h3>
            <a
              class="item"
              href="https://admiralcloudberg.medium.com/tears-in-the-rain-the-2002-%C3%BCberlingen-midair-collision-591232d0c51e"
              >The 2002 Überlingen midair collision</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 12:41:33</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37120372"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37119942">
          <h3>
            <a class="item" href="https://github.com/dnakov/little-rat"
              >Show HN: Little Rat – Chrome extension monitors network calls of
              all extensions</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 11:49:59</span
              ><span class="points-container"
                >Points: <span class="points">262</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37119942"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
            <div class="text">
              <p>
                I needed a way to monitor network calls made by chrome
                extensions so I made a small extension.
              </p>
              <p>
                You can install it by dropping the zip or crx into the
                extensions page. It'll be on the chrome store whenever/if it
                gets through the review.
              </p>
              <p>Hopefully it's useful to others.</p>
              <p>
                <a href="https://github.com/dnakov/little-rat"
                  >https://github.com/dnakov/little-rat</a
                >
              </p>
              <p>
                <a href="https://twitter.com/dnak0v"
                  >https://twitter.com/dnak0v</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="37119311">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37119311"
              >Launch HN: Serra (YC S23) – Source-available, Python-based dbt
              alternative</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 10:13:16</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37119311"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/Serra-Technologies/serra"
                >https://github.com/Serra-Technologies/serra</a
              >, and our docs are here:
              <a href="https://docs.serra.io/documentation/"
                >https://docs.serra.io/documentation/</a
              >.
              <p>
                I stumbled into this idea as a data engineer for Disney+’s
                subscriptions team. We were “firefighters for data,” ready to
                debug huge pipelines that always crashed and burned. The worst
                part of my job at Disney+ was the graveyard on-call rotations,
                where pagers from 12am to 5am were guaranteed, and you'd have to
                dig through thousands of lines of someone else’s SQL. SQL is
                long-winded—1000 lines of SQL can often be summarized with 10
                key transforms. We take this SQL and summarize those transforms
                with reusable, testable, scalable Spark objects.
              </p>
              <p>
                Serra is written in PySpark and modularizes every component of
                ETL through Spark objects. Similar to dbt, we apply software
                engineering best practices to data, but we aim to do it not just
                with transformations, but with data connectors as well. We
                accomplish this with a configuration YAML file—the idea is if we
                have a pipeline with said 1000 line SQL script that is using
                third-party connectors, we can summarize all of this into a
                12-block config file that gives easy high-level overhead and
                debugging capabilities—10 blocks for the transforms and 2 for
                the in-house connectors. Then, we can add tests and custom
                alerts to each of these objects/blocks so that we know where
                exactly the pipeline breaks and why.
              </p>
              <p>
                We are open-source to make it easy to customize Serra to
                whatever flavor you like with custom transformers/connectors.
                The connectors we support OOB are Snowflake, AWS, BigQuery, and
                Databricks and are adding more based on feedback. The transforms
                we support include mapping, pivoting, joining, truncating,
                imputing, and more. We’re doing our best to make Serra as easy
                to use as possible. If you have docker installed, you can run
                this docker command to instantly get setup with a Serra
                environment to create modular pipelines.
              </p>
              <p>
                We wrap up our functionality with a command line tool that lets
                you: - create your ETL pipelines, test them locally with a
                subset of your data, and deploy them to the cloud (currently we
                only support Databricks, but will soon support others and plan
                to host our own clusters too). It also has an experimental
                “translate” feature which is still a bit finicky, but the idea
                is to take your existing SQL script and get suggestions on how
                you can chunk up and modularize your job with our config. It’s
                still just a super early suggestion feature that is definitely
                not fleshed out, but we think it’s a cool approach.
              </p>
              <p>
                Here’s a quick demo going through retooling a long-winded SQL
                script to an easily maintainable, scalable ETL job:
                <a
                  href="https://www.loom.com/share/acc633c0ec03455e9e8837f5c3db3165?sid=341c529c-1c4a-41b2-85c4-ca8589ff965a"
                  >https://www.loom.com/share/acc633c0ec03455e9e8837f5c3db3165?...</a
                >. (docker command: docker run --mount
                type=bind,source="$(pwd)",target=/app -it serraio/serra
                /bin/bash)
              </p>
              <p>
                We don’t see or store any of your data—we’re a transit layer
                that helps you write ETL jobs that you can send to your
                warehouse of choice with your actual data. Right now we are
                helping customers retool their messy data pipelines and plan to
                monetize by hosting Serra on the cloud, charging if you run the
                job on our own clusters, and per API call on our translate
                feature (once it’s mature).
              </p>
              <p>
                We’re super excited to launch this to Hacker News. We’d love to
                hear what you think. Thanks in advance!
              </p>
            </div>
          </section>
        </section>
        <section id="37118883">
          <h3>
            <a class="item" href="https://addyosmani.com/blog/write-learn/"
              >Writing about what you learn pushes you to understand topics
              better</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 08:58:03</span
              ><span class="points-container"
                >Points: <span class="points">535</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37118883"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37118195">
          <h3>
            <a
              class="item"
              href="https://netflixtechblog.com/migrating-netflix-to-graphql-safely-8e1e4d4f1e72?gi=6070ab8bb55c"
              >Migrating Netflix to GraphQL Safely</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 06:48:53</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37118195"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37117818">
          <h3>
            <a class="item" href="https://pubmed.ncbi.nlm.nih.gov/1130736/"
              >The anesthetic effect of air at atmospheric pressure</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-14 @ 05:37:38</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37117818"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37115614">
          <h3>
            <a
              class="item"
              href="https://neugierig.org/software/blog/2023/08/x86-x64-aarch64.html"
              >Emulating x86 on X64 on Aarch64</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-13 @ 23:20:05</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37115614"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37107346">
          <h3>
            <a
              class="item"
              href="https://simon.lc/the-history-of-tetris-randomizers"
              >Tetris Randomizers (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-13 @ 06:59:15</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37107346"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37082304">
          <h3>
            <a
              class="item"
              href="https://phoboslab.org/log/2023/08/rewriting-wipeout"
              >Rewriting wipEout</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-10 @ 21:58:31</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37082304"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
