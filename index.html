<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46870751">
          <h3>
            <a
              class="item"
              href="https://forums.FreeBSD.org/threads/kde-plasma-login-manager-wont-support-systemd-free-linux-or-bsd-systems.101393/"
              >KDE Plasma Login Manager Won't Support systemd-Free Linux or BSD
              Systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 13:32:06</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46870751"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46870113">
          <h3>
            <a
              class="item"
              href="https://www.pnas.org/doi/10.1073/pnas.2525498123"
              >Lead in archived hair documents a decline in lead exposure to
              humans after EPA</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 12:23:12</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46870113"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46869901">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/emerge-career/jobs/omqT34S-founding-product-designer"
              >Emerge Career (YC S22) Is Hiring a Founding Product Designer</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 12:00:23</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46868759">
          <h3>
            <a
              class="item"
              href="https://lars.ingebrigtsen.no/2026/02/02/whats-up-with-all-those-equals-signs-anyway/"
              >What's up with all those equals signs anyway?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 09:37:40</span
              ><span class="points-container"
                >Points: <span class="points">288</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46868759"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46868479">
          <h3>
            <a class="item" href="https://safe-now.live"
              >Show HN: Safe-now.live – Ultra-light emergency info site
              (&amp;lt;10KB)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 09:06:04</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46868479"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=46494734"
                >https://news.ycombinator.com/item?id=46494734</a
              >) , I built safe-now.live – a text-first emergency info site for
              USA and Canada. No JavaScript, no images, under 10KB. Pulls live
              FEMA disasters, NWS alerts, weather, and local resources. This is
              my first live website ever so looking for critical feedback on the
              website. Please feel free to look around.
              <p><a href="https://safe-now.live">https://safe-now.live</a></p>
            </div>
          </section>
        </section>
        <section id="46868318">
          <h3>
            <a class="item" href="https://github.com/KrystianJonca/lnai"
              >LNAI – Define AI coding tool configs once, sync to Claude,
              Cursor, Codex, etc.</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 08:45:57</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46868318"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46867947">
          <h3>
            <a class="item" href="https://github.com/whispem/minikv"
              >Show HN: Minikv – Distributed key-value and object store in Rust
              (Raft, S3 API)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 08:00:19</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46867947"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm Emilie, I have a literature background (which explains the
                well-written documentation!) and I've been learning Rust and
                distributed systems by building minikv over the past few months.
                It recently got featured in Programmez! magazine:
                <a
                  href="https://www.programmez.com/actualites/minikv-un-key-value-store-distribue-en-rust-construit-en-public-38861"
                  >https://www.programmez.com/actualites/minikv-un-key-value-st...</a
                >
              </p>
              <p>
                minikv is an open-source, distributed storage engine built for
                learning, experimentation, and self-hosted setups. It combines a
                strongly-consistent key-value database (Raft), S3-compatible
                object storage, and basic multi-tenancy.
              </p>
              <p>Features/highlights:</p>
              <p>
                - Raft consensus with automatic failover and sharding -
                S3-compatible HTTP API (plus REST/gRPC APIs) - Pluggable storage
                backends: in-memory, RocksDB, Sled - Multi-tenant: per-tenant
                namespaces, role-based access, quotas, and audit - Metrics
                (Prometheus), TLS, JWT-based API keys - Easy to deploy (single
                binary, works with Docker/Kubernetes)
              </p>
              <p>Quick demo (single node):</p>
              <p>
                ```bash git clone
                <a href="https://github.com/whispem/minikv.git"
                  >https://github.com/whispem/minikv.git</a
                >
                cd minikv cargo run --release -- --config config.example.toml
                curl localhost:8080/health/ready
              </p>
              <p>
                # S3 upload + read curl -X PUT localhost:8080/s3/mybucket/hello
                -d "hi HN" curl localhost:8080/s3/mybucket/hello
              </p>
              <p>
                Docs, cluster setup, and architecture details are in the repo.
                I’d love to hear feedback, questions, ideas, or your stories
                running distributed infra in Rust!
              </p>
              <p>
                Repo:
                <a href="https://github.com/whispem/minikv"
                  >https://github.com/whispem/minikv</a
                >
                Crate:
                <a href="https://crates.io/crates/minikv"
                  >https://crates.io/crates/minikv</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46866544">
          <h3>
            <a
              class="item"
              href="https://krzysztofjankowski.com/floppinux/floppinux-2025.html"
              >Floppinux – An Embedded Linux on a Single Floppy, 2025 Edition</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 04:33:25</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46866544"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46864498">
          <h3>
            <a
              class="item"
              href="https://alignment.anthropic.com/2026/hot-mess-of-ai/"
              >How does misalignment scale with model intelligence and task
              complexity?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 00:28:06</span
              ><span class="points-container"
                >Points: <span class="points">214</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46864498"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46863357">
          <h3>
            <a class="item" href="https://borretti.me/fiction/julia">Julia</a>
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 22:57:59</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46863357"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46863162">
          <h3>
            <a
              class="item"
              href="https://www.frommers.com/tips/airfare/the-tsa-new-45-fee-to-fly-without-id-is-illegal-says-regulatory-expert/"
              >The TSA's New $45 Fee to Fly Without ID Is Illegal</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 22:48:10</span
              ><span class="points-container"
                >Points: <span class="points">509</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46863162"
                  >Comments</a
                ><span class="descendants">: 572</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46863112">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2026/02/court-orders-restart-of-all-us-offshore-wind-construction/"
              >Court orders restart of all US offshore wind power
              construction</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 22:45:04</span
              ><span class="points-container"
                >Points: <span class="points">437</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46863112"
                  >Comments</a
                ><span class="descendants">: 308</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46862170">
          <h3>
            <a
              class="item"
              href="https://www.spacex.com/updates#xai-joins-spacex"
              >xAI joins SpaceX</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 21:51:22</span
              ><span class="points-container"
                >Points: <span class="points">783</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46862170"
                  >Comments</a
                ><span class="descendants">: 1738</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46861842">
          <h3>
            <a
              class="item"
              href="https://www.githubstatus.com?todayis=2026-02-02"
              >GitHub experience various partial-outages/degradations</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 21:28:16</span
              ><span class="points-container"
                >Points: <span class="points">236</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46861842"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46861313">
          <h3>
            <a
              class="item"
              href="https://forums.ankiweb.net/t/ankis-growing-up/68610"
              >Anki ownership transferred to AnkiHub</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 20:48:55</span
              ><span class="points-container"
                >Points: <span class="points">475</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46861313"
                  >Comments</a
                ><span class="descendants">: 187</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46859054">
          <h3>
            <a
              class="item"
              href="https://openai.com/index/introducing-the-codex-app/"
              >The Codex App</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 18:02:48</span
              ><span class="points-container"
                >Points: <span class="points">733</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46859054"
                  >Comments</a
                ><span class="descendants">: 549</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46858829">
          <h3>
            <a
              class="item"
              href="https://lists.linuxfromscratch.org/sympa/arc/lfs-announce/2026-02/msg00000.html"
              >Linux From Scratch ends SysVinit support</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 17:45:27</span
              ><span class="points-container"
                >Points: <span class="points">198</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46858829"
                  >Comments</a
                ><span class="descendants">: 278</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46858622">
          <h3>
            <a class="item" href="https://ziglang.org/devlog/2026/#2026-01-31"
              >Zig Libc</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 17:28:19</span
              ><span class="points-container"
                >Points: <span class="points">316</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46858622"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46858577">
          <h3>
            <a class="item" href="https://www.millert.dev/"
              >Todd C. Miller – Sudo maintainer for over 30 years</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 17:25:26</span
              ><span class="points-container"
                >Points: <span class="points">527</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46858577"
                  >Comments</a
                ><span class="descendants">: 266</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46857615">
          <h3>
            <a
              class="item"
              href="https://www.wiz.io/blog/exposed-moltbook-database-reveals-millions-of-api-keys"
              >Hacking Moltbook</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 16:08:36</span
              ><span class="points-container"
                >Points: <span class="points">359</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46857615"
                  >Comments</a
                ><span class="descendants">: 217</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.reuters.com/legal/litigation/moltbook-social-media-site-ai-agents-had-big-security-hole-cyber-firm-wiz-says-2026-02-02/"
                >https://www.reuters.com/legal/litigation/moltbook-social-med...</a
              >
            </div>
          </section>
        </section>
        <section id="46857488">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46857488"
              >Ask HN: Who is hiring? (February 2026)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 16:01:30</span
              ><span class="points-container"
                >Points: <span class="points">287</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46857488"
                  >Comments</a
                ><span class="descendants">: 362</span></span
              >
            </h4>
            <div class="text">
              <i>not</i> an option.
              <p>
                Please only post if you personally are part of the hiring
                company—no recruiting firms or job boards. One post per company.
                If it isn't a household name, explain what your company does.
              </p>
              <p>
                Please only post if you are actively filling a position and are
                committed to replying to applicants.
              </p>
              <p>
                Commenters: please don't reply to job posts to complain about
                something. It's off topic here.
              </p>
              <p>
                Readers: please only email if you are personally interested in
                the job.
              </p>
              <p>
                Searchers: try
                <a href="https://dheerajck.github.io/hnwhoishiring/"
                  >https://dheerajck.github.io/hnwhoishiring/</a
                >,
                <a href="http://nchelluri.github.io/hnjobs/"
                  >http://nchelluri.github.io/hnjobs/</a
                >,
                <a href="https://hnresumetojobs.com"
                  >https://hnresumetojobs.com</a
                >,
                <a href="https://hnhired.fly.dev">https://hnhired.fly.dev</a>,
                <a href="https://kennytilton.github.io/whoishiring/"
                  >https://kennytilton.github.io/whoishiring/</a
                >,
                <a href="https://hnjobs.emilburzo.com"
                  >https://hnjobs.emilburzo.com</a
                >, or this (unofficial) Chrome extension:
                <a
                  href="https://chromewebstore.google.com/detail/hn-hiring-pro/mpfaljjblphnlloddaplgicpkinikjlp"
                  >https://chromewebstore.google.com/detail/hn-hiring-pro/mpfal...</a
                >.
              </p>
              <p>
                Don't miss this other fine thread:
                <i>Who wants to be hired?</i>
                <a href="https://news.ycombinator.com/item?id=46857487"
                  >https://news.ycombinator.com/item?id=46857487</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46855447">
          <h3>
            <a class="item" href="https://neutree.ai/blog/nano-vllm-part-1"
              >Nano-vLLM: How a vLLM-style inference engine works</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 12:52:35</span
              ><span class="points-container"
                >Points: <span class="points">265</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46855447"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46848060">
          <h3>
            <a
              class="item"
              href="https://www.sintef.no/en/latest-news/2026/pretty-soon-heat-pumps-will-be-able-to-store-and-distribute-heat-as-needed/"
              >Pretty soon, heat pumps will be able to store and distribute heat
              as needed</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-01 @ 18:15:40</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46848060"
                  >Comments</a
                ><span class="descendants">: 198</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46843805">
          <h3>
            <a
              class="item"
              href="https://gyrovague.com/2026/02/01/archive-today-is-directing-a-ddos-attack-against-my-blog/"
              >Archive.today is directing a DDoS attack against my blog?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-01 @ 05:11:53</span
              ><span class="points-container"
                >Points: <span class="points">229</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46843805"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46837045">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/collection/phenakistoscopes-1833/"
              >Phenakistoscopes (1833)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 14:36:21</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46837045"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46829029">
          <h3>
            <a class="item" href="https://serjaimelannister.github.io/hn-words/"
              >See how many words you have written in Hacker News comments</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-30 @ 19:54:52</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46829029"
                  >Comments</a
                ><span class="descendants">: 159</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46822177">
          <h3>
            <a class="item" href="https://tamikothiel.com/cm/cm-tshirt.html"
              >The Connection Machine CM-1 "Feynman" T-shirt</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-30 @ 09:10:48</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46822177"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46820142">
          <h3>
            <a
              class="item"
              href="https://www.jeffgeerling.com/blog/2025/4x-faster-network-file-sync-rclone-vs-rsync/"
              >4x faster network file sync with rclone (vs rsync) (2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-30 @ 03:17:32</span
              ><span class="points-container"
                >Points: <span class="points">340</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46820142"
                  >Comments</a
                ><span class="descendants">: 150</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46815995">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/history/50-years-of-the-jetsons-why-the-show-still-matters-43459669/"
              >Why The Jetsons still matters (2012)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 20:19:56</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46815995"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46806346">
          <h3>
            <a class="item" href="http://128.237.157.9/pub/"
              >Carnegie Mellon Unversity Computer Club FTP Server</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 05:59:23</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46806346"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
