<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43196212">
          <h3>
            <a
              class="item"
              href="https://github.com/hemashushu/docker-archlinux-gui"
              >How to run GUI applications directly in containers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 17:04:11</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43196212"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43196207">
          <h3>
            <a class="item" href="https://nroottag.github.io/"
              >Turning a Bluetooth Device into an Apple AirTag Without Root
              Privileges</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 17:03:39</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43196207"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43195724">
          <h3>
            <a
              class="item"
              href="https://physicsworld.com/a/the-muons-magnetic-moment-exposes-a-huge-hole-in-the-standard-model-unless-it-doesnt/"
              >The muon's magnetic moment exposes a hole in the SM – unless it
              doesn't</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 16:14:45</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43195724"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43195702">
          <h3>
            <a
              class="item"
              href="https://www.shadaj.me/writing/distributed-programming-stalled"
              >Distributed Systems Programming Has Stalled</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 16:12:42</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43195702"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43195589">
          <h3>
            <a
              class="item"
              href="https://thewalrus.ca/at-3-a-m-i-turned-to-ai-for-comfort-that-was-my-first-mistake/"
              >At 3 A.m., I Turned to AI for Comfort. That Was My First
              Mistake</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 16:00:31</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43195525">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/diy-muon-tomography"
              >A $100 DIY muon tomographer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 15:55:21</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43195525"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43195516">
          <h3>
            <a class="item" href="https://localthunk.com/blog/solitaire"
              >Solitaire</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 15:54:36</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43195516"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43195308">
          <h3>
            <a class="item" href="http://bit-player.org/2013/who-was-aleph-null"
              >Who was Aleph Null? (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 15:34:34</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43195308"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43194971">
          <h3>
            <a
              class="item"
              href="https://github.com/PragmaticMachineLearning/probly"
              >Show HN: Probly – Spreadsheets, Python, and AI in the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 15:02:39</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43194971"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              <p>
                While there are tools available in this space like TheBricks,
                Probly is a minimalist, open-source solution built with React,
                TypeScript, Next.js, Handsontable, Hyperformula, Apache Echarts,
                OpenAI, and Pyodide. It's still a work in progress, but it's
                already useful for my daily tasks.
              </p>
            </div>
          </section>
        </section>
        <section id="43194538">
          <h3>
            <a
              class="item"
              href="https://fosdem.org/2025/schedule/event/fosdem-2025-6606-imposing-memory-security-in-c/"
              >Imposing memory security in C [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 14:13:04</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43194538"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43194434">
          <h3>
            <a
              class="item"
              href="https://drgblackwell.substack.com/p/time-warp-delayed-choice-quantum"
              >Time Warp: Delayed-choice quantum erasure</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 14:00:21</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43194434"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43193714">
          <h3>
            <a
              class="item"
              href="https://stephenfollows.com/p/harvey-weinstein-thanked-more-than-god"
              >A data analysis of speeches at the Oscars</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 12:23:41</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43193714"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43193553">
          <h3>
            <a class="item" href="https://bitmovin.com/careers/7863755002/"
              >Bitmovin (YC S15) Is Hiring Interns in Software Engineering in
              Austria</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 12:01:37</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43193105">
          <h3>
            <a
              class="item"
              href="https://cutlefish.substack.com/p/tbm-343-we-kind-of-suck-at-that-right"
              >We Kind of Suck at That Right Now</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 10:38:02</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43193105"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43192751">
          <h3>
            <a class="item" href="https://kzakka.com/robopianist/#demo"
              >RoboPianist: Dexterous Piano Playing with Deep Reinforcement
              Learning (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 09:41:23</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43192751"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43190533">
          <h3>
            <a class="item" href="https://github.com/deepseek-ai/DualPipe"
              >DualPipe: Bidirectional pipeline parallelism algorithm</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-27 @ 02:08:53</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43190533"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43189703">
          <h3>
            <a class="item" href="https://bivector.net/">Geometric Algebra</a>
          </h3>
          <section>
            <h4>
              <span>2025-02-26 @ 23:54:17</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43189703"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43188971">
          <h3>
            <a class="item" href="https://jcs.org/2025/02/26/imacg4k"
              >iMac G4(K)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-26 @ 22:25:10</span
              ><span class="points-container"
                >Points: <span class="points">378</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43188971"
                  >Comments</a
                ><span class="descendants">: 152</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43187209">
          <h3>
            <a
              class="item"
              href="https://github.com/vlm-run/vlmrun-cookbook/blob/main/notebooks/01_schema_showcase.ipynb"
              >Replace OCR with Vision Language Models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-26 @ 19:29:37</span
              ><span class="points-container"
                >Points: <span class="points">264</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43187209"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43186406">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43186406"
              >Show HN: I got laid off from Meta and created a minor hit on
              Steam</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-26 @ 18:19:05</span
              ><span class="points-container"
                >Points: <span class="points">1385</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43186406"
                  >Comments</a
                ><span class="descendants">: 314</span></span
              >
            </h4>
            <div class="text">
              <p>
                (my game is Ballionaire:
                <a
                  href="https://store.steampowered.com/news/app/2667120/view/526461473225965590"
                  >https://store.steampowered.com/news/app/2667120/view/5264614...</a
                >)
              </p>
            </div>
          </section>
        </section>
        <section id="43186050">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/1993/02/22/beverly-hills-hotel-paradise-lost"
              >The man who spent forty-two years at the Beverly Hills Hotel pool
              (1993)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-26 @ 17:45:19</span
              ><span class="points-container"
                >Points: <span class="points">251</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43186050"
                  >Comments</a
                ><span class="descendants">: 247</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43185836">
          <h3>
            <a class="item" href="https://yaak.app"
              >Show HN: Yaak – An open source, Git-friendly desktop API
              client</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-26 @ 17:24:51</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43185836"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
            <div class="text">
              <p>
                Having also created Insomnia for a similar purpose, I never
                thought I'd build another API client again. But, after selling
                Insomnia in 2019 and watching it expand into the broader feature
                set of Postman, I was left wanting a simpler tool again. Yaak
                was my answer to that.
              </p>
              <p>
                It's hard to describe how it's better than the 100 other API
                clients, since its main benefit is design, but there are a few
                stand-out features:
              </p>
              <p>
                - Optionally sync data to a local directory as plain-text, for
                use with Git/etc - Build and install plugins for authentication,
                template functions, or generic actions - Support for REST,
                GraphQL, WebSocket, server sent events, and gRPC
              </p>
              <p>
                Yaak requires a license for commercial use but this only applies
                when using the prebuilt binaries. If building from source, a
                license is not required.
              </p>
              <p>
                It's available for Mac, Windows, and Linux and the source is at
                <a href="https://github.com/mountain-loop/yaak"
                  >https://github.com/mountain-loop/yaak</a
                >
              </p>
              <p>I'd love to hear you think!</p>
            </div>
          </section>
        </section>
        <section id="43184291">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=0mCsluv5FXA"
              >TypeScript types can run DOOM [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-26 @ 15:05:02</span
              ><span class="points-container"
                >Points: <span class="points">1212</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43184291"
                  >Comments</a
                ><span class="descendants">: 320</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43183891">
          <h3>
            <a class="item" href="https://github.com/Sahilb315/AtomixDB"
              >Show HN: A Database Written in Golang</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-26 @ 14:28:26</span
              ><span class="points-container"
                >Points: <span class="points">255</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43183891"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
            <div class="text">
              <p>
                Repo link -
                <a href="https://github.com/Sahilb315/AtomixDB"
                  >https://github.com/Sahilb315/AtomixDB</a
                >
              </p>
              <p>Would love to hear your thoughts</p>
            </div>
          </section>
        </section>
        <section id="43174041">
          <h3>
            <a class="item" href="https://github.com/gauge-sh/tach"
              >Show HN: Tach – Visualize and untangle your Python codebase</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-25 @ 16:34:07</span
              ><span class="points-container"
                >Points: <span class="points">236</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43174041"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
            <div class="text">
              <p>
                Tach lets you visualize the architecture of your Python
                codebase, and gives you the tools to incrementally improve it.
                It uses module boundaries to give teams the benefits of
                microservices without the deployment complexity.
              </p>
              <p>
                If your code has been getting tangled up as your team and
                codebase grows, Tach helps you move back in the right direction,
                incrementally and quickly. You can use Tach to incrementally
                adopt a "modular monolith" architecture [1], for better local
                reasoning and smoother feature development.
              </p>
              <p>
                Since our last Show HN (<a
                  href="https://news.ycombinator.com/item?id=41359181"
                  >https://news.ycombinator.com/item?id=41359181</a
                >) we've shipped support for layers, third party dependencies,
                visualizations, and more.
              </p>
              <p>
                Tach is: * Open source (MIT) * completely free * fast (written
                in Rust) * in use by teams at NVIDIA, PostHog, and more.
              </p>
              <p>
                One way Tach differs from existing systems that handle this
                problem (build systems, import linters, etc) is the ability to
                be incrementally adopted. Also, runtime speed.
              </p>
              <p>
                If you struggle with dependencies, onboarding new engineers, or
                a massive codebase, Tach is for you! We built it with developers
                in mind - with clean integrations into Git, CI/CD, and IDEs, and
                the performance for it to be effective in any form factor.
              </p>
              <p>
                [1]
                <a
                  href="https://www.milanjovanovic.tech/blog/what-is-a-modular-monolith"
                  >https://www.milanjovanovic.tech/blog/what-is-a-modular-monol...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43170108">
          <h3>
            <a
              class="item"
              href="https://www.frontiernet.net/%7Eatlasf/A56UDAF.htm"
              >Upside Down Air Force</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-25 @ 10:16:14</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43170108"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43168838">
          <h3>
            <a
              class="item"
              href="https://annas-archive.org/blog/all-isbns-winners.html"
              >Winners of the $10k ISBN visualization bounty</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-25 @ 06:26:56</span
              ><span class="points-container"
                >Points: <span class="points">485</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43168838"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43159270">
          <h3>
            <a
              class="item"
              href="https://www.paultaylor.eu/prafm/html/index.html"
              >Practical Foundations of Mathematics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-24 @ 13:24:49</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43159270"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43158166">
          <h3>
            <a class="item" href="https://github.com/abhinavxd/libredesk"
              >Show HN: Libredesk – Open-source customer support desk. Single
              binary app</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-24 @ 11:05:27</span
              ><span class="points-container"
                >Points: <span class="points">311</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43158166"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
            <div class="text">
              <p>
                Unlike many "open-core" alternatives that lock essential
                features behind enterprise plans, Libredesk is fully open-source
                and plans to always stay this way.
              </p>
              <p>
                It's in alpha (v0.1.0) right now, but there’s a working demo
                available. I built this because I wanted a truly open and
                self-hosted alternative to platforms like Chatwoot, Intercom,
                and Zendesk.
              </p>
              <p>
                Would love feedback, suggestions, and thoughts from the
                community.
              </p>
              <p>
                GitHub:
                <a href="https://github.com/abhinavxd/libredesk"
                  >https://github.com/abhinavxd/libredesk</a
                >
              </p>
              <p>
                Demo:
                <a href="https://demo.libredesk.io/"
                  >https://demo.libredesk.io/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43153324">
          <h3>
            <a
              class="item"
              href="https://susam.net/mathbin-is-shutting-down.html"
              >MathB.in Is Shutting Down</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-23 @ 21:20:40</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43153324"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
