<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="35321609">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/argonaut/jobs/pJavmIJ-fullstack-engineer"
              >Argonaut (YC S21) Is Hiring a FullStack Engineer in India
              (Remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 01:00:16</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35321606">
          <h3>
            <a
              class="item"
              href="https://creatomate.com/blog/video-rendering-with-nodejs-and-ffmpeg"
              >Video Rendering with Node.js and FFmpeg</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 01:00:11</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35321606"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35321493">
          <h3>
            <a class="item" href="https://json-ld.org">JSON for Linking Data</a>
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 00:46:22</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35321493"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35321418">
          <h3>
            <a class="item" href="https://mjg59.dreamwidth.org/65874.html"
              >We need better support for SSH host certificates</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 00:38:18</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35321418"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35321054">
          <h3>
            <a
              class="item"
              href="https://drive.google.com/file/d/1BU5bV3X5w65DwSMapKcsr0ZvrMRU_Nbi/view"
              >Do large language models need sensory grounding for meaning and
              understanding?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 23:55:18</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35321054"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35320656">
          <h3>
            <a
              class="item"
              href="https://weblog.rogueamoeba.com/2023/03/24/the-riaa-v-steve-jobs/"
              >The RIAA vs. Steve Jobs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 23:02:55</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35320656"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35320638">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35320638"
              >Ask HN: Math for Programmers?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 23:01:04</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35320638"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've learned higher algebra, calculus, some geometry which was
                eased by the already known algebra, number theory,
                probabilities, combinatorics, graph theory, statistics, formal
                language and automata theory, and that's mostly it. Most of my
                CS courses in university required some kind of math which we
                previously did.
              </p>
              <p>
                I can't say I remember all I've learned but I can recall things
                if needed.
              </p>
              <p>
                It was a thing that programming languages were explained in
                terms of formal language theory, plus some algebraic constructs.
                Now a days whenever I read about a programing language, I read
                about mostly category theory or functional theory and it mostly
                doesn't make sense.
              </p>
              <p>
                So how hard or how many math domains should one learn to be able
                to understand all major CS theory?
              </p>
            </div>
          </section>
        </section>
        <section id="35320571">
          <h3>
            <a class="item" href="https://github.com/gd3kr/BlenderGPT"
              >BlenderGPT: Use commands in English to control Blender with
              OpenAI's GPT-4</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 22:54:47</span
              ><span class="points-container"
                >Points: <span class="points">235</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35320571"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35320565">
          <h3>
            <a
              class="item"
              href="https://blog.vslira.net/2023/03/an-interview-with-steve-wozniak-by.html"
              >An interview with Steve Wozniak by Jessica Livingston cured my AI
              anxiety</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 22:53:35</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35320565"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35319807">
          <h3>
            <a class="item" href="https://antonilo.github.io/vision_locomotion/"
              >Robot Learns to See in 30 Minutes (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 21:26:56</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35319807"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35319383">
          <h3>
            <a
              class="item"
              href="https://www.infoq.com/news/2023/03/mountpoint-amazon-s3/"
              >AWS Announces Open Source Mountpoint for Amazon S3</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 20:44:31</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35319383"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35318258">
          <h3>
            <a
              class="item"
              href="https://blog.metaobject.com/2019/02/why-architecture-oriented-programming.html"
              >Why Architecture Oriented Programming Matters (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 19:07:31</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35318258"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35317882">
          <h3>
            <a class="item" href="http://toastytech.com/guis/index.html"
              >The Graphical User Interface Gallery</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 18:40:36</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35317882"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35317590">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2023/03/26/tech-company-layoffs-2023-morale/"
              >The layoffs will continue until (investor) morale improves</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 18:16:30</span
              ><span class="points-container"
                >Points: <span class="points">175</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35317590"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35317419">
          <h3>
            <a
              class="item"
              href="https://sqlite.org/forum/forumpost/7fecf11e42c71a91?raw"
              >Craziest thing I ever used SQLite for: partial file deduplication
              (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 18:00:26</span
              ><span class="points-container"
                >Points: <span class="points">241</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35317419"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35316836">
          <h3>
            <a
              class="item"
              href="https://twitter.com/erlichya/status/1639973591214182400"
              >Jacob Ziv has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 17:11:18</span
              ><span class="points-container"
                >Points: <span class="points">542</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35316836"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35316679">
          <h3>
            <a
              class="item"
              href="https://github.com/HamburgChimps/apple-notes-liberator"
              >Show HN: Apple Notes Liberator – Extract Notes.app Data and Save
              It as JSON</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 16:59:36</span
              ><span class="points-container"
                >Points: <span class="points">318</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35316679"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
            <div class="text">
              <p>
                I just released the first version of a project I’ve been working
                on solves a very specific problem that perhaps only I have. I
                welcome any and all feedback, even if you just want to drop in
                to say that this is a hot piece of garbage!
              </p>
            </div>
          </section>
        </section>
        <section id="35315542">
          <h3>
            <a
              class="item"
              href="https://blog.lastmileai.dev/using-openais-retrieval-plugin-with-llama-d2e0b6732f14"
              >Using ChatGPT Plugins with LLaMA</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 15:32:49</span
              ><span class="points-container"
                >Points: <span class="points">271</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35315542"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35315424">
          <h3>
            <a
              class="item"
              href="https://blog.arduino.cc/2023/03/25/arduino-uno-r4/"
              >Arduino Uno R4</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 15:23:44</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35315424"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35315310">
          <h3>
            <a
              class="item"
              href="https://english.stackexchange.com/questions/396553/what-is-this-famous-example-of-the-absurdity-of-english-spelling"
              >Ghoti</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 15:16:13</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35315310"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35315248">
          <h3>
            <a class="item" href="https://github.com/traghav/auto-redteam"
              >Show HN: Jailbreaking GPT3.5 Using GPT4</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 15:11:02</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35315248"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35313578">
          <h3>
            <a
              class="item"
              href="https://newsletter.goodtechthings.com/p/when-programming-is-gone-will-we"
              >When programming is gone, will we like what’s left?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 12:04:38</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35313578"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35313565">
          <h3>
            <a
              class="item"
              href="https://suor.github.io/blog/2023/03/26/ban-1-plus-n-in-django/"
              >Ban 1+N in Django</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 12:03:37</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35313565"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35311332">
          <h3>
            <a class="item" href="https://github.com/FMInference/FlexGen"
              >FlexGen: Running large language models on a single GPU</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 05:31:19</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35311332"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35306234">
          <h3>
            <a
              class="item"
              href="http://msinilo.pl/blog2/post/microcorruption-writeup/"
              >Microcorruption Writeup</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-25 @ 19:30:34</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35306234"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35301727">
          <h3>
            <a
              class="item"
              href="https://john-joseph-horton.com/papers/schumpeter.pdf"
              >The Death of a Technical Skill (2020) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-25 @ 11:49:18</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35301727"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35301209">
          <h3>
            <a
              class="item"
              href="https://nautil.us/how-snails-cross-vast-oceans-288802/"
              >Snails Cross Vast Oceans</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-25 @ 10:15:46</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35301209"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35301207">
          <h3>
            <a
              class="item"
              href="https://www.allaboutcircuits.com/news/nvidia-unveils-culitho-breakthrough-in-computational-lithography/"
              >Nvidia Unveils CuLitho: A “Breakthrough in Computational
              Lithography”</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-25 @ 10:15:32</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35301207"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35301184">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Diderot_effect"
              >The Diderot Effect</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-25 @ 10:10:20</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35301184"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35301033">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/the-symmetry-that-makes-solving-math-equations-easy-20230324/"
              >The symmetry that makes solving math equations easy</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-25 @ 09:40:59</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35301033"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
