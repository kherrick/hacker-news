<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44436006">
          <h3>
            <a
              class="item"
              href="https://sliding-window-visualizer-bryanneumann.replit.app/"
              >Sliding Window Technique Visualizer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 17:11:40</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44436006"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44435910">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/cua/jobs/dIskIB1-founding-engineer-cua-yc-x25"
              >Cua (YC X25) Is Hiring a Founding Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 17:00:30</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44435484">
          <h3>
            <a class="item" href="https://calvin.sh/blog/fed-lie/"
              >The Fed says this is a cube of $1M. They're off by half a
              million</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 16:22:55</span
              ><span class="points-container"
                >Points: <span class="points">308</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44435484"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44435211">
          <h3>
            <a
              class="item"
              href="https://apps.apple.com/us/app/hackernewt-for-hacker-news/id6448201970"
              >Show HN: HackerNewt - Breadth-first exploring HN client for
              iOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 15:57:23</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44435211"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                Video preview:
                <a href="https://imgur.com/a/tzBdpXw"
                  >https://imgur.com/a/tzBdpXw</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44434576">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44434576"
              >Ask HN: Who is hiring? (July 2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 15:01:36</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44434576"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
            <div class="text">
              <i>not</i> an option.
              <p>
                Please only post if you personally are part of the hiring
                companyâ€”no recruiting firms or job boards. One post per company.
                If it isn't a household name, explain what your company does.
              </p>
              <p>
                Please only post if you are actively filling a position and are
                committed to responding to applicants.
              </p>
              <p>
                Commenters: please don't reply to job posts to complain about
                something. It's off topic here.
              </p>
              <p>
                Readers: please only email if you are personally interested in
                the job.
              </p>
              <p>
                Searchers: try
                <a href="https://dheerajck.github.io/hnwhoishiring/"
                  >https://dheerajck.github.io/hnwhoishiring/</a
                >,
                <a
                  href="https://amber-williams.github.io/hackernews-whos-hiring/"
                  >https://amber-williams.github.io/hackernews-whos-hiring/</a
                >,
                <a href="http://nchelluri.github.io/hnjobs/"
                  >http://nchelluri.github.io/hnjobs/</a
                >,
                <a href="https://hnresumetojobs.com"
                  >https://hnresumetojobs.com</a
                >,
                <a href="https://hnhired.fly.dev">https://hnhired.fly.dev</a>,
                <a href="https://kennytilton.github.io/whoishiring/"
                  >https://kennytilton.github.io/whoishiring/</a
                >,
                <a href="https://hnjobs.emilburzo.com"
                  >https://hnjobs.emilburzo.com</a
                >, or this (unofficial) Chrome extension:
                <a
                  href="https://chromewebstore.google.com/detail/hn-hiring-pro/mpfaljjblphnlloddaplgicpkinikjlp"
                  >https://chromewebstore.google.com/detail/hn-hiring-pro/mpfal...</a
                >.
              </p>
              <p>Don't miss these other fine threads:</p>
              <p>
                <i>Who wants to be hired?</i>
                <a href="https://news.ycombinator.com/item?id=44434574"
                  >https://news.ycombinator.com/item?id=44434574</a
                >
              </p>
              <p>
                <i>Freelancer? Seeking freelancer?</i>
                <a href="https://news.ycombinator.com/item?id=44434575"
                  >https://news.ycombinator.com/item?id=44434575</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44434062">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2506.17732"
              >Feasibility study of a mission to Sedna - Nuclear propulsion and
              solar sailing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 14:08:11</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44434062"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44433994">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/business/grammarly-acquires-email-startup-superhuman-ai-platform-push-2025-07-01/"
              >Grammarly acquires Superhuman</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 14:00:30</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44433994"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44433899">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2506.21654"
              >Experience converting a mathematical software package to C++20
              modules [PDF]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 13:46:56</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44433899"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44433843">
          <h3>
            <a
              class="item"
              href="https://blog.pgdp.net/2025/07/01/aesop-in-words-of-one-syllable/"
              >Aesop in Words of One Syllable</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 13:41:15</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44433843"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44433429">
          <h3>
            <a class="item" href="https://www.stripemove.com/"
              >Show HN: I built the tool I wished existed for moving Stripe
              between countries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 12:52:50</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44433429"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              <p>
                I had hundreds of users and using Stripe's dashboard to add all
                of the products, prices, coupons and subscriptions manually
                would take ages. I contacted a couple of services that help with
                this kind of migration, but their quotes were way over my
                budget. My next option was to use Stripe's API, which is very
                powerful but also very complicated. I'm a designer who can code,
                but I didn't feel confident doing it alone, so I asked a friend,
                an experienced developer, to help.
              </p>
              <p>
                It proved to be quite challenging, with many details and caveats
                we had to learn as we went. What we thought would take a couple
                of days took us a week.
              </p>
              <p>
                After this experience, we teamed up and built
                <a href="https://stripemove.com">https://stripemove.com</a>, a
                tool that guides you through this whole process, explaining and
                automating that hard week we went through. It handles the
                technical complexity while keeping your business running.
                Customers keep paying on your old account while everything
                transfers in parallel, then you flip the switch when ready.
              </p>
              <p>
                It's a very niche tool, built for founders who need to change
                their company location for personal or business reasons. For
                entrepreneurs buying companies established in other countries.
                For people in the same situation I was in a few months ago.
                Basically the tool I wished existed, and for a fair price.
                Designed to get you through this inconvenient process and back
                as soon as possible on growing your business.
              </p>
              <p>
                Would love to hear from anyone who's dealt with similar Stripe
                migrations. What was your biggest pain point?
              </p>
            </div>
          </section>
        </section>
        <section id="44433409">
          <h3>
            <a
              class="item"
              href="https://simedw.com/2025/06/23/introducing-spegel/"
              >Show HN: Spegel, a Terminal Browser That Uses LLMs to Rewrite
              Webpages</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 12:49:42</span
              ><span class="points-container"
                >Points: <span class="points">218</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44433409"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44433386">
          <h3>
            <a class="item" href="https://jobsbyreferral.com/"
              >Show HN: Jobs by Referral: Find jobs in your LinkedIn network</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 12:47:06</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44433386"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              <a href="https://jobsbyreferral.com/"
                >https://jobsbyreferral.com/</a
              >
              <p>
                It's powered by
                <a href="https://rapidapi.com/letscrape-6bRBa3QguO5/api/jsearch"
                  >https://rapidapi.com/letscrape-6bRBa3QguO5/api/jsearch</a
                >, which is a little pricey, so I'm trying to decide whether to
                put more effort into the project (I'd have to charge _something_
                to offset the costs).
              </p>
            </div>
          </section>
        </section>
        <section id="44432467">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/scientists-identify-culprit-behind-biggest-ever-u-s-honeybee-die"
              >Scientists identify culprit behind biggest-ever U.S. honey bee
              die-off</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 10:35:23</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44432467"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44432385">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/introducing-pay-per-crawl/"
              >Cloudflare to introduce pay-per-crawl for AI bots</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 10:20:27</span
              ><span class="points-container"
                >Points: <span class="points">422</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44432385"
                  >Comments</a
                ><span class="descendants">: 218</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44432322">
          <h3>
            <a class="item" href="https://github.com/topling/toplingdb"
              >Show HN: ToplingDB - A Persistent Key-Value Store for External
              Storage</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 10:07:59</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44432322"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                ToplingDB is forked from RocksDB, where we have replaced almost
                all components with more efficient alternatives(db_bench shows
                ToplingDB is about ~8x faster than RocksDB):
              </p>
              <p>
                * MemTable: SkipList is replaced by CSPP(Crash Safe Parallel
                Patricia trie), which is 8x faster.
              </p>
              <p>
                * SST: BlockBasedTable is replaced by ToplingZipTable,
                implemented by searchable compression algo, it is very small and
                fast, typically less than 1Î¼s per lookup:
              </p>
              <p></p>
              <pre><code>  * Keys/Indexes are compressed   using NestLoudsTrie(a multi-layer nesting LOUDS succinct trie).

  * Values in a SST are compressed   together with better zip ratio than zstd, and can unzip by a single value at 1GB/sec.

  * BlockCache is no longer needed, double caching(BlockCache &amp; PageCache) is avoided
</code></pre>
              Other hotspots are also improved:
              <p>
                * Flush MemTable to L0 is omited, greatly reducing write amp and
                is very friendly for large(GB) MemTable
              </p>
              <p></p>
              <pre><code>  * MemTable   serves as the index of Key to "value position in WAL log"

  * Since WAL file content almost always in page cache, thus value content can be efficiently accessed by mmap

  * When Flush happens, MemTable is dumpped as an SST and WAL is treated as a blob file

    * CSPP MemTable use integer index instead of physical pointers, thus in-memory format is exactly same with in-file format
</code></pre>
              * Prefix cache for searching candidate SSTs and prefix cache for
              scanning by iterators
              <p></p>
              <pre><code>  * Caching fixed len key prefix into an array, binary search it as an uint array
</code></pre>
              * Distributed compaction(superior replacement to rocksdb remote
              compaction)
              <p></p>
              <pre><code>  * Gracefully support MergeOperator, CompactionFilter, PropertiesCollector...

  * Out of the box, development efforts are significantly reduced

  * Very easy to share compaction service on spot instances for many DB nodes
</code></pre>
              Useful Bonus Feature:
              <p>* Config by json/yaml: can config almost all features</p>
              <p>
                * Optional embeded WebView: show db structures in web browser,
                refreshing pages like animation
              </p>
              <p>* Online update db configs by http</p>
              <p>
                MySQL integration, ToplingDB has integrated into MySQL by
                MyTopling, which is forked from MyRocks with great improvements,
                like improvements of ToplingDB on RocksDB:
              </p>
              <p>
                * WBWI(WriteBatchWithIndex): like MemTable, SkipList is replace
                with CSPP, 20x faster(speedup is more than MemTable).
              </p>
              <p>* LockManager &amp; LockTracker: 10x faster</p>
              <p>* Encoding &amp; Decoding: 5x faster</p>
              <p>* Others ....</p>
              <p>
                MyRocks has many disadvantages compared to InnoDB, while
                MyTopling outperforms InnoDB at almost all aspect - excluding
                feature differences.
              </p>
              <p>
                We have create ~100 PRs for RocksDB, in which ~40 were accepted.
                Our PRs are mostly "small" changes, since big changes are not
                likely accepted.
              </p>
              <p>
                ToplingDB has been deployed in numerous production environments.
              </p>
              <p>
                Welcome every one using ToplingDB &amp; MyTopling, and discuss
                in
                <a href="https://github.com/topling/toplingdb/discussions"
                  >https://github.com/topling/toplingdb/discussions</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44431178">
          <h3>
            <a class="item" href="https://github.com/stan-smith/OpenFLOW"
              >OpenFLOW â€“ Quickly make beautiful infrastructure diagrams local
              to your machine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 06:29:57</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44431178"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44429225">
          <h3>
            <a
              class="item"
              href="https://docs.anthropic.com/en/docs/claude-code/hooks"
              >Claude Code now supports hooks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 00:01:15</span
              ><span class="points-container"
                >Points: <span class="points">335</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44429225"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44428438">
          <h3>
            <a class="item" href="https://github.com/openfiletax/openfile"
              >Show HN: A continuation of IRS Direct File that can be
              self-hosted</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 22:08:59</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44428438"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <p>
                the work behind Direct File is really interesting and I made a
                lot of it available online to read as well -
                <a href="https://docs.openfile.tax/en/latest/"
                  >https://docs.openfile.tax/en/latest/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44427757">
          <h3>
            <a class="item" href="https://www.philschmid.de/context-engineering"
              >The new skill in AI is not prompting, it's context engineering</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 20:53:55</span
              ><span class="points-container"
                >Points: <span class="points">813</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44427757"
                  >Comments</a
                ><span class="descendants">: 459</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44426428">
          <h3>
            <a
              class="item"
              href="https://www.linaro.org/blog/hidden-jtag-qualcomm-snapdragon-usb/"
              >The hidden JTAG in a Qualcomm/Snapdragon deviceâ€™s USB port</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 18:34:27</span
              ><span class="points-container"
                >Points: <span class="points">222</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426428"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44426128">
          <h3>
            <a class="item" href="https://proton.me/blog/apple-lawsuit"
              >Proton joins suit against Apple for practices that harm
              developers and consumers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 17:58:38</span
              ><span class="points-container"
                >Points: <span class="points">569</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426128"
                  >Comments</a
                ><span class="descendants">: 558</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44425461">
          <h3>
            <a
              class="item"
              href="https://danielchasehooper.com/posts/typechecked-generic-c-data-structures/"
              >I write type-safe generic data structures in C</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 16:55:20</span
              ><span class="points-container"
                >Points: <span class="points">386</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44425461"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44413957">
          <h3>
            <a
              class="item"
              href="https://www.laphamsquarterly.org/roundtable/all-good-editors-are-pirates"
              >All Good Editors Are Pirates: In Memory of Lewis H. Lapham</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-29 @ 15:39:16</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44413957"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44410925">
          <h3>
            <a class="item" href="https://github.com/embabel/embabel-agent"
              >Embabel Agent Framework for the JVM</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-29 @ 07:14:27</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44410925"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44409488">
          <h3>
            <a
              class="item"
              href="https://www.caltech.edu/about/news/genetic-code-enables-zebrafish-to-mend-damaged-organs"
              >Genetic code enables zebrafish to mend damaged organs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-29 @ 01:00:11</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44409488"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44405565">
          <h3>
            <a
              class="item"
              href="https://frest.substack.com/p/first-class-models-the-missing-productivity"
              >First-Class Models: The Missing Productivity Revolution</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-28 @ 15:48:11</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44405565"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44404831">
          <h3>
            <a
              class="item"
              href="https://blog.snork.dev/posts/abstraction-boundaries-are-optimization-boundaries.html"
              >Abstraction boundaries are optimization boundaries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-28 @ 14:12:10</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44404831"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44403988">
          <h3>
            <a
              class="item"
              href="https://blog.danpetrolito.xyz/i-built-something-that-changed-my-friend-gro-social-fabric/"
              >I built something that changed my friend group's social fabric</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-28 @ 11:49:35</span
              ><span class="points-container"
                >Points: <span class="points">390</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44403988"
                  >Comments</a
                ><span class="descendants">: 172</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44403547">
          <h3>
            <a
              class="item"
              href="https://utk.claranguyen.me/talks.php?id=videogames"
              >Graph Theory Applications in Video Games</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-28 @ 10:07:38</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44403547"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44397921">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/when-did-nature-burst-into-vivid-color-20250627/"
              >When Did Nature Burst into Vivid Color?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-27 @ 16:09:09</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44397921"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
