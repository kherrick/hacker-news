<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42314340">
          <h3>
            <a class="item" href="https://ppc.web.cern.ch/"
              >A Particle Physics Course for High-School Students</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-04 @ 03:49:37</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42314340"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42314024">
          <h3>
            <a class="item" href="https://emacsconf.org/2024/"
              >EmacsConf 2024</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-04 @ 02:42:07</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42314024"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42313910">
          <h3>
            <a
              class="item"
              href="https://www.propublica.org/article/formaldehyde-epa-trump-public-health-danger"
              >Formaldehyde Causes More Cancer Than Any Other Toxic Air
              Pollutant</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-04 @ 02:16:27</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42313910"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42312420">
          <h3>
            <a class="item" href="https://github.com/JeffrayZhang/terse-cli"
              >Rust library for building no-boilerplate CLI apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 22:40:25</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42312420"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42312301">
          <h3>
            <a
              class="item"
              href="https://www.phoenixframework.org/blog/phoenix-liveview-1.0-released?release=1.0"
              >Phoenix LiveView 1.0.0 is here</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 22:28:47</span
              ><span class="points-container"
                >Points: <span class="points">319</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42312301"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42312277">
          <h3>
            <a
              class="item"
              href="https://astral.sh/blog/python-build-standalone"
              >A new home for Python-build-standalone</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 22:26:08</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42312277"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42312121">
          <h3>
            <a class="item" href="https://www.armaansahni.com/game/"
              >My son (9 yrs old) used plain JavaScript to make a game, and
              wants your feedback</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 22:08:16</span
              ><span class="points-container"
                >Points: <span class="points">376</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42312121"
                  >Comments</a
                ><span class="descendants">: 222</span></span
              >
            </h4>
            <div class="text">
              <p>
                Recently, we had a breakthrough where he learned how to leverage
                Google Gemini as a learning tool (not to write code for him, but
                as a better search and as a coding teacher). This leveled him up
                big time and he decided to make his own game.
              </p>
              <p>
                Game link here:
                <a href="https://www.armaansahni.com/game/"
                  >https://www.armaansahni.com/game/</a
                >
              </p>
              <p>
                He's coded all the HTML, CSS &amp; JS by hand in VSCode. He's
                made the animated graphics on his own using a web based sprite
                editor called Piskel.
              </p>
              <p>
                For the game, I provided hints along the way and Gemini has
                helped him with syntax. View source to see the code. He's
                excited to share with the community.
              </p>
              <p>
                He also wrote a blog post about how he made this game:
                <a
                  href="https://www.armaansahni.com/how-i-coded-a-game-using-ai/"
                  >https://www.armaansahni.com/how-i-coded-a-game-using-ai/</a
                >
                (he independently figured out how to leverage Gemini effectively
                and writes about it here).
              </p>
              <p>
                Regarding the blog post - We had a discussion about who the
                target audience is (ie not 9 year olds!), what they would be
                interested in learning about and the general outline. He then
                dictated his words into the computer (which gets around spelling
                issues), and he went through multiple rounds of feedback from
                his parents (improving clarity, punctuation, etc). In other
                words, its his words &amp; thoughts but he had help along the
                way!
              </p>
              <p>
                NOTE: both parents are programmers, who provided valuable
                guidance through his coding journey.
              </p>
            </div>
          </section>
        </section>
        <section id="42311828">
          <h3>
            <a
              class="item"
              href="https://kevindavid.org/code/2024/03/20/chrome-os-flex-proxmox.html"
              >Creating a Proxmox or QEMU ChromeOS Flex VM</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 21:38:46</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42311828"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42311349">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/openlayer/jobs/ZEEO8UB-design-engineer"
              >Openlayer (YC S21) is looking for top-tier design engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 21:00:04</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42311069">
          <h3>
            <a class="item" href="https://egoless.engineering"
              >Egoless Engineering</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 20:38:23</span
              ><span class="points-container"
                >Points: <span class="points">397</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42311069"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42311031">
          <h3>
            <a class="item" href="https://github.com/keyvank/30cc"
              >Show HN: My C compiler compiled itself</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 20:35:24</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42311031"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              One of the most challenging projects of my life :)
            </div>
          </section>
        </section>
        <section id="42309790">
          <h3>
            <a class="item" href="https://www.thetubecomputer.com/"
              >The Tube Computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 18:54:00</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42309790"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42309429">
          <h3>
            <a
              class="item"
              href="https://www.ftc.gov/news-events/news/press-releases/2024/12/ftc-takes-action-against-gravy-analytics-venntel-unlawfully-selling-location-data-tracking-consumers"
              >FTC takes action against Gravy Analytics, Venntel for selling
              location data</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 18:25:40</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42309429"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42309121">
          <h3>
            <a
              class="item"
              href="https://aws.amazon.com/blogs/aws/introducing-amazon-nova-frontier-intelligence-and-industry-leading-price-performance/"
              >Amazon Nova</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 18:04:45</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42309121"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42308590">
          <h3>
            <a
              class="item"
              href="https://www.phoronix.com/review/intel-arc-b580-battlemage#google_vignette"
              >Intel announces Arc B-series "Battlemage" discrete graphics with
              Linux support</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 17:19:37</span
              ><span class="points-container"
                >Points: <span class="points">359</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42308590"
                  >Comments</a
                ><span class="descendants">: 533</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42308234">
          <h3>
            <a
              class="item"
              href="https://blog.vladovince.com/my-brand-new-digitizing-workflow-using-a-25-year-old-film-scanner/"
              >My brand new digitizing workflow using a 25 year old film
              scanner</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 16:49:32</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42308234"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42308051">
          <h3>
            <a class="item" href="https://skia-canvas.org/"
              >Skia Canvas: Browserless implementation of the HTML Canvas
              drawing API for node</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 16:34:18</span
              ><span class="points-container"
                >Points: <span class="points">207</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42308051"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42307393">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42307393"
              >Launch HN: Vocera (YC F24) – Testing and Observability for Voice
              AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 15:46:57</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42307393"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.vocera.ai">https://www.vocera.ai</a>) – a
              platform that automates the testing and monitoring of AI voice
              agents. We’re building the product we wish we had when we were
              developing voice agents. Here’s a demo video:
              <a href="https://www.youtube.com/watch?v=aRtAb_E60jY"
                >https://www.youtube.com/watch?v=aRtAb_E60jY</a
              >. You can engage in a roleplay as well which we made just for
              fun:
              <a href="https://www.vocera.ai/talk">https://www.vocera.ai/talk</a
              >.
              <p>
                We were working on voice agents in healthcare, and kept running
                into the same problem: manually testing was incredibly
                time-consuming and error-prone. Testing voice AI in a
                comprehensive way was far more difficult than we had anticipated
                – not just the setup, but the ongoing monitoring of production
                calls. Despite our best efforts, some calls still failed once we
                went live.
              </p>
              <p>
                The main challenges we faced were: (1) Demonstrating reliability
                to customers for production was really tough; (2) Manual testing
                was incomplete and didn't cover edge cases; (3) We couldn’t
                easily simulate all possible conversations, especially with
                diverse customer personas; (4) Monitoring every production call
                manually was a huge time sink.
              </p>
              <p>
                We built Vocera to solve these problems. Vocera automatically
                simulates real personas, generates a wide range of testing
                scenarios from your prompts/call scripts and monitors all
                production calls. The result? You can be sure your voice agents
                are reliable, and you get real-time insights into how they’re
                performing.
              </p>
              <p>
                Our platform tests how your AI responds to diverse personas,
                evaluates the conversation against different metrics and gives
                you directed feedback on the issues.
              </p>
              <p>
                What’s different about us is that we don’t just automate the
                evaluation. We generate scenarios and metrics automatically, so
                developers do not have to spend time defining their scenarios or
                eval metrics. This saves them a ton of time. Obviously, we give
                them the option to define these manually as well. Also, we
                provide detailed analytics on the agent's performance across
                simulations so developers do not need to listen to all call
                recordings manually.
              </p>
              <p>
                If you’re building voice agents and want to ensure they’re
                reliable and production-ready, or if you’re just interested in
                the challenges of Voice AI, we’d love to chat.
              </p>
              <p>
                We’d love to get your feedback, thoughts, or experiences related
                to testing voice agents!
              </p>
            </div>
          </section>
        </section>
        <section id="42306663">
          <h3>
            <a
              class="item"
              href="https://www.cell.com/cell-biomaterials/fulltext/S3050-5623(24)00004-7"
              >On-scalp printing of personalized electroencephalography
              e-tattoos</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 14:51:21</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42306663"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42305954">
          <h3>
            <a
              class="item"
              href="https://annali.netlify.app/2024/11/20/tweaking-stunt-island"
              >Tweaking Stunt Island's 30-year-old 3D engine</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 13:44:59</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42305954"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42305831">
          <h3>
            <a
              class="item"
              href="https://krebsonsecurity.com/2024/12/why-phishers-love-new-tlds-like-shop-top-and-xyz/"
              >Phishers Love New TLDs Like .shop, .top and .xyz</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 13:30:40</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42305831"
                  >Comments</a
                ><span class="descendants">: 150</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42305348">
          <h3>
            <a
              class="item"
              href="https://blog.erodriguez.de/dependency-management-fatigue-or-why-i-forever-ditched-react-for-go-htmx-templ/"
              >Dependency management fatigue, or why I ditched React for
              Go+HTMX+Templ</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 12:16:33</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42305348"
                  >Comments</a
                ><span class="descendants">: 188</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42302560">
          <h3>
            <a class="item" href="https://www.bonbook.co/showhn"
              >Show HN: Book and change flights with one email</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-03 @ 02:31:29</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42302560"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
            <div class="text">
              <p>
                TLDR; I built an inbox simulator so you can try BonBook in 15s,
                without sharing your email.
              </p>
              <p>
                Earlier this year I was flying 2-3 times per month and found
                booking and changing flights a hassle. So I decided to fix it.
              </p>
              <p>
                BonBook lets you find, book and change flights with one email.
                It can also auto-find flights for events you’re attending.
              </p>
              <p>
                Over the last few days, I built a simulator that lets you
                interact with BonBook without sharing your email. It responds
                with real flights and each response includes a link to compare
                w/ Google.
              </p>
            </div>
          </section>
        </section>
        <section id="42280486">
          <h3>
            <a
              class="item"
              href="https://raghavan.usc.edu/papers/infobatteries-eir21.pdf"
              >Information Batteries (2021) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-30 @ 09:01:56</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42280486"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42280323">
          <h3>
            <a
              class="item"
              href="https://mariakonnikova.substack.com/p/gratitude-despite-the-odds"
              >Gratitude Despite the Odds</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-30 @ 08:16:24</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42280323"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42278003">
          <h3>
            <a
              class="item"
              href="https://gendignoux.com/blog/2024/11/18/rust-rayon-optimized.html"
              >Making a parallel Rust workload 10x faster with (or without)
              Rayon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-29 @ 23:22:16</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42278003"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42276928">
          <h3>
            <a class="item" href="https://kaiec.github.io/EstyJS/"
              >EstyJS 2.0 (emulator for the Atari ST, written in 100% pure
              JavaScript)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-29 @ 20:40:05</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42276928"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42272524">
          <h3>
            <a class="item" href="https://github.com/glojurelang/glojure"
              >Glojure: Clojure interpreter hosted on Go, with extensible
              interop support</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-29 @ 09:29:56</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42272524"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42258049">
          <h3>
            <a
              class="item"
              href="https://docs.opencv.org/4.x/d9/dab/tutorial_homography.html"
              >Homography Explained with Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-27 @ 17:51:09</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42258049"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42253868">
          <h3>
            <a
              class="item"
              href="https://underjord.io/voice-activity-detection-elixir-membrane.html"
              >Voice Activity Detection in Elixir with Membran</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-27 @ 07:37:11</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42253868"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
