<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40732444">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2024/6/19/24181870/openai-former-chief-scientist-ilya-sutskever-ssi-safe-superintelligence"
              >OpenAI's former chief scientist is starting a new AI company</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 21:14:24</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40732444"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40732400">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2024-06-19/austria-aims-to-curb-crashes-with-crackdown-on-super-speeders"
              >Austria to 'Super-Speeders': We're Taking Your Car</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 21:09:45</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40732400"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40732320">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/zep-ai/jobs/J5TD9KW-backend-engineer"
              >Zep AI (YC W24) is hiring back end engineers to build LLM
              long-term memory</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 21:00:05</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40732161">
          <h3>
            <a
              class="item"
              href="https://www.tandfonline.com/doi/full/10.1080/09658211.2020.1727519"
              >Semantic Satiation – Repeated Exposure Causes Words to Lose
              Meaning</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 20:39:40</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40732161"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40731922">
          <h3>
            <a class="item" href="https://www.talisman.org/x-debut.shtml"
              >X debut 40 years ago (1984)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 20:09:38</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40731922"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40731859">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/BBCode"
              >BBCode</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 20:01:41</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40731859"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40731360">
          <h3>
            <a class="item" href="https://easyos.org/"
              >EasyOS: An Experimental Linux Distribution</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 18:59:40</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40731360"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40730245">
          <h3>
            <a
              class="item"
              href="https://github.com/jdc-cunningham/modular-pi-cam/tree/master/cameras/pi-zero/large-display"
              >Show HN: Modular Pi Cam</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 17:16:18</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40730245"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
            <div class="text">
              <p>
                The repo has all the STL files, parts list, most wiring
                diagrams. The first one was the custom Pi Zero HQ cam which was
                featured on a Hackaday article/podcast.
              </p>
              <p>
                The modular version (aside from being able to swap cameras)
                mostly has the latest software. Recently I added the ability to
                process videos in the background (ffmpeg merges wav/mp4 files
                together).
              </p>
              <p>
                The camera uses crop-zoom-panning for dialing in shots with
                manual lenses. The menu is created by layering images/text with
                PIL. Live preview is a little slow as it's SPI based.
              </p>
              <p>
                If anybody is a pro at python I'd appreciate insight on better
                code. I've mostly just followed a context-based folder layout
                regarding where everything is.
              </p>
              <p>
                I have not added custom/manual settings yet, it uses auto
                settings for the most part except for when you use a V3 camera
                module (which has electronic aperture) then it uses the d-pad to
                set the focus/diopter value.
              </p>
              <p>
                I have another camera in mind/future build although it's more
                tailored for videos.
              </p>
              <p>Some sample video I've shot.</p>
              <p>
                <a href="https://www.youtube.com/watch?v=JkjXkQD0j9w"
                  >https://www.youtube.com/watch?v=JkjXkQD0j9w</a
                >
              </p>
              <p>Assembly video</p>
              <p>
                <a href="https://www.youtube.com/watch?v=dXG-MoIw93Q"
                  >https://www.youtube.com/watch?v=dXG-MoIw93Q</a
                >
              </p>
              <p>
                At some point I will rewrite the code for a new general purpose
                DIY camera software from what I've learned, that'll be an
                undertaking.
              </p>
            </div>
          </section>
        </section>
        <section id="40730228">
          <h3>
            <a class="item" href="http://www.nsl.com/k/f/f.htm">F (2006)</a>
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 17:14:13</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40730228"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40730156">
          <h3>
            <a class="item" href="https://ssi.inc"
              >Safe Superintelligence Inc.</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 17:06:16</span
              ><span class="points-container"
                >Points: <span class="points">731</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40730156"
                  >Comments</a
                ><span class="descendants">: 549</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40729906">
          <h3>
            <a
              class="item"
              href="http://www.chrisfenton.com/1-25-scale-cray-c90-wristwatch/"
              >1/25-scale Cray C90 wristwatch</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 16:40:15</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40729906"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40729809">
          <h3>
            <a
              class="item"
              href="https://www.technologyreview.com/2024/06/19/1093446/pneumatic-tubes-hospitals/"
              >The return of pneumatic tubes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 16:30:14</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40729809"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40729671">
          <h3>
            <a class="item" href="https://www.devever.net/~hl/mildlydynamic"
              >The demise of the mildly dynamic website (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 16:17:01</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40729671"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40729655">
          <h3>
            <a class="item" href="https://github.com/kabiroberai/node-swift"
              >NodeSwift: Bridge Node.js and Swift</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 16:15:46</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40729655"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40729501">
          <h3>
            <a class="item" href="https://www.sandofsky.com/lambda-school/"
              >Fast Crimes at Lambda School</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 15:57:28</span
              ><span class="points-container"
                >Points: <span class="points">310</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40729501"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40728671">
          <h3>
            <a
              class="item"
              href="http://www.squaring.net/quilts/mrs-perkins-quilts.html"
              >Mrs Perkins's Quilt (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 14:31:27</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40728671"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40728032">
          <h3>
            <a
              class="item"
              href="https://salvagedcircuitry.com/2000a-nand-recovery.html"
              >Agilent 2000a / 3000a Oscilloscope NAND Recovery</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 13:20:01</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40728032"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40727523">
          <h3>
            <a
              class="item"
              href="https://www.schneier.com/blog/archives/2024/06/the-hacking-of-culture-and-the-creation-of-socio-technical-debt.html"
              >The hacking of culture and the creation of socio-technical
              debt</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 12:14:11</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40727523"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40727022">
          <h3>
            <a
              class="item"
              href="https://www.eso.org/public/germany/news/eso2409/"
              >Astronomers see a black hole awaken in real time</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 10:57:22</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40727022"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40726792">
          <h3>
            <a
              class="item"
              href="https://iopscience.iop.org/article/10.1088/0143-0807/37/6/065008"
              >Beyond velocity and acceleration: jerk, snap and higher
              derivatives (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 10:16:08</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40726792"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40726641">
          <h3>
            <a
              class="item"
              href="https://terrytao.wordpress.com/career-advice/theres-more-to-mathematics-than-rigour-and-proofs/"
              >There's more to mathematics than rigour and proofs (2007)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 09:51:05</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40726641"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40726585">
          <h3>
            <a
              class="item"
              href="https://www.dialectsarchive.com/comma-gets-a-cure"
              >Comma Gets a Cure (2000)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 09:40:40</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40726585"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40726426">
          <h3>
            <a
              class="item"
              href="https://www.esa.int/Enabling_Support/Space_Engineering_Technology/Monitoring_marine_litter_from_space_is_now_a_reality"
              >Monitoring marine litter from space</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 09:15:34</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40726426"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40725451">
          <h3>
            <a class="item" href="https://exectos.eu.org/"
              >ExectOS – brand new operating system which derives from NT
              architecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-19 @ 06:32:01</span
              ><span class="points-container"
                >Points: <span class="points">188</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40725451"
                  >Comments</a
                ><span class="descendants">: 163</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40722988">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/science/political-science/2016/jun/08/how-should-we-treat-sciences-growing-pains"
              >The growing pains of science</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-18 @ 22:59:54</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40722988"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40718908">
          <h3>
            <a class="item" href="https://cedardb.com/blog/ssd_latency/"
              >When are SSDs slow?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-18 @ 15:26:38</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40718908"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40717706">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/vannevar-bush"
              >Vannevar Bush Engineered the 20th Century</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-18 @ 13:35:58</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40717706"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40717398">
          <h3>
            <a class="item" href="https://www.radius.to"
              >Show HN: Radius – A Meetup.com alternative</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-18 @ 13:08:15</span
              ><span class="points-container"
                >Points: <span class="points">146</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40717398"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
            <div class="text">
              <p>What can you do on Radius?</p>
              <p>
                - Want to create a group, post events and gather RSVPs? You're
                covered!
              </p>
              <p>- Want event discovery? Coming soon™!</p>
              <p>
                I'm a software engineer based in the UK. My first attempt to
                make this failed spectacularly when I hired a budget dev years
                ago to "build an MVP" when I had next to no knowledge of
                software development. So naturally, I changed my career and
                learned how to build it myself.
              </p>
              <p>
                I wanted to build something that made it easy to find out what
                was happening around you. We have all these platforms focused on
                ticketing, meetups, and other event types - but they're all
                niche enough that they each only list a fragment of what's going
                on around us. Then you have another subset of groups which host
                their own website/mailing list and may only advertise an event
                on -insert social network- and you never know about it until
                it's too late.
              </p>
              <p>The issue I have with existing platforms:</p>
              <p>
                - Meetup excludes too many groups by not offering a free tier
                for smaller/non-profit groups which make up for a huge number of
                small communities. So many groups just end up dying because one
                person has to pay the fees. Then there's the fact that their
                search experience is just terrible. FWIW, I also think they have
                a marketing issue with the name Meetup.
              </p>
              <p>
                - Eventbrite does ticketing pretty well, but completely failed
                to develop the group/community aspect and doesn't seem to have
                put much emphasis on the discovery of events either. They, like
                Meetup, only attract a certain subset of groups/events as well.
              </p>
              <p>
                So, it feels like there's an opportunity to fill the gap with
                something that focuses on a wider range of events/groups and
                emphasises discovery and community. There's so much activity
                happening around us in the real world - and that's what I'd
                eventually like Radius to capture.
              </p>
              <p>
                I'm aware that the discovery app category falls into the list of
                "YC honeypot ideas" but in the time that I've cared about this,
                nobody has built the thing I wanted to exist, damn it (Maybe
                that's a sign NOT to build it..).
              </p>
              <p>
                At best, people might find this useful and at worst, it's been a
                fantastic learning experience.
              </p>
              <p>--</p>
              <p>Feedback -</p>
              <p>
                There are a bunch of groups using it for events at the moment,
                and they've given great feedback to date. I haven't advertised
                it much though, so this is my attempt at gathering the next wave
                of feedback. Feel free to:
              </p>
              <p>
                - Try it out: See if Radius works for your groups and events.
              </p>
              <p>
                - Give feedback: Let me know what you think and how we can
                improve.
              </p>
              <p>
                - Request features: Tell me what features would make Radius even
                better.
              </p>
              <p>Thanks!</p>
              <p>
                Link:-
                <a href="https://www.radius.to/">https://www.radius.to/</a>
              </p>
              <p>
                Example group:-
                <a href="https://www.radius.to/groups/toronto-ruby"
                  >https://www.radius.to/groups/toronto-ruby</a
                >
              </p>
              <p>
                Example event:-
                <a
                  href="https://www.radius.to/groups/toronto-ruby/events/s1tczn2usqf5"
                  >https://www.radius.to/groups/toronto-ruby/events/s1tczn2usqf...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="40713893">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41591-024-03057-9"
              >Brain circuit scores identify clinically distinct biotypes in
              depression/anxiety</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-18 @ 03:49:27</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40713893"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40712359">
          <h3>
            <a
              class="item"
              href="https://www.npr.org/2024/06/10/1247296780/screen-apnea-why-screens-cause-shallow-breathing"
              >What happens to our breath when we type, tap, scroll</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-17 @ 23:23:09</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40712359"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
