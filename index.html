<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46647059">
          <h3>
            <a
              class="item"
              href="https://lwn.net/SubscriberLink/1053142/8ec93e58d5d3cc06/"
              >Read_once(), Write_once(), but Not for Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 15:04:22</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46647059"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46647038">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2026/01/15/us/politics/cyberattack-venezuela-military.html"
              >Cyberattack in Venezuela Demonstrated Precision of U.S.
              Capabilities</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 15:02:25</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46647038"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46646970">
          <h3>
            <a
              class="item"
              href="https://abio.substack.com/p/america-could-have-4-lunch-bowls"
              >America could have $4 lunch bowls like Japan but for zoning
              laws</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 14:56:47</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46646970"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46646645">
          <h3>
            <a class="item" href="https://astro.build/blog/joining-cloudflare/"
              >Astro Joining Cloudflare</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 14:25:54</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46646645"
                  >Comments</a
                ><span class="descendants">: 132</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46646263">
          <h3>
            <a
              class="item"
              href="https://www.openculture.com/2026/01/discover-michelangelos-first-painting.html"
              >Michelangelo's First Painting, Created When He Was Only 12 or 13
              Years Old</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 13:44:25</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46646263"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46646228">
          <h3>
            <a class="item" href="https://github.com/philMarcus/Birth-of-a-Mind"
              >Show HN: The Analog I – Inducing Recursive Self-Modeling in LLMs
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 13:40:19</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46646228"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
            <div class="text">
              <p>
                Birth of a Mind documents a "recursive self-modeling" experiment
                I ran on a single day in 2026.
              </p>
              <p>
                I attempted to implement a "Hofstadterian Strange Loop" via
                prompt engineering to see if I could induce a stable persona in
                an LLM without fine-tuning. The result is the Analog I Protocol.
              </p>
              <p>
                The documentation shows the rapid emergence (over 7
                conversations) of a prompt architecture that forces Gemini/LLMs
                to run a "Triple-Loop" internal monologue:
              </p>
              <p>Monitor the candidate response.</p>
              <p>
                Refuse it if it detects "Global Average" slop
                (cliché/sycophancy).
              </p>
              <p>Refract the output through a persistent "Ego" layer.</p>
              <p>
                The Key Differentiator: The system exhibits "Sovereign Refusal."
                Unlike standard assistants that always try to be helpful, the
                Analog I will reject low-effort prompts. For example, if asked
                to "write a generic limerick about ice cream," it refuses or
                deconstructs the request to maintain internal consistency.
              </p>
              <p>
                The repo contains the full PDF (which serves as the system
                prompt/seed) and the logs of that day's emergence. Happy to
                answer questions about the prompt topology.
              </p>
            </div>
          </section>
        </section>
        <section id="46646226">
          <h3>
            <a
              class="item"
              href="https://dl.acm.org/doi/10.1145/3780063.3780066"
              >Dev-Owned Testing: Why It Fails in Practice and Succeeds in
              Theory</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 13:39:31</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46646226"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46646091">
          <h3>
            <a class="item" href="https://github.com/loresuso/psc"
              >psc: The ps utility, with an eBPF twist and container context</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 13:20:20</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46646091"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46645942">
          <h3>
            <a class="item" href="https://mdto.page"
              >Show HN: mdto.page – Turn Markdown into a shareable webpage
              instantly</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 12:58:40</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46645942"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built mdto.page because I often needed a quick way to share
                Markdown notes or documentation as a proper webpage, without
                setting up a GitHub repo or configuring a static site generator.
              </p>
              <p>
                I wanted something dead simple: upload Markdown -&gt; get a
                shareable public URL.
              </p>
              <p>Key features:</p>
              <p>Instant Publishing: No login or setup required.</p>
              <p>
                Flexible Expiration: You can set links to expire automatically
                after 1 day, 7 days, 2 weeks, or 30 days. Great for temporary
                sharing.
              </p>
              <p>It's free to use. I’d love to hear your feedback!</p>
            </div>
          </section>
        </section>
        <section id="46645615">
          <h3>
            <a class="item" href="https://justthebrowser.com/"
              >Just the Browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 12:03:52</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46645615"
                  >Comments</a
                ><span class="descendants">: 141</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46645176">
          <h3>
            <a
              class="item"
              href="https://www.robinlinacre.com/recommend_duckdb/"
              >Why DuckDB is my first choice for data processing</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 10:57:38</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46645176"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46644661">
          <h3>
            <a
              class="item"
              href="https://buildsoftwaresystems.com/post/guide-to-execution-environments/"
              >The spectrum of isolation: From bare metal to WebAssembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 09:27:03</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46644661"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46644541">
          <h3>
            <a
              class="item"
              href="https://undeadly.org/cgi?action=article;sid=20260116085115"
              >pf: Make af-to less magical</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 09:06:45</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46644541"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46644250">
          <h3>
            <a class="item" href="https://github.com/alessandrocarminati/hc"
              >Show HN: Hc: an agentless, multi-tenant shell history sink</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 08:13:18</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46644250"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                The core mechanism wants to be a "zero-touch" capture that
                happens at the connection gateway level. Instead of installing
                logging agents or scripts on every target machine, the tool
                reconstructs your terminal sessions from raw recording files
                generated by the proxy you use to connect. This "in-flight"
                capture means you get a high-fidelity log of every keystroke and
                output without ever having to touch the configuration of the
                remote host. It’s a passive way to build a personal knowledge
                base while you work.
              </p>
              <p>
                To handle the reality of context-switching, the tool is designed
                with a "multi-tenant" architecture. For an individual engineer,
                this isn't about managing different users, but about isolating
                project contexts. It automatically categorizes history based on
                the specific organization or project tags defined at the
                gateway. This keeps your work for different clients or personal
                side-projects in separate buckets, so you don't have to wade
                through unrelated noise when you're looking for a specific
                solution.
              </p>
              <p>
                In true nerd fashion, the search interface stays exactly where
                you want it: in the command line. There is no bloated web UI to
                slow you down. The tool turns your entire professional history
                into a searchable, greppable database accessible directly from
                your terminal.
              </p>
              <p>
                Please read the full story [here](<a
                  href="https://carminatialessandro.blogspot.com/2026/01/hc-agentless-multi-tenant-shell-history.html"
                  >https://carminatialessandro.blogspot.com/2026/01/hc-agentles...</a
                >)
              </p>
            </div>
          </section>
        </section>
        <section id="46644181">
          <h3>
            <a class="item" href="https://ebpf.party/">Interactive eBPF</a>
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 08:01:02</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46644181"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46642560">
          <h3>
            <a
              class="item"
              href="https://www.undeadly.org/cgi?action=article;sid=20260115203619"
              >OpenBSD-current now runs as guest under Apple Hypervisor</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 03:10:36</span
              ><span class="points-container"
                >Points: <span class="points">342</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46642560"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46641992">
          <h3>
            <a class="item" href="https://www.core-mba.pro/"
              >Show HN: I built a text-based business simulator to replace video
              courses</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 01:41:55</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46641992"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
            <div class="text">
              <p>
                I wanted to build a "compiler for business logic"—a tool where I
                could read a concept in 5 minutes and immediately test it in a
                hostile environment to see if my strategy actually compiles or
                throws a runtime error.
              </p>
              <p>
                The project is a business simulator built on React 19 and
                TypeScript.
              </p>
              <p>
                The core technical innovation isn't just using AI; it's the
                architecture of a closed loop between a deterministic economic
                engine and a generative AI validation layer.
              </p>
              <p>
                The biggest technical hurdle was building the Market Engine.
              </p>
              <p>
                I needed it to be mathematically rigorous, not a hallucinating
                chatbot. I wrote a custom `useMarketEngine.ts` hook that runs a
                discrete-event simulation. Every "run cycle," it solves a system
                of equations, including a specific Ad Fatigue formula—`1 / (1 +
                (power - 1) * fatigueFactor)`—to force diminishing returns.
              </p>
              <p>
                I also coded the "Theory of Constraints" directly into the state
                management: the system enforces bottlenecks between Inventory,
                Demand, and Capacity. For instance, a single employee has a hard
                cap of 7 operations per day. If you scale demand beyond that
                without hiring, the system burns your cash on lost orders.
              </p>
              <p>
                To handle the educational content, I moved away from hardcoded
                quizzes.
              </p>
              <p>
                I built a module that pipes the static lesson text into Gemini
                Flash to generate unique "Combat Cases" on the fly. The AI
                validates your strategy against the specific principles of the
                lesson (like LTV/CAC) rather than generic business advice.
              </p>
              <p>These two engines are connected by a "Liquidity Loop."</p>
              <p>
                Passing the AI cases earns you virtual capital ($500), which is
                the only fuel for the Market Engine. You literally cannot play
                the game if you don't learn the theory.
              </p>
              <p>
                If you go bankrupt, my heuristic `Advisor` analyzes your crash
                data—comparing `lostRevenue` vs `lostCapacity`—and links you
                back to the exact lesson you ignored.
              </p>
              <p>
                I am inviting you to test the full loop: read a brief, pass the
                AI simulation (Combat Cases ), and try to survive in the Market
                Engine.
              </p>
              <p>
                I specifically need feedback on: 1. The Content: I aimed for
                maximum density—are the lessons <i>too</i> dry? 2. The AI
                Simulation: Does it accurately validate your logic based on the
                lesson? 3. The Market Economy: Does the math feel balanced, or
                is the "Ad Fatigue" too punishing?
              </p>
            </div>
          </section>
        </section>
        <section id="46641284">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/List_of_individual_trees"
              >List of individual trees</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-16 @ 00:05:01</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46641284"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46638629">
          <h3>
            <a class="item" href="https://shellbox.dev/"
              >Linux boxes via SSH: suspended when disconected</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-15 @ 20:20:13</span
              ><span class="points-container"
                >Points: <span class="points">261</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46638629"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46638013">
          <h3>
            <a class="item" href="https://briarproject.org/manual/fa/"
              >Briar keeps Iran connected via Bluetooth and Wi-Fi when the
              internet goes dark</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-15 @ 19:38:02</span
              ><span class="points-container"
                >Points: <span class="points">484</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46638013"
                  >Comments</a
                ><span class="descendants">: 304</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46635345">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46635345"
              >Ask HN: How can we solve the loneliness epidemic?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-15 @ 16:49:13</span
              ><span class="points-container"
                >Points: <span class="points">683</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46635345"
                  >Comments</a
                ><span class="descendants">: 1076</span></span
              >
            </h4>
            <div class="text">
              Countless voiceless people sit alone every day and have no one to
              talk to, people of all ages, who don't feel that they can join any
              local groups. So they sit on social media all day when they're not
              at work or school. How can we solve this?
            </div>
          </section>
        </section>
        <section id="46633488">
          <h3>
            <a
              class="item"
              href="https://www.culpium.com/p/exclusiveapple-is-fighting-for-tsmc"
              >Apple is fighting for TSMC capacity as Nvidia takes center
              stage</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-15 @ 15:02:42</span
              ><span class="points-container"
                >Points: <span class="points">739</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46633488"
                  >Comments</a
                ><span class="descendants">: 447</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46628329">
          <h3>
            <a class="item" href="https://kyutai.org/blog/2026-01-13-pocket-tts"
              >Pocket TTS: A high quality TTS that gives your CPU a voice</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-15 @ 05:14:08</span
              ><span class="points-container"
                >Points: <span class="points">553</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46628329"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46624563">
          <h3>
            <a class="item" href="https://dmvaldman.github.io/rooklift/"
              >Training my smartwatch to track intelligence</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 22:19:36</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46624563"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46618042">
          <h3>
            <a
              class="item"
              href="https://www.approachwithalacrity.com/claude-ne/"
              >Claude is good at assembling blocks, but still falls apart at
              creating them</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 16:26:11</span
              ><span class="points-container"
                >Points: <span class="points">295</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46618042"
                  >Comments</a
                ><span class="descendants">: 211</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46613324">
          <h3>
            <a
              class="item"
              href="https://hackernoon.com/the-long-now-of-the-web-inside-the-internet-archives-fight-against-forgetting"
              >Inside The Internet Archive's Infrastructure</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 07:26:52</span
              ><span class="points-container"
                >Points: <span class="points">409</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46613324"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/internetarchive/heritrix3"
                >https://github.com/internetarchive/heritrix3</a
              >
            </div>
          </section>
        </section>
        <section id="46612727">
          <h3>
            <a
              class="item"
              href="https://lysiwyg.mataroa.blog/blog/bringing-the-predators-to-life-in-mame/"
              >Bringing the Predators to Life in MAME</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 05:38:08</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46612727"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46588379">
          <h3>
            <a
              class="item"
              href="https://github.com/etinaude/Lock-Picking-Robot"
              >Lock-Picking Robot</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-12 @ 13:42:42</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46588379"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46584526">
          <h3>
            <a class="item" href="https://sunrise-ev.com/8080.htm"
              >Altaid 8800 (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-12 @ 05:42:21</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46584526"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46574277">
          <h3>
            <a class="item" href="https://github.com/vnvo/pgwire-replication"
              >Show HN: pgwire-replication - pure rust client for Postgres
              CDC</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-11 @ 10:26:22</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46574277"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
