<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42480885">
          <h3>
            <a
              class="item"
              href="https://primatology.xyz/blog/introducing-gazzetta"
              >Gazzetta, an RSS Reader for Mastodon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-21 @ 17:20:12</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42480885"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42480624">
          <h3>
            <a class="item" href="https://eonfall.com"
              >Show HN: Eonfall – A new third-person co-op action game built for
              the web</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-21 @ 16:45:36</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42480624"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
            <div class="text">
              <p>
                It's been 2-years in the making built by a 2 man team. Eonfall,
                is a new third-person co-op action game with rogue-lite elements
                built exclusively for the web! We've finally reached a release
                candidate state and set our official public release date for Jan
                15th! The game's current version 5.0.0-beta is live and
                available to test play today!
              </p>
              <p>
                Unity game engine was used to develop the game along with other
                services to handle the backend, and Nuxt 3 + Nuxt UI to handle
                the front-end.
              </p>
              <p>
                We welcome any and all questions, feedback &amp; suggestions!
              </p>
              <p>Thanks all, Jon</p>
            </div>
          </section>
        </section>
        <section id="42480105">
          <h3>
            <a class="item" href="https://s2.dev/blog/intro">Introducing S2</a>
          </h3>
          <section>
            <h4>
              <span>2024-12-21 @ 15:11:19</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42480105"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42479958">
          <h3>
            <a
              class="item"
              href="https://blogs.lse.ac.uk/impactofsocialsciences/2024/10/21/an-academic-great-gatsby-curve-how-much-academic-success-inherited/"
              >An academic Great Gatsby Curve – How much academic success is
              inherited?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-21 @ 14:42:56</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42479958"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42479866">
          <h3>
            <a
              class="item"
              href="https://recleudo.com/under-googles-watchfull-eye-getting-out-of-a-manual-site-reputation-abuse-penalty-and-continuing-business-as-usual/"
              >Escaping Google's Manual Reputation Penalty and Resuming Business
              as Usual</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-21 @ 14:24:53</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42479866"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42479233">
          <h3>
            <a class="item" href="https://github.com/malmeloo/FindMy.py"
              >Query Apple's FindMy Network with Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-21 @ 12:14:55</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42479233"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42478728">
          <h3>
            <a class="item" href="https://www.kannel.org/overview.shtml"
              >Kannel: Open-Source WAP and SMS Gateway</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-21 @ 10:15:11</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42478728"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42476192">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2412.15042"
              >Compiling C to Safe Rust, Formalized</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 23:30:03</span
              ><span class="points-container"
                >Points: <span class="points">261</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42476192"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42475703">
          <h3>
            <a class="item" href="https://github.com/izabera/pseudo3d"
              >A Raycaster in Bash</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 22:25:45</span
              ><span class="points-container"
                >Points: <span class="points">218</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42475703"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42473321">
          <h3>
            <a
              class="item"
              href="https://arcprize.org/blog/oai-o3-pub-breakthrough"
              >OpenAI O3 breakthrough high score on ARC-AGI-PUB</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 18:11:13</span
              ><span class="points-container"
                >Points: <span class="points">1536</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42473321"
                  >Comments</a
                ><span class="descendants">: 1538</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42473032">
          <h3>
            <a class="item" href="https://grayjay.app/desktop/"
              >Grayjay Desktop App</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 17:33:00</span
              ><span class="points-container"
                >Points: <span class="points">489</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42473032"
                  >Comments</a
                ><span class="descendants">: 253</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42471927">
          <h3>
            <a
              class="item"
              href="https://cerncourier.com/a-bestiary-of-exotic-hadrons/"
              >A bestiary of exotic hadrons</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 15:29:59</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42471927"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42471913">
          <h3>
            <a class="item" href="https://artemis.jamesg.blog/"
              >Show HN: Artemis, a Calm Web Reader</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 15:28:50</span
              ><span class="points-container"
                >Points: <span class="points">286</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42471913"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
            <div class="text">
              <p>
                I have been using the tool, which I called Artemis, for several
                months. Every morning, I looked forward to my "morning paper" of
                blogs I love reading.
              </p>
              <p>
                There are no notifications, read vs. unread states, counts of
                posts, etc. Only the last seven days of posts are available. The
                colour scheme is changeable. Dark mode is supported. All popular
                feed formats are supported.
              </p>
              <p>
                There is no reading interface to read blog posts; rather, the
                links take you to the authors' websites. Many of my favourite
                bloggers put a lot of effort into the design of their blogs and
                like to change things up; I wanted an experience that embraced
                that.
              </p>
              <p>
                The reader is now available for anyone to use (with invite code
                "hn").
              </p>
            </div>
          </section>
        </section>
        <section id="42470541">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/research/building-effective-agents"
              >Building Effective "Agents"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 12:29:17</span
              ><span class="points-container"
                >Points: <span class="points">540</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42470541"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42470202">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/space/2024/12/were-about-to-fly-a-spacecraft-into-the-sun-for-the-first-time/"
              >The Parker Solar Probe will make its closest approach yet to the
              Sun</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 11:23:56</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42470202"
                  >Comments</a
                ><span class="descendants">: 132</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42469074">
          <h3>
            <a class="item" href="https://computer.tldraw.com"
              >Tldraw Computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 07:42:36</span
              ><span class="points-container"
                >Points: <span class="points">523</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42469074"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42468214">
          <h3>
            <a class="item" href="https://distill.pub/2021/gnn-intro/"
              >A Gentle Introduction to Graph Neural Networks (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 04:10:42</span
              ><span class="points-container"
                >Points: <span class="points">349</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42468214"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42467194">
          <h3>
            <a
              class="item"
              href="https://www.home-assistant.io/blog/2024/12/19/voice-preview-edition-the-era-of-open-voice/"
              >The era of open voice assistants</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-20 @ 00:29:57</span
              ><span class="points-container"
                >Points: <span class="points">861</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42467194"
                  >Comments</a
                ><span class="descendants">: 267</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42466507">
          <h3>
            <a
              class="item"
              href="https://eli.thegreenplace.net/2020/implementing-raft-part-0-introduction/"
              >Implementing the the Raft distributed consensus algorithm</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-19 @ 22:43:17</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42466507"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42461530">
          <h3>
            <a
              class="item"
              href="https://harpers.org/archive/2025/01/the-ghosts-in-the-machine-liz-pelly-spotify-musicians/"
              >Ghost artists on Spotify</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-19 @ 14:12:05</span
              ><span class="points-container"
                >Points: <span class="points">549</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42461530"
                  >Comments</a
                ><span class="descendants">: 363</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42453207">
          <h3>
            <a
              class="item"
              href="https://www.elevationlab.com/blogs/news/introducing-timecapsule"
              >A 10-Year Battery for AirTag</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 18:17:17</span
              ><span class="points-container"
                >Points: <span class="points">666</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42453207"
                  >Comments</a
                ><span class="descendants">: 551</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42450274">
          <h3>
            <a
              class="item"
              href="https://www.moonbitlang.com/blog/compiler-opensource"
              >MoonBit compiler is available on GitHub</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 13:30:04</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42450274"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42450232">
          <h3>
            <a class="item" href="https://maxbo.me/celine/bibhtml/"
              >Show HN: celine/bibhtml: a Web Components referencing system for
              HTML documents</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 13:23:15</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42450232"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42450223">
          <h3>
            <a class="item" href="https://www.ap5.com/ap5-man.html"
              >Relational Lisp – AP5</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 13:21:47</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42450223"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42449951">
          <h3>
            <a
              class="item"
              href="https://worldsensorium.com/when-two-hemispheres-collide-where-to-now-for-rewilding-in-ireland/"
              >When Two Hemispheres Collide: Where to Now for Rewilding in
              Ireland?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 12:32:15</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42449951"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42449497">
          <h3>
            <a class="item" href="https://github.com/boardgameio/boardgame.io"
              >Boardgame.io: an engine for creating turn-based games using
              JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 10:50:20</span
              ><span class="points-container"
                >Points: <span class="points">325</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42449497"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42449026">
          <h3>
            <a
              class="item"
              href="https://www.civilbeat.org/2024/05/group-argues-to-save-haiku-stairs-for-historic-preservation-reasons/"
              >Group Argues to Save Haiku Stairs for Historic Preservation
              Reasons</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 08:53:00</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42449026"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42446686">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/health/2024/12/the-kids-are-maybe-alright-teen-drug-use-hits-new-lows-in-ongoing-decline/"
              >Decline in teen drug use continues, surprising experts</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-17 @ 23:44:40</span
              ><span class="points-container"
                >Points: <span class="points">317</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42446686"
                  >Comments</a
                ><span class="descendants">: 502</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42445102">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-12-ocean-predator-atacama-trench.html"
              >Researchers discover new ocean predator in the Atacama Trench</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-17 @ 20:42:20</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42445102"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42441609">
          <h3>
            <a class="item" href="https://rubenerd.com/is-it-worth-saving/"
              >Is stuff online worth saving?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-17 @ 14:31:13</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42441609"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
