<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43719926">
          <h3>
            <a
              class="item"
              href="https://salmagundi.skidmore.edu/articles/75-on-jane-jacobs"
              >On Jane Jacobs (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 17:35:33</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43719926"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43719830">
          <h3>
            <a
              class="item"
              href="https://misfra.me/2025/sqlite-transactions-and-virtual-tables/"
              >SQLite Transactions and Virtual Tables</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 17:28:31</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43719830"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43719522">
          <h3>
            <a class="item" href="https://www.easypost.com/careers"
              >EasyPost (YC S13) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 17:01:11</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43719447">
          <h3>
            <a class="item" href="https://github.com/coder/agentapi"
              >Show HN: AgentAPI – HTTP API for Claude Code, Goose, Aider, and
              Codex</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 16:54:58</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43719447"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43718988">
          <h3>
            <a class="item" href="https://www.poshenloh.com/e/"
              >A cute proof that makes e natural</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 16:19:43</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43718988"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43718809">
          <h3>
            <a
              class="item"
              href="https://quagmirerepair.com/milwaukee-m18-battery-reverse-engineering"
              >Milwaukee M18 Battery Reverse Engineering</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 16:07:21</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43718809"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43718124">
          <h3>
            <a class="item" href="https://zuni.app"
              >Show HN: Zuni (YC S24) – AI Copilot for the Browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 15:15:39</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43718124"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm Will, and along with my co-founder George, we've built Zuni
                (<a href="https://zuni.app">https://zuni.app</a>) - a browser
                extension that adds contextual AI capabilities to your browser.
                It understands what you're reading and working on, whether
                that's email, research, or anything else in your tabs.
              </p>
              <p>
                We started out building a full email client with AI built in
                (you might have seen that version showcased in YC’s AI Design
                Review -
                <a
                  href="https://www.youtube.com/watch?v=DBhSfROq3wU&amp;t=1601s"
                  >https://www.youtube.com/watch?v=DBhSfROq3wU&amp;t=1601s</a
                >), but learned that people don't actually want to leave their
                existing tools - they just want them to work better. Gmail might
                be frustrating, but it has years of features people rely on. So
                we pivoted to enhance the tools people already use, rather than
                replace them entirely.
              </p>
              <p>Some specific things Zuni does today:</p>
              <p>
                - Analyzes emails as you read them in Gmail, identifying action
                items and suggesting possible responses - Lets you discuss how
                to handle tricky emails, almost like having a thought partner -
                Maintains context across your browsing session so you can ask
                follow-up questions naturally - Runs locally first for speed and
                privacy - Doesn't store chats, emails or anything sensitive in
                the cloud
              </p>
              <p>
                We're still early and focusing on getting the core experience
                right before adding more integrations. The goal is to make AI
                actually useful in your daily work, rather than just another "AI
                feature" checkbox.
              </p>
              <p>
                Would genuinely love feedback from the HN community - what would
                make this truly useful for your workflow? What are we missing?
              </p>
              <p>
                Happy to answer any questions about the technical implementation
                too.
              </p>
            </div>
          </section>
        </section>
        <section id="43717705">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/04/17/technology/google-ad-tech-antitrust-ruling.html"
              >Google is illegally monopolizing online advertising tech, judge
              rules</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 14:47:46</span
              ><span class="points-container"
                >Points: <span class="points">388</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43717705"
                  >Comments</a
                ><span class="descendants">: 195</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43717606">
          <h3>
            <a
              class="item"
              href="https://sharpletters.net/2025/04/16/hdr-emoji/"
              >HDR‑Infused Emoji</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 14:42:07</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43717606"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43717377">
          <h3>
            <a
              class="item"
              href="https://techxplore.com/news/2025-04-stainless-steel-technique-submicron-anti.html"
              >Stainless steel strengthened: Twisting creates submicron
              'anti-crash wall'</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 14:28:07</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43717377"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43716856">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2025/04/17/openai-looked-at-cursor-before-considering-deal-with-rival-windsurf.html"
              >OpenAI looked at buying Cursor creator before turning to
              Windsurf</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 13:51:49</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43716856"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43716526">
          <h3>
            <a
              class="item"
              href="https://nvd.nist.gov/vuln/detail/CVE-2025-32433"
              >Unauthenticated Remote Code Execution in Erlang/OTP SSH</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 13:29:44</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43716526"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43716293">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/science/scientists-find-strongest-evidence-yet-life-an-alien-planet-2025-04-16/"
              >Scientists find strongest evidence yet of life on an alien
              planet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 13:11:21</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43716293"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43716058">
          <h3>
            <a
              class="item"
              href="https://maknee.github.io/blog/2025/3FS-Performance-Journal-1/"
              >An Intro to DeepSeek's Distributed File System</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 12:50:37</span
              ><span class="points-container"
                >Points: <span class="points">334</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43716058"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43714902">
          <h3>
            <a class="item" href="https://nickjones.tech/ai-watching-rugby/"
              >Building an AI That Watches Rugby</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 10:18:43</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43714902"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43714619">
          <h3>
            <a
              class="item"
              href="https://www.tokyoweekender.com/art_and_culture/japanese-culture/oda-ujiharu-the-weakest-samurai-warlord/"
              >Why Japan's "Weakest Samurai Warlord" Is Still Admired to This
              Day</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 09:30:43</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43714619"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43714041">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/the-halting-problem-is-a-terrible-example-of-np/"
              >The Halting Problem is a terrible example of NP-Harder</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 07:34:08</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43714041"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43714004">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2504.12285"
              >BitNet b1.58 2B4T Technical Report</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 07:27:11</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43714004"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43713524">
          <h3>
            <a
              class="item"
              href="https://www.windytan.com/2025/04/passing-planes-and-other-whoosh-sounds.html"
              >Passing planes and other whoosh sounds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 05:53:31</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43713524"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43713140">
          <h3>
            <a class="item" href="https://thenumb.at/Autodiff/"
              >Differentiable Programming from Scratch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 04:30:47</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43713140"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43711957">
          <h3>
            <a class="item" href="https://status.zoom.us/incidents/pw9r9vnq5rvk"
              >Zoom outage caused by accidental 'shutting down' of the zoom.us
              domain</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 00:55:49</span
              ><span class="points-container"
                >Points: <span class="points">574</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43711957"
                  >Comments</a
                ><span class="descendants">: 275</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43708025">
          <h3>
            <a class="item" href="https://github.com/openai/codex"
              >OpenAI Codex CLI: Lightweight coding agent that runs in your
              terminal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-16 @ 17:24:50</span
              ><span class="points-container"
                >Points: <span class="points">495</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43708025"
                  >Comments</a
                ><span class="descendants">: 268</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43706037">
          <h3>
            <a
              class="item"
              href="https://theappendix.net/posts/2014/02/darwins-children-drew-vegetable-battles-on-the-origin-of-species"
              >Darwin's children drew all over the “On the Origin of Species”
              manuscript (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-16 @ 14:28:36</span
              ><span class="points-container"
                >Points: <span class="points">469</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43706037"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43698590">
          <h3>
            <a
              class="item"
              href="https://apps.apple.com/us/app/particle-news/id6683283775"
              >Show HN: Particle - News, Organized</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 21:26:44</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43698590"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
            <div class="text">
              <p>
                Keeping up with the news is overwhelming in an age of
                information overload. Particle reimagines the experience by
                organizing articles into comprehensive "Stories," offering
                clear, concise summaries to quickly grasp what matters. Today,
                we reached the #1 spot in "Newspapers &amp; Magazine" on the iOS
                App Store—and I thought I'd share a bit of our backstory.
              </p>
              <p>
                I've been connected to this team for a long time. About 20 years
                ago, I shared a house with our CTO and co-founder Marcel Molina.
                I helped him get started with programming. Since then, Marcel
                has had an extraordinary career—becoming a senior staff engineer
                at Twitter, where he helped build foundational features like
                Retweets, Notifications, and Lists, and later working at Tesla
                on manufacturing execution systems that scaled across
                Gigafactories.
              </p>
              <p>
                At Twitter, Marcel worked closely with our CEO and product
                visionary Sara Beykpour, who led initiatives like Twitter Blue,
                Twitter Video, and the experimental app <i>twttr</i>. Sara has a
                background in Software Engineering and Cognitive Science from
                the University of Waterloo and spent over a decade at Twitter in
                engineering and leadership roles.
              </p>
              <p>
                In late 2022, Sara and Marcel started prototyping a news app
                that could reduce the cognitive and emotional burden of staying
                informed—by using AI to help people understand more, faster.
                They were soon joined by a few other former Twitter colleagues
                who helped shape the early concept into a working iOS
                application.
              </p>
              <p>
                I joined about 15 months ago to contribute across the entire
                stack. Since then, I've helped design and build major iOS
                features, rewritten our public website on Cloudflare Workers,
                and implemented new functionality in our Go backend, which is
                driven by Google Cloud's Pub/Sub architecture.
              </p>
              <p>What Makes Particle News Different</p>
              <p>
                Particle helps you navigate the news effortlessly—leveraging AI
                to help you understand more, faster. Some highlights:
              </p>
              <p>
                • Personalized News – Your feed is tailored to your interests.
                You can follow specific people, places, and things so you never
                miss what matters to you.
              </p>
              <p>
                • Clear Summaries – Get a quick overview or dive deeper with
                detailed, structured context—summarized in natural language.
              </p>
              <p>
                • Perspective Tools – Features like "Opposite Sides" and our
                political spectrum chart let you explore stories through
                multiple lenses.
              </p>
              <p>
                • Interactive Q&amp;A – Ask questions about any story and get
                concise answers with sources and citations.
              </p>
              <p>
                • Audio Summaries – Use the "Play" feature to listen to your
                feed, specific stories, or even select articles—great for
                hands-free or on-the-go moments.
              </p>
              <p>
                One of the things we're most proud of is how Particle supports
                publishers. We've partnered with outlets like Reuters, AFP, and
                Fortune to host some of their content via APIs. These partners
                get prominent placement, and their links are highlighted in gold
                to stand out. This model aims to drive traffic back to
                publishers and reward high-quality journalism, rather than just
                aggregating and commodifying it.
              </p>
              <p>
                Transparency is a core value: all sources are cited, generated
                answers are grounded in evidence, and we take real care to
                prevent AI hallucinations or misleading summaries.
              </p>
              <p>
                Despite negligible marketing spend, Particle has grown to the
                top of its category by focusing on engagement with early users
                and meaningful partnerships with the media ecosystem.
              </p>
              <p>
                Coming soon: weekday mini crosswords—a new feature designed by
                another longtime friend of ours from 20 years back who went on
                to work at Twitter, lead development on Firewatch, and release
                his own games independently.
              </p>
              <p>
                It's incredibly fun and rewarding to be building something
                meaningful with old and new friends. I feel lucky every day to
                work alongside some of the best product, design, and engineering
                minds on a project we hope will help people stay engaged with
                democracy without burning out.
              </p>
            </div>
          </section>
        </section>
        <section id="43697717">
          <h3>
            <a
              class="item"
              href="https://knightcolumbia.org/content/ai-as-normal-technology"
              >AI as Normal Technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 20:05:07</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43697717"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43692746">
          <h3>
            <a
              class="item"
              href="https://www.tdk.com/en/about_tdk/innovation/spin-photo-detector/index.html"
              >Ultrafast Optical Detector</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 13:56:32</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43692746"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43691230">
          <h3>
            <a
              class="item"
              href="https://github.com/pydantic/pydantic-ai/tree/main/mcp-run-python"
              >MCP Run Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 11:09:30</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43691230"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43679065">
          <h3>
            <a class="item" href="https://ysymyth.github.io/The-Second-Half/"
              >The Second Half</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-14 @ 07:57:02</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43679065"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43678144">
          <h3>
            <a class="item" href="https://www.makingsoftware.com/"
              >Making Software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-14 @ 04:48:54</span
              ><span class="points-container"
                >Points: <span class="points">473</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43678144"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43678138">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41586-024-08165-7"
              >Adipose tissue retains an epigenetic memory of obesity after
              weight loss</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-14 @ 04:47:51</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43678138"
                  >Comments</a
                ><span class="descendants">: 228</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
