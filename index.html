<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44728554">
          <h3>
            <a class="item" href="https://status.webflow.com"
              >Webflow Down for &amp;gt;31 Hours</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 21:38:58</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44728554"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44728513">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/codecrafters/jobs/7ATipKJ-1st-marketing-hire"
              >CodeCrafters (YC S22) is hiring first Marketing Person</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 21:34:28</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44728369">
          <h3>
            <a
              class="item"
              href="https://www.neowin.net/news/microsoft-bans-libreoffice-developers-account-without-warning-rejects-appeal/"
              >Microsoft bans LibreOffice developer's account without warning,
              rejects appeal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 21:19:19</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44728369"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44728188">
          <h3>
            <a
              class="item"
              href="https://JapaneseNostalgicCar.com/rip-shunsaku-tamiya-plastic-model-kits/"
              >RIP Shunsaku Tamiya, the man who made plastic model kits a global
              obsession</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 20:57:47</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44728188"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727788">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2507.12856"
              >Supervised Fine Tuning on Curated Data is Reinforcement
              Learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 20:18:23</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727788"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727420">
          <h3>
            <a
              class="item"
              href="https://news.uoguelph.ca/2025/07/more-honey-bees-dying-even-as-antibiotic-use-halves/"
              >More honey bees dying, even as antibiotic use halves</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 19:37:05</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727420"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727298">
          <h3>
            <a class="item" href="https://maruos.com/"
              >Maru OS – Your phone is your PC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 19:24:40</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727298"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727191">
          <h3>
            <a
              class="item"
              href="https://hms.harvard.edu/news/how-brain-increases-blood-flow-demand"
              >How the brain increases blood flow on demand</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 19:13:32</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727191"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44726838">
          <h3>
            <a
              class="item"
              href="https://alicegg.tech//2025/07/29/open-source-llm.html"
              >Playing with Open Source LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 18:36:51</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726838"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44726837">
          <h3>
            <a
              class="item"
              href="https://www.bigtechnology.com/p/the-making-of-dario-amodei"
              >The Making of Dario Amodei</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 18:36:34</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726837"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44726807">
          <h3>
            <a class="item" href="https://monochromate.lirena.in"
              >Show HN: Monchromate – the best greyscale browser extension</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 18:32:42</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726807"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                That's how I came up with it, made it open source, recently
                passed 100 users over chrome webstore and it have 5-star rating
                as of now.
              </p>
              <p>
                and yes you might say that why would I need it when I can do
                this with filters that can be toggled via settings, thing is I
                didn't wanted to greyscale my work sites as well and thus I made
                site exclusion, also have scheduler, intensity control and above
                that all it supports all the browsers including Firefox
                providing same experience.
              </p>
              <p>Would love any kind of feedback over this!!</p>
            </div>
          </section>
        </section>
        <section id="44726736">
          <h3>
            <a
              class="item"
              href="https://poetsandquants.com/2025/07/28/the-secret-stanford-program-no-ones-heard-about/"
              >Stanford’s Management Science and Engineering programs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 18:25:00</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726736"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44726731">
          <h3>
            <a
              class="item"
              href="https://neilzone.co.uk/2023/08/a-month-using-xmpp-using-snikket-for-every-call-and-chat/"
              >A month using XMPP (using Snikket) for every call and chat
              (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 18:24:23</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726731"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44726672">
          <h3>
            <a class="item" href="https://github.com/dkamm/pr-quiz"
              >Show HN: A GitHub Action that quizzes you on a pull request</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 18:20:11</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726672"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
            <div class="text">
              <p>
                PR Quiz uses AI to generate a quiz from a pull request and
                blocks you from merging until the quiz is passed. You can
                configure various options like the LLM model to use, max number
                of attempts to pass the quiz or min diff size to generate a quiz
                for. I found that the reasoning models, while more expensive,
                generated better questions from my limited testing.
              </p>
              <p>
                Privacy: This GitHub Action runs a local webserver and uses
                ngrok to serve the quiz through a temporary url. Your code is
                only sent to the model provider (OpenAI).
              </p>
            </div>
          </section>
        </section>
        <section id="44726551">
          <h3>
            <a
              class="item"
              href="https://www.zdnet.com/article/linux-6-16-brings-faster-file-systems-improved-confidential-memory-support-and-more-rust-support/"
              >Linux 6.16: faster file systems, improved confidential memory,
              more Rust support</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 18:09:58</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726551"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44726280">
          <h3>
            <a class="item" href="https://github.com/jarulraj/periodic-table"
              >A Periodic Table of System Design Principles</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 17:44:58</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726280"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44725764">
          <h3>
            <a class="item" href="https://openai.com/index/chatgpt-study-mode/"
              >Study mode</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 17:01:14</span
              ><span class="points-container"
                >Points: <span class="points">540</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44725764"
                  >Comments</a
                ><span class="descendants">: 334</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44725757">
          <h3>
            <a
              class="item"
              href="http://a64.in/posts/learning-basic-electronics-by-building-fireflies/"
              >Learning basic electronics by building fireflies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 17:00:43</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44725757"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44725306">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44725306"
              >Launch HN: Hyprnote (YC S25) – An open-source AI meeting
              notetaker</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 16:24:08</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44725306"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
            <div class="text">
              <a href="https://hyprnote.com">https://hyprnote.com</a>). We're
              building an open-source, privacy-first AI note-taking app that
              runs fully on-device. Think of it as an open-source Granola. No
              Zoom bots, no cloud APIs, no data ever leaves your machine.
              <p>
                Source code:
                <a href="https://github.com/fastrepl/hyprnote"
                  >https://github.com/fastrepl/hyprnote</a
                >
                Demo video:
                <a href="https://hyprnote.com/demo"
                  >https://hyprnote.com/demo</a
                >
              </p>
              <p>
                We built Hyprnote because some of our friends told us that their
                companies banned certain meeting notetakers due to data
                concerns, or they simply felt uncomfortable sending data to
                unknown servers. So they went back to manual note-taking -
                losing focus during meetings and wasting time afterward.
              </p>
              <p>
                We asked: could we build something just as useful, but
                completely local?
              </p>
              <p>
                Hyprnote is a desktop app that transcribes and summarizes
                meetings on-device. It captures both your mic input and system
                audio, so you don't need to invite bots. It generates a summary
                based on the notes you take. Everything runs on local AI models
                by default, using Whisper and HyprLLM. HyprLLM is our
                proof-of-concept model fine-tuned from Qwen3 1.7B. We learned
                that summarizing meetings is a very nuanced task and that a
                model's raw intelligence (or weight) doesn't matter THAT much.
                We'll release more details on evaluation and training once we
                finish the 2nd iteration of the model (still not that good we
                can make it a lot better).
              </p>
              <p>
                Whisper inference:
                <a
                  href="https://github.com/fastrepl/hyprnote/blob/main/crates/whisper-local/src/model.rs"
                  >https://github.com/fastrepl/hyprnote/blob/main/crates/whispe...</a
                >
              </p>
              <p>
                AEC inference:
                <a
                  href="https://github.com/fastrepl/hyprnote/blob/main/crates/aec/src/lib.rs"
                  >https://github.com/fastrepl/hyprnote/blob/main/crates/aec/sr...</a
                >
              </p>
              <p>
                LLM inference:
                <a
                  href="https://github.com/fastrepl/hyprnote/blob/main/crates/llama/src/lib.rs"
                  >https://github.com/fastrepl/hyprnote/blob/main/crates/llama/...</a
                >
              </p>
              <p>
                We also learned that for some folks, having full data
                controllability was as important as privacy. So we support
                custom endpoints, allowing users to bring in their company's
                internal LLM. For teams that need integrations, collaboration,
                or admin controls, we're working on an optional server component
                that can be self-hosted. Lastly, we're exploring ways to make
                Hyprnote work like VSCode, so you can install extensions and
                build your own workflows around your meetings.
              </p>
              <p>
                We believe privacy-first tools, powered by local models, are
                going to unlock the next wave of real-world AI apps.
              </p>
              <p>We're here and looking forward to your comments!</p>
            </div>
          </section>
        </section>
        <section id="44725202">
          <h3>
            <a class="item" href="https://www.kathaaverse.com/"
              >Show HN: I built an AI that turns any book into a text adventure
              game</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 16:17:14</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44725202"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
            <div class="text">
              <p>Note: Work in progress. Suggestions are welcome.</p>
            </div>
          </section>
        </section>
        <section id="44724287">
          <h3>
            <a
              class="item"
              href="https://googleprojectzero.blogspot.com/2025/07/reporting-transparency.html"
              >Project Zero – Policy and Disclosure: 2025 Edition</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 15:03:40</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44724287"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44724238">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/scienceadviser-cats-confuse-ai"
              >Irrelevant facts about cats added to math problems increase LLM
              errors by 300%</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 14:59:18</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44724238"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44724068">
          <h3>
            <a class="item" href="https://observablehq.com/notebook-kit/"
              >Observable Notebooks 2.0 Technology Preview</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 14:44:00</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44724068"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44723316">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2025/Jul/29/space-invaders/"
              >My 2.5 year old laptop can write Space Invaders in JavaScript now
              (GLM-4.5 Air)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 13:45:07</span
              ><span class="points-container"
                >Points: <span class="points">401</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44723316"
                  >Comments</a
                ><span class="descendants">: 295</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44722951">
          <h3>
            <a
              class="item"
              href="https://netflixtechblog.com/linux-performance-analysis-in-60-000-milliseconds-accc10403c55"
              >Linux Performance Analysis (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 13:15:49</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44722951"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44705358">
          <h3>
            <a
              class="item"
              href="https://blog.yoshuawuyts.com/placing-functions/"
              >Placing Functions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-27 @ 22:36:24</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44705358"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44695364">
          <h3>
            <a
              class="item"
              href="https://docs.flightsimulator.com/msfs2024/html/6_Programming_APIs/WASM/WebAssembly.htm"
              >Microsoft Flight Simulator 2024: WebAssembly SDK</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-26 @ 16:44:17</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44695364"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44692718">
          <h3>
            <a class="item" href="https://www.amodeling.com/"
              >2D to 3D model and 3D print it</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-26 @ 09:36:07</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44692718"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44691242">
          <h3>
            <a
              class="item"
              href="https://www.laphamsquarterly.org/roundtable/motet-record"
              >A grand tour through the essays of Lewis H. Lapham</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-26 @ 04:09:04</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44691242"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44689565">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=C1nZzQqcPZw"
              >BugBash Ep1 – FoundationDB: from idea to Apple acquisition
              [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-25 @ 23:06:18</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44689565"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
