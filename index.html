<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43292471">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/science/2025/mar/07/athena-spacecraft-mission-dead"
              >Athena spacecraft declared dead after toppling over on moon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 18:06:45</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292471"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292058">
          <h3>
            <a class="item" href="https://contentfoundry.com/"
              >Show HN: A big tech dev experience for an open source CMS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:24:26</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292058"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
            <div class="text">
              <p>
                Hey HN! We're building an open-source CMS designed to help
                creators with every part of the content production pipeline.
              </p>
              <p>
                We're showing our tiny first step: A tool designed to take in a
                Twitter username and produce an "identity card" based on it. We
                expect to use an approach similar to [Constitutional AI] with an
                explicit focus on repeatability, testability, and verification
                of an "identity card." We think this approach could be used to
                create finetuning examples for training changes, or serve as
                inference time insight for LLMs, or most likely a combination of
                the two.
              </p>
              <p>
                The tooling we're showing today is extremely simplistic (and the
                AI is frankly bad) but this is intentional. We're more focused
                on showing the dev experience and community aspects. We'd like
                to make it easier to contribute to this project than edit
                Wikipedia. Communities are frustrated with things like
                Wordpress, Apache, and other open source foundations focusing on
                things other than software. We have a lot of community ideas
                (governance via vote by jury is perhaps the most interesting).
              </p>
              <p>
                We're a team of 5, and we've bounced around a few companies with
                each other. We're all professional creators (video + music) and
                we're creating tooling for ourselves first.
              </p>
              <p>
                Previously, we did a startup called Vidpresso (YC W14) that was
                acquired by Facebook in 2018. We all worked at Facebook for 5
                years on creator tooling, and have since left to start this
                thing.
              </p>
              <p>
                After leaving FB, it was painful for us to leave the warm
                embrace of the Facebook infra team where we had amazing tooling.
                Since then, we've pivoted a bunch of times trying to figure out
                our "real" product. While we think we've finally nailed it, the
                developer experience we built is one we think others could
                benefit from.
              </p>
              <p>
                Our tooling is designed so any developer can easily jump in and
                start contributing. It's an AI-first dev environment designed
                with a few key principles in mind:
              </p>
              <p>
                1. You should be able to discover any command you need to run
                without looking at docs. 2. To make a change, as much context as
                possible should be provided as close to the code as possible. 3.
                AIs are "people too", in the sense that they benefit from
                focused context, and not being distracted by having to search
                deeply through multiple files or documentation to make changes.
              </p>
              <p>
                We have a few non-traditional elements to our stack which we
                think are worth exploring. [Isograph] helps us simplify our
                component usage with GraphQL. [Replit] lets people use AI coding
                without needing to set up any additional tooling. We've learned
                how to treat it like a junior developer, and think it will be
                the best platform for AI-first open source projects going
                forward. [Sapling] (and Git together) for version control. It
                might sound counter intuitive, but we use Git to manage agent
                interactionsand we use Sapling to manage "purposeful" commits.
              </p>
              <p>
                My last [Show HN post in 2013] ended up helping me find my
                Vidpresso cofounder so I have high hopes for this one. I'm
                excited to meet anyone, developers, creators, or nice people in
                general, and start to work with them to make this project work.
                I have good references of being a nice guy, and aim to keep that
                going with this project.
              </p>
              <p>
                The best way to work with us is [remix our Replit app] and [join
                our Discord].
              </p>
              <p>
                Thanks for reading and checking us out! It's super early, but
                we're excited to work with you!
              </p>
              <p>
                [Constitutional AI]:
                <a
                  href="https://www.anthropic.com/research/constitutional-ai-harmlessness-from-ai-feedback"
                  >https://www.anthropic.com/research/constitutional-ai-harmles...</a
                >
              </p>
              <p>
                [Isograph]:
                <a href="https://isograph.dev">https://isograph.dev</a>
              </p>
              <p>
                [Replit]: <a href="https://replit.com">https://replit.com</a>
              </p>
              <p>
                [Sapling]:
                <a href="https://sapling-scm.com">https://sapling-scm.com</a>
              </p>
              <p>
                [Show HN post in 2013]:
                <a href="https://news.ycombinator.com/item?id=6993981"
                  >https://news.ycombinator.com/item?id=6993981</a
                >
              </p>
              <p>
                [remix our Replit app]:
                <a
                  href="https://replit.com/t/bolt-foundry/repls/Content-Foundry/view#README.md"
                  >https://replit.com/t/bolt-foundry/repls/Content-Foundry/view...</a
                >
              </p>
              <p>
                [join our Discord]:
                <a href="https://discord.gg/TjQZfWjSQ7"
                  >https://discord.gg/TjQZfWjSQ7</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43292056">
          <h3>
            <a
              class="item"
              href="https://developer.chrome.com/blog/command-and-commandfor"
              >Introducing command And commandfor In HTML</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:24:02</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292056"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292050">
          <h3>
            <a class="item" href="https://cedardb.com/blog/optimistic_btrees/"
              >Optimistic Locking in B-Trees</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:23:28</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292050"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291946">
          <h3>
            <a class="item" href="https://github.com/directvt/vtm"
              >Vtm: Text-Based Desktop Environment</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:12:30</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43291946"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291839">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/kraftful/jobs/NdXFHyV-founding-engineer"
              >Kraftful (YC S19) is hiring a founding eng to support our
              hockey-stick growth</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:00:44</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291678">
          <h3>
            <a class="item" href="https://github.com/Interactive-Echoes/IEMidi"
              >Show HN: IEMidi –  Cross-platform MIDI map editor for arbitrary
              controllers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 16:44:20</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43291678"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291541">
          <h3>
            <a
              class="item"
              href="https://aeon.co/essays/why-reading-martha-c-nussbaums-philosophy-is-pure-pleasure"
              >Why reading Martha C Nussbaum's philosophy is pure pleasure</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 16:29:18</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43291541"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291299">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-02-laser-based-device-scan-sample.html"
              >Laser-based device can scan almost any sample of gas and tell you
              what's in it</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 16:06:37</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43291299"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43290892">
          <h3>
            <a
              class="item"
              href="https://nodumbideas.com/p/betting-on-the-pope-was-the-original"
              >Betting on the Pope was the original prediction market</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 15:25:13</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43290892"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43290555">
          <h3>
            <a
              class="item"
              href="https://engineering.fb.com/2025/01/21/production-engineering/strobelight-a-profiling-service-built-on-open-source-technology/"
              >Strobelight: A profiling service built on open source
              technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 14:43:24</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43290555"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43289245">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2025-03-naturally-molecule-rivals-ozempic-weight.html"
              >Natural occurring molecule rivals Ozempic in weight loss,
              sidesteps side effects</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 11:16:41</span
              ><span class="points-container"
                >Points: <span class="points">308</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43289245"
                  >Comments</a
                ><span class="descendants">: 251</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43288861">
          <h3>
            <a class="item" href="https://www.jjj.de/fxt/fxtbook.pdf"
              >Matters Computational (2010) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 10:06:38</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43288861"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43287821">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2503.00735"
              >Ladder: Self-improving LLMs through recursive problem
              decomposition</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 06:45:57</span
              ><span class="points-container"
                >Points: <span class="points">271</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43287821"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43286161">
          <h3>
            <a
              class="item"
              href="https://google-research.github.io/self-organising-systems/difflogic-ca/?hn"
              >Differentiable Logic Cellular Automata</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 23:43:37</span
              ><span class="points-container"
                >Points: <span class="points">383</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43286161"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43285671">
          <h3>
            <a class="item" href="https://dadrian.io/blog/posts/sct-not-after/"
              >How to distrust a CA without any certificate errors</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 22:28:01</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43285671"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43284811">
          <h3>
            <a class="item" href="https://github.com/David-OConnor/lin-alg"
              >Show HN: Rust Vector and Quaternion Lib</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 20:32:47</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43284811"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
            <div class="text">
              <p>
                I use this on various projects, including quadcopter firmware, a
                graphics engine, a cosmology simulation, and several molecular
                dynamics applications. No_std compatible.
              </p>
            </div>
          </section>
        </section>
        <section id="43284420">
          <h3>
            <a
              class="item"
              href="https://openpipe.ai/blog/using-grpo-to-beat-o1-o3-mini-and-r1-on-temporal-clue"
              >Using GRPO to Beat o1, o3-mini and R1 at “Temporal Clue”</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 19:51:55</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43284420"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43283498">
          <h3>
            <a
              class="item"
              href="https://blog.koehntopp.info/2023/05/06/50-years-in-filesystems-1984.html"
              >50 Years in Filesystems: 1984</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 18:34:11</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43283498"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43282995">
          <h3>
            <a class="item" href="https://blog.startifact.com/posts/succinct/"
              >Succinct data structures</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 17:48:37</span
              ><span class="points-container"
                >Points: <span class="points">508</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43282995"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43282905">
          <h3>
            <a class="item" href="https://mistral.ai/fr/news/mistral-ocr"
              >Mistral OCR</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 17:39:39</span
              ><span class="points-container"
                >Points: <span class="points">1619</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43282905"
                  >Comments</a
                ><span class="descendants">: 400</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43282133">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/the-surprisingly-difficult-mathematical-proof-that-anime-fans-helped-solve/"
              >Anime fans stumbled upon a mathematical proof</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 16:37:34</span
              ><span class="points-container"
                >Points: <span class="points">462</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43282133"
                  >Comments</a
                ><span class="descendants">: 217</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43257460">
          <h3>
            <a class="item" href="https://genna.win/blog/convolution-simd/"
              >Performance optimization, and how to do it wrong</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-04 @ 17:14:26</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43257460"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43255789">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/news/623306/google-photos-digital-photo-frame-auto-sync-going-away"
              >Google change is breaking some digital photo frames</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-04 @ 15:19:23</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43255789"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43253704">
          <h3>
            <a
              class="item"
              href="https://semiengineering.com/speeding-up-computational-lithography-with-the-power-and-parallelism-of-gpus/"
              >Speeding up computational lithography with the power and
              parallelism of GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-04 @ 12:32:38</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43253704"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43252994">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/quantum-mechanics"
              >Why Quantum Engineering Is Emerging as a Distinct Industrial
              Sector</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-04 @ 10:51:59</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43252994"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43247979">
          <h3>
            <a class="item" href="https://ereader-swedish.fly.dev/"
              >Ereader Easy Swedish</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-03 @ 23:12:41</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43247979"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43246206">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/03/03/technology/anthropic-ai-fund-raising-61-billion.html"
              >Anthropic raises $3.5B at $61.5B valuation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-03 @ 20:20:22</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43246206"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43243110">
          <h3>
            <a
              class="item"
              href="https://leancrew.com/all-this/2025/03/a-sciam-bolt-puzzle/"
              >A Scientific American bolt puzzle</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-03 @ 16:06:51</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43243110"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43239284">
          <h3>
            <a
              class="item"
              href="https://pompeiisites.org/en/comunicati/pompeii-discovery-of-a-room-with-frescoes-depicting-the-initiation-into-the-mysteries-and-the-dionysiac-procession/"
              >Discovery of fresco portraying Dionysian mysteries at Pompeii</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-03 @ 07:47:49</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43239284"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
