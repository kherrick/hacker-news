<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39569559">
          <h3>
            <a
              class="item"
              href="https://9to5google.com/2024/02/29/google-messages-rcs-rooted/"
              >Google Messages RCS is blocked on rooted, custom ROM Android
              phones</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-02 @ 03:33:26</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39569559"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39568935">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2024/03/01/spotify-epic-games-and-others-pen-letter-to-ec-claiming-apple-has-made-a-mockery-of-the-dma/"
              >Spotify, Epic Games pen letter to EC, claiming Apple has made a
              'mockery' of DMA</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-02 @ 01:28:12</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39568935"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39568728">
          <h3>
            <a
              class="item"
              href="https://wizardzines.com/comics/bash-debugging/"
              >Bash Debugging</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-02 @ 00:48:51</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39568728"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39568622">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2402.11753"
              >ArtPrompt: ASCII Art-Based Jailbreak Attacks Against Aligned
              LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-02 @ 00:30:06</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39568622"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39567780">
          <h3>
            <a
              class="item"
              href="https://adaic.org/resources/add_content/docs/craft/html/contents.htm"
              >Ada 95: The Craft of Object-Oriented Programming</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 22:52:57</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39567780"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39567597">
          <h3>
            <a
              class="item"
              href="https://www.cpuc.ca.gov/-/media/cpuc-website/divisions/consumer-protection-and-enforcement-division/documents/tlab/av-programs/waymo-al-2-disposition-letter-20240301_signed.pdf"
              >California Approves Waymo Expansion to Los Angeles and SF
              Peninsula [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 22:34:02</span
              ><span class="points-container"
                >Points: <span class="points">253</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39567597"
                  >Comments</a
                ><span class="descendants">: 318</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39566766">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/tech-policy/2024/03/whatsapp-finally-forces-pegasus-spyware-maker-to-share-its-secret-code/"
              >WhatsApp forces Pegasus spyware maker to share its secret code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 21:02:59</span
              ><span class="points-container"
                >Points: <span class="points">251</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39566766"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39566732">
          <h3>
            <a class="item" href="https://github.com/pydantic/FastUI"
              >FastUI: Build Better UIs Faster</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 20:59:18</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39566732"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39566064">
          <h3>
            <a
              class="item"
              href="https://decoded.avast.io/janvojtesek/lazarus-and-the-fudmodule-rootkit-beyond-byovd-with-an-admin-to-kernel-zero-day/"
              >Lazarus and the FudModule rootkit: Beyond BYOVD with an
              admin-to-kernel zero-day</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 19:54:30</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39566064"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39565788">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39565788"
              >Ask HN: How do you find employment opportunities in 2024?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 19:29:33</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39565788"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
            <div class="text">
              <p>
                About 9 years ago, I was recruited through LinkedIn and landed a
                position at the company I'm still working for today. At that
                time, it seemed as though this method of discovering career
                opportunities was the norm, and so while my experience with this
                particular recruiter was not great, it all worked out and I
                settled into my new role fairly comfortably.
              </p>
              <p>
                After about 6 years, I felt like I'd be doing myself a
                disservice if I waited any longer to begin scoping out the job
                market. But a few years have passed now without much to really
                show for it in the way of interviews or really any interesting
                job prospects at all.
              </p>
              <p>
                In fact, it almost seems like the world has moved on without me.
                I feel as though I'm wasting my time on LinkedIn, but I'm also
                not aware of any fancy new replacement that has come along in
                the last decade either.
              </p>
              <p>
                So in your experience, how does one find employment
                opportunities in 2024? Is it all about networking? Are things
                just really tough in the IT world lately?
              </p>
            </div>
          </section>
        </section>
        <section id="39564899">
          <h3>
            <a
              class="item"
              href="https://current.org/2020/08/lorenzo-milam-legendary-pioneer-of-community-radio-dies-at-86/"
              >Lorenzo Milam, pioneer of community radio (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 18:22:47</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39564899"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39564674">
          <h3>
            <a
              class="item"
              href="https://forums.atariage.com/topic/362182-colecovision-basic-compiler-cvbasic-v010/"
              >Colecovision BASIC compiler: CVBasic v0.1.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 18:04:48</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39564674"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39564254">
          <h3>
            <a
              class="item"
              href="https://digitalcosmonaut.com/the-cosmonaut-of-potsdam/"
              >The Cosmonaut of Potsdam</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 17:33:54</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39564254"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39563618">
          <h3>
            <a
              class="item"
              href="https://appleinsider.com/articles/24/03/01/apple-reverses-course-on-death-of-progressive-web-apps-in-eu"
              >Apple reverses course on death of Progressive Web Apps in EU</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 16:48:45</span
              ><span class="points-container"
                >Points: <span class="points">592</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39563618"
                  >Comments</a
                ><span class="descendants">: 308</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39563305">
          <h3>
            <a class="item" href="https://einenlum.github.io/human-replay/"
              >Show HN: Replay your typing in a few lines of JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 16:25:00</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39563305"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                Human replay allows to copy paste a few lines of JS to make a
                text appear exactly how you typed it.
              </p>
            </div>
          </section>
        </section>
        <section id="39562986">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39562986"
              >Ask HN: Who is hiring? (March 2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 16:00:03</span
              ><span class="points-container"
                >Points: <span class="points">290</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39562986"
                  >Comments</a
                ><span class="descendants">: 279</span></span
              >
            </h4>
            <div class="text">
              <i>not</i> an option, include ONSITE.
              <p>
                Please only post if you personally are part of the hiring
                company—no recruiting firms or job boards. One post per company.
                If it isn't a household name, explain what your company does.
              </p>
              <p>
                Commenters: please don't reply to job posts to complain about
                something. It's off topic here.
              </p>
              <p>
                Readers: please only email if you are personally interested in
                the job.
              </p>
              <p>
                Searchers: try
                <a href="https://www.remotenbs.com">https://www.remotenbs.com</a
                >,
                <a href="https://hnjobs.u-turn.dev">https://hnjobs.u-turn.dev</a
                >,
                <a href="https://hnresumetojobs.com"
                  >https://hnresumetojobs.com</a
                >,
                <a href="https://hnhired.fly.dev">https://hnhired.fly.dev</a>,
                <a href="https://kennytilton.github.io/whoishiring/"
                  >https://kennytilton.github.io/whoishiring/</a
                >,
                <a href="https://hnjobs.emilburzo.com"
                  >https://hnjobs.emilburzo.com</a
                >.
              </p>
              <p>Don't miss these other fine threads:</p>
              <p>
                <i>Who wants to be hired?</i>
                <a href="https://news.ycombinator.com/item?id=39562984"
                  >https://news.ycombinator.com/item?id=39562984</a
                >
              </p>
              <p>
                <i>Freelancer? Seeking freelancer?</i>
                <a href="https://news.ycombinator.com/item?id=39562985"
                  >https://news.ycombinator.com/item?id=39562985</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39562984">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39562984"
              >Ask HN: Who wants to be hired? (March 2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 16:00:02</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39562984"
                  >Comments</a
                ><span class="descendants">: 268</span></span
              >
            </h4>
            <div class="text">
              <p></p>
              <pre><code>  Location:
  Remote:
  Willing to relocate:
  Technologies:
  Résumé/CV:
  Email:
</code></pre>
              Readers: please only email these addresses to discuss work
              opportunities.
            </div>
          </section>
        </section>
        <section id="39562760">
          <h3>
            <a
              class="item"
              href="https://www.npr.org/2024/02/27/1234271434/4-day-workweek-successful-a-year-later-in-uk"
              >Study: 61 UK firms tried a 4-day workweek and after a year, they
              still love it</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 15:39:40</span
              ><span class="points-container"
                >Points: <span class="points">314</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39562760"
                  >Comments</a
                ><span class="descendants">: 234</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39562610">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/history-of-power-grid"
              >The Telechron master station clock was used to maintain power
              grid frequency</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 15:24:09</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39562610"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39562530">
          <h3>
            <a class="item" href="https://hullworks.com/wood/"
              >Old vs. new growth trees and the wood products they make</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 15:15:13</span
              ><span class="points-container"
                >Points: <span class="points">249</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39562530"
                  >Comments</a
                ><span class="descendants">: 198</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39562467">
          <h3>
            <a
              class="item"
              href="https://blog.trailofbits.com/2024/03/01/toward-more-effective-curl-fuzzing/"
              >How we applied fuzzing techniques to cURL</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 15:09:54</span
              ><span class="points-container"
                >Points: <span class="points">239</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39562467"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39561799">
          <h3>
            <a
              class="item"
              href="https://www.brendangregg.com/ColonyGraphs/cloud.html"
              >Colony Graphs: Visualizing the Cloud (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 13:57:30</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39561799"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39561492">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/03/01/science/daddy-long-legs-eyes.html"
              >A daddy-longlegs possesses six eyes, including two vestigial
              pairs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 13:21:19</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39561492"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39560862">
          <h3>
            <a
              class="item"
              href="https://cgad.ski/blog/where-is-noethers-principle-in-machine-learning.html"
              >Where is Noether's principle in machine learning?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 11:47:30</span
              ><span class="points-container"
                >Points: <span class="points">232</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39560862"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39559966">
          <h3>
            <a
              class="item"
              href="https://www.courthousenews.com/wp-content/uploads/2024/02/musk-v-altman-openai-complaint-sf.pdf"
              >Elon Musk sues Sam Altman, Greg Brockman, and OpenAI [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 08:56:05</span
              ><span class="points-container"
                >Points: <span class="points">1269</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39559966"
                  >Comments</a
                ><span class="descendants">: 999</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39559281">
          <h3>
            <a
              class="item"
              href="https://cloudinary.com/blog/jpeg-xl-and-the-pareto-front"
              >JPEG XL and the Pareto Front</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-01 @ 06:55:59</span
              ><span class="points-container"
                >Points: <span class="points">433</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39559281"
                  >Comments</a
                ><span class="descendants">: 262</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39549273">
          <h3>
            <a class="item" href="https://github.com/microsoft/Security-101"
              >Microsoft Security-101: Open-Source curriculum</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-29 @ 13:52:51</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39549273"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39548260">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Dallol_(hydrothermal_system)"
              >Dallol</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-29 @ 11:59:02</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39548260"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39547822">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39547822"
              >Ask HN: Are there any websites for SQL puzzle games?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-29 @ 09:32:34</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39547822"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                Does anyone know of websites that provide SQL puzzle games that
                allow users to solve problems by writing SQL and validating
                them? I believe this would be an engaging way to enhance my SQL
                skills. Your suggestions are appreciated!
              </p>
            </div>
          </section>
        </section>
        <section id="39547236">
          <h3>
            <a class="item" href="https://apod.nasa.gov/apod/ap240228.html"
              >How does the sky turn dark at night?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-29 @ 07:49:09</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39547236"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
