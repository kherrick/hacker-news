<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="47045459">
          <h3>
            <a
              class="item"
              href="https://www.heise.de/en/news/WD-and-Seagate-confirm-Hard-drives-for-2026-sold-out-11178917.html"
              >WD and Seagate confirm: Hard drives sold out for 2026</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 09:38:54</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47045459"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47044293">
          <h3>
            <a class="item" href="http://svardos.org/"
              >SvarDOS – an open-source DOS distribution</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 06:18:34</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47044293"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47042895">
          <h3>
            <a
              class="item"
              href="https://surfingcomplexity.blog/2026/02/16/poor-deming-never-stood-a-chance/"
              >Poor Deming never stood a chance</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 02:13:37</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47042895"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47042766">
          <h3>
            <a
              class="item"
              href="https://vo2maxpro.com/blog/thinking-hard-burns-no-calories-destroys-workout"
              >Thinking hard burns almost no calories but destroys your next
              workout</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 01:55:50</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47042766"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47042396">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/cx2gn239exlo"
              >Dark web agent spotted bedroom wall clue to rescue girl from
              abuse</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 01:01:00</span
              ><span class="points-container"
                >Points: <span class="points">434</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47042396"
                  >Comments</a
                ><span class="descendants">: 233</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47041973">
          <h3>
            <a class="item" href="https://codemade.net/blog/building-for-one/"
              >Building for an audience of one: starting and finishing side
              projects with AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 00:00:03</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47041973"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47041836">
          <h3>
            <a class="item" href="https://forestrydiary.com/"
              >Show HN: Scanned 1927-1945 Daily USFS Work Diary</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 23:40:33</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47041836"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
            <div class="text">
              <p>
                <a href="https://forestrydiary.com/"
                  >https://forestrydiary.com/</a
                >
              </p>
              <p>
                This is one of those projects I've sat on for years, but with
                Claude and Mistral helping with the handwriting recognition, and
                even helping me write a custom scanning app that would auto scan
                each page and put it into a database as I assembled everything.
              </p>
              <p>
                As far as I know, this is the only US Forestry Diary that has
                been fully scanned in and published. I understand that there are
                other diaries in some collections, but none have been scanned
                in. I hope this helps somebody. Please let me know if it does.
              </p>
              <p>
                This is the sort of project Claude and AI can help with - A
                personal project that sits on the shelf forever, but now a
                reasonable project that can be published in my spare time. I'm
                not trying to earn money on this, but just improving our
                knowledge and history just a little bit.
              </p>
            </div>
          </section>
        </section>
        <section id="47041456">
          <h3>
            <a
              class="item"
              href="https://www.docker.com/blog/run-nanoclaw-in-docker-shell-sandboxes/"
              >Running NanoClaw in a Docker Shell Sandbox</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 22:53:02</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47041456"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47040524">
          <h3>
            <a
              class="item"
              href="https://dolphin-emu.org/blog/2026/02/16/rise-of-the-triforce/"
              >Rise of the Triforce</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 21:24:04</span
              ><span class="points-container"
                >Points: <span class="points">289</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47040524"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47040430">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2602.12670"
              >SkillsBench: Benchmarking how well agent skills work across
              diverse tasks</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 21:15:56</span
              ><span class="points-container"
                >Points: <span class="points">338</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47040430"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47040390">
          <h3>
            <a
              class="item"
              href="https://apps.apple.com/us/app/wildex-identify-plants-animals/id6748092158"
              >Show HN: Wildex – Pokémon Go for real wildlife</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 21:12:07</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47040390"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
            <div class="text">
              <p>
                My wife and I both love nature and have always wanted a Pokémon
                go style app, to collect and learn about different species we
                find.
              </p>
              <p>
                All the usual species identifying apps were didn’t feel fun
                enough, so we designed and built one together!
              </p>
              <p>
                Would love for you guys to give it a try and share any thoughts
                you have.
              </p>
            </div>
          </section>
        </section>
        <section id="47040375">
          <h3>
            <a class="item" href="https://github.com/zachlatta/freeflow"
              >Show HN: Free alternative to Wispr Flow, Superwhisper, and
              Monologue</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 21:10:44</span
              ><span class="points-container"
                >Points: <span class="points">198</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47040375"
                  >Comments</a
                ><span class="descendants">: 93</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47040268">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=47040268"
              >Turing Labs (YC W20) Is Hiring – Founding GTM Sales Hacker</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 21:00:13</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Our AI platform cuts this insane trial-and-error manual process
                from months to days. We’re not selling AI hype; we’re delivering
                real value to the world’s biggest brands - many your family may
                be consuming everyday. The proof? Our contracts and ridiculous
                retention.Want to help make the products your family uses better
                and healthier? Join us-
                <a
                  href="https://www.ycombinator.com/companies/turing-labs-inc/jobs/QpxEuRd-sales-gtm-hacker"
                  >https://www.ycombinator.com/companies/turing-labs-inc/jobs/Q...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="47039478">
          <h3>
            <a
              class="item"
              href="https://blog.sturdystatistics.com/posts/show_hn/"
              >State of Show HN: 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 19:55:23</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47039478"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47038731">
          <h3>
            <a
              class="item"
              href="https://essays.debugyourpain.com/p/you-are-not-just-your-brain"
              >Neurons outside the brain</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 18:54:37</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47038731"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47038546">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/innovation/this-14-year-old-is-using-origami-to-design-emergency-shelters-that-are-sturdy-cost-efficient-and-easy-to-deploy-180988179/"
              >14-year-old Miles Wu folded origami pattern that holds 10k times
              its own weight</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 18:41:50</span
              ><span class="points-container"
                >Points: <span class="points">702</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47038546"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47038318">
          <h3>
            <a
              class="item"
              href="https://jkap.io/token-anxiety-or-a-slot-machine-by-any-other-name/"
              >"Token anxiety", a slot machine by any other name</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 18:23:36</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47038318"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47035560">
          <h3>
            <a
              class="item"
              href="https://blog.dmcc.io/journal/2026-bluetooth-privacy-bluehood/"
              >What your Bluetooth devices reveal</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 14:39:32</span
              ><span class="points-container"
                >Points: <span class="points">439</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47035560"
                  >Comments</a
                ><span class="descendants">: 164</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47034087">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2602.11988"
              >Evaluating AGENTS.md: are they helpful for coding agents?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 12:15:39</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47034087"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47033954">
          <h3>
            <a class="item" href="https://glitchycam.com"
              >Show HN: Glitchy camera – a circuit-bent camera simulator in the
              browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 11:57:01</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47033954"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Here are some photos taken:
                <a href="https://glitchycam.com/gallery"
                  >https://glitchycam.com/gallery</a
                >
              </p>
              <p>
                I intentionally leaned towards skeuomorphic design for
                nostalgia. I miss the days where I'd spend hours making a button
                to look like a physical button. Here I chose to make it look
                like a "good enough" Teenage Engineering device UI.
              </p>
              <p>
                I tested/used GPT-5.3-Codex to build this from scratch, since
                there was a lot of hype around it on X. Maybe I wasn’t using it
                right, but I found it needed a lot of code cleanup at every step
                and a lot of hand holding along the way. It missed
                details/nuances and didn't land the skeuomorphic buttons or the
                interaction polish. It mostly helped with boilerplate where
                there wasn't much thinking/detailing. It did give a basic
                starting point for the effect calculations, but didn't really
                move the needle on the details.
              </p>
              <p>
                Please give it a go and let me know what you think - your photos
                and video never leave your browser (you can download them if you
                choose to). Everything is processed locally in your browser
                (works offline), nothing is uploaded or seen by anyone.
              </p>
            </div>
          </section>
        </section>
        <section id="47031334">
          <h3>
            <a class="item" href="https://jmail.world/jemini"
              >Show HN: Jemini – Gemini for the Epstein Files</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 05:53:03</span
              ><span class="points-container"
                >Points: <span class="points">380</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47031334"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
            <div class="text">
              <i>Show HN: JeffTube</i> -
              <a href="https://news.ycombinator.com/item?id=47030797"
                >https://news.ycombinator.com/item?id=47030797</a
              >
            </div>
          </section>
        </section>
        <section id="47022270">
          <h3>
            <a
              class="item"
              href="https://garbagecollected.org/2017/01/31/four-column-ascii/"
              >Four Column ASCII (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-15 @ 09:15:16</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47022270"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47014460">
          <h3>
            <a
              class="item"
              href="https://www.intertronics.co.uk/wp-content/uploads/2017/05/PCB-Rework-and-Repair-Guide.pdf"
              >PCB Rework and Repair Guide [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 13:42:04</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47014460"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47014002">
          <h3>
            <a class="item" href="https://dbg.re/posts/car-file-format/"
              >A deep dive into Apple's .car file format</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 12:18:04</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47014002"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47012895">
          <h3>
            <a class="item" href="https://brandonli.net/spectra/doc/"
              >Rendering the Visible Spectrum</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 08:56:46</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47012895"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47012486">
          <h3>
            <a class="item" href="https://stonetools.ghost.io/dbase-cpm/"
              >DBASE on the Kaypro II</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 07:35:41</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47012486"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47011548">
          <h3>
            <a
              class="item"
              href="https://github.com/NationalSecurityAgency/ghidra"
              >Ghidra by NSA</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 04:24:18</span
              ><span class="points-container"
                >Points: <span class="points">378</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47011548"
                  >Comments</a
                ><span class="descendants">: 194</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47004712">
          <h3>
            <a class="item" href="https://github.com/matt1398/claude-devtools"
              >Show HN: I built a tool to un-dumb Claude Code's CLI output
              (Local Log Viewer)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-13 @ 16:43:50</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47004712"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built this because I got tired of the Claude Code CLI hiding
                details from me.
              </p>
              <p>
                Recent updates have replaced critical output with summaries like
                "Read 3 files" or "Edited 2 files". To see what actually
                happened, I was forced to use `--verbose`, which floods the
                terminal with unreadable JSON and system prompts.
              </p>
              <p>
                I wanted a middle ground: *Full observability without the
                noise.*
              </p>
              <p>
                `claude-devtools` is a local Electron app that tails the session
                logs in `~/.claude/` to reconstruct the execution trace in
                real-time.
              </p>
              <p>
                *Unlike wrappers, it solves the visibility gap in your native
                terminal workflow:* 1. *Real Diffs:* It shows inline diffs
                (red/green) the moment files are edited, instead of just a
                checkmark. 2. *Context Forensics:* It breaks down token usage by
                File vs Tool Output vs Thinking (so you know exactly why your
                context window is full). 3. *Agent Trees:* It visualizes
                sub-agent execution paths which are usually interleaved and
                confusing in the CLI.
              </p>
              <p>
                It’s 100% local, and works with the logs already on your
                machine. No API keys required.
              </p>
              <p>
                Repo:
                <a href="https://github.com/matt1398/claude-devtools"
                  >https://github.com/matt1398/claude-devtools</a
                >
                (Screenshots and diff viewer demo are in the README)
              </p>
            </div>
          </section>
        </section>
        <section id="47002231">
          <h3>
            <a
              class="item"
              href="https://0byte.io/articles/pytorch_introduction.html"
              >Visual introduction to PyTorch</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-13 @ 12:59:33</span
              ><span class="points-container"
                >Points: <span class="points">270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47002231"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47000708">
          <h3>
            <a
              class="item"
              href="https://www.openculture.com/2021/06/hear-the-amati-king-cello-the-oldest-known-cello-in-existence-c-1560.html"
              >Hear the "Amati King Cello", the Oldest Known Cello in
              Existence</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-13 @ 09:17:54</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47000708"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
