<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45035699">
          <h3>
            <a
              class="item"
              href="https://commonsware.com/blog/2025/08/26/uncomfortable-questions-android-developer-verification.html"
              >Uncomfortable Questions About Android Developer Verification</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 05:14:19</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45035699"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45035685">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=w6Ka42eyudA"
              >The man with a Home Computer (1967) [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 05:11:18</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45035685"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45035684">
          <h3>
            <a class="item" href="https://www.praf.me/ai-coding"
              >AI coding made me faster, but I can't code to music anymore</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 05:10:53</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45035684"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45034957">
          <h3>
            <a class="item" href="https://github.com/JakeRoggenbuck/regolith"
              >Show HN: Regolith – Regex library that prevents ReDoS CVEs in
              TypeScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 02:54:07</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45034957"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
            <div class="text">
              <p>
                Why: Many CVEs happen because TypeScript libraries are
                vulnerable to Regular Expression Denial of Service attacks. I
                learned about this problem while doing undergraduate research
                and found that languages like Rust have built-in protection but
                languages like JavaScript, TypeScript, and Python do not. This
                library attempts to mitigate these vulnerabilities for
                TypeScript and JavaScript.
              </p>
              <p>
                How: Regolith uses Rust's Regex library under the hood to
                prevent ReDoS attacks. The Rust Regex library implements a
                linear-time Regex engine that guarantees linear complexity for
                execution. A ReDoS attack occurs when a malicious input is
                provided that causes a normal Regex engine to check for a
                matching string in too many overlapping configurations. This
                causes the engine to take an extremely long time to compute the
                Regex, which could cause latency or downtime for a service. By
                designing the engine to take at most a linear amount of time, we
                can prevent these attacks at the library level and have software
                inherit these safety properties.
              </p>
              <p>
                I'm really fascinated by making programming languages safer and
                I would love to hear any feedback on how to improve this
                project. I'll try to answer all questions posted in the
                comments.
              </p>
              <p>Thanks! - Jake Roggenbuck</p>
            </div>
          </section>
        </section>
        <section id="45034537">
          <h3>
            <a
              class="item"
              href="https://rosenzweig.io/blog/asahi-gpu-part-n.html"
              >Dissecting the Apple M1 GPU, the end</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 01:44:16</span
              ><span class="points-container"
                >Points: <span class="points">338</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45034537"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45033563">
          <h3>
            <a class="item" href="https://www.spacex.com/"
              >Starship's Tenth Flight Test</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 23:22:14</span
              ><span class="points-container"
                >Points: <span class="points">309</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45033563"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.youtube.com/watch?v=TpmTivdrQiQ"
                >https://www.youtube.com/watch?v=TpmTivdrQiQ</a
              >
            </div>
          </section>
        </section>
        <section id="45032276">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/litellm/jobs/6uvoBp3-founding-backend-engineer"
              >LiteLLM (YC W23) is hiring a back end engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 21:00:46</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45031673">
          <h3>
            <a class="item" href="https://artanis.dev/index.html"
              >GNU Artanis – A fast web application framework for Scheme</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 20:06:29</span
              ><span class="points-container"
                >Points: <span class="points">202</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45031673"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45030760">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/news/claude-for-chrome"
              >Claude for Chrome</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 19:01:56</span
              ><span class="points-container"
                >Points: <span class="points">582</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45030760"
                  >Comments</a
                ><span class="descendants">: 314</span></span
              >
            </h4>
            <div class="text">
              <a href="https://claude.ai/chrome">https://claude.ai/chrome</a>
            </div>
          </section>
        </section>
        <section id="45030714">
          <h3>
            <a
              class="item"
              href="https://www.righto.com/2019/10/how-special-register-groups-invaded.html"
              >"Special register groups" invaded computer dictionaries for
              decades (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 18:57:22</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45030714"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45030144">
          <h3>
            <a
              class="item"
              href="https://www.righto.com/2025/08/Cr2Ge2Te6-not-Cr2Gr2Te6.html"
              >Why do people keep writing about the imaginary compound
              Cr2Gr2Te6?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 18:07:07</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45030144"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45029764">
          <h3>
            <a
              class="item"
              href="https://reclaimthenet.org/michigan-supreme-court-rules-phone-search-warrants-must-be-specific"
              >Michigan Supreme Court: Unrestricted phone searches violate
              Fourth Amendment</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 17:36:57</span
              ><span class="points-container"
                >Points: <span class="points">453</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45029764"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45029241">
          <h3>
            <a
              class="item"
              href="https://www.bmj.com/content/384/bmj-2023-076902"
              >Undisclosed financial conflicts of interest in DSM-5 (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 16:57:44</span
              ><span class="points-container"
                >Points: <span class="points">207</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45029241"
                  >Comments</a
                ><span class="descendants">: 135</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45026886">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/08/26/technology/chatgpt-openai-suicide.html"
              >A teen was suicidal. ChatGPT was the friend he confided in</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 14:15:54</span
              ><span class="points-container"
                >Points: <span class="points">241</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45026886"
                  >Comments</a
                ><span class="descendants">: 204</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45026792">
          <h3>
            <a
              class="item"
              href="https://www.cuimc.columbia.edu/news/one-universal-antiviral-rule-them-all"
              >One universal antiviral to rule them all?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 14:07:42</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45026792"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45026719">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/introducing-gemini-2-5-flash-image/"
              >Gemini 2.5 Flash Image</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 14:01:46</span
              ><span class="points-container"
                >Points: <span class="points">881</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45026719"
                  >Comments</a
                ><span class="descendants">: 410</span></span
              >
            </h4>
            <div class="text">
              <a href="https://deepmind.google/models/gemini/image/"
                >https://deepmind.google/models/gemini/image/</a
              >,
              <a
                href="https://techcrunch.com/2025/08/26/google-geminis-ai-image-model-gets-a-bananas-upgrade/"
                >https://techcrunch.com/2025/08/26/google-geminis-ai-image-mo...</a
              >
            </div>
          </section>
        </section>
        <section id="45024786">
          <h3>
            <a class="item" href="https://stratechery.com/2025/u-s-intel/"
              >US Intel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 10:47:46</span
              ><span class="points-container"
                >Points: <span class="points">432</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45024786"
                  >Comments</a
                ><span class="descendants">: 448</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45023730">
          <h3>
            <a
              class="item"
              href="https://andre.arko.net/2025/08/25/rv-a-new-kind-of-ruby-management-tool/"
              >Rv, a new kind of Ruby management tool</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-26 @ 08:15:49</span
              ><span class="points-container"
                >Points: <span class="points">230</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45023730"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45019671">
          <h3>
            <a
              class="item"
              href="https://github.com/b1n4r1b01/n-days/blob/main/CVE-2025-43300.md"
              >iOS 18.6.1 0-click RCE POC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 22:05:34</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45019671"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45013572">
          <h3>
            <a class="item" href="https://github.com/bkdevs/async-server"
              >Show HN: Async – Claude code and Linear and GitHub PRs in one
              opinionated tool</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 13:21:19</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45013572"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
            <div class="text">
              <p>What Async does:</p>
              <p></p>
              <pre><code>  - Automatically researches coding tasks, asks clarifying questions, then executes code changes in the cloud
  - Breaks work into reviewable subtasks with stack diffs for easier code review
  - Handles the full workflow from issue to merged PR without leaving the app
</code></pre>
              Demo here:
              <a href="https://youtu.be/98k42b8GF4s?si=Azf3FIWAbpsXxk3_"
                >https://youtu.be/98k42b8GF4s?si=Azf3FIWAbpsXxk3_</a
              >
              <p>
                I’ve been working as a developer for over a decade now. I’ve
                tried all sorts of AI tools out there including Cline, Cursor,
                Claude Code, Kiro and more. All are pretty amazing for
                bootstrapping new projects. But most of my work is iterating on
                existing codebases where I can't break things, and that's where
                the magic breaks down. None of these tools work well on mature
                codebases.
              </p>
              <p>The problems I kept running into:</p>
              <p></p>
              <pre><code>  - I'm lazy. My Claude Code workflow became: throw a vague prompt like "turn issues into tasks in Github webhook," let it run something wrong, then iterate until I realize I could've just coded it myself. Claude Code's docs say to plan first, but it's not enforced and I can't force myself to do it.
  - Context switching hell. I started using Claude Code asynchronously - give it edit permissions, let it run, alt-tab to work on something else, then come back later to review. But when I return, I need to reconcile what the task was about, context switch back, and iterate. The mental overhead kills any productivity gains.
  - Tracking sucks. I use Apple Notes with bullet points to track tasks, but it's messy. Just like many other developers, I hate PM tools but need some way to stay organized without the bloat.
  - Review bottleneck. I've never shipped Claude Code output without fixes, at minimum stylistic changes (why does it always add comments even when I tell it not to?). The review/test cycle caps me at maybe 3 concurrent tasks.
</code></pre>
              So I built Async:
              <p></p>
              <pre><code>  - Forces upfront planning, always asks clarifying questions and requires confirmation before executing
  - Simple task tracking that imports Github issues automatically (other integration coming soon!)
  - Executes in the cloud, breaks work into subtasks, creates commits, opens PRs
  - Built-in code review with stacked diffs - comment and iterate without leaving the app
  - Works on desktop and mobile
</code></pre>
              It works by using a lightweight research agent to scope out tasks
              and come up with requirements and clarifying questions as needed
              (e.g., "fix the truncation issue" - "Would you like a tooltip on
              hover?"). After you confirm requirements, it executes the task by
              breaking it down into subtasks and then working commit by commit.
              It uses a mix of Gemini and Claude Code internally and runs all
              changes in the background in the cloud.
              <p>
                You've probably seen tools that do pieces of this, but I think
                it makes sense as one integrated workflow.
              </p>
              <p>
                This isn't for vibe coders. I'm building a tool that I can use
                in my day-to-day work. Async is for experienced developers who
                know their codebases and products deeply. The goal is to make
                Async the last tool developers need to build something great.
                Still early and I'm iterating quickly. Would love to know what
                you think.
              </p>
              <p>
                P.S. My cofounder loves light mode, I only use dark mode. I won
                the argument so our tool only supports dark mode. Thumbs up if
                you agree with me.
              </p>
            </div>
          </section>
        </section>
        <section id="45013535">
          <h3>
            <a class="item" href="https://jsomers.net/blog/the-mcphee-method"
              >The McPhee method for writing deeply reported nonfiction</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 13:17:40</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45013535"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45009760">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/world/2025/aug/25/japan-osmotic-power-plant-fukuoka"
              >Japan has opened its first osmotic power plant</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 02:53:35</span
              ><span class="points-container"
                >Points: <span class="points">235</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45009760"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45007525">
          <h3>
            <a class="item" href="https://github.com/schlae/cm5-reveng"
              >Reverse Engineered Raspberry Pi Compute Module 5</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 20:34:49</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45007525"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45006229">
          <h3>
            <a
              class="item"
              href="https://www.livescience.com/space/space-exploration/chinese-astronauts-make-rocket-fuel-and-oxygen-in-space-using-1st-of-its-kind-artificial-photosynthesis"
              >Chinese astronauts make rocket fuel and oxygen in space</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 17:54:47</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45006229"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45002688">
          <h3>
            <a
              class="item"
              href="https://fortune.com/2025/08/23/neuralink-participant-1-noland-arbaugh-18-months-post-surgery-life-changed-elon-musk/"
              >Neuralink 'Participant 1' says his life has changed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 09:12:14</span
              ><span class="points-container"
                >Points: <span class="points">252</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45002688"
                  >Comments</a
                ><span class="descendants">: 293</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45000142">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2508.15078"
              >Integer continued fractions for complex numbers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 00:09:57</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45000142"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44998276">
          <h3>
            <a
              class="item"
              href="https://www.shayon.dev/post/2025/221/bypass-postgresql-catalog-overhead-with-direct-partition-hash-calculations/"
              >Bypass PostgreSQL catalog overhead with direct partition hash
              calculations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-23 @ 19:05:31</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44998276"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44996641">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Cascata_delle_Marmore"
              >Cascata delle Marmore</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-23 @ 15:24:02</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44996641"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44995865">
          <h3>
            <a
              class="item"
              href="https://gizmodo.com/birds-across-the-world-are-singing-all-day-for-a-disturbing-reason-2000646257"
              >Light pollution prolongs avian activity</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-23 @ 13:32:36</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44995865"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44994535">
          <h3>
            <a class="item" href="https://github.com/explosion/spaCy"
              >SpaCy: Industrial-Strength Natural Language Processing (NLP) in
              Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-23 @ 09:07:38</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44994535"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
