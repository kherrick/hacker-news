<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40277581">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=GlNhaAV5NZ4"
              >Volcanoes and Us (2015) [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 18:04:59</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40277581"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40277547">
          <h3>
            <a
              class="item"
              href="https://cq2.co/blog/the-best-way-to-have-complex-discussions"
              >New way to have complex discussions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 18:02:59</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40277547"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40277469">
          <h3>
            <a
              class="item"
              href="https://tgceec.tumblr.com/post/74534916370/results-of-the-grand-c-error-explosion"
              >Results of the Grand C++ Error Explosion Competition (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 17:57:39</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40277469"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40276887">
          <h3>
            <a class="item" href="https://jobs.lever.co/buildzoom"
              >BuildZoom (better way to build custom homes) Is hiring a Growth
              Associate</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 17:13:21</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40276768">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40276768"
              >Show HN: Peerdb Streams – Simple, native Postgres change data
              capture</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 17:00:42</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40276768"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/PeerDB-io/peerdb"
                >https://github.com/PeerDB-io/peerdb</a
              >). We spent the past 7 months building a solid experience to
              replicate data from Postgres to data warehouses. Now we're
              expanding to queues.
              <p>
                PeerDB Streams provides a simple and native way to replicate
                changes as they happen in Postgres to Queues (Kafka, Redpanda,
                Google PubSub, etc). We use Postgres logical decoding to enable
                Change Data Capture (CDC).
              </p>
              <p>
                Blog post here:
                <a
                  href="https://blog.peerdb.io/peerdb-streams-simple-native-postgres-change-data-capture"
                  >https://blog.peerdb.io/peerdb-streams-simple-native-postgres...</a
                >. 10-min quickstart here:
                <a href="https://docs.peerdb.io/quickstart/streams-quickstart"
                  >https://docs.peerdb.io/quickstart/streams-quickstart</a
                >.
              </p>
              <p>
                We chose queues as many users found that existing tools are
                complex. Debezium is the most used tool for this use-case. It
                has large production usage. However, a common pain point among
                our users is that it has a significant learning curve taking
                months to productionize.
              </p>
              <p>
                A few issues are: a) Interacting through a command line
                interface, understanding the various settings, and learning best
                practices for running it in production is not trivial. Debezium
                UI, released to address usability concerns [1], is still in an
                incubating state [2]. Additionally, reading Debezium resources
                to get started can be overwhelming [3]. b) Supporting data
                formats and transformations isn’t easy. It needs a Java project,
                building JAR packages and setting up a runtime path on the kafka
                connect plugin. c)Debezium is not as native as Kafka for other
                queues and doesn’t offer the same level of configurability. For
                example, with Event Hubs, it is difficult to stream to topics
                spread across namespaces and subscriptions.
              </p>
              <p>
                TL;DR Debezium aims to provide a comprehensive experience for
                engineers to implement CDC rather than making it dead simple for
                them. So you can do a lot with Debezium but need to know a lot
                about it.
              </p>
              <p>
                At PeerDB, we are building a simple yet comprehensive experience
                for Postgres CDC. The goal is to enable engineers to build
                prod-grade Postgres CDC with a minimal learning curve, within a
                few days.
              </p>
              <p>
                PeerDB’s feature-set isn't at Debezium's level yet, and as we
                evolve, we might face similar challenges. However, we're putting
                usability at the forefront and we believe that we can achieve
                the above goal.
              </p>
              <p>
                First, PeerDB offers a simple UI to set up Postgres and Kafka by
                creating PEERs and initiating CDC by creating a MIRROR. Through
                the UI, users can monitor the progress of CDC, including
                throughput and latency; set up alerts to Slack/Email based on
                replication slot growth; investigate Postgres-native metrics,
                including slot size, etc. Here is a demo showing of PeerDB UI in
                action:
              </p>
              <p>
                <a
                  href="https://www.loom.com/share/ebcfb7646a1e48738835853b760e5d04"
                  >https://www.loom.com/share/ebcfb7646a1e48738835853b760e5d04</a
                >
              </p>
              <p>
                Second, for users who prefer a CLI, we provide a
                Postgres-compatible SQL layer to manage CDC. This offers the
                same level of features as the UI and is more intuitive compared
                to bash scripts.
              </p>
              <p>
                Third, users can perform row-level transformations using Lua
                scripts executed at runtime. This enables features such as
                encrypting/masking PII data, supporting various data formats
                (JSON, MsgPack, Protobuf, etc.), and more. We offer a script
                editor along with a bunch of useful templates [5].
              </p>
              <p>
                Fourth, we provide native connectors to non-Kafka targets. We
                also provide native configurability options tailored to these
                platforms. For example, with Event Hubs, users can perform CDC
                to topics distributed across different namespaces and
                subscriptions [4].
              </p>
              <p>
                Finally, We are laser focused on Postgres, enabling specific
                optimizations like native metrics for replication, wait-events,
                and # of connections. Features like faster initial loads through
                parallel snapshotting and decoding transactions in-flight are in
                private beta.
              </p>
              <p>
                Our hope is to provide the best data-movement experience for
                Postgres. PeerDB Streams is another step in that direction. We
                would love to get your feedback on product experience, our
                thesis and anything else that comes to your mind. It would be
                super useful for us. Thank you!
              </p>
              <p>References:</p>
              <p>
                [1]
                <a
                  href="https://debezium.io/blog/2020/10/22/towards-debezium-ui/"
                  >https://debezium.io/blog/2020/10/22/towards-debezium-ui/</a
                >
                [2]
                <a
                  href="https://debezium.io/documentation/reference/stable/operations/debezium-ui.html"
                  >https://debezium.io/documentation/reference/stable/operation...</a
                >
                [3]
                <a
                  href="https://medium.com/@cooper.wolfe/i-hated-debezium-so-much-i-did-it-myself-b43b0efc20a9"
                  >https://medium.com/@cooper.wolfe/i-hated-debezium-so-much-i-...</a
                >
                [4]
                <a
                  href="https://blog.peerdb.io/enterprise-grade-replication-from-postgres-to-azure-event-hubs"
                  >https://blog.peerdb.io/enterprise-grade-replication-from-pos...</a
                >
                [5]
                <a href="https://github.com/PeerDB-io/examples"
                  >https://github.com/PeerDB-io/examples</a
                >
                [5]
                <a href="https://app.peerdb.cloud">https://app.peerdb.cloud</a>
                [6]
                <a href="https://github.com/PeerDB-io/PeerDB"
                  >https://github.com/PeerDB-io/PeerDB</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="40276714">
          <h3>
            <a
              class="item"
              href="https://www.heise.de/en/news/ARD-und-ZDF-wollen-ihren-Streaming-Code-als-Open-Source-anbieten-9709177.html"
              >German public broadcasters open source their streaming
              platforms</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 16:56:08</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40276714"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40276687">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40276687"
              >Ask HN: How to do simple heartbeat monitoring?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 16:54:01</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40276687"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
            <div class="text">
              <p>
                My team is hosting an API that sends open telemetry data to
                Signoz &amp; manages on-call via PagerDuty. We've configured
                Signoz to hit Pagerduty when there's a series of 500 errors.
              </p>
              <p>
                However, our server went down last night and NO opentel data was
                sent to Signoz. We weren't notified that the server went down as
                there weren't 500 responses to report. What's the easiest way to
                have a cron-like query hit our API and integrate with our
                existing stack? Is this feasible with our existing vendors?
                Should I have a serverless function running on a timer that uses
                Pagerduty's API? Should I be migrating to another monitoring
                service?
              </p>
              <p>Any advice would be appreciated!</p>
            </div>
          </section>
        </section>
        <section id="40276550">
          <h3>
            <a
              class="item"
              href="https://github.com/haizelabs/thorn-in-haizestack"
              >Thorn in a HaizeStack test for evaluating long-context
              adversarial robustness</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 16:40:30</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40276550"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40276442">
          <h3>
            <a
              class="item"
              href="https://www.bentasker.co.uk/posts/blog/general/an-afternoon-in-sizewell-b-control-room-simulator.html"
              >Spending an afternoon in the Sizewell control-room simulator</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 16:27:49</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40276442"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40275997">
          <h3>
            <a
              class="item"
              href="https://andersmurphy.com/2024/05/06/clojure-managing-throughput-with-virtual-threads.html"
              >Clojure: Managing throughput with virtual threads</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 15:48:09</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40275997"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40275973">
          <h3>
            <a class="item" href="http://www.nukefix.org/nukepix.html"
              >Nukefix: Simulating your nuclear weapons program</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 15:45:50</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40275973"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40275969">
          <h3>
            <a class="item" href="https://touvlo.co"
              >Show HN: Touvlo – Technical Interviewing for Hardware Engineers
              (By Humans)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 15:45:46</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40275969"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <p>
                Our interviews test real-world engineering skills, largely via a
                collaborative CAD session through our in-browser platform. You
                can think of it as a pair-coding session between the interviewer
                and the interviewee, but for hardware. Interviews are conducted
                by real hardware engineers with industry experience (currently
                my co-founder, Danae). After each interview, you get a detailed
                score card, as well as full, timestamped recording of the
                interview.
              </p>
              <p>
                There's no pricing page yet, but we charge 220$ per interview,
                with discounts for monthly packages for 10 interviews or more.
              </p>
              <p>
                If you're a hardware/robotics startup, give us a try: we can
                help you hire better and save you time. Drop us an email
                (founders@touvlo.co), or sign up for a demo interview on
                <a href="https://touvlo.co">https://touvlo.co</a>. We offer a
                money-back guarantee and a free trial for our next few
                customers.
              </p>
              <p>
                We're also applying to YC – we went from an idea to a product
                with users in 2 months.
              </p>
              <p>We would highly appreciate any feedback.</p>
            </div>
          </section>
        </section>
        <section id="40275759">
          <h3>
            <a
              class="item"
              href="https://www.science.org/doi/10.1126/sciadv.adl2524"
              >Evaluating bias and noise induced by the U.S. Census Bureau's
              privacy protection</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 15:24:30</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40275759"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40274777">
          <h3>
            <a class="item" href="https://voidstarsec.com/blog/jtag-pifex"
              >PiFex: JTAG Hacking with a Raspberry Pi</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 13:59:42</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40274777"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40274662">
          <h3>
            <a
              class="item"
              href="https://keygen.sh/blog/your-14-day-free-trial-aint-gonna-cut-it/"
              >A fourteen-day free trial ain’t gonna cut it</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 13:50:10</span
              ><span class="points-container"
                >Points: <span class="points">292</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40274662"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40274158">
          <h3>
            <a
              class="item"
              href="https://collabfund.com/blog/how-i-think-about-debt/"
              >How I think about debt</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 13:04:06</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40274158"
                  >Comments</a
                ><span class="descendants">: 182</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40273651">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2024/05/05/coreweaves-1-1b-raise-shows-the-market-for-alternative-clouds-is-booming/"
              >Alternative clouds are booming as companies seek cheaper access
              to GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 12:05:34</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40273651"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40273470">
          <h3>
            <a class="item" href="https://www.getanyplant.com/plants"
              >Show HN: A free site to explore and discover 6k plants</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 11:42:41</span
              ><span class="points-container"
                >Points: <span class="points">254</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40273470"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’m a data scientist by profession, so probably 80% of the work
                was totally new to me. I built v1 using wordpress , v2 using
                django, and v3 I pivoted to using react and next js for
                frontend.
              </p>
              <p>
                I would greatly appreciate any feedback on the site as well as
                any advice on how to grow it.
              </p>
            </div>
          </section>
        </section>
        <section id="40273180">
          <h3>
            <a
              class="item"
              href="https://developers.hp.com/system/files/Color_Concepts_101_0.pdf"
              >Color Concepts 101 (2001) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 10:50:48</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40273180"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40272577">
          <h3>
            <a class="item" href="https://www.tasteatlas.com/map"
              >World Food Atlas: Discover local dishes and ingredients</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 08:50:28</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40272577"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40272186">
          <h3>
            <a
              class="item"
              href="https://www.jamesshore.com/v2/blog/2024/a-useful-productivity-measure"
              >A useful productivity measure?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 07:39:52</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40272186"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40270586">
          <h3>
            <a
              class="item"
              href="https://news.artnet.com/art-world/doves-typeface-2454807"
              >Remnants of a legendary typeface have been rescued from the
              Thames</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 02:27:06</span
              ><span class="points-container"
                >Points: <span class="points">356</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40270586"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40270219">
          <h3>
            <a class="item" href="https://github.com/ExistentialAudio/BlackHole"
              >BlackHole: macOS Audio Loopback Driver</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 01:16:26</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40270219"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40265904">
          <h3>
            <a
              class="item"
              href="https://arslan.io/2024/05/05/braun-borse-2024/"
              >Visiting the annual Braun collectors fair</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-05 @ 16:09:54</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40265904"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40264194">
          <h3>
            <a
              class="item"
              href="https://imzaldih.com/en/post/bug-spoke-russian-crashed-app/"
              >A bug that spoke Russian and crashed my app</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-05 @ 12:01:01</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40264194"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40263042">
          <h3>
            <a
              class="item"
              href="http://www.os2museum.com/wp/learn-something-old-every-day-part-x-the-vga-attribute-controller-is-weird/"
              >The VGA Attribute Controller Is Weird</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-05 @ 07:45:46</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40263042"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40262626">
          <h3>
            <a
              class="item"
              href="https://www.jeremykun.com/2024/05/04/fhe-overview/"
              >A High-Level Technical Overview of Homomorphic Encryption</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-05 @ 06:02:02</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40262626"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40262543">
          <h3>
            <a
              class="item"
              href="http://oldvcr.blogspot.com/2024/05/with-powerpc-windows-ce-and-wiin-pad.html"
              >With PowerPC, Windows CE and the WiiN-Pad Slate, Everyone's a
              WiiN-Er</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-05 @ 05:42:51</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40262543"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40261267">
          <h3>
            <a
              class="item"
              href="https://www.cia.gov/legacy/museum/exhibit/project-azorian/"
              >Project AZORIAN</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-04 @ 23:53:57</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40261267"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40252784">
          <h3>
            <a
              class="item"
              href="https://fzakaria.com/2024/05/03/speeding-up-elf-relocations-for-store-based-systems.html"
              >Speeding up ELF relocations for store-based systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-03 @ 21:48:43</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40252784"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
