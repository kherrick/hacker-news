<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46935991">
          <h3>
            <a class="item" href="https://pubmed.ncbi.nlm.nih.gov/41506004/"
              >Omega-3 is inversely related to risk of early-onset dementia</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 16:47:08</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46935991"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46935104">
          <h3>
            <a class="item" href="https://freethemath.org"
              >Five disciplines discovered the same math independently – none of
              them knew</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 15:29:22</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46935104"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934579">
          <h3>
            <a class="item" href="https://habr.com/en/articles/446238/"
              >Exploiting signed bootloaders to circumvent UEFI Secure Boot</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:40:52</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934579"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934499">
          <h3>
            <a class="item" href="https://datatracker.ietf.org/doc/html/rfc3092"
              >RFC 3092 – Etymology of "Foo" (2001)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:32:28</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934499"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934344">
          <h3>
            <a
              class="item"
              href="https://www.abhinavomprakash.com/posts/i-am-happier-writing-code-by-hand/"
              >I am happier writing code by hand</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:12:18</span
              ><span class="points-container"
                >Points: <span class="points">280</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934344"
                  >Comments</a
                ><span class="descendants">: 199</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934266">
          <h3>
            <a
              class="item"
              href="https://blog.hofstede.it/running-your-own-as-bgp-on-freebsd-with-frr-gre-tunnels-and-policy-routing/"
              >Running Your Own As: BGP on FreeBSD with FRR, GRE Tunnels, and
              Policy Routing</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:02:58</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934266"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934107">
          <h3>
            <a class="item" href="https://github.github.io/gh-aw/"
              >GitHub Agentic Workflows</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 13:40:56</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934107"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46933401">
          <h3>
            <a
              class="item"
              href="https://lists.nanog.org/archives/list/nanog@lists.nanog.org/thread/TSNPJVFH4DKLINIKSMRIIVNHDG5XKJCM/"
              >Dave Farber has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 11:38:57</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46933401"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46933365">
          <h3>
            <a
              class="item"
              href="https://eclecticlight.co/2026/02/08/last-week-on-my-mac-why-e-cores-make-apple-silicon-fast/"
              >Why E cores make Apple silicon fast</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 11:31:49</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46933365"
                  >Comments</a
                ><span class="descendants">: 159</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46933067">
          <h3>
            <a class="item" href="https://ezhik.jp/ai-slop-terrifies-me/"
              >Slop Terrifies Me</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 10:31:35</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46933067"
                  >Comments</a
                ><span class="descendants">: 196</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932985">
          <h3>
            <a
              class="item"
              href="https://hyperallergic.com/curating-a-show-on-my-ineffable-mother-ursula-k-le-guin/"
              >Curating a Show on My Ineffable Mother, Ursula K. Le Guin</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 10:13:00</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932985"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932678">
          <h3>
            <a class="item" href="https://github.com/joshuanwalker/Raiders2600"
              >Reverse Engineering Raiders of the Lost Ark for the Atari 2600</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 09:10:18</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932678"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932343">
          <h3>
            <a class="item" href="https://github.com/jingkaihe/matchlock"
              >Matchlock – Secures AI agent workloads with a Linux-based
              sandbox</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 08:07:55</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932343"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932192">
          <h3>
            <a class="item" href="https://donotnotify.com/opensource.html"
              >DoNotNotify is now Open Source</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 07:39:49</span
              ><span class="points-container"
                >Points: <span class="points">315</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932192"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
            <div class="text">
              <p>
                Why didn't I open source it in the first place? Linux has been
                by primary driver for more than a decade. I genuinely believe in
                the philosophy, and have always wanted to give back to the
                community. The primary reason, probably, was because I was
                ashamed that I had 90% vibe-coded the app. More than 2 decades
                of writing software, and my first contribution to FOSS would be
                AI-generated code? Would it withstand even the most minimal of
                scrutiny? Would by (unknown) name forever be tarnished? I
                exaggerate, but only slightly :)
              </p>
              <p>
                So, yesterday, after a fair bit of trepidation, I changed the
                github repo visibility to public and put up a announcement on
                the app's website [1]. I have also submitted the app to F-Droid
                [2]. As before, I welcome the community's feedback and
                suggestions!
              </p>
              <p>
                [0]
                <a href="https://news.ycombinator.com/item?id=46499646"
                  >https://news.ycombinator.com/item?id=46499646</a
                >
                [1]
                <a href="https://donotnotify.com/opensource.html"
                  >https://donotnotify.com/opensource.html</a
                >
                [2]
                <a href="https://gitlab.com/fdroid/rfp/-/issues/3569"
                  >https://gitlab.com/fdroid/rfp/-/issues/3569</a
                >
              </p>
              <p>-- Anuj Jain</p>
            </div>
          </section>
        </section>
        <section id="46931805">
          <h3>
            <a
              class="item"
              href="https://reorx.com/blog/openclaw-is-changing-my-life/"
              >OpenClaw is changing my life</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 06:21:27</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46931805"
                  >Comments</a
                ><span class="descendants">: 169</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46931559">
          <h3>
            <a
              class="item"
              href="https://www.rogerebert.com/reviews/great-movie-the-shawshank-redemption-1994"
              >Roger Ebert Reviews "The Shawshank Redemption" (1999)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 05:25:33</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46931559"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46930565">
          <h3>
            <a
              class="item"
              href="https://haskellforall.com/2026/02/beyond-agentic-coding"
              >Beyond agentic coding</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 01:55:09</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46930565"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46930391">
          <h3>
            <a class="item" href="https://github.com/localgpt-app/localgpt"
              >Show HN: LocalGPT – A local-first AI assistant in Rust with
              persistent memory</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 01:26:38</span
              ><span class="points-container"
                >Points: <span class="points">289</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46930391"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
            <div class="text">
              <p>
                It compiles to a single ~27MB binary — no Node.js, Docker, or
                Python required.
              </p>
              <p>Key features:</p>
              <p>
                - Persistent memory via markdown files (MEMORY, HEARTBEAT, SOUL
                markdown files) — compatible with OpenClaw's format - Full-text
                search (SQLite FTS5) + semantic search (local embeddings, no API
                key needed) - Autonomous heartbeat runner that checks tasks on a
                configurable interval - CLI + web interface + desktop GUI -
                Multi-provider: Anthropic, OpenAI, Ollama etc - Apache 2.0
              </p>
              <p>Install: `cargo install localgpt`</p>
              <p>
                I use it daily as a knowledge accumulator, research assistant,
                and autonomous task runner for my side projects. The memory
                compounds — every session makes the next one better.
              </p>
              <p>
                GitHub:
                <a href="https://github.com/localgpt-app/localgpt"
                  >https://github.com/localgpt-app/localgpt</a
                >
                Website: <a href="https://localgpt.app">https://localgpt.app</a>
              </p>
              <p>Would love feedback on the architecture or feature ideas.</p>
            </div>
          </section>
        </section>
        <section id="46926245">
          <h3>
            <a
              class="item"
              href="https://nolanlawson.com/2026/02/07/we-mourn-our-craft/"
              >We mourn our craft</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 18:32:27</span
              ><span class="points-container"
                >Points: <span class="points">538</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46926245"
                  >Comments</a
                ><span class="descendants">: 672</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46925808">
          <h3>
            <a
              class="item"
              href="https://jonathanwhiting.com/writing/blog/games_in_c/"
              >I write games in C (yes, C) (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 17:45:25</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46925808"
                  >Comments</a
                ><span class="descendants">: 252</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46925741">
          <h3>
            <a class="item" href="https://xorvoid.com/sectorc.html"
              >SectorC: A C Compiler in 512 bytes (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 17:39:53</span
              ><span class="points-container"
                >Points: <span class="points">346</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46925741"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46925672">
          <h3>
            <a
              class="item"
              href="https://www.historytoday.com/archive/history-matters/contagious-taste-cancer"
              >The Contagious Taste of Cancer</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 17:31:44</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46925672"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46889741">
          <h3>
            <a
              class="item"
              href="https://ejpe.org/journal/article/view/1075/753"
              >The Legacy of Daniel Kahneman: A Personal View (2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 18:36:37</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46889741"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46888258">
          <h3>
            <a class="item" href="https://derekyan.com/ma-book/"
              >Show HN: It took 4 years to sell my startup. I wrote a book about
              it</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 16:56:11</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46888258"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46886569">
          <h3>
            <a class="item" href="https://rabbitear.org/book/origami.html"
              >Rabbit Ear "Origami": programmable origami in the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 14:57:38</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46886569"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46869113">
          <h3>
            <a class="item" href="https://sozialhelden.github.io/a11yjson/"
              >A11yJSON: A standard to describe the accessibility of the
              physical world</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 10:21:37</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46869113"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46868928">
          <h3>
            <a class="item" href="https://federicopereiro.com/llm-high/"
              >LLMs as the new high level language</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 10:00:03</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46868928"
                  >Comments</a
                ><span class="descendants">: 336</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46868726">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46868726"
              >Show HN: Kekkai – Interactive security triage in the terminal</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 09:34:27</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46868726"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                As an AppSec engineer, I’ve spent a lot of time running and
                tunning open-source security scanners like Trivy, Semgrep,
                Gitleaks and Dojo. What I have found is that running them is
                easy, reviewing the results, not so much. Each tool outputs
                different JSON, false positives pile up, and CI either becomes
                noisy or blocks everything.
              </p>
              <p>
                So I built Kekkai (formerly Hokage), a small open-source CLI
                that wraps these scanners and focuses specifically on human
                triage.
              </p>
              <p>
                Kekkai runs the scanners in isolated Docker containers,
                normalizes their outputs into a single format, and provides an
                interactive terminal UI to review findings, mark false
                positives, and save decisions locally.
              </p>
              <p>You can try it out:</p>
              <p>``` pipx install kekkai-cli kekkai scan kekkai triage ```</p>
              <p>What it currently does:</p>
              <p>
                - Runs Trivy (dependencies), Semgrep (code), and Gitleaks
                (secrets) - Normalizes findings into a unified report - Provides
                a keyboard-driven TUI for reviewing and marking findings -
                Supports .kekkaiignore for false positives - Has a CI mode with
                severity-based failure thresholds
              </p>
              <p>Design choices:</p>
              <p>
                - Local-first by default (no SaaS required) - No proprietary
                scanning logic, it sits on top of existing tools - Scanners run
                in read-only, no-network Docker containers
              </p>
              <p>
                This is still early and aimed at individual developers and small
                teams. The next things I’m working on are persistent triage
                state across runs (baselines) and better PR-level workflows.
              </p>
              <p>
                Repo and docs:
                <a href="https://github.com/kademoslabs/kekkai"
                  >https://github.com/kademoslabs/kekkai</a
                >
              </p>
              <p>
                I’m around to answer questions about tradeoffs, limitations, or
                why this exists at all.
              </p>
            </div>
          </section>
        </section>
        <section id="46861158">
          <h3>
            <a class="item" href="https://aosabook.org/en/v1/bdb.html"
              >The Architecture of Open Source Applications (Volume 1) Berkeley
              DB</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 20:37:41</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46861158"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46859433">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Kolakoski_sequence"
              >Kolakoski Sequence</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 18:31:17</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46859433"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
