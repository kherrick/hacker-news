<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44645391">
          <h3>
            <a class="item" href="https://www.wheresyoured.at/the-haters-gui/"
              >The Hater's Guide to the AI Bubble</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 10:57:18</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44645391"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44645353">
          <h3>
            <a class="item" href="https://kau.sh/blog/how-to-firefox/"
              >How to Firefox</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 10:51:30</span
              ><span class="points-container"
                >Points: <span class="points">261</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44645353"
                  >Comments</a
                ><span class="descendants">: 150</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44644645">
          <h3>
            <a
              class="item"
              href="https://ia.acs.org.au/article/2025/-shameful--cba-hiring-indian-ict-workers-after-firing-australian.html"
              >'Shameful' CBA hiring Indian ICT workers after firing
              Australians</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 08:49:44</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44644645"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44644404">
          <h3>
            <a
              class="item"
              href="https://ritza.co/articles/migrate-from-openai-to-cerebrium-with-vllm-for-predictable-inference/"
              >How to Migrate from OpenAI to Cerebrium for Cost-Predictable AI
              Inference</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 08:08:37</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44644404"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44643981">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/kapa-ai/jobs/JPE2ofG-software-engineer-full-stack"
              >Kapa.ai (YC S23) is hiring a software engineers (EU remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 07:00:35</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44643564">
          <h3>
            <a
              class="item"
              href="https://github.com/openai/whisper/discussions/2608"
              >Complete silence is always hallucinated as "ترجمة نانسي قنقر" in
              Arabic</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 05:42:10</span
              ><span class="points-container"
                >Points: <span class="points">429</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44643564"
                  >Comments</a
                ><span class="descendants">: 182</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44642349">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/ai-comes-up-with-bizarre-physics-experiments-but-they-work-20250721/"
              >AI comes up with bizarre physics experiments, but they work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 01:28:49</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44642349"
                  >Comments</a
                ><span class="descendants">: 134</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44641961">
          <h3>
            <a
              class="item"
              href="https://maddie.wtf/posts/2025-07-21-jujutsu-for-busy-devs"
              >Jujutsu for busy devs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 00:21:48</span
              ><span class="points-container"
                >Points: <span class="points">261</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44641961"
                  >Comments</a
                ><span class="descendants">: 335</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44641521">
          <h3>
            <a
              class="item"
              href="https://docs.astral.sh/uv/guides/scripts/#running-a-script-with-dependencies"
              >Uv: Running a script with dependencies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 23:26:40</span
              ><span class="points-container"
                >Points: <span class="points">401</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44641521"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44639524">
          <h3>
            <a
              class="item"
              href="https://www.grisp.org/blog/posts/2025-06-11-grisp-nano-codebeam-sto"
              >Erlang 28 on GRiSP Nano using only 16 MB</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 19:40:15</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44639524"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638948">
          <h3>
            <a
              class="item"
              href="https://stevensalzberg.substack.com/p/i-know-genomes-dont-delete-your-dna"
              >I know genomes and I didn’t delete my data from 23andMe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 18:52:26</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638948"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638580">
          <h3>
            <a
              class="item"
              href="https://www.lumafield.com/article/what-went-wrong-inside-these-recalled-power-banks"
              >What went wrong inside recalled Anker PowerCore 10000 power
              banks?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 18:22:11</span
              ><span class="points-container"
                >Points: <span class="points">454</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638580"
                  >Comments</a
                ><span class="descendants">: 223</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638509">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2025/07/28/the-mission-the-cia-in-the-21st-century-tim-weiner-book-review"
              >What will become of the CIA?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 18:16:07</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638509"
                  >Comments</a
                ><span class="descendants">: 214</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638300">
          <h3>
            <a
              class="item"
              href="https://tedium.co/2025/07/21/the-game-genie-generation/"
              >The Game Genie Generation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 17:59:00</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638300"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44637715">
          <h3>
            <a class="item" href="https://www.morphik.ai/blog/stop-parsing-docs"
              >Don't bother parsing: Just use images for RAG</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 17:16:41</span
              ><span class="points-container"
                >Points: <span class="points">291</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44637715"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44637352">
          <h3>
            <a class="item" href="https://accounting.penrose.com/"
              >AccountingBench: Evaluating LLMs on real long-horizon business
              tasks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 16:48:28</span
              ><span class="points-container"
                >Points: <span class="points">494</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44637352"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44636204">
          <h3>
            <a
              class="item"
              href="https://www.iter.org/node/20687/new-records-wendelstein-7-x"
              >New records on Wendelstein 7-X</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 15:18:41</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44636204"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44635867">
          <h3>
            <a
              class="item"
              href="https://the418.substack.com/p/a-bug-in-the-mail"
              >Occasionally USPS sends me pictures of other people's mail</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 14:54:41</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44635867"
                  >Comments</a
                ><span class="descendants">: 178</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44635808">
          <h3>
            <a class="item" href="https://github.com/KrishKrosh/TrackWeight"
              >TrackWeight: Turn your MacBook's trackpad into a digital weighing
              scale</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 14:51:13</span
              ><span class="points-container"
                >Points: <span class="points">576</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44635808"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44634340">
          <h3>
            <a
              class="item"
              href="https://www.indiehackers.com/post/ive-launched-37-products-in-5-years-and-not-doing-that-again-0b66e6e8b3"
              >I've launched 37 products in 5 years and not doing that again</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 12:27:24</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44634340"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44629710">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/technology/2025/07/20/microsoft-sharepoint-hack/"
              >Global hack on Microsoft Sharepoint hits U.S., state agencies,
              researchers say</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-20 @ 21:58:06</span
              ><span class="points-container"
                >Points: <span class="points">703</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44629710"
                  >Comments</a
                ><span class="descendants">: 352</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.ph/Ym2jZ">https://archive.ph/Ym2jZ</a>,
              <a
                href="https://web.archive.org/web/20250721135933/https://www.washingtonpost.com/technology/2025/07/20/microsoft-sharepoint-hack/"
                >https://web.archive.org/web/20250721135933/https://www.washi...</a
              >
              <p>
                <a href="https://research.eye.security/sharepoint-under-siege/"
                  >https://research.eye.security/sharepoint-under-siege/</a
                >
              </p>
              <p>
                <a
                  href="https://krebsonsecurity.com/2025/07/microsoft-fix-targets-attacks-on-sharepoint-zero-day/"
                  >https://krebsonsecurity.com/2025/07/microsoft-fix-targets-at...</a
                >
              </p>
              <p>
                <a
                  href="https://www.bleepingcomputer.com/news/microsoft/microsoft-releases-emergency-patches-for-sharepoint-rce-flaws-exploited-in-attacks/"
                  >https://www.bleepingcomputer.com/news/microsoft/microsoft-re...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44619020">
          <h3>
            <a
              class="item"
              href="https://www.brainpaingames.com/Hypershack.html"
              >Show HN: A rudimentary game engine to build four dimensional VR
              evironments</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 20:23:33</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44619020"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=37100760"
                >https://news.ycombinator.com/item?id=37100760</a
              >
              I scrapped lots of stuff and concentrated on making a javascript
              "game engine")
              <p>
                The sole purpose of this project is to explore whether it's
                possible to make the human brain spatially aware of four
                dimensions using Virtual Reality. It’s my first ever game
                project, my first time using Unity, first time writing C#, and
                my first anything with WebXR, so please be gentle! To manage
                expectations, it isn't visually pleasing yet and it's not easily
                approachable. To get anything out of this, you likely need a pen
                and a paper and draw 3d slices of 4d objects _many_ times.
              </p>
              <p>
                The project is essentially a rudimentary engine where you can
                use JavaScript to define 4D objects and some limited behaviors.
                You can then explore these spaces in a browser (with or without
                a VR headset), moving and rotating through all four
                dimensions—including double rotations on planes like xz and
                yw.The game is a webxr project, meaning you can just play that
                on the browser, even without VR headset. Note, however, that the
                keyboard input is a bit limited.
              </p>
              <p>
                As a demo, I've built a simple maze game where you try to find
                gems before time runs out. The challenge ramps up, and I'm
                currently stuck trying to comfortably navigate Level 6, which
                involves moving around four separate tesseracts. Here is a page
                where I have tried to visualize what is going on at level 6:
                <a
                  href="https://www.brainpaingames.com/blog/updates/2024/07/28/Hypershack-0.2-level6-map.html"
                  >https://www.brainpaingames.com/blog/updates/2024/07/28/Hyper...</a
                >
              </p>
              <p>
                I have no expectations that this will any day be anything but a
                niche project of mine, but I thought here might be someone
                interested in playing around. And If anyone has any ideas how
                the pedagogy of learning to operate in 4 spatial dimensions
                could be made somehow more achevable, I'm all ears.
              </p>
            </div>
          </section>
        </section>
        <section id="44616158">
          <h3>
            <a
              class="item"
              href="https://codeblog.jonskeet.uk/2025/07/19/unexpected-inconsistency-in-records/"
              >Unexpected inconsistency in records – Jon Skeet's coding blog</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 15:12:04</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44616158"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44615033">
          <h3>
            <a
              class="item"
              href="https://www.nasa.gov/image-article/nasas-x-59-quiet-supersonic-aircraft-begins-taxi-tests/"
              >Nasa’s X-59 quiet supersonic aircraft begins taxi tests</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 12:41:15</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44615033"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44611298">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/world/2025/jul/18/cult-of-convenience-how-tokyos-retro-shotengai-arcades-are-falling-victim-to-gentrification"
              >Tokyo's retro shotengai arcades are falling victim to
              gentrification</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 00:17:10</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44611298"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44609154">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/mars-rock-meteorite-auction-dinosaur-sothebys-01d7ccfc8dc580ad86f8e97a305fc8fa"
              >Largest piece of Mars on Earth fetches $5.3M at auction</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-18 @ 20:01:22</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44609154"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44606653">
          <h3>
            <a class="item" href="https://macosbin.com"
              >Look up macOS system binaries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-18 @ 16:31:42</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44606653"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44605245">
          <h3>
            <a class="item" href="https://graydon2.dreamwidth.org/318788.html"
              >Losing language features: some stories about disjoint unions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-18 @ 14:47:16</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44605245"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44604024">
          <h3>
            <a class="item" href="https://lwn.net/Articles/1027814/"
              >Python Audio Processing with Pedalboard</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-18 @ 12:36:40</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44604024"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44602609">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2025-07-18/what-scientists-learned-scanning-the-bodies-of-100-000-brits"
              >An unprecedented window into how diseases take hold years before
              symptoms appear</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-18 @ 08:55:56</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44602609"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.md/0Fg1E">https://archive.md/0Fg1E</a>
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
