<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43549618">
          <h3>
            <a class="item" href="https://github.com/williamw520/toposort"
              >Show HN: Zig Topological Sort Library for Parallel Processing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 17:48:45</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43549618"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <p>This little library is packed with the following features:</p>
              <p></p>
              <pre><code>  - Building dependency graph from dependency data.
  - Performing topological sort on the dependency graph.
  - Generating dependence-free subsets for parallel processing.
  - Cycle detection and cycle reporting.</code></pre>
            </div>
          </section>
        </section>
        <section id="43549293">
          <h3>
            <a class="item" href="https://glthr.com/myst-graph-1"
              >The Myst Graph: A New Perspective on Myst</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 17:19:48</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43549293"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43549076">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/meru-health/jobs/ZjKcsyk-director-growth-marketing"
              >Meru Health (YC S18) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 17:01:07</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43548589">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43548589"
              >Camelgate NPM Outage (Cloudflare)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 16:19:28</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43548589"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <p>
                NPM discussion:
                <a href="https://github.com/npm/cli/issues/8203"
                  >https://github.com/npm/cli/issues/8203</a
                >
              </p>
              <p>
                NPM incident:
                <a href="https://status.npmjs.org/incidents/hdtkrsqp134s"
                  >https://status.npmjs.org/incidents/hdtkrsqp134s</a
                >
              </p>
              <p>
                Cloudflare messaging:
                <a
                  href="https://www.cloudflarestatus.com/incidents/gshczn1wxh74"
                  >https://www.cloudflarestatus.com/incidents/gshczn1wxh74</a
                >
              </p>
              <p>
                GitHub issue:
                <a href="https://github.com/sindresorhus/camelcase/issues/114"
                  >https://github.com/sindresorhus/camelcase/issues/114</a
                >
              </p>
              <p>
                Anyone experiencing npm outage that's more than just the
                referenced camelcase package?
              </p>
            </div>
          </section>
        </section>
        <section id="43548217">
          <h3>
            <a
              class="item"
              href="https://techoreon.com/a-man-powers-home-8-years-laptop-batteries/"
              >A man powers home for eight years using a thousand old laptop
              batteries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 15:49:01</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43548217"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43548108">
          <h3>
            <a class="item" href="https://github.com/ruby-ui/ruby_ui"
              >RubyUI (Former PhlexUI): Ruby Gem for RubyUI Components</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 15:39:58</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43548108"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43547835">
          <h3>
            <a class="item" href="https://www.naveen.ing/cli-for-smartplugs/"
              >Show HN: Terminal dashboard that throttles my PC during peak
              electricity rates</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 15:17:59</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43547835"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              WattWise is a CLI tool that monitors my workstation’s power draw
              using a smart plug and automatically throttles the CPU &amp;amp;
              GPUs during expensive Time-of-Use electricity periods. Built with
              Python, uses PID controllers for smooth transitions between power
              states. Works with TP-Link Kasa plugs and Home Assistant.
            </div>
          </section>
        </section>
        <section id="43547813">
          <h3>
            <a
              class="item"
              href="https://asteriskmag.com/issues/09/we-can-must-and-will-simulate-nematode-brains"
              >We can, must, and will simulate nematode brains</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 15:16:21</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43547813"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43547677">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43547677"
              >Launch HN: ASim (YC S21) – Mobile app that generates mobile
              apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 15:06:11</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43547677"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
            <div class="text">
              <a href="https://asim.sh/">https://asim.sh/</a>). aSim is a mobile
              app that can generate immediately usable and shareable mobile apps
              from your phone.
              <p>
                Tools like bolt.new and v0 have made it easier to build websites
                by just chatting with an LLM, but things have been lagging on
                the mobile side. We’ve always been suckers for well-made mobile
                apps, but today, it is still extremely difficult to build mobile
                apps with LLMs on your computer, and nearly impossible to do it
                from your phone.
              </p>
              <p>
                We built aSim to make it easy to build prototypes, “trinket”
                apps, or just random fun things all async from your phone. You
                can check our landing page (<a href="https://asim.sh/"
                  >https://asim.sh/</a
                >) for some ideas of different types of apps. Hopefully we can
                bring some life to your side project graveyard, or at least make
                the graveyard even more numerous.
              </p>
              <p>
                Here’s a demo video of the generation process:
                <a href="https://youtu.be/_3VCl13oMGc"
                  >https://youtu.be/_3VCl13oMGc</a
                >
              </p>
              <p>
                And here are the actual one-shotted apps I made in that video:
              </p>
              <p>
                -
                <a
                  href="https://asim.sh/@dli/s/157003/make-an-app-where-i-can-upload-an-image-and-it"
                  >https://asim.sh/@dli/s/157003/make-an-app-where-i-can-upload...</a
                >
              </p>
              <p>
                -
                <a
                  href="https://asim.sh/@dli/s/157014/make-me-an-app-that-is-a-clone-of-yikyak"
                  >https://asim.sh/@dli/s/157014/make-me-an-app-that-is-a-clone...</a
                >
              </p>
              <p>
                -
                <a
                  href="https://asim.sh/@dli/s/157006/make-me-a-chess-timer-app-for-in-person-chess"
                  >https://asim.sh/@dli/s/157006/make-me-a-chess-timer-app-for-...</a
                >
              </p>
              <p>
                All of our app generations also get access to a set of APIs that
                help get the ball rolling on some basic functionality. These
                APIs range from LLM usage and image generation to having shared
                state with your friends, and globally among all users. We’re
                always on the lookout for new API integrations (i.e. Spotify and
                Maps) so please let us know if you need any!
              </p>
              <p>
                We’ve had a small cohort of beta users that have been making
                what we think are some pretty cool apps. Here’s some of our
                favorites:
              </p>
              <p>
                - Pokemon-style Gacha Game -
                <a href="https://asim.sh/@evan/s/126948/elves-vs-monsters"
                  >https://asim.sh/@evan/s/126948/elves-vs-monsters</a
                >
              </p>
              <p>
                - OpenStreetMap stats:
                <a href="https://asim.sh/@lake/s/104102/osm-stats"
                  >https://asim.sh/@lake/s/104102/osm-stats</a
                >
              </p>
              <p>
                - Star wars idle game:
                <a href="https://asim.sh/@jojaspero/s/29102"
                  >https://asim.sh/@jojaspero/s/29102</a
                >
              </p>
              <p>
                - Find your Meyers Briggs -
                <a href="https://asim.sh/@typewhisperer/s/135964/jung-mirror"
                  >https://asim.sh/@typewhisperer/s/135964/jung-mirror</a
                >
                (&lt;-- just for fun, you don’t have to believe in MB :))
              </p>
              <p>
                - AI Tic Tac Toe -
                <a href="https://asim.sh/@hashmelons/s/105561/ai-tic-tac"
                  >https://asim.sh/@hashmelons/s/105561/ai-tic-tac</a
                >
              </p>
              <p>
                Behind the scenes, we’re generating a modified version of
                Typescript React Native that can be parsed and compiled into
                simpler instructions that can be sent to mobile devices on the
                fly. We’ve ripped out some parts of the TSC library, as well as
                lean heavily on AcornJS to massage the (mostly usable) LLM code
                into something that can actually be run. We have a bunch of
                static analyzers, as well as leaning on web runtimes to catch
                runtime errors (as well as take screenshots), though at the very
                end of the day, we lean the most on our users to play around
                with their creations and remix them into something great.
              </p>
              <p>
                It’s currently completely free to use, so we hope you check out
                aSim at <a href="https://asim.sh/">https://asim.sh/</a> and
                enjoy it as much as we have while building it! Let us know what
                features you’d like to see and any problems you have with your
                generations.
              </p>
            </div>
          </section>
        </section>
        <section id="43547593">
          <h3>
            <a class="item" href="https://queue.acm.org/detail.cfm?id=3712057"
              >Systems Correctness Practices at AWS: Leveraging Formal and
              Semi-Formal Methods</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 14:59:42</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43547593"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43546607">
          <h3>
            <a
              class="item"
              href="https://blogs.loc.gov/maps/2025/03/globe-gores/"
              >Globe Gores</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 13:33:12</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43546607"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43546236">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/c78jd30ywv8o"
              >Bletchley code breaker Betty Webb dies aged 101</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 12:55:28</span
              ><span class="points-container"
                >Points: <span class="points">241</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43546236"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43546004">
          <h3>
            <a
              class="item"
              href="https://batsov.com/articles/2025/03/30/why-fsharp/"
              >Why F#?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 12:34:07</span
              ><span class="points-container"
                >Points: <span class="points">258</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43546004"
                  >Comments</a
                ><span class="descendants">: 232</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43545917">
          <h3>
            <a class="item" href="https://pages.cs.wisc.edu/~kovar/hall.html"
              >Electron band structure in germanium, my ass</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 12:25:12</span
              ><span class="points-container"
                >Points: <span class="points">542</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43545917"
                  >Comments</a
                ><span class="descendants">: 208</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43545349">
          <h3>
            <a
              class="item"
              href="https://home.cern/news/news/physics/cern-scientists-find-evidence-quantum-entanglement-sheep"
              >CERN scientists find evidence of quantum entanglement in sheep</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 11:08:34</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43545349"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43543743">
          <h3>
            <a
              class="item"
              href="http://oldvcr.blogspot.com/2025/04/the-april-fools-joke-that-might-have.html"
              >The April Fools joke that might have got me fired</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 07:11:30</span
              ><span class="points-container"
                >Points: <span class="points">335</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43543743"
                  >Comments</a
                ><span class="descendants">: 167</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43543241">
          <h3>
            <a class="item" href="https://nuejs.org/blog/large-scale-apps/"
              >Show HN: Nue – Apps lighter than a React button</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 05:47:41</span
              ><span class="points-container"
                >Points: <span class="points">600</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43543241"
                  >Comments</a
                ><span class="descendants">: 437</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43543235">
          <h3>
            <a class="item" href="https://app.fluentsubs.com/exercises/daily"
              >Show HN: Duolingo-style exercises but with real-world content
              like the news</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 05:46:34</span
              ><span class="points-container"
                >Points: <span class="points">363</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43543235"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
            <div class="text">
              <p>
                Every video is transcribed to get much better transcripts than
                the closed captions. I filter on high quality transcripts, and
                afterwards a LLM selects only plausible segments for the
                exercises. This seems to work well for quality control and seems
                to be reliable enough for these short exercises.
              </p>
              <p>Would love your thoughts!</p>
            </div>
          </section>
        </section>
        <section id="43541759">
          <h3>
            <a
              class="item"
              href="https://netflixtechblog.com/globalizing-productions-with-netflixs-media-production-suite-fc3c108c0a22"
              >Netflix’s Media Production Suite</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 01:02:33</span
              ><span class="points-container"
                >Points: <span class="points">230</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43541759"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43539585">
          <h3>
            <a class="item" href="https://goperf.dev/">Go Optimization Guide</a>
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 20:29:58</span
              ><span class="points-container"
                >Points: <span class="points">418</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43539585"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43539103">
          <h3>
            <a class="item" href="https://github.com/koreader/koreader"
              >KOReader: Open-Source eBook Reader</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 19:52:29</span
              ><span class="points-container"
                >Points: <span class="points">361</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43539103"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43532328">
          <h3>
            <a
              class="item"
              href="https://blogs.newardassociates.com/blog/2025/debts-tech-and-otherwise.html"
              >Debts, Tech and Otherwise</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 07:52:54</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43532328"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43529774">
          <h3>
            <a class="item" href="https://github.com/hassanshaikley/pico-pubsub"
              >Show HN: JavaScript PubSub in 163 Bytes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 01:37:55</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43529774"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43527460">
          <h3>
            <a
              class="item"
              href="https://medium.com/@brunopostle/actually-drawing-some-ovals-that-are-not-ellipses-444ba9fd9cf8"
              >Actually drawing some ovals – that are not ellipses (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-30 @ 20:44:17</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43527460"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43520005">
          <h3>
            <a class="item" href="https://www.chessprogramming.org/Chess324"
              >Chess324 – A Chess Variant to Reduce Draws</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-30 @ 00:29:49</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43520005"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43518570">
          <h3>
            <a
              class="item"
              href="https://schneegans.de/windows/unattend-generator/"
              >Generate autounattend.xml files for Windows 10/11</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 20:44:41</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43518570"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43518462">
          <h3>
            <a
              class="item"
              href="https://v2.tauri.app/blog/tauri-verso-integration/"
              >Experimental Tauri Verso Integration</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 20:30:49</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43518462"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43512470">
          <h3>
            <a class="item" href="https://www.captrice.io/"
              >A deliberate practice app for guitar players who want to level
              up</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 03:27:31</span
              ><span class="points-container"
                >Points: <span class="points">398</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43512470"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43510238">
          <h3>
            <a
              class="item"
              href="https://interestingengineering.com/military/us-marines-seagliders-for-rescue-ops"
              >US Marines to get high-speed, radar-evading electric seagliders
              for rescue ops</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 21:56:57</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43510238"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43504940">
          <h3>
            <a
              class="item"
              href="https://jenevoldsen.com/posts/excitable-cells/"
              >Excitable cells</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 13:05:52</span
              ><span class="points-container"
                >Points: <span class="points">226</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43504940"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
