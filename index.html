<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46769201">
          <h3>
            <a
              class="item"
              href="https://old.reddit.com/r/google/comments/1qn1hk1/google_has_seemingly_entirely_removed_search/"
              >Google Books has been effectively killed by the last algorithm
              update</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 18:05:15</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46769201"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46769131">
          <h3>
            <a
              class="item"
              href="https://www.ispreview.co.uk/index.php/2026/01/house-of-lords-votes-to-ban-uk-children-from-using-internet-vpns.html"
              >House of Lords Votes to Ban UK Children from Using Internet
              VPNs</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 18:00:32</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46769131"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46769051">
          <h3>
            <a
              class="item"
              href="https://bsky.app/profile/did:plc:okydh7e54e2nok65kjxdklvd/post/3mdd55paffk2o"
              >Fedora Asahi Remix is now working on Apple M3</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 17:54:20</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46769051"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46768909">
          <h3>
            <a
              class="item"
              href="https://nproject.io/blog/juicessh-give-me-back-my-pro-features/"
              >JuiceSSH – Give me my pro features back</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 17:46:38</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46768909"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46768257">
          <h3>
            <a
              class="item"
              href="https://www.darioamodei.com/essay/the-adolescence-of-technology"
              >The Adolescence of Technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 17:07:24</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46768257"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46767875">
          <h3>
            <a
              class="item"
              href="https://signoregalilei.com/2026/01/18/the-mountain-that-weighed-the-earth/"
              >The mountain that weighed the Earth</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 16:43:30</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46767875"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46767668">
          <h3>
            <a
              class="item"
              href="https://twitter.com/lellouchenico/status/2015775970330882319"
              >France Aiming to Replace Zoom, Google Meet, Microsoft Teams,
              etc.</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 16:27:46</span
              ><span class="points-container"
                >Points: <span class="points">255</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46767668"
                  >Comments</a
                ><span class="descendants">: 202</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46767323">
          <h3>
            <a
              class="item"
              href="https://www.kuril.in/blog/what-the-best-looks-like/"
              >What "The Best" Looks Like</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 16:04:07</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46767323"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46766961">
          <h3>
            <a
              class="item"
              href="https://www.greptile.com/blog/ai-code-review-bubble"
              >There is an AI code review bubble</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 15:38:50</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46766961"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46766741">
          <h3>
            <a class="item" href="https://qwen.ai/blog?id=qwen3-max-thinking"
              >Qwen3-Max-Thinking</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 15:23:00</span
              ><span class="points-container"
                >Points: <span class="points">299</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46766741"
                  >Comments</a
                ><span class="descendants">: 242</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46766507">
          <h3>
            <a
              class="item"
              href="https://senteguard.com/blog/#post-7fYcaQrAcfsldmSb7zVM"
              >OracleGPT: Thought Experiment on an AI Powered Executive</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 15:06:09</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46766507"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46766432">
          <h3>
            <a class="item" href="https://llmspy.org/docs/v3"
              >OSS ChatGPT WebUI – 530 Models, MCP, Tools, Gemini RAG,
              Image/Audio Gen</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 15:01:03</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46766432"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46766229">
          <h3>
            <a class="item" href="https://kwarc.info/teaching/TDM/Borges.pdf"
              >Exactitude in Science – Borges (1946) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 14:44:51</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46766229"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46766188">
          <h3>
            <a
              class="item"
              href="https://diamondgeezer.blogspot.com/2026/01/tv100.html"
              >Television is 100 years old today</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 14:41:04</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46766188"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46766031">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/technology/2026/jan/24/google-ai-overviews-youtube-medical-citations-study"
              >Google AI Overviews cite YouTube more than any medical site for
              health queries</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 14:27:00</span
              ><span class="points-container"
                >Points: <span class="points">245</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46766031"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46765460">
          <h3>
            <a
              class="item"
              href="https://atmoio.substack.com/p/after-two-years-of-vibecoding-im"
              >After two years of vibecoding, I'm back to writing by hand</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 13:36:22</span
              ><span class="points-container"
                >Points: <span class="points">490</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46765460"
                  >Comments</a
                ><span class="descendants">: 358</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46765273">
          <h3>
            <a
              class="item"
              href="https://kreya.app/blog/transfering-files-with-grpc/"
              >Transfering Files with gRPC</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 13:17:19</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46765273"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46764170">
          <h3>
            <a class="item" href="https://github.com/kxzk/snapbench"
              >Show HN: Only 1 LLM can fly a drone</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 11:00:44</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46764170"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46763864">
          <h3>
            <a
              class="item"
              href="https://maplibre.org/news/2026-01-23-mlt-release/"
              >MapLibre Tile: a modern and efficient vector tile format</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 10:19:51</span
              ><span class="points-container"
                >Points: <span class="points">326</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46763864"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46763721">
          <h3>
            <a class="item" href="https://walzr.com/sf-graffiti"
              >San Francisco Graffiti</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 10:02:12</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46763721"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46762882">
          <h3>
            <a
              class="item"
              href="https://github.com/quaadgras/graphics.gd/discussions/242"
              >The Holy Grail of Linux Binary Compatibility: Musl and Dlopen</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 07:41:52</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46762882"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46762150">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2026/Jan/25/the-browser-is-the-sandbox/"
              >The browser is the sandbox</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 05:23:01</span
              ><span class="points-container"
                >Points: <span class="points">294</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46762150"
                  >Comments</a
                ><span class="descendants">: 161</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46760099">
          <h3>
            <a
              class="item"
              href="https://www.sciencealert.com/scientists-identify-brain-waves-that-define-the-limits-of-you"
              >Scientists identify brain waves that define the limits of
              'you'</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 00:10:42</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46760099"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.nature.com/articles/s41467-025-67657-w"
                >https://www.nature.com/articles/s41467-025-67657-w</a
              >
            </div>
          </section>
        </section>
        <section id="46727603">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2512.14319"
              >Not all Chess960 positions are equally complex</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 02:27:30</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46727603"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46723128">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46723128"
              >Show HN: Postgres and ClickHouse as a unified data stack</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-22 @ 18:21:13</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46723128"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                TL;DR: NVMe-backed Postgres + built-in CDC into ClickHouse +
                pg_clickhouse so you can keep your app Postgres-first while
                running analytics in ClickHouse.
              </p>
              <p>
                Try it (private preview):
                <a href="https://clickhouse.com/cloud/postgres"
                  >https://clickhouse.com/cloud/postgres</a
                >
                Blog w/ live demo:
                <a
                  href="https://clickhouse.com/blog/postgres-managed-by-clickhouse"
                  >https://clickhouse.com/blog/postgres-managed-by-clickhouse</a
                >
              </p>
              <p>Problem</p>
              <p>
                Across many fast-growing companies using Postgres, performance
                and scalability commonly emerge as challenges as they grow. This
                is for both transactional and analytical workloads. On the OLTP
                side, common issues include slower ingestion (especially
                updates, upserts), slower vacuums, long-running transactions
                incurring WAL spikes, among others. In most cases, these
                problems stem from limited disk IOPS and suboptimal disk
                latency. Without the need to provision or cap IOPS, Postgres
                could do far more than it does today.
              </p>
              <p>
                On the analytics side, many limitations stem from the fact that
                Postgres was designed primarily for OLTP and lacks several
                features that analytical databases have developed over time, for
                example vectorized execution, support for a wide variety of
                ingest formats, etc. We’re increasingly seeing a common pattern
                where many companies like GitLab, Ramp, Cloudflare etc.
                complement Postgres with ClickHouse to offload analytics. This
                architecture enables teams to adopt two purpose-built
                open-source databases.
              </p>
              <p>
                That said, if you’re running a Postgres based application,
                adopting ClickHouse isn’t straightforward. You typically end up
                building a CDC pipeline, handling backfills, and dealing with
                schema changes and updating your application code to be aware of
                a second database for analytics.
              </p>
              <p>Solution</p>
              <p>
                On the OLTP side, we believe that NVMe-based Postgres is the
                right fit and can drastically improve performance. NVMe storage
                is physically colocated with compute, enabling significantly
                lower disk latency and higher IOPS than network-attached
                storage, which requires a network round trip for disk access.
                This benefits disk-throttled workloads and can significantly (up
                to 10x) speed up operations incl. updates, upserts, vacuums,
                checkpointing, etc. We are working on a detailed blog examining
                how WAL fsyncs, buffer reads, and checkpoints dominate on slow
                I/O and are significantly reduced on NVMe. Stay tuned!
              </p>
              <p>
                On the OLAP side, the Postgres service includes native CDC to
                ClickHouse and unified query capabilities through pg_clickhouse.
                Today, CDC is powered by ClickPipes/PeerDB under the hood, which
                is based on logical replication. We are working to make this
                faster and easier by supporting logical replication v2 for
                streaming in-progress transactions, a new logical decoding
                plugin to address existing limitations of logical replication,
                working toward sub-second replication, and more.
              </p>
              <p>
                Every Postgres comes packaged with the pg_clickhouse extension,
                which reduces the effort required to add ClickHouse-powered
                analytics to a Postgres application. It allows you to query
                ClickHouse directly from Postgres, enabling Postgres for both
                transactions and analytics. pg_clickhouse supports comprehensive
                query pushdown for analytics, and we plan to continuously expand
                this further (<a
                  href="https://news.ycombinator.com/item?id=46249462"
                  >https://news.ycombinator.com/item?id=46249462</a
                >).
              </p>
              <p>Vision</p>
              <p>
                To sum it up - Our vision is to provide a unified data stack
                that combines Postgres for transactions with ClickHouse for
                analytics, giving you best-in-class performance and scalability
                on an open-source foundation.
              </p>
              <p>Get Started</p>
              <p>
                We are actively working with users to onboard them to the
                Postgres service. Since this is a private preview, it is
                currently free of cost.If you’re interested, please sign up
                here.
                <a href="https://clickhouse.com/cloud/postgres"
                  >https://clickhouse.com/cloud/postgres</a
                >
              </p>
              <p>
                We’d love to hear your feedback on our thesis and anything else
                that comes to mind, it would be super helpful to us as we build
                this out!
              </p>
            </div>
          </section>
        </section>
        <section id="46709461">
          <h3>
            <a
              class="item"
              href="https://rendiment.io/postgresql/2026/01/21/pgtrgm-pgvector-music.html"
              >Find 'Abbey Road when type 'Beatles abbey rd': Fuzzy/Semantic
              search in Postgres</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-21 @ 18:24:55</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46709461"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46709270">
          <h3>
            <a
              class="item"
              href="https://www.jampa.dev/p/lessons-learned-after-10-years-as"
              >Things I've learned in my 10 years as an engineering manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-21 @ 18:11:13</span
              ><span class="points-container"
                >Points: <span class="points">430</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46709270"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46700489">
          <h3>
            <a
              class="item"
              href="https://costumedesignarchive.blogspot.com/2020/12/blade-runner-1982.html"
              >Blade Runner Costume Design (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-21 @ 02:34:20</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46700489"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46698264">
          <h3>
            <a
              class="item"
              href="https://www.experimental-history.com/p/text-is-king"
              >Text Is King</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-20 @ 21:57:08</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46698264"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46689289">
          <h3>
            <a class="item" href="https://github.com/tobi/qmd"
              >QMD - Quick Markdown Search</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-20 @ 08:29:18</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46689289"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
