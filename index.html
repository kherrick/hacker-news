<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45133109">
          <h3>
            <a
              class="item"
              href="https://leshicodes.github.io/blog/spotify-migration/"
              >I ditched Spotify and set up my own music stack</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 22:47:45</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45133109"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45132810">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/what-is-the-fourier-transform-20250903/"
              >What Is the Fourier Transform?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 22:11:09</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45132810"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45132710">
          <h3>
            <a
              class="item"
              href="https://www.bitflux.ai/blog/memory-is-slow-part2/"
              >Memory is slow, Disk is fast – Part 2</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 22:01:11</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45132710"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45132498">
          <h3>
            <a class="item" href="https://www.sqlite.org/affcase1.html"
              >What If OpenDocument Used SQLite?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 21:36:50</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45132498"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45132183">
          <h3>
            <a
              class="item"
              href="https://postround.substack.com/p/rocketships-and-slingshots"
              >Rocketships and Slingshots</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 21:06:10</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45132183"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45131921">
          <h3>
            <a
              class="item"
              href="https://worldfinals.icpc.global/scoreboard/2025/index.html"
              >ICPC 2025 World Finals Results</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 20:33:53</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45131921"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45131538">
          <h3>
            <a
              class="item"
              href="https://www.pauladamsmith.com/blog/2025/09/classic-mac-patterns.html"
              >Classic 8×8-pixel B&amp;amp;W Mac patterns</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 19:53:42</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45131538"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45131243">
          <h3>
            <a
              class="item"
              href="https://www.goto10retro.com/p/action-was-the-best-8-bit-programming"
              >Action was the best 8-bit programming language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 19:25:54</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45131243"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45130260">
          <h3>
            <a class="item" href="https://bbycroft.net/llm"
              >LLM Visualization</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 18:06:05</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45130260"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45129523">
          <h3>
            <a
              class="item"
              href="https://www.readtheprofile.com/p/saquon-barkley-investment-portfolio"
              >Saquon Barkley is playing for equity</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 17:07:08</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45129523"
                  >Comments</a
                ><span class="descendants">: 93</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45129442">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/artie/jobs"
              >Artie (YC S23) Is Hiring Engineers, AES, and Senior PMM</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 17:01:21</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45129369">
          <h3>
            <a class="item" href="https://trychroma.com/engineering/wal3"
              >Wal3: A Write-Ahead Log for Chroma, Built on Object Storage</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 16:55:06</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45129369"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45129237">
          <h3>
            <a
              class="item"
              href="https://www.productcurious.com/p/a-pms-guide-to-ai-agent-architecture"
              >A PM's Guide to AI Agent Architecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 16:45:39</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45129237"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45129190">
          <h3>
            <a class="item" href="https://www.age-simulation-suit.com/"
              >Age Simulation Suit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 16:41:24</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45129190"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45129160">
          <h3>
            <a class="item" href="https://www.bitrig.app/blog/swift-interpreter"
              >How we built an interpreter for Swift</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 16:39:03</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45129160"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45129085">
          <h3>
            <a class="item" href="https://tempo.xyz"
              >Stripe Launches L1 Blockchain: Tempo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 16:32:24</span
              ><span class="points-container"
                >Points: <span class="points">473</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45129085"
                  >Comments</a
                ><span class="descendants">: 616</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45129031">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45129031"
              >Launch HN: Slashy (YC S25) – AI that connects to apps and does
              tasks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 16:27:41</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45129031"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.slashy.ai">https://www.slashy.ai</a>). We’re
              building a general agent that connects to apps and can read data
              across them and perform actions via custom tools, semantic search,
              and personalized memory. Here’s a demo:
              <a href="https://www.youtube.com/watch?v=OeApHMHhccA"
                >https://www.youtube.com/watch?v=OeApHMHhccA</a
              >.
              <p>
                While working on a previous startup, we realized we were
                spending more time doing busywork in apps than actually building
                product. We lost hundreds of hours scraping LinkedIn profiles,
                updating spreadsheets, updating investor reports, and
                communicating across multiple Slack channels. Our breaking point
                happened after I checked my screen time and realized I spent 4
                hours a day in Gmail. We decided that we could create more value
                solving this than by working on the original startup (a code
                generation agent similar to Lovable).
              </p>
              <p>
                Slashy is an AI agent that uses direct tool calls to services
                such as Gmail, Calendar, Notion, Sheets and more. We built all
                of our tools in-house since we found that most MCPs are low
                quality and add an unnecessary layer of abstraction. Through
                these tools, the agent is able to semantically search across
                your apps, get relevant information, and perform actions (e.g.
                send emails, create calendar events, etc). This solves the
                problem of context-switching and copy-pasting information from
                an app back and forth into ChatGPT.
              </p>
              <p>
                Slashy integrates to 15 different services so far (G-Suite,
                Slack, Notion, Dropbox, Airtable, Outlook, Phone, Linear,
                Hubspot, and more). We use a single agent architecture (as we
                found this reduces hallucinations), and use our own custom
                tools—doing so allows the model to have higher quality as we can
                design them to work in a general agent structure, for example we
                use markdown for Slack/Notion instead of their native text
                structure.
              </p>
              <p>
                So what makes Slashy different from the 100 other general
                agents?
              </p>
              <p>
                - It Actually Takes Action: Unlike ChatGPT or Claude that just
                give you information, Slashy researches companies, creates
                Google Docs with findings, adds contacts to your CRM, schedules
                follow-ups, and sends personalized emails – all in one workflow.
              </p>
              <p>
                - Cross-Tool Context: Most automation tools work in silos (one
                of the biggest problems with MCP). Slashy understands your data
                across platforms. It can read your previous Slack conversations
                about a prospect, check your calendar for availability, research
                their company online, and draft a personalized email. What
                powers this is our own semantic search functionality.
              </p>
              <p>
                - User Action Graphs: Our agent over time has memory not just of
                past conversations, but also forms user actions graphs to know
                what actions are expected based on previous user conversations.
              </p>
              <p>
                - No Technical Setup Required: While Zapier requires building
                complex flows and fails silently, Slashy works through natural
                language. Just describe what you want automated.
              </p>
              <p>
                - Custom UI: For our tool calls we design custom UI for each of
                them to make the UX more natural.
              </p>
              <p>Here are some examples of workflows people use us for:</p>
              <p>
                ▪ "Every day look at my calendar and send me a notion doc with
                in-depth backgrounds on everyone I’m meeting"
              </p>
              <p>
                ▪ "Find the emails of everyone who reacted to my latest LinkedIn
                post and send personalized outreach"
              </p>
              <p>
                ▪ "Can you make me an investor pitch deck with market research,
                competitive analysis, and financial projections"
              </p>
              <p>▪ "Doing a full Nvidia Discounted Cash Flow (DCF) analysis"</p>
              <p>
                Slashy.ai is live with a free tier (100 daily credits) along
                with 500 credits for any new account. You can immediately try
                out workflows like the ones above and we have a special code for
                HN (HACKERNEWS at checkout).
              </p>
              <p>Hope you all enjoy Slashy as much as we do :)</p>
            </div>
          </section>
        </section>
        <section id="45128299">
          <h3>
            <a class="item" href="https://nordvpn.com/blog/meshnet-shutdown/"
              >Farewell to Meshnet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 15:22:03</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45128299"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45127983">
          <h3>
            <a
              class="item"
              href="https://news.ucsc.edu/2025/09/pulse-fi-wifi-heart-rate/"
              >WiFi signals can measure heart rate</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 14:53:50</span
              ><span class="points-container"
                >Points: <span class="points">227</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45127983"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45126503">
          <h3>
            <a class="item" href="https://www.henrikkarlsson.xyz/p/attention"
              >Almost anything you give sustained attention to will begin to
              loop on itself</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 12:29:49</span
              ><span class="points-container"
                >Points: <span class="points">575</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45126503"
                  >Comments</a
                ><span class="descendants">: 166</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45126358">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2025/09/04/atlassian-the-browser-company-deal.html"
              >Atlassian is acquiring The Browser Company</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 12:12:31</span
              ><span class="points-container"
                >Points: <span class="points">360</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45126358"
                  >Comments</a
                ><span class="descendants">: 380</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://browsercompany.substack.com/p/your-tuesday-in-2030"
                >https://browsercompany.substack.com/p/your-tuesday-in-2030</a
              >
              <p>
                <a
                  href="https://www.atlassian.com/blog/announcements/atlassian-acquires-the-browser-company"
                  >https://www.atlassian.com/blog/announcements/atlassian-acqui...</a
                >
              </p>
              <p>
                <a
                  href="https://www.theverge.com/web/770947/browser-company-arc-dia-acquired-atlassian"
                  >https://www.theverge.com/web/770947/browser-company-arc-dia-...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45125859">
          <h3>
            <a
              class="item"
              href="https://mistral.ai/news/le-chat-mcp-connectors-memories"
              >Le Chat: Custom MCP Connectors, Memories</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 11:04:36</span
              ><span class="points-container"
                >Points: <span class="points">359</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45125859"
                  >Comments</a
                ><span class="descendants">: 148</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45124143">
          <h3>
            <a
              class="item"
              href="https://www.bbc.co.uk/mediacentre/2025/melvyn-bragg-decides-to-step-down-from-presenting-in-our-time/"
              >Melvyn Bragg steps down from presenting In Our Time</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 06:18:13</span
              ><span class="points-container"
                >Points: <span class="points">261</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45124143"
                  >Comments</a
                ><span class="descendants">: 153</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.theguardian.com/tv-and-radio/2025/sep/03/in-our-time-melvyn-bragg-to-step-down-from-radio-4-role-after-27-years"
                >https://www.theguardian.com/tv-and-radio/2025/sep/03/in-our-...</a
              >
            </div>
          </section>
        </section>
        <section id="45124003">
          <h3>
            <a class="item" href="https://pudding.cool/2025/06/hello-stranger/"
              >30 minutes with a stranger</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 05:56:29</span
              ><span class="points-container"
                >Points: <span class="points">919</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45124003"
                  >Comments</a
                ><span class="descendants">: 335</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45123034">
          <h3>
            <a class="item" href="https://pola.rs/posts/polars-cloud-launch/"
              >Polars Cloud and Distributed Polars now available</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 03:01:49</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45123034"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45122885">
          <h3>
            <a
              class="item"
              href="https://www.theatlantic.com/technology/archive/2025/09/high-school-student-ai-education/684088/"
              >A high schooler writes about AI tools in the classroom</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-04 @ 02:37:42</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45122885"
                  >Comments</a
                ><span class="descendants">: 180</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.is/twynO">https://archive.is/twynO</a>
            </div>
          </section>
        </section>
        <section id="45094324">
          <h3>
            <a
              class="item"
              href="http://www.catb.org/~esr/jargon/html/U/Unix-conspiracy.html"
              >Unix Conspiracy (1991)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-01 @ 16:48:12</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45094324"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45092930">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/16-inch_softball"
              >16-inch softball</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-01 @ 14:28:28</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45092930"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45091004">
          <h3>
            <a class="item" href="https://erikdemaine.org/prints/QR/"
              >3D QR Codes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-01 @ 09:20:33</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45091004"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45089201">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=rf-efIZI_Dg"
              >A programmable display using microfluidics [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-01 @ 03:31:36</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45089201"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
