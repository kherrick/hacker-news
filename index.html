<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43916411">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/articles/weightwatchers-files-bankruptcy-to-adapt-to-chemically-induced-weight-loss-future-a63aa8ac"
              >WeightWatchers Files Bankruptcy, Adapts to Chemically Induced
              Weight-Loss Future</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 14:44:38</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43916411"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914832">
          <h3>
            <a
              class="item"
              href="https://mfkl.github.io/2024/01/10/unity-double-oss-standards.html"
              >Unity’s Open-Source Double Standard: the ban of VLC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 12:33:40</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914832"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914784">
          <h3>
            <a
              class="item"
              href="https://www.qodo.ai/blog/java-unit-testing-how-to-use-tests-as-a-debugging-tool-for-logic-errors/"
              >Using tests as a debugging tool for logic errors</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 12:27:40</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914784"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914738">
          <h3>
            <a class="item" href="https://aiola.ai/blog/jargonic-japanese-asr/"
              >Jargonic Sets New SOTA for Japanese ASR</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 12:21:58</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914738"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914705">
          <h3>
            <a
              class="item"
              href="https://blog.jetbrains.com/clion/2025/05/clion-is-now-free-for-non-commercial-use/"
              >CLion Is Now Free for Non-Commercial Use</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 12:18:38</span
              ><span class="points-container"
                >Points: <span class="points">286</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914705"
                  >Comments</a
                ><span class="descendants">: 154</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914677">
          <h3>
            <a
              class="item"
              href="https://www.tomshardware.com/pc-components/motherboards/sandy-bridge-era-motherboard-gains-m-2-ssd-boot-support-12-years-after-launch-first-new-bios-in-a-decade-for-decommissioned-motherboard"
              >Sandy Bridge-era motherboard gets M.2 SSD boot support 12 years
              after launch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 12:14:27</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914677"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43914235">
          <h3>
            <a
              class="item"
              href="https://gill.net.in/posts/my-quest-to-make-motorcycle-riding-safer/"
              >My quest to make motorcycle riding that tad bit safer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 11:06:17</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43914235"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43913950">
          <h3>
            <a
              class="item"
              href="https://blog.appsignal.com/2025/05/07/migrating-a-javascript-project-from-prettier-and-eslint-to-biomejs.html"
              >Migrating a JavaScript Project from Prettier and ESLint to
              BiomeJS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 10:12:14</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43913950"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43913751">
          <h3>
            <a class="item" href="https://dynomight.net/blood/"
              >So Much Blood</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 09:41:13</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43913751"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43912944">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/tabular/jobs/7V7rXlS-founding-engineer"
              >Tabular (YC S24) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 07:00:04</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43912844">
          <h3>
            <a class="item" href="https://zed.dev/blog/fastest-ai-code-editor"
              >Zed: High-performance AI Code Editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-07 @ 06:38:40</span
              ><span class="points-container"
                >Points: <span class="points">236</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43912844"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43910745">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/lean-software-development"
              >Bloat is still software's biggest vulnerability (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 23:33:54</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43910745"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43910685">
          <h3>
            <a
              class="item"
              href="https://www.variance.co/post/alignment-is-not-free-how-a-model-silenced-our-confidence-signals"
              >Alignment is not free: How model upgrades can silence your
              confidence signals</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 23:22:49</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43910685"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43910681">
          <h3>
            <a class="item" href="https://github.com/TerryCavanagh/VVVVVV"
              >VVVVVV Source Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 23:22:08</span
              ><span class="points-container"
                >Points: <span class="points">362</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43910681"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43909430">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/world/india/india-launches-attack-9-sites-pakistan-pakistan-occupied-jammu-kashmir-2025-05-06/"
              >India launches attack on 9 sites in Pakistan and Pakistani Jammu
              and Kashmir</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 20:41:47</span
              ><span class="points-container"
                >Points: <span class="points">440</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43909430"
                  >Comments</a
                ><span class="descendants">: 508</span></span
              >
            </h4>
            <div class="text">
              <p>
                https://www.cnn.com/2025/05/06/asia/india-pakistan-kashmir-conflict-hnk-intl
              </p>
              <p>
                https://www.bloomberg.com/news/live-blog/2025-05-06/india-strikes-pakistan-after-kashmir-attack
                (https://archive.ph/eypzA)
              </p>
              <p>https://www.bbc.com/news/live/cwyneele13qt</p>
            </div>
          </section>
        </section>
        <section id="43909409">
          <h3>
            <a
              class="item"
              href="https://github.com/asgeirtj/system_prompts_leaks/blob/main/claude.txt"
              >Claude's system prompt is over 24k tokens with tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 20:39:35</span
              ><span class="points-container"
                >Points: <span class="points">482</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43909409"
                  >Comments</a
                ><span class="descendants">: 235</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43909398">
          <h3>
            <a class="item" href="https://github.com/ace-step/ACE-Step"
              >ACE-Step: A step towards music generation foundation model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 20:38:00</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43909398"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43907820">
          <h3>
            <a
              class="item"
              href="https://www.collabora.com/news-and-blog/blog/2025/05/06/matt-godbolt-sold-me-on-rust-by-showing-me-c-plus-plus/"
              >Matt Godbolt sold me on Rust by showing me C++</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 17:51:03</span
              ><span class="points-container"
                >Points: <span class="points">510</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43907820"
                  >Comments</a
                ><span class="descendants">: 477</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43906841">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43906841"
              >Launch HN: Exa (YC S21) – The web as a database</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 16:18:42</span
              ><span class="points-container"
                >Points: <span class="points">376</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43906841"
                  >Comments</a
                ><span class="descendants">: 124</span></span
              >
            </h4>
            <div class="text">
              <a href="https://exa.ai">https://exa.ai</a>). We recently launched
              Exa Websets, an embeddings-powered search engine designed to
              return exactly what you’re asking for. You can get precise results
              for complex queries like “all startups working on open-source
              developer tools based in SF, founded 2021-2025”. Demo here -
              <a href="https://youtu.be/Unt8hJmCxd4"
                >https://youtu.be/Unt8hJmCxd4</a
              >
              <p>
                We started working on Exa because we were frustrated that while
                LLM state-of-the-art is advancing every week, Google has gotten
                worse over time. The Internet used to feel like a magical
                information portal, but it doesn’t feel that way anymore when
                you’re constantly being pushed towards SEO-optimized clickbait.
              </p>
              <p>
                Websets is a step in the opposite direction. For every search,
                we perform dozens of embedding searches over Exa’s vector
                database of the web to find good search candidates, then we run
                agentic workflows on each result to verify they match exactly
                what you asked for.
              </p>
              <p>
                Websets results are good for two reasons. First, we train custom
                embedding models for our main search algorithm, instead of
                typical keyword matching search algorithms. Our embeddings
                models are trained specifically to return exactly the type of
                entity you ask for. In practice, that means if you search
                “startups working in nanotech”, keyword-based search engines
                return listicles about nanotech startups, because these
                listicles match the keywords in the query. In contrast, our
                embedding models return actual startup homepages, because these
                startup homepages match the meaning of the query.
              </p>
              <p>
                The second is that LLMs provide the last-mile intelligence
                needed to verify every result. Each result and piece of data is
                backed with supporting references that we used to validate that
                the result is actually a match for your search criteria. That’s
                why Websets can take minutes or even hours to run, depending on
                your query and how many results you ask for. For valuable search
                queries, we think this is worth it.
              </p>
              <p>
                Also notably, Websets are tables, not lists. You can add
                “enrichment” columns to find more information about each result,
                like “# of employees” or “does author have blog?”, and the cells
                asynchronously load in. This table format hopefully makes the
                web feel more like a database.
              </p>
              <p>A few examples of searches that work with Websets:</p>
              <p>
                - “Math blogs created by teachers from outside the US”:
                <a href="https://websets.exa.ai/cma1oz9xf007sis0ipzxgbamn"
                  >https://websets.exa.ai/cma1oz9xf007sis0ipzxgbamn</a
                >
              </p>
              <p>
                - "research paper about ways to avoid the O(n^2) attention
                problem in transformers, where one of the first author's first
                name starts with "A","B", "S", or "T", and it was written
                between 2018 and 2022”:
                <a href="https://websets.exa.ai/cm7dpml8c001ylnymum4sp11h"
                  >https://websets.exa.ai/cm7dpml8c001ylnymum4sp11h</a
                >
              </p>
              <p>
                - “US based healthcare companies, with over 100 employees and a
                technical founder":
                <a href="https://websets.exa.ai/cm6lc0dlk004ilecmzej76qx2"
                  >https://websets.exa.ai/cm6lc0dlk004ilecmzej76qx2</a
                >
              </p>
              <p>
                - “all software engineers in the Bay Area, with experience in
                startups, who know Rust and have published technical content
                before”:
                <a href="https://youtu.be/knjrlm1aibQ"
                  >https://youtu.be/knjrlm1aibQ</a
                >
              </p>
              <p>
                You can try it at
                <a href="https://websets.exa.ai/">https://websets.exa.ai/</a>
                and API docs are at
                <a href="https://docs.exa.ai/websets"
                  >https://docs.exa.ai/websets</a
                >. We’d love to hear your feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="43906018">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/gemini-2-5-pro-io-improved-coding-performance/"
              >Gemini 2.5 Pro Preview</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 15:10:00</span
              ><span class="points-container"
                >Points: <span class="points">657</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43906018"
                  >Comments</a
                ><span class="descendants">: 627</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43905942">
          <h3>
            <a class="item" href="https://felixrieseberg.github.io/clippy/"
              >Show HN: Clippy – 90s UI for local LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 15:02:22</span
              ><span class="points-container"
                >Points: <span class="points">1041</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43905942"
                  >Comments</a
                ><span class="descendants">: 252</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43904478">
          <h3>
            <a
              class="item"
              href="https://scienceblog.com/wildscience/2025/05/06/cuttlefish-talk-with-their-arms-study-reveals/"
              >Cuttlefish 'talk' with their arms, study reveals</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 12:46:49</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43904478"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.biorxiv.org/content/10.1101/2025.04.13.648584v3"
                >https://www.biorxiv.org/content/10.1101/2025.04.13.648584v3</a
              >
            </div>
          </section>
        </section>
        <section id="43902308">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2025/05/06/doordash-to-buy-uk-food-delivery-firm-deliveroo-in-3point9-billion-deal.html"
              >DoorDash to acquire Deliveroo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 06:27:04</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43902308"
                  >Comments</a
                ><span class="descendants">: 280</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43901131">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-04-scientists-tattoo-tardigrades.html"
              >Scientists have found a way to 'tattoo' tardigrades</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 01:51:22</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43901131"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43900877">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2025-05-06/openai-reaches-agreement-to-buy-startup-windsurf-for-3-billion"
              >OpenAI reaches agreement to buy Windsurf for $3B</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-06 @ 00:57:48</span
              ><span class="points-container"
                >Points: <span class="points">600</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43900877"
                  >Comments</a
                ><span class="descendants">: 522</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43899288">
          <h3>
            <a class="item" href="https://github.com/rzane/docker2exe"
              >docker2exe: Convert a Docker image to an executable</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-05 @ 20:47:04</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43899288"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43887874">
          <h3>
            <a class="item" href="https://github.com/VictorTaelin/WebMonkeys"
              >WebMonkeys: parallel GPU programming in JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-04 @ 17:00:04</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43887874"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43887068">
          <h3>
            <a class="item" href="https://specbranch.com/posts/fp-rand/"
              >Perfect Random Floating-Point Numbers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-04 @ 14:56:12</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43887068"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43884418">
          <h3>
            <a class="item" href="https://github.com/dse/old-timey-mono-font"
              >Old Timey Code and Old Timey Mono Fonts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-04 @ 04:10:09</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43884418"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43884245">
          <h3>
            <a class="item" href="https://github.com/EvanZhouDev/polycompiler"
              >Polycompiler: Merge Python and JavaScript code into one file that
              runs in both</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-04 @ 03:27:01</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43884245"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
