<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44745465">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/world/2025/jul/31/severe-turbulence-delta-25-passengers-injured"
              >Turbulence forces Delta plane to make emergency landing, 25
              passengers injured</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 13:32:40</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44745465"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44745123">
          <h3>
            <a
              class="item"
              href="https://scottkosman.com/post/blog/so-youre-a-manager-now/"
              >So You're a Manager Now</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 12:48:48</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44745123"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44745113">
          <h3>
            <a
              class="item"
              href="https://www.theatlantic.com/science/archive/2025/07/science-empire-america-decline/683711/"
              >How Scientific Empires End</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 12:47:15</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44745113"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44745045">
          <h3>
            <a
              class="item"
              href="https://codspeed.io/blog/benchmarks-in-ci-without-noise"
              >Benchmarks in CI: Escaping the Cloud Chaos</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 12:40:05</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44745045"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744927">
          <h3>
            <a
              class="item"
              href="https://computeradsfromthepast.substack.com/p/altima-nsx"
              >Altima NSX – Computer Ads from the Past</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 12:25:43</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44744927"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744756">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/infracost/jobs/ukwJ299-senior-product-manager"
              >Infracost (YC W21) hiring first PM to shift $600B cloud spend to
              proactive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 12:00:26</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744715">
          <h3>
            <a
              class="item"
              href="https://digitalcourage.social/@echo_pbreyer/114946559233051667"
              >PSA: Many countries that said NO to ChatControl in 2024 are now
              undecided</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 11:54:22</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44744715"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744578">
          <h3>
            <a class="item" href="https://cmtext.com/"
              >Introduction to Computer Music an Electronic Textbook</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 11:37:22</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44744578"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744454">
          <h3>
            <a
              class="item"
              href="https://movies.stackexchange.com/questions/128020/how-was-the-universal-pictures-1936-opening-logo-created"
              >How was the Universal Pictures 1936 opening logo created?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 11:19:54</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44744454"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744331">
          <h3>
            <a
              class="item"
              href="https://arxiviq.substack.com/p/gepa-reflective-prompt-evolution"
              >GEPA: Reflective Prompt Evolution Can Outperform Reinforcement
              Learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 10:57:58</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44744331"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744324">
          <h3>
            <a
              class="item"
              href="https://www.spacebar.news/servo-undercover-web-browser-engine/"
              >I tried Servo, the undercover web browser engine made with
              Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 10:56:21</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44744324"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744096">
          <h3>
            <a
              class="item"
              href="https://www.cbsnews.com/news/hawley-democrats-vote-stock-trading-ban-committee/"
              >GOP’s Josh Hawley and Democrats vote to advance congressional
              stock trading ban</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 10:07:19</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44744096"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744079">
          <h3>
            <a
              class="item"
              href="https://dataswamp.org/~solene/2025-05-31-linux-killswitch-on-power-disconnect.html"
              >How to trigger a command on Linux when disconnected from power</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 10:03:54</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44744079"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44742710">
          <h3>
            <a class="item" href="https://github.com/dipampaul17/AgentGuard"
              >Show HN: AgentGuard – Auto-kill AI agents before they burn
              through your budget</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 05:54:04</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44742710"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
            <div class="text">
              <p>
                AgentGuard monitors API calls in real-time and automatically
                kills your process when it hits your budget limit.
              </p>
              <p>How it works:</p>
              <p>Add 2 lines to any AI project:</p>
              <p></p>
              <pre><code>  const agentGuard = require('agent-guard');
  await agentGuard.init({ limit: 50 }); // $50 budget

  // Your existing code runs unchanged
  const response = await openai.chat.completions.create({...});
  // AgentGuard tracks costs automatically
</code></pre>
              When your code hits $50 in API costs, AgentGuard stops execution
              and shows you exactly what happened.
              <p>Why I built this:</p>
              <p>
                I got tired of seeing "I accidentally spent $500 on OpenAI"
                posts. Existing tools like tokencost help you
                <i>measure</i> costs after the fact, but nothing prevents
                runaway spending in real-time.
              </p>
              <p>
                AgentGuard is essentially a circuit breaker for AI API costs.
                It's saved me from several costly bugs during development.
              </p>
              <p>
                Limitations: Only works with OpenAI and Anthropic APIs
                currently. Cost calculations are estimates based on documented
                pricing.
              </p>
              <p>
                Source:
                <a href="https://github.com/dipampaul17/AgentGuard"
                  >https://github.com/dipampaul17/AgentGuard</a
                >
              </p>
              <p>Install: npm i agent-guard</p>
            </div>
          </section>
        </section>
        <section id="44742251">
          <h3>
            <a
              class="item"
              href="https://alexkondov.com/i-know-when-youre-vibe-coding/"
              >I know when you're vibe coding</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 04:16:40</span
              ><span class="points-container"
                >Points: <span class="points">285</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44742251"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44740222">
          <h3>
            <a class="item" href="https://www.figma.com/blog/ipo-pricing/"
              >Figma will IPO on July 31</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 22:24:58</span
              ><span class="points-container"
                >Points: <span class="points">284</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44740222"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44739632">
          <h3>
            <a class="item" href="https://ollama.com/blog/new-app"
              >Ollama's new app</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 21:19:03</span
              ><span class="points-container"
                >Points: <span class="points">471</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44739632"
                  >Comments</a
                ><span class="descendants">: 248</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44739556">
          <h3>
            <a class="item" href="https://blog.val.town/vibe-code"
              >Vibe code is legacy code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 21:13:20</span
              ><span class="points-container"
                >Points: <span class="points">665</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44739556"
                  >Comments</a
                ><span class="descendants">: 387</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44739494">
          <h3>
            <a
              class="item"
              href="https://www.newstatesman.com/culture/books/book-of-the-day/2025/07/150-years-of-the-bizarre-hans-christian-andersen"
              >150 years of Hans Christian Andersen</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 21:07:13</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44739494"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.ph/10l96">https://archive.ph/10l96</a>
            </div>
          </section>
        </section>
        <section id="44739315">
          <h3>
            <a class="item" href="https://overreacted.io/the-math-is-haunted/"
              >The Math Is Haunted</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 20:46:49</span
              ><span class="points-container"
                >Points: <span class="points">308</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44739315"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44736967">
          <h3>
            <a class="item" href="https://www.catherinejue.com/fast">Fast</a>
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 17:21:17</span
              ><span class="points-container"
                >Points: <span class="points">1419</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44736967"
                  >Comments</a
                ><span class="descendants">: 391</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44736090">
          <h3>
            <a class="item" href="https://optician-sans.com/"
              >Optician Sans – A free font based on historical eye charts and
              optotypes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 16:11:58</span
              ><span class="points-container"
                >Points: <span class="points">306</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44736090"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44735843">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44735843"
              >Launch HN: Lucidic (YC W25) – Debug, test, and evaluate AI agents
              in production</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 15:54:02</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44735843"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
            <div class="text">
              <a href="https://dashboard.lucidic.ai"
                >https://dashboard.lucidic.ai</a
              >), an AI agent interpretability tool to help observe/debug AI
              agents.
              <p>
                Here is a demo:
                <a href="https://youtu.be/Zvoh1QUMhXQ"
                  >https://youtu.be/Zvoh1QUMhXQ</a
                >.
              </p>
              <p>
                Getting started is easy with just one line of code. You just
                call lai.init() in your agent code and log into the dashboard.
                You can see traces of each run, cumulative trends across
                sessions, built-in or custom evals, and grouped failure modes.
                Call lai.create_step() with any metadata you want, memory
                snapshots, tool outputs, stateful info, and we'll index it for
                debugging.
              </p>
              <p>
                We did NLP research at Stanford AI Lab (SAIL), where we worked
                on creating an AI agent (w/ fine-tuned models and DSPy) to solve
                math olympiad problems (focusing on AIME/USAMO); and we realized
                debugging these agents was hard. But the last straw was when we
                built an e-commerce agent that could buy items online. It kept
                failing at checkout, and every one-line change, tweaking a
                prompt, switching to Llama, adjusting tool logic, meant another
                10-minute rerun just to see if we hit the same checkout page.
              </p>
              <p>
                At this point, we were all like, this sucks, so we improved
                agent interpretability with better debugging, monitoring, and
                evals.
              </p>
              <p>
                We started by listening to users who told us traditional LLM
                observability platforms don't capture the complexity of agents.
                Agents have tools, memories, events, not just input/output
                pairs. So we automatically transform OTel (and/or regular) agent
                logs into interactive graph visualizations that cluster similar
                states based on memory and action patterns. We heard that people
                wanted to test small changes even with the graphs, so we created
                “time traveling,” where you can modify any state (memory
                contents, tool outputs, context), then re-simulate 30–40 times
                to see outcome distributions. We embed the responses, cluster by
                similarity, and show which modifications lead to stable vs.
                divergent behaviors.
              </p>
              <p>
                Then we saw people running their agent 10 times on the same
                task, watching each run individually, and wasting hours looking
                at mostly repeated states. So we built trajectory clustering on
                similar state embeddings (like similar tools or memories) to
                surface behavioral patterns across mass simulations.
              </p>
              <p>
                We then use that to create a force-directed layout that
                automatically groups similar paths your agent took, which
                displays states as nodes, actions as edges, and failure
                probability as color intensity. The clusters make failure
                patterns obvious; you see trends across hundreds of runs, not
                individual traces.
              </p>
              <p>
                Finally, when people saw our observability features, they
                naturally wanted evaluation capabilities. So we developed a
                concept for people to make their own evals called "rubrics,"
                which lets you define specific criteria, assign weights to each
                criterion, and set score definitions, giving you a structured
                way to measure agent performance against your exact
                requirements.
              </p>
              <p>
                To evaluate these criteria, we used our own platform to build an
                investigator agent that reviews your criteria and evaluates
                performance much more effectively than traditional
                LLM-as-a-judge approaches.
              </p>
              <p>
                To get started visit dashboard.lucidic.ai and
                <a href="https://docs.lucidic.ai/getting-started/quickstart"
                  >https://docs.lucidic.ai/getting-started/quickstart</a
                >. You can use it for free for 1,000 event and step creations.
              </p>
              <p>
                Look forward to your thoughts! And don’t hesitate to reach out
                at team@lucidic.ai
              </p>
            </div>
          </section>
        </section>
        <section id="44733341">
          <h3>
            <a
              class="item"
              href="http://math.uchicago.edu/~shmuel/Network-course-readings/Markov_chain_tricks.pdf"
              >Problem solving using Markov chains (2007) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 12:29:52</span
              ><span class="points-container"
                >Points: <span class="points">266</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44733341"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727130">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/quantum-gravity-sensor"
              >A Quantum Gravimeter for GPS Backup</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 19:07:59</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727130"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44724216">
          <h3>
            <a class="item" href="https://www.benkuhn.net/attention/"
              >Attention is your scarcest resource (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 14:57:29</span
              ><span class="points-container"
                >Points: <span class="points">271</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44724216"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44724072">
          <h3>
            <a
              class="item"
              href="https://doublefree.dev/go-race-mutex-blindspot/"
              >Go's race detector has a mutex blind spot</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 14:44:05</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44724072"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44716653">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/information-technology/2025/07/openais-chatgpt-agent-casually-clicks-through-i-am-not-a-robot-verification-test/"
              >OpenAI's ChatGPT Agent casually clicks through "I am not a robot"
              verification</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-28 @ 22:46:19</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44716653"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44711163">
          <h3>
            <a class="item" href="https://lwn.net/Articles/1029307/"
              >Following Up on the Python JIT</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-28 @ 14:23:19</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44711163"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44710256">
          <h3>
            <a class="item" href="https://eclipse.dev/sumo/"
              >Sumo – Simulation of Urban Mobility</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-28 @ 12:39:52</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44710256"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
