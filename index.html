<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41235789">
          <h3>
            <a
              class="item"
              href="https://dualpower.supply/posts/rfb-kit-workshop/"
              >An open-source flow battery kit</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 14:25:19</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41235789"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41235733">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41235733"
              >Launch HN: Shaped (YC W22) – AI-Powered Recommendations and
              Search</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 14:19:21</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41235733"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.shaped.ai/">https://www.shaped.ai/</a>).
              We're building a semantic recommendation and search platform for
              marketplaces and content companies.
              <p>
                There’s a sandbox at
                <a href="https://play.shaped.ai/dashboard/home"
                  >https://play.shaped.ai/dashboard/home</a
                >
                that you can use to explore demo models and evaluate results
                interactively. And we have a demo video at
                <a href="https://www.youtube.com/watch?v=toCsUYQnJ_g"
                  >https://www.youtube.com/watch?v=toCsUYQnJ_g</a
                >.
              </p>
              <p>
                The explosion of online content, driven by both individuals and
                generative tools, is making it harder than ever for users to
                sift through the noise and find what's relevant to them.
                Platforms like Netflix, TikTok, and Meta have set a high bar,
                proving that personalized experiences are key to cutting through
                the clutter and engaging users effectively.
              </p>
              <p>
                Despite advancements in AI and semantic infrastructure like
                vector stores, building a truly relevant recommendation or
                search system is still extremely difficult. It's not just about
                deploying the latest LLM—the difficulties lie in creating the
                infrastructure to orchestrate the components seamlessly.
                Consider the challenge of continuously fine-tuning models with
                fresh data while simultaneously serving real-time personalized
                recommendations to millions of users. It requires a delicate
                balancing act of speed, scale, and sophistication.
              </p>
              <p>
                Our goal is to empower any technical team to build
                state-of-the-art recommendation and search systems, regardless
                of their data infrastructure. Here's how we eliminate the
                friction:
              </p>
              <p>
                Solving Data Challenges: We integrate directly with your data
                sources—Segment, Amplitude, Rudderstack, and more. We handle the
                complexities of real-time streaming, ETLs, and data quality
                robustness, so you can get started in minutes.
              </p>
              <p>
                Leveraging Cutting-Edge Models – we utilize state-of-the-art
                large-scale language, image, and tabular encoding models. This
                not only extracts maximum value from your data but also
                simplifies the process, even with unstructured data.
              </p>
              <p>
                Real-time Optimization: Unlike vision or NLP tasks,
                recommendation system performance hinges on real-time
                capabilities—training, feature engineering, and serving. We've
                architected our platform with this at its core.
              </p>
              <p>
                We're already helping many companies build relevant
                recommendations and search for their users. Outdoorsy, for
                example, uses us to power its RV rental marketplace. E-commerce
                businesses like DribbleUp and startups like Overlap have seen up
                to a 40% increase in both conversions and engagement when
                integrating Shaped.
              </p>
              <p>
                A bit about us: Tullie was previously an AI Researcher at FAIR
                working on multimodal ranking at Meta. He released PyTorchVideo,
                a widely-used video understanding library, which contains the
                video understanding models that power systems like IG Reels. Dan
                led product research at Afterpay and Uber, driven by how
                behavioral psychology influences user experience.
              </p>
              <p>
                We've been heads down building Shaped for quite a while, so this
                launch feels like a big milestone. We'd love to hear your
                feedback – technical deep dives, feature requests, you name it.
                Let us know what you think!
              </p>
            </div>
          </section>
        </section>
        <section id="41235614">
          <h3>
            <a
              class="item"
              href="https://techmgzn.com/saudi-arabia-to-host-sixth-halo-space-test-flight-in-september/"
              >Saudi Arabia to Host Sixth Halo Space Test Flight in September</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 14:06:22</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41235614"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41235462">
          <h3>
            <a class="item" href="https://github.com/libAudioFlux/audioFlux"
              >A C/C++ library for audio and music analysis</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 13:51:27</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41235462"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41235038">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41235038"
              >Show HN: See the impact on your cloud costs as you code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 13:00:42</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41235038"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
            <div class="text">
              <a href="https://infracost.io/">https://infracost.io/</a>) that
              shows engineers how much their code changes are going to cost on
              the cloud before being deployed (in CI/CD like GitHub or GitLab).
              Previously,
              <p>
                I was one of the founders of tfsec (it scanned code for security
                issues). One of the things I learnt was if we catch issues
                early, i.e. when the engineer was typing their code, we save a
                bunch of time.
              </p>
              <p>
                I was thinking … okay, why not build cloud costs into the code
                editor. Show the cloud cost impact of the code as the engineers
                are writing it.
              </p>
              <p>
                So I spent some weekends and built one right into JetBrains -
                fully free - keep in mind it is new, might be buggy, so please
                let me know if you find issues. It is check it out:
                <a href="https://plugins.jetbrains.com/plugin/24761-infracost"
                  >https://plugins.jetbrains.com/plugin/24761-infracost</a
                >
              </p>
              <p>
                I recorded a video too, if you just want to see what it does:
              </p>
              <p>
                <a href="https://www.youtube.com/watch?v=kgfkdmUNzEo"
                  >https://www.youtube.com/watch?v=kgfkdmUNzEo</a
                >
              </p>
              <p>
                I'd love to get your feedback on this. I want to know if it is
                helpful, what other cool features we can add to it, and how can
                we make it better?
              </p>
              <p>
                Final note - the extension calls our Cloud Pricing API, which
                holds 4 million prices from AWS, Azure and GCP, so no secrets,
                credentials etc are touched at all.
              </p>
              <p>
                If you want to get the same Infracost goodness in your CI/CD,
                check out
                <a href="https://www.infracost.io/cicd"
                  >https://www.infracost.io/cicd</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41234964">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/the-webb-telescope-further-deepens-the-biggest-controversy-in-cosmology-20240813/"
              >The Webb Telescope Further Deepens the Biggest Controversy in
              Cosmology</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 12:50:54</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41234964"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41234877">
          <h3>
            <a class="item" href="https://github.com/Parrot-Developers/libpomp"
              >Printf Oriented Message Protocol</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 12:41:07</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41234877"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41234713">
          <h3>
            <a class="item" href="https://github.com/jianchang512/pyvideotrans"
              >Open-source tool translates and dubs videos into other languages
              using AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 12:15:57</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41234713"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41234636">
          <h3>
            <a
              class="item"
              href="http://yummymelon.com/devnull/contextual-interfaces-in-casual-calc.html"
              >Emacs: Contextual Interfaces in Casual Calc</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 12:05:22</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41234636"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41234174">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/culture/open-questions/are-we-living-in-the-age-of-info-determinism"
              >Are We Living in the Age of Info-Determinism?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 10:47:57</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41234174"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41233924">
          <h3>
            <a class="item" href="https://graphicinfo.cc/"
              >Show HN:I build a website to generate infographics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 09:58:16</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41233924"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41233811">
          <h3>
            <a class="item" href="https://github.com/dplanitzer/Serena"
              >Serena: An experimental operating system for 32bit Amiga
              computers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 09:33:28</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41233811"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41233012">
          <h3>
            <a
              class="item"
              href="https://boards.greenhouse.io/supabase/jobs/5245988004"
              >Supabase (YC S20) Is Hiring a Technical Product Manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 07:00:54</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41232621">
          <h3>
            <a
              class="item"
              href="http://peter.eisentraut.org/blog/2024/08/13/the-new-postgresql-17-make-dist"
              >The new PostgreSQL 17 make dist</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 05:43:49</span
              ><span class="points-container"
                >Points: <span class="points">165</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41232621"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41232446">
          <h3>
            <a class="item" href="https://samcurry.net/points-com"
              >Hacking the largest airline and hotel rewards platform (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 05:10:14</span
              ><span class="points-container"
                >Points: <span class="points">230</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41232446"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41232259">
          <h3>
            <a class="item" href="https://www.the-hinternet.com/p/the-goths"
              >The Goths</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 04:30:15</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41232259"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41231490">
          <h3>
            <a class="item" href="https://sakana.ai/ai-scientist/"
              >The AI Scientist: Towards Automated Open-Ended Scientific
              Discovery</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 02:10:58</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41231490"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41231145">
          <h3>
            <a
              class="item"
              href="https://osintteam.blog/mastering-osint-how-to-find-information-on-anyone-680e4086f17f"
              >Mastering Osint: How to Find Information on Anyone</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 01:03:36</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41231145"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41230344">
          <h3>
            <a class="item" href="https://github.com/judofyr/spice"
              >Spice: Fine-grained parallelism with sub-nanosecond overhead in
              Zig</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 23:01:37</span
              ><span class="points-container"
                >Points: <span class="points">341</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41230344"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41227772">
          <h3>
            <a class="item" href="https://github.com/callisto-lang/compiler"
              >Callisto: Reverse polish notation programming language inspired
              by YSL-C3, Forth</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 18:31:45</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41227772"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41226039">
          <h3>
            <a class="item" href="https://comment.org/repair-and-remain/"
              >Repair and Remain (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 16:06:42</span
              ><span class="points-container"
                >Points: <span class="points">550</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41226039"
                  >Comments</a
                ><span class="descendants">: 215</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41224225">
          <h3>
            <a class="item" href="https://qntm.org/scp"
              >There Is No Antimemetics Division (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 13:37:42</span
              ><span class="points-container"
                >Points: <span class="points">662</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41224225"
                  >Comments</a
                ><span class="descendants">: 244</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41220143">
          <h3>
            <a class="item" href="https://blog.cloudflare.com/http-3-vs-http-2"
              >Comparing HTTP/3 vs. HTTP/2 Performance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 00:08:09</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41220143"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41212072">
          <h3>
            <a
              class="item"
              href="https://moyix.blogspot.com/2022/09/someones-been-messing-with-my-subnormals.html"
              >Someone's been messing with Python's floating point subnormals</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-10 @ 20:42:03</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41212072"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41211091">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s44260-024-00014-y"
              >Antifragility in complex dynamical systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-10 @ 17:50:14</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41211091"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41210745">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/rodney-brooks-three-laws-robotics"
              >What to know about real robots deployed in the real world</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-10 @ 17:00:17</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41210745"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41209900">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/infrared-laser-microphone-keystroke-surveillance/"
              >Open source laser microphone picks up laptop keystrokes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-10 @ 14:48:13</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41209900"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41207838">
          <h3>
            <a
              class="item"
              href="https://vankessel.io/visualizing-complex-functions"
              >Visualizing Complex Functions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-10 @ 07:05:33</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41207838"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41202841">
          <h3>
            <a
              class="item"
              href="https://www.markdomowicz.com/all/2023_10_16_upsetting_magazine_77/article/upsettingmagazine77/"
              >Upsetting Magazine #77 (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 15:33:20</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41202841"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41191175">
          <h3>
            <a
              class="item"
              href="https://jakearchibald.com/2024/video-with-transparency/"
              >Video with Alpha Transparency on the Web</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 13:16:50</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41191175"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
