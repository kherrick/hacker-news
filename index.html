<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="35472430">
          <h3>
            <a
              class="item"
              href="https://astralcodexten.substack.com/p/book-review-the-arctic-hysterias"
              >Book Review: The Arctic Hysterias</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 18:31:31</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35472430"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35471826">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/tech-policy/2023/04/tesla-workers-shared-images-from-car-cameras-including-scenes-of-intimacy/"
              >Tesla workers shared images from car cameras, including “scenes
              of intimacy”</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 17:46:54</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35471826"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35471471">
          <h3>
            <a class="item" href="https://koodup.com/journey/storyseed/"
              >Show HN: StorySeed – AI Facilitated, immersive, creative learning
              experience</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 17:19:12</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35471471"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <p>
                Are you looking for a fun and engaging way to spark your
                creativity or your teen's creativity? Or maybe you're interested
                in exploring the world of storytelling?
              </p>
              <p>
                Introducing Story Seed - an AI-facilitated learning experience
                that will take you on an immersive and interactive journey
                through the art of storytelling with movies, books and tv shows
                <i>you</i> love. With bite-sized lessons, fun guessing games,
                and AI facilitation, you'll be inspired to tap into your
                imagination and bring your stories to life like never before.
              </p>
              <p>
                This learning experience is perfect for pre-teens and teens who
                are interested in writing, as well as anyone who wants to
                improve their storytelling skills. It's a great way to spend
                quality time with your kids, or to explore your own creativity.
              </p>
              <p>
                It is integrated with our new tool for creative writing, Papyr.
                We are excited about launching them together. When you complete
                StorySeed, the learning experience, you are given 3 prompts to
                choose from and you begin writing, in Papyr.
              </p>
              <p>
                Today we are releasing our pilot, Chapter 1: Story DNA. We will
                be releasing the rest of the chapters during the coming months
                and adding new content hopefully, forever.
              </p>
              <p>It's free but signup is required to track credits.</p>
              <p>Please check them both out and let us know what you think.</p>
              <p>
                Papyr:
                <a href="https://koodpad.com/papyr"
                  >https://koodpad.com/papyr</a
                >
                StorySeed:
                <a href="https://seed.kood.app">https://seed.kood.app</a>
              </p>
            </div>
          </section>
        </section>
        <section id="35471420">
          <h3>
            <a class="item" href="https://gource.io/"
              >Gource – Animate your Git history</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 17:15:10</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35471420"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35471227">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35471227"
              >Retool (YC W17) is hiring hackers to combine visual programming
              with AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 17:01:35</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re Retool (<a href="https://retool.com">https://retool.com</a
                >), a visual programming environment for building internal
                tools. Here’s a 3 minute demo video:
                <a
                  href="https://d3399nw8s4ngfo.cloudfront.net/videos/intro-to-retool.mp4"
                  >https://d3399nw8s4ngfo.cloudfront.net/videos/intro-to-retool...</a
                >.
              </p>
              <p>
                You can think of Retool as something like Visual Basic, but in
                the cloud. The idea is that there are lots of internal
                applications that businesses need, and today, build from scratch
                (probably via React). But while React is great for many things
                (our landing page is built in React, our product is built in
                React, etc.), it’s possible that it might be overkill for
                building a simple form that POSTs data back to your API. (Who
                _wants_ to worry about debouncing the submit button, handling
                errors from the backend, and authenticating and authorizing the
                users?)
              </p>
              <p>
                We launched on HN around five years ago (<a
                  href="https://news.ycombinator.com/item?id=17725966"
                  >https://news.ycombinator.com/item?id=17725966</a
                >). Since then, we’ve launched three new products – a native
                mobile product (<a href="https://retool.com/products/mobile"
                  >https://retool.com/products/mobile</a
                >), an automation product for developers (<a
                  href="https://retool.com/products/workflows/"
                  >https://retool.com/products/workflows/</a
                >), and a database product (<a
                  href="https://retool.com/products/database/"
                  >https://retool.com/products/database/</a
                >). We’ve hired and grown the team to over 350, and are proud to
                have businesses like Doordash, NBC Universal, Mercedes Benz, and
                the NFL using Retool.
              </p>
              <p>
                The network at Retool is also fairly strong — our lead investors
                in the Series B were Sequoia, along with Elad Gil, Nat Friedman,
                as well as John and Patrick Collison. Other investors include
                the founders of Github, Gusto, Segment, PagerDuty, Plaid, etc.
              </p>
              <p>
                This year, while other companies are downsizing, we’re doubling
                down. (Literally.) We’re attempting to double our engineering,
                product, and design orgs this year. We think the opportunity to
                invent the future of programming is enormous, and we’re looking
                for more hackers to join our team.
              </p>
              <p>
                We think that AI is going to change the way people build
                software. We think that there is tremendous potential in
                building interfaces that help humans and AI collaborate together
                to build software. We want to build a world where humans can
                quickly assemble full applications by just providing high level
                directions to AI.
              </p>
              <p>
                We believe we’re set up especially well to do just that – we
                have all the building blocks for creating software (frontends,
                backend compute, data storage) as well as a live interactive
                builder environment. Why entangle yourself with messy things
                like Webpack, Docker, and Kubernetes when you can directly
                manipulate a live app, running right in front of you?
              </p>
              <p>
                We also think that the world, as a whole, is under-utilizing AI.
                Businesses are broadly interested in generative AI and LLMs, but
                don’t know how yet to leverage and use them. It should be simple
                for businesses to quickly set up flows to have AI automatically
                triage bug reports, summarize customer feedback, and enrich
                datasets.
              </p>
              <p>
                We’ve shared a sneak peak of what we think some of this could
                look like (<a href="https://retool.com/blog/gpt4-in-retool/"
                  >https://retool.com/blog/gpt4-in-retool/</a
                >), and there’s a bunch more coming up that we’re really excited
                to talk about soon.
              </p>
              <p>
                If you’re interested in working with AIs and LLMs to change the
                way companies build software, we’d love to hear from you. We've
                made multiple hires from HN in the past, so we’re posting here.
                But if you know any friends who are interested, feel free to
                tell them to reach out as well.
              </p>
              <p>
                Please email us at snir AT retool with “HN” in the subject line.
              </p>
              <p>Thanks!</p>
            </div>
          </section>
        </section>
        <section id="35471211">
          <h3>
            <a
              class="item"
              href="https://www.bbc.co.uk/news/technology-65202597"
              >ChatGPT: Mayor starts legal bid over false bribery claim</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 17:00:41</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35471211"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35471129">
          <h3>
            <a class="item" href="https://brainpls.work/"
              >Show HN: ADHD-friendly pomodoro web app</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 16:55:11</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35471129"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35470915">
          <h3>
            <a class="item" href="https://github.com/TabbyML/tabby"
              >Show HN: Tabby – A Self-Hosted GitHub Copilot</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 16:40:17</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35470915"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
            <div class="text">
              <p>
                Tabby is in its early stages, and we are excited to receive
                feedback from the community.
              </p>
              <p>
                Its Github repository is located here:
                <a href="https://github.com/TabbyML/tabby"
                  >https://github.com/TabbyML/tabby</a
                >.
              </p>
              <p>
                We have also deployed the latest docker image to Huggingface for
                a live demo:
                <a href="https://huggingface.co/spaces/TabbyML/tabby"
                  >https://huggingface.co/spaces/TabbyML/tabby</a
                >.
              </p>
              <p>
                Tabby is built on top of the popular Hugging Face Transformers /
                Triton FasterTransformer backend and is designed to be
                self-hosted, providing you with complete control over your data
                and privacy. In Tabby's next feature iteration, you can
                fine-tune the model to meet your project requirements.
              </p>
            </div>
          </section>
        </section>
        <section id="35470905">
          <h3>
            <a class="item" href="https://dspace.mit.edu/handle/1721.1/79551"
              >System design and the cost of architectural complexity</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 16:39:40</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35470905"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35470392">
          <h3>
            <a
              class="item"
              href="https://www.phoronix.com/news/Apple-M2-Device-Tree-Linux-6.4"
              >Linux 6.4 Bringing Apple M2 Additions for 2022 MacBook and Mac
              Mini</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 16:07:20</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35470392"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35470371">
          <h3>
            <a
              class="item"
              href="https://engineering.fb.com/2023/04/06/open-source/buck2-open-source-large-scale-build-system/"
              >Build faster with Buck2: Our open source build system</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 16:05:51</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35470371"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35469632">
          <h3>
            <a
              class="item"
              href="https://www.svix.com/blog/heap-fragmentation-in-rust-applications/"
              >Spotting and Avoiding Heap Fragmentation in Rust Applications</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 15:25:18</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35469632"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35469276">
          <h3>
            <a class="item" href="https://wasmer.io/posts/announcing-wcgi"
              >Announcing WCGI: WebAsseAmbly and CGI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 15:03:41</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35469276"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35468981">
          <h3>
            <a class="item" href="https://symops.com/"
              >Show HN: Sym, define just-in-time access workflows in code</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 14:45:20</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35468981"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                My cofounder (jon918) and I started Sym three years ago because
                we were frustrated with how hard it was to manage access to
                cloud infrastructure. We wanted to build a tool for JIT access
                that was <i>actually</i> designed for developers. We were wary
                of tools that tried to accommodate both devs and IT but ended up
                with usability compromises for both.
              </p>
              <p>
                First, we figured no one wants another web app to log into so we
                let administrators define access workflows in Terraform and let
                developers request and gain access via Slack. That seemed to pay
                off: being code-based was a big plus for our early customers
                since it let them manage the logic in version control and test
                in CI/CD.
              </p>
              <p>
                Second, we knew that updating permissions/roles/access was a
                major source of toil and risk in the world of cloud
                infrastructure. Have you ever tried to avoid annoying,
                persistent access requests by setting policies that are a bit
                more permissive than you’d like? We felt that fully automated
                just-in-time access + approvals could really help here. But we
                also knew that a simple approval tool could end up leading to
                request fatigue - kind of defeating the purpose. So we built an
                SDK to let you define checks in code (e.g. pagerduty.on_call,
                okta.is_user_in_group, github.get_repo_collaborators) in order
                to dynamically route requests or fast-track access when
                appropriate. This seems to be paying off: users are creating
                Slack-based approvals in front of different types of risky
                actions like production access, sensitive queries and triggering
                Lambdas.
              </p>
              <p>
                We’d love your feedback on our approach so far. Does this make
                sense to you? Is this a tool you'd use? What would you want to
                see out of it?
              </p>
              <p>
                To learn more, check out the video that Nick (nmeans (Sym
                VPEng)) made [1]. You can also check out our docs [2] or set up
                your own flow [3].
              </p>
              <p>thanks!</p>
              <p>-adam</p>
              <p>
                [1]
                <a href="https://vimeo.com/815222490/c717c18c42"
                  >https://vimeo.com/815222490/c717c18c42</a
                >
              </p>
              <p>
                [2]
                <a href="https://docs.symops.com">https://docs.symops.com</a>
              </p>
              <p>
                [3]
                <a href="https://symops.com/signup"
                  >https://symops.com/signup</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="35468753">
          <h3>
            <a
              class="item"
              href="https://www.sbstatesman.com/2023/04/04/if-we-lose-the-internet-archive-were-screwed/"
              >If we lose the Internet Archive, we’re screwed</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 14:30:10</span
              ><span class="points-container"
                >Points: <span class="points">890</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35468753"
                  >Comments</a
                ><span class="descendants">: 342</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35468304">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/information-technology/2023/04/meta-introduces-ai-model-that-can-isolate-and-mask-objects-within-images/"
              >Meta Releases New AI-Based Photo Segmentation Tool to
              Everybody</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 13:51:44</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35468304"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35468103">
          <h3>
            <a
              class="item"
              href="https://www.jdsupra.com/legalnews/court-ruling-could-affect-the-future-6662722/"
              >Court Ruling Could Affect the Future Direction of DAOs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 13:33:45</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35468103"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35467981">
          <h3>
            <a
              class="item"
              href="https://www.haiku-os.org/blog/apl/2023-04-02_hds_modernisation/"
              >Haiku Depot Server Technology Modernisation</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 13:20:53</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35467981"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35467917">
          <h3>
            <a class="item" href="https://hn-ideas.tjcx.me/"
              >Show HN: Generate startup ideas based on HN comments</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 13:15:18</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35467917"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35467367">
          <h3>
            <a
              class="item"
              href="https://www.deusinmachina.net/p/c-strings-and-my-slow-descent-to"
              >C Strings and my slow descent to madness</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 12:22:10</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35467367"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35466718">
          <h3>
            <a
              class="item"
              href="https://octopus.com/blog/devops-uses-capability-not-maturity"
              >DevOps uses a capability model, not a maturity model</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 11:03:20</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35466718"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35466675">
          <h3>
            <a
              class="item"
              href="https://xebia.com/blog/what-happens-when-you-leak-aws-credentials-and-how-aws-minimizes-the-damage/"
              >What happens when you leak AWS credentials and how AWS minimizes
              the damage</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 10:55:58</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35466675"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35466201">
          <h3>
            <a
              class="item"
              href="https://confusedbit.dev/posts/how_does_gpt_work/"
              >Simply explained: How does GPT work?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 09:36:08</span
              ><span class="points-container"
                >Points: <span class="points">286</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35466201"
                  >Comments</a
                ><span class="descendants">: 215</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35465729">
          <h3>
            <a
              class="item"
              href="https://developer.chrome.com/blog/webgpu-release/"
              >Chrome ships WebGPU</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 08:22:20</span
              ><span class="points-container"
                >Points: <span class="points">652</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35465729"
                  >Comments</a
                ><span class="descendants">: 318</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35464816">
          <h3>
            <a
              class="item"
              href="https://www.lrb.co.uk/the-paper/v45/n08/anthony-grafton/a-degenerate-assemblage"
              >A Degenerate Assemblage: Review of “Book Madness”</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-06 @ 06:16:59</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35464816"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35462091">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Purkinje_effect"
              >Purkinje Effect</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-05 @ 23:44:41</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35462091"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35455943">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/essay/the-city-that-fell-off-a-cliff"
              >The City That Fell Off a Cliff</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-05 @ 15:37:06</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35455943"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35455770">
          <h3>
            <a class="item" href="https://alex.miller.garden/grid-world/"
              >Grid World</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-05 @ 15:24:53</span
              ><span class="points-container"
                >Points: <span class="points">575</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35455770"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35437473">
          <h3>
            <a
              class="item"
              href="https://hothardware.com/news/ddr5-mrdimms-standardized-up-to-17600"
              >AMD and Jedec Are Collaborating on DDR5 MRDIMMs at 17,600 MT/S</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-04 @ 10:29:10</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35437473"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35437062">
          <h3>
            <a
              class="item"
              href="https://luxagraf.net/essay/everything-is-a-practice"
              >Everything Is a Practice</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-04 @ 09:20:13</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35437062"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
