<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44324897">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2020/04/01/magazine/cannabis-science.html"
              >Cannabis scientists are trying to find a predictable, reliable
              product (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-20 @ 05:06:57</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44324897"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44324592">
          <h3>
            <a class="item" href="https://github.com/Orange-OpenSource/hurl"
              >Hurl: Run and test HTTP requests with plain text</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-20 @ 03:55:03</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44324592"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44324457">
          <h3>
            <a class="item" href="https://github.com/edverma/git-smart-squash"
              >Show HN: Tool to Automatically Create Organized Commits for
              PRs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-20 @ 03:22:59</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44324457"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
            <div class="text">
              <p>
                The tool sends the diff of your git branch against a base branch
                to an LLM provider. The LLM provider responds with a set of
                suggested commits with sensible commit messages, change
                groupings, and descriptions. When you explicitly accept the
                proposed changes, the tool re-writes the commit history on your
                branch to match the LLM's suggestion. Then you can force push
                your branch to your remote to make it match.
              </p>
              <p>
                The default AI provider is your locally running Ollama server.
                Cloud providers can be explicitly configured via CLI argument or
                in a config file, but keeping local models as the default helps
                to protect against unintentional data sharing. The tool always
                creates a backup branch in case you need to easily revert in
                case of changing your mind or an error in commit re-writing.
                Note that re-writing commit history to a remote branch requires
                a force push, which is something your team/org will need to be
                ok with. As long as you are working on a feature branch this is
                usually fine, but it's always worth checking if you are not
                sure.
              </p>
            </div>
          </section>
        </section>
        <section id="44324084">
          <h3>
            <a
              class="item"
              href="https://lwn.net/SubscriberLink/1022920/ad60263cd13c8a13/"
              >Asterinas: A new Linux-compatible kernel project</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-20 @ 01:56:16</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44324084"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44323914">
          <h3>
            <a
              class="item"
              href="https://public.resource.org/ntis.gov/index.html"
              >FedFlix — Public Domain Stock Footage Library</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-20 @ 01:07:43</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44323914"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44323904">
          <h3>
            <a
              class="item"
              href="https://matklad.github.io/2025/05/20/open-source-cant-coordinate.html"
              >Open source can't coordinate</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-20 @ 01:06:12</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44323904"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44323719">
          <h3>
            <a
              class="item"
              href="https://blog.persistent.info/2025/03/infinite-mac-os-x.html"
              >Infinite Mac OS X</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-20 @ 00:16:57</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44323719"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44323411">
          <h3>
            <a
              class="item"
              href="https://mastodon.gamedev.place/@pikuma/114711138512697712"
              >Sunsonic 986-II – A Thai Famicom clone with keyboard and mini CRT
              built-in</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 23:21:40</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44323411"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44323389">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/giant-all-seeing-telescope-set-revolutionize-astronomy"
              >Giant, All-Seeing Telescope Is Set to Revolutionize Astronomy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 23:17:39</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44323389"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44323253">
          <h3>
            <a class="item" href="https://github.com/Dahrkael/ExTracker"
              >Show HN: I wrote a new BitTorrent tracker in Elixir</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 22:49:49</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44323253"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm currently in a journey to learn and improve my Elixir and Go
                skills (my daily job uses C++) and looking through my backlog
                for projects to take on I decided Elixir is the perfect language
                to write a highly-parallel BitTorrent tracker. So I have spent
                my free time these last 3 months writing one! Now I think it has
                enough features to present it to the world (and a docker image
                to give it a quick try).
              </p>
              <p>
                I know some people see trackers as relics of the past now that
                DHT and PEX are common but I think they still serve a purpose in
                today's Internet (purely talking about public trackers). That
                said there is not a lot going on in terms of new developments
                since everyone just throws opentracker in a vps a calls it a day
                (honorable exceptions: aquatic and torrust).
              </p>
              <p>
                I plan to continue development for the foreseeable future and
                add some (optional) esoteric features along the way so if anyone
                currently operates a tracker please give a try and enjoy the
                lack of crashes.
              </p>
              <p>
                note: only swarm_printout.ex has been vibe coded, the rest has
                all been written by hand.
              </p>
            </div>
          </section>
        </section>
        <section id="44323045">
          <h3>
            <a class="item" href="https://github.com/zyedidia/Literate"
              >Literate programming tool for any language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 22:18:45</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44323045"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44321672">
          <h3>
            <a
              class="item"
              href="https://zhihaojia.medium.com/compiling-llms-into-a-megakernel-a-path-to-low-latency-inference-cf7840913c17"
              >Compiling LLMs into a MegaKernel: A path to low-latency
              inference</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 19:20:54</span
              ><span class="points-container"
                >Points: <span class="points">207</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44321672"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44320772">
          <h3>
            <a class="item" href="https://github.com/featureform/enrichmcp"
              >Show HN: EnrichMCP – A Python ORM for Agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 17:32:21</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44320772"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
            <div class="text">
              <p>
                EnrichMCP is built on top of [MCP][2] and acts like an ORM, but
                for agents instead of humans. You define your data model using
                SQLAlchemy, APIs, or custom logic, and EnrichMCP turns it into a
                type-safe, introspectable interface that agents can discover,
                traverse, and invoke.
              </p>
              <p>
                It auto-generates tools from your models, validates all I/O with
                Pydantic, handles relationships, and supports schema discovery.
                Agents can go from user → orders → product naturally, just like
                a developer navigating an ORM.
              </p>
              <p>
                We use this internally to let agents query production systems,
                call APIs, apply business logic, and even integrate ML models.
                It works out of the box with SQLAlchemy and is easy to extend to
                any data source.
              </p>
              <p>
                If you're building agentic systems or anything AI-native, I'd
                love your feedback. Code and docs are here:
                <a href="https://github.com/featureform/enrichmcp"
                  >https://github.com/featureform/enrichmcp</a
                >. Happy to answer any questions.
              </p>
              <p>
                [1]:
                <a href="https://github.com/featureform/enrichmcp"
                  >https://github.com/featureform/enrichmcp</a
                >
              </p>
              <p>
                [2]:
                <a href="https://modelcontextprotocol.io/introduction"
                  >https://modelcontextprotocol.io/introduction</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44320747">
          <h3>
            <a
              class="item"
              href="https://krzysckh.org/b/Homegrown-closures-for-uxn.html"
              >Homegrown Closures for Uxn</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 17:29:35</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44320747"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44320460">
          <h3>
            <a
              class="item"
              href="https://flowspace.applytojob.com/apply/6oDtY2q6E9/Software-Engineer-II"
              >Flowspace (YC S17) Is Hiring Software Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 17:00:39</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44320001">
          <h3>
            <a
              class="item"
              href="https://thescoop.org/archives/2025/06/09/how-openelections-uses-llms/index.html"
              >How OpenElections uses LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 16:11:46</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44320001"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44318874">
          <h3>
            <a class="item" href="https://erikdemaine.org/curved/"
              >Curved-Crease Sculpture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 14:13:15</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44318874"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
            <div class="text">https://erikdemaine.org/curved/history/</div>
          </section>
        </section>
        <section id="44318588">
          <h3>
            <a class="item" href="https://github.com/krustowski/rou2exOS"
              >Show HN: A DOS-like hobby OS written in Rust and x86 assembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 13:38:57</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44318588"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
            <div class="text">
              <p>
                <a href="https://blog.vxn.dev/rou2exos-rusted-edition"
                  >https://blog.vxn.dev/rou2exos-rusted-edition</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44317825">
          <h3>
            <a
              class="item"
              href="https://matduggan.com/what-would-a-kubernetes-2-0-look-like/"
              >What would a Kubernetes 2.0 look like</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 12:00:54</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44317825"
                  >Comments</a
                ><span class="descendants">: 289</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44317180">
          <h3>
            <a class="item" href="https://scottaaronson.blog/?p=8908"
              >Guess I'm a Rationalist Now</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 10:22:06</span
              ><span class="points-container"
                >Points: <span class="points">259</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44317180"
                  >Comments</a
                ><span class="descendants">: 766</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44317012">
          <h3>
            <a
              class="item"
              href="https://github.com/Maciek-roboblog/Claude-Code-Usage-Monitor"
              >Show HN: Claude Code Usage Monitor – real-time tracker to dodge
              usage cut-offs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 09:46:43</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44317012"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
            <div class="text">
              <p>Streams your prompt + completion usage in real time</p>
              <p>Predicts whether you’ll hit the cap before the session ends</p>
              <p>Runs 100 % locally (no auth, no server)</p>
              <p>
                Presets for Pro, Max × 5, Max × 20 — tweak a JSON if your plan’s
                different
              </p>
              <p>
                GitHub:
                <a
                  href="https://github.com/Maciek-roboblog/Claude-Code-Usage-Monitor"
                  >https://github.com/Maciek-roboblog/Claude-Code-Usage-Monitor</a
                >
              </p>
              <p>
                It’s already spared me a few “why did my run just stop?”
                moments, but it’s still rough around the edges. Feedback, bug
                reports, and PRs welcome!
              </p>
            </div>
          </section>
        </section>
        <section id="44314423">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=LCEmiRjPEtQ"
              >Andrej Karpathy: Software in the era of AI [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-19 @ 00:33:21</span
              ><span class="points-container"
                >Points: <span class="points">1204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44314423"
                  >Comments</a
                ><span class="descendants">: 647</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44311968">
          <h3>
            <a
              class="item"
              href="https://www.category.xyz/blogs/raptorcast-designing-a-messaging-layer"
              >RaptorCast: Designing a Messaging Layer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-18 @ 17:57:44</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44311968"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44300854">
          <h3>
            <a class="item" href="https://rm2000.app"
              >Show HN: RM2000 Tape Recorder, an audio sampler for macOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-17 @ 16:20:59</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44300854"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm a huge datahoarder and have always appreciated tools /
                services like PureRef and Are.na which help me make sense of
                everything I collect. Those services concern themselves with
                images and video - I wondered, why can't the same be done with
                music and audiofiles?
              </p>
              <p>
                I actually got the inspiration for the filenaming scheme from
                the Emacs Denote package - every sample is saved in the format
                of title--tag1--tag2.mp3. Emacs Denote does something similar,
                for example an identifier--title--keywords.org .
              </p>
              <p>
                I chose this method as any file browser with fuzzy search can
                search through samples, i.e. - the Ableton file browser. Just
                search up some of the tags, and a title, and you'll be able to
                find your sample.
              </p>
              <p>
                I wanted this app to look good, as well (and is why I spent so
                much time making it!) The app is made with a mix of SwiftUI and
                AppKit, while the assets were rendered in Sketch
              </p>
              <p>
                I appreciate your time and I'd love to hear your thoughts on it.
                If you do download it, and find suggestions / bugs, please let
                me know!
              </p>
              <p>Cheers</p>
            </div>
          </section>
        </section>
        <section id="44298360">
          <h3>
            <a
              class="item"
              href="https://flak.tedunangst.com/post/pipelined-state-machine-corruption"
              >Pipelined State Machine Corruption</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-17 @ 12:33:44</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44298360"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44297761">
          <h3>
            <a class="item" href="https://lucumr.pocoo.org/2025/6/17/measuring/"
              >We Can Just Measure Things</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-17 @ 11:15:25</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44297761"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44295725">
          <h3>
            <a class="item" href="https://udara.io/science/virtual-cells/"
              >Virtual Cells</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-17 @ 04:18:38</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44295725"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44291642">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2505.12546"
              >Extracting memorized pieces of books from open-weight language
              models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-16 @ 17:41:27</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44291642"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44288595">
          <h3>
            <a class="item" href="https://www.atlasobscura.com/places/octobass"
              >Octobass</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-16 @ 11:33:45</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44288595"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44287926">
          <h3>
            <a
              class="item"
              href="https://www.sciencedaily.com/releases/2025/06/250603114822.htm"
              >DNA floating in the air tracks wildlife, viruses, even drugs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-16 @ 09:38:00</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44287926"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
