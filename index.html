<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46935104">
          <h3>
            <a class="item" href="https://freethemath.org"
              >Five disciplines discovered the same math independently – none of
              them knew</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 15:29:22</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46935104"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46935011">
          <h3>
            <a
              class="item"
              href="https://www.aaronmate.net/p/noam-chomskys-wife-responds-to-epstein"
              >Noam Chomsky's wife responds to Epstein controversy</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 15:21:21</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46935011"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934499">
          <h3>
            <a class="item" href="https://datatracker.ietf.org/doc/html/rfc3092"
              >RFC 3092 – Etymology of "Foo" (2001)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:32:28</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934499"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934404">
          <h3>
            <a
              class="item"
              href="https://siddhantkhare.com/writing/ai-fatigue-is-real"
              >AI fatigue Is real and nobody talks about it</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:19:32</span
              ><span class="points-container"
                >Points: <span class="points">303</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934404"
                  >Comments</a
                ><span class="descendants">: 235</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934344">
          <h3>
            <a
              class="item"
              href="https://www.abhinavomprakash.com/posts/i-am-happier-writing-code-by-hand/"
              >I am happier writing code by hand</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:12:18</span
              ><span class="points-container"
                >Points: <span class="points">252</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934344"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934266">
          <h3>
            <a
              class="item"
              href="https://blog.hofstede.it/running-your-own-as-bgp-on-freebsd-with-frr-gre-tunnels-and-policy-routing/"
              >Running Your Own As: BGP on FreeBSD with FRR, GRE Tunnels, and
              Policy Routing</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:02:58</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934266"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934107">
          <h3>
            <a class="item" href="https://github.github.io/gh-aw/"
              >GitHub Agentic Workflows</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 13:40:56</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934107"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46933515">
          <h3>
            <a class="item" href="https://cinegraphs.ai/"
              >Show HN: Fine-tuned Qwen2.5-7B on 100 films for probabilistic
              story graphs</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 12:00:02</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46933515"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                The idea is simple: you input a rough concept, and the tool
                generates branching narrative paths visualized as a graph. You
                can sculpt those branches into a structured screenplay format
                and export to Fountain for use in professional screenwriting
                software.
              </p>
              <p>
                Most AI writing tools are trained on generic internet text,
                which is why they output generic results. I wanted something
                that understood actual cinematic storytelling—not plot summaries
                or Wikipedia synopses, but the actual structural DNA of films.
                So I spent a month curating 100 films I consider high-quality
                cinema. Not just popular films, but works with distinctive
                narrative structures: Godard's jump cuts and essay-film
                digressions, Kurosawa's parallel character arcs, Brakhage's
                non-linear visual poetry, Tarkovsky's slow-burn temporal
                structures. The selection was deliberately eclectic because I
                wanted the model to learn that "story" can mean many things.
              </p>
              <p>
                Getting useful training data from films is harder than it
                sounds. I built a 1000+ line Python pipeline using Qwen3-VL to
                analyze each film with subtitles enabled. The pipeline extracts
                scene-level narrative beats, character relationships and how
                they evolve, thematic threads, and dialogue patterns. The tricky
                part was getting Qwen3-VL to understand cinematic structure
                rather than just summarizing plot. I had to iterate on the
                prompts extensively to get it to identify things like "this
                scene functions as a mirror to the opening" or "this character's
                arc inverts the protagonist's." That took weeks and I'm still
                not fully satisfied with it, but it's good enough to produce
                useful training data.
              </p>
              <p>
                From those extractions I generated a 10K example dataset of
                prompt-to-branching-narrative pairs, then fine-tuned
                Qwen2.5-7B-Instruct with a LoRA optimized for probabilistic
                story branching. The LoRA handles the graph generation—exploring
                possible narrative directions—while the full 7B model generates
                the actual technical screenplay format when you export. I chose
                the 7B model because I wanted something that could run
                affordably at scale while still being capable enough for nuanced
                generation. The whole thing is served on a single 4090 GPU using
                vLLM. The frontend uses React Flow for the graph visualization.
                The key insight was that screenwriting is fundamentally about
                making choices—what if the character goes left instead of
                right?—but most writing tools force you into a linear document
                too early. The graph structure lets you explore multiple paths
                before committing, which matches how writers actually think in
                early development.
              </p>
              <p>
                The biggest surprise was how much the film selection mattered.
                Early versions trained on more mainstream films produced much
                more formulaic outputs. Adding experimental and international
                cinema dramatically improved the variety and interestingness of
                the generations. The model seemed to learn that narrative
                structure is a design space, not a formula.
              </p>
              <p>
                We've been using it ourselves to break through second-act
                problems—when you know where you want to end up but can't figure
                out how to get there. The branching format forces you to think
                in possibilities rather than committing too early.
              </p>
              <p>
                You can try it at
                <a href="https://cinegraphs.ai/">https://cinegraphs.ai/</a> — no
                signup required to test it out. You get a full project with up
                to 50 branches without registering, though you'll need to create
                an account to save it. Registered users get 3 free projects. I'd
                love feedback on whether the generation quality feels
                meaningfully different from generic AI tools, and whether the
                graph interface adds value or just friction.
              </p>
            </div>
          </section>
        </section>
        <section id="46933401">
          <h3>
            <a
              class="item"
              href="https://lists.nanog.org/archives/list/nanog@lists.nanog.org/thread/TSNPJVFH4DKLINIKSMRIIVNHDG5XKJCM/"
              >Dave Farber has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 11:38:57</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46933401"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46933365">
          <h3>
            <a
              class="item"
              href="https://eclecticlight.co/2026/02/08/last-week-on-my-mac-why-e-cores-make-apple-silicon-fast/"
              >Why E cores make Apple silicon fast</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 11:31:49</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46933365"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46933067">
          <h3>
            <a class="item" href="https://ezhik.jp/ai-slop-terrifies-me/"
              >Slop Terrifies Me</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 10:31:35</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46933067"
                  >Comments</a
                ><span class="descendants">: 172</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932985">
          <h3>
            <a
              class="item"
              href="https://hyperallergic.com/curating-a-show-on-my-ineffable-mother-ursula-k-le-guin/"
              >Curating a Show on My Ineffable Mother, Ursula K. Le Guin</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 10:13:00</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932985"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932678">
          <h3>
            <a class="item" href="https://github.com/joshuanwalker/Raiders2600"
              >Reverse Engineering Raiders of the Lost Ark for the Atari 2600</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 09:10:18</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932678"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932343">
          <h3>
            <a class="item" href="https://github.com/jingkaihe/matchlock"
              >Matchlock – Secures AI agent workloads with a Linux-based
              sandbox</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 08:07:55</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932343"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932192">
          <h3>
            <a class="item" href="https://donotnotify.com/opensource.html"
              >DoNotNotify is now Open Source</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 07:39:49</span
              ><span class="points-container"
                >Points: <span class="points">306</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932192"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
            <div class="text">
              <p>
                Why didn't I open source it in the first place? Linux has been
                by primary driver for more than a decade. I genuinely believe in
                the philosophy, and have always wanted to give back to the
                community. The primary reason, probably, was because I was
                ashamed that I had 90% vibe-coded the app. More than 2 decades
                of writing software, and my first contribution to FOSS would be
                AI-generated code? Would it withstand even the most minimal of
                scrutiny? Would by (unknown) name forever be tarnished? I
                exaggerate, but only slightly :)
              </p>
              <p>
                So, yesterday, after a fair bit of trepidation, I changed the
                github repo visibility to public and put up a announcement on
                the app's website [1]. I have also submitted the app to F-Droid
                [2]. As before, I welcome the community's feedback and
                suggestions!
              </p>
              <p>
                [0]
                <a href="https://news.ycombinator.com/item?id=46499646"
                  >https://news.ycombinator.com/item?id=46499646</a
                >
                [1]
                <a href="https://donotnotify.com/opensource.html"
                  >https://donotnotify.com/opensource.html</a
                >
                [2]
                <a href="https://gitlab.com/fdroid/rfp/-/issues/3569"
                  >https://gitlab.com/fdroid/rfp/-/issues/3569</a
                >
              </p>
              <p>-- Anuj Jain</p>
            </div>
          </section>
        </section>
        <section id="46931805">
          <h3>
            <a
              class="item"
              href="https://reorx.com/blog/openclaw-is-changing-my-life/"
              >OpenClaw Is Changing My Life</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 06:21:27</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46931805"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46931559">
          <h3>
            <a
              class="item"
              href="https://www.rogerebert.com/reviews/great-movie-the-shawshank-redemption-1994"
              >Roger Ebert Reviews "The Shawshank Redemption" (1999)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 05:25:33</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46931559"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46930565">
          <h3>
            <a
              class="item"
              href="https://haskellforall.com/2026/02/beyond-agentic-coding"
              >Beyond agentic coding</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 01:55:09</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46930565"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46930391">
          <h3>
            <a class="item" href="https://github.com/localgpt-app/localgpt"
              >Show HN: LocalGPT – A local-first AI assistant in Rust with
              persistent memory</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 01:26:38</span
              ><span class="points-container"
                >Points: <span class="points">288</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46930391"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
            <div class="text">
              <p>
                It compiles to a single ~27MB binary — no Node.js, Docker, or
                Python required.
              </p>
              <p>Key features:</p>
              <p>
                - Persistent memory via markdown files (MEMORY, HEARTBEAT, SOUL
                markdown files) — compatible with OpenClaw's format - Full-text
                search (SQLite FTS5) + semantic search (local embeddings, no API
                key needed) - Autonomous heartbeat runner that checks tasks on a
                configurable interval - CLI + web interface + desktop GUI -
                Multi-provider: Anthropic, OpenAI, Ollama etc - Apache 2.0
              </p>
              <p>Install: `cargo install localgpt`</p>
              <p>
                I use it daily as a knowledge accumulator, research assistant,
                and autonomous task runner for my side projects. The memory
                compounds — every session makes the next one better.
              </p>
              <p>
                GitHub:
                <a href="https://github.com/localgpt-app/localgpt"
                  >https://github.com/localgpt-app/localgpt</a
                >
                Website: <a href="https://localgpt.app">https://localgpt.app</a>
              </p>
              <p>Would love feedback on the architecture or feature ideas.</p>
            </div>
          </section>
        </section>
        <section id="46926245">
          <h3>
            <a
              class="item"
              href="https://nolanlawson.com/2026/02/07/we-mourn-our-craft/"
              >We mourn our craft</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 18:32:27</span
              ><span class="points-container"
                >Points: <span class="points">516</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46926245"
                  >Comments</a
                ><span class="descendants">: 658</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46925808">
          <h3>
            <a
              class="item"
              href="https://jonathanwhiting.com/writing/blog/games_in_c/"
              >I write games in C (yes, C) (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 17:45:25</span
              ><span class="points-container"
                >Points: <span class="points">229</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46925808"
                  >Comments</a
                ><span class="descendants">: 246</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46925741">
          <h3>
            <a class="item" href="https://xorvoid.com/sectorc.html"
              >SectorC: A C Compiler in 512 bytes (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 17:39:53</span
              ><span class="points-container"
                >Points: <span class="points">345</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46925741"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46925672">
          <h3>
            <a
              class="item"
              href="https://www.historytoday.com/archive/history-matters/contagious-taste-cancer"
              >The Contagious Taste of Cancer</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-07 @ 17:31:44</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46925672"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46889741">
          <h3>
            <a
              class="item"
              href="https://ejpe.org/journal/article/view/1075/753"
              >The Legacy of Daniel Kahneman: A Personal View (2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 18:36:37</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46889741"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46888258">
          <h3>
            <a class="item" href="https://derekyan.com/ma-book/"
              >Show HN: It took 4 years to sell my startup. I wrote a book about
              it</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 16:56:11</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46888258"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46886569">
          <h3>
            <a class="item" href="https://rabbitear.org/book/origami.html"
              >Rabbit Ear "Origami": programmable origami in the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 14:57:38</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46886569"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46869113">
          <h3>
            <a class="item" href="https://sozialhelden.github.io/a11yjson/"
              >A11yJSON: A standard to describe the accessibility of the
              physical world</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 10:21:37</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46869113"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46868928">
          <h3>
            <a class="item" href="https://federicopereiro.com/llm-high/"
              >LLMs as the new high level language</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-03 @ 10:00:03</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46868928"
                  >Comments</a
                ><span class="descendants">: 324</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46861158">
          <h3>
            <a class="item" href="https://aosabook.org/en/v1/bdb.html"
              >The Architecture of Open Source Applications (Volume 1) Berkeley
              DB</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 20:37:41</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46861158"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46859433">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Kolakoski_sequence"
              >Kolakoski Sequence</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-02 @ 18:31:17</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46859433"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
