<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39149789">
          <h3>
            <a
              class="item"
              href="https://theconversation.com/dangerous-chemicals-found-in-recycled-plastics-making-them-unsafe-for-use-experts-explain-the-hazards-220498"
              >Dangerous chemicals found in recycled plastics, making them
              unsafe for use</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 22:41:21</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39149789"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39149036">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/opinion/articles/2024-01-26/netflix-offers-subscribers-a-whole-cable-bundle"
              >Netflix Hammers the Last Nail into Linear TV's Coffin</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 21:50:50</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39149036"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39148883">
          <h3>
            <a
              class="item"
              href="https://jobs.ashbyhq.com/moderntreasury/279437f2-0671-403c-b9f5-716ed9a54845"
              >Modern Treasury (YC S18) Is Hiring a Design Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 21:41:41</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39148577">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39148577"
              >Ask HN: Working with ineffective volunteers at non profit as a
              solo entrepreneur</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 21:20:23</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39148577"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm a volunteer for a non profit that works with mental health
                as part of a ragtag bunch of men who have been affected by
                mental health. I'm also a solo entrepreneur with a very 'get
                shit done' mentality in my own world. The latter doesn't always
                mesh well with the former, and it's causing me some frustation
                with how long things take to get done.
              </p>
              <p>
                I report to a board of directors who aren't business owners, and
                they regard our organisation almost as a good cause whereas in
                reality it's a small business. There are donors (investors),
                customers (attendees) and staff (volunteers).
              </p>
              <p>
                Without going into too many details, I've had to step back from
                some internal tasks since I was compensating for a director's
                lack of action / insight. I've done this for my own wellbeing,
                but I know ultimately sometimes things need to break before they
                come to light, and <i>then</i> they can be fixed.
              </p>
              <p>
                I have no desire to cover for the ineffective director, and I'd
                like to avoid a personality conflict with them. I can split the
                person from the tasks (or lack of action / insight on the
                tasks), so I don't see any vendetta on the horizon, but I'm
                struggling with lack of practical experience here since I've
                been solo since 2006.
              </p>
              <p>
                How do you deal with superiors at your organisation that appear
                to be without direction, strategy, awareness and action?
              </p>
              <p>Thank you.</p>
            </div>
          </section>
        </section>
        <section id="39148544">
          <h3>
            <a
              class="item"
              href="https://www.techradar.com/pro/google-is-rapidly-turning-into-a-formidable-opponent-to-bff-nvidia-the-tpu-v5p-ai-chip-powering-its-hypercomputer-is-faster-and-has-more-memory-and-bandwidth-than-ever-before-beating-even-the-mighty-h100"
              >Google TPU v5p beats Nvidia H100</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 21:18:43</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39148544"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39148336">
          <h3>
            <a class="item" href="https://www.platoedu.org"
              >Show HN: Anki/Duolingo like app using Educational YouTube
              videos</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 21:04:38</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39148336"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <p>
                I watch A LOT of educational YouTube videos but wasn't
                forgetting a good chunk of the details because I was only really
                passively watching. So I made a tool that generates quiz
                questions/flashcards from YouTube videos, and uses spaced
                repetition like Anki or Duolingo to keep it in memory.
              </p>
              <p>
                Let me know if you find it cool/useful (or terrible ) or if you
                want to know a bit about the details!
              </p>
            </div>
          </section>
        </section>
        <section id="39147275">
          <h3>
            <a
              class="item"
              href="https://nymag.com/intelligencer/2024/01/new-ai-powered-google-chrome-browser-end-of-human-internet.html"
              >Google's New AI-Powered Browser Could Mark the End of the Human
              Internet</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 19:51:30</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39147275"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39146385">
          <h3>
            <a
              class="item"
              href="https://www.bleepingcomputer.com/news/microsoft/microsoft-teams-outage-causes-connection-issues-message-delays/"
              >Microsoft Teams outage causes connection issues, message
              delays</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 18:50:44</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39146385"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39145901">
          <h3>
            <a
              class="item"
              href="https://github.com/JoeyMckenzie/openbrewerydb-php-api"
              >Show HN: PHP API Bindings for Open Brewery DB</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 18:18:10</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39145901"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <a href="https://openbrewerydb.org/">https://openbrewerydb.org/</a
              >). Hope someone finds it useful!
            </div>
          </section>
        </section>
        <section id="39145728">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-024-00202-9"
              >The blogger who spotted problems in Dana-Farber cancer papers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 18:06:33</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39145728"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39145701">
          <h3>
            <a
              class="item"
              href="https://yaky.dev/2024-01-25-pinephone-post-daily-driver-review/"
              >PinePhone review after a month of daily driving</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 18:05:04</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39145701"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39144978">
          <h3>
            <a
              class="item"
              href="https://rmi.org/the-rise-of-batteries-in-six-charts-and-not-too-many-numbers/"
              >The Rise of Batteries in Six Charts</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 17:10:28</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39144978"
                  >Comments</a
                ><span class="descendants">: 193</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39144906">
          <h3>
            <a class="item" href="https://skii.dev/rook-to-xss/"
              >How I hacked chess.com with a rookie exploit</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 17:03:40</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39144906"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39144845">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2401.13782"
              >Tweets to Citations: The Impact of Social Media Influencers on AI
              Research</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 16:57:45</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39144845"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39144710">
          <h3>
            <a class="item" href="https://untranslatable.co/">Untranslatable</a>
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 16:47:28</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39144710"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39143958">
          <h3>
            <a class="item" href="https://blog.awais.io/o1-visa/"
              >How I secured an 'Extraordinary Ability' visa as a founder</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 15:45:50</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39143958"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39143768">
          <h3>
            <a
              class="item"
              href="https://blog.danieljanus.pl/2024/01/26/lossy-css-compression/"
              >Lossy CSS compression for fun and loss (or profit)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 15:31:04</span
              ><span class="points-container"
                >Points: <span class="points">172</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39143768"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39143043">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/israel-gaza-genocide-court-south-africa-27cf84e16082cde798395a95e9143c06"
              >ICJ orders Israel to prevent genocide in Gaza, stops short of
              ordering ceasefire</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 14:35:06</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39143043"
                  >Comments</a
                ><span class="descendants">: 661</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39142748">
          <h3>
            <a class="item" href="https://github.com/oasislinux/oasis"
              >Oasis – a small, statically-linked Linux system</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 14:11:36</span
              ><span class="points-container"
                >Points: <span class="points">367</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39142748"
                  >Comments</a
                ><span class="descendants">: 165</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39142560">
          <h3>
            <a class="item" href="https://www.tinysa.org/wiki/"
              >TinySA – small spectrum analyzer and signal generator</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 13:51:13</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39142560"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39142455">
          <h3>
            <a
              class="item"
              href="https://www.suzuki-music.co.jp/special/omnichord_om-108/en/index.html"
              >Details of the new Suzuki Omnichord OM-108</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 13:38:21</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39142455"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39140849">
          <h3>
            <a class="item" href="https://jacobfilipp.com/arvid-vhs/"
              >ArVid: Russians squeezed 4 hard drives into one VHS tape in the
              90s</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 10:10:57</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39140849"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39139208">
          <h3>
            <a
              class="item"
              href="https://www.historytoday.com/archive/head-head/how-french-was-medieval-england"
              >How French Was Medieval England?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 05:24:11</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39139208"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39138042">
          <h3>
            <a
              class="item"
              href="https://willcrichton.net/notes/portable-epubs/#epub-content%2FEPUB%2Findex.xhtml$"
              >Portable EPUBs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-26 @ 01:53:11</span
              ><span class="points-container"
                >Points: <span class="points">530</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39138042"
                  >Comments</a
                ><span class="descendants">: 203</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39136142">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/collection/kumanaki-kage/"
              >Clear Shadows (1867)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-25 @ 22:16:00</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39136142"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39134503">
          <h3>
            <a
              class="item"
              href="https://web.archive.org/web/20070309014113/http://www.amontobin.com/field/"
              >Amon Tobin – Foley Room site (2007)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-25 @ 20:08:54</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39134503"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39129002">
          <h3>
            <a
              class="item"
              href="https://www.hagerty.com/media/automotive-history/at-your-next-bbq-tip-your-chefs-toque-to-henry-ford-who-helped-popularize-charcoal-briquets/"
              >Tip Your Chef's Toque to Henry Ford, Who Helped Popularize
              Charcoal Briquets</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-25 @ 12:48:25</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39129002"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39127304">
          <h3>
            <a class="item" href="https://docs.sweeting.me/s/ih75iZv2o"
              >Idea for a new hand tool: Automatic Wire Twisting Pliers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-25 @ 08:03:39</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39127304"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39126618">
          <h3>
            <a
              class="item"
              href="https://st.fbk.eu/complementary/IOTSECFOR2021.html"
              >DoS Attacks in Available MQTT Implementations</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-25 @ 05:55:24</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39126618"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39120687">
          <h3>
            <a
              class="item"
              href="https://inference-review.com/article/the-man-who-carried-computer-science-on-his-shoulders"
              >Edsger Dijkstra carried computer science on his shoulders
              (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 18:14:17</span
              ><span class="points-container"
                >Points: <span class="points">330</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39120687"
                  >Comments</a
                ><span class="descendants">: 185</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
