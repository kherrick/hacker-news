<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37067491">
          <h3>
            <a
              class="item"
              href="https://www.loicmathieu.fr/wordpress/en/informatique/java-21-quoi-de-neuf/"
              >Java 21: What’s New?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 19:45:48</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37067491"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37067449">
          <h3>
            <a class="item" href="https://livingwage.mit.edu/"
              >Living Wage Calculator</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 19:40:07</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37067449"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37067368">
          <h3>
            <a
              class="item"
              href="https://www.kenyans.co.ke/news/91702-govt-warns-kenyans-about-worldcoin"
              >Govt warns kenyans about Worldcoin</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 19:31:00</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37067368"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37066989">
          <h3>
            <a class="item" href="https://histoire.dev/"
              >Histoire: A new way to write stories, powered by Vite</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 18:56:15</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37066989"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37066680">
          <h3>
            <a
              class="item"
              href="https://github.com/extesy/hoverzoom/discussions/670"
              >Temptations of an open-source Chrome extension developer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 18:28:30</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37066680"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37065567">
          <h3>
            <a class="item" href="https://www.aptible.com/culture-hub/careers"
              >Aptible (YC S14) Is Hiring: Security Compliance Manager and
              Product-Led Sales Lead</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 17:01:11</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37064822">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37064822"
              >Launch HN: Refine (YC S23) – Open-source platform for enterprise
              web apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 16:11:09</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37064822"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/refinedev/refine"
                >https://github.com/refinedev/refine</a
              >), an open-source platform for developing enterprise web
              applications rapidly. In one year since launch we have 15K active
              developers each month, and over 5K projects in production. Among
              the 5,000+ projects deployed to production, we see a lot of admin
              panels, dashboards, B2B portals and SAAS interfaces.
              <p>
                Check out our online generator at (<a
                  href="https://refine.dev/#playground"
                  >https://refine.dev/#playground</a
                >) to create a custom Refine application and download it.
              </p>
              <p>
                Before starting refine, we spent five years as a consultancy
                company building internal-facing applications for enterprise
                clients. We have seen many complex use cases where the demanded
                flexibility was much higher than what existing low-code/no-code
                solutions provide. Moving away from rigid architectures and
                pre-made components that are difficult to customize, developers
                tend to start from the scratch. This results in a significant
                waste of time and resources.
              </p>
              <p>
                In order to find a sweet spot between “starting from scratch”
                and higher level solutions, we started working on refine. After
                a couple of iterations, we came up with a “headless” solution,
                separating the UI-layer completely from the rest of the frontend
                logic. This allowed us to support multiple UI frameworks and
                custom designs out of the box.
              </p>
              <p>
                We understand the importance of frontend developers working with
                the stack and tools they love and are familiar with. So, we have
                built our project creation wizard that allows developers to mix
                and match their technology stack when creating a project.
              </p>
              <p>
                After 1.5 years of development with the great support of the
                open-source community, Refine has become a mature framework that
                allows developers to rapidly build enterprise applications and
                have 100% control over their projects.
              </p>
              <p>
                While remaining unobtrusive, Refine still saves a lot of
                development resources by eliminating repetitive tasks such as
                CRUD operations, state management, routing, authentication,
                access control, and i18n. It’s also backend-agnostic and works
                with any APIs or services.
              </p>
              <p>
                The best way to start Refine development is visiting our
                extensive documentation at (<a href="https://refine.dev/docs/"
                  >https://refine.dev/docs/</a
                >). Here, you can also find tutorials and real-life examples to
                use as a starting point for your use case.
              </p>
              <p>
                We had one successful Show HN earlier this year (<a
                  href="https://news.ycombinator.com/item?id=34515128"
                  >https://news.ycombinator.com/item?id=34515128</a
                >), and have since had several major releases and added many
                more features.
              </p>
              <p>
                Recently, we've released our enterprise edition featuring
                deployments, built-in security, backend integrations and
                auto-generated UI's. By expanding Refine's capabilities beyond
                the frontend, the enterprise edition offers a complete solution
                for the internal tooling requirements of larger organizations.
                To get more information, please see our pricing page:
                <a href="https://refine.dev/pricing/"
                  >https://refine.dev/pricing/</a
                >.
              </p>
              <p>
                If you have any questions, ideas or suggestions please share
                them with us. The team will be here all day to answer. We look
                forward to all of your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="37064152">
          <h3>
            <a class="item" href="https://tosnotify.com/"
              >Show HN: Get notified when sites update their terms of service</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 15:26:56</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37064152"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
            <div class="text">
              <p>
                A harder problem I've been thinking through is how to know which
                terms to track, since it'd be a pain to add every site I have an
                account with. One idea I had is to automatically get terms for
                apps you have installed from the app store. Any other
                ideas/feedback are appreciated!
              </p>
              <p>
                [0]:
                <a href="https://news.ycombinator.com/item?id=37052508"
                  >https://news.ycombinator.com/item?id=37052508</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="37064044">
          <h3>
            <a class="item" href="https://www.pcbuilderai.com/"
              >Show HN: PC Builder AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 15:19:20</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37064044"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
            <div class="text">
              <p>
                You know when you wanna build a new PC, and need to watch a
                bunch of videos to find the best parts, and then tweak your
                shopping cart to fit your budget? Well, this new app can help
                you.
              </p>
              <p>
                It recommends the best hardware for your usage (gaming or work),
                and considers your budget. It's really helpful, even when you
                got expertise on hardware. Check it out, and feel free to
                suggest stuff! Hope you like it!
              </p>
              <p>
                <a href="https://www.pcbuilderai.com/"
                  >https://www.pcbuilderai.com/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="37063884">
          <h3>
            <a
              class="item"
              href="https://ergaster.org/posts/2023/08/09-i-dont-want-to-host-services-but-i-do/"
              >I don't want to host services but I do</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 15:09:16</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37063884"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37063774">
          <h3>
            <a
              class="item"
              href="http://www.noveltyansweringmachine.com/audio/index.html"
              >Archive of novelty answering machine recordings</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 15:02:40</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37063774"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37063695">
          <h3>
            <a
              class="item"
              href="https://hirrolot.github.io/posts/why-static-languages-suffer-from-complexity.html"
              >Why Static Languages Suffer from Complexity (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 14:57:23</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37063695"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37063568">
          <h3>
            <a
              class="item"
              href="https://citizenlab.ca/2023/08/vulnerabilities-in-sogou-keyboard-encryption/"
              >“Please do not make it public” (Tencent’s Sogou Input Method)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 14:49:56</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37063568"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37063238">
          <h3>
            <a class="item" href="https://github.com/zknill/sqledge"
              >SQLedge: Replicate Postgres to SQLite on the Edge</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 14:29:49</span
              ><span class="points-container"
                >Points: <span class="points">228</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37063238"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37063151">
          <h3>
            <a class="item" href="https://github.com/kognise/arpchat"
              >Arpchat – Text your friends on the same network using just ARP</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 14:24:56</span
              ><span class="points-container"
                >Points: <span class="points">188</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37063151"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37062422">
          <h3>
            <a
              class="item"
              href="https://github.com/hackclub/putting-the-you-in-cpu"
              >I'm 17 and wrote this guide on how CPUs run programs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 13:33:59</span
              ><span class="points-container"
                >Points: <span class="points">816</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37062422"
                  >Comments</a
                ><span class="descendants">: 210</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37062007">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37062007"
              >Show HN: Infracost (YC W21): Be proactive with your cloud
              costs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 13:01:14</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37062007"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.infracost.io/">https://www.infracost.io/</a
              >). Infracost helps engineers see the cost of each Terraform
              change before launching resources. When changes are made, it posts
              a comment with the cloud cost impact. For example, “you’ve added 2
              instances and volumes, and change an instance type from medium to
              large, your bill will increase by 25% next month, from $1000 to
              $1250 per month”.
              <p>
                We launched in February 2021 (<a
                  href="https://news.ycombinator.com/item?id=26064588"
                  >https://news.ycombinator.com/item?id=26064588</a
                >), and Infracost is now being actively used by over 3,000
                companies. However, there is a shift happening in the cloud cost
                management space. New teams, called FinOps teams (a combination
                of "Finance" and "DevOps"), are being formed within companies to
                manage cloud costs.
              </p>
              <p>
                One of the first tasks assigned to these teams is to determine
                "who is using what" - that is, which teams, business units,
                products, etc. are spending the most on cloud. To accomplish
                this, they use tags. Tags are labels that all cloud resources
                should have and are key-value pairs. For example, a server could
                be tagged with: product=HackerNews; environment=production;
                team=blueTeam. So if resources are not tagged properly, then you
                can’t tell who is using what.
              </p>
              <p>
                However, FinOps teams face challenges because their tools are
                reactive. These tools begin by analyzing cloud bills and
                providing visibility of tags from there. This means that they
                are looking at resources that are already running in production
                and costing money. A customer recently shared, “I want all
                resources to be properly tagged. But if they are not, I would
                rather a resource not be tagged at all than be tagged
                incorrectly.”
              </p>
              <p>
                My "aha" moment! FinOps teams can define a tagging policy that
                can be validated in CI/CD before resources are launched. This is
                important because if code is shipped with the wrong tags, FinOps
                teams will have to fight for sprint time to fix them. Even if
                you shut down an untagged resource directly in the cloud, the
                next time Terraform runs, the resource will launch again with no
                tag. You need to fix the issue at its root.
              </p>
              <p>
                I’d love your feedback on our solution to the tagging problem.
                You define your tag key-value policy in our SaaS product, and
                Infracost checks all Terraform resources per change. If anything
                fails the policy, it posts a comment with the details of which
                resources need tags, and what the allowed values are. Once
                fixed, it will let the code be shipped to production.
              </p>
              <p>
                Try it out by going to
                <a href="https://dashboard.infracost.io/"
                  >https://dashboard.infracost.io/</a
                >, setting up with the GitHub app or GitLab app, and defining
                your tagging policy. It will then scan your repository and
                inform you of any missing tags and their file and line number.
                You can use the free trial, but if you need more time, please
                message me and I’ll extend it for you.
              </p>
              <p>
                I would also love to hear how others ensure that the correct tag
                keys and values are applied to all resources, and whether this
                is done proactively or reactively. Additionally, I would be
                interested in hearing about any lessons learned in the process.
              </p>
              <p>Cheers</p>
            </div>
          </section>
        </section>
        <section id="37061842">
          <h3>
            <a class="item" href="https://arbesman.net/computationaldelights/"
              >The Garden of Computational Delights</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 12:47:47</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37061842"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37061694">
          <h3>
            <a
              class="item"
              href="https://www.assemblyai.com/blog/how-rlhf-preference-model-tuning-works-and-how-things-may-go-wrong/"
              >How RLHF Preference Model Tuning Works (and How Things May Go
              Wrong)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 12:33:53</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37061694"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37061127">
          <h3>
            <a
              class="item"
              href="https://hackaday.com/2023/08/07/review-beepy-a-palm-sized-linux-hacking-playground/"
              >Review: Beepy a Palm-Sized Linux Hacking Playground</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 11:30:47</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37061127"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37060654">
          <h3>
            <a
              class="item"
              href="https://mullvad.net/en/blog/2023/8/9/infrastructure-audit-completed-by-radically-open-security/"
              >Infrastructure audit completed by Radically Open Security</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 10:18:46</span
              ><span class="points-container"
                >Points: <span class="points">480</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37060654"
                  >Comments</a
                ><span class="descendants">: 245</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37060470">
          <h3>
            <a
              class="item"
              href="https://spacecraft.ssl.umd.edu/akins_laws.html"
              >Akin’s Laws of Spacecraft Design</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 09:45:40</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37060470"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37060269">
          <h3>
            <a class="item" href="https://1nt3r.net/j-cia/"
              >J-CIA64 – Modern spare part for Commodore 64, Commodore 128,
              SX-64</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 09:07:27</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37060269"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37059857">
          <h3>
            <a
              class="item"
              href="https://old.reddit.com/r/recruitinghell/comments/15kj845/canonical_the_recruitment_process_really_is_that/"
              >Canonical’s recruitment process is long and complex</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 08:02:54</span
              ><span class="points-container"
                >Points: <span class="points">306</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37059857"
                  >Comments</a
                ><span class="descendants">: 264</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37059487">
          <h3>
            <a
              class="item"
              href="https://nucleardiner.wordpress.com/2017/06/19/a-critical-problem/"
              >A Critical Problem (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 06:55:13</span
              ><span class="points-container"
                >Points: <span class="points">235</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37059487"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37059479">
          <h3>
            <a
              class="item"
              href="https://blog.briankitano.com/llama-from-scratch/"
              >Llama from scratch, or how to implement a paper without crying</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 06:54:31</span
              ><span class="points-container"
                >Points: <span class="points">416</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37059479"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37059400">
          <h3>
            <a class="item" href="https://supabase.com/blog/supabase-local-dev"
              >Supabase Local Dev: migrations, branching, and observability</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-09 @ 06:40:39</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37059400"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37047343">
          <h3>
            <a class="item" href="https://qoaformat.org/"
              >The Quite OK Audio Format for Fast, Lossy Compression</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-08 @ 11:27:30</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37047343"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37045329">
          <h3>
            <a
              class="item"
              href="https://blog.nelhage.com/post/systems-at-capacity/"
              >Graceful Behavior at Capacity</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-08 @ 06:41:33</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37045329"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37037900">
          <h3>
            <a class="item" href="https://qalculate.github.io/"
              >Qalculate – A multi-purpose cross-platform desktop calculator</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 17:44:32</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37037900"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
