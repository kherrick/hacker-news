<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="35336253">
          <h3>
            <a
              class="item"
              href="https://old.reddit.com/r/gaming/comments/1247hyh/my_steam_account_was_deleted_after_admitting_that/"
              >My steam account was deleted after admitting that a relative gave
              me the account</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 05:21:58</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35336253"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35335442">
          <h3>
            <a
              class="item"
              href="https://qz.com/ipcc-report-on-climate-change-meat-industry-1850261179"
              >The meat industry blocked the IPCC’s attempt to recommend a
              plant-based diet</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 03:14:47</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35335442"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35335240">
          <h3>
            <a
              class="item"
              href="https://travel.stackexchange.com/questions/180321/can-you-buy-the-same-ticket-with-a-lower-price-if-you-buy-it-from-another-countr"
              >Can you buy the same ticket at a lower price if you buy it from
              another country?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 02:48:21</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35335240"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35335165">
          <h3>
            <a
              class="item"
              href="https://eclecticlight.co/2022/04/01/a-brief-history-of-apfs-in-honour-of-its-fifth-birthday/"
              >A brief history of APFS (Apple file system) in honour of its
              fifth birthday</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 02:39:32</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35335165"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35335097">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/articles/for-the-first-time-the-fed-is-losing-money-mortage-backed-securities-treasurys-interest-rate-risk-svb-ad92e96f"
              >For the first time, the Fed is losing money</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 02:31:07</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35335097"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35335037">
          <h3>
            <a
              class="item"
              href="https://www.ctrl-alt-test.fr/2023/procedural-3d-mesh-generation-in-a-64kb-intro/"
              >Procedural 3D mesh generation in a 64kB intro</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 02:22:19</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35335037"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35334851">
          <h3>
            <a
              class="item"
              href="https://dossier.substack.com/p/the-patriot-act-on-steroids-dc-uniparty"
              >Patriot Act on steroids: anti-TikTok Trojan horse for censorship,
              surveillance</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 01:55:53</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35334851"
                  >Comments</a
                ><span class="descendants">: 118</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35334848">
          <h3>
            <a class="item" href="https://regex.ai/"
              >Show HN: Regex.ai – AI-powered regular expression generator</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 01:55:44</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35334848"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
            <div class="text">
              Regex.ai is an AI-powered tool that generates regular expressions.
              It can accurately generate regular expressions that match specific
              patterns in text with precision. Whether you're a novice or an
              expert, Regex.ai's intuitive interface makes it easy to input
              sample text and generate complex regular expressions quickly and
              efficiently. Overall, Regex.ai is a game-changer that will save
              you time and streamline your workflow.
            </div>
          </section>
        </section>
        <section id="35334719">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2303.15056"
              >ChatGPT outperforms crowd-workers for text-annotation tasks</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 01:39:02</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35334719"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35334613">
          <h3>
            <a class="item" href="https://daringfireball.net/2023/03/wavelength"
              >Wavelength</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 01:26:06</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35334613"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35334299">
          <h3>
            <a
              class="item"
              href="https://fortran-lang.discourse.group/t/the-perils-of-polishing-long/5444"
              >The perils of polishing old Fortran libraries</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 00:48:33</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35334299"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35334135">
          <h3>
            <a class="item" href="https://www.bbc.com/news/technology-65057011"
              >Clearview AI used nearly 1M times by US police, it tells the
              BBC</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 00:25:31</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35334135"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35334124">
          <h3>
            <a
              class="item"
              href="https://0day.work/parsing-the-ds_store-file-format/"
              >Parsing the .DS_Store File Format</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-28 @ 00:23:20</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35334124"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35332531">
          <h3>
            <a
              class="item"
              href="https://github.com/apple/VideoFlashingReduction"
              >Apple Detection of Flashing Lights</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 21:00:25</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35332531"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35332518">
          <h3>
            <a class="item" href="https://sievedata.com/about"
              >Sieve (YC W22) is hiring hackers to build AI infrastructure for
              video</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 21:00:09</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35331372">
          <h3>
            <a
              class="item"
              href="https://www.supercluster.com/editorial/artificial-intelligence-searches-for-extraterrestrial-intelligence/"
              >Artificial Intelligence Searches for Extraterrestrial
              Intelligence</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 19:43:45</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35331372"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35331233">
          <h3>
            <a class="item" href="https://github.com/tech-branch/tsr"
              >Show HN: Time-tracker that helps me with context switches and
              documentation</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 19:34:08</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35331233"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
            <div class="text">
              <p>
                I was feeling incredibly frustrated with my struggles in
                context-switching and writing documentation, so I decided to
                take action and find a solution.
              </p>
              <p>
                I wrote a simple tool for Alfred and Raycast that helps me be
                more mindful when switching between tasks, which can even
                prevent some of those switches. Plus, I can jot down quick notes
                on each task as I go, making it easier to document everything
                once I’m finished.
              </p>
              <p>
                This tool is really simple with only 5 commands - tsr, tsn, tsl,
                tsv, tse
              </p>
              <p>tsr writes a new record</p>
              <p>tsn writes a new note</p>
              <p>tsl shows you the current task</p>
              <p>
                tsv builds a static html page displaying a single timeline of
                the tasks and notes
              </p>
              <p>
                tse opens the directory where records are stored for easy manual
                editing
              </p>
              <p>
                TSR stores your data as simple csv files in ~/tsr, making it
                super easy to integrate with other tools or perform your own
                custom analysis and visualisation magic. The built-in tsv
                timeline visualisation is rather simple and doesn’t do any
                analysis (for now at least).
              </p>
              <p>
                It depends solely on Python3 and works offline. I encourage you
                to check the python scripts to see how simple they are and
                potentially adapt them to your own needs.
              </p>
              <p>Let me know what you think!</p>
            </div>
          </section>
        </section>
        <section id="35330438">
          <h3>
            <a
              class="item"
              href="https://www.darkreading.com/risk/employees-feeding-sensitive-business-data-chatgpt-raising-security-fears"
              >Employees are feeding sensitive data to ChatGPT, raising security
              fears</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 18:32:37</span
              ><span class="points-container"
                >Points: <span class="points">445</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35330438"
                  >Comments</a
                ><span class="descendants">: 270</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35329961">
          <h3>
            <a
              class="item"
              href="https://webkit.org/blog/13966/webkit-features-in-safari-16-4/"
              >WebKit Features in Safari 16.4</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 17:56:03</span
              ><span class="points-container"
                >Points: <span class="points">270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35329961"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35329950">
          <h3>
            <a
              class="item"
              href="https://cabel.com/2023/03/27/apple-passwords-deserve-an-app/"
              >Apple passwords deserve an app</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 17:55:10</span
              ><span class="points-container"
                >Points: <span class="points">937</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35329950"
                  >Comments</a
                ><span class="descendants">: 338</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35329724">
          <h3>
            <a
              class="item"
              href="https://moritzfuerst.net/projects/smalltalk-type"
              >Smalltalk Type</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 17:38:20</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35329724"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35328885">
          <h3>
            <a class="item" href="https://github.com/charmbracelet/soft-serve"
              >Soft-serve: A tasty, self-hostable Git server for the command
              line</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 16:41:41</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35328885"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35328698">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35328698"
              >Launch HN: Play.ht (YC W23) – Generate and clone voices from 20
              seconds of audio</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 16:27:20</span
              ><span class="points-container"
                >Points: <span class="points">342</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35328698"
                  >Comments</a
                ><span class="descendants">: 366</span></span
              >
            </h4>
            <div class="text">
              <p>
                Today, we are excited to share beta access to our latest model,
                Parrot, that is capable of cloning any voice with a few seconds
                of audio and generating expressive speech from text.
              </p>
              <p>
                You can try it out here:
                <a href="https://playground.play.ht"
                  >https://playground.play.ht</a
                >. And there are demo videos at
                <a href="https://www.youtube.com/watch?v=aL_hmxTLHiM"
                  >https://www.youtube.com/watch?v=aL_hmxTLHiM</a
                >
                and
                <a href="https://www.youtube.com/watch?v=fdEEoODd6Kk"
                  >https://www.youtube.com/watch?v=fdEEoODd6Kk</a
                >.
              </p>
              <p>
                The model also captures accents well and is able to speak in all
                English accents. Even more interesting, it can make non-English
                speakers speak English while preserving their original accent.
                Just upload a non-English speaker clip and try it yourself.
              </p>
              <p>
                Existing text to speech models either lack expressiveness,
                control or directability of the voice. For example, making a
                voice speak in a specific way, or emphasizing on a certain word
                or parts of the speech. Our goal is to solve these across all
                languages. Since the voices are built on LLMs they are able to
                express emotions based on the context of the text.
              </p>
              <p>
                Our previous speech model, Peregrine, which we released last
                September, is able to laugh, scream and express other emotions:
                <a
                  href="https://play.ht/blog/introducing-truly-realistic-text-to-speech-with-emotion-and-laughter/"
                  >https://play.ht/blog/introducing-truly-realistic-text-to-spe...</a
                >. We posted it to HN here:
                <a href="https://news.ycombinator.com/item?id=32945504"
                  >https://news.ycombinator.com/item?id=32945504</a
                >.
              </p>
              <p>
                With Parrot, we've taken a slightly different approach and
                trained it on a much larger data set. Both Parrot and Peregrine
                only speak English at the moment but we are working on other
                languages and are seeing impressive early results that we plan
                to share soon.
              </p>
              <p>
                Content creators of all kinds (gaming, media production,
                elearning) spend a lot of time and effort recording and editing
                high-quality audio. We solve that and make it as simple as
                writing and editing text. Our users range from individual
                creators looking to voice their videos, podcasts, etc to teams
                at various companies creating dynamic audio content.
              </p>
              <p>
                We initially built this product for ourselves to listen to books
                and articles online and then found the quality of TTS is very
                low, so we started working on this product until, eventually we
                trained our own models and built a business around it. There are
                many robotic TTS services out there, but ours allows people to
                generate truly human-level expressive speech and allows anyone
                to clone voices instantly with strong resemblance. We initially
                used existing TTS models and APIs but when we started talking to
                our customers in gaming, media production, and others, people
                didn't like the monotone robotic TTS style. So we doubled down
                in training a new model based on the new emerging architectures
                using transformers and self supervised learning.
              </p>
              <p>
                On our platform, we offer two types of voice cloning:
                high-fidelity and zero-shot. High-fidelity voice cloning
                requires around 20 minutes of audio data and creates an
                expressive voice that is more robust and captures the accent of
                the target voice with all its nuances. Zero-shot clones the
                voice with only a few seconds of audio and captures most of the
                accent and tone, but isn’t as nuanced because it has less data
                to work with. We also offer a diverse library of over a hundred
                voices for various use cases.
              </p>
              <p>
                We offer two ways to use these models on the platform: (1) our
                text to voice editor, that allows users to create and manage
                their audio files in projects, etc.; and (2) our API -
                <a href="https://docs.play.ht/reference/api-getting-started"
                  >https://docs.play.ht/reference/api-getting-started</a
                >. The API supports streaming and polling and we are working on
                reducing the latency to make it real time. We have a free plan
                and transparent pricing available for anyone to upgrade.
              </p>
              <p>
                We are thrilled to be sharing our new model, and look forward to
                feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="35327996">
          <h3>
            <a
              class="item"
              href="https://www.docdroid.net/60YAbCz/cftc-binance-pdf"
              >CFTC sues Binance and CEO Changpeng Zhao [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 15:31:18</span
              ><span class="points-container"
                >Points: <span class="points">589</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35327996"
                  >Comments</a
                ><span class="descendants">: 469</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35327136">
          <h3>
            <a
              class="item"
              href="https://www.mitchellrepublic.com/news/south-dakota/after-a-decade-south-dakotas-amish-are-moving-on"
              >After a decade, South Dakota's Amish are moving on</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 14:31:54</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35327136"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35322823">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2023/03/23/science/science-museums-online-collections.html"
              >Science Museums Take Stock of 1.1B Objects from Around the
              World</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 04:23:05</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35322823"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35322725">
          <h3>
            <a
              class="item"
              href="https://hakaimagazine.com/features/banking-on-the-seaweed-rush/"
              >Banking on the Seaweed Rush</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 04:01:44</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35322725"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35322599">
          <h3>
            <a
              class="item"
              href="https://blogs.bl.uk/asian-and-african/2023/03/the-diversity-of-arabic-scripts.html"
              >The Diversity of Arabic Scripts</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-27 @ 03:39:04</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35322599"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35320729">
          <h3>
            <a
              class="item"
              href="https://hackaday.com/2023/03/24/enjoy-an-open-source-espresso/"
              >An Open-Source Espresso</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 23:12:34</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35320729"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35320204">
          <h3>
            <a
              class="item"
              href="https://greekreporter.com/2023/03/20/ancient-indian-buddhist-monk-athens/"
              >An ancient Indian Buddhist monk buried in Athens</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-26 @ 22:13:55</span
              ><span class="points-container"
                >Points: <span class="points">212</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35320204"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
