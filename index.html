<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45458791">
          <h3>
            <a class="item" href="https://lwn.net/Articles/1036262/"
              >Blender 4.5 brings big changes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-03 @ 03:52:43</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45458791"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45458768">
          <h3>
            <a
              class="item"
              href="https://www.newsweek.com/tesla-cybertruck-car-door-malfunction-2043976"
              >Rescuer at Fatal Tesla Cybertruck Crash Says Car Doors Wouldn't
              Open</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-03 @ 03:47:45</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45458768"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45458550">
          <h3>
            <a
              class="item"
              href="https://entropicthoughts.com/you-want-technology-with-warts"
              >You Want Technology with Warts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-03 @ 03:13:13</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45458550"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45458249">
          <h3>
            <a class="item" href="https://debuggingleadership.com/stdlib"
              >Stdlib: A library of frameworks, templates, and guides for
              technical leadership</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-03 @ 02:33:21</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45458249"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45458122">
          <h3>
            <a class="item" href="https://github.com/FyshOS/fynedesk"
              >FyneDesk: A full desktop environment for Linux written in Go</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-03 @ 02:13:17</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45458122"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45457670">
          <h3>
            <a
              class="item"
              href="https://forums.macrumors.com/threads/i-spent-the-day-trying-to-teach-seniors-how-to-use-an-iphone-and-it-was-a-nightmare.2468117/"
              >I spent the day teaching seniors how to use an iPhone</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-03 @ 01:20:32</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45457670"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45457460">
          <h3>
            <a
              class="item"
              href="https://technicshistory.com/2025/10/03/microcomputers-the-second-wave-towards-a-mass-market/"
              >Microcomputers â€“ The Second Wave: Toward a Mass Market</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-03 @ 00:51:26</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45457460"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45457411">
          <h3>
            <a
              class="item"
              href="https://chicagoquantum.org/news/researchers-develop-molecular-qubits-communicate-telecom-frequencies"
              >Researchers develop molecular qubits that communicate at telecom
              frequencies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-03 @ 00:44:42</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45457411"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45457048">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=yUmDRxV0krg"
              >Self-supervised learning, JEPA, world models, and the future of
              AI [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 23:57:23</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45457048"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45455882">
          <h3>
            <a
              class="item"
              href="https://www.deadlanguagesociety.com/p/history-of-letter-yogh"
              >The strangest letter of the alphabet: The rise and fall of
              yogh</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 21:34:42</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45455882"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45454374">
          <h3>
            <a
              class="item"
              href="https://blog.railway.com/p/product-planning-improvement"
              >Why most product planning is bad and what to do about it</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 19:34:08</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45454374"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45453586">
          <h3>
            <a
              class="item"
              href="https://www.techinasia.com/news/openais-revenue-rises-16-to-4-3b-in-h1-2025"
              >OpenAI's H1 2025: $4.3B in income, $13.5B in loss</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 18:37:28</span
              ><span class="points-container"
                >Points: <span class="points">384</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45453586"
                  >Comments</a
                ><span class="descendants">: 452</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45453222">
          <h3>
            <a
              class="item"
              href="https://entropicthoughts.com/why-stick-to-emacs-blog"
              >Babel is why I keep blogging with Emacs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 18:06:41</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45453222"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
            <div class="text">
              <a href="https://orgmode.org/worg/org-contrib/babel/"
                >https://orgmode.org/worg/org-contrib/babel/</a
              >
            </div>
          </section>
        </section>
        <section id="45452299">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/liva-ai/jobs/6xM8JYU-founding-operations-lead"
              >Liva AI (YC S25) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 17:01:16</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45452261">
          <h3>
            <a
              class="item"
              href="https://andregarzia.com/2025/03/why-i-choose-lua-for-this-blog.html"
              >Why I chose Lua for this blog</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 16:58:55</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45452261"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45451577">
          <h3>
            <a class="item" href="https://github.com/paaatrick/playball"
              >Playball â€“ Watch MLB games from a terminal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 16:09:15</span
              ><span class="points-container"
                >Points: <span class="points">265</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45451577"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45451547">
          <h3>
            <a class="item" href="https://www.simplex.sh/"
              >Launch HN: Simplex (YC S24) â€“ Browser automation platform for
              developers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 16:07:23</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45451547"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.simplex.sh/">https://www.simplex.sh/</a>).
              Weâ€™re building all the infrastructure you need for modern browser
              automation â€“ including remote browsers, steerable web agents, and
              more.
              <p>
                Hereâ€™s a demo:
                <a href="https://youtu.be/7KpWJbOcm1Y"
                  >https://youtu.be/7KpWJbOcm1Y</a
                >
              </p>
              <p>
                Weâ€™re excited to be posting on HN again! Back in January, we
                Show HNâ€™d the earliest version of Simplex (<a
                  href="https://news.ycombinator.com/item?id=42704160"
                  >https://news.ycombinator.com/item?id=42704160</a
                >). Weâ€™ve now spent close to a year working with real customers,
                forward-deploying into their codebases, and building web agent
                systems for them from the ground up to understand what it takes
                to get agents working in production.
              </p>
              <p>
                We built Simplex because we started seeing a pattern: companies
                would initially roll their own Playwright/Stagehand web
                automation solutions. This worked fine in the early prototype
                stages, but theyâ€™d quickly get overwhelmed with technical
                challenges as they productionized automations across all the
                websites their customers use.
              </p>
              <p>As they scaled, theyâ€™d have to build and manage:</p>
              <p>
                - Chrome infrastructure: You'll need remote browsers, extension
                support, browser settings for anti-bot detection/stealth, and a
                hundred more small fixes.
              </p>
              <p>
                - DOM parsing: Weâ€™ve seen many web portals have really weird
                quirks (nested iframes, shadow DOM elements, dynamic loading,
                popups, unstable selectors, etc..) that are hard to parse with
                traditional/existing browser agents.
              </p>
              <p>
                - Agent context engineering: Website state, user prompts, system
                prompts, past actions all take up a massive amount of context.
                Without managing this, agents can get caught in loops or take
                wrong actions.
              </p>
              <p>
                - Caching/reliability: No matter how perfect your prompts are,
                itâ€™s hard to guarantee consistency without caching/deterministic
                actions.
              </p>
              <p>
                - Login/2FA: Solve captcha, fetch 2FA from email/text/Google
                Auth, encrypt/decrypt credentials to access portals blocked by
                login.
              </p>
              <p>
                - Automation management: Youâ€™ll have to store all your prompts,
                scrapers, and agents, and find a way to make them reusable if
                you have the same workflows across different portals.
              </p>
              <p>
                - User interface: Creating new workflows + debugging can take
                time. Youâ€™ll have to find easy ways to expose this to your
                engineers to make the process more efficient when you have
                hundreds of automations to build.
              </p>
              <p>
                Simplex is a proper solution that handles all of the above for
                you. We offer both an UI/dashboard (which is what we use even as
                technical developers) and an extensive API for customers who are
                using Simplex in their existing AI agents. Our dashboard/API
                docs are here:
                <a href="https://simplex.sh/docs">https://simplex.sh/docs</a>.
                Weâ€™d love for you to check them out!
              </p>
              <p>
                You can get started for free with Simplex at (<a
                  href="https://www.simplex.sh/"
                  >https://www.simplex.sh/</a
                >) (you have to register to prevent abuse since weâ€™re giving you
                a remote browser that connects to the internet).
              </p>
              <p>
                Our first users have been AI companies across different
                industries like accounting, logistics/transportation, customer
                service, and healthtech. Weâ€™ve seen them:
              </p>
              <p>
                - Fill out prior authorization forms on medical provider portals
              </p>
              <p>
                - Download hundreds of PDFs from grocer portals across the US
              </p>
              <p>
                - Automate and scrape structured data from traditional ERPs like
                NetSuite
              </p>
              <p>- Submit bids/shipments on logistics/TMS portals</p>
              <p>
                - Scrape lawyer/doctor license information across public
                government portals
              </p>
              <p>- And more!</p>
              <p>
                Weâ€™re excited to see more use cases as we open up the platform â€“
                this is our first time doing self-serve.
              </p>
              <p>
                Wanted to end with a quick thank you to HN. The feedback on our
                first Show HN gave us confidence to steer our product in this
                direction, and has deeply shaped the last year of our lives.
                Weâ€™d love feedback, especially from anyone whoâ€™s tried solving
                this problem or built similar tools.
              </p>
              <p>
                Happy to answer questions and looking forward to your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="45451527">
          <h3>
            <a class="item" href="https://signal.org/blog/spqr/"
              >Signal Protocol and Post-Quantum Ratchets</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 16:06:10</span
              ><span class="points-container"
                >Points: <span class="points">505</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45451527"
                  >Comments</a
                ><span class="descendants">: 213</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45450044">
          <h3>
            <a
              class="item"
              href="https://community.n8n.io/t/data-tables-are-here/192256"
              >N8n added native persistent storage with DataTables</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 14:26:23</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45450044"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45449348">
          <h3>
            <a
              class="item"
              href="https://mastodon.social/@bagder/115241241075258997"
              >Potential issues in curl found using AI assisted tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 13:29:55</span
              ><span class="points-container"
                >Points: <span class="points">378</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45449348"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://joshua.hu/llm-engineer-review-sast-security-ai-tools-pentesters"
                >https://joshua.hu/llm-engineer-review-sast-security-ai-tools...</a
              >
              <p>
                <a href="https://joshua.hu/files/AI_SAST_PRESENTATION.pdf"
                  >https://joshua.hu/files/AI_SAST_PRESENTATION.pdf</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45420685">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2025/09/some-dogs-can-classify-their-toys-by-function/"
              >Some dogs can classify their toys by function</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 00:43:35</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45420685"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45417826">
          <h3>
            <a class="item" href="https://foxmoss.com/blog/packet-filtering/"
              >How I block all 26M of your curl requests</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 19:37:21</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45417826"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45415519">
          <h3>
            <a
              class="item"
              href="https://www.independent.co.uk/tv/news/china-worlds-highest-bridge-video-b2835886.html"
              >Highest bridge unveiled at more than 2,000ft above ground</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 16:12:59</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45415519"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45415196">
          <h3>
            <a
              class="item"
              href="https://joincolossus.com/article/joe-liemandt-class-dismissed/"
              >Class Dismissed: Profile of Joe Liemandt and Alpha School</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 15:41:50</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45415196"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45414718">
          <h3>
            <a class="item" href="https://www.asimov.press/p/cataracts"
              >The history of cataract surgery</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 15:04:07</span
              ><span class="points-container"
                >Points: <span class="points">210</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45414718"
                  >Comments</a
                ><span class="descendants">: 130</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45413059">
          <h3>
            <a
              class="item"
              href="https://www.corsix.org/content/riscv-conditional-moves"
              >RISC-V Conditional Moves</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 12:47:45</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45413059"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45412938">
          <h3>
            <a
              class="item"
              href="https://github.com/dbos-inc/dbos-transact-golang"
              >Dbos: Durable Workflow Orchestration with Go and PostgreSQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 12:35:06</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45412938"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45412870">
          <h3>
            <a
              class="item"
              href="https://alikhil.dev/posts/the-simple-habit-that-saves-my-evenings/"
              >A simple habit that saves my evenings</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 12:29:29</span
              ><span class="points-container"
                >Points: <span class="points">165</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45412870"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45411866">
          <h3>
            <a
              class="item"
              href="https://birdcast.info/news/a-primer-for-using-weather-surveillance-radar-to-study-bird-migration/"
              >A primer for using weather surveillance radar to study bird
              migration</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 09:43:39</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45411866"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45411435">
          <h3>
            <a
              class="item"
              href="https://eli.thegreenplace.net/2025/consistent-hashing/"
              >Constitent Hashing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 08:16:27</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45411435"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
