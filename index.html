<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41863937">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/reflex/jobs/uBt9ZNP-senior-staff-engineer-infrastructure"
              >Reflex (YC W23) Hiring Senior/Staff Engineer – Infrastructure</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 21:17:35</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41863600">
          <h3>
            <a class="item" href="https://github.com/GreenmaskIO/greenmask"
              >Show HN: Greenmask 0.2 – Database anonymization tool</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 20:37:46</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41863600"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/GreenmaskIO/greenmask"
                >https://github.com/GreenmaskIO/greenmask</a
              >). Today Greenmask is almost 1 year and recently we published one
              of the most significant release with new features:
              <a
                href="https://github.com/GreenmaskIO/greenmask/releases/tag/v0.2.0"
                >https://github.com/GreenmaskIO/greenmask/releases/tag/v0.2.0</a
              >, as well as a new website at
              <a href="https://greenmask.io">https://greenmask.io</a>.
              <p>
                Before I describe Greenmask’s features, I want to share the
                story of how and why I started implementing it.
              </p>
              <p>
                Everyone strives to have their staging environment resemble
                production as closely as possible because it plays a critical
                role in ensuring quality and improving metrics like time to
                delivery. To achieve this, many teams have started migrating
                databases and data from production to staging environments.
                Obviously this requires anonymizing the data, and for this
                people use either custom scripts or existing anonymization
                software.
              </p>
              <p>
                Having worked as a database engineer for 8 years, I frequently
                struggled with routine tasks like setting up development
                environments—this was a common request. Initially, I used custom
                scripts to handle this, but things became increasingly complex
                as the number of services grew, especially with the rise of
                microservices architecture.
              </p>
              <p>
                When I began exploring tools to solve this issue, I listed my
                key expectations for such software: documentation; type safety
                (the tool should validate any changes to the data); streaming (I
                want the ability to stream the data while transformations are
                being applied); consistency (transformations must maintain
                constraints, functional dependencies, and more); reliability;
                customizability; interactivity and usability; simplicity.
              </p>
              <p>
                I found a few options, but none fully met my expectations. Two
                interesting tools I discovered were pganonymizer and replibyte.
                I liked the architecture of Replibyte, but when I tried it, it
                failed due to architectural limitations.
              </p>
              <p>
                With these thoughts in mind, I began developing Greenmask in
                mid-2023. My goal was to create a tool that meets all of these
                requirements, based on the design principles I laid out. Here
                are some key highlights:
              </p>
              <p>
                * It is a single utility - Greenmask delegates the schema dump
                to vendor utilities and takes responsibility only for data dumps
                and transformations.
              </p>
              <p>
                * Database Subset (<a
                  href="https://docs.greenmask.io/latest/database_subset"
                  >https://docs.greenmask.io/latest/database_subset</a
                >) - specify the subset condition and scale down size. We did a
                deep research in graph algorithms and now we can subset almost
                any complexity of database.
              </p>
              <p>
                * Database type safety - it uses the DBMS driver to decode and
                encode data into real types (such as int, float, etc.) in the
                stream. This guarantees consistency and almost eliminates the
                chance of corrupted dumps.
              </p>
              <p>
                * Deterministic engine (<a
                  href="https://docs.greenmask.io/latest/built_in_transformers/transformation_engines/#hash-engine"
                  >https://docs.greenmask.io/latest/built_in_transformers/trans...</a
                >) - generate data using the hash engine that produces
                consistent output for the same input.
              </p>
              <p>
                * Dynamic parameters for transformers (<a
                  href="https://docs.greenmask.io/latest/built_in_transformers/dynamic_parameters"
                  >https://docs.greenmask.io/latest/built_in_transformers/dynam...</a
                >) - imagine having created_at and updated_at dates with
                functional dependencies. Dynamic parameters ensure these dates
                are generated correctly.
              </p>
              <p>
                We are actively maintaining the current project and continuously
                improving it—our public roadmap at
                <a href="https://github.com/orgs/GreenmaskIO/projects/6"
                  >https://github.com/orgs/GreenmaskIO/projects/6</a
                >. Soon, we will release a Python library along with
                transformation collections to help users develop their own
                complex transformations and integrate them with any service. We
                have plans to support more database engines, with MySQL being
                the next one, and we are working on tools which will integrate
                seamlessly with your CI/CD systems.
              </p>
              <p>
                To get started, we’ve prepared a playground for you that can be
                easily set up using Docker Compose:
                <a href="https://docs.greenmask.io/latest/playground/"
                  >https://docs.greenmask.io/latest/playground/</a
                >
              </p>
              <p>I’d love to hear any questions or feedback from you!</p>
            </div>
          </section>
        </section>
        <section id="41863398">
          <h3>
            <a class="item" href="https://github.com/hugohadfield/kalmangrad"
              >Show HN: Automated smooth Nth order derivatives of noisy data</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 20:17:46</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41863398"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/hugohadfield/bayesfilter/"
                >https://github.com/hugohadfield/bayesfilter/</a
              >) so this felt like a fun and very useful first thing to try it
              out on! If people find kalmangrad useful I would be more than
              happy to add a few more features etc. and I would be very grateful
              if people sent in any bugs they spot.. Thanks!
            </div>
          </section>
        </section>
        <section id="41863392">
          <h3>
            <a
              class="item"
              href="https://future.mozilla.org/builders/news_insights/foyle-you-build-it-ai-should-run-it/"
              >Foyle: You build it, AI should run it</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 20:17:13</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41863392"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41863278">
          <h3>
            <a
              class="item"
              href="https://citizenlab.ca/2024/10/should-we-chat-too-security-analysis-of-wechats-mmtls-encryption-protocol/"
              >Should We Chat, Too? Security Analysis of WeChat's Mmtls
              Encryption Protocol</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 20:06:58</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41863278"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41863061">
          <h3>
            <a
              class="item"
              href="https://github.com/usefulsensors/qc_npu_benchmark"
              >AI PCs Aren't Good at AI: The CPU Beats the NPU</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 19:44:02</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41863061"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41862410">
          <h3>
            <a class="item" href="https://github.com/jaysylvester/citizen"
              >Show HN: Citizen – A Node.js web app framework for fans of
              classic app servers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 18:48:54</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41862410"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text">
              <p>
                I think it might appeal to devs like me (old guys) who came up
                on app servers like ColdFusion, .NET, PHP, etc. and prefer the
                server do the heavy lifting. It doesn't dictate anything about
                your front end, and instead tries to be as flexible as possible
                in providing whatever output the client might need, whether it's
                a single fully-rendered HTML view, partials, JSON, or plain
                text.
              </p>
              <p>
                Only 2 direct dependencies for terminal commands (commander) and
                file watching (chokidar). Built-in functionality includes
                zero-configuration server-side routing, session management,
                key/value store (cache rendered views, controller actions,
                objects, and static files), simple directives for managing
                cookies, sessions, redirects, and caches, and more.
              </p>
              <p>
                It's been in continuous use on at least one site that receives
                hundreds of thousands of page views per month, running months at
                a time without the process crashing. Fairly stable.
              </p>
              <p>Appreciate any comments/feedback/contributions.</p>
            </div>
          </section>
        </section>
        <section id="41861498">
          <h3>
            <a
              class="item"
              href="https://rakgarg.substack.com/p/the-great-splunkbundling"
              >The Great Splunkbundling (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 17:22:21</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41861498"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41861442">
          <h3>
            <a
              class="item"
              href="https://spidermonkey.dev/blog/2024/10/16/75x-faster-optimizing-the-ion-compiler-backend.html"
              >Optimizing the Ion compiler back end</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 17:15:24</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41861442"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41861430">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41861430"
              >Show HN: Automated code instrumentation for structured events</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 17:13:58</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41861430"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <a href="http://invaria.io">http://invaria.io</a>. Observability
              is built on telemetry (metrics, logs and traces). Telemetry data
              quality is often poor because instrumenting code is still a time
              consuming task which requires a lot of hand-finishing. We believe
              that structured event data is the right end goal, and we’re
              starting by making it easier to get there using structured
              logging.
              <p>
                For our Launch HN (Aug), we set up a demo instance with
                pre-baked results. We wanted to go further to allow HN readers
                to give the product a proper test drive.
                <a href="https://open.invaria.io">https://open.invaria.io</a>
                includes some pre-analysed OSS (Go, TS and Python) repos (no
                sign-in required). It also allows users to enroll additional OSS
                repos (limited to Go for now) that they’d like to see analysed
                (magic link sign-in required for this to allow us to manage
                state). The demo focuses on batch analysis of existing repos,
                providing an overview of instrumentation health, line-level code
                improvements with rationale, and related GH pull request
                examples (in practice these are usually bundles of many
                changes). A quick video here to help you find your way:
                <a href="https://youtu.be/IM9EFl4gwVs"
                  >https://youtu.be/IM9EFl4gwVs</a
                >. Any questions, please email us at founders@invaria.io.
              </p>
              <p>
                Since our last post, we’ve been iterating with our first
                customer/design partner in order to drive up the quality and
                consistency of outputs. We’re hitting 85% change acceptance rate
                with our customer on their main Go repo (1m+ LoC, 1000s of
                logging statements). Logs are their main telemetry source for
                debugging, and they want structured logs as standard. Yielding
                consistent results from LLMs is hard (no news there), and that’s
                been a big focus for us since our Launch HN. Breaking down
                prompts, refining the context we fetch from the syntax tree, and
                providing examples is where we have focused efforts.
              </p>
              <p>
                We’re building Invaria because getting high quality telemetry
                from applications is still time-consuming and hard. We discuss
                it here in more detail:
                <a href="https://www.invaria.io/post/your-telemetry-is-garbage"
                  >https://www.invaria.io/post/your-telemetry-is-garbage</a
                >. OpenTelemetry has helped bridge the gap, but the event data
                that comes from auto-instrumented tracing, e.g. at the API
                level, is not enough for the typical (imperfect) application.
                It’s usually necessary to manually add further span and
                attributes, and to clean up any logging that’s burned into
                spans.
              </p>
              <p>
                We’re starting with logging statements as the simplest form of
                event-level telemetry. Invaria can upgrade existing logging
                statements, and instrument key events with new statements. The
                demo instance demonstrates ‘batch mode’ on legacy code, and we
                are beta testing a CI-time integration right now. The goal is to
                automate instrumentation at the CI step, so that developers can
                focus on the creative engineering work.
              </p>
              <p>
                Once again, your honest feedback would mean a lot to us. We have
                a lot of conviction that observability needs a shake up and that
                better outcomes require higher data quality. We’d love to hear
                what you think works and doesn’t work in our current approaches,
                and whether Invaria solves a problem for you.
              </p>
              <p>
                A note on the name change: we really like the name Patchwork,
                but there are several other software companies/products with
                similar names. It caused some confusion during launches. We like
                invariant, a word borrowed from the control theory domain. We
                thought making high quality telemetry a constant was a nice
                mission statement.
              </p>
            </div>
          </section>
        </section>
        <section id="41861056">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2024/10/winamp-really-whips-open-source-coders-into-frenzy-with-its-source-release/"
              >Winamp deletes entire GitHub source code repo after a rocky few
              weeks</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 16:34:15</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41861056"
                  >Comments</a
                ><span class="descendants">: 187</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41860909">
          <h3>
            <a
              class="item"
              href="https://docs.sweeting.me/s/archivebox-plugin-ecosystem-announcement"
              >ArchiveBox is evolving: the future of self-hosted internet
              archives</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 16:18:39</span
              ><span class="points-container"
                >Points: <span class="points">367</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41860909"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
            <div class="text">
              We've been pushing really hard over the last 6mo to develop this
              release. I'd love to hear feedback from people who've worked on
              big plugin systems in the past, or anyone who's tried our betas!
            </div>
          </section>
        </section>
        <section id="41860810">
          <h3>
            <a class="item" href="https://simplelister.com/"
              >Show HN: A fair Product Hunt alternative</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 16:11:49</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41860810"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
            <div class="text">
              <p>Why Simple Lister?</p>
              <p>
                Simple Lister aims to fix this by offering a more transparent
                and fair approach for product launches. Here’s how we do it:
              </p>
              <p>
                • No favoritism: Every product gets an equal chance, and we
                don’t play favorites.
              </p>
              <p>
                • Daily Underdog Feature: Each day, we highlight one underdog
                product to give them extra visibility and support.
              </p>
              <p>
                • No hidden fees: There are no surprise costs. We have a simple
                submission fee, and that’s it—no pay-to-play or hidden charges.
              </p>
              <p>Also we have a long to do list to do better.</p>
              <p>Why does this matter?</p>
              <p>
                After launching on Product Hunt ourselves, we realized how tough
                it is for smaller creators to get any attention unless they’re
                featured. Simple Lister is here to champion those indie products
                that deserve to be seen by a wider audience.
              </p>
              <p>
                The platform is new and evolving, and I’m constantly working to
                make it better. If you’ve got feedback or questions, don’t
                hesitate to reach out!
              </p>
              <p>
                Thanks for your support, and I’d be happy if you submit your
                products!
              </p>
            </div>
          </section>
        </section>
        <section id="41860135">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/be-suspicious-of-success/"
              >It's not enough for a program to work – it has to work for the
              right reasons</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 15:20:08</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41860135"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41859968">
          <h3>
            <a
              class="item"
              href="https://youtubetranscriptoptimizer.com/blog/02_what_i_learned_making_the_python_backend_for_yto"
              >Making the Python back end for my new webapp</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 15:08:56</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41859968"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41859805">
          <h3>
            <a class="item" href="https://nvlabs.github.io/Sana/"
              >Efficient high-resolution image synthesis with linear diffusion
              transformer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 14:56:22</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41859805"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41859466">
          <h3>
            <a class="item" href="https://mistral.ai/news/ministraux/"
              >Un Ministral, Des Ministraux</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 14:31:18</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41859466"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41859012">
          <h3>
            <a
              class="item"
              href="https://azadux.blog/2024/10/08/traveling-with-apple-vision-pro/"
              >Traveling with Apple Vision Pro</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 13:48:51</span
              ><span class="points-container"
                >Points: <span class="points">285</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41859012"
                  >Comments</a
                ><span class="descendants">: 352</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41858975">
          <h3>
            <a class="item" href="https://gist.github.com/jackrusher/5139396"
              >Hofstadter on Lisp (1983)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 13:44:37</span
              ><span class="points-container"
                >Points: <span class="points">259</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41858975"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41858863">
          <h3>
            <a
              class="item"
              href="https://www.ft.com/content/00776191-b010-4104-add4-8dc430386911"
              >Amazon buys stake in nuclear energy developer in push to power
              data centres</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 13:32:36</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41858863"
                  >Comments</a
                ><span class="descendants">: 183</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41858665">
          <h3>
            <a
              class="item"
              href="https://www.ftc.gov/news-events/news/press-releases/2024/10/federal-trade-commission-announces-final-click-cancel-rule-making-it-easier-consumers-end-recurring"
              >FTC announces "click-to-cancel" rule making it easier to cancel
              subscriptions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 13:09:04</span
              ><span class="points-container"
                >Points: <span class="points">1030</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41858665"
                  >Comments</a
                ><span class="descendants">: 498</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41858331">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-024-03287-4"
              >The early days of peer review: five insights from historic
              reports</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 12:32:09</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41858331"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41858099">
          <h3>
            <a
              class="item"
              href="https://fatbobman.com/en/posts/reinventing-core-data-development-with-swiftdata-principles/"
              >Reinventing Core Data Development with SwiftData Principles</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 12:04:27</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41858099"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41855307">
          <h3>
            <a
              class="item"
              href="https://www.backpacker.com/skills/outdoor-first-aid/are-those-stomach-troubles-celiac-or-giardia/"
              >Medical student's apparent celiac disease responded to giardiasis
              treatment</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 03:25:14</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41855307"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41854405">
          <h3>
            <a
              class="item"
              href="https://digipres.club/@foone/113313955144323780"
              >Redbox left PII on decommissioned machines</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-16 @ 00:15:22</span
              ><span class="points-container"
                >Points: <span class="points">271</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41854405"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41847787">
          <h3>
            <a
              class="item"
              href="https://fidoalliance.org/fido-alliance-publishes-new-specifications-to-promote-user-choice-and-enhanced-ux-for-passkeys/"
              >FIDO Alliance publishes new spec to let users move passkeys
              across providers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-15 @ 12:18:36</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41847787"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41846623">
          <h3>
            <a class="item" href="https://speakmyvoice.com"
              >Show HN: With SpeakMyVoice, you're always part of the
              conversation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-15 @ 09:16:36</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41846623"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41845884">
          <h3>
            <a class="item" href="https://www.eigentales.com/Floating-Point/"
              >Perspectives on Floating Point</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-15 @ 07:37:37</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41845884"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41845669">
          <h3>
            <a
              class="item"
              href="https://jank-lang.org/blog/2024-10-14-llvm-ir/"
              >Jank development update – Moving to LLVM IR</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-15 @ 06:50:51</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41845669"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41839686">
          <h3>
            <a class="item" href="https://github.com/homebrewltd/ichigo"
              >Ichigo: Local real-time voice AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-14 @ 17:25:50</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41839686"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.reddit.com/r/LocalLLaMA/comments/1g38e9s/ichigollama31_local_realtime_voice_ai/"
                >https://www.reddit.com/r/LocalLLaMA/comments/1g38e9s/ichigol...</a
              >
              <p>There were several links:</p>
              <p>
                - Blog for details:
                <a href="https://homebrew.ltd/blog/llama-learns-to-talk"
                  >https://homebrew.ltd/blog/llama-learns-to-talk</a
                >
              </p>
              <p>
                - Code:
                <a href="https://github.com/homebrewltd/ichigo"
                  >https://github.com/homebrewltd/ichigo</a
                >
              </p>
              <p>
                - Run locally:
                <a href="https://github.com/homebrewltd/ichigo-demo/tree/docker"
                  >https://github.com/homebrewltd/ichigo-demo/tree/docker</a
                >
              </p>
              <p>
                - Demo on a single 3090:
                <a href="https://ichigo.homebrew.ltd/"
                  >https://ichigo.homebrew.ltd/</a
                >
              </p>
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
