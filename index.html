<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39808425">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39808425"
              >GoGoGrandparent (YC S16) is hiring senior/staff back end and lead
              engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 17:00:29</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                The positions: FULLY REMOTE | Full-time | US, UK, or able to
                work 4+ hours overlap with mainland US (UK time working hours
                also OK) | $100k to $160k (partially location-dependent)
              </p>
              <p>
                Build high-quality, robust engineering at the rarest of things -
                a Silicon Valley startup that is both wholesome AND profitable.
                We have 8-figure revenue, are YC-backed, and growing fast.
              </p>
              <p>
                Tech stack (<i>required): Back-end heavy (Node</i>, Typescript<i
                  >, MySQL</i
                >, REST*+GraphQL), front-end (Vue), deploy (AWS, Docker/K8s)
              </p>
              <p>
                Minimum 6 years experience (mostly Node). If full-stack, you
                must be strongest on the backend. If applying for lead engineer,
                must have leadership experience.
              </p>
              <p>2-stage interview process.</p>
              <p>
                If you want to help older adults and people with disabilities,
                send your LinkedIn/CV to william@gogograndparent.com (keep it
                brief) or apply at
                <a
                  href="https://www.ycombinator.com/companies/gogograndparent/jobs"
                  >https://www.ycombinator.com/companies/gogograndparent/jobs</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39807967">
          <h3>
            <a
              class="item"
              href="http://www.kentlaw.edu/faculty/rwarner/classes/legalaspects_ukraine/securities/case_studies/ledbed.htm"
              >What Happens When a Fifteen Year Old Pumps and Dumps with a Net
              Profit of $800k? (2002)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 15:52:06</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39807967"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39807914">
          <h3>
            <a class="item" href="https://newsletter.pnote.eu/p/be-more-lucky"
              >Be more lucky</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 15:43:29</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39807914"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39807912">
          <h3>
            <a class="item" href="https://glossarie.app/"
              >Show HN: Glossarie – a new, immersive way to learn a language</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 15:43:16</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39807912"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
            <div class="text">
              <p>
                The idea is to introduce vocabulary and grammar whilst you read
                eBooks in your own language. I've found that it is easier to
                remember vocabulary 'in context' and with regular repetition.
                Plus you don't have to carve out dedicated time for language
                learning. Other apps require you to build a habit around various
                exercises or ‘games’, whereas lots of people already read books.
              </p>
              <p>
                From testing with early users so far it's proving effective for
                building a basic understanding of a language and quickly getting
                to the point where you can read and broadly understand text in
                the target language. It’s even better in combination with other
                apps that help with listening/speaking like Pimsleur.
              </p>
              <p>
                There were lots of technical challenges making this. It turned
                out to be (reassuringly) hard to get accuracy to an acceptable
                level, requiring a rabbit-hole into machine translation. There
                was a lot of testing required to optimise the engine that
                chooses the translations to show and to reduce the friction when
                reading books. And the backend to support uploading books is a
                beast in itself. I’d love to share details if there is interest.
              </p>
              <p>Roadmap</p>
              <p>
                - Accuracy - 100% accuracy is the target, but at present there
                can be errors. Feedback from users will be important here so
                that accuracy issues can be generalised and solved at scale.
                Errors can be reported within the app - please do so if you spot
                anything!
              </p>
              <p>
                - Dynamic difficulty - rather than have a progression of
                difficulty levels I’d prefer to introduce vocabulary and grammar
                automatically in response to user progress, balancing against
                the friction of seeing unfamiliar words. There’s a lot ‘under
                the hood’ to manage this today, but plenty of room to improve.
              </p>
              <p>
                - More practice features - to reinforce vocabulary/grammar and
                support writing, listening and speaking.
              </p>
              <p>
                - Better eBook support - improving the formatting of eBooks
                within the app and providing more methods for finding good books
                to read.
              </p>
              <p>Use of AI</p>
              <p>
                - LLMs provided a step change in accuracy and have enabled a
                feature that explains translations and grammar to the user
              </p>
              <p>- vastly improving the utility versus a year ago.</p>
              <p>
                - I believe apps like this, which use AI to enhance or scale
                functionality rather than simply acting as a wrapper over APIs,
                will be the major beneficiaries as LLMs improve.
              </p>
              <p>Take a look, and let me know your thoughts or questions!</p>
            </div>
          </section>
        </section>
        <section id="39807795">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/green-software"
              >What Is Green Software and Why Do We Need It?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 15:23:35</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39807795"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39807759">
          <h3>
            <a
              class="item"
              href="https://www.ctvnews.ca/w5/why-18-year-old-canadian-emily-nash-is-sharing-her-unique-brain-with-science-1.6818765"
              >'Super memory': Why Emily Nash is sharing her brain with
              science</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 15:19:27</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39807759"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39807735">
          <h3>
            <a
              class="item"
              href="https://journal.hexmos.com/training-data-poisoning/?src=hn"
              >How ML Model Data Poisoning Works in 5 Minutes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 15:15:23</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39807735"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39807655">
          <h3>
            <a
              class="item"
              href="https://www.typescriptlang.org/play?#code/C4TwDgpgBAypDGUC8UDkATVUA+aDOqA3AFCiSwIAq4EAPDFBAB7AQB26eFE8AfMrEYt2nNJigB+KGwCuAWwBGEAE5QAXIOasOXVAUlQ8wZQEs2Ac3XSIANxUlSNKAAVTbYADMAgsvN5aAGJywPxIxFARUEHAQtqiAAYApAAkAN5mHiqawjrc8AC+aRlZAEoQRvnxBgDacDzUkPS8ADRQAHQdrmaePn60ZUa8ALrq4ZHRsSJc8UVsmaoA+vkp6XNZDFpTeYWr81ADwJU1dfANdDAt7Z1uPb7+B8OjkVDVQw4eMmzwwCYA9mxQMA3DyBYKTXJGNzmXgACg8wQ00VaHTaAEM7houu5vHdQSEAJRQVJjCLwf54X4AGwgbUpv3MMPiZXgEBMdnQUHhMUhZnMGgARGkufl+VBURwxRioGl0X5KviSPliMQAPQqqAASWAeigZGgeFRmQAhMQgd0PDD+QAJCCUumtRJ4NpQRIcgDULo5KFdbX5rX5AHVfspKeg-VAAKytAAsrQAnAqgA"
              >Type-Safe Printf() in TypeScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 15:02:02</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39807655"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39807417">
          <h3>
            <a
              class="item"
              href="https://ntrs.nasa.gov/api/citations/20200001904/downloads/20200001904.pdf"
              >Antimatter Propulsion [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 14:24:54</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39807417"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39806746">
          <h3>
            <a
              class="item"
              href="http://www.emulators.com/docs/abc_arm64ec_explained.htm"
              >ARM64EC (and ARM64X) Explained</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 12:16:46</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39806746"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39806382">
          <h3>
            <a
              class="item"
              href="https://www.anandtech.com/show/21306/startech-unveils-15in1-thunderbolt-4usb4-dock-with-quad-display-support"
              >StarTech Unveils 15-in-1 Thunderbolt 4/USB4 Dock with Quad
              Display Support</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 11:00:37</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39806382"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39806139">
          <h3>
            <a class="item" href="https://github.com/janmojzis/tinyssh"
              >TinySSH is a small SSH server using NaCl, TweetNaCl</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 10:04:55</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39806139"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39805529">
          <h3>
            <a class="item" href="https://play.d2lang.com/">D2 Playground</a>
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 06:56:58</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39805529"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39805299">
          <h3>
            <a
              class="item"
              href="https://www.cnn.com/2024/03/23/world/humans-tails-genetic-mutation-junk-dna-scn/index.html"
              >Scientists have traced human tail loss to a short sequence of
              genetic code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 05:18:54</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39805299"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39805269">
          <h3>
            <a
              class="item"
              href="https://austinsnerdythings.com/2021/10/15/creating-an-autopilot-in-x-plane-using-python-part-1/"
              >Creating an autopilot in X-Plane using Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 05:07:49</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39805269"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39804204">
          <h3>
            <a
              class="item"
              href="http://oldvcr.blogspot.com/2024/03/after-41-years-my-first-assembly.html"
              >After 41 years, my first assembly program on my first computer,
              the Tomy Tutor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-24 @ 00:50:43</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39804204"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39803606">
          <h3>
            <a class="item" href="https://seriot.ch/projects/pschess.html"
              >PSChess – A Chess Engine in PostScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-23 @ 22:54:48</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39803606"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39803508">
          <h3>
            <a
              class="item"
              href="https://tlacuilolli.com/2024/03/21/new-aztec-codices-the-codices-of-san-andres-tetepilco/"
              >New Aztec Codices Discovered: The Codices of San Andrés
              Tetepilco</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-23 @ 22:34:27</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39803508"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39802934">
          <h3>
            <a
              class="item"
              href="https://nautil.us/what-happens-to-google-maps-when-tectonic-plates-move-237678/"
              >What happens to Google Maps when tectonic plates move? (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-23 @ 20:36:20</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39802934"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39801963">
          <h3>
            <a
              class="item"
              href="https://www.righto.com/2024/03/8088-prefetch-circuitry.html"
              >The Intel 8088 processor's instruction prefetch circuitry: a look
              inside</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-23 @ 18:17:52</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39801963"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39799755">
          <h3>
            <a class="item" href="https://oimo.io/works/life/"
              >Game of Life, simulating itself, infinitely zoomable</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-23 @ 13:24:02</span
              ><span class="points-container"
                >Points: <span class="points">1371</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39799755"
                  >Comments</a
                ><span class="descendants">: 231</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39790701">
          <h3>
            <a
              class="item"
              href="https://www.texasmonthly.com/news-politics/unionbusters-ila-port-houston/"
              >Unionbusters (1986)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 13:45:10</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39790701"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39772533">
          <h3>
            <a class="item" href="https://github.com/Nukesor/pueue"
              >Sequential and parallel execution of long-running shell
              commands</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-20 @ 22:02:43</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39772533"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39765109">
          <h3>
            <a
              class="item"
              href="https://blog.andymatuschak.org/post/6778945711/a-surprising-advantage-of-vinyl"
              >A Surprising Advantage of Vinyl (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-20 @ 11:38:51</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39765109"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39765082">
          <h3>
            <a class="item" href="https://brainteaser.top/bubblespop.html"
              >Unending bubble wrap: a pointless activity to spend a few
              satisfying minutes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-20 @ 11:36:02</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39765082"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39761972">
          <h3>
            <a
              class="item"
              href="https://semiengineering.com/x-ray-inspection-in-the-semiconductor-industry/"
              >X-Ray Inspection in the Semiconductor Industry</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-20 @ 01:04:56</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39761972"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39760936">
          <h3>
            <a
              class="item"
              href="https://www.eno-writer.com/008-deterministic-simulation-testing-for-a-word-processor/"
              >Deterministic simulation testing for a word processor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 22:24:55</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39760936"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39758712">
          <h3>
            <a class="item" href="https://github.com/failsafe-go/failsafe-go"
              >Fault tolerance and resilience patterns for Go</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 18:19:32</span
              ><span class="points-container"
                >Points: <span class="points">192</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39758712"
                  >Comments</a
                ><span class="descendants">: 135</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39755653">
          <h3>
            <a
              class="item"
              href="https://stealthrocket.tech/blog/distributed-coroutines-in-python/"
              >Distributed coroutines with a native Python extension and
              Dispatch</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 13:43:09</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39755653"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39754943">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gaming/2024/03/the-super-mario-maker-community-faces-its-final-boss/"
              >The Super Mario Maker community faces its final boss</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 12:13:18</span
              ><span class="points-container"
                >Points: <span class="points">242</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39754943"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
