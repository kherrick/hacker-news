<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45797242">
          <h3>
            <a
              class="item"
              href="https://supercarblondie.com/electric-motor-yasa-more-powerful-tesla-mercedes/"
              >Tiny electric motor outperforms record holder by 40%</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-03 @ 09:20:01</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45797242"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45796421">
          <h3>
            <a
              class="item"
              href="https://louisville.edu/medicine/news/first-ever-recording-of-a-dying-human-brain-shows-waves-similar-to-memory-flashbacks"
              >First recording of a dying human brain shows waves similar to
              memory flashbacks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-03 @ 06:39:13</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45796421"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45796351">
          <h3>
            <a
              class="item"
              href="https://mailman3.common-lisp.net/hyperkitty/list/ecl-devel@common-lisp.net/thread/T64S5EMVV6WHDPKWZ3AQHEPO3EQE2K5M/"
              >ECL Runs Maxima in a Browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-03 @ 06:21:20</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45796351"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45795511">
          <h3>
            <a class="item" href="https://blog.cloudflare.com/introducing-oxy/"
              >Oxy is Cloudflare's Rust-based next generation proxy framework
              (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-03 @ 03:13:46</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45795511"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45795186">
          <h3>
            <a class="item" href="https://www.syllabi-ai.com/"
              >Syllabi – Open-source agentic AI with tools, RAG, and
              multi-channel deploy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-03 @ 01:59:07</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45795186"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45795036">
          <h3>
            <a
              class="item"
              href="https://nickvsnetworking.com/simple-trick-to-increase-coverage-lying-to-users-about-signal-strength/"
              >Simple trick to increase coverage: Lying to users about signal
              strength</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-03 @ 01:27:48</span
              ><span class="points-container"
                >Points: <span class="points">281</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45795036"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45794245">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2025/Nov/2/new-prompt-injection-papers/"
              >New prompt injection papers: Agents rule of two and the attacker
              moves second</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 23:11:22</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45794245"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45794032">
          <h3>
            <a
              class="item"
              href="https://www.atvbt.com/21-facts-about-throwing-good-parties/"
              >Facts about throwing good parties</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 22:32:42</span
              ><span class="points-container"
                >Points: <span class="points">677</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45794032"
                  >Comments</a
                ><span class="descendants">: 270</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45793652">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45793652"
              >FurtherAI (Series A – A16Z, YC) Is Hiring Across Software and
              AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 21:35:02</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We're building AI Agents for the insurance industry and are
                already post-PMF with strong enterprise adoption.
              </p>
              <p>Highlights:</p>
              <p></p>
              <pre><code>  - $25M Series A led by Andreessen Horowitz (a16z)
  - &gt;10× revenue growth this year
  - Seed -&gt; Series A in under a year
  - Small, talent-dense team - 6/15 are founders (incl. 4 YC founders)
  - Team backgrounds include staff engineers and researchers from Apple, Microsoft, Amazon
</code></pre>
              Hiring strong engineers based in SF who want high ownership, fast
              shipping, and real impact.
              <p>
                If you/someone you know is interested, feel free to reach out
                directly to Sashank (CTO) - sg+hn@furtherai.com
              </p>
              <p>
                Jobs link -
                <a href="https://jobs.ashbyhq.com/furtherai"
                  >https://jobs.ashbyhq.com/furtherai</a
                >
              </p>
              <p>
                PS: We also have a $10k referral bonus per hire, so plz share it
                across!
              </p>
            </div>
          </section>
        </section>
        <section id="45793466">
          <h3>
            <a
              class="item"
              href="https://www.openculture.com/2020/03/paris-had-a-moving-sidewalk-in-1900.html"
              >Paris had a moving sidewalk in 1900, and a Thomas Edison film
              captured it (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 21:08:15</span
              ><span class="points-container"
                >Points: <span class="points">290</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45793466"
                  >Comments</a
                ><span class="descendants">: 134</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45793244">
          <h3>
            <a
              class="item"
              href="https://krebsonsecurity.com/2025/11/alleged-jabber-zeus-coder-mricq-in-u-s-custody/"
              >Alleged Jabber Zeus Coder 'MrICQ' in U.S. Custody</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 20:40:54</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45793244"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45792579">
          <h3>
            <a
              class="item"
              href="https://www-formal.stanford.edu/jmc/lisp20th/lisp20th.html"
              >Lisp: Notes on its Past and Future (1980)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 19:05:32</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45792579"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45792373">
          <h3>
            <a
              class="item"
              href="https://wyounas.github.io/aws/concurrency/2025/10/30/reproducing-the-aws-outage-race-condition-with-model-checker/"
              >Reproducing the AWS Outage Race Condition with a Model Checker</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 18:37:38</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45792373"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45792166">
          <h3>
            <a
              class="item"
              href="https://www.semanticscholar.org/paper/Is-Your-Bluetooth-Chip-Leaking-Secrets-via-RF-Ji-Dubrova/c1d3ceb47ea6f9cc4f29929e2f97d36862a260a2"
              >Is Your Bluetooth Chip Leaking Secrets via RF Signals?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 18:06:15</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45792166"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45790827">
          <h3>
            <a
              class="item"
              href="https://lawrencecpaulson.github.io//2025/11/02/Why-not-dependent.html"
              >Why don't you use dependent types?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 15:06:36</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45790827"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45790293">
          <h3>
            <a class="item" href="https://www.freedos.org/books/cprogramming/"
              >Writing FreeDOS Programs in C</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 13:43:08</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45790293"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45790015">
          <h3>
            <a
              class="item"
              href="https://lists.x.org/archives/xorg-announce/2025-October/003635.html"
              >X.org Security Advisory: multiple security issues X.Org X server
              and Xwayland</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 13:07:31</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45790015"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45789602">
          <h3>
            <a
              class="item"
              href="https://tongyi-agent.github.io/blog/introducing-tongyi-deep-research/"
              >Tongyi DeepResearch – open-source 30B MoE Model that rivals
              OpenAI DeepResearch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 11:43:26</span
              ><span class="points-container"
                >Points: <span class="points">306</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45789602"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45789474">
          <h3>
            <a
              class="item"
              href="https://alfy.blog/2025/10/31/your-url-is-your-state.html"
              >URLs are state containers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 11:12:58</span
              ><span class="points-container"
                >Points: <span class="points">406</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45789474"
                  >Comments</a
                ><span class="descendants">: 174</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45789424">
          <h3>
            <a
              class="item"
              href="https://jsteuernagel.de/posts/using-freebsd-to-make-self-hosting-fun-again/"
              >Using FreeBSD to make self-hosting fun again</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 11:01:23</span
              ><span class="points-container"
                >Points: <span class="points">308</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45789424"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45788040">
          <h3>
            <a class="item" href="https://cr.yp.to/2025/fil-c.html"
              >Notes by djb on using Fil-C</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 05:32:02</span
              ><span class="points-container"
                >Points: <span class="points">332</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45788040"
                  >Comments</a
                ><span class="descendants">: 214</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45787993">
          <h3>
            <a
              class="item"
              href="https://karpathy.medium.com/yes-you-should-understand-backprop-e2f06eab496b"
              >Backpropagation is a leaky abstraction (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 05:20:12</span
              ><span class="points-container"
                >Points: <span class="points">325</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45787993"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45773421">
          <h3>
            <a
              class="item"
              href="https://www.jeffgeerling.com/blog/2025/arduino-uno-q-weird-hybrid-sbc"
              >The Arduino Uno Q is a weird hybrid SBC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-31 @ 15:49:21</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45773421"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45746063">
          <h3>
            <a class="item" href="https://katex.org/"
              >KaTeX – The fastest math typesetting library for the web</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 12:40:16</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45746063"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45745607">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2312.17043"
              >Collatz-Weyl Generators: Pseudorandom Number Generators (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 11:55:42</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45745607"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45743105">
          <h3>
            <a
              class="item"
              href="https://transformer-circuits.pub/2025/linebreaks/index.html"
              >When models manipulate manifolds: The geometry of a counting
              task</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 05:50:56</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45743105"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45735246">
          <h3>
            <a
              class="item"
              href="https://www.usdairy.com/news-articles/why-does-swiss-cheese-have-holes"
              >Why does Swiss cheese have holes?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-28 @ 16:45:28</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45735246"
                  >Comments</a
                ><span class="descendants">: 169</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719636">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-10-mayans-accurately-solar-eclipses-centuries.html"
              >How the Mayans were able to accurately predict solar eclipses for
              centuries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 11:15:19</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719636"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45707330">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/terahertz-chip-room-temperature"
              >Terahertz Tech Sets Stage for "Wireless Wired" Chips</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 21:57:57</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45707330"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45693719">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45693719"
              >Ask HN: Anyone else use FreePascal as their low level
              language?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 11:58:13</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45693719"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
            <div class="text">
              Like most devs I have a couple high level languages
              (Java/Python/PHP) but my low level language was always C/C++.
              However after 25 years I was still shooting myself in the foot on
              the regular. I evaluate Go, Rust and fpc. I'm too dumb for Rust,
              Go's was close but lack of exceptions and classes made it not for
              me. Fpc hit the sweet spot. The syntax is a little clunky but I
              have classes when I need them, exception handling, memory
              management - both auto and manual and cross platform support. Plus
              I can fit in my head - unlike C++
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
