<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44788783">
          <h3>
            <a
              class="item"
              href="https://www.vogue.com/article/reconnecting-with-ex-friends"
              >I Asked Four Former Friends Why We Stopped Speaking-Here's What I
              Learned (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 17:18:41</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44788783"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44788065">
          <h3>
            <a class="item" href="https://www.trykimu.com/"
              >Show HN: Kimu – Open-Source Video Editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 16:27:40</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44788065"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                Kimu can: - Work with Video, Audio &amp; Text. - Supports
                Transitions. - Non-Linear Video Editing with z-axis overlays. -
                Split/trim - Export - A cute AI agent (coming soon!)
              </p>
              <p>
                I'm in uni and I started this project out of sheer annoyance
                that there are zero good web video editors. It is open-source
                here (<a href="https://github.com/robinroy03/videoeditor"
                  >https://github.com/robinroy03/videoeditor</a
                >).
              </p>
              <p>What do y'all think?</p>
            </div>
          </section>
        </section>
        <section id="44787902">
          <h3>
            <a class="item" href="https://benholmen.com/blog/kilopixel/"
              >Show HN: I spent 6 years building a ridiculous wooden pixel
              display</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 16:16:21</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44787902"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
            <div class="text">
              <p><a href="https://kilopx.com/">https://kilopx.com/</a></p>
            </div>
          </section>
        </section>
        <section id="44787831">
          <h3>
            <a
              class="item"
              href="https://www.computerworld.com/article/4032921/microsoft-tops-4t-in-valuation-great-news-for-the-company-not-so-great-for-its-workers.html"
              >Microsoft tops $4T in valuation: Great news for MSFT, not so
              great for workers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 16:11:36</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44787831"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44787780">
          <h3>
            <a
              class="item"
              href="https://electrek.co/2025/08/04/tesla-withheld-data-lied-misdirected-police-plaintiffs-avoid-blame-autopilot-crash/"
              >Tesla withheld data, lied, misdirected police to avoid blame in
              Autopilot crash</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 16:07:15</span
              ><span class="points-container"
                >Points: <span class="points">307</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44787780"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44787374">
          <h3>
            <a
              class="item"
              href="https://evgeniipendragon.com/posts/customizing-tmux-and-making-it-less-dreadful/"
              >Customizing tmux and making it less dreadful</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 15:41:30</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44787374"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44787209">
          <h3>
            <a
              class="item"
              href="https://medium.com/@mohamedalibenothmen1/every-visual-workflow-tool-is-just-excel-for-developers-who-gave-up-f7261090fbc8"
              >Every Visual Workflow Tool Is Just Excel for Developers Who Gave
              Up</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 15:30:01</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44787209"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44787143">
          <h3>
            <a class="item" href="https://quizmathgenius.com/"
              >Show HN: Tiny logic and number games I built for my kids</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 15:25:32</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44787143"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
            <div class="text">
              I’ve been building a few small games to help kids (and curious
              adults) build reasoning and logic skills. Think Word Ladder, Prime
              Hunter, Math Maze ,all in the browser, no installs. Would love
              feedback or suggestions for new types of puzzles
            </div>
          </section>
        </section>
        <section id="44786962">
          <h3>
            <a
              class="item"
              href="https://notashes.me/blog/part-1-memory-management/"
              >Part 1: A Deep Dive into Rust and C Memory Interoperability</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 15:12:20</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44786962"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44786514">
          <h3>
            <a class="item" href="https://www.greptile.com/blog/auditor"
              >Software needs an "independent auditor"</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 14:43:57</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44786462">
          <h3>
            <a
              class="item"
              href="https://nhgranit.maps.arcgis.com/apps/webappviewer/index.html?id=25930044fe2b4d8fb5cab3ec07565e83"
              >Lidar-based GIS map of New Hampshire stone walls</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 14:40:07</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44786462"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44785759">
          <h3>
            <a
              class="item"
              href="https://deprogrammaticaipsum.com/the-toyota-corolla-of-programming/"
              >The Toyota Corolla of programming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 13:49:00</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44785759"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44785636">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/perplexity-is-using-stealth-undeclared-crawlers-to-evade-website-no-crawl-directives/"
              >Perplexity is using stealth, undeclared crawlers to evade
              no-crawl directives</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 13:39:30</span
              ><span class="points-container"
                >Points: <span class="points">679</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44785636"
                  >Comments</a
                ><span class="descendants">: 363</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44785292">
          <h3>
            <a class="item" href="https://github.com/leigest519/ScreenCoder"
              >ScreenCoder: An intelligent UI-to-code generation system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 13:12:27</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44785292"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44785238">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/optical-brain-imaging"
              >Scientists shine a laser through a human head</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 13:07:18</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44785238"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44785224">
          <h3>
            <a
              class="item"
              href="https://www.ashermancinelli.com/csblog/2025-7-20-Ideal-Array-Language.html"
              >My Ideal Array Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 13:05:08</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44785224"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44785107">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/smart-news/century-old-warnings-against-tsunamis-dot-japans-coastline-180956448/"
              >Century-Old Stone “Tsunami Stones” Dot Japan's Coastline
              (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 12:51:20</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44785107"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44785016">
          <h3>
            <a
              class="item"
              href="https://research.vu.nl/ws/portalfiles/portal/127420931/Genetic_correlates_of_social_stratification_in_Great_Britain.pdf"
              >Genetic correlates of social stratification in Great Britain
              (2019) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 12:41:13</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44785016"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44784743">
          <h3>
            <a
              class="item"
              href="https://aldenhallak.com/blog/posts/draw-a-fish-postmortem.html"
              >Drawafish.com Postmortem: Whoops</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 12:10:22</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44784743"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44784297">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2506.14272"
              >GHz spiking neuromorphic photonic chip with in-situ training</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 11:21:05</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44784297"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44784141">
          <h3>
            <a
              class="item"
              href="https://blog.pkh.me/p/44-perfecting-anti-aliasing-on-signed-distance-functions.html"
              >Perfecting anti-aliasing on signed distance functions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 10:55:47</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44784141"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44783566">
          <h3>
            <a
              class="item"
              href="https://www.pcgamer.com/games/mastercard-deflects-blame-for-nsfw-games-being-taken-down-but-valve-says-payment-processors-specifically-cited-a-mastercard-rule-about-damaging-the-brand/"
              >Mastercard deflects blame for NSFW games being taken down</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 09:27:49</span
              ><span class="points-container"
                >Points: <span class="points">465</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44783566"
                  >Comments</a
                ><span class="descendants">: 456</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44783155">
          <h3>
            <a
              class="item"
              href="https://fortune.com/2025/08/03/ai-interviewers-job-seekers-unemployment-hiring-hr-teams/"
              >Job-seekers are dodging AI interviewers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 08:04:20</span
              ><span class="points-container"
                >Points: <span class="points">309</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44783155"
                  >Comments</a
                ><span class="descendants">: 482</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44780353">
          <h3>
            <a
              class="item"
              href="https://eliot-jones.com/2025/8/pdf-parsing-xref"
              >So you want to parse a PDF?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-03 @ 22:24:29</span
              ><span class="points-container"
                >Points: <span class="points">366</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44780353"
                  >Comments</a
                ><span class="descendants">: 197</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44770372">
          <h3>
            <a
              class="item"
              href="https://videocardz.com/newz/gigabyte-removes-unofficial-pcie-5-0-support-from-b650-motherboards-in-latest-bios-update"
              >Gigabyte removes PCIe 5.0 support from B650 motherboards in
              latest BIOS update</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-02 @ 19:01:58</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44770372"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44760411">
          <h3>
            <a
              class="item"
              href="https://hegemon.substack.com/p/facts-will-not-save-you"
              >Facts will not Save You - AI, History and Soviet Sci-Fi</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 18:16:18</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44760411"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44758463">
          <h3>
            <a class="item" href="https://openipc.org/à"
              >Open IP Camera Firmware</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 15:41:50</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44758463"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44755827">
          <h3>
            <a
              class="item"
              href="https://www.itsnicethat.com/features/how-we-built-bluey-s-world-cartoon-background-scenery-art-director-catriona-drummond-animation-090725"
              >How we built Bluey’s world</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 12:33:20</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44755827"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44754697">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-07-quantum-state-interface-exotic-materials.html"
              >New quantum state of matter found at interface of exotic
              materials</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 09:42:00</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44754697"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44746347">
          <h3>
            <a
              class="item"
              href="https://maxhalford.github.io/blog/llm-font-identification/"
              >Do LLMs identify fonts?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 14:56:24</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44746347"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
