<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37682607">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/electrical-engineer-salary-2023"
              >Inflation Bites U.S. Engineering Salaries</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 22:56:51</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37682607"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37682357">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2023/09/27/meta_coughs_181m_to_exit/"
              >Meta spends $181M to get out of lease at vacant London offices</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 22:34:48</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37682357"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37681643">
          <h3>
            <a class="item" href="https://github.com/QwenLM/Qwen"
              >Qwen (通义千问) chat and pretrained large language model by
              Alibaba Cloud</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 21:33:04</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37681643"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37681554">
          <h3>
            <a
              class="item"
              href="https://nichegamer.com/war-thunder-user-leaks-restricted-military-documents-for-ah-64d-apache-longbow/"
              >War Thunder user leaks restricted military documents for AH-64D
              Apache Longbow</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 21:25:24</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37681554"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37681505">
          <h3>
            <a
              class="item"
              href="https://store.steampowered.com/app/730/CounterStrike_2/"
              >Valve releases Counter-Strike 2</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 21:22:18</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37681505"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37681047">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2023/9/27/23892781/openai-chatgpt-live-web-results-browse-with-bing"
              >ChatGPT can now search the web in real time</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 20:44:24</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37681047"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37681004">
          <h3>
            <a
              class="item"
              href="https://news.mit.edu/2023/desalination-system-could-produce-freshwater-cheaper-0927"
              >Desalination system could produce freshwater that is cheaper than
              tap water</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 20:41:43</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37681004"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37680851">
          <h3>
            <a
              class="item"
              href="https://ai.meta.com/blog/llama-2-updates-connect-2023/"
              >The Llama Ecosystem: Past, Present, and Future</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 20:31:50</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37680851"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37680817">
          <h3>
            <a
              class="item"
              href="https://ai.meta.com/research/publications/emu-enhancing-image-generation-models-using-photogenic-needles-in-a-haystack/"
              >Emu: Enhancing Image Generation Models Using Photogenic Needles
              in a Haystack</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 20:29:38</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37680817"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37680449">
          <h3>
            <a class="item" href="https://github.com/bitwig/dawproject"
              >DAWproject: Open exchange format for DAWs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 20:01:48</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37680449"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37680420">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-09-earthworms-contribute-global-grain-production.html"
              >Earthworms contribute to 6.5% of global grain production</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 19:59:26</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37680420"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37680079">
          <h3>
            <a class="item" href="http://textfiles.com/100/hack7.txt"
              >The Conscience of a Hacker (1986)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 19:35:42</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37680079"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37678860">
          <h3>
            <a class="item" href="https://www.meta.com/smart-glasses/"
              >Ray-Ban Meta Smart Glasses</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 18:18:33</span
              ><span class="points-container"
                >Points: <span class="points">234</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37678860"
                  >Comments</a
                ><span class="descendants">: 400</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37678714">
          <h3>
            <a class="item" href="https://mwl.io/archives/23127"
              >OpenBSD PF versus FreeBSD PF</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 18:09:29</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37678714"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37678181">
          <h3>
            <a class="item" href="https://www.mit.edu/~xela/tao.html"
              >The Tao of Programming (1987)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 17:37:04</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37678181"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37676880">
          <h3>
            <a
              class="item"
              href="https://archive.org/details/TheAshleyBookOfKnots"
              >The Ashley Book of Knots (1944)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 16:13:37</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37676880"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37676393">
          <h3>
            <a
              class="item"
              href="https://headlineshq.substack.com/p/issue-no-029-live-near-your-friends"
              >Live near your friends</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 15:45:58</span
              ><span class="points-container"
                >Points: <span class="points">326</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37676393"
                  >Comments</a
                ><span class="descendants">: 293</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37675894">
          <h3>
            <a
              class="item"
              href="https://github.com/highlight/highlight/tree/main/backend/embeddings"
              >Show HN: Using LLMs and Embeddings to classify application
              errors</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 15:17:35</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37675894"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                Given that there’s a lot of founders/engineers using LLMs in
                their products, we figured we’d share how we built the new
                functionality, their impact on our workflows, and how you can
                try it out.
              </p>
              <p>
                Our goal was to build two features: (1) tagging errors (e.g.
                deeming an error as “authentication error” or a “database
                error”); and (2) grouping similar errors together (e.g. two
                errors that have a different stacktrace and body, but are
                semantically not very different).
              </p>
              <p>
                Each of these rely heavily on comparing text across our
                application. After some experimentation with the OpenAI
                embeddings API [3], we went ahead and hosted a private model
                instance of thenlper/gte-large (an open-source MIT licensed
                model), which is a 1024-dimension model running on an Intel Ice
                Lake 2 vCPU machine on Hugging face [4].
              </p>
              <p>
                Our general approach for classifying/comparing text is as
                follows. As each set of tokens (i.e a string) comes in, our
                backend makes a request to an inference endpoint and receives a
                1024-dimension float vector as a response (see the code here
                [5]). We then store that vector using pgvector [6]. To compare
                any two sets for similarity, we simply look at the Euclidian
                distance between their respective embeddings using the ivfflat
                index implemented by pgvector (example code here [7]).
              </p>
              <p>
                To tag errors, we assign an error its most relevant tag from a
                predetermined set decided by us. For example, if we tag an error
                as an "authentication error" or a "database error", we can allow
                developers to have a starting point before inspecting an
                issue.(see the logic here [8]).
              </p>
              <p>
                Anecdotally, this approach seems to work very well. For example,
                here are two authentication errors that got tagged as
                “Authentication Error”:
              </p>
              <p></p>
              <pre><code>    * Firebase: A network AuthError has occurred
    * Error retrieving user from firebase api for email verification: cannot find user from uid.
</code></pre>
              We also use these error embeddings to group similar errors. To
              decide whether an error joins a group or starts a new one, we
              decide on a distance threshold (using the euclidean distance)
              ahead of time. An interesting thing about this approach, compared
              to using a text-based heuristic, is that two errors with different
              stack traces can still be grouped together. Here’s an example:
              <p></p>
              <pre><code>    * github.com/highlight-run/highlight/backend/worker.(*Worker).ReportStripeUsage
    * github.com/highlight-run/highlight/backend/private-graph/graph.(*Resolver).GetSlackChannelsFromSlack.func1
</code></pre>
              Both reported as `integration api error` as they involve the
              Stripe and Slack integrations respectively. The neat thing is that
              the LLM can use the full context of an error and match based on
              the most relevant details about the error.
              <p>
                We have rolled out a first version of the error grouping logic
                to our cloud product [9], and there’s a demo of all the
                functionality at [2]. Long-term, if the HN community has other
                ideas of what we could build with LLM tooling in observability,
                we’re all ears. Let us know what you think!
              </p>
              <p>Links</p>
              <p>
                [1]
                <a href="https://news.ycombinator.com/item?id=36774611"
                  >https://news.ycombinator.com/item?id=36774611</a
                >
              </p>
              <p>
                [2]
                <a href="https://app.highlight.io/error-tags"
                  >https://app.highlight.io/error-tags</a
                >
              </p>
              <p>
                [3]
                <a href="https://platform.openai.com/docs/guides/embeddings"
                  >https://platform.openai.com/docs/guides/embeddings</a
                >
              </p>
              <p>
                [4]
                <a href="https://huggingface.co/thenlper/gte-large"
                  >https://huggingface.co/thenlper/gte-large</a
                >
              </p>
              <p>
                [5]
                <a
                  href="https://github.com/highlight/highlight/blob/main/backend/embeddings/embeddings.go#L139-L189"
                  >https://github.com/highlight/highlight/blob/main/backend/emb...</a
                >
              </p>
              <p>
                [6]
                <a
                  href="https://github.com/highlight/highlight/blob/main/backend/model/model.go#L957C1-L963"
                  >https://github.com/highlight/highlight/blob/main/backend/mod...</a
                >
              </p>
              <p>
                [7]
                <a
                  href="https://github.com/highlight/highlight/blob/main/backend/public-graph/graph/resolver.go#L479-L487"
                  >https://github.com/highlight/highlight/blob/main/backend/pub...</a
                >
              </p>
              <p>
                [8]
                <a
                  href="https://github.com/highlight/highlight/blob/main/backend/private-graph/graph/resolver.go#L3768-L3774"
                  >https://github.com/highlight/highlight/blob/main/backend/pri...</a
                >
              </p>
              <p>
                [9]
                <a href="https://app.highlight.io">https://app.highlight.io</a>
              </p>
            </div>
          </section>
        </section>
        <section id="37675864">
          <h3>
            <a
              class="item"
              href="https://forgottenfiles.substack.com/p/accidents-happen-c1890s"
              >Sketches of misfortune in an insurance trade card</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 15:16:22</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37675864"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37675496">
          <h3>
            <a
              class="item"
              href="https://mistral.ai/news/announcing-mistral-7b/"
              >Mistral 7B</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 14:52:46</span
              ><span class="points-container"
                >Points: <span class="points">683</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37675496"
                  >Comments</a
                ><span class="descendants">: 444</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37675465">
          <h3>
            <a class="item" href="https://github.com/dkaslovsky/nav"
              >Show HN: Nav – A terminal navigator for interactive `ls`
              workflows</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 14:50:55</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37675465"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built a tool for interactive navigation in the terminal that
                is intended to replace the all-too-familiar cycle of `ls` to
                view a directory, followed by `cd`, then `ls`, and repeat.
              </p>
              <p>
                nav is a terminal filesystem explorer built for interactive `ls`
                workflows. The key features I wanted to enable are interactivity
                and search without feeling like I'm using anything other than
                `ls`. nav supports common `ls` options/flags, as well as tab
                completion, and might expand its support for less common options
                in the future. These options exist as both CLI flags and
                interactive toggles.
              </p>
              <p>
                nav works as a standalone tool or in a bash/zsh pipe or subshell
                to e.g., change directories, copy a file name to the clipboard,
                etc. For example, I use the simple functions from the README in
                my .zshrc for interactive `cd` and copy-to-clipboard workflows.
              </p>
              <p>
                nav was inspired by the discussion of the excellent `walk` [0]
                tool and was written from the ground up to support its
                `ls`-centric interactive feature set. I hope you might find it
                useful and I'd love to take any feedback or suggestions that
                might come to mind!
              </p>
              <p>
                [0]
                <a href="https://news.ycombinator.com/item?id=37220828"
                  >https://news.ycombinator.com/item?id=37220828</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="37674967">
          <h3>
            <a
              class="item"
              href="https://clickhouse.com/blog/clickhouse-keeper-a-zookeeper-alternative-written-in-cpp"
              >ClickHouse Keeper: A ZooKeeper alternative written in C++</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 14:14:30</span
              ><span class="points-container"
                >Points: <span class="points">176</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37674967"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37674752">
          <h3>
            <a class="item" href="https://deno.com/blog/queues">Deno Queues</a>
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 13:58:58</span
              ><span class="points-container"
                >Points: <span class="points">267</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37674752"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37673413">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2023-09-26/google-judge-rules-trial-documents-can-be-posted-by-us-online"
              >Judge rules Google trial documents can be posted by U.S.
              online</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 12:01:43</span
              ><span class="points-container"
                >Points: <span class="points">334</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37673413"
                  >Comments</a
                ><span class="descendants">: 181</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37673409">
          <h3>
            <a class="item" href="https://blog.roboflow.com/gpt-4-vision/"
              >First Impressions with GPT-4V(ision)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 12:01:18</span
              ><span class="points-container"
                >Points: <span class="points">286</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37673409"
                  >Comments</a
                ><span class="descendants">: 243</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37673127">
          <h3>
            <a class="item" href="https://www.uiua.org/"
              >Uiua: A minimal stack-based, array-based language</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 11:28:31</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37673127"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37671821">
          <h3>
            <a class="item" href="https://meetcopilot.app/"
              >Show HN: Use ChatGPT with Apple Shortcuts</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-27 @ 08:37:39</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37671821"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <p>
                I was tired of copy-pasting and switching between apps on my Mac
                or iPhone, so I had this crazy idea to bring ChatGPT into every
                app that I use.
              </p>
              <p>
                This was possible only with the Apple Shortcuts app. Very few
                people know about its power and potential, so I took this chance
                and built COPILOT.
              </p>
              <p>
                <a href="https://meetcopilot.app">https://meetcopilot.app</a>
              </p>
              <p>
                But I also loved the idea of AI agents using various tools so
                much that I leveraged OpenAI's function-calling feature to
                accomplish that.
              </p>
              <p>
                Now, no matter what app I am using on my iPhone or Mac, the
                selected text or the current webpage from Safari will be passed
                automatically to COPILOT. Then I just ask it whatever I need and
                watch until it reaches the goal autonomously.
              </p>
              <p>
                There was also another problem with ChatGPT - the knowledge
                cutoff. So I also integrated Google search and web scraping into
                it. Now, whenever my request needs real-time information, like
                what is the latest version of macOS, it will use these tools to
                gather the data and then give me the correct response.
              </p>
              <p>
                Being an app built with Apple Shortcuts, all its "code", called
                actions, is actually open-source. I'm selling a Premium version
                of it to earn some revenue for my time.
              </p>
              <p>
                I would love to hear all your thoughts on it! Thank you so much!
              </p>
            </div>
          </section>
        </section>
        <section id="37664082">
          <h3>
            <a
              class="item"
              href="https://thonyc.wordpress.com/2023/09/21/incorrect-casual-assumptions/"
              >Incorrect casual assumptions</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-26 @ 18:53:49</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37664082"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37658686">
          <h3>
            <a
              class="item"
              href="https://mused.org/en/tours/730/the-tomb-of-ramesses-i"
              >Show HN: The Tomb of Ramesses I in the Valley of the Kings</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-26 @ 13:04:48</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37658686"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’d love feedback with the new version – this is built with
                vanilla Three.js and footage captured on my iPhone 12. For
                various fx, I coded many of my own shaders based on work by
                <a href="https://twitter.com/akella"
                  >https://twitter.com/akella</a
                >
                and others on ShaderToy, so I’m keen to test on more devices.
              </p>
              <p>As the hacker, so the (ancient) painter.</p>
            </div>
          </section>
        </section>
        <section id="37650402">
          <h3>
            <a
              class="item"
              href="https://www.cambridgeblog.org/2023/05/a-journey-into-the-shaken-baby-syndrome-abusive-head-trauma-controversy/"
              >A journey into the shaken baby syndrome/abusive head trauma
              controversy</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-25 @ 20:49:09</span
              ><span class="points-container"
                >Points: <span class="points">858</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37650402"
                  >Comments</a
                ><span class="descendants">: 516</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
