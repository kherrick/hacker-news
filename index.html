<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37845195">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/the-deep-link-equating-math-proofs-and-computer-programs-20231011/"
              >The Deep Link Equating Math Proofs and Computer Programs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 14:52:25</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37845195"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37845188">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Third_place"
              >The Third Place</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 14:51:52</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37845188"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37845101">
          <h3>
            <a class="item" href="https://amadeuspagel.com/p/bad-speech"
              >Bad Speech</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 14:46:12</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37845101"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37844691">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/cities/2023/oct/11/culdesac-car-free-neighborhood-tempe-arizona"
              >People are happier in a walkable neighborhood: the US community
              that banned cars</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 14:15:52</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37844691"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37844631">
          <h3>
            <a
              class="item"
              href="https://torrentfreak.com/riaa-reports-ai-vocal-cloning-voicify-to-the-u-s-government-231010/"
              >RIAA Reports AI Vocal Cloning Site 'Voicify' to the U.S.
              Government</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 14:10:43</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37844631"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37844536">
          <h3>
            <a
              class="item"
              href="https://blog.synopse.info/?post/2022/11/26/Modern-Pascal-is-Still-in-the-Race"
              >Modern Pascal is still in the race (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 14:02:43</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37844536"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37844305">
          <h3>
            <a
              class="item"
              href="https://modern-sql.com/reserved-words-empirical-list"
              >SQL Reserved Words – The Empirical List</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 13:45:11</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37844305"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37844225">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/worklife/article/20231010-the-acute-suicide-crisis-among-veterinarians-youre-always-going-to-be-failing-somebody"
              >The acute suicide crisis among veterinarians: 'You're always
              failing somebody'</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 13:38:32</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37844225"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37844074">
          <h3>
            <a
              class="item"
              href="https://e360.yale.edu/digest/small-green-ammonia-plant-farm-kenya"
              >Farm in Kenya to produce fertilizer without using fossil fuels</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 13:26:02</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37844074"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37843946">
          <h3>
            <a class="item" href="https://docs.vulkan.org/"
              >Vulkan Documentation</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 13:14:12</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37843946"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37843908">
          <h3>
            <a class="item" href="https://idiomdrottning.org/bad-emacs-defaults"
              >Bad Emacs defaults</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 13:10:14</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37843908"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37843855">
          <h3>
            <a
              class="item"
              href="https://www.mcsweeneys.net/articles/im-sorry-i-bit-you-during-my-job-interview"
              >I'm sorry I bit you during my job interview (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 13:04:53</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37843855"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37843621">
          <h3>
            <a class="item" href="https://speechmeter.com/"
              >Show HN: Speech Meter – Improve Your English Pronunciation</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 12:32:57</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37843621"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
            <div class="text">
              <p>
                We built Speech Meter as a tool to practice and improve English
                pronunciation. It uses AI to analyze your accent and score your
                pronunciation accuracy. It’s great for anyone who wants to
                practice their pronunciation in English. I’d love to hear your
                thoughts and suggestions for improvements. I really appreciate
                any feedback you could have (:
              </p>
            </div>
          </section>
        </section>
        <section id="37843595">
          <h3>
            <a
              class="item"
              href="https://theaiunderwriter.substack.com/p/well-call-it-ai-to-sell-it-machine"
              >We’ll call it AI to sell it, machine learning to build it</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 12:30:10</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37843595"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37843570">
          <h3>
            <a
              class="item"
              href="https://www.raspberrypi.com/news/bookworm-the-new-version-of-raspberry-pi-os/"
              >Bookworm – the new version of Raspberry Pi OS</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 12:26:19</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37843570"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37843334">
          <h3>
            <a class="item" href="https://lucidbox.net/"
              >Show HN: Netflix for AI-Generated Videos</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 11:53:23</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37843334"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37842863">
          <h3>
            <a class="item" href="https://beej.us/guide/bgnet/html/"
              >Beej's Guide to Network Programming (1994-2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 10:43:00</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37842863"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37842778">
          <h3>
            <a class="item" href="https://currents.dev/posts/v13-blocking"
              >Cypress.io Blocking of Sorry Cypress and Currents</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 10:24:41</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37842778"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37842618">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2310.06825"
              >Mistral 7B</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 09:56:39</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37842618"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37842301">
          <h3>
            <a class="item" href="https://github.com/Shopify/toxiproxy"
              >Toxiproxy – simulate network and system conditions for chaos
              testing</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 08:56:54</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37842301"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37842161">
          <h3>
            <a
              class="item"
              href="https://www.brianlinkletter.com/2023/02/network-emulators-and-network-simulators-2023/"
              >Open-source network emulators and simulators</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 08:23:20</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37842161"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37841512">
          <h3>
            <a class="item" href="https://www.rfc-editor.org/rfc/rfc1925"
              >RFC 1925: The Twelve Networking Truths (1996)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 06:15:38</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37841512"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37841013">
          <h3>
            <a class="item" href="https://github.com/spacedriveapp/spacedrive"
              >Spacedrive – an open source cross-platform file explorer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 04:54:07</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37841013"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37840503">
          <h3>
            <a class="item" href="https://prolost.com/blog/applelog"
              >Log is the "Pro" in iPhone 15 Pro</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 03:18:12</span
              ><span class="points-container"
                >Points: <span class="points">810</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37840503"
                  >Comments</a
                ><span class="descendants">: 281</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37840497">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/collection/pantographia/"
              >Pantographia: 1799 specimen book of all the known alphabets</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 03:17:17</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37840497"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37839884">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-10-evidence-albatrosses-infrasound-journeys.html"
              >Evidence that albatrosses use infrasound to navigate long
              journeys</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 01:22:18</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37839884"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37839872">
          <h3>
            <a
              class="item"
              href="https://www.science.org/doi/10.1126/sciadv.adh4973"
              >Multifault earthquake threat for Seattle region revealed by mass
              tree mortality</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 01:20:32</span
              ><span class="points-container"
                >Points: <span class="points">212</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37839872"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37839759">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/handle-com/jobs/lgchJ3v-abm-campaigns-manager"
              >Handle.com (YC W19) Is Hiring an ABM Manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 01:00:29</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37839696">
          <h3>
            <a class="item" href="https://blog.replit.com/replit-code-v1_5"
              >Replit's new AI Model now available on Hugging Face</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 00:52:07</span
              ><span class="points-container"
                >Points: <span class="points">192</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37839696"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37834552">
          <h3>
            <a class="item" href="http://tom7.org/zelda/"
              >The glEnd() of Zelda: Automatic 3Dification of NES Games
              (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-10 @ 16:55:13</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37834552"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
