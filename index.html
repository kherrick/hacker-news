<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45572130">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45572130"
              >Ask HN: Has AI stolen the satisfaction from programming?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 19:07:15</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45572130"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
            <div class="text">
              <p><i>The problem:</i> You can't win anymore.</p>
              <p>
                The old way: You'd think about the problem. Draw some diagrams.
                Understand what you're actually trying to do. Then write the
                code. Understanding was mandatory. You solved it.
              </p>
              <p>
                The new way: The entire premise of AI coding tools is to
                automate the thinking, not just the typing. You're supposed to
                describe a problem and get a solution without understanding the
                details. That's the labor-saving promise.
              </p>
              <p>
                So I feel pressure to always, always, start by info dumping the
                problem description to AI and gamble for a one-shot. Voice
                transcription for 10 minutes, hit send, hope I get something
                first try, if not hope I can iterate until something works. And
                when even something does work = zero satisfaction because I
                don't have the same depth of understanding of the solution. Its
                no longer my code, my idea. It's just some code I found online.
                `import solution from chatgpt`
              </p>
              <p>
                If I think about the problem, I feel inefficient. "Why did you
                waste 2 hours on that? AI would've done it in 10 minutes."
              </p>
              <p>
                If I use AI to help, the work doesn't feel like mine. When I
                show it to anyone, the implicit response is: "Yeah, I could've
                prompted for that too."
              </p>
              <p>
                The steering and judgment I apply to AI outputs is invisible.
                Nobody sees which suggestions I rejected, how I refined the
                prompts, or what decisions I made. So all credit flows to the AI
                by default.
              </p>
              <p>
                <i>The result:</i> Nothing feels satisfying anymore. Every
                problem I solve by hand feels too slow. Every problem I solve
                with AI feels like it doesn't count. There's this constant
                background feeling that whatever I just did, someone else
                would've done it better and faster.
              </p>
              <p>
                I was thinking of all the classic exploratory learning blog
                posts. Things that sounded fun. Writing a toy database to
                understand how they work, implementing a small Redis clone. Now
                that feels stupid. Like I'd be wasting time on details the AI is
                supposed to handle. It bothers me that my reaction to these blog
                posts has changed so much. 3 years ago I would be bookmarking a
                blog post to try it out for myself that weekend. Now those 200
                lines of simple code feels only one sentence prompt away and
                thus waste of time.
              </p>
              <p><i>Am I alone in this?</i></p>
              <p>
                Does anyone else feel this pressure to skip understanding? Where
                thinking feels like you're not using the tool correctly? In the
                old days, I understood every problem I worked on. Now I feel
                pressure to skip understanding and just ship. I hate it.
              </p>
            </div>
          </section>
        </section>
        <section id="45571918">
          <h3>
            <a class="item" href="https://blog.mano.lol/posts/film/"
              >Reverse Engineering a 1979 Camera's Spec</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 18:45:16</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45571918"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45571814">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/programming-assembly-artificial-intelligence/"
              >Programming in Assembly Is Brutal, Beautiful, and Maybe Even a
              Path to Better AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 18:37:04</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45571814"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45570973">
          <h3>
            <a
              class="item"
              href="https://www.noahpinion.blog/p/americas-future-could-hinge-on-whether"
              >America's future could hinge on whether AI slightly
              disappoints</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 17:24:51</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45570973"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45570720">
          <h3>
            <a class="item" href="https://www.optery.com/careers/"
              >Optery (YC W22) – Hiring Tech Lead with Node.js Experience (U.S.
              &amp;amp; Latin America)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 17:03:11</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45570537">
          <h3>
            <a
              class="item"
              href="https://allvpv.org/haotic-journey-through-envvars/"
              >Environment variables are a legacy mess: Let's dive deep into
              them</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 16:49:15</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45570537"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45569966">
          <h3>
            <a
              class="item"
              href="https://www.thestack.technology/jeep-software-update-bricks-vehicles-leaves-owners-stranded/"
              >Jeep software update bricks vehicles, leaves owners stranded</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 16:08:32</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45569966"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45569371">
          <h3>
            <a
              class="item"
              href="https://www.makeuseof.com/androids-sideloading-limits-are-anti-consumer-move-yet/"
              >Android's sideloading limits are its most anti-consumer move</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 15:24:08</span
              ><span class="points-container"
                >Points: <span class="points">369</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45569371"
                  >Comments</a
                ><span class="descendants">: 210</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45569350">
          <h3>
            <a class="item" href="https://github.com/karpathy/nanochat"
              >NanoChat – The best ChatGPT that $100 can buy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 15:22:47</span
              ><span class="points-container"
                >Points: <span class="points">475</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45569350"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
            <div class="text">
              <a href="https://x.com/karpathy/status/1977755427569111362"
                >https://x.com/karpathy/status/1977755427569111362</a
              >
            </div>
          </section>
        </section>
        <section id="45568955">
          <h3>
            <a
              class="item"
              href="https://www.schneier.com/blog/archives/2025/10/ai-and-the-future-of-american-politics.html"
              >AI and the Future of American Politics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 14:51:51</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45568955"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45568767">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/10/13/4chan_ofcom_fine/"
              >Ofcom fines 4chan £20K and counting for violating UK's Online
              Safety Act</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 14:34:40</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45568767"
                  >Comments</a
                ><span class="descendants">: 161</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45568708">
          <h3>
            <a
              class="item"
              href="https://spillhistorie.no/2025/10/03/legends-of-the-games-industry-roger-dean/"
              >Roger Dean – His legendary artwork in gaming history
              (Psygnosis)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 14:29:06</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45568708"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45568613">
          <h3>
            <a class="item" href="https://herman.bearblog.dev/being-present/"
              >Smartphones and being present</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 14:20:33</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45568613"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45567770">
          <h3>
            <a class="item" href="https://sqliteonline.com/"
              >Show HN: SQLite Online – 11 years of solo development, 11K daily
              users</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 12:46:52</span
              ><span class="points-container"
                >Points: <span class="points">266</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45567770"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45567153">
          <h3>
            <a
              class="item"
              href="https://www.nobelprize.org/prizes/economic-sciences/2025/summary/"
              >The Sveriges Riksbank Prize in Economic Sciences in Memory of
              Alfred Nobel 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 11:23:20</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45567153"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566660">
          <h3>
            <a
              class="item"
              href="https://ednutting.com/2025/10/05/cheri-vs-oma.html"
              >Two Paths to Memory Safety: CHERI and OMA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 10:05:50</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566660"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566644">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2025/10/13/dutch-government-takes-control-of-chinese-owned-chipmaker-nexperia.html"
              >Dutch government takes control of Chinese-owned chipmaker
              Nexperia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 10:03:11</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566644"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
            <div class="text">
              Related:
              https://www.scmp.com/news/china/diplomacy/article/3328726/chinas-wingtech-says-dutch-court-freezes-control-nexperia-amid-national-security-dispute
            </div>
          </section>
        </section>
        <section id="45566638">
          <h3>
            <a
              class="item"
              href="https://tech.marksblogg.com/american-solar-farms.html"
              >American solar farms</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 10:02:40</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566638"
                  >Comments</a
                ><span class="descendants">: 198</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566441">
          <h3>
            <a class="item" href="https://www.mptcp.dev/">MPTCP for Linux</a>
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 09:25:45</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566441"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566139">
          <h3>
            <a
              class="item"
              href="https://chezsoi.org/lucas/blog/spotlight-on-pdfly.html"
              >Spotlight on pdfly, the Swiss Army knife for PDF files</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 08:36:33</span
              ><span class="points-container"
                >Points: <span class="points">276</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566139"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566123">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2510.03761"
              >LaTeXpOsEd: A Systematic Analysis of Information Leakage in
              Preprint Archives</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 08:33:34</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566123"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45549060">
          <h3>
            <a
              class="item"
              href="https://entropicthoughts.com/root-cause-analysis-youre-doing-it-wrong"
              >Root cause analysis? You're doing it wrong</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-11 @ 13:39:31</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45549060"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=45547079"
                >https://news.ycombinator.com/item?id=45547079</a
              >
            </div>
          </section>
        </section>
        <section id="45527840">
          <h3>
            <a
              class="item"
              href="https://marcobambini.substack.com/p/the-secret-life-of-a-local-first"
              >CRDT and SQLite: Local-First Value Synchronization</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-09 @ 14:01:27</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45527840"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45522266">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-10-device-based-optical-thermodynamics-route.html"
              >First device based on 'optical thermodynamics' can route light
              without switches</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-09 @ 00:54:00</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45522266"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45518033">
          <h3>
            <a class="item" href="https://github.com/rictic/jsonriver"
              >JSON River – Parse JSON incrementally as it streams in</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 16:38:43</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45518033"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45514213">
          <h3>
            <a
              class="item"
              href="https://www.geocod.io/code-and-coordinates/2025-10-02-from-millions-to-billions/"
              >From Millions to Billions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 09:56:25</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45514213"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45513313">
          <h3>
            <a class="item" href="https://clockss.org/"
              >Clockss: Digital preservation services run by academic publishers
              and libraries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 07:53:29</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45513313"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45507444">
          <h3>
            <a
              class="item"
              href="https://colincogle.name/blog/byo-weather-station/"
              >Putting a dumb weather station on the internet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 19:11:04</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45507444"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45504604">
          <h3>
            <a class="item" href="https://github.com/JulianSchroden/cine_remote"
              >Control your Canon Camera wirelessly</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 15:44:54</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45504604"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45490938">
          <h3>
            <a
              class="item"
              href="https://chollinger.com/blog/2025/10/more-homelab-things-ive-recently-learned/"
              >More random home lab things I've recently learned</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-06 @ 13:02:38</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45490938"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
