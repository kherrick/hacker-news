<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39886178">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39886178"
              >Ask HN: Is anybody getting value from AI Agents? How so?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 17:32:16</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39886178"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
            <div class="text">
              I saw a lot of initial buzz about the promise of agent based
              workflows and it seemed to be the obvious way to get LLMs to the
              edge of decision making and leverage many specialized models. It
              seems the chatter has died down but there are growing projects out
              there in the space. Before I invest the time to explore and work
              with tools I’d love some feedback from the community and if and
              how they are being used.
            </div>
          </section>
        </section>
        <section id="39885773">
          <h3>
            <a class="item" href="https://tonsky.me/blog/dst/"
              >Daylight Saving Time is a perfect test for UI designer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 16:43:01</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39885773"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39885764">
          <h3>
            <a
              class="item"
              href="https://lucky225.medium.com/its-time-to-stop-using-sms-for-anything-203c41361c80"
              >It's time to stop using SMS (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 16:42:04</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39885764"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39885545">
          <h3>
            <a
              class="item"
              href="https://github.com/JiaT75/oss-fuzz/commit/6403e93344476972e908ce17e8244f5c2b957dfd"
              >Update Jia Tan</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 16:19:14</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39885361">
          <h3>
            <a class="item" href="https://github.com/k4zmu2a/SpaceCadetPinball"
              >Tell HN: Windows 3D Pinball (Space Cadet)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 15:54:52</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39885361"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39885238">
          <h3>
            <a class="item" href="https://askthepilot.com/safest-year-2023/"
              >2023 was one of the safest years in commercial aviation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 15:41:10</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39885238"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39884570">
          <h3>
            <a
              class="item"
              href="https://www.davidrevoy.com/article1020/the-end-of-peppercarrot-and-my-next-project"
              >The end of Pepper&amp;amp;Carrot and my next project</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 14:25:41</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39884570"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39884287">
          <h3>
            <a
              class="item"
              href="https://www.glamour.com/story/katalin-kariko-biontech-women-of-year-2021"
              >Dr. Katalin Karikó (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 13:55:52</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39884287"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39884004">
          <h3>
            <a
              class="item"
              href="https://the-simulation-strategists.beehiiv.com/p/being-stuck"
              >The illusion of being stuck</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 13:21:50</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39884004"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39883949">
          <h3>
            <a class="item" href="https://huiwenn.github.io/feynman"
              >How to graduate your PhD when you have no hope</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 13:12:00</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39883949"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39883487">
          <h3>
            <a
              class="item"
              href="https://www.npmjs.com/package/svelte-zoomable-circles"
              >Zoomable Circles, a Svelte component for hierarchical data</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 12:02:33</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39883487"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39883328">
          <h3>
            <a
              class="item"
              href="https://github.com/letsblockit/letsblockit/discussions/663"
              >Shutting down the letsblock.it project and its official
              instance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 11:41:09</span
              ><span class="points-container"
                >Points: <span class="points">245</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39883328"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39882873">
          <h3>
            <a class="item" href="https://truncate.town/"
              >Show HN: Truncate, a word-based strategy game</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 09:58:26</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39882873"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
            <div class="text">
              <p>
                Truncate started as a pen and paper game between a friend and I,
                evolved into a handmade board game, and finally arrived at an
                online puzzle game. Like any good word game, there is of course
                a daily mode, shareable with the tried and true grid of emojis
              </p>
              <p>
                We've been playtesting it with friends and family for a few
                months, which has helped iron out the tutorials and gameplay,
                and we're finally happy with an MVP worth sharing!
              </p>
              <p>
                Technical deets: The client and server are written in Rust, with
                the visuals built using egui (as an experiment in Rust's GUI
                ecosystem).
              </p>
              <p>We'd love any feedback!</p>
            </div>
          </section>
        </section>
        <section id="39882018">
          <h3>
            <a class="item" href="https://susam.net/myrgb.html">Guess my RGB</a>
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 06:52:23</span
              ><span class="points-container"
                >Points: <span class="points">344</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39882018"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39881915">
          <h3>
            <a class="item" href="https://www.bunniestudios.com/blog/?p=7066"
              >A Kinematically Coupled, Nanometer-Resolution Piezo Focus
              Stage</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 06:24:56</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39881915"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39881758">
          <h3>
            <a class="item" href="https://ragdoll-studio.vercel.app/"
              >Show HN: Ragdoll Studio (fka Arthas.AI) is the FOSS alternative
              to character.ai</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 05:43:15</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39881758"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39881014">
          <h3>
            <a
              class="item"
              href="https://www.torringtontelegram.com/premium/stories/pacemaker-powered-by-light-eliminates-need-for-batteries-and-allows-the-heart-to-function-more,38416"
              >Pacemaker powered by light: new research</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 03:09:11</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39881014"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39880389">
          <h3>
            <a
              class="item"
              href="http://www.radicalcartography.net/index.html?human-hemisphere"
              >The Human Hemisphere (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-31 @ 01:10:45</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39880389"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39879250">
          <h3>
            <a
              class="item"
              href="https://hbr.org/1998/03/the-set-up-to-fail-syndrome"
              >The Set-Up-to-Fail Syndrome (1998)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-30 @ 22:21:44</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39879250"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39878635">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-03-tiny-orchid-pollinated-flies.html"
              >Tiny orchid flowers pollinated by tiny flies</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-30 @ 21:03:07</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39878635"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39877987">
          <h3>
            <a
              class="item"
              href="https://robhorning.substack.com/p/spacing-the-cans"
              >Spacing the Cans</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-30 @ 19:47:44</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39877987"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39877967">
          <h3>
            <a
              class="item"
              href="https://docs.google.com/document/d/1W_QK69BXMHUZXI5VdNH93_aLhTd9SQzNYhRLrh_-ZVA/edit?usp=sharing&amp;ref=thebrowser.com"
              >The Mongolian Meta</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-30 @ 19:45:38</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39877967"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39873793">
          <h3>
            <a
              class="item"
              href="https://bloop.ai/blog/evaluating-llms-on-cobol"
              >How well can LLMs write COBOL?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-30 @ 11:22:20</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39873793"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39873756">
          <h3>
            <a
              class="item"
              href="https://www.philipzucker.com/linear-algebra-of-types/"
              >Linear Algebra of Types (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-30 @ 11:14:25</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39873756"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39873605">
          <h3>
            <a
              class="item"
              href="https://www.kai-waehner.de/blog/2024/03/20/the-past-present-and-future-of-stream-processing/"
              >The Past, Present and Future of Stream Processing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-30 @ 10:49:00</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39873605"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39872406">
          <h3>
            <a
              class="item"
              href="https://hackaday.com/2024/03/27/the-roller-ship-was-not-an-effective-way-to-cross-the-high-seas/"
              >The roller ship was not an effective way to cross the high
              seas</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-30 @ 06:42:18</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39872406"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39863163">
          <h3>
            <a
              class="item"
              href="https://nautil.us/when-bacteria-are-beautiful-541411/"
              >When Bacteria Are Beautiful</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-29 @ 12:21:04</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39863163"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39863072">
          <h3>
            <a class="item" href="https://chriscummins.cc/2013/typesetting/"
              >Typesetting the LaTeX Way (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-29 @ 12:11:43</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39863072"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39861525">
          <h3>
            <a class="item" href="https://github.com/skx/lighthouse-of-doom"
              >Show HN: An adventure game in Z80 assembly for CP/M and ZX
              Spectrum</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-29 @ 07:36:45</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39861525"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39849219">
          <h3>
            <a class="item" href="https://lwn.net/Articles/964839/"
              >"Real" anonymous functions for Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-28 @ 09:46:22</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39849219"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
