<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39520776">
          <h3>
            <a
              class="item"
              href="https://old.reddit.com/r/webdev/comments/1b14bty/netlify_just_sent_me_a_104k_bill_for_a_simple/"
              >Netlify just sent me a $104K bill for a simple static site</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-27 @ 06:29:37</span
              ><span class="points-container"
                >Points: <span class="points">301</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39520776"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39520704">
          <h3>
            <a
              class="item"
              href="https://www.cbc.ca/news/canada/british-columbia/lawyer-chatgpt-fake-precedent-1.7126393"
              >B.C. lawyer reprimanded for citing fake cases invented by
              ChatGPT</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-27 @ 06:15:29</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39520704"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39520250">
          <h3>
            <a
              class="item"
              href="https://joanwestenberg.com/blog/the-creator-economy-cant-rely-on-patreon"
              >The creator economy can't rely on Patreon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-27 @ 04:45:30</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39520250"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39519894">
          <h3>
            <a class="item" href="https://rapier.rs/docs/"
              >Rapier is a set of 2D and 3D physics engines written in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-27 @ 03:39:02</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39519894"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39519145">
          <h3>
            <a
              class="item"
              href="https://www.mergeyourdata.com/blog/is-tableau-dead-the-future-of-tableau"
              >Is Tableau Dead?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-27 @ 01:54:18</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39519145"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39518791">
          <h3>
            <a
              class="item"
              href="https://netflixtechblog.com/announcing-bpftop-streamlining-ebpf-performance-optimization-6a727c1ae2e5?gi=223d75ac1771"
              >Bpftop: Streamlining eBPF performance optimization</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-27 @ 01:04:09</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39518791"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39518767">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2024/02/surprising-link-found-between-niacin-and-risk-of-heart-attack-and-stroke/"
              >Breakdown products of niacin may spur vascular inflammation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-27 @ 01:00:43</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39518767"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39518202">
          <h3>
            <a
              class="item"
              href="https://vrroom.github.io/blog/2024/02/23/comic-frame-segmentation.html"
              >Segmenting Comic book Frames</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 23:33:55</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39518202"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39518161">
          <h3>
            <a class="item" href="https://github.com/fearedbliss/Cactus"
              >Cactus â€“ A Modern Diablo II Version Switcher, Character Isolator,
              &amp;amp; Mod Manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 23:29:57</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39518161"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39517760">
          <h3>
            <a class="item" href="https://waxjs.net/"
              >Wax: The Word Processor for the Web</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 22:50:50</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39517760"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39517608">
          <h3>
            <a class="item" href="https://litestar.dev/"
              >Litestar â€“ powerful, flexible, and highly performant Python ASGI
              framework</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 22:38:07</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39517608"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39516927">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/world-us-canada-68407453"
              >New York medical school eliminates tuition after $1B gift</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 21:25:18</span
              ><span class="points-container"
                >Points: <span class="points">378</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39516927"
                  >Comments</a
                ><span class="descendants">: 228</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39516007">
          <h3>
            <a
              class="item"
              href="https://www.techdirt.com/2024/02/26/why-isnt-taxpayer-funded-u-s-broadband-mapping-data-owned-by-the-public/"
              >Why Isn't Taxpayer-Funded U.S. Broadband Mapping Data Owned by
              the Public?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 19:49:14</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39516007"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39515478">
          <h3>
            <a class="item" href="https://github.com/miciwan/PaintMixing"
              >On Light, Colors, Mixing Paints, and Numerical Optimization</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 19:02:19</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39515478"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39515007">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-02-phase-physicists-abelian-anyons-quantum.html"
              >A new phase of matter: Physicists show non-Abelian anyons in
              quantum processor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 18:28:05</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39515007"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39514778">
          <h3>
            <a
              class="item"
              href="https://chipsandcheese.com/2024/02/25/ryzen-z1s-tiny-igpu/"
              >Ryzen Z1's Tiny iGPU</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 18:11:02</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39514778"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39513054">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39513054"
              >Launch HN: Delve (YC W24) â€“ HIPAA compliance as a service</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:17:54</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39513054"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
            <div class="text">
              <a href="https://getdelve.com">https://getdelve.com</a>). We help
              companies get HIPAA compliant fast, with 1-click infrastructure,
              streamlined legal policies, and real-time monitoring. Hereâ€™s a
              quick demo:
              <a href="https://youtu.be/mQbb5mprsUA"
                >https://youtu.be/mQbb5mprsUA</a
              >.
              <p>
                HIPAA is a US federal law passed back in 1996 that sets
                standards for protecting sensitive health information. Hereâ€™s an
                article that breaks it down pretty simply:
                <a href="https://www.getdelve.com/blog/quick-guide-to-hipaa"
                  >https://www.getdelve.com/blog/quick-guide-to-hipaa</a
                >.
              </p>
              <p>
                Most companies that process health information in the US need to
                become HIPAA compliant, a process that can be long and
                expensive. At our previous health tech company, we spent 6 weeks
                (and tens of thousands of dollars) on getting compliant. We had
                to complete a lot of manual work, even after purchasing an
                industry-standard compliance solution, and felt like we were
                hitting checkboxes with little confidence in our security. We
                realized that many parts of the compliance process could be
                streamlined and simplified, which led us to building Delve.
              </p>
              <p>
                To get HIPAA compliant, you need (1) secure infrastructure, (2)
                legal policies, and (3) logging/monitoring. At Delve, we help
                startups with all three. We provide 1-click HIPAA compliant
                infrastructure deployed in your cloud and a CI/CD pipeline to
                update infrastructure from git push (think Heroku but HIPAA
                compliant). Then, we provide legal policies, paperwork, and a
                complete task list customized to your infrastructure setup.
                Finally, we have a real-time monitoring dashboard to help
                oversee compliance, track system activity, and review logs.
              </p>
              <p>
                One thing we noticed the first time we ever got HIPAA compliant
                was that we had to use many tools along the way. We bought an
                industry-standard HIPAA compliance solution, hired a HIPAA
                DevOps contractor to help configure secure infrastructure, and
                worked with lawyers to adapt the boilerplate legal policies that
                our compliance solution had provided. When building Delve, we
                worked hard to give you everything you need in one place,
                reducing the hassle and cost.
              </p>
              <p>
                We currently charge on an annual flat-fee basis. However, weâ€™re
                still exploring our pricing model (flat-fee vs. usage-based vs.
                combination of both), and if you have any thoughts to share on
                that, weâ€™d love to hear them.
              </p>
              <p>
                Weâ€™re really excited about making it easier to build in
                healthcare and removing compliance bottlenecks. Thrilled to
                share this with you and hear your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="39513051">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2024/03/04/what-a-major-solar-storm-could-do-to-our-planet"
              >What a major solar storm could do</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:17:36</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39513051"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39512896">
          <h3>
            <a
              class="item"
              href="https://tracebit.com/blog/2024/02/finding-aws-account-id-of-any-s3-bucket/"
              >How to find the AWS account ID of any S3 bucket</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:07:43</span
              ><span class="points-container"
                >Points: <span class="points">529</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39512896"
                  >Comments</a
                ><span class="descendants">: 195</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39512332">
          <h3>
            <a
              class="item"
              href="https://airminded.org/2024/02/20/a-bad-day-at-the-office/"
              >A bad day at the office</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 15:26:20</span
              ><span class="points-container"
                >Points: <span class="points">328</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39512332"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39511714">
          <h3>
            <a class="item" href="https://aboutideasnow.com/"
              >Show HN: AboutIdeasNow â€“ search /about, /ideas, /now pages of 7k+
              personal sites</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 14:39:40</span
              ><span class="points-container"
                >Points: <span class="points">469</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39511714"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
            <div class="text">
              <p>
                Itâ€™s hard to find interesting people to work with on your ideas.
              </p>
              <p>
                Our solution: index the /about, /ideas, /now pages of 1000s of
                personal websites. There are thousands of cool personal sites
                out there, with amazing ideas on them, but thereâ€™s nowhere to
                easily search through. So we built a simple site that indexes
                7k+ personal sites [0]. We were inspired by Derek Siversâ€™ Now
                page movement [1] and other IndieWeb directories [2], but we
                figured that it would be more useful if we:
              </p>
              <p>
                * Let you search directly across personal sites without having
                to visit them
              </p>
              <p>
                * Take the content from 3 specific pages, /about, /now and
                /ideas, to structure everything
              </p>
              <p>
                * Define /ideas pages as a space to articulate things you want
                to work on
              </p>
              <p>
                We hope thisâ€™ll be a cool place for people to find others to
                collaborate with - would love your feedback. If youâ€™d like your
                site to appear at the top, add it via the form and add a last
                updated date of today (any format). Itâ€™s completely open source
                (MIT) and open to contributions [3]!
              </p>
              <p>Peter &amp; Louis</p>
              <p>
                [0] gathered from: 1)
                <a href="https://nownownow.com">https://nownownow.com</a> and
                similar sites 2) checking all HN posts since 2020 with more than
                100 upvotes
              </p>
              <p>
                [1] <a href="https://nownownow.com">https://nownownow.com</a>
              </p>
              <p>
                [2] <a href="https://personalsit.es">https://personalsit.es</a>
              </p>
              <p>
                [3]
                <a href="https://github.com/lindylearn/aboutideasnow"
                  >https://github.com/lindylearn/aboutideasnow</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39511676">
          <h3>
            <a class="item" href="https://superset.apache.org/"
              >Apache Superset</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 14:36:35</span
              ><span class="points-container"
                >Points: <span class="points">550</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39511676"
                  >Comments</a
                ><span class="descendants">: 160</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39509983">
          <h3>
            <a
              class="item"
              href="https://fabiensanglard.net/Compile_Like_Its_1992/index.php"
              >Let's compile like it's 1992 (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 11:18:13</span
              ><span class="points-container"
                >Points: <span class="points">295</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39509983"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39509927">
          <h3>
            <a
              class="item"
              href="https://wingolog.org/archives/2024/02/26/on-the-impossibility-of-composing-finalizers-and-ffi"
              >On the impossibility of composing finalizers and FFI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 11:09:56</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39509927"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39508046">
          <h3>
            <a class="item" href="https://kk.org/thetechnium/you-are-not-late/"
              >You Are Not Late (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 05:54:31</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39508046"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39507820">
          <h3>
            <a class="item" href="https://multi.app/"
              >Multi â€“ Multiplayer Collaboration for macOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 04:54:45</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39507820"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39504323">
          <h3>
            <a
              class="item"
              href="https://www.sapiens.org/archaeology/neanderthal-art-paleolithic-archaeology/"
              >What's Behind the Evolution of Neanderthal Portraits</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-25 @ 20:17:06</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39504323"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39504304">
          <h3>
            <a class="item" href="https://voussoir.net/writing/notes_on_paper"
              >Notes on paper (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-25 @ 20:14:36</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39504304"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39500565">
          <h3>
            <a class="item" href="https://github.com/allmonday/pydantic-resolve"
              >Pydantic-resolve, a hierarchical solution for data fetching and
              processing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-25 @ 13:18:17</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39500565"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39498304">
          <h3>
            <a class="item" href="http://unmitigatedrisk.com/?p=771"
              >Tenement Farming and Cloud HSMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-25 @ 06:51:12</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39498304"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
