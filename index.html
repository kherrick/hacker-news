<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45016999">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/information-technology/2025/08/with-ai-chatbots-big-tech-is-moving-fast-and-breaking-people/"
              >With AI chatbots, Big Tech is moving fast and breaking people</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 18:15:41</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45016999"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45016720">
          <h3>
            <a
              class="item"
              href="https://chipsandcheese.com/p/googles-liquid-cooling-at-hot-chips"
              >Google's Liquid Cooling at Hot Chips 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 17:57:18</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45016720"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45016542">
          <h3>
            <a
              class="item"
              href="https://www.servethehome.com/ibms-power11-processor-architecture-at-hot-chips-2025/"
              >IBM's Power11 Processor Architecture at Hot Chips 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 17:43:13</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45016542"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45016517">
          <h3>
            <a
              class="item"
              href="https://www.post.japanpost.jp/int/information/2025/0825_01_en.html"
              >Temporary suspension of acceptance of mail to the United
              States</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 17:41:48</span
              ><span class="points-container"
                >Points: <span class="points">212</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45016517"
                  >Comments</a
                ><span class="descendants">: 196</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45015838">
          <h3>
            <a class="item" href="https://stagewise.io/"
              >Show HN: Stagewise – frontend coding agent for real codebases</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 16:47:11</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45015838"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <a href="https://stagewise.io">https://stagewise.io</a>), a
              frontend coding agent that inside your app’s dev mode and that
              makes changes in your local codebase.
              <p>
                We’re compatible with any framework and any component library.
                Think of it like a v0 of Lovable that works locally and with any
                existing codebase.
              </p>
              <p>
                You can spawn the agent into locally running web apps in dev
                mode with `npx stagewise` from the project root. The agent lets
                you then click on HTML Elements in your app, enter prompts like
                'increase the height here' and will implement the changes in
                your source code.
              </p>
              <p>
                Before stagewise, we were building a vertical SaaS for logistics
                from scratch and loved using prototyping tools like v0 or
                lovable to get to the first version. But when switching from v0/
                lovable to Cursor for local development, we felt like the
                frontend magic was gone. So, we decided to build stagewise to
                bring that same magic to local development.
              </p>
              <p>
                The first version of stagewise just forwarded a prompt with
                browser context to existing IDEs and agents (Cursor, Cline, ..)
                and went viral on X after we open sourced it. However, the APIs
                of existing coding agents were very limiting, so we figured that
                building our own agent would unlock the full potential of
                stagewise.
              </p>
              <p>
                Since our last Show HN (<a
                  href="https://news.ycombinator.com/item?id=44798553"
                  >https://news.ycombinator.com/item?id=44798553</a
                >), we launched a few very important features and changes: You
                now have a proprietary chat history with the agent, an undo
                button to revert changes, and we increased the amount of free
                credits AND reduced the pricing by 50%. We made a video about
                all these changes, showing you how stagewise works:
                <a
                  href="https://x.com/goetzejulian/status/1959835222712955140/video/1"
                  >https://x.com/goetzejulian/status/1959835222712955140/video/...</a
                >.
              </p>
              <p>
                So far, we've seen great adoption from non-technical users who
                wanted to continue building their lovable prototype locally. We
                personally use the agent almost daily to make changes to our
                landing page and to build the UI of new features on our console
                (<a href="https://console.stagewise.io"
                  >https://console.stagewise.io</a
                >).
              </p>
              <p>
                If you have an app running in dev mode, simply `cd` into the app
                directory and run `npx stagewise` - the agent should appear,
                ready to play with.
              </p>
              <p>We're very excited to hear your feedback!</p>
            </div>
          </section>
        </section>
        <section id="45015814">
          <h3>
            <a
              class="item"
              href="https://jadarma.github.io/blog/posts/2025/08/the-minipc-revolution/"
              >The MiniPC Revolution</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 16:45:19</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45015814"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45015532">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2025/08/25/nvidias-thor-t5000-robot-brain-chip.html"
              >Nvidia's new 'robot brain' goes on sale for $3,499</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 16:19:36</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45015532"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45015354">
          <h3>
            <a
              class="item"
              href="https://docs.fcc.gov/public/attachments/DOC-414073A1.txt"
              >FCC Bars over 1,200 Providers for Non-Compliance with Robocall
              Protections</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 16:06:24</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45015354"
                  >Comments</a
                ><span class="descendants">: 135</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45015230">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45015230"
              >Launch HN: April (YC S25) – Voice AI to manage your email and
              calendar</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 15:56:26</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45015230"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
            <div class="text">
              <a href="https://tryapril.com">https://tryapril.com</a>). We are
              building an AI executive assistant to help you get through emails
              and manage your schedule, hands-free while you drive to work, or
              whenever else you prefer voice interaction.
              <p>
                Here's a demo:
                <a href="https://www.youtube.com/watch?v=ISKwEyuQQEo#t=50"
                  >https://www.youtube.com/watch?v=ISKwEyuQQEo#t=50</a
                >
              </p>
              <p>
                ...and here's a second one showing more complex use cases:
                <a href="https://www.youtube.com/watch?v=P8APprJ3-eY"
                  >https://www.youtube.com/watch?v=P8APprJ3-eY</a
                >.
              </p>
              <p>
                While driving 40 mins daily from SF to Berkeley, my inbox would
                flood to 30+ emails and I'd have back-to-back meetings lined up.
                I'd reach work already behind, then spend another hour just
                catching up. We figured with recent advances in voice AI, we
                could solve this dead time problem and start doing things on the
                go.
              </p>
              <p>You can just speak to April and it can:</p>
              <p>- Summarize important emails and flag what needs attention</p>
              <p>
                - Send replies that I dictate (it handles the formatting and
                tone)
              </p>
              <p>- Review my calendar and reschedule meetings on the fly</p>
              <p>- Pull context from email threads for each meeting</p>
              <p>- Archive/organize emails into folders</p>
              <p>
                April is built using Deepgram for STT. Eleven Labs for TTS -
                built on top of LiveKit. We built our own MCP (Model Context
                Protocol) servers for Google integration, which handle auth,
                rate limiting, and maintain conversation context across email
                threads.
              </p>
              <p>
                The most interesting part has been optimizing for lowest latency
                given we are a tool call heavy application. We are also trying
                to optimize the interruption handling and turn taking to make it
                feel more natural.
              </p>
              <p>
                April is available on the AppStore (iPhone/iPad). You can try us
                out here
                <a
                  href="https://apps.apple.com/us/app/april-ai-executive-assistant/id6747432952"
                  >https://apps.apple.com/us/app/april-ai-executive-assistant/i...</a
                >
              </p>
              <p>
                Free 3-day trial, then $14.99/mo. We'd love feedback on: Which
                email /calendar workflows are most painful for you? What tools
                beyond Gmail &amp; Google calendar would be most valuable with a
                voice interface?
              </p>
              <p>
                We’ll be in the thread all day to answer any questions, share
                more technical details and learn what would make April most
                useful to you. Comment away!
              </p>
            </div>
          </section>
        </section>
        <section id="45014993">
          <h3>
            <a
              class="item"
              href="https://samwilkinson.io/posts/2025-08-24-mx-ergo-mods"
              >Building the mouse Logitech won't make</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 15:34:50</span
              ><span class="points-container"
                >Points: <span class="points">248</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45014993"
                  >Comments</a
                ><span class="descendants">: 184</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45014131">
          <h3>
            <a class="item" href="https://menial.co.uk/base/"
              >Show HN: Base, an SQLite database editor for macOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 14:17:38</span
              ><span class="points-container"
                >Points: <span class="points">336</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45014131"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
            <div class="text">
              <p>
                The goal of this app is to provide a comfortable native GUI for
                SQLite, without it turning into a massive IDE-style app.
              </p>
              <p>The coolest features are</p>
              <p>
                - That it can handle full altering of tables, which is quite
                finicky to do manually with SQLite.
              </p>
              <p>
                - It has a more detailed display of column constraints than most
                editors. Each constraint is shown as an icon if active, with
                full details available on clicking the icon.
              </p>
              <p>
                This update also adds support for attaching databases, which is
                a bit fiddly with macOS sandboxing.
              </p>
              <p>I'd love to hear any feedback or answer any questions.</p>
            </div>
          </section>
        </section>
        <section id="45013737">
          <h3>
            <a class="item" href="https://b.43z.one/2025-07-22/"
              >A Small Change to Improve Browsers for Keyboard Navigation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 13:40:11</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45013737"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45013154">
          <h3>
            <a
              class="item"
              href="https://www.makingsoftware.com/chapters/color-spaces-models-and-gamuts"
              >What Is a Color Space?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 12:33:13</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45013154"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45013131">
          <h3>
            <a
              class="item"
              href="https://www.ducktyped.org/p/an-illustrated-guide-to-oauth"
              >An Illustrated Guide to OAuth</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 12:29:48</span
              ><span class="points-container"
                >Points: <span class="points">235</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45013131"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45012942">
          <h3>
            <a
              class="item"
              href="https://austinvernon.site/blog/standardthermal.html"
              >Standard Thermal: Energy Storage 500x Cheaper Than Batteries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 12:04:45</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45012942"
                  >Comments</a
                ><span class="descendants">: 195</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45012548">
          <h3>
            <a class="item" href="https://github.com/ENDESGA/PEP"
              >Prediction-Encoded Pixels image format</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 11:05:38</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45012548"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45012430">
          <h3>
            <a class="item" href="https://github.com/bravenewxyz/agent-c"
              >Agent-C: a 4KB AI agent</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 10:43:50</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45012430"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45011096">
          <h3>
            <a
              class="item"
              href="https://guard.io/labs/scamlexity-we-put-agentic-ai-browsers-to-the-test-they-clicked-they-paid-they-failed"
              >Scamlexity: When agentic AI browsers get scammed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 07:03:56</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45011096"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45010876">
          <h3>
            <a class="item" href="https://jakub.kr/components/oklch-colors"
              >What are OKLCH colors?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 06:32:04</span
              ><span class="points-container"
                >Points: <span class="points">653</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45010876"
                  >Comments</a
                ><span class="descendants">: 148</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45010183">
          <h3>
            <a class="item" href="https://boston.conman.org/2025/08/21.1"
              >Ban me at the IP level if you don't like me</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 04:23:29</span
              ><span class="points-container"
                >Points: <span class="points">471</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45010183"
                  >Comments</a
                ><span class="descendants">: 334</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45010161">
          <h3>
            <a class="item" href="https://git-annex.branchable.com/"
              >Git-Annex</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-25 @ 04:18:56</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45010161"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45007992">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/science/2017/aug/24/mathematical-secrets-of-ancient-tablet-unlocked-after-nearly-a-century-of-study"
              >Mathematical secrets of ancient tablet unlocked after nearly a
              century of study (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 21:31:34</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45007992"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45005434">
          <h3>
            <a
              class="item"
              href="https://github.com/repomirrorhq/repomirror/blob/main/repomirror.md"
              >We put a coding agent in a while loop</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 16:18:53</span
              ><span class="points-container"
                >Points: <span class="points">378</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45005434"
                  >Comments</a
                ><span class="descendants">: 268</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45005016">
          <h3>
            <a class="item" href="https://chriskw.xyz/2025/08/24/Hyper-Wordle/"
              >Playing every game of Wordle simultaneously</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 15:34:26</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45005016"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45002776">
          <h3>
            <a class="item" href="https://small-js.org/Home/Home.html"
              >SmallJS: Smalltalk-80 that compiles to JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 09:29:02</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45002776"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45002182">
          <h3>
            <a class="item" href="https://samwho.dev/big-o/"
              >A visual introduction to big O notation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 07:39:36</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45002182"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45002048">
          <h3>
            <a
              class="item"
              href="https://www.dbreunig.com/2025/06/26/how-to-fix-your-context.html"
              >How to Fix Your Context</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 07:09:53</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45002048"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45001556">
          <h3>
            <a
              class="item"
              href="https://www.gojiberries.io/how-to-make-things-slower-so-they-go-faster-a-jitter-design-manual/"
              >How to Make Things Slower So They Go Faster</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 05:10:10</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45001556"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45001434">
          <h3>
            <a
              class="item"
              href="https://world.hey.com/dhh/omarchy-is-out-4666dd31"
              >Omarchy Is Out</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-24 @ 04:36:54</span
              ><span class="points-container"
                >Points: <span class="points">150</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45001434"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44990839">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/busy-beaver-hunters-reach-numbers-that-overwhelm-ordinary-math-20250822/"
              >Busy beaver hunters reach numbers that overwhelm ordinary math</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-22 @ 22:47:08</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44990839"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
