<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="36087464">
          <h3>
            <a
              class="item"
              href="https://codingnest.com/modern-sat-solvers-fast-neat-underused-part-1-of-n/"
              >Modern SAT solvers: fast, neat and underused (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 17:50:15</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36087464"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36087442">
          <h3>
            <a
              class="item"
              href="https://www.foldnfly.com/lounge/national-paper-airplane-day.php"
              >Paper Airplane Designs: A database of paper airplanes</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 17:48:12</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36087442"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36087330">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=ZMQbHMgK2rw"
              >Micromouse: The Fastest Maze-Solving Competition on Earth
              [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 17:39:20</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36087330"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36087252">
          <h3>
            <a
              class="item"
              href="https://there.oughta.be/a/bullet-time-video-booth"
              >There oughta be a bullet time video booth</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 17:33:20</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36087252"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36087007">
          <h3>
            <a class="item" href="https://www.qt.io/blog/qt-5.15-support-ends"
              >Qt 5.15 Standard Support for Legacy License Holders Ends Today</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 17:15:41</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36087007"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36086858">
          <h3>
            <a
              class="item"
              href="https://www.dig.security/post/gcp-cloudsql-vulnerability-leads-to-internal-container-access-and-data-exposure"
              >GCP CloudSQL Vulnerability Leads to Internal Container Access and
              Data Exposure</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 17:04:52</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36086858"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36086537">
          <h3>
            <a
              class="item"
              href="https://krebsonsecurity.com/2023/05/phishing-domains-tanked-after-meta-sued-freenom/"
              >Phishing Domains Tanked After Meta Sued Freenom</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 16:42:58</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36086537"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36086099">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-023-01732-4"
              >Gravitational-wave detector LIGO is back</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 16:15:58</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36086099"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36086023">
          <h3>
            <a
              class="item"
              href="https://earthquake.usgs.gov/earthquakes/map/?currentFeatureId=us7000k46f&amp;extent=24.36711,-234.4043&amp;extent=46.46813,-203.20313&amp;magnitude=all&amp;listOnlyShown=true&amp;timeZone=utc&amp;settings=true"
              >Magnitude 6.1 earthquake near the east coast of Honshu, Japan</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 16:09:38</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36086023"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36085936">
          <h3>
            <a class="item" href="https://voyager.minedojo.org/"
              >Voyager: An Open-Ended Embodied Agent with LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 16:02:21</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36085936"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36085835">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2023/05/a-decade-after-it-mattered-windows-xps-activation-algorithm-is-cracked/"
              >Green hills forever: Windows XP activation algorithm cracked
              after 21 years</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 15:55:54</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36085835"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36085642">
          <h3>
            <a
              class="item"
              href="https://www.bleepingcomputer.com/news/security/mozilla-stops-firefox-fullscreen-vpn-ads-after-user-outrage/"
              >Mozilla stops Firefox fullscreen VPN ads after user outrage</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 15:43:44</span
              ><span class="points-container"
                >Points: <span class="points">208</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36085642"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36085538">
          <h3>
            <a class="item" href="https://github.com/kyegomez/tree-of-thoughts"
              >Tree of Thoughts</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 15:34:59</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36085538"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36084503">
          <h3>
            <a class="item" href="https://www.fretboardfly.com"
              >Show HN: I created a game to memorize the fretboard</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 14:18:58</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36084503"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
            <div class="text">
              <p>“Uhh…Where’s the C# here?”</p>
              <p>“Where’s the flat-3rd of this root on the 4th string?”</p>
              <p>
                “Sure would be nice to know the closest min7 triad shape to play
                over here..”
              </p>
              <p>
                I tried memorizing the fretboard the obvious way but it
                extreeemly boring for me. Being a developer, I decided to turn
                it into a game. I'd love for you guys to try it out and let me
                know what you think: It's at [www.fretboardfly.com](<a
                  href="https://www.fretboardfly.com"
                  >https://www.fretboardfly.com</a
                >)
              </p>
              <p>
                I've only built the first module right now which is for note
                memorization but there's been enough interest that I'm planning
                on building more modules. Please let me know if you like it,
                what you'd change about it and what other modules you'd like to
                see in future.
              </p>
              <p>
                The stack is Vue 3/Nuxt 3/Firebase/Firestore/Tailwind deployed
                on Vercel. Happy to field questions on the tech side of things
                as well
              </p>
            </div>
          </section>
        </section>
        <section id="36084483">
          <h3>
            <a
              class="item"
              href="https://www.trueorbetter.com/2018/05/how-lemon-was-invented.html"
              >How the lemon was invented (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 14:17:23</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36084483"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36084450">
          <h3>
            <a class="item" href="https://deno.com/blog/node-builtins-on-deploy"
              >Node.js built-ins on Deno Deploy</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 14:14:22</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36084450"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36084076">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/news/our-local-correspondents/what-is-a-weed"
              >What Is a Weed?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 13:47:55</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36084076"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36083620">
          <h3>
            <a
              class="item"
              href="https://twitter.com/PGeldsetzer1/status/1661776663074738176"
              >Evidence that the shingles vaccine prevents a good chunk of
              dementia cases</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 13:11:50</span
              ><span class="points-container"
                >Points: <span class="points">384</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36083620"
                  >Comments</a
                ><span class="descendants">: 161</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36083306">
          <h3>
            <a
              class="item"
              href="https://www.texasmonthly.com/travel/want-to-buy-a-west-texas-ghost-town-nows-your-chance/"
              >Want to Buy a West Texas Ghost Town? Now’s Your Chance</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 12:44:22</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36083306"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36083155">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=isyO5tQfeqM"
              >A Technical Film Report on Project Deep Ops (1972) [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 12:26:44</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36083155"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36083093">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/articles/how-ai-is-catapulting-nvidia-toward-the-1-trillion-club-14f42380"
              >AI Is Catapulting Nvidia Toward the $1 Trillion Club</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 12:16:47</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36083093"
                  >Comments</a
                ><span class="descendants">: 132</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36082650">
          <h3>
            <a
              class="item"
              href="https://dailynous.com/2023/05/25/am-i-the-unethical-one-a-philosophy-professor-his-cheating-students/"
              >Am I the Unethical One?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 11:17:11</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36082650"
                  >Comments</a
                ><span class="descendants">: 151</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36082308">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/world/europe/killer-whales-wreck-boat-latest-attack-off-spain-2023-05-25/"
              >Killer whales wreck boat in latest attack off Spain</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 10:27:50</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36082308"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36082180">
          <h3>
            <a
              class="item"
              href="https://utcc.utoronto.ca/~cks/space/blog/programming/OnHTMLViaStringTemplates"
              >That people produce HTML with string templates is telling us
              something</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 10:07:19</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36082180"
                  >Comments</a
                ><span class="descendants">: 240</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36081655">
          <h3>
            <a
              class="item"
              href="https://newsletter.pragmaticengineer.com/p/layoffs-push-down-scores-on-glassdoor"
              >Layoffs push down scores on Glassdoor – how companies respond</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 08:48:20</span
              ><span class="points-container"
                >Points: <span class="points">320</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36081655"
                  >Comments</a
                ><span class="descendants">: 209</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36079311">
          <h3>
            <a
              class="item"
              href="https://theclimatebrink.substack.com/p/emissions-are-no-longer-following"
              >Emissions are no longer following the worst case scenario</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-26 @ 03:08:23</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36079311"
                  >Comments</a
                ><span class="descendants">: 225</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36075489">
          <h3>
            <a
              class="item"
              href="https://blogs.bl.uk/digitisedmanuscripts/2014/06/the-burden-of-writing-scribes-in-medieval-manuscripts.html"
              >The Burden of Writing: Scribes in Medieval Manuscripts (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 20:07:46</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36075489"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36068682">
          <h3>
            <a class="item" href="https://ogris.de/howtos/freebsd-jails.html"
              >Jails on FreeBSD</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 09:37:40</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36068682"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36061376">
          <h3>
            <a class="item" href="https://ericsink.com/native_aot/overview.html"
              >Native AOT Overview</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 17:25:58</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36061376"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36057997">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=36057997"
              >Ask HN: How do you approach a problem you are not sure has a
              solution?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 13:46:42</span
              ><span class="points-container"
                >Points: <span class="points">294</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36057997"
                  >Comments</a
                ><span class="descendants">: 264</span></span
              >
            </h4>
            <div class="text">
              How do you battle against (self-inflicted) anxiety/paralysis when
              you are attempting to tackle a problem you are not sure has a
              solution? I have a very open mind to solving problems but it can
              make it difficult to come to conclusions. Anyone know what I'm
              talking about here? Have any advice?
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
