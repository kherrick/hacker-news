<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39213421">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39213421"
              >PhotoRoom (YC S20) Is Hiring an API Designer in Paris (Node,
              Rust)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-01 @ 07:00:46</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                TL;DR; We're looking for a seasoned engineer who has experience
                building easy-to-use public web APIs with Node.js
              </p>
              <p>
                Our goal: allow anyone to edit images by typing an URL. Think of
                it as PhotoRoom-in-a-box, where the interface is an URL
              </p>
              <p>
                For instance, you can call:
                <a
                  href="https://beta-sdk.photoroom.com/v2/edit?background.color=blue&amp;outputSize=1000x1000&amp;padding=0.1&amp;imageUrl=IMAGE_URL_GOES_HERE"
                  >https://beta-sdk.photoroom.com/v2/edit?background.color=blue...</a
                >
                and get your edited image back. (here it's missing an API key)
              </p>
              <p>
                The first version is live, but there's so much we want to build:
                text editing, new AI capabilities ("turn that t-shirt from red
                to blue") and so much more
              </p>
              <p>
                About you Our main requirement is that you have a track record
                of to use and scalable. Good: Stripe API. Bad: eBay xml API
              </p>
              <p>
                Our stack Node.js deployed on a serverless stack. Ideally you'd
                have a lot of experience in Node.js/Typescript but that's not a
                strong requirement if you can adapt to best practices quickly.
                We're sharing a lot of the rendering code with our apps (in
                Rust, C). While you won't have to dig into that part of the
                stack you'll be able to if you're curious
              </p>
              <p>
                You'll find more details in the offer here:
                <a
                  href="https://jobs.lever.co/photoroom/29260c53-a84f-4d4f-a322-3bdc8540cdb7?lever-origin=applied&amp;lever-source%5B%5D=yc"
                  >https://jobs.lever.co/photoroom/29260c53-a84f-4d4f-a322-3bdc...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39213180">
          <h3>
            <a
              class="item"
              href="https://www.electronicsweekly.com/news/business/eu-chip-goal-totally-unrealistic-2024-01/"
              >EU chip goal 'unrealistic' says ASML CEO</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-01 @ 06:11:16</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39213180"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39213150">
          <h3>
            <a
              class="item"
              href="https://www.yahoo.com/entertainment/marlon-brando-was-a-secret-tech-geek-and-photoshop-124061824672.html"
              >Marlon Brando Was a Secret Tech Geek and Photoshop Ace</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-01 @ 06:04:41</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39213150"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39212905">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2205.13147"
              >Matryoshka Representation Learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-01 @ 05:12:32</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39212905"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39212813">
          <h3>
            <a
              class="item"
              href="https://journals.sagepub.com/doi/full/10.1177/0269881120959637"
              >Pivotal Mental States</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-01 @ 04:49:47</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39212813"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39211857">
          <h3>
            <a class="item" href="https://github.com/mkjt2/lockbox"
              >Show HN: Lockbox: forward proxy for making third party API
              calls</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-01 @ 01:26:55</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39211857"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39211263">
          <h3>
            <a class="item" href="https://github.com/dkogan/gnuplotlib"
              >Gnuplotlib: Non-Painful Plotting for NumPy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-01 @ 00:02:38</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39211263"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39210507">
          <h3>
            <a class="item" href="https://alexwlchan.net/2024/big-pdf/"
              >Making a PDF that's larger than Germany</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 22:47:47</span
              ><span class="points-container"
                >Points: <span class="points">378</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39210507"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39210458">
          <h3>
            <a
              class="item"
              href="https://blog.research.google/2024/01/mobilediffusion-rapid-text-to-image.html"
              >MobileDiffusion: Rapid text-to-image generation on-device</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 22:42:49</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39210458"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39210436">
          <h3>
            <a class="item" href="http://binvis.io/#/"
              >Visual Analysis of Binary Files</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 22:39:35</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39210436"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39209814">
          <h3>
            <a class="item" href="https://deepseekcoder.github.io/"
              >DeepSeek Coder: Let the Code Write Itself</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 21:43:40</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39209814"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39209687">
          <h3>
            <a class="item" href="http://mewo2.com/notes/terrain/"
              >Generating Fantasy Maps (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 21:31:44</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39209687"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39208673">
          <h3>
            <a
              class="item"
              href="https://neimanslab.org/2024-01-31/why-i-moved-my-blog-ipfs-to-server.html"
              >I moved my blog from IPFS to a server</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 20:07:02</span
              ><span class="points-container"
                >Points: <span class="points">219</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39208673"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39208451">
          <h3>
            <a class="item" href="https://2mb.codes/~cmb/ollama-bot/"
              >Show HN: Some blind hackers are bridging IRC to LMMs running
              locally</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 19:50:59</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39208451"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39207872">
          <h3>
            <a class="item" href="https://www.arctic81.com"
              >Arctic Adventure: A Lost 1981 TRS-80 Adventure Game</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 19:00:45</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39207872"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39207291">
          <h3>
            <a
              class="item"
              href="https://openai.com/research/building-an-early-warning-system-for-llm-aided-biological-threat-creation"
              >Building an early warning system for LLM-aided biological threat
              creation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 18:15:26</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39207291"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39206966">
          <h3>
            <a class="item" href="https://github.com/kando-menu/kando"
              >Kando: The Cross-Platform Pie Menu</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 17:51:54</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39206966"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39206731">
          <h3>
            <a
              class="item"
              href="https://interviewing.io/blog/how-hard-is-it-to-cheat-with-chatgpt-in-technical-interviews"
              >Testing how hard it is to cheat with ChatGPT in interviews</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 17:35:09</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39206731"
                  >Comments</a
                ><span class="descendants">: 324</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39206529">
          <h3>
            <a class="item" href="https://www.smspower.org/SegaAI/Index"
              >Sega AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 17:22:48</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39206529"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39206375">
          <h3>
            <a
              class="item"
              href="https://llava-vl.github.io/blog/2024-01-30-llava-1-6/"
              >LLaVA-1.6: Improved reasoning, OCR, and world knowledge</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 17:13:05</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39206375"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39205784">
          <h3>
            <a
              class="item"
              href="https://blog.trailofbits.com/2024/01/31/introducing-differ-a-new-tool-for-testing-and-validating-transformed-programs/"
              >Differ: Tool for testing and validating transformed programs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 16:33:50</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39205784"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39205725">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39205725"
              >Launch HN: Encord (YC W21) – Unit testing for computer vision
              models</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 16:29:12</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39205725"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
            <div class="text">
              <a href="https://encord.com/active/">https://encord.com/active/</a
              >) [1].
              <p>
                Imagine you're building a device that needs to see and
                understand the world around it – like a self-driving car or a
                robot that sorts recycling. To do this, you need a vision model
                that processes the real world as a sequence of frames and makes
                decisions based on what it sees.
              </p>
              <p>
                Bringing such models to production is hard. You can’t just train
                it once and then it works—you need to constantly test and
                improve it to make sure it understands the world correctly. For
                example, you don't want a self-driving car to confuse a stop
                sign with a billboard, or classify a pedestrian as an unknown
                object [2].
              </p>
              <p>
                This is where Encord Active comes in. It's a toolkit that helps
                developers “unit test”, understand, and debug their vision
                models. We put “unit test” in quotes because while it isn’t
                classic software unit testing, the idea is similar: to see which
                <i>parts</i> of your model are working well and which aren't.
                Here’s a short video that shows the tool:
                <a href="https://youtu.be/CD7_lw0PZNY?si=MngLE7PwH3s2_VTK"
                  >https://youtu.be/CD7_lw0PZNY?si=MngLE7PwH3s2_VTK</a
                >
                [3]
              </p>
              <p>
                For instance, if you're working on a self-driving car, Encord
                Active can help you figure out why the car is confusing stop
                signs with billboards. It lets you dive into the data the model
                has seen and understand what's going wrong. Maybe the model
                hasn't seen enough stop signs at night, or maybe it gets
                confused when the sign is partially blocked by a tree.
              </p>
              <p>
                Having extensive unit test coverage won’t guarantee that your
                software (or vision model) is correct, but it helps a lot, and
                is awesome at catching regressions (i.e. things that work at one
                point and then stop working later). For example, consider
                retraining your model with a 25% larger dataset, including
                examples from a new US state characterized by distinctly
                different weather conditions (e.g., California vs. Vermont).
                Intuitively, one might think ‘the more signs, the merrier.’
                However, adding new signs can confuse the model, perhaps it’s
                suddenly biased to rely mostly on surroundings because signs are
                covered in snow. This can cause the model to regress and fall
                below your desired performance threshold (e.g., 85% accuracy)
                for existing test data.
              </p>
              <p>
                These issues are not easily solvable by making changes to the
                model architecture or hyperparameter tuning (e.g., adjusting
                learning rates), especially as the types of problems you are
                trying to solve by the model get more complex. Rather, they are
                solved by training or fine-tuning the model on more of "the
                right" data.
              </p>
              <p>
                Contrary to purely embeddings-based data exploration and model
                analytics/evaluation tools that help folks discover
                surface-level problems without offering suggestions for solving
                them, Encord Active will give concrete recommendations and
                actionable steps to solve the identified model and data errors
                by automatically analyzing your model performance. Specifically,
                the system detects the weakest and strongest aspects of the data
                distribution, serving as a guide for where to focus for
                improving subsequent iterations of your model training. The
                analysis encompasses various factors: the ‘qualities’ of the
                images (size, brightness, blurriness), the geometric
                characteristics of objects and model predictions (aspect ratio,
                outliers), as well as metadata and class distribution. It
                correlates these factors with chosen model performance metrics,
                surfacing low performing subsets for attention, providing you
                with actionable next steps. One of our early customers, for
                example, reduced their dataset size by 35% but increased their
                model’s accuracy (in this case, the mAP score) by 20% [4], which
                is a huge improvement in this domain). This is counterintuitive
                to most people as the thinking is generally “more data = better
                models”.
              </p>
              <p>
                If any of these experiences resonate with you, we are eager for
                you to try out the product and hear your opinions and feedback.
                We are available to answer any questions you may have!
              </p>
              <p>
                [1]
                <a href="https://encord.com/active/"
                  >https://encord.com/active/</a
                >
              </p>
              <p>
                [2]
                <a href="https://en.wikipedia.org/wiki/Death_of_Elaine_Herzberg"
                  >https://en.wikipedia.org/wiki/Death_of_Elaine_Herzberg</a
                >
              </p>
              <p>
                [3]
                <a href="https://youtu.be/CD7_lw0PZNY?si=MngLE7PwH3s2_VTK"
                  >https://youtu.be/CD7_lw0PZNY?si=MngLE7PwH3s2_VTK</a
                >
              </p>
              <p>
                [4]
                <a href="https://encord.com/customers/automotus-customer-story/"
                  >https://encord.com/customers/automotus-customer-story/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39205020">
          <h3>
            <a class="item" href="https://neal.fun/infinite-craft/"
              >Infinite Craft</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 15:34:28</span
              ><span class="points-container"
                >Points: <span class="points">867</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39205020"
                  >Comments</a
                ><span class="descendants">: 405</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39203633">
          <h3>
            <a
              class="item"
              href="http://www.semdesigns.com/Company/Publications/TestCoverage.pdf"
              >Code Coverage for Arbitrary Languages Made Easy [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 13:39:36</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39203633"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39203582">
          <h3>
            <a
              class="item"
              href="https://dave.cheney.net/2019/05/07/prefer-table-driven-tests"
              >Prefer table driven tests (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 13:35:08</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39203582"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39203404">
          <h3>
            <a class="item" href="http://tunes.org/~iepos/joy.html"
              >The Theory of Concatenative Combinators (2007)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 13:19:49</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39203404"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39201684">
          <h3>
            <a
              class="item"
              href="https://hypercritical.co/2024/01/30/spatial-computing"
              >Spatial Computing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 09:14:32</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39201684"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39187884">
          <h3>
            <a
              class="item"
              href="https://www.sciencenews.org/article/quasicrystal-einstein-tile-hat-shape"
              >A predicted quasicrystal is based on the 'einstein' tile known as
              the hat</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 09:03:37</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39187884"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39173915">
          <h3>
            <a
              class="item"
              href="https://glennf.medium.com/how-we-crowdfunded-750-000-for-a-giant-book-about-keyboard-history-c30e24c4022e"
              >How We Crowdfunded $750k for a Giant Book about Keyboard
              History</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-29 @ 08:06:14</span
              ><span class="points-container"
                >Points: <span class="points">146</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39173915"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39173665">
          <h3>
            <a
              class="item"
              href="https://slack.engineering/executing-cron-scripts-reliably-at-scale/"
              >Executing Cron Scripts Reliably at Scale</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-29 @ 07:21:58</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39173665"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
