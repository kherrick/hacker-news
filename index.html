<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44729865">
          <h3>
            <a
              class="item"
              href="https://earthquake.usgs.gov/earthquakes/eventpage/us6000qw60/executive"
              >M8.7 earthquake in Western Pacific, tsunami warning issued</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-30 @ 00:38:25</span
              ><span class="points-container"
                >Points: <span class="points">548</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44729865"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44729302">
          <h3>
            <a
              class="item"
              href="https://wirelesspi.com/two-birds-with-one-tone-i-q-signals-and-fourier-transform-part-1/"
              >Two Birds with One Tone: I/Q Signals and Fourier Transform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 23:09:04</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44729302"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44728833">
          <h3>
            <a
              class="item"
              href="https://www.lorenstew.art/blog/bookmarkable-by-design-url-state-htmx/"
              >URL-Driven State in HTMX</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 22:09:48</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44728833"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44728513">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/codecrafters/jobs/7ATipKJ-1st-marketing-hire"
              >CodeCrafters (YC S22) is hiring first Marketing Person</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 21:34:28</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44728188">
          <h3>
            <a
              class="item"
              href="https://JapaneseNostalgicCar.com/rip-shunsaku-tamiya-plastic-model-kits/"
              >RIP Shunsaku Tamiya, the man who made plastic model kits a global
              obsession</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 20:57:47</span
              ><span class="points-container"
                >Points: <span class="points">208</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44728188"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727788">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2507.12856"
              >Supervised fine tuning on curated data is reinforcement
              learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 20:18:23</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727788"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727653">
          <h3>
            <a
              class="item"
              href="https://help.dropbox.com/en-us/installs/dropbox-passwords-discontinuation"
              >Dropbox Passwords discontinuation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 20:03:29</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727653"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727420">
          <h3>
            <a
              class="item"
              href="https://news.uoguelph.ca/2025/07/more-honey-bees-dying-even-as-antibiotic-use-halves/"
              >More honey bees dying, even as antibiotic use halves</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 19:37:05</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727420"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727298">
          <h3>
            <a class="item" href="https://maruos.com/"
              >Maru OS â€“ Use your phone as your PC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 19:24:40</span
              ><span class="points-container"
                >Points: <span class="points">229</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727298"
                  >Comments</a
                ><span class="descendants">: 151</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44727191">
          <h3>
            <a
              class="item"
              href="https://hms.harvard.edu/news/how-brain-increases-blood-flow-demand"
              >How the brain increases blood flow on demand</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 19:13:32</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44727191"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44726731">
          <h3>
            <a
              class="item"
              href="https://neilzone.co.uk/2023/08/a-month-using-xmpp-using-snikket-for-every-call-and-chat/"
              >A month using XMPP (using Snikket) for every call and chat
              (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 18:24:23</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726731"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44726280">
          <h3>
            <a class="item" href="https://github.com/jarulraj/periodic-table"
              >Elements of System Design</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 17:44:58</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726280"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44725966">
          <h3>
            <a class="item" href="https://www.acm.org/publications/openaccess"
              >ACM Transitions to Full Open Access</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 17:17:58</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44725966"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44725764">
          <h3>
            <a class="item" href="https://openai.com/index/chatgpt-study-mode/"
              >Study mode</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 17:01:14</span
              ><span class="points-container"
                >Points: <span class="points">816</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44725764"
                  >Comments</a
                ><span class="descendants">: 563</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44725757">
          <h3>
            <a
              class="item"
              href="http://a64.in/posts/learning-basic-electronics-by-building-fireflies/"
              >Learning basic electronics by building fireflies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 17:00:43</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44725757"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44725306">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44725306"
              >Launch HN: Hyprnote (YC S25) â€“ An open-source AI meeting
              notetaker</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 16:24:08</span
              ><span class="points-container"
                >Points: <span class="points">175</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44725306"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
            <div class="text">
              <a href="https://hyprnote.com">https://hyprnote.com</a>). We're
              building an open-source, privacy-first AI note-taking app that
              runs fully on-device. Think of it as an open-source Granola. No
              Zoom bots, no cloud APIs, no data ever leaves your machine.
              <p>
                Source code:
                <a href="https://github.com/fastrepl/hyprnote"
                  >https://github.com/fastrepl/hyprnote</a
                >
                Demo video:
                <a href="https://hyprnote.com/demo"
                  >https://hyprnote.com/demo</a
                >
              </p>
              <p>
                We built Hyprnote because some of our friends told us that their
                companies banned certain meeting notetakers due to data
                concerns, or they simply felt uncomfortable sending data to
                unknown servers. So they went back to manual note-taking -
                losing focus during meetings and wasting time afterward.
              </p>
              <p>
                We asked: could we build something just as useful, but
                completely local?
              </p>
              <p>
                Hyprnote is a desktop app that transcribes and summarizes
                meetings on-device. It captures both your mic input and system
                audio, so you don't need to invite bots. It generates a summary
                based on the notes you take. Everything runs on local AI models
                by default, using Whisper and HyprLLM. HyprLLM is our
                proof-of-concept model fine-tuned from Qwen3 1.7B. We learned
                that summarizing meetings is a very nuanced task and that a
                model's raw intelligence (or weight) doesn't matter THAT much.
                We'll release more details on evaluation and training once we
                finish the 2nd iteration of the model (still not that good we
                can make it a lot better).
              </p>
              <p>
                Whisper inference:
                <a
                  href="https://github.com/fastrepl/hyprnote/blob/main/crates/whisper-local/src/model.rs"
                  >https://github.com/fastrepl/hyprnote/blob/main/crates/whispe...</a
                >
              </p>
              <p>
                AEC inference:
                <a
                  href="https://github.com/fastrepl/hyprnote/blob/main/crates/aec/src/lib.rs"
                  >https://github.com/fastrepl/hyprnote/blob/main/crates/aec/sr...</a
                >
              </p>
              <p>
                LLM inference:
                <a
                  href="https://github.com/fastrepl/hyprnote/blob/main/crates/llama/src/lib.rs"
                  >https://github.com/fastrepl/hyprnote/blob/main/crates/llama/...</a
                >
              </p>
              <p>
                We also learned that for some folks, having full data
                controllability was as important as privacy. So we support
                custom endpoints, allowing users to bring in their company's
                internal LLM. For teams that need integrations, collaboration,
                or admin controls, we're working on an optional server component
                that can be self-hosted. Lastly, we're exploring ways to make
                Hyprnote work like VSCode, so you can install extensions and
                build your own workflows around your meetings.
              </p>
              <p>
                We believe privacy-first tools, powered by local models, are
                going to unlock the next wave of real-world AI apps.
              </p>
              <p>We're here and looking forward to your comments!</p>
            </div>
          </section>
        </section>
        <section id="44725202">
          <h3>
            <a class="item" href="https://www.kathaaverse.com/"
              >Show HN: I built an AI that turns any book into a text adventure
              game</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 16:17:14</span
              ><span class="points-container"
                >Points: <span class="points">220</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44725202"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
            <div class="text">
              <p>Note: Work in progress. Suggestions are welcome.</p>
            </div>
          </section>
        </section>
        <section id="44724238">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/scienceadviser-cats-confuse-ai"
              >Irrelevant facts about cats added to math problems increase LLM
              errors by 300%</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 14:59:18</span
              ><span class="points-container"
                >Points: <span class="points">361</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44724238"
                  >Comments</a
                ><span class="descendants">: 173</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44724068">
          <h3>
            <a class="item" href="https://observablehq.com/notebook-kit/"
              >Observable Notebooks 2.0 Technology Preview</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 14:44:00</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44724068"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44723818">
          <h3>
            <a
              class="item"
              href="https://biffweb.com/p/structuring-large-codebases/"
              >Structuring large Clojure codebases with Biff</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 14:26:47</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44723818"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44723461">
          <h3>
            <a class="item" href="https://candid9.com/phone-camera/"
              >iPhone 16 cameras vs. traditional digital cameras</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 13:58:06</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44723461"
                  >Comments</a
                ><span class="descendants">: 235</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44723316">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2025/Jul/29/space-invaders/"
              >My 2.5 year old laptop can write Space Invaders in JavaScript now
              (GLM-4.5 Air)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 13:45:07</span
              ><span class="points-container"
                >Points: <span class="points">489</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44723316"
                  >Comments</a
                ><span class="descendants">: 327</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44721791">
          <h3>
            <a
              class="item"
              href="https://github.com/Danau5tin/terminal-bench-rl"
              >Show HN: Terminal-Bench-RL: Training long-horizon terminal agents
              with RL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 11:12:03</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44721791"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>*What I did*:</p>
              <p>- Created a Claude Code-inspired agent (system msg + tools)</p>
              <p>
                - Built Docker-isolated GRPO training where each rollout gets
                its own container
              </p>
              <p>
                - Developed a multi-agent synthetic data pipeline to generate
                &amp; validate training data with Opus-4
              </p>
              <p>
                - Implemented a hybrid reward signal of unit test verifiers
                &amp; a behavioural LLM judge.
              </p>
              <p>*Key results*:</p>
              <p>
                - My untrained Qwen3-32B agent achieved 13.75% on Terminal-Bench
                (#19, beats Stanford's Qwen3-235B MoE)
              </p>
              <p>
                - I tested training to work stably on 32x H100s distributed
                across 4 bare metal nodes
              </p>
              <p>
                - I created a mini-eval framework for LLM-judge performance.
                Sonnet-4 won.
              </p>
              <p>
                - ~Â£30-50k needed for full training run of 1000 epochs (I could
                only afford testing )
              </p>
              <p>*Technical details*:</p>
              <p>
                - The synthetic dataset ranges from easy to extremely hard
                tasks. An example hard task's prompt:
              </p>
              <p>
                "I found this mystery program at `/app/program` and I'm
                completely stumped. It's a stripped binary, so I have no idea
                what it does or how to run it properly. The program seems to
                expect some specific input and then produces an output, but I
                can't figure out what kind of input it needs. Could you help me
                figure out what this program requires?"
              </p>
              <p>
                - Simple config presets allow training to run on multiple
                hardware setups with minimal effort.
              </p>
              <p>
                - GRPO used with 16 rollouts per task, up to 32k tokens per
                rollout.
              </p>
              <p>- Agent uses XML/YAML format to structure tool calls</p>
              <p>*More details*:</p>
              <p>
                My Github repos open source it all (agent, data, code) and has
                way more technical details if you are interested!:
              </p>
              <p>- Terminal Agent RL repo</p>
              <p>- Multi-agent synthetic data pipeline repo</p>
              <p>
                I thought I would share this because I believe long-horizon RL
                is going to change everybody's lives, and so I feel it is
                important (and super fun!) for us all to share knowledge around
                this area, and also have enjoy exploring what is possible.
              </p>
              <p>Thanks for reading!</p>
              <p>Dan</p>
              <p>
                (Built using rLLM RL framework which was brilliant to work with,
                and evaluated and inspired by the great Terminal Bench
                benchmark)
              </p>
            </div>
          </section>
        </section>
        <section id="44716280">
          <h3>
            <a
              class="item"
              href="https://tesseral.com/blog/i-designed-some-more-user-friendly-methods-for-multi-factor-authentication"
              >Playing with more user-friendly methods for multi-factor
              authentication</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-28 @ 22:04:58</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44716280"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44699199">
          <h3>
            <a class="item" href="https://anruler.com/"
              >Online Ruler â€“ Measuring in inches/centimeters</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-27 @ 06:03:05</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44699199"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44698087">
          <h3>
            <a
              class="item"
              href="https://obsoless.com/products/iph0n3-usb-c-protection-case"
              >USB-C for Lightning iPhones</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-27 @ 01:03:42</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44698087"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44695364">
          <h3>
            <a
              class="item"
              href="https://docs.flightsimulator.com/msfs2024/html/6_Programming_APIs/WASM/WebAssembly.htm"
              >Microsoft Flight Simulator 2024: WebAssembly SDK</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-26 @ 16:44:17</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44695364"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44692839">
          <h3>
            <a
              class="item"
              href="https://lucumr.pocoo.org/2025/7/26/virtual-threads/"
              >From Async/Await to Virtual Threads</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-26 @ 09:59:53</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44692839"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44691986">
          <h3>
            <a
              class="item"
              href="https://senhongo.com/blog/when-javaScript-decided-my-day-starts-at-9am"
              >JavaScript decided my day starts at 9am</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-26 @ 06:57:17</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44691986"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44689565">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=C1nZzQqcPZw"
              >FoundationDB: From idea to Apple acquisition [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-25 @ 23:06:18</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44689565"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
