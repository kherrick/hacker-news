<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43467681">
          <h3>
            <a
              class="item"
              href="https://www.platformer.news/openai-chatgpt-mental-health-well-being/"
              >Chatbots could spark the next big mental health crisis</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 02:49:02</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43467681"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43467649">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43467649"
              >Ask HN: How do you propose to rebuild industry in a
              post-apocalypse world?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 02:41:07</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43467649"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <p>https://en.wikipedia.org/wiki/Solarpunk</p>
              <p>https://news.ycombinator.com/item?id=43236520</p>
              <p>
                I love the concept of Solarpunk or anything similar. However, I
                fail to understand how to reboot modern industry in a
                post-apocalypse world.
              </p>
              <p>
                Scenario: I think a deadly virus outbreak is far more likely and
                devastating than a thermal nuclear war. Let's assume that such
                an outbreak took out most of the governments and the population,
                and only local communities start to show up afterwards.
              </p>
              <p>
                How do you reboot modern industry? I'm sure we can scavenge
                stores and storehouses for a while, but eventually we need to
                rebuild a very large portion of modern technologies, if not all
                of them.
              </p>
              <p>
                For a start, how do we produce steel, aluminum and other common
                metal from raw materials? How do we actually mine them? How do
                we product antibiotics, needles and everything we need in a
                hospital? How do we build roads (I think this is actually not
                too hard)? How do we build transportation tools -- for sure we
                don't want to rely on animals? How do we build water processing
                factories, or at least, build water processing tools and pills?
                As a SWE I feel I know nothing about modern industries.
              </p>
              <p>
                Modern industries are too complex for any small community to
                even start to think about them. Someone gotta at least preserve
                some detailed documents for everything so that our future
                generations have a chance to rebuild them. Take steel production
                as an example, assuming mining is not a problem (it is), future
                generations need to know how such a factory is planned, built
                and operated. I never worked in such a factory but I bet there
                are tons of papers for just one of them. Encyclopedias won't
                cut. They don't teach you the 10,000 checks you need to check
                for all those pipelines and machines. Only factories and
                industry associations keep such documents, I think.
              </p>
              <p>
                How do we build such a knowledge preservation project? They
                gotta be so detailed that even laymen can start learning. How do
                we store them? If we store them electronically, we need to make
                sure that future generations have the tools to access them. We
                also need copies of such a project everywhere in the world,
                because post-apocalypse communities are small and far from each
                other.
              </p>
              <p>
                I also think such documentations should include smaller scale
                projects so that communities can actually start using it. If the
                community only has 1,000 people, a project that needs 10,000
                doesn't make any sense.
              </p>
              <p>
                What do you think? Do you think your country already has it
                covered?
              </p>
            </div>
          </section>
        </section>
        <section id="43467331">
          <h3>
            <a
              class="item"
              href="https://www.wiz.io/blog/ingress-nginx-kubernetes-vulnerabilities"
              >RCE Vulnerabilities in K8s Ingress Nginx (9.8 CVE for
              ingress-Nginx)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 01:44:48</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43467331"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43466509">
          <h3>
            <a class="item" href="https://abstimmung.eu/git/2024"
              >German parliament votes as a Git contribution graph</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 23:29:03</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43466509"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43466221">
          <h3>
            <a class="item" href="https://github.com/thepartly/gatehouse"
              >Gatehouse â€“ a composable, async-friendly authorization policy
              framework in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 22:50:47</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43466221"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43465971">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/three-hundred-years-later-a-tool-from-isaac-newton-gets-an-update-20250324/"
              >Three Hundred Years Later, a Tool from Isaac Newton Gets an
              Update</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 22:16:56</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43465971"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43465508">
          <h3>
            <a
              class="item"
              href="https://www.abortretry.fail/p/intel-a-bug-and-a-pro"
              >Intel: A Bug and a Pro</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 21:20:13</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43465508"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43465189">
          <h3>
            <a
              class="item"
              href="https://www.planet.com/pulse/aircraft-detection-at-planetary-scale/"
              >Aircraft detection at planetary scale</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 20:40:21</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43465189"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43465147">
          <h3>
            <a
              class="item"
              href="https://arcprize.org/blog/announcing-arc-agi-2-and-arc-prize-2025"
              >Arc-AGI-2 and ARC Prize 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 20:35:30</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43465147"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43465111">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/jaffray/archive/its-time-to-stop-building-kv-databases/"
              >It's Time to Stop Building KV Databases</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 20:31:36</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43465111"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43464541">
          <h3>
            <a
              class="item"
              href="https://principlesofcryptography.com/number-theory-primer-an-axiomatic-study-of-natural-numbers-peano-axioms/"
              >Peano's Axioms</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 19:26:05</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43464541"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43464068">
          <h3>
            <a class="item" href="https://qwenlm.github.io/blog/qwen2.5-vl-32b/"
              >Qwen2.5-VL-32B: Smarter and Lighter</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 18:35:12</span
              ><span class="points-container"
                >Points: <span class="points">384</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43464068"
                  >Comments</a
                ><span class="descendants">: 190</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43463200">
          <h3>
            <a
              class="item"
              href="https://www.jeffgeerling.com/blog/2025/i-wont-connect-my-dishwasher-your-stupid-cloud"
              >I won't connect my dishwasher to your cloud</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 17:09:07</span
              ><span class="points-container"
                >Points: <span class="points">380</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43463200"
                  >Comments</a
                ><span class="descendants">: 269</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43462882">
          <h3>
            <a
              class="item"
              href="https://scholarworks.lib.csusb.edu/cgi/viewcontent.cgi?article=1201&amp;context=history-in-the-making"
              >Project Operation Whitecoat (2010)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 16:35:07</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43462882"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43462299">
          <h3>
            <a
              class="item"
              href="https://blog.marcocantu.com/blog/2025-march-mastering-delphi5-annotated-complete.html"
              >Mastering Delphi 5 2025 Annotated Edition Is Now Complete</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 15:40:08</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43462299"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43461701">
          <h3>
            <a class="item" href="https://crates.io/crates/triforce-lv2"
              >Triforce â€“ a beamformer for Apple Silicon laptops</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 14:45:34</span
              ><span class="points-container"
                >Points: <span class="points">462</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43461701"
                  >Comments</a
                ><span class="descendants">: 180</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43461375">
          <h3>
            <a class="item" href="https://goblin.tools/"
              >Goblin.tools: simple, single-task tools to help neurodivergent
              people with tasks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 14:15:17</span
              ><span class="points-container"
                >Points: <span class="points">300</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43461375"
                  >Comments</a
                ><span class="descendants">: 178</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43458780">
          <h3>
            <a class="item" href="https://www.mattkeeter.com/projects/prospero/"
              >The Prospero Challenge</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 09:04:43</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43458780"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43457699">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/science/2025/03/23/pain-measure-precision-research/"
              >Researchers search for more precise ways to measure pain</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 03:57:02</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43457699"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43454915">
          <h3>
            <a class="item" href="https://heyopenspot.com/"
              >Show HN: LinkedIn sucks, so I built a better one</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 18:52:40</span
              ><span class="points-container"
                >Points: <span class="points">382</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43454915"
                  >Comments</a
                ><span class="descendants">: 316</span></span
              >
            </h4>
            <div class="text">
              <p>
                Thats why I used to built a personal microsite on Squarespace
                and uploaded a video resume to YouTube to stand out - it helped
                me land interviews and get into Big Tech.
              </p>
              <p>
                But I always wondered: why isnâ€™t there a platform designed to
                help you stand out like that?
              </p>
              <p>
                So I built OpenSpot: a public, curated platform where you can
                showcase who you are â€” with video, audio, and proof of your
                work. No endless feeds. No humblebrags. Just real people open to
                new opportunities.
              </p>
              <p>
                Weâ€™ve already onboarded a few companies, so recruiters can reach
                out to you directly. But you can also connect with other
                standout folks and supercharge your network.
              </p>
              <p>
                Just upload your resume and weÂ´ll automatically generate your
                profile in under 1 minute.
              </p>
              <p>
                Itâ€™s early, but feels like something people actually need. Would
                love your thoughts.
              </p>
            </div>
          </section>
        </section>
        <section id="43451279">
          <h3>
            <a class="item" href="https://github.com/hadashiA/MRubyD"
              >MRubyD: A new mruby virtual machine implemented in pure C#</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 06:52:59</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43451279"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43451141">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43451141"
              >Show HN: I'm a teacher and built an AI presentation tool</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 05:58:35</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43451141"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'd love it if you could have a look at it and give me some of
                your feedback.
              </p>
              <p>
                I don't think there's much overlap with the HN crowd and school
                teachers, but I've been coming here for many years and thought
                I'd post here and see what you all think.
              </p>
              <p>
                Check it out if you have a minute and I'd be super happy to hear
                your feedback too.
              </p>
              <p>
                <a href="https://www.slidehero.ai/"
                  >https://www.slidehero.ai/</a
                >
              </p>
              <p>
                You can jump in and have a play with the tool all you like ;)
              </p>
              <p>Cheers, Eli</p>
            </div>
          </section>
        </section>
        <section id="43450884">
          <h3>
            <a
              class="item"
              href="https://www.chinatalk.media/p/rickovers-lessons-how-to-build-a"
              >Rickover's Lessons</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 04:18:46</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43450884"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43448933">
          <h3>
            <a
              class="item"
              href="https://gizmodo.com/wwis-famous-dazzle-camouflage-seemed-effective-due-to-unexpected-optical-trick-study-finds-2000577568"
              >WWI's 'Dazzle' Camouflage Seemed Effective Due to Unexpected
              Optical Trick</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-22 @ 21:52:58</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43448933"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43442588">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/world/2025/03/21/brazil-airplane-wright-brothers-santos-dumont/"
              >The Wright brothers invented the airplane, right? Not if you're
              in Brazil</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-22 @ 01:55:51</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43442588"
                  >Comments</a
                ><span class="descendants">: 460</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43441082">
          <h3>
            <a
              class="item"
              href="https://physicsworld.com/a/co2-laser-enables-long-range-detection-of-radioactive-material/"
              >CO2 laser enables long-range detection of radioactive material</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-21 @ 21:41:18</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43441082"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43439138">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/smart-news/can-parrot-brains-teach-us-about-human-speech-study-finds-budgies-have-language-producing-regions-that-resemble-our-own-180986282/"
              >Can Parrot Brains Teach Us About Human Speech?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-21 @ 18:10:19</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43439138"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43436157">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-03-million-years-environmental-stress-response.html"
              >600M years of shared environmental stress response found in algae
              and plants</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-21 @ 14:30:18</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43436157"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43434010">
          <h3>
            <a class="item" href="https://github.com/Kimbsy/autology"
              >Autology: A Lisp with access to its own interpreter</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-21 @ 10:37:16</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43434010"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43433030">
          <h3>
            <a class="item" href="https://github.com/mortdeus/legacy-cc"
              >The earliest versions of the first C compiler known to exist</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-21 @ 08:17:19</span
              ><span class="points-container"
                >Points: <span class="points">320</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43433030"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
