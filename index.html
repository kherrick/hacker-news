<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45561672">
          <h3>
            <a class="item" href="https://xenodium.com/introducing-agent-shell"
              >Emacs agent-shell (powered by ACP)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 20:37:16</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45561672"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <a href="https://xenodium.com/agent-shell-0-5-improvements"
                >https://xenodium.com/agent-shell-0-5-improvements</a
              >
            </div>
          </section>
        </section>
        <section id="45561164">
          <h3>
            <a
              class="item"
              href="https://blog.robbowley.net/2025/10/12/after-the-ai-boom-what-might-we-be-left-with/"
              >After the AI boom: what might we be left with?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 19:40:34</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45561164"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45560978">
          <h3>
            <a class="item" href="https://phk.freebsd.dk/hacks/Wargames/"
              >HP1345A (and wargames) (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 19:19:50</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45560978"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45560974">
          <h3>
            <a class="item" href="https://nanochess.org/ecs_basic_2.html"
              >Completing a BASIC language interpreter in 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 19:19:38</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45560974"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45560890">
          <h3>
            <a class="item" href="https://rcyl.bike/en/the-bike/"
              >Rcyl – a recycled plastic urban bike</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 19:11:47</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45560890"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://web.archive.org/web/20250912174820/https://rcyl.bike/en/the-bike/"
                >https://web.archive.org/web/20250912174820/https://rcyl.bike...</a
              >
            </div>
          </section>
        </section>
        <section id="45560036">
          <h3>
            <a class="item" href="https://kuzudb.com"
              >We will no longer be actively supporting KuzuDB</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 17:30:48</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45560036"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45559977">
          <h3>
            <a
              class="item"
              href="https://www.ejumpcut.org/archive/jc58.2018/AlpertAlienPrequels/index.html"
              >Ridley Scott's Prometheus and Alien: Covenant – Contemporary
              Horror of AI (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 17:23:41</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559977"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://web.archive.org/web/20251012183954/https://www.ejumpcut.org/archive/jc58.2018/AlpertAlienPrequels/index.html"
                >https://web.archive.org/web/20251012183954/https://www.ejump...</a
              >
            </div>
          </section>
        </section>
        <section id="45559857">
          <h3>
            <a
              class="item"
              href="https://github.com/chili-chips-ba/wireguard-fpga"
              >Wireguard FPGA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 17:12:00</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559857"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45559767">
          <h3>
            <a
              class="item"
              href="https://sam-cooper.medium.com/the-country-that-broke-kotlin-84bdd0afb237"
              >A years-long Turkish alphabet bug in the Kotlin compiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 17:02:09</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559767"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45559603">
          <h3>
            <a
              class="item"
              href="https://embracethered.com/blog/posts/2025/github-copilot-remote-code-execution-via-prompt-injection/"
              >GitHub Copilot: Remote Code Execution via Prompt Injection
              (CVE-2025-53773)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 16:46:11</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559603"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45559372">
          <h3>
            <a class="item" href="https://giannirosato.com/blog/post/oavif/"
              >oavif: Faster target quality image compression</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 16:21:59</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559372"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45559305">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41598-025-18636-0"
              >Addictive-like behavioural traits in pet dogs with extreme
              motivation for toys</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 16:15:45</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559305"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45559076">
          <h3>
            <a class="item" href="https://rushter.com/blog/helix-editor/"
              >How I'm using Helix editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 15:48:28</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559076"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45559023">
          <h3>
            <a
              class="item"
              href="https://idiallo.com/byte-size/say-no-to-onedrive-backup"
              >No I don't want to turn on Windows Backup with One Drive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 15:42:00</span
              ><span class="points-container"
                >Points: <span class="points">445</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559023"
                  >Comments</a
                ><span class="descendants">: 339</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45558635">
          <h3>
            <a
              class="item"
              href="https://news.itsfoss.com/schleswig-holstein-email-system-migration/"
              >Germany's Schleswig-Holstein Completes Migration to Open Source
              Email</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 14:53:45</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45558635"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45558611">
          <h3>
            <a class="item" href="https://ambisounds.app/"
              >Show HN: I built a simple ambient sound app with no ads or
              subscriptions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 14:49:50</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45558611"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                So I made Ambi, a small iOS app with a clean interface and a set
                of freely available ambient sounds — rain, waves, wind, birds,
                that sort of thing. You can mix them, adjust volume levels, and
                just let it play all night or while you work. Everything works
                offline and there are no hidden catches.
              </p>
              <p>
                It’s something I built for myself first, but I figured others
                might find it useful too. Feedback, bugs, and suggestions are
                all welcome.
              </p>
              <p>
                <a
                  href="https://apps.apple.com/app/ambi-white-noise-sleep-sounds/id6753184615"
                  >https://apps.apple.com/app/ambi-white-noise-sleep-sounds/id6...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45556952">
          <h3>
            <a class="item" href="https://danybittel.ch/macro.html"
              >Macro Splats 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 10:08:02</span
              ><span class="points-container"
                >Points: <span class="points">323</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45556952"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45556763">
          <h3>
            <a
              class="item"
              href="https://shreyanjain.net/2024/07/05/nostr-and-atproto.html"
              >Nostr and ATProto (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 09:24:43</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45556763"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45556474">
          <h3>
            <a
              class="item"
              href="https://www.together.ai/blog/adaptive-learning-speculator-system-atlas"
              >AdapTive-LeArning Speculator System (ATLAS): Faster LLM
              inference</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 08:37:01</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45556474"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45553577">
          <h3>
            <a
              class="item"
              href="https://paddedinputs.substack.com/p/meta-superintelligences-surprising"
              >Meta Superintelligence's surprising first paper</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-11 @ 23:16:05</span
              ><span class="points-container"
                >Points: <span class="points">384</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45553577"
                  >Comments</a
                ><span class="descendants">: 215</span></span
              >
            </h4>
            <div class="text">
              <a href="https://arxiv.org/abs/2509.01092"
                >https://arxiv.org/abs/2509.01092</a
              >
            </div>
          </section>
        </section>
        <section id="45552590">
          <h3>
            <a
              class="item"
              href="https://fgiesen.wordpress.com/2018/03/05/a-whirlwind-introduction-to-dataflow-graphs/"
              >A whirlwind introduction to dataflow graphs (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-11 @ 20:52:21</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45552590"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45551260">
          <h3>
            <a
              class="item"
              href="https://github.com/anthropics/prompt-eng-interactive-tutorial"
              >Anthropic's Prompt Engineering Tutorial (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-11 @ 18:06:40</span
              ><span class="points-container"
                >Points: <span class="points">344</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45551260"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45536686">
          <h3>
            <a
              class="item"
              href="https://github.com/nzduck/hartnell-exploring-ai-book"
              >Show HN: I extracted BASIC listings for Tim Hartnell's 1986
              book</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-10 @ 09:00:55</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45536686"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've extracted the BASIC program listings from Hartnell's 1986
                book 'Exploring Artificial Intelligence on Your IBM PC' and
                organized them along with a PC-BASIC runtime environment and
                instructions so you can try these programs out yourself.
              </p>
              <p>
                Even though the AI landscape has changed enormously since
                Hartnell first wrote this book, I hope one or two of you will
                get some value out of these program listings if you're
                interested in exploring the fundamentals of AI on home-computing
                platforms as they were in the 1980's.
              </p>
              <p>
                Tim Hartnell unfortunately passed away in 1991 at the young age
                of 40, and without his writing I imagine more than a few of us
                would not have found the start in computing we did. Thanks Tim.
              </p>
            </div>
          </section>
        </section>
        <section id="45521584">
          <h3>
            <a
              class="item"
              href="https://wiki.qt.io/C%2B%2B_reflection_(P2996)_and_moc"
              >C++ Reflection and Qt MOC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 22:59:09</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45521584"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45515597">
          <h3>
            <a class="item" href="https://www.latent.space/p/tiny"
              >Tiny Teams Playbook</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 12:50:32</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45515597"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45510362">
          <h3>
            <a
              class="item"
              href="https://kk.org/thetechnium/paying-ais-to-read-my-books/"
              >Paying AIs to read my books</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 23:44:12</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45510362"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45508611">
          <h3>
            <a
              class="item"
              href="https://www.iaarc.org/publications/fulltext/The_helix-tower_by_konrad_zuse_automated_con-_and_deconstruction.pdf"
              >Konrad Zuse's Helix Tower [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 20:44:34</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45508611"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45504540">
          <h3>
            <a class="item" href="https://n-e-r-v-o-u-s.com/blog/?p=9827"
              >The Flummoxagon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 15:40:09</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45504540"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45501472">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2025/10/the-neurons-that-let-us-see-what-isnt-there/"
              >The neurons that let us see what isn't there</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 10:40:30</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45501472"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45500422">
          <h3>
            <a class="item" href="https://scheme.fail/"
              >Loko Scheme: bare metal optimizing Scheme compiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 07:41:59</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45500422"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
