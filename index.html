<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46464670">
          <h3>
            <a
              class="item"
              href="https://www.windowscentral.com/gaming/pc-gaming/windows-11-surges-among-pc-gamers-on-steam-as-linux-stalls"
              >Windows 11 surges among PC gamers on Steam as Linux stalls</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 13:44:23</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46464670"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46464529">
          <h3>
            <a class="item" href="https://offergridai.com"
              >Show HN: OfferGridAI – side-by-side comparison of real estate
              offers from PDFs</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 13:29:47</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46464529"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46464426">
          <h3>
            <a class="item" href="https://media.ccc.de/b/congress/2025"
              >39th Chaos Communication Congress Videos</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 13:17:06</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46464426"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46464235">
          <h3>
            <a
              class="item"
              href="https://github.com/j-brooke/FracturedJson/wiki"
              >FracturedJson</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 12:46:31</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46464235"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46464133">
          <h3>
            <a
              class="item"
              href="https://github.com/orgs/Dealta-Foundation/repositories"
              >Show HN: Dealta – A game-theoretic decentralized trading
              protocol</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 12:31:03</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46464133"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                The Core Thesis: Existing decentralized marketplaces rely on
                reputation, which inevitably centralizes. Dealta replaces
                reputation with a Nash Equilibrium-based mechanism. We use
                staked, pseudo-randomly selected "Brokers" to physically verify
                goods. The protocol ensures that honesty is the dominant
                strategy for all actors via strict payoff matrices. It intended
                use is preferably trading of mid to high value goods. Nobody
                expecting a computer, want a box full of stones.
              </p>
              <p>What we are releasing: a custom Layer-1 blockchain stack.</p>
              <p>
                Full Node: Implements Hybrid Consensus (PoW + PBFT) for instant
                finality.
              </p>
              <p>
                Integrated Wallet: Native key management and transaction
                construction for the custom trade opcodes.
              </p>
              <p>
                DB Management: Custom indexing for trade states and dispute
                evidence.
              </p>
              <p>
                The system is currently in Alpha. I am looking for feedback on
                the protocol design, the node architecture and collaborators.
              </p>
              <p>
                Code needs polishing, which i will do if people like the
                project. However, the project runs, and a testnet will be
                launched if people take interest in the project.
              </p>
              <p>
                Readme files will be updated as well. Currently they provide a
                simple guide on how to build the project.
              </p>
              <p>
                Feel free to send an email. It can be found my in profile or in
                the paper.
              </p>
            </div>
          </section>
        </section>
        <section id="46464120">
          <h3>
            <a
              class="item"
              href="https://blog.thechases.com/posts/assorted-less-tips/"
              >Assorted Less(1) Tips</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 12:29:23</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46464120"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46463992">
          <h3>
            <a class="item" href="https://custompaste.com"
              >Show HN: I built a clipboard tool to strip/keep specific
              formatting like Italics</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 12:07:00</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46463992"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’m Joseph, a solo developer. I built CustomPaste because I was
                frustrated by the binary choice standard clipboard tools give
                us: either keep all the messy formatting (background colors,
                huge fonts) or strip everything down to plain text.
              </p>
              <p>
                We all know Ctrl+Shift+V (paste as plain text), but that is
                often too destructive, it kills hyperlinks, bolding, and lists
                when I usually just want to normalize the font family (e.g.,
                force Arial 11pt) or remove background colors.
              </p>
              <p>
                I wanted a tool that let me "strip exactly what I want, and keep
                exactly what I want."
              </p>
              <p>
                The Solution: Instead of a single "paste" behavior, the app lets
                you create reusable "Recipes" to define exactly how your text
                should land in your editor. It intercepts the clipboard,
                processes the structure locally, and transforms it based on your
                rules.
              </p>
              <p>It offers granular control over:</p>
              <p></p>
              <pre><code>    Smart Preservation: You can strip or set specific font families and sizes but specifically preserve bold, italics, and hyperlinks.
</code></pre>
              Structure: You can preserve tables while stripping the images
              inside them.
              <p>
                Data Cleanup: It can instantly purge duplicate lines, sort lists
                alphabetically, or flatten extra blank lines.
              </p>
              <p>
                Text Fixes: It cleans up AI-generated artifacts (like "smart
                quotes" or em-dashes) and enforces casing (Title Case, Sentence
                Case).
              </p>
              <p>
                Privacy &amp; Pricing: The app runs 100% locally on your
                machine, no cloud processing and no data harvesting. It is a
                one-time purchase (lifetime license), not a subscription. There
                is a free trial (first 100 pastes) so you can test if it fits
                your workflow.
              </p>
              <p>
                I’d love to hear your feedback on the "Recipe" approach or any
                other edge cases you struggle with when pasting text!
              </p>
            </div>
          </section>
        </section>
        <section id="46463644">
          <h3>
            <a
              class="item"
              href="https://sgoel.dev/posts/10-years-of-personal-finances-in-plain-text-files/"
              >10 years of personal finances in plain text files</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 11:07:51</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46463644"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46463635">
          <h3>
            <a
              class="item"
              href="https://shkspr.mobi/blog/2025/12/a-small-collection-of-text-only-websites/"
              >A small collection of text-only websites</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 11:06:29</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46463635"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46463407">
          <h3>
            <a class="item" href="https://lalitm.com/post/one-number-i-trust/"
              >One Number I Trust: Plain-Text Accounting for a Multi-Currency
              Household</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 10:25:11</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46463407"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46463315">
          <h3>
            <a
              class="item"
              href="https://www.eurosurveillance.org/content/10.2807/1560-7917.ES.2025.30.27.2400820"
              >HPV vaccination reduces oncogenic HPV16/18 prevalence from 16% to
              &amp;lt;1% in Denmark</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 10:10:46</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46463315"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46462719">
          <h3>
            <a
              class="item"
              href="https://carette.xyz/posts/going_immutable_macos/"
              >Going immutable on macOS, using Nix-Darwin</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 08:42:34</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46462719"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46462702">
          <h3>
            <a
              class="item"
              href="https://standardebooks.org/blog/public-domain-day-2026"
              >Standard Ebooks: Public Domain Day 2026 in Literature</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 08:40:41</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46462702"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46462592">
          <h3>
            <a
              class="item"
              href="https://www.futilitycloset.com/2026/01/02/round-and-round/"
              >Round the tree, yes, but not round the squirrel</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 08:16:21</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46462592"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46462108">
          <h3>
            <a
              class="item"
              href="https://rtfm.co.ua/en/freebsd-home-nas-part-1-configuring-zfs-mirror-raid1/"
              >FreeBSD: Home NAS, part 1 – configuring ZFS mirror (RAID1)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 06:48:32</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46462108"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46460676">
          <h3>
            <a class="item" href="https://github.com/maxpert/marmot"
              >Marmot – A distributed SQLite server with MySQL wire compatible
              interface</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 02:21:57</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46460676"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46460440">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/blog/2026/01/public-domain-day-2026/"
              >Happy Public Domain Day 2026</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 01:42:16</span
              ><span class="points-container"
                >Points: <span class="points">350</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46460440"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46460319">
          <h3>
            <a
              class="item"
              href="https://github.com/ghostty-org/ghostty/issues/3558"
              >Why users cannot create Issues directly</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 01:24:51</span
              ><span class="points-container"
                >Points: <span class="points">512</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46460319"
                  >Comments</a
                ><span class="descendants">: 187</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46458302">
          <h3>
            <a
              class="item"
              href="https://tenderlovemaking.com/2025/12/29/can-bundler-be-as-fast-as-uv/"
              >Can Bundler be as fast as uv?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-01 @ 21:37:10</span
              ><span class="points-container"
                >Points: <span class="points">293</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46458302"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46457784">
          <h3>
            <a
              class="item"
              href="https://henry.codes/writing/a-website-to-destroy-all-websites/"
              >A website to destroy all websites</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-01 @ 20:36:46</span
              ><span class="points-container"
                >Points: <span class="points">622</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46457784"
                  >Comments</a
                ><span class="descendants">: 318</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46457770">
          <h3>
            <a
              class="item"
              href="https://www.pcgamer.com/software/linux/im-brave-enough-to-say-it-linux-is-good-now-and-if-you-want-to-feel-like-you-actually-own-your-pc-make-2026-the-year-of-linux-on-your-desktop/"
              >Linux is good now</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-01 @ 20:35:11</span
              ><span class="points-container"
                >Points: <span class="points">915</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46457770"
                  >Comments</a
                ><span class="descendants">: 726</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46455872">
          <h3>
            <a class="item" href="https://ciechanow.ski/cameras-and-lenses/"
              >Cameras and Lenses (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-01 @ 17:18:01</span
              ><span class="points-container"
                >Points: <span class="points">465</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46455872"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46454977">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2026-01-01/byd-sells-4-6-million-vehicles-in-2025-meets-revised-sales-goal"
              >BYD Sells 4.6M Vehicles in 2025, Meets Revised Sales Goal</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-01 @ 15:49:42</span
              ><span class="points-container"
                >Points: <span class="points">298</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46454977"
                  >Comments</a
                ><span class="descendants">: 468</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46454693">
          <h3>
            <a
              class="item"
              href="https://openworkers.com/introducing-openworkers"
              >Show HN: OpenWorkers – Self-hosted Cloudflare workers in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-01 @ 15:09:06</span
              ><span class="points-container"
                >Points: <span class="points">471</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46454693"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
            <div class="text">
              <p>
                OpenWorkers lets you run untrusted JS in V8 isolates on your own
                infrastructure. Same DX as Cloudflare Workers, no vendor
                lock-in.
              </p>
              <p>
                What works today: fetch, KV, Postgres bindings, S3/R2, cron
                scheduling, crypto.subtle.
              </p>
              <p>Self-hosting is a single docker-compose file + Postgres.</p>
              <p>
                Would love feedback on the architecture and what feature you'd
                want next.
              </p>
            </div>
          </section>
        </section>
        <section id="46454274">
          <h3>
            <a
              class="item"
              href="https://www.starwars.com/news/mythic-discovery-within-the-inner-reaches-of-outer-space-joseph-campbell-meets-george-lucas-part-i"
              >Joseph Campbell Meets George Lucas – Part I (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-01 @ 14:12:42</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46454274"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46449852">
          <h3>
            <a class="item" href="https://enroll.sh"
              >Show HN: Enroll, a tool to reverse-engineer servers into Ansible
              config mgmt</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-01 @ 00:23:54</span
              ><span class="points-container"
                >Points: <span class="points">206</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46449852"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
            <div class="text">
              <p>
                This tool was born out of a situation where I had 'inherited' a
                bunch of servers that were not under any form of config
                management. Oh, the horror...
              </p>
              <p>
                Enroll 'harvests' system information such as what packages are
                installed, what services are running, what files have 'differed'
                from their out-of-the-box defaults, and what other custom
                snowflake data might exist.
              </p>
              <p>
                The harvest state data can be kept as its own sort of SBOM, but
                also can be converted in a mere second or two into
                fully-functional Ansible roles/playbooks/inventory.
              </p>
              <p>
                It can be run remotely over SSH or locally on the machine.
                Debian and Redhat-like systems are supported.
              </p>
              <p>
                There is also a 'diff' mode to detect drift over time. (Years
                ago I used Puppet instead of Ansible and miss the agent/server
                model where it would check in and re-align to the expected
                state, in case people were being silly and side-stepping the
                config management altogether). For now, diff mode doesn't
                'enforce' but is just capable of notification (webhook, email,
                stdout) if changes occur.
              </p>
              <p>
                Since making the tool, I've found that it's even useful for
                systems where you <i>already</i> have in Ansible, in that it can
                detect stuff you forgot to put into Ansible in the first place.
                I'm now starting to use it as a 'DR strategy' of sorts: still
                favoring my normal Ansible roles day-to-day (they are more
                bespoke and easier to read), but running enroll with
                '--dangerous --sops' in the background periodically as a
                'dragnet' catch-all, just in case I ever need it.
              </p>
              <p>
                Bonus: it also can use my other tool JinjaTurtle, which converts
                native config files into Jinja2 templates / Ansible vars. That
                one too was born out of frustration, converting a massive TOML
                file into Ansible :)
              </p>
              <p>
                Anyway, hope it's useful to someone other than me! The website
                has some demos and more documentation. Have fun every(any)-one.
              </p>
            </div>
          </section>
        </section>
        <section id="46419196">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/oldnewthing/20170728-00/?p=96706"
              >Can I throw a C++ exception from a structured exception?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-29 @ 10:28:38</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46419196"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46405463">
          <h3>
            <a class="item" href="https://www.ariss.org/contact-the-iss.html"
              >Contact the ISS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-27 @ 21:35:10</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46405463"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46404321">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/arch1t3cht/b5b9552633567fa7658deee5aec60453/"
              >What You Need to Know Before Touching a Video File</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-27 @ 19:17:25</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46404321"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46393929">
          <h3>
            <a class="item" href="https://en.kaigaiiju.ch/episodes/matz2"
              >Matz 2/2: The trajectory of Ruby's growth, Open-Source Software
              today etc.</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-26 @ 17:07:09</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46393929"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
