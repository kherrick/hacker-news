<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43553663">
          <h3>
            <a
              class="item"
              href="https://ourworldindata.org/air-pollution-sources"
              >Where does air pollution come from?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-02 @ 04:25:03</span
              ><span class="points-container"
                >Points: <span class="points">173</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43553663"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43552764">
          <h3>
            <a
              class="item"
              href="https://www.governance.fyi/p/forking-work-simplification-and-more"
              >Forking Work Simplification – Let's Bring Back Eisenhower's
              Process Improvement</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-02 @ 00:52:42</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43552764"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43552514">
          <h3>
            <a class="item" href="https://github.com/nabla-c0d3/sslyze"
              >SSLyze – SSL configuration scanning library and CLI tool</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-02 @ 00:03:31</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43552514"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43551934">
          <h3>
            <a
              class="item"
              href="https://jangafx.com/insights/linux-binary-compatibility"
              >The state of binary compatibility on Linux and how to address
              it</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 22:22:46</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43551934"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43551767">
          <h3>
            <a class="item" href="https://github.com/nizarmah/igatha"
              >Show HN: Offline SOS signaling+recovery app for disasters/wars</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 21:58:32</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43551767"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
            <div class="text">
              <p>
                First responders have awesome tools. But in tough situations,
                even common folks need to help.
              </p>
              <p>
                After what happened in Myanmar, we need something like this that
                works properly.
              </p>
              <p>
                It has only been tested in controlled environments. It can also
                be improved; I know BLE is not _that_ effective under rubble.
              </p>
              <p>
                If you have any feedback or can contribute, don't hold back.
              </p>
            </div>
          </section>
        </section>
        <section id="43551663">
          <h3>
            <a
              class="item"
              href="https://goughlui.com/2025/03/23/optical-discs-from-japan-part-6-tdk-uv-guard-fuji-lg-sony-maxell-cmc/"
              >Testing DVD-R and CD-R 25 years later: optical disks from
              Japan</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 21:46:31</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43551663"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43551397">
          <h3>
            <a class="item" href="https://github.com/dfd-tud/deda"
              >DEDA – Tracking Dots Extraction, Decoding and Anonymisation
              Toolkit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 21:11:43</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43551397"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43551352">
          <h3>
            <a class="item" href="https://pudding.cool/2025/04/music-dna/"
              >Shared DNA in Music</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 21:07:23</span
              ><span class="points-container"
                >Points: <span class="points">188</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43551352"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43551338">
          <h3>
            <a
              class="item"
              href="https://grantland.com/hollywood-prospectus/silicon-valley-halt-catch-fire-microserfs-douglas-coupland/"
              >Silicon Valley, Halt and Catch Fire, and How Microserfdom Ate the
              World (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 21:06:14</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43551338"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43551276">
          <h3>
            <a
              class="item"
              href="https://job-boards.greenhouse.io/hightouch/jobs/5437380004"
              >Hightouch (YC S19) Is Hiring Front End Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 21:00:08</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43550556">
          <h3>
            <a class="item" href="https://www.scopeofwork.net/silica-gel/"
              >How Silica Gel Took Over the World</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 19:33:38</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43550556"
                  >Comments</a
                ><span class="descendants">: 107</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43549618">
          <h3>
            <a class="item" href="https://github.com/williamw520/toposort"
              >Show HN: Zig Topological Sort Library for Parallel Processing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 17:48:45</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43549618"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
            <div class="text">
              <p>This little library is packed with the following features:</p>
              <p></p>
              <pre><code>  - Building dependency graph from dependency data.
  - Performing topological sort on the dependency graph.
  - Generating dependence-free subsets for parallel processing.
  - Cycle detection and cycle reporting.</code></pre>
            </div>
          </section>
        </section>
        <section id="43549293">
          <h3>
            <a class="item" href="https://glthr.com/myst-graph-1"
              >The Myst Graph: A New Perspective on Myst</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 17:19:48</span
              ><span class="points-container"
                >Points: <span class="points">213</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43549293"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43548217">
          <h3>
            <a
              class="item"
              href="https://secondlifestorage.com/index.php?threads/glubuxs-powerwall.126/"
              >Glubux's Powerwall (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 15:49:01</span
              ><span class="points-container"
                >Points: <span class="points">371</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43548217"
                  >Comments</a
                ><span class="descendants">: 243</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43547677">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43547677"
              >Launch HN: ASim (YC S21) – Mobile app that generates mobile
              apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 15:06:11</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43547677"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
            <div class="text">
              <a href="https://asim.sh/">https://asim.sh/</a>). aSim is a mobile
              app that can generate immediately usable and shareable mobile apps
              from your phone.
              <p>
                Tools like bolt.new and v0 have made it easier to build websites
                by just chatting with an LLM, but things have been lagging on
                the mobile side. We’ve always been suckers for well-made mobile
                apps, but today, it is still extremely difficult to build mobile
                apps with LLMs on your computer, and nearly impossible to do it
                from your phone.
              </p>
              <p>
                We built aSim to make it easy to build prototypes, “trinket”
                apps, or just random fun things all async from your phone. You
                can check our landing page (<a href="https://asim.sh/"
                  >https://asim.sh/</a
                >) for some ideas of different types of apps. Hopefully we can
                bring some life to your side project graveyard, or at least make
                the graveyard even more numerous.
              </p>
              <p>
                Here’s a demo video of the generation process:
                <a href="https://youtu.be/_3VCl13oMGc"
                  >https://youtu.be/_3VCl13oMGc</a
                >
              </p>
              <p>
                And here are the actual one-shotted apps I made in that video:
              </p>
              <p>
                -
                <a
                  href="https://asim.sh/@dli/s/157003/make-an-app-where-i-can-upload-an-image-and-it"
                  >https://asim.sh/@dli/s/157003/make-an-app-where-i-can-upload...</a
                >
              </p>
              <p>
                -
                <a
                  href="https://asim.sh/@dli/s/157014/make-me-an-app-that-is-a-clone-of-yikyak"
                  >https://asim.sh/@dli/s/157014/make-me-an-app-that-is-a-clone...</a
                >
              </p>
              <p>
                -
                <a
                  href="https://asim.sh/@dli/s/157006/make-me-a-chess-timer-app-for-in-person-chess"
                  >https://asim.sh/@dli/s/157006/make-me-a-chess-timer-app-for-...</a
                >
              </p>
              <p>
                All of our app generations also get access to a set of APIs that
                help get the ball rolling on some basic functionality. These
                APIs range from LLM usage and image generation to having shared
                state with your friends, and globally among all users. We’re
                always on the lookout for new API integrations (i.e. Spotify and
                Maps) so please let us know if you need any!
              </p>
              <p>
                We’ve had a small cohort of beta users that have been making
                what we think are some pretty cool apps. Here’s some of our
                favorites:
              </p>
              <p>
                - Pokemon-style Gacha Game -
                <a href="https://asim.sh/@evan/s/126948/elves-vs-monsters"
                  >https://asim.sh/@evan/s/126948/elves-vs-monsters</a
                >
              </p>
              <p>
                - OpenStreetMap stats:
                <a href="https://asim.sh/@lake/s/104102/osm-stats"
                  >https://asim.sh/@lake/s/104102/osm-stats</a
                >
              </p>
              <p>
                - Star wars idle game:
                <a href="https://asim.sh/@jojaspero/s/29102"
                  >https://asim.sh/@jojaspero/s/29102</a
                >
              </p>
              <p>
                - Find your Meyers Briggs -
                <a href="https://asim.sh/@typewhisperer/s/135964/jung-mirror"
                  >https://asim.sh/@typewhisperer/s/135964/jung-mirror</a
                >
                (&lt;-- just for fun, you don’t have to believe in MB :))
              </p>
              <p>
                - AI Tic Tac Toe -
                <a href="https://asim.sh/@hashmelons/s/105561/ai-tic-tac"
                  >https://asim.sh/@hashmelons/s/105561/ai-tic-tac</a
                >
              </p>
              <p>
                Behind the scenes, we’re generating a modified version of
                Typescript React Native that can be parsed and compiled into
                simpler instructions that can be sent to mobile devices on the
                fly. We’ve ripped out some parts of the TSC library, as well as
                lean heavily on AcornJS to massage the (mostly usable) LLM code
                into something that can actually be run. We have a bunch of
                static analyzers, as well as leaning on web runtimes to catch
                runtime errors (as well as take screenshots), though at the very
                end of the day, we lean the most on our users to play around
                with their creations and remix them into something great.
              </p>
              <p>
                It’s currently completely free to use, so we hope you check out
                aSim at <a href="https://asim.sh/">https://asim.sh/</a> and
                enjoy it as much as we have while building it! Let us know what
                features you’d like to see and any problems you have with your
                generations.
              </p>
            </div>
          </section>
        </section>
        <section id="43546236">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/c78jd30ywv8o"
              >Bletchley code breaker Betty Webb dies aged 101</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 12:55:28</span
              ><span class="points-container"
                >Points: <span class="points">424</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43546236"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43546004">
          <h3>
            <a
              class="item"
              href="https://batsov.com/articles/2025/03/30/why-fsharp/"
              >Why F#?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 12:34:07</span
              ><span class="points-container"
                >Points: <span class="points">344</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43546004"
                  >Comments</a
                ><span class="descendants">: 312</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43545917">
          <h3>
            <a class="item" href="https://pages.cs.wisc.edu/~kovar/hall.html"
              >Electron band structure in germanium, my ass (2001)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-01 @ 12:25:12</span
              ><span class="points-container"
                >Points: <span class="points">838</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43545917"
                  >Comments</a
                ><span class="descendants">: 347</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43537272">
          <h3>
            <a
              class="item"
              href="https://sqlsync.dev/posts/stop-syncing-everything/"
              >Stop syncing everything</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 17:07:44</span
              ><span class="points-container"
                >Points: <span class="points">393</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43537272"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43535376">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-03-ai-image-recognition-universe.html"
              >AI image recognition detects bubble-like structures in the
              universe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 14:21:15</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43535376"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43534240">
          <h3>
            <a class="item" href="https://confetti.hgs3.me/"
              >Show HN: I made Confetti: a configuration language file format</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 12:34:49</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43534240"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                In my opinion, JSON works well for data interchange, but it's
                overused for configuration, it's not localization-friendly, and
                it's too syntactically noisy. INI is simple but lacks
                hierarchical structures and doesn't have a formal specification.
                Confetti is intended to bridge the gap.
              </p>
              <p>
                I aim to keep Confetti simple and minimalistic, while
                encouraging others to extend it. Think of it like Markdown for
                configuration files: there's a core specification, but your
                welcome to create your own variations that suit your needs.
              </p>
            </div>
          </section>
        </section>
        <section id="43533792">
          <h3>
            <a
              class="item"
              href="https://nautil.us/what-caused-the-devastating-earthquake-in-myanmar-1200737/"
              >The Tectonics Behind the Myanmar Quake</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 11:40:44</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43533792"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43532253">
          <h3>
            <a
              class="item"
              href="https://transformer-circuits.pub/2025/attribution-graphs/methods.html"
              >Circuit Tracing: Revealing Computational Graphs in Language
              Models (Anthropic)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 07:42:13</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43532253"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43526118">
          <h3>
            <a
              class="item"
              href="https://thangs.com/designer/Concept%20Bytes/3d-model/Open%20Chess%20-%20Smart%20Chess%20Board-1300202"
              >Open source, 3D-printable smart chess board</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-30 @ 17:59:02</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43526118"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43525129">
          <h3>
            <a
              class="item"
              href="https://matto.io/posts/converting-a-go-kart-into-a-deathtrap/"
              >Converting a Go-Kart into a Deathtrap</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-30 @ 15:56:26</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43525129"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43520122">
          <h3>
            <a
              class="item"
              href="https://www.openculture.com/2025/03/a-6-hour-time-stretched-version-of-brian-enos-music-for-airports.html"
              >A 6-Hour Time-Stretched Version of Brian Eno's Music for
              Airports</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-30 @ 00:50:21</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43520122"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43518570">
          <h3>
            <a
              class="item"
              href="https://schneegans.de/windows/unattend-generator/"
              >Generate autounattend.xml files for Windows 10/11</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 20:44:41</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43518570"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43517439">
          <h3>
            <a
              class="item"
              href="https://sambroner.com/posts/raspberry-pi-train"
              >Train and Weather Tracker with Raspberry Pi and E-Ink</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 18:22:25</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43517439"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43515443">
          <h3>
            <a
              class="item"
              href="https://www.sciencedaily.com/releases/2025/03/250326221649.htm"
              >Scientists uncover key mechanism in evolution: Whole-genome
              duplication drives</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 13:39:06</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43515443"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43504940">
          <h3>
            <a
              class="item"
              href="https://jenevoldsen.com/posts/excitable-cells/"
              >Excitable cells</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 13:05:52</span
              ><span class="points-container"
                >Points: <span class="points">282</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43504940"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
