<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43414742">
          <h3>
            <a class="item" href="https://fauna.com/blog/the-future-of-fauna"
              >Fauna Service Winding Down</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 17:17:04</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43414742"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43414664">
          <h3>
            <a
              class="item"
              href="https://www.producer.com/news/harvard-study-finds-seed-oils-healthier-than-butter/"
              >Harvard study finds seed oils healthier than butter – The Western
              Producer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 17:10:57</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43414664"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43414527">
          <h3>
            <a class="item" href="https://markprompt.com/jobs"
              >Markprompt (YC W24) – Stripe for customer support – is hiring
              founding eng in SF</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 17:00:13</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43414405">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43414405"
              >Launch HN: Modernbanc (YC W20) – Modern and fast accounting
              software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 16:50:05</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43414405"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
            <div class="text">
              <a href="https://modernbanc.com">https://modernbanc.com</a>).
              Today we’re introducing our modern accounting software designed
              for startups and small businesses. Here’s a demo video:
              <a href="https://www.youtube.com/watch?v=gLkJ-6liTNU"
                >https://www.youtube.com/watch?v=gLkJ-6liTNU</a
              >
              <p>
                Think of it as Linear for accounting software. It is fast, works
                offline, and saves you time with automated bookkeeping,
                accounting and invoicing.
              </p>
              <p>
                This is our third pivot. Previously, we built infrastructure
                like a ledger API and payments vault to help companies create
                fintech products.
              </p>
              <p>
                For this idea, our motivation came from two completely opposite
                experiences: using Linear and using Quickbooks. The difference
                in quality between the two products was shocking, and despite
                there being dozens of accounting tools, none come even close to
                the quality of Linear, Notion, or Figma.
              </p>
              <p>
                With Linear, I’ve heard stories of engineers threatening to quit
                if their company switches to another tool! With Quickbooks it
                takes me so long to get to the right page that sometimes I
                forget why I opened it.
              </p>
              <p>
                This was baffling to us because accounting is the core system of
                every business—it tells you what you have, what you made, and
                whether you’ll still be around in 12 months.
              </p>
              <p>
                To solve this, we took a Linear-like approach, focusing on speed
                and quality from day one. For example, we built our own in-house
                real-time sync engine to ensure it’s lightning fast, works
                offline, and keeps your business finances at your fingertips.
              </p>
              <p>
                Modernbanc is still early and doesn’t have every feature yet,
                but we believe we’ve built a long-term foundation for the best
                accounting software in the world. It even includes a built-in
                spreadsheet so you’re never limited in reporting.
              </p>
              <p>
                Although early, the software is already useful and helps
                founders: Automate bookkeeping effortlessly. Transaction rules
                and AI smart actions handle the work for you. Get answers to any
                question, including runway, burn, and custom budgets, all in one
                place; Create and manage invoices. Our AI will auto-match
                incoming payments to them; Be tax-ready with all the data
                available for seamless tax filing. And if you don’t have an
                accountant, we’ll find you one!
              </p>
              <p>
                We’ll have more releases in the coming weeks including receipts
                matching, payroll integrations and AI-powered report generation.
              </p>
              <p>
                We’ve just launched (mainly focusing on smaller US-based
                startups) and would love your feedback! Please give it a go at
                <a href="https://modernbanc.com">https://modernbanc.com</a>
                (you’ll see a demo workspace once you sign-up).
              </p>
              <p>
                We’d love your feedback! If you’ve ever been frustrated by
                accounting software, what has been the worst part? What features
                are missing? Have you ever had to rely on a spreadsheet because
                your accounting tool could not do what you needed? We are still
                early, so your input will help shape what we build next. If you
                have thoughts, frustrations, or ideas, we would love to hear
                them!
              </p>
            </div>
          </section>
        </section>
        <section id="43413935">
          <h3>
            <a
              class="item"
              href="https://joe-antognini.github.io/astronomy/daylight"
              >How Fast the Days Are Getting Longer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 16:13:20</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43413935"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43413478">
          <h3>
            <a class="item" href="https://priceonomics.com/business-of-phish/"
              >The Business of Phish (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 15:40:35</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43413478"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43413333">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/technology/2025/mar/19/google-pay-settle-claims-favoured-white-asian-employees"
              >Google to pay $28M to settle claims it favoured white and Asian
              employees</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 15:30:01</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43413333"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43413125">
          <h3>
            <a
              class="item"
              href="https://developer.chrome.com/blog/memory-safety-fonts"
              >Memory Safety for Web Fonts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 15:16:48</span
              ><span class="points-container"
                >Points: <span class="points">176</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43413125"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43412179">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/an-early-look-at-cryptographic-watermarks-for-ai-generated-content/"
              >An early look at cryptographic watermarks for AI-generated
              content</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 14:05:45</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43412179"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43411934">
          <h3>
            <a
              class="item"
              href="https://www.engadget.com/big-tech/video-game-workers-in-north-america-now-have-an-industry-wide-union-130024730.html"
              >Video game workers in North America now have an industry-wide
              union</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 13:47:02</span
              ><span class="points-container"
                >Points: <span class="points">175</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43411934"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43411898">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2503.14393"
              >The clustering behavior of sliding windows</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 13:44:25</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43411898"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43411755">
          <h3>
            <a class="item" href="https://github.com/ikemen-engine/Ikemen-GO"
              >Ikemen-GO: open-source reimplementation of MUGEN</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 13:33:49</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43411755"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43410988">
          <h3>
            <a class="item" href="https://konvajs.org/"
              >Konva.js - Declarative 2D Canvas for React, Vue, and Svelte</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 12:30:48</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43410988"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43410885">
          <h3>
            <a
              class="item"
              href="https://archaeology.org/issues/march-april-2025/letters-from/on-the-origin-of-the-pork-taboo/"
              >The Origin of the Pork Taboo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 12:16:06</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43410885"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43410692">
          <h3>
            <a class="item" href="https://github.com/sharkdp/fd"
              >fd: A simple, fast and user-friendly alternative to 'find'</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 11:44:17</span
              ><span class="points-container"
                >Points: <span class="points">305</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43410692"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43410349">
          <h3>
            <a
              class="item"
              href="https://writings.stephenwolfram.com/2025/03/what-can-we-learn-about-engineering-and-innovation-from-half-a-century-of-the-game-of-life-cellular-automaton/"
              >Wolfram: Learning about Innovation from Half a Century of
              Conway's Game of Life</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 10:52:23</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43410349"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43410247">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2025-03-18/apple-loses-top-court-fight-against-german-antitrust-crackdown"
              >Apple Loses Top Court Fight Over German Antitrust Crackdown</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 10:36:52</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43410247"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43410061">
          <h3>
            <a class="item" href="https://kasurian.com/p/research-as-leisure"
              >The Lost Art of Research as Leisure</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 10:09:15</span
              ><span class="points-container"
                >Points: <span class="points">342</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43410061"
                  >Comments</a
                ><span class="descendants">: 188</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43409028">
          <h3>
            <a class="item" href="https://www.fourmilab.ch/documents/netslum/"
              >The Intenet Slum: is abandoning the Internet the next big thing?
              (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 07:13:23</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43409028"
                  >Comments</a
                ><span class="descendants">: 113</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43408674">
          <h3>
            <a class="item" href="https://mastersplinter.work/research/passkey/"
              >CVE-2024-9956 – PassKey Account Takeover in All Mobile
              Browsers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 06:07:01</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43408674"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43408540">
          <h3>
            <a
              class="item"
              href="https://www.spacex.com/launches/mission/?missionId=crew-9-return"
              >Crew-9 Returns to Earth</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 05:32:52</span
              ><span class="points-container"
                >Points: <span class="points">363</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43408540"
                  >Comments</a
                ><span class="descendants">: 422</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43406710">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/jwbee/7e8b27e298de8bbbf8abfa4c232db097"
              >Make Ubuntu packages 90% faster by rebuilding them</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-18 @ 23:55:17</span
              ><span class="points-container"
                >Points: <span class="points">493</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43406710"
                  >Comments</a
                ><span class="descendants">: 307</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43401855">
          <h3>
            <a class="item" href="https://bluemigrate.com"
              >Show HN: I made a tool to port tweets to Bluesky mantaining their
              original date</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-18 @ 17:07:39</span
              ><span class="points-container"
                >Points: <span class="points">481</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43401855"
                  >Comments</a
                ><span class="descendants">: 189</span></span
              >
            </h4>
            <div class="text">
              Bluesky allows to backdate their posts with their API, so I made
              this tool to copy your twitter (X) profile to Bluesky keeping the
              backdated dates of your tweets, showing as if they were posted
              back then
            </div>
          </section>
        </section>
        <section id="43400989">
          <h3>
            <a
              class="item"
              href="https://ericmigi.com/blog/introducing-two-new-pebbleos-watches/"
              >Two new PebbleOS watches</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-18 @ 15:59:27</span
              ><span class="points-container"
                >Points: <span class="points">1534</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43400989"
                  >Comments</a
                ><span class="descendants">: 467</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43398518">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/technology/cybersecurity/google-agrees-buy-cybersecurity-startup-wiz-32-bln-ft-reports-2025-03-18/"
              >Google to buy Wiz for $32B</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-18 @ 12:18:29</span
              ><span class="points-container"
                >Points: <span class="points">568</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43398518"
                  >Comments</a
                ><span class="descendants">: 750</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43392951">
          <h3>
            <a class="item" href="https://map.koljapluemer.com"
              >Show HN: Learn where countries are on the world map with Spaced
              Repetition</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-17 @ 21:35:37</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43392951"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                I made a web game to practice country locations a while ago and
                HN liked it, so I thought I'd post my updated version as well.
              </p>
              <p>
                As for how the game works and feels, I'd really recommend you
                checking it out for yourself, it's free, no signup, no ads.
              </p>
              <p>
                The tech stack is Vue + ts + Tailwind/Daisy for the looks. The
                learning algorithm is a slight modification of the ts version of
                FSRS.
              </p>
              <p>
                If you have anything to add, it's open source as well (<a
                  href="https://github.com/koljapluemer/learn-worldmap"
                  >https://github.com/koljapluemer/learn-worldmap</a
                >), although not well documented yet.
              </p>
              <p>
                In the end it's just a little sideproject, but I hope you enjoy
                it — any feedback welcome :)
              </p>
            </div>
          </section>
        </section>
        <section id="43380622">
          <h3>
            <a
              class="item"
              href="https://www.shayon.dev/post/2025/75/selective-asynchronous-commits-in-postgresql-balancing-durability-and-performance/"
              >Selective async commits in PostgreSQL – balancing durability and
              performance</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 17:24:02</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43380622"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43379082">
          <h3>
            <a class="item" href="https://github.com/jamii/zest"
              >Zest: a programming language for malleable and legible systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 13:50:24</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43379082"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43378436">
          <h3>
            <a class="item" href="https://visualgo.net/en"
              >Visualising data structures and algorithms through animation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 12:19:29</span
              ><span class="points-container"
                >Points: <span class="points">218</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43378436"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43377966">
          <h3>
            <a
              class="item"
              href="https://btmc.substack.com/p/implementing-generic-types-in-c"
              >Implementing Generic Types in C</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 10:25:28</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377966"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
