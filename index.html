<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43377690">
          <h3>
            <a
              class="item"
              href="https://drive.google.com/file/d/1_9V6lBTIfDsPdKCohQBc5Ed5UzDbnsrI/view?usp=sharing"
              >Show HN: My high school team's space probe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 08:48:09</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377690"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                We had the opportunity to launch it a week ago and you can find
                the video of our launch here:
                <a
                  href="https://drive.google.com/file/d/16bsLzxjP7OWRqVvCB62cLv7QYLRWPKZK/view"
                  >https://drive.google.com/file/d/16bsLzxjP7OWRqVvCB62cLv7QYLR...</a
                >
              </p>
              <p>
                During the launch we reached 400m above sea level, and the can
                pulled 70gs successfully. The parachute and can stayed intact.
                Unfortunately, on the day, we were unable to successfully
                implement GPS.
              </p>
              <p>
                The raw results are here:
                <a
                  href="https://drive.google.com/file/d/1oK1vukjcNcsaXMAPeFlzZ66aHlRS0Vas/view"
                  >https://drive.google.com/file/d/1oK1vukjcNcsaXMAPeFlzZ66aHlR...</a
                >
                And a slightly cleaned up version is here:<a
                  href="https://drive.google.com/file/d/1xYhkp3sWoJF0bCkkvFs1AygSdLUHyrYp/view"
                  >https://drive.google.com/file/d/1xYhkp3sWoJF0bCkkvFs1AygSdLU...</a
                >
              </p>
              <p>
                I used my data presentation software to present our results
                here:
                <a
                  href="https://drive.google.com/file/d/1-r7lT0J4MDLiYfuaasDXJsr5rCA1FNMD/view"
                  >https://drive.google.com/file/d/1-r7lT0J4MDLiYfuaasDXJsr5rCA...</a
                >
                The software (in the form of a python script to be executed in
                blender) can be found here:
                <a
                  href="https://drive.google.com/file/d/1LHP7OwgI_O8t6-NBI0ZPn9JUt2GVgZEi/view"
                  >https://drive.google.com/file/d/1LHP7OwgI_O8t6-NBI0ZPn9JUt2G...</a
                >
                It's not pretty, but it works.
              </p>
              <p>
                The differences in temperature and pressure results were
                exaggerated in the so that the gradient could be clearly seen.
              </p>
              <p>
                Unfortunately, we did not get into the final (judged on this
                document) but it was an awesome experience nevertheless. The
                judges used this form to mark us:
                <a
                  href="https://drive.google.com/file/d/1eZnum5zuJvkLzY7RLtm9A-NNzxwt_iO8/view"
                  >https://drive.google.com/file/d/1eZnum5zuJvkLzY7RLtm9A-NNzxw...</a
                >
                We would love to get any feedback from more experienced people,
                as we intend to do similar projects in the future and at least
                two of us want to be professional engineers. I'm happy to reply
                to any comments.
              </p>
            </div>
          </section>
        </section>
        <section id="43377287">
          <h3>
            <a class="item" href="https://sunsethue.com/"
              >Sunsethue – Forecast Sunset Beauty</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 06:41:23</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377287"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43377169">
          <h3>
            <a
              class="item"
              href="https://blog.qiqitori.com/2024/08/implementing-tennis-for-two-using-op-amps/"
              >Implementing "Tennis for Two" using op amps (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 05:59:08</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377169"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43376824">
          <h3>
            <a class="item" href="https://github.com/giacomo-b/rust-stakeholder"
              >Generate impressive-looking terminal output, look busy when
              stakeholders walk by</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 03:45:46</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43376824"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43376570">
          <h3>
            <a
              class="item"
              href="http://oldvcr.blogspot.com/2025/03/more-pro-for-dec-professional-380.html"
              >More pro for the DEC Professional 380 (featuring PRO/VENIX)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 02:31:59</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43376570"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43376033">
          <h3>
            <a
              class="item"
              href="https://www.downtowndougbrown.com/2025/03/apples-long-lost-hidden-recovery-partition-from-1994-has-been-found/"
              >Apple's long-lost hidden recovery partition from 1994 has been
              found</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 00:07:03</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43376033"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43375923">
          <h3>
            <a class="item" href="https://lethain.com/career-advice-2025/"
              >Career Advice in 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 23:41:44</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43375923"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43375676">
          <h3>
            <a class="item" href="https://mandelbrot.site"
              >Mandelbrot Set Explorer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 22:52:13</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43375676"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43375123">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/parahelp/jobs/PhUMEwg-founding-ai-engineer"
              >Parahelp (YC S24) Is Hiring Founding Engineers (SF)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 21:00:44</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43374519">
          <h3>
            <a
              class="item"
              href="https://github.blog/security/sign-in-as-anyone-bypassing-saml-sso-authentication-with-parser-differentials/"
              >Sign in as anyone: Bypassing SAML SSO authentication with parser
              differentials</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 19:06:01</span
              ><span class="points-container"
                >Points: <span class="points">241</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43374519"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43374505">
          <h3>
            <a class="item" href="https://github.com/telekinesis-inc/aiopandas"
              >Show HN: Aiopandas – Async .apply() and .map() for Pandas, Faster
              API/LLMs Calls</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 19:04:01</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43374505"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43374283">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2503.01890"
              >AutoHete: An Automatic and Efficient Heterogeneous Training
              System for LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 18:22:37</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43374283"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43374237">
          <h3>
            <a
              class="item"
              href="https://www.thewhitereview.org/feature/theyre-really-close-to-my-body/"
              >They're Close to My Body: A Hagiography of Nine Inch Nails and
              Robin Finck (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 18:15:53</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43374237"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43373242">
          <h3>
            <a class="item" href="https://github.com/christian-fei/my-yt"
              >Show HN: A personal YouTube frontend based on yt-dlp</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 15:45:42</span
              ><span class="points-container"
                >Points: <span class="points">245</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43373242"
                  >Comments</a
                ><span class="descendants">: 160</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43373196">
          <h3>
            <a class="item" href="https://susam.net/lemma-for-ftgt.html"
              >Lemma for the Fundamental Theorem of Galois Theory</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 15:38:22</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43373196"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43373157">
          <h3>
            <a
              class="item"
              href="https://brodzinski.com/2025/03/milk-kanban.html"
              >Milk Kanban</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 15:32:02</span
              ><span class="points-container"
                >Points: <span class="points">360</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43373157"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43372431">
          <h3>
            <a
              class="item"
              href="https://www.shapeoperator.com/2016/12/12/sunset-geometry/"
              >Sunset Geometry (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 13:32:53</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43372431"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43371583">
          <h3>
            <a class="item" href="https://therasr.github.io/"
              >Arbitrary-Scale Super-Resolution with Neural Heat Fields</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 10:39:31</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43371583"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43361440">
          <h3>
            <a
              class="item"
              href="https://signalsandthreads.com/finding-signal-in-the-noise/"
              >Finding Signal in the Noise: Machine Learning and the Markets
              (Jane Street)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-14 @ 11:10:12</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43361440"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43360522">
          <h3>
            <a
              class="item"
              href="https://www.ft.com/content/fb5c11bb-1d4b-465f-8283-451a19a3d425"
              >DeepSeek focuses on research over revenue in contrast to Silicon
              Valley</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-14 @ 08:07:53</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43360522"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43360249">
          <h3>
            <a class="item" href="https://cohere.com/blog/command-a"
              >Command A: Max performance, minimal compute – 256k context
              window</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-14 @ 07:02:06</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43360249"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43358914">
          <h3>
            <a class="item" href="https://keepworking.github.io/nash/"
              >Show HN: Nash, I made a standalone note with single HTML file</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-14 @ 01:51:22</span
              ><span class="points-container"
                >Points: <span class="points">351</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43358914"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
            <div class="text">
              Hello HN, I hope it will posted as well. I made a note in single
              html file. This does not require a separate membership or
              installation of the software, and if you download and modify an
              empty file, you can modify and read it at any time, regardless of
              online or offline. It can be shared through messengers such as
              Telegram, so it is also suitable to share contents with long
              articles and images. It is also possible to host and blog because
              it is static html file content.
            </div>
          </section>
        </section>
        <section id="43349296">
          <h3>
            <a
              class="item"
              href="https://www.videogameschronicle.com/news/lego-is-starting-to-bring-its-game-development-in-house-key-exec-says/"
              >Lego says it wants to start to bring video game development
              in-house</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-13 @ 00:44:58</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43349296"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43348434">
          <h3>
            <a
              class="item"
              href="https://www.nist.gov/news-events/news/2025/01/technical-blog-strengthening-ai-agent-hijacking-evaluations"
              >Strengthening AI Agent Hijacking Evaluations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 22:38:03</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43348434"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43343808">
          <h3>
            <a
              class="item"
              href="https://iopscience.iop.org/article/10.1088/1361-6404/ada1af"
              >Learning physics while monitoring vibrations of the Earth with
              seismic phenomena</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 14:43:44</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43343808"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43340651">
          <h3>
            <a
              class="item"
              href="https://tech.marksblogg.com/wyvern-open-data-feed.html"
              >Wyvern's Open Satellite Feed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 07:20:05</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43340651"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43339084">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-03-burials-compelling-evidence-neanderthal-homo.html"
              >Evidence that Neanderthal and Homo sapiens engaged in cultural
              exchange</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 01:32:59</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43339084"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43335987">
          <h3>
            <a
              class="item"
              href="https://medium.com/stanford-magazine/stanford-research-on-effects-of-radioactivity-from-bikini-atoll-nuclear-tests-on-coral-and-crab-dna-48459144020c"
              >What Bikini Atoll Looks Like Today (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-11 @ 19:11:28</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43335987"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43333975">
          <h3>
            <a
              class="item"
              href="https://misterrogers.org/episodes/computers-and-mice/"
              >Computers and Mice – Mister Rogers Neighborhood</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-11 @ 16:15:02</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43333975"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43331706">
          <h3>
            <a
              class="item"
              href="https://multiverseemployeehandbook.com/blog/adams-birthday-toast/"
              >So Long and Thanks for All the Words: A Toast to Douglas Adams</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-11 @ 12:18:25</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43331706"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
