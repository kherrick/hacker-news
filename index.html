<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39784395">
          <h3>
            <a
              class="item"
              href="https://essopenarchive.org/users/527743/articles/673415-new-views-of-lunar-seismicity-brought-by-analysis-of-newly-discovered-moonquakes-in-apollo-short-period-seismic-data"
              >Apollo Data Uncovers Lunar Seismic Events</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 21:05:39</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39784395"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39784349">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/continue/jobs/smcxRnM-founding-engineer"
              >Continue (YC S23) is hiring a founding engineer in San
              Francisco</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 21:00:41</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39784226">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/24105894/motorola-moto-g-power-2024-review-specs-features-apps-bloatware"
              >Motorola spoiled a good budget phone with bloatware</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 20:49:14</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39784226"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39784148">
          <h3>
            <a
              class="item"
              href="https://www.nbcnews.com/health/cancer/aggressive-colon-cancer-newly-identified-bacteria-found-half-tumors-ma-rcna144164"
              >A type of bacteria that causes dental plaque was found in 50% of
              colon cancers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 20:43:03</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39784148"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39783803">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/what-are-quantum-computers-used-for"
              >Actual Uses for Near-Term Quantum Computers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 20:13:17</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39783803"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39783223">
          <h3>
            <a class="item" href="https://memories.gallery/"
              >Show HN: Memories – FOSS Google Photos alternative built for high
              performance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 19:25:10</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39783223"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
            <div class="text">
              <p>
                Website:
                <a href="https://memories.gallery/"
                  >https://memories.gallery/</a
                >
              </p>
              <p>
                GitHub:
                <a href="https://github.com/pulsejet/memories"
                  >https://github.com/pulsejet/memories</a
                >
              </p>
              <p>
                Demo Server:
                <a href="https://demo.memories.gallery/apps/memories/"
                  >https://demo.memories.gallery/apps/memories/</a
                >
                (demo runs in San Francisco on a free-tier cloud vm)
              </p>
              <p>
                Memories has been built ground-up for high performance and is
                extremely fast when configured correctly. In our testing
                environment, it can load a timeline view with 100k photos in
                under 500ms, including query and rendering time!
              </p>
              <p>Some features to highlight:</p>
              <p>
                * A timeline similar to Google Photos where you can skip to any
                time in history instantly.
              </p>
              <p>
                * AI-based tagging that runs locally on your server, identifying
                and tagging people and objects.
              </p>
              <p>* Albums and external sharing.</p>
              <p>* Metadata editing support</p>
              <p>
                * A world map of your photos, supported both on mobile and the
                web
              </p>
              <p>* Did I mention it's extremely fast?</p>
              <p>Would love to hear feedback from the HN community! :)</p>
            </div>
          </section>
        </section>
        <section id="39782356">
          <h3>
            <a
              class="item"
              href="https://www.pgrs.net/2024/03/21/duckdb-as-the-new-jq/"
              >DuckDB as the New jq</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 18:19:23</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39782356"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39782213">
          <h3>
            <a class="item" href="https://soundry.ai/"
              >Launch HN: Soundry AI (YC W24) – Music sample generator for music
              creators</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 18:09:18</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39782213"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
            <div class="text">
              <a href="https://soundry.ai/">https://soundry.ai/</a>). We provide
              generative AI tools for musicians, including text-to-sound and
              infinite sample packs.
              <p>
                We (Mark and Justin) started writing music together a few years
                ago but felt limited in our ability to create anything that we
                were proud of. Modern music production is highly technical and
                requires knowledge of sound design, tracking, arrangement,
                mixing, mastering, and digital signal processing. Even with our
                technical backgrounds (in AI and cloud computing respectively),
                we struggled to learn what we needed to know.
              </p>
              <p>
                The emergence of latent diffusion models was a turning point for
                us just like many others in tech. All of a sudden it was
                possible to leverage AI to create beautiful art. After meeting
                our cofounder Diandre (half of the DJ duo Bandlez and expert
                music producer), we formed a team to apply generative AI to
                music production.
              </p>
              <p>
                We began by focusing on generating music samples rather than
                full songs. Focusing on samples gave us several advantages, but
                the biggest one was the ability to build and train our custom
                models very quickly due to the small required length of the
                generated audio (typically 2-10 seconds). Conveniently, our
                early text-to-sample model also fit well within many existing
                music producers’ workflows which often involve heavy use of
                music samples.
              </p>
              <p>
                We ran into several challenges when creating our text-to-sound
                model. The first was that we began by training our latent
                transformer (similar to Open AI’s Sora) using off-the-shelf
                audio autoencoders (like Meta’s Encodec) and text embedders
                (like Google’s T5). The domain gap between the data used to
                train these off-the-shelf models and sample data was much
                greater than we expected, which caused us to incorrectly
                attribute blame for issues in the three model components (latent
                transformer, autoencoder, and embedder) during development. To
                see how musicians can use our text-to-sound generator to write
                music, you can see our text-to-sound demo below:
              </p>
              <p>
                <a
                  href="https://www.youtube.com/watch?v=MT3k4VV5yrs&amp;ab_channel=SoundryAI"
                  >https://www.youtube.com/watch?v=MT3k4VV5yrs&amp;ab_channel=Sound...</a
                >
              </p>
              <p>
                The second issue we experienced was more on the product design
                side. When we spoke with our users in-depth we learned that
                novice music producers had no idea what to type into the prompt
                box, and expert music producers felt that our model’s output
                wasn’t always what they had in mind when they typed in their
                prompt. It turns out that text is much better at specifying the
                contents of visual art than music. This particular issue is what
                led us to our new product: the Infinite Sample Pack.
              </p>
              <p>
                The Infinite Sample Pack does something rather unconventional:
                prompting with audio rather than text. Rather than requiring you
                to type out a prompt and specify many parameters, all you need
                to do is click a button to receive new samples. Each time you
                select a sound, our system embeds “prompt samples” as input to
                our model which then creates infinite variations. By limiting
                the number of possible outputs we’re able to hide inference
                latency by pre-computing lots of samples ahead of time. This new
                approach has seen much wider adoption and so this month we’ll be
                opening the system up so that everyone can create Infinite
                Sample Packs of their very own! To compare the workflow of the
                two products, you can check out our new demo using the Infinite
                Sample Pack:
              </p>
              <p>
                <a
                  href="https://www.youtube.com/watch?v=BqYhGipZCDY&amp;ab_channel=SoundryAI"
                  >https://www.youtube.com/watch?v=BqYhGipZCDY&amp;ab_channel=Sound...</a
                >
              </p>
              <p>
                Overall, our founding principle is to start by asking the
                question: "what do musicians actually want?" Meta's open
                sourcing of MusicGen has resulted in many interchangeable
                text-to-music products, but ours is embraced by musicians. By
                constantly having an open dialog with our users we’ve been able
                to satisfy many needs including the ability to specify BPM and
                key, including one-shot instrument samples (so musicians can
                write their own melodies), and adding drag-and-drop support for
                digital audio workstations via our desktop app and VST. To hear
                some of the awesome songs made with our product, take a listen
                to our community showcases below!
              </p>
              <p>
                <a
                  href="https://soundcloud.com/soundry-ai/sets/community-showcases"
                  >https://soundcloud.com/soundry-ai/sets/community-showcases</a
                >
              </p>
              <p>
                We hope you enjoy our tool, and look forward to discussion in
                the comments
              </p>
            </div>
          </section>
        </section>
        <section id="39781776">
          <h3>
            <a
              class="item"
              href="https://reactormag.com/silent-running-a-1970s-environmental-fable-remains-depressingly-all-too-relevant/"
              >Silent Running: 1970s Environmental Fable Remains Depressingly
              All Too Relevant</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 17:35:39</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39781776"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39781418">
          <h3>
            <a class="item" href="https://www.dalmatian.ai/download"
              >Show HN: DaLMatian – Text2sql that works</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 17:11:24</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39781418"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <p>
                There are many constraints that make this reality difficult to
                achieve. The product needs to scale to databases with millions
                of columns and extract business logic from very complex queries.
                It also needs to be fast, at least faster than an analyst would
                take to write the query. On top of all this, an analyst needs to
                be allowed to use it from a security standpoint. Our app meets
                all the key requirements of an enterprise data analyst while
                also being lightweight enough to run locally on a typical
                laptop.
              </p>
              <p>
                Here's how it works. To get started, you simply need to open a
                file of past queries in our IDE (try it here:
                <a href="https://www.dalmatian.ai/download"
                  >https://www.dalmatian.ai/download</a
                >) and add a file with your database schema (instructions here:
                <a href="https://www.dalmatian.ai/docs#configuration"
                  >https://www.dalmatian.ai/docs#configuration</a
                >). There is also an option to connect a database to auto pull
                your schema (no actual data is seen by the LLM). We do not see
                anything you input since the app is local and the only external
                connection is with OpenAI. It's just like asking ChatGPT for
                help with queries, but in a streamlined way.
              </p>
              <p>
                If you'd download our free IDE and try to break it, we'd love to
                hear what you come up with!
              </p>
            </div>
          </section>
        </section>
        <section id="39780114">
          <h3>
            <a class="item" href="https://github.com/explodinggradients/ragas"
              >Show HN: Ragas – Open-source library for evaluating RAG
              pipelines</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 15:48:16</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39780114"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <a href="https://docs.ragas.io/en/stable/"
                >https://docs.ragas.io/en/stable/</a
              >, docs:
              <a href="https://docs.ragas.io/">https://docs.ragas.io/</a>.
              <p>
                Ragas provides you with different sets of metrics and methods
                like synthetic test data generation to help you evaluate your
                RAG applications. Ragas started off by scratching our own itch
                for evaluating our RAG chatbots last year.
              </p>
              <p><i>Problems Ragas can solve</i></p>
              <p>
                - How do you choose the best components for your RAG, such as
                the retriever, reranker, and LLM?
              </p>
              <p>
                - How do you formulate a test dataset without spending tons of
                money and time?
              </p>
              <p>
                We believe there needs to be an open-source standard for
                evaluating and testing LLM applications, and our vision is to
                build it for the community. We are tackling this challenge by
                evolving the ideas from the traditional ML lifecycle for LLM
                applications.
              </p>
              <p><i>ML Testing Evolved for LLM Applications</i></p>
              <p>
                We built Ragas on the principles of metrics-driven development
                and aim to develop and innovate techniques inspired by
                state-of-the-art research to solve the problems in evaluating
                and testing LLM applications.
              </p>
              <p>
                We don't believe that the problem of evaluating and testing
                applications can be solved by building a fancy tracing tool;
                rather, we want to solve the problem from a layer under the
                stack. For this, we are introducing methods like automated
                synthetic test data curation, metrics, and feedback utilisation,
                which are inspired by lessons learned from deploying stochastic
                models in our careers as ML engineers.
              </p>
              <p>
                While currently focused on RAG pipelines, our goal is to extend
                Ragas for testing a wide array of compound systems, including
                those based on RAGs, agentic workflows, and various
                transformations.
              </p>
              <p>
                Try out Ragas here
                <a
                  href="https://colab.research.google.com/github/shahules786/openai-cookbook/blob/ragas/examples/evaluation/ragas/openai-ragas-eval-cookbook.ipynb"
                  >https://colab.research.google.com/github/shahules786/openai-...</a
                >
                in Google Colab. Read our docs -
                <a href="https://docs.ragas.io/">https://docs.ragas.io/</a> to
                know more
              </p>
              <p>We would love to hear feedback from the HN community :)</p>
            </div>
          </section>
        </section>
        <section id="39779291">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/saflok-hotel-lock-unsaflok-hack-technique/"
              >Hackers found a way to open any of 3M hotel keycard locks</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 14:57:56</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39779291"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39779195">
          <h3>
            <a class="item" href="https://gofetch.fail"
              >GoFetch: New side-channel attack using data memory-dependent
              prefetchers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 14:51:18</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39779195"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39779024">
          <h3>
            <a class="item" href="https://xata.io/blog/introducing-pgzx"
              >Introducing pgzx: create PostgreSQL extensions using Zig</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 14:39:24</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39779024"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39778999">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/03/21/technology/apple-doj-lawsuit-antitrust.html"
              >U.S. sues Apple, accusing it of maintaining an iPhone monopoly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 14:37:43</span
              ><span class="points-container"
                >Points: <span class="points">1681</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39778999"
                  >Comments</a
                ><span class="descendants">: 1622</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39778590">
          <h3>
            <a class="item" href="https://www.ycombinator.com/blog/the-reddits"
              >The Reddits</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 14:00:04</span
              ><span class="points-container"
                >Points: <span class="points">298</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39778590"
                  >Comments</a
                ><span class="descendants">: 520</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39778570">
          <h3>
            <a class="item" href="https://github.com/chearon/dropflow"
              >Show HN: Dropflow, a CSS layout engine for node or
            </a>
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 13:58:31</span
              ><span class="points-container"
                >Points: <span class="points">260</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39778570"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
            <div class="text">
              <p>
                Live demo:
                <a href="https://chearon.github.io/dropflow/"
                  >https://chearon.github.io/dropflow/</a
                >
              </p>
              <p>
                It matches browsers in all cases I can find where they agree,
                and it's fast. It supports `position`, `inline-block`,
                `z-index`, and complex properties like `float` and
                `vertical-align`. It doesn't support high-level layout like
                flexbox or grid yet, but you can get intrinsics to easily divide
                space yourself and paint multiple layout trees. It has a great
                text layout implementation, and supporting non-Latin scripts is
                a top priority.
              </p>
              <p>
                I've wanted this to exist as far back as 2013, and the desire
                kept coming up: for a way to get detailed intrinsics, for high
                quality rich text layout to canvas and SVG, and for server-side
                rich text. We currently use it in CellEngine for our new
                canvas-based spreadsheet library to layout text in hundreds of
                thousands of cells, and will be using it soon to render PDFs
                with thousands of pages in a few seconds.
              </p>
            </div>
          </section>
        </section>
        <section id="39778412">
          <h3>
            <a class="item" href="https://difftastic.wilfred.me.uk/"
              >Difftastic, a structural diff tool that understands syntax</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 13:42:46</span
              ><span class="points-container"
                >Points: <span class="points">606</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39778412"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39777898">
          <h3>
            <a
              class="item"
              href="https://today.ucsd.edu/story/biodegradable-microplastics"
              >Research shows plant-based polymers can disappear within seven
              months</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 12:50:58</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39777898"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39777528">
          <h3>
            <a
              class="item"
              href="https://themeisle.com/blog/we-are-open-sourcing-our-ai-site-builder/"
              >Show HN: An AI-Powered WordPress Site Builder That We Are
              Open-Sourcing Today</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 12:11:43</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39777528"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39777229">
          <h3>
            <a class="item" href="https://jsomers.net/e-coli-chemotaxis/"
              >The baffling intelligence of a single cell: The story of E. coli
              chemotaxis</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 11:29:37</span
              ><span class="points-container"
                >Points: <span class="points">355</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39777229"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39776745">
          <h3>
            <a class="item" href="https://github.com/aforensics/HiddenVM"
              >HiddenVM – Use any desktop OS without leaving a trace</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 10:16:01</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39776745"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39776199">
          <h3>
            <a class="item" href="https://github.com/paveldedik/ludic"
              >Ludic: New framework for Python with seamless Htmx support</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 08:57:17</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39776199"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39775304">
          <h3>
            <a class="item" href="https://file770.com/vernor-vinge-1944-2024/"
              >Vernor Vinge has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 06:08:40</span
              ><span class="points-container"
                >Points: <span class="points">877</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39775304"
                  >Comments</a
                ><span class="descendants">: 238</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39771925">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Crookes_radiometer"
              >Crookes Radiometer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-20 @ 20:56:41</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39771925"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39771878">
          <h3>
            <a
              class="item"
              href="https://jcarroll.com.au/2023/07/07/array-languages-r-vs-apl/"
              >Array Languages: R vs. APL (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-20 @ 20:52:59</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39771878"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39757394">
          <h3>
            <a
              class="item"
              href="https://webkit.org/blog/15190/implementing-vertical-form-controls/"
              >Implementing Vertical Form Controls</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 16:24:29</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39757394"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39755089">
          <h3>
            <a
              class="item"
              href="https://medium.com/@calebleak/fast-virtual-functions-hacking-the-vtable-for-fun-and-profit-25c36409c5e0"
              >Fast Virtual Functions: Hacking the VTable for Fun and Profit</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 12:39:46</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39755089"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39754786">
          <h3>
            <a
              class="item"
              href="https://softwareengineeringstandard.com/2024/03/19/ngrok-alternative-open-source/"
              >Tunnelmole, an ngrok alternative (open source)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 11:46:38</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39754786"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39741096">
          <h3>
            <a
              class="item"
              href="https://utcc.utoronto.ca/~cks/space/blog/tech/WriteBufferingAndSyncs"
              >Disk write buffering and its interactions with write flushes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 07:04:26</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39741096"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
