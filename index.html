<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37863776">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2023/10/12/flexport-is-laying-off-20percent-of-its-workforce.html"
              >Flexport is laying off 20% of its workforce</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 22:03:55</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37863776"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37863583">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/handle-com/jobs/lgchJ3v-abm-campaigns-manager"
              >Handle.com (YC W19) Is Hiring (ABM Manager)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 21:45:51</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37863512">
          <h3>
            <a
              class="item"
              href="https://guidebookgallery.org/screenshots/win95"
              >Screenshots from Windows 95</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 21:39:47</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37863512"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37863309">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2023/10/12/23914915/ai-replicas-likeness-law-no-fakes-copyright"
              >No Fakes Act wants to protect actors and singers from
              unauthorized AI replicas</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 21:21:05</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37863309"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37863126">
          <h3>
            <a
              class="item"
              href="https://www.anandtech.com/show/21091/tsmc-ecosystem-for-2nm-chip-development-is-nearing-completion"
              >TSMC: Ecosystem for 2nm Chip Development Is Nearing Completion</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 21:04:10</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37863126"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37862606">
          <h3>
            <a
              class="item"
              href="https://ruoyusun.com/2023/10/12/one-game-six-platforms.html"
              >One game, by one man, on six platforms: The good, the bad and the
              ugly</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 20:14:46</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37862606"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37861686">
          <h3>
            <a
              class="item"
              href="https://spaceflight101.com/iss/rodent-habitat/"
              >ISS Rodent Habitat</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 19:11:47</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37861686"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37861589">
          <h3>
            <a
              class="item"
              href="https://www.nginx.com/blog/http-2-rapid-reset-attack-impacting-f5-nginx-products/"
              >HTTP/2 rapid reset attack impacting Nginx products</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 19:04:50</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37861589"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37860819">
          <h3>
            <a
              class="item"
              href="https://generatingconversation.substack.com/p/openai-is-too-cheap-to-beat"
              >OpenAI is too cheap to beat</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 18:16:09</span
              ><span class="points-container"
                >Points: <span class="points">232</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37860819"
                  >Comments</a
                ><span class="descendants">: 259</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37860172">
          <h3>
            <a class="item" href="https://clippings.june07.com"
              >Show HN: I got tired of reading "This posting has been deleted by
              its author"</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 17:27:51</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37860172"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37859905">
          <h3>
            <a
              class="item"
              href="https://www.vox.com/2015/1/15/7551873/jaywalking-history"
              >Automakers invented the crime of jaywalking (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 17:05:03</span
              ><span class="points-container"
                >Points: <span class="points">247</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37859905"
                  >Comments</a
                ><span class="descendants">: 210</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37859637">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2023/10/10/us/schools-pandemic-defense-department.html"
              >Schools for children of military achieve results rarely seen in
              public education</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 16:47:10</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37859637"
                  >Comments</a
                ><span class="descendants">: 183</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37859437">
          <h3>
            <a class="item" href="https://dynomight.substack.com/p/midwit-home"
              >The midwit home</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 16:31:17</span
              ><span class="points-container"
                >Points: <span class="points">268</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37859437"
                  >Comments</a
                ><span class="descendants">: 212</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37859388">
          <h3>
            <a
              class="item"
              href="https://prl.khoury.northeastern.edu/blog/2016/08/03/a-few-cores-too-many/"
              >A few cores too many (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 16:26:56</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37859388"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37859261">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/depth-of-field"
              >Impossible photo feat now possible via holography</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 16:18:02</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37859261"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37859085">
          <h3>
            <a class="item" href="https://www.desmos.com/3d"
              >Desmos 3D graphing calculator</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 16:05:23</span
              ><span class="points-container"
                >Points: <span class="points">274</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37859085"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37857991">
          <h3>
            <a
              class="item"
              href="https://blog.withedge.com/p/when-xml-in-word-became-illegal"
              >When XML in Word Became Illegal</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 14:49:31</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37857991"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37857765">
          <h3>
            <a class="item" href="https://www.diceright.com/"
              >Show HN: I built a virtual tabletop for playing Dungeons and
              Dragons</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 14:35:56</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37857765"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
            <div class="text">
              <a href="https://tinyurl.com/diceright"
                >https://tinyurl.com/diceright</a
              >. And there’s a list of the main features right on the homepage.
              <p>
                It’s a Ruby on Rails site that makes heavy use of action cable
                for keeping the maps and tokens in sync for all players. On the
                front end, I’m using HTML canvas for the maps and a js library
                called fabric.js for interacting with the canvas. Otherwise,
                just jQuery on the front end. I optimized it all to work on
                mobile too.
              </p>
              <p>
                I built this as a side project for fun over of the past couple
                years. It took a lot longer than expected, but it was also a lot
                of fun. I did all the design / UX for it too which was a
                struggle at first but was a great learning experience.
              </p>
              <p>
                Let me know what you think and if you have any questions.
                Thanks!
              </p>
            </div>
          </section>
        </section>
        <section id="37857544">
          <h3>
            <a class="item" href="https://12factor.net/"
              >The Twelve-Factor App (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 14:19:46</span
              ><span class="points-container"
                >Points: <span class="points">329</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37857544"
                  >Comments</a
                ><span class="descendants">: 202</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37857521">
          <h3>
            <a
              class="item"
              href="https://www.interconnects.ai/p/ai-research-job-market"
              >The AI research job market</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 14:18:07</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37857521"
                  >Comments</a
                ><span class="descendants">: 150</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37857417">
          <h3>
            <a class="item" href="https://scrollprize.org/firstletters"
              >First word discovered in unopened Herculaneum scroll by CS
              student</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 14:11:18</span
              ><span class="points-container"
                >Points: <span class="points">352</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37857417"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37857231">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37857231"
              >Ask HN: Show me your half baked project</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 13:58:38</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37857231"
                  >Comments</a
                ><span class="descendants">: 184</span></span
              >
            </h4>
            <div class="text">
              <p>
                Show us your half baked, not really ready for prime time
                projects.
              </p>
              <p>
                Also, if you need any help with a project, a startup, or an
                idea, just post it here.
              </p>
            </div>
          </section>
        </section>
        <section id="37856754">
          <h3>
            <a
              class="item"
              href="https://www.atlassian.com/blog/announcements/atlassian-acquires-loom"
              >Atlassian Acquires Loom</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 13:17:50</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37856754"
                  >Comments</a
                ><span class="descendants">: 330</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37855719">
          <h3>
            <a
              class="item"
              href="https://www.rit.edu/vignellicenter/product-timecapsule/nasa-capillary-cup"
              >NASA: Capillary Cup</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 11:18:50</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37855719"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37854846">
          <h3>
            <a class="item" href="https://openintro-ims2.netlify.app/"
              >Introduction to Modern Statistics</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 08:45:10</span
              ><span class="points-container"
                >Points: <span class="points">563</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37854846"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37852185">
          <h3>
            <a
              class="item"
              href="https://www.cambridge.org/core/journals/science-in-context/article/true-to-form-media-and-data-technologies-of-selfinscription/61C1F69BA159B18E0567DECD4D236890"
              >True to form: Media and data technologies of self-inscription</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-12 @ 00:42:11</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37852185"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37850556">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/space/2023/10/nasa-finds-water-and-organics-in-asteroid-sample-possible-clues-to-origin-of-life/"
              >NASA finds water and organics in Bennu asteroid sample</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 21:36:16</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37850556"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37844979">
          <h3>
            <a
              class="item"
              href="https://blog.alien177.ca/from-getaddrinfo-to-ip/"
              >Extracting IP from getaddrinfo call</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 14:38:04</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37844979"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37839458">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2023-10-copycat-nutrient-pancreatic-tumors-starving.html"
              >Copycat nutrient leaves pancreatic tumors starving, may inform
              cancer treatment</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 00:15:32</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37839458"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37839417">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-10-pre-columbian-agave-persisting-arizona-landscapes.html"
              >Researchers find pre-Columbian agave plants persisting in Arizona
              landscapes</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-11 @ 00:10:34</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37839417"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
