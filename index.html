<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43017010">
          <h3>
            <a
              class="item"
              href="https://www.theturnsignalblog.com/the-subtle-art-of-designing-physical-control-for-cars/"
              >The Subtle Art of Designing Physical Controls for Cars</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 19:15:02</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43017010"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43016931">
          <h3>
            <a
              class="item"
              href="https://www.thedrive.com/news/tesla-cybertruck-drove-itself-into-a-pole-owner-says-thank-you-tesla"
              >Tesla Cybertruck Drives Itself into a Pole, Owner Says 'Thank You
              Tesla'</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 19:09:25</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43016931"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43016802">
          <h3>
            <a class="item" href="https://data.perkins.org/"
              >Database of 750 companies building for people with
              disabilities</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 19:01:46</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43016802"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43016574">
          <h3>
            <a class="item" href="https://obscura.net/blog/bootstrapping-trust/"
              >Trust, 2-Party Relays, and QUIC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 18:44:48</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43016574"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43016353">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-025-00394-8"
              >Japan can be a science heavyweight once more – if it rethinks
              funding</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 18:30:13</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43016353"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43016340">
          <h3>
            <a
              class="item"
              href="https://twitter.com/petermattis/status/1889080982273163466"
              >Go's new map implementation in 1.24 is powered by Swiss Tables</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 18:29:29</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43016340"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43015713">
          <h3>
            <a
              class="item"
              href="https://fortune.com/2025/02/10/unitedhealth-defamation-law-firm-social-media/"
              >UnitedHealth hired a defamation law firm to go after social media
              posts criticiz</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 17:44:34</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43015713"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43015387">
          <h3>
            <a
              class="item"
              href="https://blog.jetbrains.com/kotlin/2025/02/kotlin-multiplatform-tooling-shifting-gears/"
              >JetBrains Fleet drops support for Kotlin Multiplatform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 17:17:55</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43015387"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43015267">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43015267"
              >Launch HN: A0.dev (YC W25) – React Native App Generator</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 17:08:35</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43015267"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
            <div class="text">
              <a href="https://a0.dev">https://a0.dev</a>). a0.dev is a platform
              built to cut down React Native development time from weeks to just
              a few hours.
              <p>
                We’ve been building mobile apps together for seven years and
                have had several successes. One thing that’s always bothered us
                though is how much harder it is to build a mobile app than a
                website. If you’ve built an app with react native before you’re
                familiar with the pains of working with both Xcode and Android
                Studio, writing tons of boilerplate before you can even start
                making the app, setting up state management, and of course going
                through the dreaded app review. We decided to build a platform
                that would make the app development process faster.
              </p>
              <p>
                We’ve seen the success of new code-gen platforms like v0 and
                wanted something for react native that goes further. We built an
                AI app generator that takes a user's prompt and creates a custom
                react native app with an instant live preview.
              </p>
              <p>
                Here’s a 5min demo where we recreated the Hacker News UI:
                <a href="https://youtu.be/f3lzBRBUous"
                  >https://youtu.be/f3lzBRBUous</a
                >
              </p>
              <p>
                a0.dev is great for quickly prototyping components and screens
                in React Native and users are able to copy the code from our
                generator into their preferred development environment. Our
                landing page has a couple of example prompts, but we encourage
                you to get creative when trying it out. We’ve had success
                generating not only functional screens like an Instagram Feed
                but also 2d games like Minesweeper or Flappy Bird.
              </p>
              <p>
                Our chat has a “UI Expert” and “Advanced Logic” model users can
                switch between depending on the task at hand. Users can upgrade
                from working on a single screen to creating a full app by
                clicking on the “Need a Full App” button in the top right of the
                page. This changes the scope from a standalone chat with a
                single file to a full project that can include multiple chats
                and files. We launched an IOS app that users can download in
                order to preview the app on a physical device. We find that many
                apps look and feel better on a physical device so we recommend
                trying it out.
              </p>
              <p>
                Our goal is to continue to improve the app generator while
                adding more features to help developers get their apps to the
                app store and make money from those apps. The main features on
                our roadmap right now are a Supabase integration and a “one
                click submit” button to let developers publish their app to the
                App Store.
              </p>
              <p>
                There are a few limitations to note. We’re working on releasing
                our Android app, but Android users should be able to preview
                their app using the Expo Go App. The app is running React Native
                Web in the browser so any dependencies that don’t support web
                won’t work with the web preview but should work on the phone.
                There are also some dependencies that our system can’t handle
                because they require native modules that aren’t packaged into
                our app currently.
              </p>
              <p>
                We hope you guys will check it out and try making an app with
                a0.dev. We’re available on Discord around the clock to help
                developers with any problems they may face and want to guide
                people to actually releasing their app on the App Store. Let us
                know what features you’d like to see and any problems you’ve
                faced building apps, we’d love to hear about your experience.
              </p>
              <p>
                Here’s the link again to check it out: (<a href="https://a0.dev"
                  >https://a0.dev</a
                >)
              </p>
              <p>
                We dropped the need to sign up for the first message so you can
                just jump in and try it out.
              </p>
              <p>Looking forward to your thoughts!</p>
            </div>
          </section>
        </section>
        <section id="43015169">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/legion-health/jobs/3pA8uX7-senior-backend-engineer-event-driven-architecture-ai-enabled-systems"
              >Legion Health (YC S21, AI-Driven Psychiatry) Hiring Founding Back
              End Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 17:00:30</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43014918">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2502.05253"
              >LLMs Can Teach Themselves to Better Predict the Future</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 16:40:20</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43014918"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43014573">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2502.06560"
              >Time to Act on the Risk of Efficient Personalized Text
              Generation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 16:14:03</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43014573"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43014418">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/technology/e-ink-kaleido-outdoor-3-75-inch-displays/"
              >E Ink's color ePaper tech gets supersized for outdoor displays</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 16:01:19</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43014418"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43014408">
          <h3>
            <a
              class="item"
              href="https://chipsandcheese.com/p/intels-battlemage-architecture"
              >Intel's Battlemage Architecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 16:00:59</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43014408"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43014070">
          <h3>
            <a
              class="item"
              href="https://andrews.substack.com/p/get-in-loser-were-rewinding-the-stack"
              >Get in loser. We're rewinding the stack</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 15:40:11</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43014070"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43013615">
          <h3>
            <a
              class="item"
              href="https://haterade.substack.com/p/i-tasted-hondas-spicy-rodent-repelling"
              >I tasted Honda's spicy rodent-repelling tape and I will do it
              again (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 15:08:08</span
              ><span class="points-container"
                >Points: <span class="points">647</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43013615"
                  >Comments</a
                ><span class="descendants">: 214</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43013431">
          <h3>
            <a
              class="item"
              href="https://www.backblaze.com/blog/backblaze-drive-stats-for-2024/"
              >Backblaze Drive Stats for 2024</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 14:55:45</span
              ><span class="points-container"
                >Points: <span class="points">212</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43013431"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43012862">
          <h3>
            <a
              class="item"
              href="https://rubenerd.com/boring-tech-is-mature-not-old/"
              >Boring tech is mature, not old</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 14:08:22</span
              ><span class="points-container"
                >Points: <span class="points">356</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43012862"
                  >Comments</a
                ><span class="descendants">: 187</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43012751">
          <h3>
            <a
              class="item"
              href="https://www.phoronix.com/news/FLAC-1.5-Released"
              >FLAC 1.5 Delivers Multi-Threaded Encoding</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 13:58:01</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43012751"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43012714">
          <h3>
            <a class="item" href="https://anchoreum.com"
              >Anchoreum: A game for learning CSS anchor positioning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 13:54:01</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43012714"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43010814">
          <h3>
            <a
              class="item"
              href="https://defragzone.substack.com/p/techs-dumbest-mistake-why-firing"
              >Firing programmers for AI will destroy everything</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 09:42:42</span
              ><span class="points-container"
                >Points: <span class="points">473</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43010814"
                  >Comments</a
                ><span class="descendants">: 603</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43010365">
          <h3>
            <a
              class="item"
              href="http://peter.eisentraut.org/blog/2025/02/11/how-about-trailing-commas-in-sql"
              >How about trailing commas in SQL?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 08:26:16</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43010365"
                  >Comments</a
                ><span class="descendants">: 191</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43009850">
          <h3>
            <a
              class="item"
              href="https://semiwiki.com/semiconductor-services/techinsights/352972-iedm-2025-tsmc-2nm-process-disclosure-how-does-it-measure-up/"
              >TSMC 2nm Process Disclosure – How Does It Measure Up?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 07:05:39</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43009850"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43008920">
          <h3>
            <a
              class="item"
              href="https://cacm.acm.org/research/metas-hyperscale-infrastructure-overview-and-insights/"
              >Meta’s Hyperscale Infrastructure: Overview and Insights</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 04:19:41</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43008920"
                  >Comments</a
                ><span class="descendants">: 153</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43008879">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/news/609207/nvidia-rtx-5090-power-connector-melting-burning-issues"
              >Nvidia's RTX 5090 power connectors are melting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 04:13:47</span
              ><span class="points-container"
                >Points: <span class="points">220</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43008879"
                  >Comments</a
                ><span class="descendants">: 220</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42999297">
          <h3>
            <a
              class="item"
              href="https://ewintr.nl/posts/2025/building-a-personal-private-ai-computer-on-a-budget/"
              >Building a personal, private AI computer on a budget</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 11:59:41</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42999297"
                  >Comments</a
                ><span class="descendants">: 158</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42998431">
          <h3>
            <a class="item" href="https://seen-v2.vercel.app/"
              >Show HN: Seen – Virtual list rendering with 1M+ notes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 09:22:29</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42998431"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
            <div class="text">
              <p>
                Hello HN! I've been working on creating a new note-taking app
                called Seen. Right now, it's really just a preview: virtual-list
                rendering ~1,000,000 notes in a masonry layout, while trying to
                minimize CPU and memory usage as much as possible.
              </p>
              <p>Seen currently has:</p>
              <p>- A client-side search feature</p>
              <p>
                - Creating, updating, deleting the topmost note (locally; no
                changes are saved to any server)
              </p>
              <p>
                - Automatic repacking of the masonry layout when the window
                width changes
              </p>
              <p>- A lot of bugs, I'm sure</p>
              <p>
                I reached a point where I thought I was ready to show the Seen
                to the world, and this is it. It's pretty basic, I know, but I'm
                really proud of it.
              </p>
              <p>
                Seen was born out of an experiment to see just how fast things
                can become if you use the right techniques, and will (hopefully)
                achieve this dream sometime in the near future. My vision for
                Seen is to create something that can handle a lot of notes while
                using the least amount of resources. If you've got any
                suggestions or bugs, they're welcome in the comments!
              </p>
              <p>
                A little about how Seen works: during the first visit, Seen
                caches note heights for the specific window width. Seen also
                caches the HTML output for the Markdown notes. It caches height
                by the key SHA256(title + note content), and the
                Markdown-to-HTML renders by the key SHA256(note content). It
                uses this cache every other time instead of recalculating,
                meaning that if most of the content remains unchanged, Seen can
                render things pretty fast. Caches are saved to IndexedDB.
              </p>
              <p>
                When window width changes, the amount of text that can fit in a
                line also changes. So, Seen caches heights for specific window
                widths as well, putting the width in the key. Scrolling triggers
                an event handler that calculates the current viewport and finds
                &amp; renders all notes that are visible (or partially visible)
                with a buffer of a 600px.
              </p>
              <p>
                When a note is deleted or inserted, the entire layout is
                re-rendered. I plan on optimizing this to only re-render the
                specific column, which is what happens anyway when a note is
                updated. Updated notes create new caches (as they should).
              </p>
            </div>
          </section>
        </section>
        <section id="42998375">
          <h3>
            <a class="item" href="https://rust-for-linux.com/rust-kernel-policy"
              >Rust Kernel Policy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 09:14:59</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42998375"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990948">
          <h3>
            <a
              class="item"
              href="https://www.latacora.com/blog/2019/07/24/how-not-to/"
              >How (not) to sign a JSON object (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 14:38:52</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990948"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42978394">
          <h3>
            <a
              class="item"
              href="https://github.com/moses297/doom-on-google-sheets"
              >Run Doom on Google Sheets</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 22:47:53</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42978394"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
