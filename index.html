<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39209814">
          <h3>
            <a class="item" href="https://deepseekcoder.github.io/"
              >DeepSeek Coder: Let the Code Write Itself</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 21:43:40</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39209814"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39209687">
          <h3>
            <a class="item" href="http://mewo2.com/notes/terrain/"
              >Generating Fantasy Maps (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 21:31:44</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39209687"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39209684">
          <h3>
            <a class="item" href="https://gitlab.inria.fr/cpaperma/nondet"
              >Non-deterministic execution of Python functions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 21:31:29</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39209684"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39209469">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/tech-policy/2024/01/comcast-to-stop-calling-entire-network-10g-as-name-is-ruled-misleading/"
              >Comcast reluctantly agrees to stop its misleading "10G Network"
              claims</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 21:10:13</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39209469"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39209356">
          <h3>
            <a class="item" href="https://www.easypost.com/careers"
              >EasyPost (YC S13) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 21:01:09</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39209352">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/01/31/volt_typhoon_botnet/"
              >FBI confirms it issued remote kill command to blow out Volt
              Typhoon's botnet</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 21:00:53</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39209352"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39208673">
          <h3>
            <a
              class="item"
              href="https://neimanslab.org/2024-01-31/why-i-moved-my-blog-ipfs-to-server.html"
              >I Moved My Blog from IPFS to a Server</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 20:07:02</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39208673"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39208652">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39208652"
              >Ask HN: Advice for turning my side project into a real
              business</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 20:05:04</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39208652"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’ve recently put a lot of thought into the product and realized
                that there is a real gap in the market that I can fill and make
                this into a real business. This requires a pretty significant
                amount of work, which I’m slowly chipping away at with 2-3 hours
                per day. Of course there may be unknown unknowns but the path to
                something like ~$1M/yr seems very clear to me.
              </p>
              <p>
                Circumstances at my current day job have been getting
                progressively worse and I think it’s time to move on. I’m not
                full-burnout unhappy (yet), but getting more resentful every
                day. Unfortunately I don’t have enough cash saved up for
                significant runway. I’m 35 with family and living in the US so
                eating ramen and sleeping on a friends couch isn’t an option.
              </p>
              <p>
                I’m trying to figure out my options. Maybe try to find angel
                funding. Maybe a business loan (is that even a thing?). Or
                should I just grind it out and stick with my current job.
              </p>
              <p>
                Appreciate any and all advice. Especially if you’ve been in my
                position
              </p>
            </div>
          </section>
        </section>
        <section id="39208451">
          <h3>
            <a class="item" href="https://2mb.codes/~cmb/ollama-bot/"
              >Show HN: Some blind hackers are bridging IRC to LMMs running
              locally</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 19:50:59</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39208451"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39208029">
          <h3>
            <a
              class="item"
              href="https://qz.com/1366484/give-ai-curiosity-and-it-will-watch-tv-forever"
              >Give AI curiosity, and it will watch TV forever (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 19:15:11</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39208029"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39207872">
          <h3>
            <a class="item" href="https://www.arctic81.com"
              >Arctic Adventure: A Lost 1981 TRS-80 Adventure Game</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 19:00:45</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39207872"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39207291">
          <h3>
            <a
              class="item"
              href="https://openai.com/research/building-an-early-warning-system-for-llm-aided-biological-threat-creation"
              >Building an early warning system for LLM-aided biological threat
              creation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 18:15:26</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39207291"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39206966">
          <h3>
            <a class="item" href="https://github.com/kando-menu/kando"
              >Kando: The Cross-Platform Pie Menu</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 17:51:54</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39206966"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39206911">
          <h3>
            <a
              class="item"
              href="https://www.nih.gov/news-events/nih-research-matters/hearing-aids-slow-cognitive-decline-people-high-risk"
              >Hearing aids slow cognitive decline in people at high risk</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 17:47:32</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39206911"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39206731">
          <h3>
            <a
              class="item"
              href="https://interviewing.io/blog/how-hard-is-it-to-cheat-with-chatgpt-in-technical-interviews"
              >Testing how hard it is to cheat with ChatGPT in interviews</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 17:35:09</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39206731"
                  >Comments</a
                ><span class="descendants">: 113</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39206529">
          <h3>
            <a class="item" href="https://www.smspower.org/SegaAI/Index"
              >Sega AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 17:22:48</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39206529"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39206375">
          <h3>
            <a
              class="item"
              href="https://llava-vl.github.io/blog/2024-01-30-llava-1-6/"
              >LLaVA-1.6: Improved reasoning, OCR, and world knowledge</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 17:13:05</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39206375"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39205784">
          <h3>
            <a
              class="item"
              href="https://blog.trailofbits.com/2024/01/31/introducing-differ-a-new-tool-for-testing-and-validating-transformed-programs/"
              >Differ: Tool for testing and validating transformed programs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 16:33:50</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39205784"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39205725">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39205725"
              >Launch HN: Encord (YC W21) – Unit testing for computer vision
              models</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 16:29:12</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39205725"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <a href="https://encord.com/active/">https://encord.com/active/</a
              >) [1].
              <p>
                Imagine you're building a device that needs to see and
                understand the world around it – like a self-driving car or a
                robot that sorts recycling. To do this, you need a vision model
                that processes the real world as a sequence of frames and makes
                decisions based on what it sees.
              </p>
              <p>
                Bringing such models to production is hard. You can’t just train
                it once and then it works—you need to constantly test and
                improve it to make sure it understands the world correctly. For
                example, you don't want a self-driving car to confuse a stop
                sign with a billboard, or classify a pedestrian as an unknown
                object [2].
              </p>
              <p>
                This is where Encord Active comes in. It's a toolkit that helps
                developers “unit test”, understand, and debug their vision
                models. We put “unit test” in quotes because while it isn’t
                classic software unit testing, the idea is similar: to see which
                <i>parts</i> of your model are working well and which aren't.
                Here’s a short video that shows the tool:
                <a href="https://youtu.be/CD7_lw0PZNY?si=MngLE7PwH3s2_VTK"
                  >https://youtu.be/CD7_lw0PZNY?si=MngLE7PwH3s2_VTK</a
                >
                [3]
              </p>
              <p>
                For instance, if you're working on a self-driving car, Encord
                Active can help you figure out why the car is confusing stop
                signs with billboards. It lets you dive into the data the model
                has seen and understand what's going wrong. Maybe the model
                hasn't seen enough stop signs at night, or maybe it gets
                confused when the sign is partially blocked by a tree.
              </p>
              <p>
                Having extensive unit test coverage won’t guarantee that your
                software (or vision model) is correct, but it helps a lot, and
                is awesome at catching regressions (i.e. things that work at one
                point and then stop working later). For example, consider
                retraining your model with a 25% larger dataset, including
                examples from a new US state characterized by distinctly
                different weather conditions (e.g., California vs. Vermont).
                Intuitively, one might think ‘the more signs, the merrier.’
                However, adding new signs can confuse the model, perhaps it’s
                suddenly biased to rely mostly on surroundings because signs are
                covered in snow. This can cause the model to regress and fall
                below your desired performance threshold (e.g., 85% accuracy)
                for existing test data.
              </p>
              <p>
                These issues are not easily solvable by making changes to the
                model architecture or hyperparameter tuning (e.g., adjusting
                learning rates), especially as the types of problems you are
                trying to solve by the model get more complex. Rather, they are
                solved by training or fine-tuning the model on more of "the
                right" data.
              </p>
              <p>
                Contrary to purely embeddings-based data exploration and model
                analytics/evaluation tools that help folks discover
                surface-level problems without offering suggestions for solving
                them, Encord Active will give concrete recommendations and
                actionable steps to solve the identified model and data errors
                by automatically analyzing your model performance. Specifically,
                the system detects the weakest and strongest aspects of the data
                distribution, serving as a guide for where to focus for
                improving subsequent iterations of your model training. The
                analysis encompasses various factors: the ‘qualities’ of the
                images (size, brightness, blurriness), the geometric
                characteristics of objects and model predictions (aspect ratio,
                outliers), as well as metadata and class distribution. It
                correlates these factors with chosen model performance metrics,
                surfacing low performing subsets for attention, providing you
                with actionable next steps. One of our early customers, for
                example, reduced their dataset size by 35% but increased their
                model’s accuracy (in this case, the mAP score) by 20% [4], which
                is a huge improvement in this domain). This is counterintuitive
                to most people as the thinking is generally “more data = better
                models”.
              </p>
              <p>
                If any of these experiences resonate with you, we are eager for
                you to try out the product and hear your opinions and feedback.
                We are available to answer any questions you may have!
              </p>
              <p>
                [1]
                <a href="https://encord.com/active/"
                  >https://encord.com/active/</a
                >
              </p>
              <p>
                [2]
                <a href="https://en.wikipedia.org/wiki/Death_of_Elaine_Herzberg"
                  >https://en.wikipedia.org/wiki/Death_of_Elaine_Herzberg</a
                >
              </p>
              <p>
                [3]
                <a href="https://youtu.be/CD7_lw0PZNY?si=MngLE7PwH3s2_VTK"
                  >https://youtu.be/CD7_lw0PZNY?si=MngLE7PwH3s2_VTK</a
                >
              </p>
              <p>
                [4]
                <a href="https://encord.com/customers/automotus-customer-story/"
                  >https://encord.com/customers/automotus-customer-story/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39205020">
          <h3>
            <a class="item" href="https://neal.fun/infinite-craft/"
              >Infinite Craft</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 15:34:28</span
              ><span class="points-container"
                >Points: <span class="points">558</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39205020"
                  >Comments</a
                ><span class="descendants">: 247</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39204918">
          <h3>
            <a class="item" href="https://www.thefarside.com/"
              >The Far Side – By Gary Larson</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 15:27:06</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39204918"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39204622">
          <h3>
            <a class="item" href="https://jepsen.io/analyses/ravendb-6.0.2"
              >RavenDB 6.0.2 (A Jepsen Report)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 15:04:11</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39204622"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39204314">
          <h3>
            <a
              class="item"
              href="https://fly.io/blog/macaroons-escalated-quickly/"
              >Macaroons Escalated Quickly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 14:39:19</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39204314"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39204162">
          <h3>
            <a class="item" href="https://hardfault.life/p/big-seven-segment"
              >Reverse-Engineering a Scoreboard Display</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 14:26:54</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39204162"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39201643">
          <h3>
            <a class="item" href="https://github.com/msasikanth/twine"
              >Show HN: Twine – Open source multiplatform RSS app</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 09:08:01</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39201643"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39201332">
          <h3>
            <a
              class="item"
              href="https://dotat.at/@/2024-01-29-four-point-egg.html"
              >Constructing a Four-Point Egg</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 08:15:44</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39201332"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39201308">
          <h3>
            <a class="item" href="https://www.deathbynumbers.org/"
              >Death by Numbers – The London Bills of Mortality</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 08:11:06</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39201308"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39201182">
          <h3>
            <a class="item" href="https://mitenmit.github.io/gpt/"
              >Show HN: A simple ChatGPT prompt builder</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-31 @ 07:47:34</span
              ><span class="points-container"
                >Points: <span class="points">241</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39201182"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
            <div class="text">Any Ideas/Suggestions are welcome :)</div>
          </section>
        </section>
        <section id="39187884">
          <h3>
            <a
              class="item"
              href="https://www.sciencenews.org/article/quasicrystal-einstein-tile-hat-shape"
              >A predicted quasicrystal is based on the 'einstein' tile known as
              the hat</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 09:03:37</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39187884"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39174941">
          <h3>
            <a class="item" href="http://niplav.site/pipe_rings.html"
              >Pipe Rings (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-29 @ 10:55:30</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39174941"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
