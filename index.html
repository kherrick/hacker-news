<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45989650">
          <h3>
            <a
              class="item"
              href="https://mavmatrix.uta.edu/electricaleng_theses/337/"
              >Implementation of a Java Processor on a FPGA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-20 @ 06:40:46</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45989650"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45989469">
          <h3>
            <a class="item" href="https://stitcher.io/blog/new-in-php-85"
              >PHP 8.5 gets released today, here's what's new</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-20 @ 06:07:01</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45989469"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45989394">
          <h3>
            <a class="item" href="https://github.com/openagents-org/openagents"
              >Show HN: An A2A-compatible, open-source framework for multi-agent
              networks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-20 @ 05:52:43</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45989394"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45989329">
          <h3>
            <a
              class="item"
              href="https://materialdistrict.com/material/basalt-woven-textile/"
              >Basalt Woven Textile</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-20 @ 05:41:06</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45989329"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45989186">
          <h3>
            <a
              class="item"
              href="https://www.in-ulm.de/%7Emascheck/various/shebang/"
              >#!magic, details about the shebang/hash-bang mechanism on various
              Unix flavours</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-20 @ 05:07:53</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45989186"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45987179">
          <h3>
            <a
              class="item"
              href="https://element.io/blog/verifying-your-devices-is-becoming-mandatory-2/"
              >Verifying your Matrix devices is becoming mandatory</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-20 @ 00:22:03</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45987179"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45985890">
          <h3>
            <a
              class="item"
              href="https://www.eff.org/deeplinks/2025/11/patent-office-about-make-bad-patents-untouchable"
              >The patent office is about to make bad patents untouchable</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 22:00:28</span
              ><span class="points-container"
                >Points: <span class="points">427</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45985890"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45985867">
          <h3>
            <a class="item" href="https://www.amoses.dev/blog/wifi-location/"
              >Precise geolocation via Wi-Fi Positioning System</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 21:58:47</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45985867"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45985506">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/tech/823337/switching-linux-gaming-desktop-cachyos"
              >Gaming on Linux has never been more approachable</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 21:30:02</span
              ><span class="points-container"
                >Points: <span class="points">399</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45985506"
                  >Comments</a
                ><span class="descendants">: 281</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45985196">
          <h3>
            <a
              class="item"
              href="https://amenzwa.github.io/stem/ComputingHistory/HowSlideRulesWork/"
              >How Slide Rules Work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 21:07:05</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45985196"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45985036">
          <h3>
            <a
              class="item"
              href="https://www.univie.ac.at/en/news/detail/forscherinnen-entdecken-grosse-sicherheitsluecke-in-whatsapp"
              >Researchers discover security vulnerability in WhatsApp</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 20:55:30</span
              ><span class="points-container"
                >Points: <span class="points">229</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45985036"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45984659">
          <h3>
            <a
              class="item"
              href="https://www.ntsb.gov:443/news/press-releases/Pages/NR20251118.aspx"
              >Loose wire leads to blackout, contact with Francis Scott Key
              bridge</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 20:26:43</span
              ><span class="points-container"
                >Points: <span class="points">341</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45984659"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45984282">
          <h3>
            <a
              class="item"
              href="https://lithub.com/robert-louis-stevensons-art-of-living-and-dying/"
              >Robert Louis Stevenson's Art of Living (and Dying)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 19:55:49</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45984282"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45984133">
          <h3>
            <a
              class="item"
              href="https://www.tfeb.org/fragments/2025/11/18/the-lost-cause-of-the-lisp-machines/"
              >The lost cause of the Lisp machines</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 19:44:07</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45984133"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45984112">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/news/political-even-handedness"
              >Measuring political bias in Claude</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 19:42:38</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45984112"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45983700">
          <h3>
            <a
              class="item"
              href="https://www.chrbutler.com/what-ai-is-really-for"
              >AI is a front for consolidation of resources and power</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 19:09:27</span
              ><span class="points-container"
                >Points: <span class="points">318</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45983700"
                  >Comments</a
                ><span class="descendants">: 237</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45982649">
          <h3>
            <a class="item" href="https://openai.com/index/gpt-5-1-codex-max/"
              >Building more with GPT-5.1-Codex-Max</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 18:01:59</span
              ><span class="points-container"
                >Points: <span class="points">408</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45982649"
                  >Comments</a
                ><span class="descendants">: 236</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45982162">
          <h3>
            <a
              class="item"
              href="https://it-notes.dragas.net/2025/11/19/static-web-hosting-intel-n150-freebsd-smartos-netbsd-openbsd-linux/"
              >Static Web Hosting on the Intel N150: FreeBSD, SmartOS, NetBSD,
              OpenBSD and Linu</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 17:22:46</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45982162"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45982073">
          <h3>
            <a class="item" href="https://ai.meta.com/sam3/"
              >Meta Segment Anything Model 3</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 17:14:51</span
              ><span class="points-container"
                >Points: <span class="points">476</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45982073"
                  >Comments</a
                ><span class="descendants">: 93</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45980760">
          <h3>
            <a class="item" href="https://mosaic.so"
              >Launch HN: Mosaic (YC W25) – Agentic Video Editing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 15:28:04</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45980760"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
            <div class="text">
              <a href="https://edit.mosaic.so">https://edit.mosaic.so</a>,
              <a href="https://docs.mosaic.so/">https://docs.mosaic.so/</a>,
              <a href="https://mosaic.so">https://mosaic.so</a>). Mosaic lets
              you create and run your own multimodal video editing agents in a
              node-based canvas. It’s different from traditional video editing
              tools in two ways: (1) the user interface and (2) the visual
              intelligence built into our agent.
              <p>
                We were engineers at Tesla and one day had a fun idea to make a
                YouTube video of Cybertrucks in Palo Alto. We recorded hours of
                cars driving by, but got stuck on how to scrub through all this
                raw footage to edit it down to just the Cybertrucks.
              </p>
              <p>
                We got frustrated trying to accomplish simple tasks in video
                editors like DaVinci Resolve and Adobe Premiere Pro. Features
                are hidden behind menus, buttons, and icons, and we often found
                ourselves Googling or asking ChatGPT how to do certain edits.
              </p>
              <p>
                We thought that surely now, with multimodal AI, we could
                accelerate this process. Better yet, an AI video editor could
                automatically apply edits based off what it sees and hears in
                your video. The idea quickly snowballed and we began our side
                quest to build “Cursor for Video Editing”.
              </p>
              <p>
                We put together a prototype and to our amazement, it was able to
                analyze and add text overlays based on what it saw or heard in
                the video. We could now automate our Cybertruck counting with a
                single chat prompt. That prototype is shown here:
                <a href="https://www.youtube.com/watch?v=GXr7q7Dl9X0"
                  >https://www.youtube.com/watch?v=GXr7q7Dl9X0</a
                >.
              </p>
              <p>
                After that, we spent a chunk of time building our own
                timeline-based video editor and making our multimodal copilot
                powerful and stateful. In natural language, we could now ask
                chat to help with AI asset generation, enhancements, searching
                through assets, and automatically applying edits like dynamic
                text overlays. That version is shown here:
                <a href="https://youtu.be/X4ki-QEwN40"
                  >https://youtu.be/X4ki-QEwN40</a
                >.
              </p>
              <p>
                After talking to users though, we realized that the chat UX has
                limitations for video: (1) the longer the video, the more time
                it takes to process. Users have to wait too long between chat
                responses. (2) Users have set workflows that they use across
                video projects. Especially for people who have to produce a lot
                of content, the chat interface is a bottleneck rather than an
                accelerant.
              </p>
              <p>
                That took us back to first principles to rethink what a
                “non-linear editor” really means. The result: a node-based
                canvas which enables you to create and run your own multimodal
                video editing agents.
                <a href="https://screen.studio/share/SP7DItVD"
                  >https://screen.studio/share/SP7DItVD</a
                >.
              </p>
              <p>
                Each tile in the canvas represents a video editing operation and
                is configurable, so you still have creative control. You can
                also branch and run edits in parallel, creating multiple
                variants from the same raw footage to A/B test different
                prompts, models, and workflows. In the canvas, you can see
                inline how your content evolves as the agent goes through each
                step.
              </p>
              <p>
                The idea is that canvas will run your video editing on
                autopilot, and get you 80-90% of the way there. Then you can
                adjust and modify it in an inline timeline editor. We support
                exporting your timeline state out to traditional editing tools
                like DaVinci Resolve, Adobe Premiere Pro, and Final Cut Pro.
              </p>
              <p>
                We’ve also used multimodal AI to build in visual understanding
                and intelligence. This gives our system a deep understanding of
                video concepts, emotions, actions, spoken word, light levels,
                shot types.
              </p>
              <p>
                We’re doing a ton of additional processing in our pipeline, such
                as saliency analysis, audio analysis, and determining objects of
                significance—all to help guide the best edit. These are things
                that we as human editors internalize so deeply we may not think
                twice about it, but reverse-engineering the process to build it
                into the AI agent has been an interesting challenge.
              </p>
              <p>
                Some of our analysis findings: Optimal Safe Rectangles:
                <a href="https://assets.frameapp.ai/mosaicresearchimage1.png"
                  >https://assets.frameapp.ai/mosaicresearchimage1.png</a
                >
                Video Analysis:
                <a href="https://assets.frameapp.ai/mosaicresearchimage2.png"
                  >https://assets.frameapp.ai/mosaicresearchimage2.png</a
                >
                Saliency Analysis:
                <a href="https://assets.frameapp.ai/mosaicresearchimage3.png"
                  >https://assets.frameapp.ai/mosaicresearchimage3.png</a
                >
                Mean Movement Analysis:
                <a href="https://assets.frameapp.ai/mosaicresearchimage4.png"
                  >https://assets.frameapp.ai/mosaicresearchimage4.png</a
                >
              </p>
              <p>
                Use cases for editing include: - Removing bad takes or creating
                script-based cuts from videos / talking-heads - Repurposing
                longer-form videos into clips, shorts, and reels (e.g. podcasts,
                webinars, interviews) - Creating sizzle reels or montages from
                one or many input videos - Creating assembly edits and rough
                cuts from one or many input videos - Optimizing content for
                various social media platforms (reframing, captions, etc.) -
                Dubbing content with voice cloning and lip syncing.
              </p>
              <p>
                We also support use cases for generating content such as motion
                graphic animations, cinematic captions, AI UGC content, adding
                contextual AI-generated B-Rolls to existing content, or
                modifying existing video footage (changing lighting, applying
                VFX).
              </p>
              <p>
                Currently, our canvas can be used to build repeatable agentic
                workflows, but we’re working on a fully autonomous agent which
                will be able to do things like: style transfer using existing
                video content, define its own editing sequence / workflow
                without needing a canvas, do research and pull assets from web
                references, and so on.
              </p>
              <p>
                You can try it today at
                <a href="https://edit.mosaic.so">https://edit.mosaic.so</a>. You
                can sign up for free and get started playing with the interface
                by uploading videos, making workflows on the canvas, and editing
                them in the timeline editor. We do paywall node runs to help
                cover model costs. Our API docs are at
                <a href="https://docs.mosaic.so">https://docs.mosaic.so</a>.
                We’d love to hear your feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="45980117">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/news/823750/european-union-ai-act-gdpr-changes"
              >Europe is scaling back GDPR and relaxing AI laws</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-19 @ 14:41:30</span
              ><span class="points-container"
                >Points: <span class="points">720</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45980117"
                  >Comments</a
                ><span class="descendants">: 793</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45970885">
          <h3>
            <a
              class="item"
              href="https://utcc.utoronto.ca/~cks/space/blog/unix/ShebangRelativePathSurprise"
              >A surprise with how '#!' handles its program argument in
              practice</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-18 @ 19:32:27</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45970885"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45958596">
          <h3>
            <a
              class="item"
              href="https://www.historytoday.com/archive/head-head/what-influence-has-bbc-had-history"
              >What influence has the BBC had on history?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 21:35:04</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45958596"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45951275">
          <h3>
            <a
              class="item"
              href="https://wiki.postmarketos.org/wiki/Dual_Booting/WiP"
              >Android/Linux Dual Boot</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 06:28:16</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45951275"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45947437">
          <h3>
            <a class="item" href="https://jamesakl.com/posts/cuda-ontology/"
              >CUDA Ontology</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-16 @ 18:56:56</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45947437"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45934665">
          <h3>
            <a class="item" href="https://github.com/vortex-data/vortex"
              >Vortex: An extensible, state of the art columnar file format</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-15 @ 02:55:06</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45934665"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45925109">
          <h3>
            <a class="item" href="https://github.com/uralys/check-projects"
              >CLI tool to check the Git status of multiple projects</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-14 @ 08:49:55</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45925109"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45915068">
          <h3>
            <a class="item" href="https://darwin-online.org.uk/"
              >The Complete Work of Charles Darwin Online</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-13 @ 14:10:43</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45915068"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45903273">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/how-to-identify-a-prime-number-without-a-computer/"
              >The Lucas-Lehmer Prime Number Test</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-12 @ 17:50:54</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45903273"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.md/8R0Fq">https://archive.md/8R0Fq</a>
            </div>
          </section>
        </section>
        <section id="45888759">
          <h3>
            <a
              class="item"
              href="https://www.theparisreview.org/blog/2025/11/11/what-really-happened-with-the-cia-and-the-paris-review-a-conversation-with-lance-richardson/"
              >What really happened with the CIA and The Paris Review?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-11 @ 15:54:42</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45888759"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
