<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="36074423">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2023/5/25/23736246/youtube-ending-stories-shorts-community-posts"
              >YouTube Is Killing Stories</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 18:42:12</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36074423"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36073957">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/opinion/articles/2023-05-25/the-us-might-be-only-aa"
              >The US Might Be Only AA+</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 18:03:40</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36073957"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36073467">
          <h3>
            <a class="item" href="https://www.finleycms.com/careers/"
              >Finley (YC W21) is hiring to reimagine the debt capital markets
              (US remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 17:21:24</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36073379">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2023/05/25/intel_proposes_dropping_16_bit_mode/"
              >Intel mulls cutting 16 and 32-bit support, booting straight into
              64-bit mode</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 17:15:00</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36073379"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36073241">
          <h3>
            <a class="item" href="https://gorilla.cs.berkeley.edu/"
              >Gorilla: LLM Connected with APIs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 17:05:00</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36073241"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36073020">
          <h3>
            <a
              class="item"
              href="https://theintercept.com/series/henry-kissinger-killing-fields/"
              >Kissinger's killing fields</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 16:48:06</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36073020"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36072524">
          <h3>
            <a
              class="item"
              href="https://supabase.com/blog/chatgpt-plugins-support-postgres"
              >ChatGPT plugins now support Postgres and Supabase</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 16:05:51</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36072524"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36072268">
          <h3>
            <a class="item" href="https://a16z.com/2023/05/25/ai-canon/"
              >AI Canon</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 15:47:20</span
              ><span class="points-container"
                >Points: <span class="points">230</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36072268"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36071675">
          <h3>
            <a class="item" href="https://www.bbc.com/news/health-65709834"
              >New superbug-killing antibiotic discovered using AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 15:07:27</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36071675"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36071397">
          <h3>
            <a
              class="item"
              href="https://www.jefftk.com/p/you-dont-always-need-indexes"
              >Cases where full scans are better than indexes</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 14:47:03</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36071397"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36071342">
          <h3>
            <a
              class="item"
              href="https://bit.kevinslin.com/p/leveraging-gpt-4-to-automate-the"
              >Lessons from Creating a VSCode Extension with GPT-4</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 14:42:36</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36071342"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36071183">
          <h3>
            <a class="item" href="https://www.val.town/v/rodrigotello.hnFollow"
              >Show HN: HN Follow – Follow Your Friends on HN</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 14:29:20</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36071183"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
            <div class="text">
              <p>
                The app was built in an experimental style on Val Town. We’re
                trying to create a new web primitive that you can:
              </p>
              <p>
                1. write like a function 2. run like a script 3. fork like a
                repo 4. install like an app
              </p>
              <p>
                This is our 5th iteration of this same “HN Follow” app. We
                launched the 3rd version here on Hacker News six months ago[1],
                but it was very kindly removed from the front page by dang in
                favor of us launching Val Town itself first, which we did in
                January[2].
              </p>
              <p>
                We’re trying to strike the right balance between something you
                can use and install with one click, and something you can
                infinitely customize. For example, you could fork
                `@rodrigoTello.hnFollowApp`[3] and change the input parameter
                from authors to a generic query, like I do here[4] to get
                notifications whenever “val town” is mentioned on HN. In
                addition to emailing myself (via `console.email`), I also send a
                message to our team’s Discord. The possibilities are endless,
                but it can also be overwhelming. We’re trying to find the
                balance where we help you navigate the space of possible
                integrations, without limiting you the way a no-code tool would.
                We would really appreciate your guys’ feedback and suggestions!
              </p>
              <p>
                [1] - HN Follow, first launch:
                <a href="https://news.ycombinator.com/item?id=33533830"
                  >https://news.ycombinator.com/item?id=33533830</a
                >
              </p>
              <p>
                [2] - Val Town launch:
                <a href="https://news.ycombinator.com/item?id=34343122"
                  >https://news.ycombinator.com/item?id=34343122</a
                >
              </p>
              <p>
                [3] - `@rodrigotello.hnFollowApp`:
                <a href="https://www.val.town/v/rodrigotello.hnFollowApp"
                  >https://www.val.town/v/rodrigotello.hnFollowApp</a
                >
              </p>
              <p>
                [4] - My fork of hnFollow:
                <a href="https://www.val.town/v/stevekrouse.hnValTown"
                  >https://www.val.town/v/stevekrouse.hnValTown</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="36070426">
          <h3>
            <a
              class="item"
              href="https://notes.eatonphil.com/2023-05-25-raft.html"
              >Implementing a distributed key-value store on top of implementing
              Raft in Go</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 13:26:47</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36070426"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36070090">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=36070090"
              >Show HN: Visual intuitive explanations of LLM concepts (LLM
              University)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 12:50:22</span
              ><span class="points-container"
                >Points: <span class="points">165</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36070090"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <p>
                We've just published a lot of original, visual, and intuitive
                explanations of concepts to introduce people to large language
                models.
              </p>
              <p>
                It's available for free with no sign-up needed and it includes
                text articles, some video explanations, and code
                examples/notebooks as well. And we're available to answer your
                questions in a dedicated Discord channel.
              </p>
              <p>You can find it here: https://llm.university/</p>
              <p>
                Having written
                https://jalammar.github.io/illustrated-transformer/, I've been
                thinking about these topics and how best to communicate them for
                half a decade. But this project is extra special to me because I
                got to collaborate on it with two of who I think of as some of
                the best ML educators out there. Luis Serrano of
                https://www.youtube.com/@SerranoAcademy and Meor Amer, author of
                "A Visual Introduction to Deep Learning"
                https://kdimensions.gumroad.com/l/visualdl
              </p>
              <p>
                We're planning to roll out more content to it (let us know what
                concepts interest you). But as of now, it has the following
                structure (With some links for highlighted articles for you to
                audit):
              </p>
              <p>---</p>
              <p>Module 1: What are Large Language Models</p>
              <p>
                - Text Embeddings (https://docs.cohere.com/docs/text-embeddings)
              </p>
              <p>
                - Similarity between words and sentences
                (https://docs.cohere.com/docs/similarity-between-words-and-sentences)
              </p>
              <p>- The attention mechanism</p>
              <p>
                - Transformer models
                (https://docs.cohere.com/docs/transformer-models HN Discussion:
                https://news.ycombinator.com/item?id=35576918)
              </p>
              <p>- Semantic search</p>
              <p>---</p>
              <p>Module 2: Text representation</p>
              <p>
                - Classification models
                (https://docs.cohere.com/docs/classification-models)
              </p>
              <p>
                - Classification Evaluation metrics
                (https://docs.cohere.com/docs/evaluation-metrics)
              </p>
              <p>- Classification / Embedding API endpoints</p>
              <p>- Semantic search</p>
              <p>- Text clustering</p>
              <p>
                - Topic modeling (goes over clustering Ask HN posts
                https://docs.cohere.com/docs/clustering-hacker-news-posts)
              </p>
              <p>- Multilingual semantic search</p>
              <p>- Multilingual sentiment analysis</p>
              <p>---</p>
              <p>Module 3: Text generation</p>
              <p>
                - Prompt engineering
                (https://docs.cohere.com/docs/model-prompting)
              </p>
              <p>- Use case ideation</p>
              <p>- Chaining prompts</p>
              <p>---</p>
              <p>
                A lot of the content originates from common questions we get
                from users of the LLMs we serve at Cohere. So the focus is more
                on application of LLMs than theory or training LLMs.
              </p>
              <p>Hope you enjoy it, open to all feedback and suggestions!</p>
            </div>
          </section>
        </section>
        <section id="36069847">
          <h3>
            <a
              class="item"
              href="https://www.math.cmu.edu/~jmackey/151_128/bws_book.pdf"
              >Everything you always wanted to know about mathematics (2013)
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 12:22:42</span
              ><span class="points-container"
                >Points: <span class="points">528</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36069847"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36069393">
          <h3>
            <a
              class="item"
              href="https://www.medievalists.net/2022/09/medieval-books-manuscripts-discovered-romania/"
              >Archive of medieval books and manuscripts discovered in Romanian
              church</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 11:32:45</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36069393"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36068896">
          <h3>
            <a class="item" href="https://deno.com/blog/v1.34"
              >Deno 1.34: Deno compile supports NPM packages</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 10:16:00</span
              ><span class="points-container"
                >Points: <span class="points">247</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36068896"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36068850">
          <h3>
            <a
              class="item"
              href="https://lightning.ai/pages/blog/how-to-finetune-gpt-like-large-language-models-on-a-custom-dataset/"
              >How to Finetune GPT Like Large Language Models on a Custom
              Dataset</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 10:06:38</span
              ><span class="points-container"
                >Points: <span class="points">318</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36068850"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36067983">
          <h3>
            <a class="item" href="https://github.com/vanjs-org/van"
              >VanJS (Vanilla JavaScript): smallest reactive UI framework</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 07:31:10</span
              ><span class="points-container"
                >Points: <span class="points">214</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36067983"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36065802">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=k_GTIL7AECQ"
              >The smartest slime [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 00:35:08</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36065802"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36065693">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-05-astronomers-explore-luminous-quasar.html"
              >Astronomers explore a recently discovered luminous quasar</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-25 @ 00:20:13</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36065693"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36064639">
          <h3>
            <a class="item" href="https://pixian.ai/remove-image-backgrounds"
              >Show HN: Image background removal without annoying
              subscriptions</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 22:26:59</span
              ><span class="points-container"
                >Points: <span class="points">335</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36064639"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
            <div class="text">
              <p>
                Removing the background from images is a surprisingly common
                image processing task, and AI has made it really easy. The
                technology has come a long way since segment leader remove.bg
                launched here on hn in Dec 2018 [1]. Chasing remove.bg's
                success, a legion of providers have come on the market offering
                varying levels of quality &amp; service.
              </p>
              <p>
                Despite there being a large number of competing services, most
                still price for very high (~95%?) gross margins. Furthermore,
                subscriptions make the effective unit price a lot higher than
                the list price for infrequent users, and requires effort &amp;
                attention to ensure you're getting value for money. This has
                prevented a host of use cases (e.g. infrequent professional /
                hobbyist) and business models (e.g. ad-supported websites &amp;
                mobile apps).
              </p>
              <p>
                We see this as an opportunity where we can jump to the market's
                logical conclusion to gain market share and build goodwill:
                cost-plus PAYGO pricing, i.e. the "S3 pricing model".
              </p>
              <p>
                So we've built yet-another image background removal service (
                <a href="https://pixian.ai">https://pixian.ai</a> - introductory
                post 6 months ago [2], a ton has been improved since then) but
                with a couple of twists:
              </p>
              <p>
                1. Quantified quality comparison (90-120% of remove.bg,
                depending on image category), free for you to check your own
                images so you can make an informed choice.
              </p>
              <p>
                2. Customer-friendly pricing (PAYGO @ 1-10% of competitors'
                subscriptions) with a generous free tier (and free while in
                beta).
              </p>
              <p>
                3. A novel API result format: Delta PNG [3], which offers
                excellent latency &amp; bandwidth savings. Especially useful for
                mobile apps.
              </p>
              <p>
                4. Operational transparency: actual volume &amp; latency metrics
                public, with more coming soon (all API providers should be
                showing this).
              </p>
              <p>
                There's of course more to it than just price and we see several
                sources of differentiation in this market: quality, price,
                capability, reliability, latency, and goodwill.
              </p>
              <p>
                As a new entrant we're looking to meet-or-beat the quality bar;
                beat on price, capability, reliability and latency; and to build
                up goodwill over time.
              </p>
              <p>
                Our goal is to make it a no-brainer for new accounts to choose
                us, and to provide the tools and guidance necessary for existing
                accounts to make the switch with confidence.
              </p>
              <p>We'd love for you to try it out and to hear your thoughts!</p>
              <p><a href="https://pixian.ai">https://pixian.ai</a></p>
              <p>
                [1]
                <a href="https://news.ycombinator.com/item?id=18697601"
                  >https://news.ycombinator.com/item?id=18697601</a
                >
                [2]
                <a href="https://news.ycombinator.com/item?id=33439405"
                  >https://news.ycombinator.com/item?id=33439405</a
                >
                [3]
                <a href="https://pixian.ai/api/deltaPng"
                  >https://pixian.ai/api/deltaPng</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="36064515">
          <h3>
            <a
              class="item"
              href="https://www.acm.org/media-center/2023/may/dissertation-award-2022"
              >UCLA computer grad constructs “crown jewel of cryptography”</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 22:14:26</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36064515"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36059774">
          <h3>
            <a
              class="item"
              href="https://www.microsoft.com/en-us/research/video/power-series-power-serious/"
              >Power series, power serious: Talk by Doug McIlroy (2007)
              [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 15:49:52</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36059774"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36056589">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/science-nature/inside-the-first-deep-sea-dive-in-history-180982128/"
              >The First Deep-Sea Dive in History</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 11:37:21</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36056589"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36056488">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/math-that-goes-on-forever-but-never-repeats-20230523/"
              >Math That Goes on Forever but Never Repeats</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 11:24:38</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36056488"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36056408">
          <h3>
            <a
              class="item"
              href="https://www.tomshardware.com/news/tape-storage-trundles-on-increases-yearly-volume-to-128-exabytes"
              >Tape Storage Trundles On, Increases Yearly Volume to 128
              Exabytes</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 11:16:00</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36056408"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36056299">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=36056299"
              >Ask HN: How do you not take criticism of your work personally?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 11:00:23</span
              ><span class="points-container"
                >Points: <span class="points">524</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36056299"
                  >Comments</a
                ><span class="descendants">: 553</span></span
              >
            </h4>
            <div class="text">
              <p>
                I see this as one of my major flaws and try hard to mask how I
                feel. But I just hope to learn to stop feeling bad for honest
                mistakes.
              </p>
            </div>
          </section>
        </section>
        <section id="36054918">
          <h3>
            <a class="item" href="https://github.com/elm/compiler/issues/1773"
              >Elm/compiler: Matching on negative literals results in a parser
              error</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 06:54:53</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36054918"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36054416">
          <h3>
            <a
              class="item"
              href="https://xmonader.github.io/letsbuildacompiler-pretty/tutor01_introduction.html"
              >Let's Build a Compiler (1988)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-24 @ 05:28:25</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36054416"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
