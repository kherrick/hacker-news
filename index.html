<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="36452832">
          <h3>
            <a
              class="item"
              href="https://blueskyweb.xyz/blog/6-23-2023-moderation-proposals"
              >Moderation in a public commons</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 22:09:40</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36452832"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36451936">
          <h3>
            <a
              class="item"
              href="http://web.archive.org/web/20200807162348/https://oceangate.com/news-and-media/blog/2019-0221-why-titan-is-not-classed.html"
              >Why isn't Titan classed? (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 20:41:10</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36451936"
                  >Comments</a
                ><span class="descendants">: 223</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36451572">
          <h3>
            <a
              class="item"
              href="https://slack.engineering/real-time-messaging/"
              >Real-time messaging</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 20:04:01</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36451572"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36451149">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2306.11827"
              >Any Deep ReLU Network Is Shallow</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 19:25:43</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36451149"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36450822">
          <h3>
            <a
              class="item"
              href="https://www.pv-magazine.com/2023/06/23/china-solar-module-prices-keep-diving/"
              >China solar module prices keep diving</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 18:54:02</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36450822"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36449894">
          <h3>
            <a class="item" href="http://www.paulgraham.com/jessica.html"
              >Jessica Livingston (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 17:33:11</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36449894"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36449788">
          <h3>
            <a
              class="item"
              href="https://blogs.nvidia.com/blog/2022/03/25/what-is-a-transformer-model/"
              >What is a transformer model? (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 17:24:02</span
              ><span class="points-container"
                >Points: <span class="points">227</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36449788"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36448791">
          <h3>
            <a
              class="item"
              href="https://www.esa.int/Enabling_Support/Space_Transportation/Full_ignition_for_ESA_s_reusable_rocket_engine"
              >Full ignition for ESAâ€™s reusable rocket engine</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 16:06:28</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36448791"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36448789">
          <h3>
            <a
              class="item"
              href="https://curia.europa.eu/jcms/upload/docs/application/pdf/2023-06/cp230110en.pdf"
              >EU Advocate General: Technical Standards must be freely available
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 16:06:21</span
              ><span class="points-container"
                >Points: <span class="points">327</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36448789"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36448759">
          <h3>
            <a
              class="item"
              href="https://verdagon.dev/blog/vale-memory-safe-cpp"
              >Making C++ safe without borrow checking, reference counting, or
              tracing GC</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 16:04:30</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36448759"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36448367">
          <h3>
            <a class="item" href="https://linearmouse.app/"
              >An open-source mouse and trackpad utility for Mac</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 15:38:22</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36448367"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36448293">
          <h3>
            <a
              class="item"
              href="https://blog.redplanetlabs.com/2021/06/03/tour-of-our-250k-line-clojure-codebase/"
              >Tour of our 250k line Clojure codebase (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 15:33:07</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36448293"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36448270">
          <h3>
            <a class="item" href="http://roguetemple.com/z/hyper/dev.php"
              >How to create a game using hyperbolic geometry? (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 15:31:37</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36448270"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36447871">
          <h3>
            <a class="item" href="https://www.react-graph-gallery.com"
              >Show HN: A gallery of graphs built with React and D3.js</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 15:07:43</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36447871"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
            <div class="text">
              <p>
                They allow to make charts quickly. But you lose flexibility:
                you're limited by the options they offer.
              </p>
              <p>
                I just created a gallery with hundreds of graphs made with d3.js
                and React. - Examples are split by graph types - They all come
                with explanation and code sandboxes - Gradual complexity to ease
                the learning curve
              </p>
              <p>It took me ages to create this project! Feedback welcome!</p>
            </div>
          </section>
        </section>
        <section id="36447024">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=36447024"
              >Ask HN: IP cameras that don't require an app or internet?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 14:08:15</span
              ><span class="points-container"
                >Points: <span class="points">303</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36447024"
                  >Comments</a
                ><span class="descendants">: 174</span></span
              >
            </h4>
            <div class="text">
              <p>
                The models I've been using have an ethernet port and wifi. Setup
                was connecting to the ethernet port and then accessing the web
                ui in a browser to configure settings (most importantly turning
                on RTSP or ONVIF feeds). The cameras I have are starting to show
                their age and a couple of them are starting to fail (PTZ slow or
                require reboots every few weeks).
              </p>
              <p>
                I picked up newer models from Amcrest and foscam assuming they
                would have the same set up procedure (i made sure to get
                ethernet+wifi models and did research on being RSTP capable) but
                they all require downloading an app and creating an account to
                set them up, even if the end configuration is without internet
                for local video)
              </p>
              <p>
                The foscam cameras have a web ui that just has links to the app
                stores and the amcrest cameras don't have any web ui available.
                I tried directly accessing the RTSP URLs and still no luck. both
                apps require account creation in order to use.
              </p>
              <p>
                I've also tried some tp link, wyze and aqara cameras in the past
                but they all required an app/account. They also had the worst
                reliability, both in connection stability and physical failure
                rates.
              </p>
              <p>
                Does anyone have specific model numbers of currently purchasable
                (US) IP cameras that genuinely don't require an app and account
                to set up?
              </p>
            </div>
          </section>
        </section>
        <section id="36446787">
          <h3>
            <a
              class="item"
              href="https://dl.acm.org/doi/pdf/10.1145/3593856.3595903"
              >Putting out the hardware dumpster fire</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 13:48:30</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36446787"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36446766">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/computer-scientists-inch-closer-to-major-algorithmic-goal-20230623/"
              >A new, faster algorithm for the group isomorphism problem</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 13:46:48</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36446766"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36446637">
          <h3>
            <a class="item" href="https://github.com/arwes/arwes"
              >Arwes: Futuristic Sci-Fi UI Web Framework</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 13:34:13</span
              ><span class="points-container"
                >Points: <span class="points">271</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36446637"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36446158">
          <h3>
            <a
              class="item"
              href="https://serge-sans-paille.github.io/pythran-stories/shrinking-a-shared-library.html"
              >Shrinking a shared library</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 12:53:06</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36446158"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36446045">
          <h3>
            <a class="item" href="https://editor.vrite.io/"
              >Show HN: An open-source, collaborative, WYSIWYG Markdown
              editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 12:40:12</span
              ><span class="points-container"
                >Points: <span class="points">361</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36446045"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
            <div class="text">
              <p>Some features worth highlighting:</p>
              <p>- Monaco editor and Prettier integration for code snippets</p>
              <p>- Tables (apparently the holy grail of WYSIWYG editing)</p>
              <p>
                - Embeds (for CodePen, CodeSandbox and YouTube, most useful for
                HTML or JSON exports)
              </p>
              <p>
                - Accepts Markdown paste-in, and "exports"/generates HTML,
                Markdown and JSON outputs
              </p>
              <p>
                - Collaboration (with real-time awareness and initial commenting
                system, available only when logged in)
              </p>
              <p>
                - GPT-3.5 integration (only when logged-in with the
                corresponding extension installed)
              </p>
              <p>Stack used: TipTap, Solid.js, HocusPocus, Fastify, tRPC.</p>
              <p>Some notable drawbacks:</p>
              <p>- No mobile support</p>
              <p>
                - Collaboration available only between signed-in users, in the
                same workspace;
              </p>
              <p>
                - I tried my best to support most common Markdown formatting,
                pasting and in-editor shortcuts, though there might still be
                room for improvement
              </p>
              <p>
                - Self-hosting isn't easy right now, though you should be able
                to figure it out from the source code
              </p>
              <p>
                The editor itself is a standalone app, extracted from the larger
                Vrite CMS project (<a href="https://github.com/vriteio/vrite"
                  >https://github.com/vriteio/vrite</a
                >) which you can also test out (only with sign-in) here:
                <a href="https://app.vrite.io/">https://app.vrite.io/</a>
              </p>
            </div>
          </section>
        </section>
        <section id="36445656">
          <h3>
            <a
              class="item"
              href="https://jobs.lever.co/givecampus/44af3199-546a-404a-95fd-a097ef37e915"
              >GiveCampus (YC S15) is hiring Rails engineers passionate about
              education</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 12:01:16</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36445625">
          <h3>
            <a
              class="item"
              href="https://ohwr.org/project/white-rabbit/wikis/home"
              >White Rabbit Project (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 11:57:05</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36445625"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36445513">
          <h3>
            <a
              class="item"
              href="https://danielbmarkham.com/twilight-of-the-programmers/"
              >Twilight of the programmers?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 11:41:41</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36445513"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36445197">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2306.12672"
              >From word models to world models</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-23 @ 10:57:26</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36445197"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36438654">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/collection/fancy-turning"
              >Specimens of Fancy Turning (1869)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-22 @ 20:41:57</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36438654"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36437952">
          <h3>
            <a
              class="item"
              href="https://www.noemamag.com/the-sounds-of-invisible-worlds/"
              >The Sounds of Invisible Worlds</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-22 @ 20:00:31</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36437952"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36437767">
          <h3>
            <a
              class="item"
              href="https://news.artnet.com/art-world/thomas-cromwell-prayer-book-trinity-college-cambridge-2319174"
              >A bejeweled prayer book has been identified as belonging to
              Thomas Cromwell</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-22 @ 19:49:05</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36437767"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36424375">
          <h3>
            <a class="item" href="https://github.com/joxeankoret/diaphora"
              >Diaphora: an open-source program diffing IDA plugin</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-21 @ 20:58:39</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36424375"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36421143">
          <h3>
            <a
              class="item"
              href="https://www.ncausa.org/about-coffee/history-of-coffee"
              >The History of Coffee (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-21 @ 16:58:19</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36421143"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36421029">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Musicogenic_seizure"
              >Musicogenic seizure</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-21 @ 16:51:01</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36421029"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
