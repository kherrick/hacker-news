<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45223913">
          <h3>
            <a
              class="item"
              href="https://wisewolfmedia.substack.com/p/the-rise-of-ai-cults-truth-terminal"
              >The rise of AI cults and the false prophets of revelation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 16:34:49</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45223913"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45223719">
          <h3>
            <a
              class="item"
              href="https://thehill.com/opinion/finance/5498346-corporate-america-has-been-trying-to-hide-job-openings-now-it-is-failing/"
              >Corporations are trying, and now failing, to hide job openings
              from US citizens</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 16:13:49</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45223719"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45223603">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/blog/welcome-ankit/"
              >Ankit Gupta Joins YC as General Partner</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 16:00:59</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45223603"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45223419">
          <h3>
            <a
              class="item"
              href="https://people.csail.mit.edu//jhbrown/scheme/continuationslides04.pdf"
              >Advanced Scheme Techniques (2004) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 15:44:52</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45223419"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45223239">
          <h3>
            <a
              class="item"
              href="https://blog.tjll.net/a-beginners-guide-to-extending-emacs/"
              >A beginner's guide to extending Emacs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 15:32:11</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45223239"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45223102">
          <h3>
            <a class="item" href="https://github.com/Edison-Watch/open-edison"
              >Show HN: An MCP Gateway to block the lethal trifecta</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 15:22:00</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45223102"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://simonwillison.net/2025/Jun/16/the-lethal-trifecta/"
                >https://simonwillison.net/2025/Jun/16/the-lethal-trifecta/</a
              >
              ) and started building a gateway to defend against it.
              <p>
                The idea: instead of connecting an LLM directly to multiple MCP
                servers, you point them all through a Gateway.
              </p>
              <p>The Gateway:</p>
              <p>
                - Connects to each MCP server and inspects their tools +
                requirements
              </p>
              <p>
                - Classifies tools along the "trifecta" axes (private data
                access, untrusted content, external comms)
              </p>
              <p>
                - When all three conditions are about to align in a single
                session, the Gateway blocks the last step and tells the LLM to
                show a warning instead.
              </p>
              <p>
                That way, before anything dangerous can happen, the user is
                nudged to review the situation in a web dashboard.
              </p>
              <p>
                We'd love for the HN community to try it out:
                <a href="https://github.com/Edison-Watch/open-edison"
                  >https://github.com/Edison-Watch/open-edison</a
                >
              </p>
              <p>
                Any feedback very welcome - we'll be around in the thread to
                answer questions.
              </p>
            </div>
          </section>
        </section>
        <section id="45223053">
          <h3>
            <a class="item" href="https://dws.rip"
              >Show HN: DWS OS, a Plan 9 Inspired Web "OS"</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 15:17:09</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45223053"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've always loved the aesthetic, quirks, and concepts of Plan9,
                and I wanted to see how far I could vibe-code a web desktop/OS
                that resembled it. The result is DWS OS.
              </p>
              <p>
                My goal was to reach a point where I could build "userspace"
                apps for this OS, in the OS. DWS OS has a virtual filesystem, an
                approximation of the ACME editor, file browser, internet browser
                (just an iframe for fun), and a few other apps to discover.
              </p>
              <p>
                The environment supports uploading and downloading data from the
                virtual filesystem, along with support for JavaScript
                programming within ACME and an API for building GUI apps within
                DWS OS and interacting with the OS DOM. Lastly, you can export
                and import the state of your OS as a JSON to share with others!
                Check out the `examples/` directory!
              </p>
              <p>
                I'd love to hear your feedback and suggestions and see if you
                build anything interesting within the OS, thanks!
              </p>
            </div>
          </section>
        </section>
        <section id="45222993">
          <h3>
            <a class="item" href="https://github.com/tomekw/doom-ada"
              >Doom-ada: Doom Emacs Ada language module with syntax, LSP and
              Alire support</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 15:11:43</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45222993"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45222799">
          <h3>
            <a class="item" href="https://github.com/plutov/oq"
              >Oq: Terminal OpenAPI Spec Viewer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 14:53:45</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45222799"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45222772">
          <h3>
            <a
              class="item"
              href="https://fasterthanli.me/articles/crates-io-phishing-attempt"
              >Crates.io phishing attempt</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 14:50:57</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45222772"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://blog.rust-lang.org/2025/09/12/crates-io-phishing-campaign/"
                >https://blog.rust-lang.org/2025/09/12/crates-io-phishing-cam...</a
              >
            </div>
          </section>
        </section>
        <section id="45222695">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/many-hard-leetcode-problems-are-easy-constraint/"
              >Many hard LeetCode problems are easy constraint problems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 14:44:05</span
              ><span class="points-container"
                >Points: <span class="points">175</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45222695"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45222369">
          <h3>
            <a
              class="item"
              href="https://www.arvinpoddar.com/blog/3d-modeling-with-paper"
              >3D modeling with paper</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 14:12:23</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45222369"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45221996">
          <h3>
            <a
              class="item"
              href="https://www.nrk.no/vestland/xl/over-100-ships-have-sailed-without-legitimate-insurance-from-the-norwegian-company-ro-marine-1.17565216"
              >Over 100 ships have sailed with fake insurance from the Norwegian
              Ro Marine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 13:36:40</span
              ><span class="points-container"
                >Points: <span class="points">146</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45221996"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45221580">
          <h3>
            <a
              class="item"
              href="https://twitter.com/TutaPrivacy/status/1966384776883142661"
              >Chat Control faces blocking minority in the EU</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 12:52:52</span
              ><span class="points-container"
                >Points: <span class="points">276</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45221580"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45221274">
          <h3>
            <a
              class="item"
              href="https://www.tftc.io/treasury-iexpanding-patriot-act/"
              >The treasury is expanding the patriot act to attack Bitcoin self
              custody</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 12:10:29</span
              ><span class="points-container"
                >Points: <span class="points">387</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45221274"
                  >Comments</a
                ><span class="descendants">: 306</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45221103">
          <h3>
            <a class="item" href="https://synbol.github.io/Lumina-DiMOO/"
              >Lumina-DiMOO: An open-source discrete multimodal diffusion
              model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 11:45:58</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45221103"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45220843">
          <h3>
            <a class="item" href="http://ascl.net/"
              >Astrophysics Source Code Library</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 10:59:38</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45220843"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45220069">
          <h3>
            <a class="item" href="https://dopeloop.ai/beat-maker/"
              >Show HN: I made a generative online drum machine with
              ClojureScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 08:44:15</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45220069"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                My goal was to build something that was not only fun and easy to
                use for beginners but also powerful enough for serious
                producers. I did extensive research on existing drum machines,
                analyzed their UX, and tried to build something that adds
                something new.
              </p>
              <p>
                It's a nearly 100% client-side app, written in ClojureScript,
                and is a PWA so you can install it to your home screen for an
                app-like experience.
              </p>
              <p>
                Besides the standard grid editor, Beat Maker has some unique
                features that I think HN readers might find interesting:
              </p>
              <p>
                - Procedural sample generation. One annoying thing about writing
                beats is searching through folders full of samples. I wanted to
                improve this and so I added the ability to generate new samples
                with a single click, giving you an infinite supply of unique
                drum samples. * Generative beat creation. If you're looking for
                inspiration, Beat Maker can generate entire patterns for you as
                a starting point. You can then edit and tweak the beat to your
                liking. Great for solving the "blank canvas" problem and giving
                you something good to start from. * Advanced export options.
                This is where it really shines for producers. You can export
                your work as: * A standard WAV loop * Individual stems (ZIP) * A
                MIDI file * A ZIP file of all your samples as WAVs * A SoundFont
                (.sf2) drum kit from your generated samples * An Impulse Tracker
                (.it) file for use in trackers like Renoise, OpenMPT or a
                Polyend * Pocket Operator/Volca sync. It can output a sync
                signal on the left audio channel to sync with these hardware
                devices for perfect timing. * Per-Note FX. You can add effects
                like volume slides, repeats, and start volume changes to
                individual notes for more complex drum phrases incorporating
                flam and roll.
              </p>
              <p>
                As an old school tracker guy, I'm particularly excited about the
                Impulse Tracker export mode. I was surprised to discover how
                many DAWs (including hardware like Polyend) can import this
                format. Of course, you can also pull up Impulse Tracker on
                DOSBox, or the more modern re-implementation, Schismtracker for
                that retro experience.
              </p>
              <p>
                By the way, the beat generator feature is not trained on any
                artists or anything like that. It's an algorithm I built from
                scratch myself.
              </p>
              <p>
                The audio engine is built on a declarative audio graph (using
                `virtual-audio-graph`), inspired by React's virtual DOM, which
                makes managing the Web Audio API much cleaner. If you're
                building web based audio apps I highly recommend checking out
                this library.
              </p>
              <p>
                I'd love for you to try it out and let me know what you think.
                Feedback (and the inevitable bug reports) most welcome! Thank
                you!
              </p>
              <p>
                P.S. Also, here's a video summary:
                <a href="https://youtu.be/qVmEn9z3H24"
                  >https://youtu.be/qVmEn9z3H24</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45219228">
          <h3>
            <a
              class="item"
              href="https://qwen.ai/blog?id=4074cca80393150c248e508aa62983f9cb7d27cd&amp;from=research.latest-advancements-list"
              >Qwen3-Next</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 06:32:04</span
              ><span class="points-container"
                >Points: <span class="points">436</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45219228"
                  >Comments</a
                ><span class="descendants">: 173</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45218111">
          <h3>
            <a
              class="item"
              href="https://rachelbythebay.com/w/2025/09/11/debtz/"
              >Debian 13, Postgres, and the US time zones</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 02:33:54</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45218111"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45217415">
          <h3>
            <a class="item" href="https://float.exposed/">Float Exposed</a>
          </h3>
          <section>
            <h4>
              <span>2025-09-12 @ 00:11:15</span
              ><span class="points-container"
                >Points: <span class="points">354</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45217415"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45217269">
          <h3>
            <a class="item" href="https://posthog.com/blog/why-os"
              >Why our website looks like an operating system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-11 @ 23:45:36</span
              ><span class="points-container"
                >Points: <span class="points">603</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45217269"
                  >Comments</a
                ><span class="descendants">: 419</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45214670">
          <h3>
            <a
              class="item"
              href="https://github.com/SWE-bench/SWE-bench/issues/465"
              >Top model scores may be skewed by Git history leaks in
              SWE-bench</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-11 @ 18:32:23</span
              ><span class="points-container"
                >Points: <span class="points">446</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45214670"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45175982">
          <h3>
            <a class="item" href="https://github.com/CursorTouch/Windows-Use"
              >Windows-Use: an AI agent that interacts with Windows at GUI
              layer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-09 @ 00:33:56</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45175982"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45175439">
          <h3>
            <a class="item" href="https://blog.danielh.cc/blog/curved"
              >I don't like curved displays</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-08 @ 23:24:24</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45175439"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45175099">
          <h3>
            <a
              class="item"
              href="https://therealmjp.github.io/posts/ten-years-of-d3d12/"
              >Ten Years of D3D12</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-08 @ 22:45:06</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45175099"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45174366">
          <h3>
            <a class="item" href="http://www.identity4.com/2025-racintosh-plus/"
              >Racintosh Plus – Rackmount Mac Plus</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-08 @ 21:39:00</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45174366"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45173100">
          <h3>
            <a
              class="item"
              href="https://manual.audacityteam.org/man/introduction_to_nyquist_and_lisp_programming.html"
              >Introduction to Nyquist and Lisp Programming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-08 @ 19:54:00</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45173100"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45172905">
          <h3>
            <a
              class="item"
              href="https://gitlab.com/ryanprior/emacs-org-data-starter"
              >Using Emacs Org-Mode With Databases: A getting-started guide</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-08 @ 19:39:10</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45172905"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45167680">
          <h3>
            <a class="item" href="https://gitlab.com/robinrowe/gtk1"
              >Classic GTK1 GUI Library</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-08 @ 12:55:59</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45167680"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
