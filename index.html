<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43797774">
          <h3>
            <a
              class="item"
              href="https://longreads.com/2018/04/25/the-known-unknown-tales-of-the-yucca-man/"
              >Tales of the Yucca Man (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 19:39:15</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43797774"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43797505">
          <h3>
            <a
              class="item"
              href="https://thelampmagazine.com/issues/issue-27/done-in-by-time"
              >Done in by Time</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 19:12:50</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43797505"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43797256">
          <h3>
            <a class="item" href="https://github.com/ndrwnaguib/principia"
              >Show HN: Formalizing Principia Mathematica using Lean</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 18:49:30</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43797256"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text">
              <p>
                <a href="https://ndrwnaguib.com/principia/"
                  >https://ndrwnaguib.com/principia/</a
                >
              </p>
              <p>
                <a href="https://github.com/ndrwnaguib/principia"
                  >https://github.com/ndrwnaguib/principia</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43797212">
          <h3>
            <a class="item" href="https://curry-lang.org/"
              >Curry: A functional logic programming language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 18:46:22</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43797212"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43797058">
          <h3>
            <a
              class="item"
              href="https://www.youtube.com/live/uul6hZ5NXC8?si=mKxZJy2xAD-rOc3g"
              >Next-Gen GPU Programming: Hands-On with Mojo and Max Modular
              HQ</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 18:32:23</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43797058"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43796935">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2504.11651"
              >Lossless LLM compression for efficient GPU inference via
              dynamic-length float</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 18:20:53</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43796935"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43796419">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2504.17192"
              >Paper2Code: Automating Code Generation from Scientific Papers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 17:36:15</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43796419"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43796003">
          <h3>
            <a class="item" href="https://github.com/magnitudedev/magnitude"
              >Show HN: Magnitude â€“ open-source, AI-native test framework for
              web apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 17:00:35</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43796003"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                We know there's a lot of noise about different browser agents.
                If you've tried any of them, you know they're slow, expensive,
                and inconsistent. That's why we built an agent specifically for
                running test cases and optimized it just for that:
              </p>
              <p>
                - Pure vision instead of error prone "set-of-marks" system (the
                colorful boxes you see in browser-use for example)
              </p>
              <p>
                - Use tiny VLM (Moondream) instead of OpenAI/Anthropic computer
                use for dramatically faster and cheaper execution
              </p>
              <p>
                - Use two agents: one for planning and adapting test cases and
                one for executing them quickly and consistently.
              </p>
              <p>
                The idea is the planner builds up a general plan which the
                executor runs. We can save this plan and re-run it with only the
                executor for quick, cheap, and consistent runs. When something
                goes wrong, it can kick back out to the planner agent and
                re-adjust the test.
              </p>
              <p>
                Itâ€™s completely open source. Would love to have more people try
                it out and tell us how we can make it great.
              </p>
              <p>
                Repo:
                <a href="https://github.com/magnitudedev/magnitude"
                  >https://github.com/magnitudedev/magnitude</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43795996">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43795996"
              >Foundry (YC F24) is hiring â€“ Come build a world model for the
              web</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 17:00:19</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>---</p>
              <p>*Why Foundry exists:*</p>
              <p>
                Every SaaS app, enterprise tool, and internal workflow without
                an API will soon be automated by browser agentsâ€”not traditional
                API integrations. Tens of trillions of dollars in global labor
                depend on browser-based workflows that no AI system can reliably
                automate today.
              </p>
              <p>
                But browser agents right now are like GPT-1: impressive demos,
                but brittle and broken in practice. To scale browser agents from
                GPT-1 demos to GPT-4 reliabilityâ€”and unlock this enormous
                economic leapâ€”they need purpose-built infrastructure:
              </p>
              <p>
                - *Realistic web simulation*: capable of modeling complex tasks,
                ambiguous UIs, and non-deterministic interactions. - *Robust RL
                training loops*: that learn effectively from sparse rewards and
                authentic user behavior. - *Rigorous evaluation benchmarks*:
                tied to real-world outcomes and genuine business impact.
              </p>
              <p>No one's built it yet. We're going first.</p>
              <p>
                Weâ€™re building exactly thisâ€”core infrastructure designed from
                first principles, specifically for browser agents. No
                incremental tools, no wrappers around GPTâ€”just the foundational
                AI stack everyone else will depend on later.
              </p>
              <p>Our founding team is ex-Scale AI &amp; Meta</p>
              <p>Seed-funded, SF-based (fully in-person)</p>
              <p>---</p>
              <p>*What weâ€™re looking for:*</p>
              <p>
                A founding engineer whoâ€™s cracked at software engineeringâ€”but
                who now wants to ship core ML systems and RL infrastructure from
                scratch.
              </p>
              <p>This is not another prompt-engineering job.</p>
              <p>*Youâ€™ll:*</p>
              <p>
                - Build a browser agent gymâ€”sparse rewards, non-determinism,
                messy DOM trees. - Solve hard ML problems at the edge of
                productionâ€”every single day.
              </p>
              <p>---</p>
              <p>*You probably:*</p>
              <p>
                - Are a killer engineer (Python, TypeScript) early in your
                career (0â€“2 YOE). - Ship insanely fastâ€”internships, side
                projects, OSS, real researchâ€”things youâ€™ve built yourself. -
                Have real ML exposure: trained models, built infra, ran
                experiments. - Have strong OSS contributions, publications weâ€™d
                recognize, or both. - Want a grind. Want to get better. Want to
                build something genuinely novel.
              </p>
              <p>---</p>
              <p>*Bonus points:*</p>
              <p>
                - Youâ€™ve built RL agents, browser automation (Puppeteer,
                Playwright), or eval tooling. - Youâ€™re tired of wrapping APIs
                and fine-tuning HuggingFace modelsâ€”ready to do something deeper.
              </p>
              <p>---</p>
              <p>*Why join:*</p>
              <p>
                - Real-world ML infrastructure, real users, real technical
                complexity. - Early equity, competitive pay, and massive growth
                trajectory. - SF-based, 5 days/week, fully in-person.
              </p>
              <p>
                We're building core infra. The ML stack everyone else will use
                laterâ€”thatâ€™s what weâ€™re shipping today.
              </p>
              <p>---</p>
              <p>If youâ€™ve read this far, you probably get it.</p>
              <p>Reach out directlyâ€”letâ€™s build.</p>
              <p>
                <a
                  href="https://www.ycombinator.com/companies/foundry/jobs/uwi8b6I-founding-engineer-ml-x-swe"
                  >https://www.ycombinator.com/companies/foundry/jobs/uwi8b6I-f...</a
                >
              </p>
              <p>Email at manil @ foundryrl dot com</p>
            </div>
          </section>
        </section>
        <section id="43795504">
          <h3>
            <a
              class="item"
              href="https://speakerdeck.com/marioariasc/write-an-interpreter-in-ruby"
              >Write an Interpreter in Ruby</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 16:26:24</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43795504"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43795300">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-025-01266-x"
              >Huge reproducibility project fails to validate biomedical
              studies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 16:14:08</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43795300"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43795090">
          <h3>
            <a class="item" href="https://research.swtch.com/diffcover"
              >Differential Coverage for Debugging</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 16:01:24</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43795090"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43794284">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/electric-cars/655527/slate-electric-truck-price-paint-radio-bezos"
              >A $20k American-made electric pickup with no paint, no stereo, no
              screen</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 15:01:37</span
              ><span class="points-container"
                >Points: <span class="points">644</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43794284"
                  >Comments</a
                ><span class="descendants">: 609</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43794110">
          <h3>
            <a
              class="item"
              href="https://www.science.org/doi/10.1126/science.adr3026"
              >Tumor-derived erythropoietin acts as immunosuppressive switch in
              cancer immunity</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 14:42:27</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43794110"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43793986">
          <h3>
            <a class="item" href="https://github.com/janwilmake/uit"
              >UIT â€“ performant, modular, low-memory file processing at scale,
              in the Cloud</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 14:31:40</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43793986"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43793526">
          <h3>
            <a
              class="item"
              href="https://scalewithlee.substack.com/p/when-etchsts-breaks-your-substack"
              >Writing "/etc/hosts" breaks the Substack editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 13:48:30</span
              ><span class="points-container"
                >Points: <span class="points">402</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43793526"
                  >Comments</a
                ><span class="descendants">: 228</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43793288">
          <h3>
            <a class="item" href="https://mitxela.com/projects/euroknob"
              >Eurorack Knob Idea</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 13:19:02</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43793288"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43793280">
          <h3>
            <a
              class="item"
              href="https://hiddenlayer.com/innovation-hub/novel-universal-bypass-for-all-major-llms/"
              >The Policy Puppetry Prompt: Novel bypass for major LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 13:18:17</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43793280"
                  >Comments</a
                ><span class="descendants">: 154</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43792248">
          <h3>
            <a class="item" href="https://gcc.gnu.org/gcc-15/">GCC 15.1</a>
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 10:53:59</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43792248"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43791385">
          <h3>
            <a
              class="item"
              href="https://bfi.uchicago.edu/wp-content/uploads/2025/04/BFI_WP_2025-56-1.pdf"
              >Large language models, small labor market effects [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 08:15:18</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43791385"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43790683">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/essay/i-am-making-the-world-my-confessor/"
              >Mary MacLane, the Wild Woman from Butte</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 06:20:12</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43790683"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43790603">
          <h3>
            <a
              class="item"
              href="https://www.publicbooks.org/poetry-city-iowa-city-iowa/"
              >"Poetry City": Iowa City, Iowa</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 06:05:58</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43790603"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43790420">
          <h3>
            <a
              class="item"
              href="https://www.morling.dev/blog/what-if-we-could-rebuild-kafka-from-scratch/"
              >What If We Could Rebuild Kafka from Scratch?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 05:34:52</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43790420"
                  >Comments</a
                ><span class="descendants">: 174</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43789593">
          <h3>
            <a class="item" href="https://www.jsoftware.com/papers/tot.htm"
              >Notation as a Tool of Thought (1979)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-25 @ 02:30:34</span
              ><span class="points-container"
                >Points: <span class="points">288</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43789593"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43788255">
          <h3>
            <a
              class="item"
              href="https://www.swiss-miss.com/2025/04/a-love-letter-to-people-who-believe-in-people.html"
              >A Love Letter to People Who Believe in People</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-24 @ 22:35:01</span
              ><span class="points-container"
                >Points: <span class="points">240</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43788255"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43788053">
          <h3>
            <a
              class="item"
              href="https://newscenter.lbl.gov/2025/04/24/scientists-develop-artificial-leaf-that-uses-sunlight-to-produce-valuable-chemicals/"
              >Scientists Develop Artificial Leaf, Uses Sunlight to Produce
              Valuable Chemicals</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-24 @ 22:10:15</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43788053"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43781888">
          <h3>
            <a
              class="item"
              href="https://code.mendhak.com/gpl-v2-address-letter/"
              >I wrote to the address in the GPLv2 license notice (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-24 @ 12:26:38</span
              ><span class="points-container"
                >Points: <span class="points">754</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43781888"
                  >Comments</a
                ><span class="descendants">: 541</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43779398">
          <h3>
            <a
              class="item"
              href="https://www.leadedsolder.com/2025/04/22/vtech-socrates-pickup.html"
              >The VTech Socratic Method</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-24 @ 05:05:45</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43779398"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43777677">
          <h3>
            <a class="item" href="https://github.com/amachronic/echoplayer"
              >Echo â€“ Open Hardware Music Player</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 23:11:39</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43777677"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43766263">
          <h3>
            <a
              class="item"
              href="https://web.ist.utl.pt/nuno.lopes/pubs/ub-pldi25.pdf"
              >Exploiting Undefined Behavior in C/C++ Programs: The Performance
              Impact [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 21:01:48</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43766263"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
