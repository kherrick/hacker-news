<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44640651">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/spice-data/jobs/RJz1peY-product-associate-new-grad"
              >Spice Data (YC S19) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 21:31:23</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44640233">
          <h3>
            <a
              class="item"
              href="https://e360.yale.edu/features/world-bank-hydro-dams"
              >In a major reversal, the world bank is backing mega dams
              (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 20:48:50</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44640233"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44640178">
          <h3>
            <a
              class="item"
              href="https://www.riskgaming.com/p/how-jane-jacobs-got-americans-stuck"
              >Yoni Appelbaum on the real villians behind our housing and
              mobility problems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 20:43:10</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44640178"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44639524">
          <h3>
            <a
              class="item"
              href="https://www.grisp.org/blog/posts/2025-06-11-grisp-nano-codebeam-sto"
              >Erlang 28 on GRiSP Nano using only 16 MB</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 19:40:15</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44639524"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44639421">
          <h3>
            <a
              class="item"
              href="https://blog.getjetback.com/scarcity-inventory-and-inequity-a-deep-dive-into-airline-fare-buckets/"
              >Scarcity, Inventory, and Inequity: A Deep Dive into Airline Fare
              Buckets</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 19:31:43</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44639421"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638710">
          <h3>
            <a
              class="item"
              href="https://github.com/anordin95/a-conceptual-overview-of-asyncio/blob/main/readme.md"
              >The Fundamentals of Asyncio</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 18:32:26</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638710"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638689">
          <h3>
            <a class="item" href="https://thechipletter.substack.com/p/mips"
              >MIPS – The hyperactive history and legacy of the pioneering RISC
              architecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 18:31:20</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638689"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638580">
          <h3>
            <a
              class="item"
              href="https://www.lumafield.com/article/what-went-wrong-inside-these-recalled-power-banks"
              >What went wrong inside recalled Anker PowerCore 10000 power
              banks?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 18:22:11</span
              ><span class="points-container"
                >Points: <span class="points">243</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638580"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638510">
          <h3>
            <a class="item" href="https://www.lotas.ai/"
              >Show HN: Lotas – Cursor for RStudio</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 18:16:10</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638510"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.lotas.ai/">https://www.lotas.ai/</a>), and
              we’ve built an AI coding assistant into RStudio (think Cursor for
              RStudio).
              <p>
                RStudio is used by about 2 million data scientists and
                academics, but they currently lack a coding assistant within
                their IDE. Developers in other environments benefit from tools
                like Cursor and Windsurf, but R users don’t have any equivalent
                tools to speed up their workflow. Since ~80% of R programmers
                prefer to use RStudio over other IDEs like VSCode to write R
                code, we figured a tool like this one could be quite useful.
              </p>
              <p>
                Both of us were PhD students at Harvard. Jorge was in the
                biophysics program and Will was in the biostatistics program
                where most people used RStudio every day. We saw how integrated
                code assistants were taking off in other IDEs, but we noticed
                that the RStudio integrations were still lagging far behind.
                Many R users were copying and pasting code from ChatGPT to build
                their workflows, and this was clearly slow and fragile.
              </p>
              <p>
                To bring the Cursor-like experience to RStudio users, we built
                Rao (<a href="https://www.lotas.ai/">https://www.lotas.ai/</a>):
                a fork of RStudio with an embedded AI assistant that is aware of
                the user’s local context (both files and variable environment),
                can read and write files, can run code or commands, and can
                interpret textual or visual output. It works with any of the
                file formats already in RStudio (R, notebooks including RMDs and
                QMDs, Python, Stan, etc.), allowing R programmers to iteratively
                perform entire data analyses inside their preferred IDE.
              </p>
              <p>
                Other AI data science tools are either (1) built on the web or
                in environments people don’t already use, (2) are completely
                focused on python notebooks, or (3) are weak package-based
                assistants with limited functionality. Rao is exactly like the
                RStudio IDE that millions of data scientists already use, but it
                incorporates a powerful AI assistant and works with all the
                standard file types.
              </p>
              <p>
                You can download Rao at
                <a href="https://www.lotas.ai/download"
                  >https://www.lotas.ai/download</a
                >, watch our demo on the homepage (<a
                  href="https://www.lotas.ai/"
                  >https://www.lotas.ai/</a
                >), and work through some example use cases on our GitHub (<a
                  href="https://github.com/lotas-ai/rao/tree/main/demos"
                  >https://github.com/lotas-ai/rao/tree/main/demos</a
                >). We have a one-week free trial (no card required) and provide
                500 queries/month for $20/month after that. We’d love to hear
                feedback from the HN community to make Rao as useful as
                possible! You can reach us at founders@lotas.ai.
              </p>
              <p>
                P.S. We have zero data retention (ZDR) agreements with OpenAI
                and Anthropic, but we currently recommend users do not input
                sensitive or regulated data like PHI into Rao until we sign BAAs
                with both model providers. For more information on our security
                practices, please visit the security page on our website
                <a href="https://www.lotas.ai/security"
                  >https://www.lotas.ai/security</a
                >.
              </p>
            </div>
          </section>
        </section>
        <section id="44638300">
          <h3>
            <a
              class="item"
              href="https://tedium.co/2025/07/21/the-game-genie-generation/"
              >Game Genie Retrospective: The Best NES Accessory Ever Was
              Unlicensed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 17:59:00</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638300"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638076">
          <h3>
            <a class="item" href="https://github.com/tidwall/pogocache"
              >Show HN: Pogocache – Fast caching software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 17:42:30</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638076"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44637716">
          <h3>
            <a class="item" href="https://github.com/noperator/jqfmt"
              >Jqfmt like gofmt, but for jq</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 17:16:44</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44637716"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44637715">
          <h3>
            <a class="item" href="https://www.morphik.ai/blog/stop-parsing-docs"
              >Don't bother parsing: Just use images for RAG</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 17:16:41</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44637715"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44637523">
          <h3>
            <a
              class="item"
              href="https://www.esri.com/arcgis-blog/products/arcgis-living-atlas/mapping/custom-orthographic-icons"
              >Make Map Icons with Orthographic Projections</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 17:01:06</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44637523"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44637352">
          <h3>
            <a class="item" href="https://accounting.penrose.com/"
              >AccountingBench: Evaluating LLMs on real long-horizon business
              tasks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 16:48:28</span
              ><span class="points-container"
                >Points: <span class="points">354</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44637352"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44637191">
          <h3>
            <a
              class="item"
              href="https://deepmind.google/discover/blog/advanced-version-of-gemini-with-deep-think-officially-achieves-gold-medal-standard-at-the-international-mathematical-olympiad/"
              >Gemini with Deep Think achieves gold-medal standard at the IMO</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 16:36:13</span
              ><span class="points-container"
                >Points: <span class="points">412</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44637191"
                  >Comments</a
                ><span class="descendants">: 185</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44637165">
          <h3>
            <a class="item" href="https://mcpjetpack.com"
              >Show HN: MCP Jetpack – The easiest way to get started with MCP in
              Cursor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 16:33:54</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44637165"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>Two problems we are trying to solve:</p>
              <p>
                Friction - Normally if you want to give Cursor access to GitHub,
                you have to install the right MCP server and login before you
                can use GitHub with Cursor’s chat. With MCP Jetpack, you can ask
                Cursor to list your GitHub issues, and it will automatically
                execute the right tool behind the scenes to accomplish your
                task. For services that require authentication, you will be
                asked to login the first time you interact with the service.
                However, it all happens within the Cursor chat so you never have
                to context switch and fiddle with Cursor’s settings.
              </p>
              <p>
                Tool Limits - Cursor warns you if you have more than 50 MCP
                tools installed as it says having more will degrade performance.
                However, just installing the GitHub MCP server itself adds 74
                MCP tools. With MCP Jetpack, you get access to GitHub, Atlassian
                and 15 other services with just two tools: “FindTool” and
                “ExecTool”.
              </p>
              <p>
                Here are the 17 services we support today: GitHub, Atlassian,
                Canva, Linear, Notion, Intercom, Monday.com, Neon, PayPal,
                Hugging Face, Sentry, Square, Webflow, Wix, Cloudflare Docs,
                Cloudflare AI Gateway, Cloudflare Workers Bindings.
              </p>
              <p>
                We’ll continue to add more services as companies launch remote
                MCP servers. If yours isn’t listed and you’d like it to be
                added, please email us at team@mcpjetpack.com.
              </p>
              <p>
                MCP Jetpack is in alpha so please let us know if you run into
                any problems or have any feedback - thanks!
              </p>
            </div>
          </section>
        </section>
        <section id="44637151">
          <h3>
            <a class="item" href="https://wmlive.sourceforge.net/"
              >Modern Debian-based Window Maker distribution</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 16:32:43</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44637151"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44636691">
          <h3>
            <a
              class="item"
              href="https://devenv.sh/blog/2025/07/21/announcing-secretspec-declarative-secrets-management/"
              >SecretSpec: Declarative Secrets Management</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 15:54:03</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44636691"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44636204">
          <h3>
            <a
              class="item"
              href="https://www.iter.org/node/20687/new-records-wendelstein-7-x"
              >New records on Wendelstein 7-X</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 15:18:41</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44636204"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44635867">
          <h3>
            <a
              class="item"
              href="https://the418.substack.com/p/a-bug-in-the-mail"
              >Occasionally USPS sends me pictures of other people's mail</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 14:54:41</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44635867"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44635808">
          <h3>
            <a class="item" href="https://github.com/KrishKrosh/TrackWeight"
              >TrackWeight: Turn your MacBook's trackpad into a digital weighing
              scale</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 14:51:13</span
              ><span class="points-container"
                >Points: <span class="points">433</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44635808"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44635745">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/tech-policy/2025/07/uk-backing-down-on-apple-encryption-backdoor-after-pressure-from-us/"
              >UK backing down on Apple encryption backdoor after pressure from
              US</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 14:46:40</span
              ><span class="points-container"
                >Points: <span class="points">393</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44635745"
                  >Comments</a
                ><span class="descendants">: 261</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44633933">
          <h3>
            <a
              class="item"
              href="https://www.paradedb.com/blog/lsm_trees_in_postgres"
              >We made Postgres writes faster, but it broke replication</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 11:26:04</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44633933"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44633549">
          <h3>
            <a class="item" href="https://github.com/mlang/llm-embed-proxy"
              >Show HN: Intercepting proxy for semantic search over visited
              pages</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 10:21:34</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44633549"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44629710">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/technology/2025/07/20/microsoft-sharepoint-hack/"
              >Global hack on Microsoft Sharepoint hits U.S., state agencies,
              researchers say</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-20 @ 21:58:06</span
              ><span class="points-container"
                >Points: <span class="points">289</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44629710"
                  >Comments</a
                ><span class="descendants">: 130</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.ph/Ym2jZ">https://archive.ph/Ym2jZ</a>,
              <a
                href="https://web.archive.org/web/20250721135933/https://www.washingtonpost.com/technology/2025/07/20/microsoft-sharepoint-hack/"
                >https://web.archive.org/web/20250721135933/https://www.washi...</a
              >
              <p>
                <a href="https://research.eye.security/sharepoint-under-siege/"
                  >https://research.eye.security/sharepoint-under-siege/</a
                >
              </p>
              <p>
                <a
                  href="https://krebsonsecurity.com/2025/07/microsoft-fix-targets-attacks-on-sharepoint-zero-day/"
                  >https://krebsonsecurity.com/2025/07/microsoft-fix-targets-at...</a
                >
              </p>
              <p>
                <a
                  href="https://www.bleepingcomputer.com/news/microsoft/microsoft-releases-emergency-patches-for-sharepoint-rce-flaws-exploited-in-attacks/"
                  >https://www.bleepingcomputer.com/news/microsoft/microsoft-re...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44614747">
          <h3>
            <a class="item" href="https://en.m.wikipedia.org/wiki/SignWriting"
              >Sutton SignWriting is a writing system for sign languages</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 11:54:40</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44614747"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44612643">
          <h3>
            <a
              class="item"
              href="https://www.eugenewei.com/blog/2013/10/25/amazon-and-the-profitless-business-model-narrative"
              >Amazon and the “Profitless Business Model” Fallacy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 04:37:55</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44612643"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44605169">
          <h3>
            <a class="item" href="https://asherfalcon.com/blog/posts/3"
              >Hiding messages in a deck playing cards</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-18 @ 14:41:04</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44605169"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44602227">
          <h3>
            <a
              class="item"
              href="https://www.sciencedaily.com/releases/2025/07/250716000855.htm"
              >Scholars solved a 130-year literary mystery and it hinged on one
              word</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-18 @ 07:40:52</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44602227"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
