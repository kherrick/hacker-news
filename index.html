<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44115467">
          <h3>
            <a class="item" href="https://voiden.md"
              >Show HN: Voiden – a free, offline, Git-native API Client</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-28 @ 12:48:43</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44115467"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text">
              <a href="https://voiden.md">https://voiden.md</a>)
              <p>
                Voiden is a free, offline, Git-native API client. Your API
                definitions, docs, and tests all live together.
              </p>
              <p>
                It came out of years of frustration: cloud sync lock-in,
                paywalled basics, bloated UIs, and lag on even simple requests.
                So the team built the opposite: an offline tool with no login,
                no telemetry, no lock-in. Just markdown and hotkeys.
              </p>
              <p>
                It behaves like code: local files, git branches, no cloud
                nonsense. Terminal is built-in, so you can commit, diff, and
                push changes right from the app.
              </p>
              <p>
                Docs stay close to your requests, so that API spec and what the
                API actually does never drift apart. No more scattered Postman,
                docs, and test files everywhere. A single source of truth.
              </p>
              <p>A minimalist GET request looks something like this:</p>
              <p></p>
              <pre><code>      GET
      https://dummyjson.com/posts
</code></pre>
              Just hit /endpoint, paste the URL, and run it with Cmd/Ctrl +
              Enter.
              <p>
                Not OSS (yet), but 100% local and free. Optional plugins will be
                coming down the line, but the core stays free.
              </p>
              <p>
                We'd love feedback from folks tired of overcomplicated and
                bloated API tooling.
              </p>
            </div>
          </section>
        </section>
        <section id="44115369">
          <h3>
            <a
              class="item"
              href="https://www.theatlantic.com/science/archive/2025/05/screwworms-outbreak-united-states/682925/"
              >The 'Man-Eater' Screwworm Is Coming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-28 @ 12:37:07</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44115369"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44115326">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/climate-environment/2025/05/27/american-west-drought-water-colorado-river/"
              >The Colorado River is running low. The picture looks even worse
              underground</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-28 @ 12:32:03</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44115326"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44115064">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/books/under-review/why-good-ideas-die-quietly-and-bad-ideas-go-viral"
              >Why Good Ideas Die Quietly and Bad Ideas Go Viral</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-28 @ 12:03:08</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44115064"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44113397">
          <h3>
            <a
              class="item"
              href="https://brandondong.github.io/blog/javascript_dates/"
              >Why are 2025/05/28 and 2025-05-28 different days in
              JavaScript?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-28 @ 07:09:31</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44113397"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44113026">
          <h3>
            <a class="item" href="https://lief.re/blog/2025-05-27-dwarf-editor/"
              >DWARF as a Shared Reverse Engineering Format</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-28 @ 05:34:47</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44113026"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44112326">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44112326"
              >Show HN: AutoThink – Boosts local LLM performance with adaptive
              reasoning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-28 @ 02:39:11</span
              ><span class="points-container"
                >Points: <span class="points">315</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44112326"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
            <div class="text">
              <p>
                The core idea: instead of giving every query the same "thinking
                time," classify queries as HIGH or LOW complexity and allocate
                thinking tokens accordingly. Complex reasoning gets 70-90% of
                tokens, simple queries get 20-40%.
              </p>
              <p>
                I also implemented steering vectors derived from Pivotal Token
                Search (originally from Microsoft's Phi-4 paper) that guide the
                model's reasoning patterns during generation. These vectors
                encourage behaviors like numerical accuracy, self-correction,
                and thorough exploration.
              </p>
              <p>Results on DeepSeek-R1-Distill-Qwen-1.5B:</p>
              <p>
                - GPQA-Diamond: 31.06% vs 21.72% baseline (+43% relative
                improvement)
              </p>
              <p>- MMLU-Pro: 26.38% vs 25.58% baseline</p>
              <p>- Uses fewer tokens than baseline approaches</p>
              <p>
                Works with any local reasoning model - DeepSeek, Qwen, custom
                fine-tuned models. No API dependencies.
              </p>
              <p>
                The technique builds on two things I developed: an adaptive
                classification framework that can learn new complexity
                categories without retraining, and an open source implementation
                of Pivotal Token Search.
              </p>
              <p>
                Technical paper:
                <a
                  href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=5253327"
                  >https://papers.ssrn.com/sol3/papers.cfm?abstract_id=5253327</a
                >
              </p>
              <p>
                Code and examples:
                <a
                  href="https://github.com/codelion/optillm/tree/main/optillm/autothink"
                  >https://github.com/codelion/optillm/tree/main/optillm/autoth...</a
                >
              </p>
              <p>
                PTS implementation:
                <a href="https://github.com/codelion/pts"
                  >https://github.com/codelion/pts</a
                >
              </p>
              <p>
                I'm curious about your thoughts on adaptive resource allocation
                for AI reasoning. Have you tried similar approaches with your
                local models?
              </p>
            </div>
          </section>
        </section>
        <section id="44111898">
          <h3>
            <a class="item" href="https://0x44.xyz/blog/cve-2023-4369/"
              >A privilege escalation from Chrome extensions (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-28 @ 00:48:45</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44111898"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44111673">
          <h3>
            <a
              class="item"
              href="https://hazyresearch.stanford.edu/blog/2025-05-27-no-bubbles"
              >Look Ma, No Bubbles: Designing a Low-Latency Megakernel for
              Llama-1B</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-28 @ 00:01:20</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44111673"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44111609">
          <h3>
            <a
              class="item"
              href="https://roderickkhan.com/posts/2025-05-16-poe-uefi-solution"
              >Negotiating PoE+ Power in the Pre‑Boot Environment</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 23:45:02</span
              ><span class="points-container"
                >Points: <span class="points">175</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44111609"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44111452">
          <h3>
            <a class="item" href="https://github.com/UCSBarchlab/OpenTPU"
              >OpenTPU: Open-Source Reimplementation of Google Tensor Processing
              Unit (TPU)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 23:10:44</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44111452"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44110931">
          <h3>
            <a
              class="item"
              href="https://girard.perso.math.cnrs.fr/mustard/article.html"
              >Mustard Watches (1990)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 21:48:54</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44110931"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44110584">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2025/May/27/llm-tools/"
              >Show HN: My LLM CLI tool can run tools now, from Python code or
              plugins</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 20:53:03</span
              ><span class="points-container"
                >Points: <span class="points">415</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44110584"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44109257">
          <h3>
            <a
              class="item"
              href="https://nathan.rs/posts/gpu-shader-programming/"
              >Running GPT-2 in WebGL: Rediscovering the Lost Art of GPU Shader
              Programming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 18:02:51</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44109257"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44108206">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44108206"
              >Launch HN: Relace (YC W23) – Models for fast and reliable
              codegen</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 15:59:20</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44108206"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
            <div class="text">
              <a href="https://relace.ai">https://relace.ai</a>). We're trying
              to make building code agents easy and cheap.
              <p>
                Here’s an example of our apply model vs. whole file edits:
                <a href="https://youtu.be/J0-oYyozUZw"
                  >https://youtu.be/J0-oYyozUZw</a
                >
              </p>
              <p>
                Building reliable code agents is hard. Beyond simple prototypes,
                any app with code generation in production quickly runs into two
                problems -- how do you reliably apply diffs, and how do you
                manage codebase context?
              </p>
              <p>
                We're focused on solving these two problems at
                order-of-magnitude lower price and latency.
              </p>
              <p>
                Our first model that we released, in February, is the Fast Apply
                model -- it merges code snippets with files at 4300 tok/s. It is
                more reliable (in terms of merge errors) than Sonnet, Qwen,
                Llama, or any other model at this task. Each file takes ~900ms
                and gives an instantaneous user experience, as well as saving
                ~40% on Claude 4 output tokens.
              </p>
              <p>
                Our second model focuses on retrieval. For both vibe-coded and
                enterprise codebases, retrieving only the files relevant to a
                user request saves both on SoTA input token cost and reduces the
                number of times code agents need to view files. Our reranker
                (evals below) can scan a million-line codebase in ~1-2s, and our
                embedding model outperforms any other embedding model for
                retrieval as evaluated on a corpus of Typescript/React
                repositories.
              </p>
              <p>
                There are many different ways to build coding agents, but being
                able to edit code reliably and retrieve the most relevant parts
                of the codebase is going to be a foundational issue. We're
                excited to be building ways to make it more accessible to
                millions of users who don't want to spend $$$ on Claude.
              </p>
              <p>
                These models are used in production, millions of times per week.
                If you've used Lovable, Create.xyz, Magic Patterns, Codebuff,
                Tempo Labs then you've used us!
              </p>
              <p>
                Here's a link to try it out:
                <a href="https://app.relace.ai">https://app.relace.ai</a>, and
                here are our docs:
                <a href="https://docs.relace.ai">https://docs.relace.ai</a>.
              </p>
              <p>
                We've opened up free access for prototyping on our website to
                everyone, and the limits should be enough for personal coding
                use and building small projects (correct us if it’s not). We
                integrate directly with Open-Source IDE's like Continue.dev.
                Please try us out, we'd love to hear your feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="44107942">
          <h3>
            <a class="item" href="https://aaronson.org/blog/square-theory"
              >Square Theory</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 15:33:55</span
              ><span class="points-container"
                >Points: <span class="points">606</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44107942"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44107655">
          <h3>
            <a
              class="item"
              href="https://blog.edward-li.com/tech/comparing-pyrefly-vs-ty/"
              >Pyrefly vs. Ty: Comparing Python's two new Rust-based type
              checkers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 15:01:55</span
              ><span class="points-container"
                >Points: <span class="points">348</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44107655"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44105965">
          <h3>
            <a
              class="item"
              href="https://www.frontiersin.org/news/2025/05/23/street-smarts-hawk-use-traffic-signals-hunting"
              >How a hawk learned to use traffic signals to hunt more
              successfully</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 11:46:30</span
              ><span class="points-container"
                >Points: <span class="points">419</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44105965"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44105796">
          <h3>
            <a
              class="item"
              href="https://blog.benjojo.co.uk/post/bgp-attr-40-junos-arista-session-reset-incident"
              >BGP handling bug causes widespread internet routing
              instability</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 11:15:15</span
              ><span class="points-container"
                >Points: <span class="points">311</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44105796"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44105619">
          <h3>
            <a
              class="item"
              href="https://lumosql.org/src/lumosql/doc/trunk/README.md"
              >LumoSQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 10:39:30</span
              ><span class="points-container"
                >Points: <span class="points">239</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44105619"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44103839">
          <h3>
            <a class="item" href="https://lazytetris.com/"
              >Show HN: Lazy Tetris</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-27 @ 03:58:07</span
              ><span class="points-container"
                >Points: <span class="points">372</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44103839"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
            <div class="text">
              <p>
                Aims to remove all stress, and focus the game on what I like the
                best - stacking.
              </p>
              <p>
                No timer, no score, no gravity. Move to the next piece when you
                are ready, and clear lines when you are ready.
              </p>
              <p>Separate mobile + desktop controls</p>
            </div>
          </section>
        </section>
        <section id="44091287">
          <h3>
            <a
              class="item"
              href="https://www.johndcook.com/blog/2025/05/25/lamppost/"
              >Looking for Keys Under the Lamppost</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-25 @ 21:25:18</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44091287"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44090776">
          <h3>
            <a
              class="item"
              href="https://googleprojectzero.blogspot.com/2025/05/the-windows-registry-adventure-7-attack-surface.html"
              >The Windows Registry Adventure #7: Attack surface analysis</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-25 @ 20:24:56</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44090776"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44086973">
          <h3>
            <a class="item" href="https://book.leveldesignbook.com"
              >The Level Design Book</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-25 @ 11:03:26</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44086973"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44086917">
          <h3>
            <a
              class="item"
              href="https://blog.swgillespie.me/posts/monorepo-ingredients/"
              >The Ingredients of a Productive Monorepo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-25 @ 10:49:31</span
              ><span class="points-container"
                >Points: <span class="points">208</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44086917"
                  >Comments</a
                ><span class="descendants">: 132</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44086219">
          <h3>
            <a
              class="item"
              href="https://utcc.utoronto.ca/~cks/space/blog/unix/UnixEarlyFilenameLenghts"
              >The length of file names in early Unix</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-25 @ 07:37:27</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44086219"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44084892">
          <h3>
            <a class="item" href="https://space.crunchlabs.com/"
              >Space Selfie</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-25 @ 01:36:28</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44084892"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44083753">
          <h3>
            <a
              class="item"
              href="https://keymaterial.net/2025/05/23/there-is-no-diffie-hellman-but-elliptic-curve-diffie-hellman/"
              >There Is No Diffie-Hellman but Elliptic Curve Diffie-Hellman</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-24 @ 20:53:11</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44083753"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44082472">
          <h3>
            <a
              class="item"
              href="https://github.com/bdavidzhang/flower-garden-cli"
              >Show HN: Terminal Flower Garden</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-24 @ 17:25:33</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44082472"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">A CLI flower garden game</div>
          </section>
        </section>
        <section id="44081395">
          <h3>
            <a
              class="item"
              href="https://technicshistory.com/2025/05/24/the-hobby-computer-culture/"
              >The Hobby Computer Culture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-24 @ 14:33:47</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44081395"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
