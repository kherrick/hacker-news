<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43033463">
          <h3>
            <a
              class="item"
              href="https://desunit.com/blog/marshmallow-test-and-parenting/"
              >Why young parents should focus on building trust with their
              kids</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-13 @ 07:12:47</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43033463"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43033341">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43033341"
              >Chrome does not have any way to stop video auto play?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-13 @ 06:46:25</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43033341"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
            <div class="text">
              What is going on with Chrome, It seems Chrome does not have any
              way to stop video auto play (no settings option and all extensions
              that used to work now are delisted from Chrome store). I tried
              many from the Chrome store and few that are not yet removed,
              simply do not work anymore. Has Google Chrome team fallen so low
              that they insist on autoplaying and giving no option to stop
              it!?!?
            </div>
          </section>
        </section>
        <section id="43033157">
          <h3>
            <a
              class="item"
              href="https://www.muckrock.com/news/archives/2025/feb/10/federal-data-is-disappearing-on-thursday-meet-the-teams-working-to-rescue-it-and-learn-how-you-can-help/"
              >Federal data is disappearing. On Thursday, meet the teams working
              to rescue it</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-13 @ 06:07:34</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43033157"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43031372">
          <h3>
            <a
              class="item"
              href="https://blintzbase.com/posts/cryptography-is-not-based-on-np-hard-problems/"
              >Why cryptography is not based on NP-complete problems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-13 @ 00:24:08</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43031372"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43030388">
          <h3>
            <a
              class="item"
              href="https://railsatscale.com/2025-02-12-tiny-jits-for-a-faster-ffi/"
              >Tiny JITs for a Faster FFI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 22:20:19</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43030388"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43029686">
          <h3>
            <a class="item" href="https://jotalea.com.ar/misc/jotaleaos/"
              >Show HN: I made my own OS from scratch because I was bored</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 20:55:12</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43029686"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
            <div class="text">
              <p>
                Sure, it is really basic, has very little functionality, but I
                made it and I'm proud of that. Oh, and I'm just 16 btw.
              </p>
            </div>
          </section>
        </section>
        <section id="43029474">
          <h3>
            <a
              class="item"
              href="https://www.cpubenchmark.net/year-on-year.html"
              >The average CPU performance of PCs and notebooks fell for the
              first time</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 20:34:41</span
              ><span class="points-container"
                >Points: <span class="points">200</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43029474"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43029385">
          <h3>
            <a class="item" href="https://github.com/noperator/yknotify"
              >Show HN: yknotify – Notify when YubiKey needs touch on macOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 20:24:59</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43029385"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43028468">
          <h3>
            <a class="item" href="https://imapsync.lamiral.info/">Imapsync</a>
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 18:54:35</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43028468"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43028057">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2502.07577"
              >Automated Capability Discovery via Foundation Model
              Self-Exploration</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 18:14:34</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43028057"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43027335">
          <h3>
            <a
              class="item"
              href="https://eli.lipsitz.net/posts/introducing-gamebub/"
              >Show HN: Game Bub – open-source FPGA retro emulation handheld</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 17:11:25</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43027335"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
            <div class="text">
              <p>
                Over the past ~1.5 years, I built an open-source FPGA retro
                emulation handheld that can play Game Boy, Game Boy Color, and
                Game Boy Advance cartridges. To my knowledge, there isn't an
                existing open-source FPGA emulator that can play physical
                cartridges like this.
              </p>
              <p>
                One of my main goals was to do all of the pieces myself, and be
                able to understand every component of it, so I designed my own
                PCB, wrote the firmware, wrote a Game Boy and Game Boy Advance
                emulator for the FPGA (using the Chisel HDL), and designed a
                3D-printed case.
              </p>
              <p>
                I detailed the design and development process in the linked
                post. It's quite long, but there are a lot of pictures and
                videos.
              </p>
              <p>
                Code and design files available on GitHub:
                <a href="https://github.com/elipsitz/gamebub"
                  >https://github.com/elipsitz/gamebub</a
                >, and an overview of the architecture:
                <a
                  href="https://github.com/elipsitz/gamebub/blob/handheld/docs/architecture.md"
                  >https://github.com/elipsitz/gamebub/blob/handheld/docs/archi...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43027266">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/5g-bandwidth"
              >5G networks meet consumer needs as mobile data growth slows</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 17:04:22</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43027266"
                  >Comments</a
                ><span class="descendants">: 262</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43027150">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-025-00444-1"
              >Record-breaking neutrino is most energetic ever detected</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 16:52:57</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43027150"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43026934">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/markets/deals/inside-collapse-nissan-hondas-60-billion-mega-deal-2025-02-12/"
              >How Nissan and Honda's $60B merger talks collapsed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 16:32:37</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43026934"
                  >Comments</a
                ><span class="descendants">: 200</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43026920">
          <h3>
            <a
              class="item"
              href="https://www.worksinprogress.news/p/the-prophet-of-parking"
              >The Prophet of Parking: A eulogy for the great Donald Shoup</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 16:31:04</span
              ><span class="points-container"
                >Points: <span class="points">239</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43026920"
                  >Comments</a
                ><span class="descendants">: 244</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43026774">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43026774"
              >Ask HN: Former employees' RSUs at risk after startup's IPO</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 16:13:41</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43026774"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
            <div class="text">
              <p>
                A group of us, former employees of a startup that recently went
                public on Nasdaq, are seeking advice on how to navigate an
                unexpected RSU settlement process. We would appreciate insights
                from those with experience in equity compensation, tax law, or
                corporate governance.
              </p>
              <p>* The Situation</p>
              <p>
                We worked at a startup for several years and were granted
                Restricted Stock Units (RSUs). These fully vested upon the
                company’s IPO in 2024, but the company has set the settlement
                date as March 15, 2025 (185 days post-IPO, However, we are not
                allowed to sell the shares until April, if we were to receive
                them). This means we will only receive the shares then, but
                there are some aspects of the process that we are unsure about.
              </p>
              <p>* Key Questions We Have</p>
              <p>
                1) Prepaying Taxes in Cash: We have been asked to wire a tax
                prepayment directly to the company’s bank account before
                receiving our shares.
              </p>
              <p>
                Many of us were expecting a sell-to-cover approach (where some
                shares are withheld for taxes), which is common. We are
                wondering if this approach—requiring a direct tax prepayment—is
                standard practice.
              </p>
              <p>
                2) Forfeiture Clause: The company has stated that if we do not
                prepay the taxes by March 15, 2025, the RSUs will be permanently
                forfeited.
              </p>
              <p>
                We understand that companies have different ways of handling RSU
                settlements, but we are curious whether this type of forfeiture
                clause is common. Since RSUs are considered compensation, we
                would like to understand if there are alternative ways companies
                typically handle tax withholding.
              </p>
              <p>
                3) Unclear Tax Calculation Guidance: We have been asked to
                calculate the withholding tax ourselves based on an estimated
                stock price.
              </p>
              <p>
                However, we have not been provided official guidance on how to
                do this, which makes us concerned about potential errors. If we
                underpay, we need to send more money within one business day. If
                we overpay, we have to apply for a tax refund later. We’re
                wondering how companies typically help employees navigate tax
                prepayment for RSUs.
              </p>
              <p>4) Difference Between Current and Former Employees:</p>
              <p>
                We understand that current employees have access to a
                sell-to-cover option, while former employees are required to
                prepay in cash. We are curious if this type of distinction
                between current and former employees is typical for post-IPO RSU
                settlements.
              </p>
              <p>* Seeking Advice from the Community</p>
              <p>
                We are not looking to place blame—we understand that every
                company has its own way of structuring RSU settlements. However,
                since we were surprised by these requirements, we are hoping to
                learn from others who have experienced similar situations.
              </p>
              <p>Some of the key things we would love advice on:</p>
              <p>
                - Have you encountered an RSU settlement process like this
                before? - Are there alternative methods (e.g., net exercise,
                structured buyback) that could be proposed? - How do companies
                usually structure tax withholding for RSUs, particularly for
                former employees? - Are there legal or negotiation strategies
                that might be useful in discussing this with the company? - We
                are hoping to engage in a conversation with the company to
                explore potential solutions that work for everyone. We truly
                appreciate any insights from this community.
              </p>
              <p>Thanks in advance!</p>
            </div>
          </section>
        </section>
        <section id="43026036">
          <h3>
            <a
              class="item"
              href="https://github.com/nexsol-technologies/pgassistant"
              >PgAssistant: OSS tool to help devs understand and optimize PG
              performance</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 15:01:40</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43026036"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43025645">
          <h3>
            <a
              class="item"
              href="https://perthirtysix.com/visualizing-data-is-an-art"
              >Visualizing data is an art</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 14:17:48</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43025645"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43024540">
          <h3>
            <a
              class="item"
              href="https://blog.archive.org/2025/02/12/vanishing-culture-punch-card-knitting/"
              >Vanishing Culture: Punch Card Knitting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 12:11:33</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43024540"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43024221">
          <h3>
            <a
              class="item"
              href="https://brutecat.com/articles/leaking-youtube-emails"
              >Leaking the email of any YouTube user for $10k</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 11:19:42</span
              ><span class="points-container"
                >Points: <span class="points">1398</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43024221"
                  >Comments</a
                ><span class="descendants">: 405</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43023875">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43023875"
              >Ask HN: What's the best implementation of Conway's Game of
              Life?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 10:22:21</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43023875"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
            <div class="text">
              <p>
                Mine has to be this continuous version that makes pretty crazy
                looking creatures:
                <a href="https://chakazul.github.io/Lenia/JavaScript/Lenia.html"
                  >https://chakazul.github.io/Lenia/JavaScript/Lenia.html</a
                >.
              </p>
            </div>
          </section>
        </section>
        <section id="43023554">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/ai/2025/02/us-and-uk-refuse-to-sign-ai-safety-declaration-at-summit/"
              >US and UK refuse to sign AI safety declaration at summit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 09:33:29</span
              ><span class="points-container"
                >Points: <span class="points">338</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43023554"
                  >Comments</a
                ><span class="descendants">: 596</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43023508">
          <h3>
            <a
              class="item"
              href="https://paulbutler.org/2025/smuggling-arbitrary-data-through-an-emoji/"
              >Smuggling arbitrary data through an emoji</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 09:24:08</span
              ><span class="points-container"
                >Points: <span class="points">518</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43023508"
                  >Comments</a
                ><span class="descendants">: 157</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42999655">
          <h3>
            <a
              class="item"
              href="https://checkmyworking.com/posts/2025/02/thinkserver-my-web-based-coding-environment/"
              >Thinkserver: My web-based coding environment</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 12:52:19</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42999655"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42999566">
          <h3>
            <a class="item" href="https://pubby.games/nesfab.html"
              >NESFab – A new programming language for creating NES games</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 12:39:43</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42999566"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42995762">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-01-large-magma-bodies-beneath-dormant.html"
              >Large magma bodies found beneath dormant volcanoes, surprising
              scientists</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 00:49:58</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42995762"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42991776">
          <h3>
            <a
              class="item"
              href="https://www.core77.com/posts/135333/Industrial-Designer-Invents-Drill-Bit-that-Can-Also-Drive-Screws"
              >A drill bit that can also drive screws</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 16:48:25</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42991776"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42991112">
          <h3>
            <a
              class="item"
              href="https://digitalseams.com/blog/what-happens-to-your-online-accounts-when-you-die"
              >What happens to your online accounts when you die?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 15:09:41</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42991112"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990801">
          <h3>
            <a
              class="item"
              href="https://sharats.me/posts/automating-the-vim-workplace/"
              >Automating the Vim Workplace (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 14:12:51</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990801"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42989666">
          <h3>
            <a
              class="item"
              href="https://luj.fr/blog/is-nixos-truly-reproducible.html"
              >Is NixOS truly reproducible?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 09:56:13</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42989666"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
