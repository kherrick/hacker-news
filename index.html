<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40091924">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Bicycle_Day_(Psychedelic_Holiday)"
              >Bicycle Day (Psychedelic Holiday)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 21:09:41</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40091924"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40091840">
          <h3>
            <a
              class="item"
              href="https://www.streak.com/careers/staff-ui-engineer"
              >Streak (YC W22) Is Hiring a Staff UI Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 21:00:49</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40091622">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40091622"
              >Tell HN: Ever think of applying to YC? Do it this weekend for
              S24</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 20:33:36</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40091622"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
            <div class="text">
              <p>
                If you've ever thought about applying to YC, here's a tip: just
                do it. It doesn't take long and could change your life, like it
                did for me and many others.
              </p>
              <p>
                In particular, if you have either of these two bogus thoughts,
                ignore them pronto and just go to
                <a href="https://apply.ycombinator.com"
                  >https://apply.ycombinator.com</a
                >
                and apply:
              </p>
              <p>
                (1) "probably not good enough / won't get in" - you'd be
                surprised at how many people feel that way, whether because of
                impostor syndrome, lack of credentials, whatever—and often they
                turn out to be among the best founders. So this a terrible
                reason not to apply!
              </p>
              <p>
                The nice thing is, it's YC's job to evaluate that, not yours.
                They're looking for aptitude which doesn't look like what most
                people (probably including you) assume. You needn't look
                impressive, and you don't have to be a competent founder—you
                learn that from doing YC. Just be yourself as you are, fill out
                the application and don't worry about it.
              </p>
              <p>
                (2) "too early" - there's no such thing. YC looks for good
                potential founders—meaning anyone who can learn what they
                teach—and nothing else. You're already yourself, which is all
                you need.
              </p>
              <p>
                Some of YC's big successes start off as last-minute applications
                on a whim; and many start with totally different ideas than what
                ends up succeeding. It's YC's job to teach you how to develop in
                the startup way, and that can start at any time.
              </p>
              <p>
                ("Too far along already" is another bogus notion but I'll stick
                with the top 2 for today.)
              </p>
              <p>
                If you know the game Snakes and Ladders [2], YC is a massive
                ladder in an area where there are no snakes. Sure it's a dice
                roll, but what reason do you have not to? If you're uninterested
                in the game, no problem—but if you have any impulse to
                participate, do it! If you're the "out of nowhere" type of
                founder YC loves to fund, your chances are likely a lot better
                than you imagine.
              </p>
              <p>
                Apply by 8pm PT on Monday 4/22 to get a decision by May 29:
                <a href="https://apply.ycombinator.com"
                  >https://apply.ycombinator.com</a
                >.
              </p>
              <p>---</p>
              <p>
                [1] like last October -
                <a
                  href="https://web.archive.org/web/20231011022307/https://news.ycombinator.com/"
                  >https://web.archive.org/web/20231011022307/https://news.ycom...</a
                >
              </p>
              <p>
                [2]
                <a href="https://en.wikipedia.org/wiki/Snakes_and_ladders"
                  >https://en.wikipedia.org/wiki/Snakes_and_ladders</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="40091584">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Francisco_Varela"
              >Francisco Varela</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 20:29:05</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40091584"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40091379">
          <h3>
            <a class="item" href="https://talktomehuman.com/"
              >Show HN: Talk to Me Human – my game about social persuasion</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 20:03:45</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40091379"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <p>
                I recently graduated from a good PhD program studying NLP.
                Unlike any sane person who would go become a professor or make a
                gazillion dollars in industry, I decided to try bootstrapping my
                own software business. This is my first product.
              </p>
              <p>
                The inspiration was from my research on computers understanding
                social norms. When ChatGPT came out, I was amazed how well it
                could understand social etiquette. I thought it'd be fun to make
                a game where you have to talk your way out of sticky situations
                - like you miss your friend's birthday party, or your boss
                catches you trying to leave work at 2pm.
              </p>
              <p>
                I made a prototype in a couple days, and it was super fun to
                play with. I thought I'd spend a "couple months" making a game
                for others to play online. Now, only 10 months and 923.3 hours
                of work later, it's playable in early access.
              </p>
              <p>
                In the game, you talk out loud (ASR), and the NPCs (LLM + TTS)
                talk back at you. It is fun to play with a friend! And because
                it's just talking, non-gamers do great, often better than
                gamers.
              </p>
              <p>
                I really want to have a free demo, but no time yet to implement.
                For now, it's purchase only ($4.99). If anyone decides to try
                it, I'd really love to get more feedback. It was an enormous
                learning experience, especially targeting the web - so many
                partially supported web APIs and browser inconsistencies! Still
                feels like 2008 in some ways.
              </p>
              <p>
                Also happy to answer questions of course. Thanks, and enjoy the
                weekend!
              </p>
            </div>
          </section>
        </section>
        <section id="40091042">
          <h3>
            <a class="item" href="https://greptile.com/"
              >Ask questions about Git repositories from a web UI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 19:29:18</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40091042"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40089842">
          <h3>
            <a
              class="item"
              href="https://opensource.net/why-single-vendor-is-the-new-proprietary/"
              >Single vendor is the new proprietary</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 17:45:09</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40089842"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40089609">
          <h3>
            <a class="item" href="https://www.mptcp.dev/"
              >Multipath TCP for Linux (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 17:28:45</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40089609"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40089460">
          <h3>
            <a class="item" href="https://quilljs.com/"
              >Quill v2 – Rich text editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 17:17:29</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40089460"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40089430">
          <h3>
            <a
              class="item"
              href="https://bigthink.com/starts-with-a-bang/light-infinite-lifetime/"
              >Does light have an infinite lifetime?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 17:15:29</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40089430"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40089219">
          <h3>
            <a
              class="item"
              href="https://clevelandhistorical.org/items/show/1001"
              >Mayakovsky in Cleveland (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 16:59:44</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40089219"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40089174">
          <h3>
            <a
              class="item"
              href="https://www.eurozine.com/measuring-the-mobile-body/?ref=thebrowser.com"
              >Measuring the Mobile Body</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 16:56:46</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40089174"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40089138">
          <h3>
            <a
              class="item"
              href="http://grogsgamut.blogspot.com/2011/04/dont-bet-on-joys-of-pokies.html"
              >Don't bet on the joys of pokies (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 16:53:26</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40089138"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40089053">
          <h3>
            <a
              class="item"
              href="https://onlinelibrary.wiley.com/doi/full/10.1111/acel.14170"
              >Epigenetic age oscillates during the day</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 16:48:23</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40089053"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40088751">
          <h3>
            <a
              class="item"
              href="https://www.filfre.net/2024/04/the-curse-of-monkey-island/"
              >The Curse of Monkey Island</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 16:25:17</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40088751"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40088731">
          <h3>
            <a
              class="item"
              href="https://medium.com/@grubbycoder/porting-8-bit-sonic-2-to-the-ti-84-ce-7ec99f9981c9"
              >Porting 8-bit Sonic 2 to the TI-84 CE</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 16:23:10</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40088731"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40088719">
          <h3>
            <a class="item" href="https://openjdk.org/jeps/8323658"
              >JEP draft: Exception handling in switch</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 16:22:16</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40088719"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40088300">
          <h3>
            <a
              class="item"
              href="https://www.fastcompany.com/91108331/these-solar-assembling-robotic-arms-could-solve-one-of-the-industrys-biggest-problems"
              >Robotic arms that assemble panels on solar farms</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 15:48:39</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40088300"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
            <div class="text">
              <p>
                Here's a teaser video we put together too, if you're curious to
                see some more shots of the system in action:
                <a href="https://www.youtube.com/watch?v=ZZ2fP1Y5Z2E"
                  >https://www.youtube.com/watch?v=ZZ2fP1Y5Z2E</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="40088106">
          <h3>
            <a
              class="item"
              href="https://dailynous.com/2024/04/19/daniel-dennett-death-1942-2024/"
              >Daniel Dennett has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 15:33:41</span
              ><span class="points-container"
                >Points: <span class="points">592</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40088106"
                  >Comments</a
                ><span class="descendants">: 283</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40086779">
          <h3>
            <a class="item" href="https://www.stroustrup.com/programming.html"
              >3rd Edition of Programming: Principles and Practice Using C++ by
              Stroustrup</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 13:45:22</span
              ><span class="points-container"
                >Points: <span class="points">216</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40086779"
                  >Comments</a
                ><span class="descendants">: 166</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40085543">
          <h3>
            <a
              class="item"
              href="https://unixdigest.com/tutorials/tips-on-how-to-structure-your-home-directory.html"
              >Tips on how to structure your home directory (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 11:39:55</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40085543"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40085260">
          <h3>
            <a class="item" href="http://www.chenyilei.net/"
              >Quantum Algorithms for Lattice Problems – Update on April 18</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 10:58:13</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40085260"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40084543">
          <h3>
            <a class="item" href="https://anori.app/"
              >Show HN: Composable (as in iGoogle, but modern) privacy-friendly
              new tab</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 08:34:12</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40084543"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>
                It's made with React, but I tried to squeeze maximum performance
                (limited by my skills and desire to keep it somewhat readable,
                though) out of it. UI/UX was a big priority for me in this
                project, so I also tried to streamline it as much as possible
                and make Anori a joy to use. If you decide to try it, let me
                know how good I did!
              </p>
              <p>
                Oh, and it's open source [1] and the process of adding new
                widgets is documented [2], so you can make your own!
              </p>
              <p>
                [1]:
                <a href="https://github.com/OlegWock/anori"
                  >https://github.com/OlegWock/anori</a
                >
              </p>
              <p>
                [2]:
                <a
                  href="https://github.com/OlegWock/anori/blob/master/DEVELOPMENT_AND_EXTENDING.md"
                  >https://github.com/OlegWock/anori/blob/master/DEVELOPMENT_AN...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="40083807">
          <h3>
            <a
              class="item"
              href="https://supabase.com/blog/s3-compatible-storage"
              >Supabase Storage now supports the S3 protocol</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-19 @ 05:51:32</span
              ><span class="points-container"
                >Points: <span class="points">369</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40083807"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40080794">
          <h3>
            <a
              class="item"
              href="https://www.dbreunig.com/2024/04/18/a-poi-database-in-one-line.html"
              >A POI database in one line</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-18 @ 21:14:22</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40080794"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40077391">
          <h3>
            <a
              class="item"
              href="https://huyenchip.com/2024/04/17/personal-growth.html"
              >Measuring personal growth</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-18 @ 15:43:42</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40077391"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40075813">
          <h3>
            <a
              class="item"
              href="https://jalammar.github.io/illustrated-word2vec/"
              >The Illustrated Word2Vec (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-18 @ 13:08:17</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40075813"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40071898">
          <h3>
            <a
              class="item"
              href="https://blog.jeffsmits.net/compsci/2024/04/07/parsing-and-all-that/"
              >Parsing and all that</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-18 @ 01:01:28</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40071898"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40071854">
          <h3>
            <a
              class="item"
              href="https://gizmodo.com/humans-sheltered-lava-tube-umm-jirsan-thousands-years-1851415061"
              >Humans Sheltered in This Lava Tube for Thousands of Years</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-18 @ 00:54:57</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40071854"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40066904">
          <h3>
            <a
              class="item"
              href="https://nautil.us/the-part-time-climate-scientist-542351/"
              >Guy Callendar, the engineer who discovered human-caused global
              warming</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-04-17 @ 16:26:22</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40066904"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
