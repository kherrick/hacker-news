<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="35658796">
          <h3>
            <a
              class="item"
              href="https://www.chronicle.com/article/ban-on-tenure-for-new-faculty-hires-passes-texas-senate"
              >Ban on Tenure for New Faculty Hires Passes Texas Senate</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 19:28:08</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35658796"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35658525">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2023/04/24/the-blazing-world-jonathan-healey-book-review"
              >What Happens When You Kill Your King</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 19:08:03</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35658525"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35658412">
          <h3>
            <a
              class="item"
              href="https://www.myjapanesegreentea.com/will-boiling-water-ruin-green-tea"
              >Will Boiling Water Ruin Green Tea?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 19:01:00</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35658412"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35658399">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/invented-persona-behind-key-pandemic-database"
              >The “invented persona” behind the GISAID viral sequence
              database</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 19:00:14</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35658399"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35658387">
          <h3>
            <a
              class="item"
              href="https://publication.design.systems/how-to-become-a-designer-who-codes-52ae97f60d68?gi=81198e6b14b3"
              >How to Become a “Designer Who Codes”</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 18:59:12</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35658387"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35658319">
          <h3>
            <a
              class="item"
              href="https://dl.acm.org/doi/10.1145/3579990.3580020"
              >Looplets: A Language for Structured Coiteration</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 18:54:31</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35658319"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35658318">
          <h3>
            <a
              class="item"
              href="https://nationalinterest.org/feature/nuclear-power-answer-global-and-environmental-energy-woes-206418"
              >Nuclear Power Is the Answer to Global and Environmental Energy
              Woes</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 18:54:30</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35658318"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35658296">
          <h3>
            <a class="item" href="https://www.stadai.com/"
              >Show HN: Stadai – Your virtual study buddy powered by ChatGPT</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 18:52:46</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35658296"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                You can also access auto-generated quizzes and flashcards on
                important topics to enhance your learning experience. Stadai
                saves your progress and stats, helping you track your learning
                journey, monitor your performance, identify areas for
                improvement, and optimize your study strategy.
              </p>
              <p>
                Stadai is perfect for students, professionals, and anyone who
                wants to boost their learning and knowledge retention. Whether
                you're preparing for exams, learning new skills, or exploring
                new interests, Stadai can help you achieve your goals.
              </p>
              <p>
                Try it out now at:
                <a href="https://www.stadai.com/">https://www.stadai.com/</a>
              </p>
              <p>
                Please share your feedback on Stadai in the comments below, we
                would love to hear from you!
              </p>
              <p>Thank you!</p>
            </div>
          </section>
        </section>
        <section id="35658167">
          <h3>
            <a
              class="item"
              href="http://marble.onl/posts/content-and-controversy-in-generative-ai.html"
              >Content and controversy in generative AI models</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 18:43:34</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35658167"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35657984">
          <h3>
            <a
              class="item"
              href="https://ez.substack.com/p/fire-mark-zuckerberg"
              >Fire Mark Zuckerberg</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 18:29:21</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35657984"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35657982">
          <h3>
            <a
              class="item"
              href="https://codeium.com/blog/copilot-trains-on-gpl-codeium-does-not"
              >GitHub Copilot emits GPL code</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 18:29:13</span
              ><span class="points-container"
                >Points: <span class="points">234</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35657982"
                  >Comments</a
                ><span class="descendants">: 153</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35657570">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-04-devastating-greenland-antarctic-ice-sheets.html"
              >'Devastating' melt of Greenland, Antarctic ice sheets found</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 17:57:25</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35657570"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35657436">
          <h3>
            <a
              class="item"
              href="https://rootsofprogress.org/isambard-brunel-on-engineering-standards"
              >The Commission for Stopping Further Improvements</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 17:47:26</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35657436"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35657181">
          <h3>
            <a class="item" href="https://www.xprize.org/prizes/wildfire"
              >xPrize Wildfire – $11M Prize Competition</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 17:29:43</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35657181"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35656726">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/lago/jobs/YL8DQw4-infrastructure-engineer"
              >Lago(YC): open-source Usage Based Billing – is hiring an
              Infrastructure Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 17:01:02</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35655910">
          <h3>
            <a
              class="item"
              href="https://static.sched.com/hosted_files/kccnceu2023/3d/KubeCon-2023-Scaling-Databases-Activision.pdf"
              >Scaling Databases at Activision [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 16:09:37</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35655910"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35655282">
          <h3>
            <a
              class="item"
              href="https://www.eff.org/deeplinks/2023/04/earn-it-bill-back-again-seeking-scan-our-messages-and-photos"
              >The EARN IT bill is back, seeking to scan our messages and
              photos</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 15:32:44</span
              ><span class="points-container"
                >Points: <span class="points">570</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35655282"
                  >Comments</a
                ><span class="descendants">: 245</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35654621">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=i4EFkspO5p4"
              >Four-Byte Burger [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 14:50:31</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35654621"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35654574">
          <h3>
            <a
              class="item"
              href="https://www.fileside.app/blog/2023-03-17_windows-file-paths/"
              >The weird world of Windows file paths</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 14:47:54</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35654574"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35652852">
          <h3>
            <a
              class="item"
              href="https://www.undeadly.org/cgi?action=article;sid=20230421124221"
              >OpenBSD: Viogpu(4), a VirtIO GPU driver, added to -current</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 12:42:52</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35652852"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35652541">
          <h3>
            <a class="item" href="https://revive-machines.com/index-en.html"
              >Atari 800XL Remake</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 12:11:03</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35652541"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35651871">
          <h3>
            <a
              class="item"
              href="https://www.atlasobscura.com/articles/null-island-is-one-of-the-most-visited-places-on-earth-too-bad-it-doesnt-exist"
              >Null Island is one of the most visited places on Earth, and it
              doesn’t exist</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 10:32:50</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35651871"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35651756">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Athens_Charter"
              >Athens Charter</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 10:12:23</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35651756"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35650699">
          <h3>
            <a class="item" href="https://president.mn/mng/"
              >Office of the President of Mongolia: Top to bottom text on the
              web</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 07:20:07</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35650699"
                  >Comments</a
                ><span class="descendants">: 150</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35649935">
          <h3>
            <a
              class="item"
              href="https://thedriven.io/2023/04/21/worlds-largest-battery-maker-announces-major-breakthrough-in-battery-density/"
              >CATL has announced a new “condensed” battery with 500 Wh/kg</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 04:54:39</span
              ><span class="points-container"
                >Points: <span class="points">877</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35649935"
                  >Comments</a
                ><span class="descendants">: 698</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35649917">
          <h3>
            <a
              class="item"
              href="https://daily.jstor.org/dummy-boards-the-fun-figures-of-the-1600s/"
              >Dummy Boards: The Fun Figures of the 1600s</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 04:51:00</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35649917"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35648440">
          <h3>
            <a class="item" href="https://www.saelig.com/product/c700.htm"
              >RF Breadboarding System</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-21 @ 00:37:35</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35648440"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35646033">
          <h3>
            <a
              class="item"
              href="https://www.extremeelectronics.co.uk/pico-cray-small-scale-distributed-computing/"
              >Pico Cray – Small scale distributed computing</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-20 @ 20:45:33</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35646033"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35643255">
          <h3>
            <a
              class="item"
              href="https://github.com/highlight/highlight/blob/main/README.md"
              >Show HN: We built a ClickHouse-based logging service</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-20 @ 17:26:31</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35643255"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
            <div class="text">
              <p>
                Today we're sharing a ClickHouse-based logging solution we've
                been working on. We wanted to showcase how we built it and share
                how you could try it out to give feedback. Since we started
                working on highlight.io, we've been hyper-focused on "cohesion",
                or ensuring that when you install your monitoring stack, all of
                the resources in that stack (user interactions, requests,
                traces, logs, etc.) are connected in a consumable way. We've
                written up more about our philosophy on this here [1].
              </p>
              <p>
                We started building towards this by connecting your client-side
                app and your server-side exceptions with session replay and
                exception monitoring; i.e. if an error happened in a server-side
                app, we would make it easy (with session replay) to trace all
                the steps that a user took leading up to it.
              </p>
              <p>
                Especially for larger companies using highlight.io, the request
                to tie in logs came up repeatedly, and we wanted to build this
                with the same philosophy in mind. Now, you'll see client-side
                and server-side logs all in one place, brought together in the
                context of a user session, as well as logs in the context of an
                error.
              </p>
              <p>
                Like the rest of our stack, this project is written in Go and
                Typescript, and for log ingestion/querying, we're using
                ClickHouse [2]. Before deciding on ClickHouse, we were planning
                to use OpenSearch (an aws fork of elasticsearch [3]) for this
                part of our product, but as our traffic has increased, we
                encountered quite a few pains with write throughput for
                OpenSearch. After evaluating a few options, we eventually landed
                with ClickHouse (their cloud offering was icing on the cake),
                which has also proven to be much more cost-effective so far.
              </p>
              <p>
                Building with ClickHouse from scratch has been an exciting
                journey. Eric (the mastermind behind this project) wrote a blog
                post [4] on a handful of ClickHouse learnings we've gathered
                since starting the project.
              </p>
              <p>
                For those wanting to try out the product locally, you can run
                the following commands [5]:
              </p>
              <p>
                git clone --recurse-submodules
                <a href="https://github.com/highlight/highlight"
                  >https://github.com/highlight/highlight</a
                >
                cd highlight/docker; ./run-hobby.sh;
              </p>
              <p>
                To send logs to highlight, you can use your own OpenTelemetry
                implementation [6] or use our SDKs [7] which provide lightweight
                wrappers over OTEL.
              </p>
              <p>
                Like the rest of highlight.io, we plan to make money from this
                with our hosted cloud offering. For those interested in trying
                out the cloud-hosted version, you can get setup at
                app.highlight.io.
              </p>
              <p>
                To open the floor for feedback, we would love to get some
                thoughts on what we've built so far. Beyond that, what are parts
                of a logging product you wish you had with your current setup?
                And are there any notable pain-points of using a hosted
                monitoring product? (We're toying with the idea of an enterprise
                deployment). Excited to hear from everyone.
              </p>
              <p>
                [1]:
                <a
                  href="https://highlight.io/docs/general/company/product-philosphy"
                  >https://highlight.io/docs/general/company/product-philosphy</a
                >
              </p>
              <p>
                [2]: <a href="https://clickhouse.com">https://clickhouse.com</a>
              </p>
              <p>
                [3]:
                <a href="https://news.ycombinator.com/item?id=26780848"
                  >https://news.ycombinator.com/item?id=26780848</a
                >
              </p>
              <p>
                [4]:
                <a
                  href="https://www.highlight.io/blog/how-we-built-logging-with-clickhouse"
                  >https://www.highlight.io/blog/how-we-built-logging-with-clic...</a
                >
              </p>
              <p>
                [5]:
                <a
                  href="https://www.highlight.io/docs/getting-started/self-host/self-hosted-hobby-guide"
                  >https://www.highlight.io/docs/getting-started/self-host/self...</a
                >
              </p>
              <p>
                [6]:
                <a
                  href="https://www.highlight.io/docs/getting-started/backend-logging/http"
                  >https://www.highlight.io/docs/getting-started/backend-loggin...</a
                >
              </p>
              <p>
                [7]:
                <a
                  href="https://www.highlight.io/docs/getting-started/overview#for-your-backend-logging"
                  >https://www.highlight.io/docs/getting-started/overview#for-y...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="35633291">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-04-physicists-gravity.html"
              >Physicists discover that gravity can create light</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-04-19 @ 21:02:26</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35633291"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
