<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="47139765">
          <h3>
            <a class="item" href="https://keepandroidopen.org/open-letter/"
              >Open Letter to Google on Mandatory Developer Registration for App
              Distribution</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 17:21:11</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47139765"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47139675">
          <h3>
            <a class="item" href="https://www.calebleak.com/posts/dog-game/"
              >I'm helping my dog vibe code games</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 17:15:17</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47139675"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47139519">
          <h3>
            <a
              class="item"
              href="https://linkinghub.elsevier.com/retrieve/pii/S000169182600171X"
              >Cardiorespiratory fitness is associated with lower anger and
              anxiety</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 17:03:37</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47139519"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47139475">
          <h3>
            <a class="item" href="https://jobs.ashbyhq.com/verge-genomics"
              >Verge (YC S15) Is Hiring a Director of Computational Biology and
              AI Scientists/Eng</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 17:00:34</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47139224">
          <h3>
            <a
              class="item"
              href="https://japannews.yomiuri.co.jp/features/japan-focus/20241228-229891/"
              >Kansai Airport has never lost a baggage in the 30 years since it
              opened (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 16:40:47</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47139224"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47138347">
          <h3>
            <a
              class="item"
              href="https://morningoverview.com/massive-federal-data-breach-may-be-the-biggest-hack-in-us-history/"
              >Federal data breach may be the biggest hack in US history</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 15:25:38</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47137711">
          <h3>
            <a
              class="item"
              href="https://stripe.com/newsroom/news/stripe-2025-update"
              >Stripe valued at $159B, 2025 annual letter</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 14:37:52</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47137711"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47136658">
          <h3>
            <a class="item" href="https://mketab.org/blog/sqlite_kdbx/"
              >Why the KeePass format should be based on SQLite</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 13:08:56</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47136658"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47136611">
          <h3>
            <a
              class="item"
              href="https://hacks.mozilla.org/2026/02/goodbye-innerhtml-hello-sethtml-stronger-xss-protection-in-firefox-148/"
              >Goodbye InnerHTML, Hello SetHTML: Stronger XSS Protection in
              Firefox 148</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 13:04:16</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47136611"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47136604">
          <h3>
            <a class="item" href="https://wordglyph.xyz/one-piece-at-a-time"
              >I Pitched a Roller Coaster to Disneyland at Age 10 in 1978</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 13:03:51</span
              ><span class="points-container"
                >Points: <span class="points">282</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47136604"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47136537">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2026/02/24/business/irs-meta-corporate-taxes.html"
              >IRS Tactics Against Meta Open a New Front in the Corporate Tax
              Fight</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 12:58:14</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47136537"
                  >Comments</a
                ><span class="descendants">: 138</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47136036">
          <h3>
            <a
              class="item"
              href="https://fortune.com/2026/02/24/discord-peter-thiel-backed-persona-identity-verification-breach/"
              >Discord cuts ties with Peter Thiel-backed verification
              software</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 11:59:14</span
              ><span class="points-container"
                >Points: <span class="points">298</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47136036"
                  >Comments</a
                ><span class="descendants">: 223</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47133055">
          <h3>
            <a class="item" href="https://github.com/GreatScott/enveil"
              >Show HN: enveil – hide your .env secrets from prAIng eyes</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 05:04:50</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47133055"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47132388">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2026-02-blood-boosts-alzheimer-diagnosis-accuracy.html"
              >Blood test boosts Alzheimer's diagnosis accuracy to 94.5%,
              clinical study shows</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 03:10:16</span
              ><span class="points-container"
                >Points: <span class="points">405</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47132388"
                  >Comments</a
                ><span class="descendants">: 157</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47132102">
          <h3>
            <a class="item" href="https://lyra.horse/x86css/"
              >Show HN: X86CSS – An x86 CPU emulator written in CSS</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 02:27:14</span
              ><span class="points-container"
                >Points: <span class="points">240</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47132102"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47131225">
          <h3>
            <a
              class="item"
              href="https://www.guidelabs.ai/post/steerling-8b-base-model-release/"
              >Show HN: Steerling-8B, a language model that can explain any
              token it generates</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 00:38:02</span
              ><span class="points-container"
                >Points: <span class="points">292</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47131225"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47130860">
          <h3>
            <a
              class="item"
              href="https://dork.dev/posts/2026-02-20-ported-coreboot/"
              >I Ported Coreboot to the ThinkPad X270</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 23:58:45</span
              ><span class="points-container"
                >Points: <span class="points">273</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47130860"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47129727">
          <h3>
            <a
              class="item"
              href="https://writings.stephenwolfram.com/2026/02/making-wolfram-tech-available-as-a-foundation-tool-for-llm-systems/"
              >Making Wolfram tech available as a foundation tool for LLM
              systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 22:11:34</span
              ><span class="points-container"
                >Points: <span class="points">285</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47129727"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47125263">
          <h3>
            <a
              class="item"
              href="https://www.xda-developers.com/samsung-promised-make-old-phones-useful-galaxy-upcycle/"
              >Samsung Upcycle Promise</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 17:14:02</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47125263"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47124171">
          <h3>
            <a class="item" href="https://missing.csail.mit.edu/"
              >The Missing Semester of Your CS Education – Revised for 2026</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 16:02:48</span
              ><span class="points-container"
                >Points: <span class="points">298</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47124171"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=22226380"
                >https://news.ycombinator.com/item?id=22226380</a
              >
              and
              <a href="https://news.ycombinator.com/item?id=34934216"
                >https://news.ycombinator.com/item?id=34934216</a
              >).
              <p>
                We’ve updated the course based on our personal experiences as
                well as major changes in the field (e.g., the proliferation of
                AI-powered developer tools) over the past several years. The
                2026 course includes revised versions of four lectures from the
                previous course, and it adds five entirely new lectures:
              </p>
              <p>- Development Environment and Tools</p>
              <p>- Packaging and Shipping Code</p>
              <p>- Agentic Coding</p>
              <p>- Beyond the Code (soft skills)</p>
              <p>- Code Quality</p>
              <p>
                We’d love to hear any feedback from the HN community to improve
                the current or future iterations of the course. In particular,
                we’re curious to hear the community’s take on our inclusion of
                AI-related topics (e.g., dedicating an entire class to the topic
                of agentic coding; though we tried to counterbalance it with
                plenty of disclaimers, and a dedicated section on AI etiquette
                in Beyond the Code).
              </p>
              <p>--Anish, Jon, and Jose</p>
            </div>
          </section>
        </section>
        <section id="47123689">
          <h3>
            <a
              class="item"
              href="https://gwern.net/doc/iq/high/smpy/1984-clements.pdf"
              >Terence Tao, at 8 years old (1984) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 15:36:50</span
              ><span class="points-container"
                >Points: <span class="points">436</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47123689"
                  >Comments</a
                ><span class="descendants">: 255</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47122715">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/age-verification"
              >The Age Verification Trap: Verifying age undermines everyone's
              data protection</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 14:22:39</span
              ><span class="points-container"
                >Points: <span class="points">1624</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47122715"
                  >Comments</a
                ><span class="descendants">: 1238</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47114678">
          <h3>
            <a
              class="item"
              href="https://idiallo.com/blog/installed-single-turnstile-for-security-theater"
              >We installed a single turnstile to feel secure</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-22 @ 21:07:11</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47114678"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47112148">
          <h3>
            <a
              class="item"
              href="https://www.amzi.com/articles/irq_expert_system.htm"
              >Extending C with Prolog (1994)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-22 @ 16:10:18</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47112148"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47102441">
          <h3>
            <a
              class="item"
              href="https://www.thecollector.com/catherine-braganza-queen-tea-england/"
              >Catherine of Braganza, the Queen Who Brought Tea to England</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-21 @ 16:55:23</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47102441"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47100714">
          <h3>
            <a
              class="item"
              href="https://unsung.aresluna.org/unsung-heroes-flickrs-urls-scheme/"
              >Unsung heroes: Flickr's URLs scheme</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-21 @ 13:36:45</span
              ><span class="points-container"
                >Points: <span class="points">230</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47100714"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47099401">
          <h3>
            <a
              class="item"
              href="https://turbopuffer.com/blog/object-storage-queue"
              >A distributed queue in a single JSON file on object storage</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-21 @ 10:31:37</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47099401"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47097405">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/technology/smallest-qr-code-bacteria-tu-wien/"
              >Tiny QR code achieved using electron microscope technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-21 @ 04:08:32</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47097405"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47095266">
          <h3>
            <a
              class="item"
              href="https://www.lix.polytechnique.fr/Labo/Dale.Miller/lProlog/"
              >λProlog: Logic programming in higher-order logic</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-20 @ 23:02:08</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47095266"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47094768">
          <h3>
            <a class="item" href="https://www.withdiode.com/"
              >Diode – Build, program, and simulate hardware</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-20 @ 22:14:13</span
              ><span class="points-container"
                >Points: <span class="points">375</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47094768"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
