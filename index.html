<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="36505197">
          <h3>
            <a class="item" href="https://skio.com/careers/"
              >Skio (YC S20) – Subscriptions for Shopify, ReCharge Migrations Is
              Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 12:03:14</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36505122">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=36505122"
              >Ask HN: How to navigate the world as a brain-damaged 17 year
              old?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 11:53:33</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36505122"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
            <div class="text">
              <p>
                I had a pretty clear plan: Apply to Oxbridge. Failing that, do a
                degree apprenticeship at GCHQ etc.
              </p>
              <p>
                March last year my friend was attacked by bullies at school. I
                tried to help, I was kicked in the head multiple times. The
                perpetrators got away with it because of our pathetic "justice"
                system. I was off school for 6 months and I have post-concussion
                syndrome. I am now below average intelligence. I am constantly
                fatigued. I have constant headaches. When symptoms are
                particularly bad I can barely walk or process speech. When I've
                been able to rest for a extended period I feel almost like I
                used to, but everything degrades whenever I try to actually do
                something. My doctor has been helpful and sympathetic, but I am
                still waiting on specialist help via the NHS.
              </p>
              <p>
                I am a year into my A levels. I have done nothing but study this
                year. I wake up, go to school, stay awake with caffeine tablets
                and strong painkillers, get home, revise, then sleep. It's the
                same at weekends. Studying is extremely difficult and I retain
                far less information. I optimise my time with Anki, spaced
                repetition, and Obsidian. Despite this effort, I had to drop an
                A level (further maths), which made my already infitesimal
                chance of Oxbridge zero, and I am barely staying afloat in other
                qualifications. My current A levels are maths, physics, and
                compsci.
              </p>
              <p>
                I don't do much programming now, but when I do I'm significantly
                worse. The most noticeable difference is in my working memory;
                where previously I would just write something, I now become
                overwhelmed if I don't meticulously plan and break the problem
                up first.
              </p>
              <p>
                I have no clue how to continue. At the current rate, I will get
                good enough grades to get into one of the local unis. I think
                I'd be OK with a computer science course, as I already know much
                of the content. However, I don't think I can do an
                apprenticeship or other form of inflexible work - I am not
                reliably awake, and I'm simply not that intelligent anymore. I
                plan to take a gap year whatever I do to get some rest.
              </p>
              <p>
                I've considered trying to work as a freelancer running a
                software business (after A levels/degree), as that would
                hopefully allow for more flexibility regarding symptoms.
                However, I have absolutely no clue how I would go about doing
                that, or if it's a good option. I can do desktop or web dev, I
                know Python, Rust, and TS well.
              </p>
              <p>
                I'm not really sure what I'm asking. Is the freelance idea a
                good one? I really don't know how to do things as someone who's
                motivated, and retains a lot of knowledge I learnt before my
                concussion, but struggles to learn new things and stay awake.
                I'd appreciate some advice.
              </p>
            </div>
          </section>
        </section>
        <section id="36504727">
          <h3>
            <a class="item" href="https://www.rewiringamerica.org/pace"
              >Electrifying everything at the rate required to meet our climate
              goals</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 10:52:26</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36504727"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36504661">
          <h3>
            <a
              class="item"
              href="https://www.vangoghmuseum.nl/en/collection?q=&amp;artist=Vincent+van+Gogh"
              >Vincent van Gogh's paintings and drawings</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 10:42:10</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36504661"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36503983">
          <h3>
            <a
              class="item"
              href="https://jmmv.dev/2023/06/fast-machines-slow-machines.html"
              >Fast machines, slow machines</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 08:53:14</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36503983"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36503687">
          <h3>
            <a class="item" href="https://www.fda.gov/media/164602/download"
              >Irregularities found during FDA inspection of Intas
              Pharmaceuticals</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 08:05:29</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36503687"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36502433">
          <h3>
            <a
              class="item"
              href="https://awesomekling.substack.com/p/welcoming-shopify-as-a-ladybird-sponsor"
              >Welcoming Shopify as a Ladybird sponsor</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 04:48:03</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36502433"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36502398">
          <h3>
            <a
              class="item"
              href="http://pompeiisites.org/en/comunicati/pompeii-a-still-life-discovered-by-the-new-excavations-of-regio-ix/"
              >A proto-pizza emerges from a fresco on a Pompeii wall</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 04:41:51</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36502398"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36502366">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2023/07/03/book-reviews-plastic-waste"
              >Plastics are poisoning us</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 04:36:33</span
              ><span class="points-container"
                >Points: <span class="points">192</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36502366"
                  >Comments</a
                ><span class="descendants">: 192</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36502319">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/chiplet"
              >What AMD Learned from Its Big Chiplet Push</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 04:31:22</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36502319"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36502267">
          <h3>
            <a
              class="item"
              href="https://www.atlasobscura.com/articles/who-wears-glass-dresses"
              >Glass dresses, a fairytale fashion trend that never quite took
              off (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 04:23:21</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36502267"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36501742">
          <h3>
            <a class="item" href="https://github.com/misprit7/computerraria"
              >Computerraria: A fully compliant RISC-V computer inside
              Terraria</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 03:00:48</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36501742"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36501657">
          <h3>
            <a
              class="item"
              href="https://astralcodexten.substack.com/p/every-flashing-element-on-your-site"
              >Flashing elements alienate users</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 02:46:45</span
              ><span class="points-container"
                >Points: <span class="points">206</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36501657"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36501364">
          <h3>
            <a class="item" href="https://muhammadraza.me/2022/data-oneliners/"
              >Using command line to process CSV files (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 01:58:33</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36501364"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36501209">
          <h3>
            <a class="item" href="https://www.trinitydesktop.org/"
              >Trinity Desktop Environment – a modern KDE3 fork</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 01:38:12</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36501209"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36500945">
          <h3>
            <a
              class="item"
              href="https://varunshenoy.substack.com/p/natural-language-is-an-unnatural"
              >Natural language is an unnatural interface</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-28 @ 01:04:38</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36500945"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36500294">
          <h3>
            <a
              class="item"
              href="https://vermaden.wordpress.com/2023/06/28/freebsd-jails-containers/"
              >FreeBSD Jails Containers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 23:44:02</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36500294"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36500182">
          <h3>
            <a class="item" href="https://cooklang.org"
              >Cooklang – Recipe Markup Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 23:32:46</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36500182"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36500138">
          <h3>
            <a
              class="item"
              href="https://simpleblog.ai/blog/google-ads-can-do-more-for-customers/"
              >Google does little to reduce advertisers' costs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 23:27:42</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36500138"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36499905">
          <h3>
            <a
              class="item"
              href="https://www.airgradient.com/blog/hidden-costs-of-air-quality-monitoring/"
              >The hidden cost of air quality monitoring</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 23:02:21</span
              ><span class="points-container"
                >Points: <span class="points">482</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36499905"
                  >Comments</a
                ><span class="descendants">: 213</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36499073">
          <h3>
            <a
              class="item"
              href="https://blogs.nvidia.com/blog/2023/06/27/generative-ai-debut-mlperf/"
              >H100 GPUs Set Standard for Gen AI in Debut MLPerf Benchmark</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 21:43:09</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36499073"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36496693">
          <h3>
            <a
              class="item"
              href="https://www.networkworld.com/article/3700616/cisco-to-buy-network-monitoring-firm-samknows-for-better-last-mile-visibility.html"
              >Cisco to buy network-monitoring firm SamKnows for better
              last-mile visibility</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 18:20:02</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36496693"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36496529">
          <h3>
            <a
              class="item"
              href="https://www.independent.co.uk/asia/east-asia/south-korea-new-age-system-2023-b2364809.html"
              >South Korea adopts new law to join the international standard of
              age counting</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 18:06:56</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36496529"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36495684">
          <h3>
            <a
              class="item"
              href="https://freddiedeboer.substack.com/p/pixar-was-never-a-masterpiece-factory"
              >Pixar was never a masterpiece factory</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 17:00:47</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36495684"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36495492">
          <h3>
            <a class="item" href="https://dl.acm.org/doi/pdf/10.1145/3605240"
              >The Data Trust Deficit [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 16:50:30</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36495492"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36495119">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2023/06/27/jwst_carbon_molecule_discovery/"
              >In deep space, astronomers spot precursor of carbon based life</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 16:29:51</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36495119"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36495048">
          <h3>
            <a
              class="item"
              href="https://kffhealthnews.org/news/article/drugmakers-are-abandoning-cheap-generics-and-now-us-cancer-patients-cant-get-meds/"
              >Drugmakers are abandoning cheap generics</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 16:25:07</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36495048"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36494639">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=36494639"
              >Launch HN: Fuse (YC W19) – Unified API for financial data
              aggregators</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 15:56:41</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36494639"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.letsfuse.com/">https://www.letsfuse.com/</a
              >). We offer a single integration to multiple financial data
              aggregators and automatically select the most reliable one for
              each institution. Here’s a quick demo:
              <a href="https://youtu.be/w7sNHGav0Fg"
                >https://youtu.be/w7sNHGav0Fg</a
              >
              <p>
                If you're building a product that requires customers to link
                their financial accounts, you might integrate a financial data
                aggregator (such as Plaid, Truelayer, or Finicity) to connect
                with your user's bank account. You’ll probably then experience
                the following issues: customers unable to use your product
                because their financial institution is not supported (e.g.,
                credit unions, local or community banks); frequent
                disconnections; API errors; and high drop-offs during the bank
                linking flow.
              </p>
              <p>
                We spent 2.5 years developing YSplit, a fintech app providing
                joint spending cards for couples. Users linked their bank
                accounts for spend limits but faced issues with unsupported
                banks and frequent disconnections. We looked at other apps and
                saw that the ideal solution was to rely on multiple aggregators,
                but it wasn’t the right use of engineering resources for that
                startup. Upon pivoting from YSplit, though, we decided to go
                back to that problem and address it.
              </p>
              <p>
                We provide a UI component for React, React Native, Flutter, iOS
                &amp; Android native to facilitate bank account linkage within
                your app. When a user taps on an institution, we use a time
                series model to identify the most optimal aggregator to show
                based on historical success rates and disconnection as well as
                downtime. After linkage, we provide a Fuse access token for
                querying balance, transactions, and more via our unified API,
                offering a consistent model irrespective of the aggregator.
              </p>
              <p>
                We also provide other products to translate historical bank data
                into consumer/business credit risk to help you answer questions
                like: How much credit can I feel comfortable offering this user
                or company? Is a user likely to pay me on time? Can I offer
                instant ACH to this customer?
              </p>
              <p>
                By combining aggregators, you gain from their diverse connection
                methods, favoring APIs over screen scraping. Our customers have
                cut disconnections by 16%, increased coverage by 5k institutions
                in the US, and boosted conversions by 20% with Fuse. Moreover,
                we support aggregators in Africa, Europe, South America,
                Australia, and Asia, enabling global product expansion with a
                single API.
              </p>
              <p>
                We don't store personal info and only act as a pass-through. We
                are currently undergoing SOC 2 II audit and can provide
                engagement letters for anyone looking to go to production.
              </p>
              <p>
                We have a self-serve onboarding
                <a href="https://dashboard.letsfuse.com"
                  >https://dashboard.letsfuse.com</a
                >
                to get sandbox keys. Our docs are available here
                <a href="https://docs.letsfuse.com">https://docs.letsfuse.com</a
                >. We’d love for you to try it and give us feedback on
                improvements to the product and docs. If you have any feature
                requests or any aggregators you’d like us to support, let us
                know.
              </p>
            </div>
          </section>
        </section>
        <section id="36493715">
          <h3>
            <a class="item" href="https://neal.fun/password-game/"
              >The Password Game</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 14:51:22</span
              ><span class="points-container"
                >Points: <span class="points">1043</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36493715"
                  >Comments</a
                ><span class="descendants">: 396</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36491704">
          <h3>
            <a class="item" href="https://saurabhs.org/advanced-macos-commands"
              >macOS command-line tools you might not know about</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-06-27 @ 12:08:38</span
              ><span class="points-container"
                >Points: <span class="points">1823</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36491704"
                  >Comments</a
                ><span class="descendants">: 401</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
