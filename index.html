<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41316999">
          <h3>
            <a
              class="item"
              href="https://www.gamingonlinux.com/2024/08/celebrating-6-years-since-valve-announced-steam-play-proton-for-linux/"
              >Celebrating 6 years since Valve announced Steam Play Proton for
              Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-22 @ 05:05:11</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41316999"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41316890">
          <h3>
            <a
              class="item"
              href="https://torrentfreak.com/webtoon-targets-170-pirate-domains-through-dmca-subpoena-240821/"
              >Webtoon Targets 170 Pirate Domains Through DMCA Subpoena</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-22 @ 04:44:43</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41316890"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41316598">
          <h3>
            <a
              class="item"
              href="https://willem.com/blog/2020-11-30_designing-my-own-watch/"
              >Designing my own watch (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-22 @ 03:41:41</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41316598"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41316436">
          <h3>
            <a class="item" href="https://ghostdev.xyz/posts/self-hosting-dns/"
              >Self-Hosting DNS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-22 @ 03:04:23</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41316436"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41316342">
          <h3>
            <a class="item" href="https://lwn.net/Articles/276782/"
              >A 20-part deep dive into how linkers work</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-22 @ 02:47:18</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41316342"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41316067">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Bum_Farto"
              >Bum Farto</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-22 @ 02:05:49</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41316067"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41315359">
          <h3>
            <a class="item" href="https://box2d.org/posts/2024/08/simd-matters/"
              >SIMD Matters: Graph Coloring</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 23:55:42</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41315359"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41315138">
          <h3>
            <a
              class="item"
              href="https://medium.com/@thetateman/im-tired-of-fixing-customers-ai-generated-code-94816bde4ceb"
              >I'm tired of fixing customers' AI generated code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 23:16:21</span
              ><span class="points-container"
                >Points: <span class="points">206</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41315138"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41315126">
          <h3>
            <a
              class="item"
              href="https://aeon.co/essays/euphemisms-are-like-underwear-best-changed-frequently"
              >Euphemisms are best changed frequently (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 23:14:59</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41315126"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41315068">
          <h3>
            <a
              class="item"
              href="https://www.androidauthority.com/google-play-security-reward-program-winding-down-3472376/"
              >Google Play will no longer pay to discover vulnerabilities in
              Android apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 23:06:17</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41315068"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41314161">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41314161"
              >Meticulous (YC S21) is hiring to eliminate E2E UI tests</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 21:01:27</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm Gabriel, CEO and co-founder of Meticulous,
                <a href="https://meticulous.ai/?utm_source=hn"
                  >https://meticulous.ai/?utm_source=hn</a
                >.
              </p>
              <p>
                Backed by YC, Coatue, the CTO of GitHub, CEO of Vercel, CPO of
                Adobe and others,
                <a href="https://meticulous.ai?utm_source=hn"
                  >https://meticulous.ai?utm_source=hn</a
                >
                monitors how developers interact with your app and automatically
                generates and maintains test coverage nearing 100%. Even for the
                most complex applications. All without needing to write or
                maintain a single test.
              </p>
              <p>
                Our customers find it increases their end-to-end frontend
                development velocity by over 20%. If you’ve ever had the rare
                chance of working on a project where you can have near 100%
                confidence in your changes before you hit merge you’ll
                understand this immediately: programming feels completely
                different in that environment. Every dev can refactor with
                complete confidence and speed. And so they do, keeping the code
                fresh &amp; nimble. Our customers’s developers have been able to
                move faster than they’ve often ever experienced before.
              </p>
              <p>
                We’re growing rapidly, and want to provide this experience to
                every software company in the world — while freeing them of the
                burden of writing or maintaining tests. We’ve built a team of
                exclusively world-class software engineers (“One of the
                strongest teams that I have seen” - Jared Friedman, Partner at Y
                Combinator).
              </p>
              <p>
                If you join us we’ll promise you’ll learn faster than you ever
                have in your career, and will be able to fundamentally change
                how the world develops software.
              </p>
              <p>## How does Meticulous work?</p>
              <p>
                You add a script tag on localhost and internal stacks, and
                Meticulous records all the development teams daily interactions
                with the app as they develop features. Meticulous understands
                every line of code, component and route executed by each flow
                and uses this to maintain a visual snapshot test suite that
                covers close to 100% of your code. This suite tests your apps
                UI, user flows and logic at all layers, across all edge cases,
                all branches, all feature flags. As your app evolves, your test
                suite evolves.
              </p>
              <p>
                The tests are executed in an environment that ensures full
                determinism from the lowest level, right down to how the
                browsers’ macro &amp; micro-tasks are scheduled — so no flakes.
                This bedrock of determinism is what makes the full system
                possible.
              </p>
              <p>
                You can watch a 60 second demo at
                <a href="https://meticulous.ai?utm_source=hn"
                  >https://meticulous.ai?utm_source=hn</a
                >.
              </p>
              <p>## What’s our team like?</p>
              <p>
                We are a London-based YC company. Our engineering team
                previously worked at Dropbox, Opendoor, Palantir, GitHub and
                Google, and have previously led 100+ engineer organizations at
                these companies. We are backed by some of the best founders and
                technical leaders in Silicon Valley, including Guillermo Rauch
                (founder Vercel, author next.js), Jason Warner (CTO GitHub),
                Scott Belsky (CPO Adobe), Calvin French-Owen (founder Segment),
                Jared Friedman (YC partner and former CTO of Scribd) and a bunch
                of other incredible folks.
              </p>
              <p>
                Catching visual regressions is just the start. There is an
                entire category of products to build on top of replay. This
                ranges from catching exceptions to revealing the performance
                impact of frontend code.
              </p>
              <p>
                We want to change the way the world develops software, and
                influence software approaches for decades to come.
              </p>
              <p>
                We are seeding a London office and hiring an onsite founding
                engineer to join our team of six. We sponsor visas.
              </p>
              <p>
                You will have autonomy in building out this technology, but here
                are a few problems you might work on:
              </p>
              <p>
                - Build a distributed system to concurrently replay thousands of
                sessions, such that a developer gets a result in seconds. -
                Speed up the replay of sessions in a way that retains
                determinism. - Derive algorithms to detect sessions that cover
                differing code paths and edge cases, and ignore sessions that
                are too similar. - Help build out a team of world-class, highly
                collaborative, software engineers.
              </p>
              <p>
                As founding engineer, you get to shape the company, and build
                the culture and technology from the ground up.
              </p>
              <p>What we look for:</p>
              <p>
                In a sentence: Technically brilliant, delightful to work with,
                combined with a self-awareness and strong desire to improve. We
                also want to make sure everyone is highly supportive of each
                other; we win as a team.
              </p>
              <p>
                We're currently only looking to bring on folks with senior level
                skill sets and 5+ years of industry experience. You should have
                strong web fundamentals and a deep love for software
                engineering. Maybe you enjoy programming books like Clean Code,
                Designing Data Intensive Applications, Pragmatic Programmer etc.
                or enjoy hacking on interesting side projects. You value
                transparency and candid feedback, and are motivated by a strong
                desire to become the best engineer you can be.
              </p>
              <p>
                You can read about our values here
                <a
                  href="https://ruby-wish-a8f.notion.site/Mission-Values-979c32ec58e74856af02da2e59c9f64d"
                  >https://ruby-wish-a8f.notion.site/Mission-Values-979c32ec58e...</a
                >
              </p>
              <p>
                You will be given the space and time to up-level yourself as an
                engineer in terms of conferences, reading, or whatever you think
                will be most valuable. We will also set you up with mentorship,
                if you desire it, from top engineering leaders (folks running
                100-engineer organizations at the world's leading tech
                companies).
              </p>
              <p>
                You’ll get to work alongside some of the best engineers there
                are, break new ground solving truly novel CS problems and
                deliver something that transforms how software is built.
              </p>
              <p>
                If this sounds interesting, please reach out to me at gabe [at]
                meticulous [dot] ai with “HN” in the subject line and 2-3
                sentences about what you find interesting about Meticulous and
                your resume/LinkedIn/GitHub.
              </p>
            </div>
          </section>
        </section>
        <section id="41314039">
          <h3>
            <a class="item" href="http://cantrip.org/sortfast.html"
              >Do low-level optimizations matter? Faster quicksort with cmov
              (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 20:42:03</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41314039"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41314031">
          <h3>
            <a
              class="item"
              href="https://www.mathsisfun.com/numbers/euclid-square-root-2-irrational.html"
              >Euclid's Proof that √2 is Irrational</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 20:39:50</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41314031"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41313740">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/us-news/article/2024/aug/21/sacramento-hospital-patient-death-checked-out"
              >US hospital told family their daughter had checked out when in
              fact she'd died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 20:07:48</span
              ><span class="points-container"
                >Points: <span class="points">299</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41313740"
                  >Comments</a
                ><span class="descendants">: 160</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41313290">
          <h3>
            <a
              class="item"
              href="https://blog.gridstatus.io/a-record-setting-day-in-ercot/"
              >Breaking down a record-setting day on the Texas grid</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 19:18:48</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41313290"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41312521">
          <h3>
            <a
              class="item"
              href="https://jaspervdj.be/posts/2024-08-21-turnstyle.html"
              >Turnstyle – An esoteric, graphical functional language</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 17:49:40</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41312521"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41312225">
          <h3>
            <a class="item" href="https://www.midjourney.com/"
              >Midjourney web experience is now open to everyone</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 17:11:48</span
              ><span class="points-container"
                >Points: <span class="points">266</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41312225"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41312079">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41312079"
              >Launch HN: Outerport (YC S24) – Instant hot-swapping for AI model
              weights</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 16:55:36</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41312079"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
            <div class="text">
              <a href="https://outerport.com">https://outerport.com</a>), a
              distribution network for AI model weights that enables
              ‘hot-swapping’ of AI models to save on GPU costs.
              <p>
                ‘Hot-swapping’ lets you serve different models on the same GPU
                machine with only ~2 second swap times (~150x faster than
                baseline). You can see this in action through a live demo where
                you try the same prompts on different open source large language
                models at
                <a href="https://hotswap.outerport.com"
                  >https://hotswap.outerport.com</a
                >
                and see the docs here
                <a href="https://docs.outerport.com"
                  >https://docs.outerport.com</a
                >.
              </p>
              <p>
                Running AI models on the cloud is expensive. Outerport came from
                our own experience working on AI services ourselves and
                struggling with the cost.
              </p>
              <p>
                Cloud GPUs are charged by the amount of time used. A long
                start-up time (from loading models into GPU memory) means that
                to serve requests quickly, we need to acquire extra GPUs with
                models pre-loaded for spare capacity (i.e. ‘overprovision’). The
                time spent on loading models also adds to the cost. Both lead to
                inefficient use of expensive hardware.
              </p>
              <p>
                The long start-up times are caused by how massive modern AI
                models are, particularly large language models. These models are
                often several gigabytes to terabytes in size. Their sizes
                continue to grow as models evolve, exacerbating the issue.
              </p>
              <p>
                GPU capacity also needs to adapt dynamically according to
                demand, further complicating the issue. Starting up a new
                machine with another GPU is time consuming, and sending a large
                model there is also time consuming.
              </p>
              <p>
                Traditional container-based solutions and orchestration systems
                (like Docker, Kubernetes) are not optimized for these large,
                storage-intensive AI models, as they are designed for smaller,
                more numerous containerized applications (which are usually 50MB
                to 1GB in size). There needs to be a solution that is designed
                specifically for model weights (floating point arrays) running
                on GPUs, to take advantage of things like layer sharing, caching
                and compression.
              </p>
              <p>
                We made Outerport, a specialized system to manage and deploy AI
                models, as a solution to these problems and to help save GPU
                costs.
              </p>
              <p>
                Outerport is a caching system for model weights, allowing
                read-only models to be cached in pinned RAM for fast loading
                into GPU. Outerport is also hierarchical, maintaining a cache
                across S3 to local SSD to RAM to GPU memory, optimizing for
                reduced data transfer costs and load balancing.
              </p>
              <p>
                Within Outerport, models are managed by a dedicated daemon
                process which handles transfer to GPU, loading models from
                registry, and orchestrates the ‘hot swapping’ of multiple models
                on one machine.
              </p>
              <p>
                ‘Hot-swapping’ lets you provision a single GPU machine to be
                ‘multi-tenant’, such that multiple services with different
                models can run on the same machine. For example, this can
                facilitate A/B testing of two different models or having a text
                generation &amp; image generation endpoint on the same machine.
              </p>
              <p>
                We have been busy running simulations to determine the cost
                reductions we can get from leveraging this multi-model service
                scheme instead of multiple single-model services. Our initial
                simulation results show that we can achieve a 40% reduction in
                GPU running time costs. This improvement can be attributed to
                the multi-model service’s ability to smoothen out peaks of
                traffic, enabling more effective horizontal scaling. Overall,
                less time is wasted on acquiring additional machines and model
                loading, significantly saving costs. Our hypothesis is that the
                cost savings are substantial enough to make a viable business
                while still saving customers significant amounts of money.
              </p>
              <p>
                We think that there are lots of exciting directions to take from
                here—from more sophisticated compression algorithms to providing
                a central platform for model management and governance. Towaki
                worked on ML systems and model compression at NVIDIA, and Allen
                used to do research in operations research, which is also why
                we’re so excited about this problem as something that combines
                both.
              </p>
              <p>
                We’re super excited to share Outerport with you all. We’re also
                intending to release as much as possible of this in an open core
                model when we’re ready. We would love to know what you think—and
                experiences you have in working on this, related problems, or
                any other ideas you might have on this problem!
              </p>
            </div>
          </section>
        </section>
        <section id="41311479">
          <h3>
            <a class="item" href="https://make-firefox-private-again.com/"
              >Make Firefox Private Again</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 15:57:36</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41311479"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41310865">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/mathematicians-prove-hawking-wrong-about-extremal-black-holes-20240821/"
              >Mathematicians prove Hawking wrong about the most extreme black
              holes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 14:50:20</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41310865"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41310834">
          <h3>
            <a
              class="item"
              href="https://www.lightly.ai/post/self-supervised-learning-for-videos"
              >Self-Supervised Learning for Videos</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 14:46:17</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41310834"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41310433">
          <h3>
            <a class="item" href="https://francisbach.com/jensen-inequality/"
              >Revisiting the Classics: Jensen's Inequality (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 14:05:48</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41310433"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41310384">
          <h3>
            <a
              class="item"
              href="https://www.construction-physics.com/p/how-to-build-a-50000-ton-forging"
              >How to build a 50k ton forging press</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 14:00:47</span
              ><span class="points-container"
                >Points: <span class="points">287</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41310384"
                  >Comments</a
                ><span class="descendants">: 132</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41309072">
          <h3>
            <a
              class="item"
              href="https://lucumr.pocoo.org/2024/8/21/harvest-season/"
              >Rye and Uv: August Is Harvest Season for Python Packaging</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 11:12:28</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41309072"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41308599">
          <h3>
            <a
              class="item"
              href="https://switowski.com/blog/i-have-built-my-first-successful-side-project-and-i-hate-it/"
              >I've built my first successful side project, and I hate it</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 09:59:41</span
              ><span class="points-container"
                >Points: <span class="points">1190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41308599"
                  >Comments</a
                ><span class="descendants">: 348</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41307815">
          <h3>
            <a class="item" href="https://github.com/hsfzxjy/handwriter.ttf"
              >Show HN: Handwriter.ttf – Handwriting Synthesis with Harfbuzz
              WASM</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 07:47:05</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41307815"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
            <div class="text">
              During the hype of llama.ttf months ago, I was speculating the
              potential of WASM shaper for even crazier purpose, one that fitter
              to a font shaper's duty -- to synthesize font at runtime. This
              project as proof-of-concept implements a synthesizer that
              generates and rasterizes handwriting-style font, backed by a
              super-lightweight RNN model (~14MiB).
            </div>
          </section>
        </section>
        <section id="41292477">
          <h3>
            <a
              class="item"
              href="https://redis.io/docs/latest/develop/use/patterns/distributed-locks/"
              >Distributed Locks with Redis (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-19 @ 16:34:21</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41292477"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41292321">
          <h3>
            <a
              class="item"
              href="https://googlemapsmania.blogspot.com/2024/08/how-world-powers-itself.html"
              >Maps Mania: How the World Powers Itself</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-19 @ 16:17:12</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41292321"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41286486">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-08-isnt-colorado-snowpack-river-lack.html"
              >Why isn't Colorado's snowpack ending up in the Colorado River?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-18 @ 23:42:15</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41286486"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41275395">
          <h3>
            <a class="item" href="https://www.awwsmm.com/blog/code-as-art"
              >Code as Art</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-17 @ 15:53:02</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41275395"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
