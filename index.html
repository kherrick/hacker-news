<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39619041">
          <h3>
            <a class="item" href="https://yolken.net/blog/end-of-airplanedev"
              >The End of Airplane.dev</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 18:16:58</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39619041"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39618796">
          <h3>
            <a
              class="item"
              href="https://www.thelancet.com/journals/laninf/article/PIIS1473-3099(24)00134-8/fulltext"
              >Adaptive immune responses larger and functionally preserved in a
              hypervaccinated</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 18:01:57</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39618796"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39618784">
          <h3>
            <a class="item" href="https://koenvangilst.nl/labs/forest-watch"
              >Show HN: Forest Watch</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 18:01:10</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39618784"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’ve build this as a demo of what you can do with the ArcGIS
                library and the geo data that is offered by Global Forest Watch
                and Esri. Don’t forget to click the history button.
              </p>
              <p>Works best on desktop!</p>
              <p>
                The demo is build with React and open source:
                <a
                  href="https://github.com/vnglst/koenvangilst.nl/tree/main/app/(blank)/labs/forest-watch"
                  >https://github.com/vnglst/koenvangilst.nl/tree/main/app/(bla...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39618673">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2024/03/06/apple-terminates-epic-games-developer-account-calling-it-a-threat-to-the-ios-ecosystem/"
              >Apple terminates Epic Games developer account calling it a
              'threat' to iOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 17:53:35</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39618673"
                  >Comments</a
                ><span class="descendants">: 174</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39618640">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39618640"
              >Launch HN: Circleback (YC W24) – Tooling to make meetings more
              efficient</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 17:50:41</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39618640"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <a href="https://circleback.ai">https://circleback.ai</a>), an
              AI-powered product to help teams make more efficient use of
              meetings. Circleback automatically writes notes and assigns action
              items, as well as extract things you care about after every
              meeting. Here’s a demo:
              <a href="https://www.youtube.com/watch?v=13NX0QxG5hI&amp;t=10s"
                >https://www.youtube.com/watch?v=13NX0QxG5hI&amp;t=10s</a
              >.
              <p>
                Meetings can suck (<a
                  href="https://paulgraham.com/makersschedule.html"
                  >https://paulgraham.com/makersschedule.html</a
                >), but we think better tooling can make them suck less. With
                Circleback, you don’t have to jot down notes/action items,
                review past calls to extract what was said, tediously update
                other sources (i.e. CRMs, issue trackers), or forget where you
                left off last time.
              </p>
              <p>
                Ever had to hop on a 30-min call with someone to get unblocked
                on something you're working on? You go off and do what you need
                to do, but the outcomes/learnings of that call aren’t documented
                anywhere. Next time someone wants to do something similar, they
                end up having a very similar 30-min call. This is a common
                pattern across organizations, especially medium-to-large ones,
                and it’s just one example of the vast inefficiency of meetings.
              </p>
              <p>
                Needless to say, the best meetings are the ones you never attend
                in the first place. Really good notes let you skip more meetings
                and catch up with what you need later. In fact, some teams are
                using Circleback precisely to avoid having unnecessary
                attendance in meetings. That’s the holy grail as far as we’re
                concerned!
              </p>
              <p>
                This space is a good fit for LLMs because while they can’t do
                everything, they excel at processing unstructured data like a
                transcript. To get rid of even 20% of busywork around meetings
                is already a massive win—and we think the potential is a lot
                higher than that.
              </p>
              <p>
                For a realistic example, I imported one of GitLab’s meetings
                from their YouTube channel (they famously publish them!) into
                Circleback. The original video is here
                <a href="https://www.youtube.com/watch?v=1dwzE5j-IQw"
                  >https://www.youtube.com/watch?v=1dwzE5j-IQw</a
                >
                (though you won’t want to watch the whole thing) and you can
                view the notes Circleback wrote for it here:
                <a href="https://app.circleback.ai/view/lt93jwzdg3hdzcdnxmm"
                  >https://app.circleback.ai/view/lt93jwzdg3hdzcdnxmm</a
                >.
              </p>
              <p>
                You can create automations in Circleback for tasks that come up
                repeatedly. For example, you can create a workflow to identify
                feature requests that come up in customer interviews and create
                tasks for them in your issue tracker and post an update to Slack
                with the notes from the meeting.
              </p>
              <p>
                Some of the ways people currently use Circleback include: remote
                teams gathering context from meetings they didn't attend; sales
                teams automatically updating their CRM and keeping track of what
                they last talked about with a client; and executive assistants
                sharing meeting minutes with the rest of the team.
              </p>
              <p>
                For engineers, past meetings turn into a knowledge base, so you
                can search for anything that came up in a meeting before—e.g.
                some obscure quirk about a sequence of API calls, or how you
                figured out some bug 6 months ago. If you had a meeting about
                how to run a service, you can use search to find that meeting
                and watch the exact moment it was shown. Also, some engineers
                appreciate having issues be automatically created for tasks that
                come up during standups. That may not be how everyone likes to
                work, but it beats doing it manually.
              </p>
              <p>
                With regards to privacy/security, we use industry-leading
                practices for handling customer data (i.e. secured at-rest and
                in-transit) and we're in the process of getting our SOC 2 type
                II certification.
                <a href="https://security.circleback.ai"
                  >https://security.circleback.ai</a
                >
                has more on how data is handled. We also immediately and
                irreversibly delete all associated data when a meeting or
                account is deleted and by default don't store any recordings of
                meetings.
              </p>
              <p>
                Signup requires an email and name. Normally we require credit
                card information but we’re disabling that for HN to make it
                easier to try out the product. After signing up, you can: 1)
                connect your calendar to have Circleback join your meetings, 2)
                add Circleback by pasting in a meeting link, 3) record an
                in-person meeting from your phone or laptop, or 4) import the
                audio/video of a meeting you’ve previously recorded (this is
                what I did with the GitLab meeting).
              </p>
              <p>
                The best way to see how Circleback works is to try it out in one
                of your own meetings. We have a free trial and it takes about 2
                minutes to get started. We’d love to get your feedback and look
                forward to your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="39618433">
          <h3>
            <a
              class="item"
              href="https://www.npr.org/2024/03/05/1235891530/sat-online-digital-test-college"
              >U.S. students will take the SAT online</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 17:33:45</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39618433"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39618152">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/03/06/oracle_audits/"
              >'We had to educate Oracle about our contract,' CIO says after Big
              Red audit</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 17:11:24</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39618152"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39618027">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/fathom/jobs/TArBVR8-platform-engineer-remote"
              >Fathom AI Notetaker (YC W21) Is Hiring a Platform Engineer
              (Remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 17:01:09</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39617953">
          <h3>
            <a
              class="item"
              href="https://tailwindcss.com/blog/tailwindcss-v4-alpha"
              >Open-sourcing our progress on Tailwind CSS v4.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 16:56:29</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39617953"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39617809">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2024/03/06/worldcoin-spain-ban/"
              >Worldcoin hit with temporary ban in Spain over privacy
              concerns</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 16:45:43</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39617809"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39617745">
          <h3>
            <a
              class="item"
              href="https://www.elmundo.es/economia/empresas/2024/03/06/65e86b14e9cf4a11128b456f.html"
              >Worldcoin is now banned in Spain</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 16:40:51</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39617745"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39617325">
          <h3>
            <a
              class="item"
              href="https://reasonstobecheerful.world/green-corridors-medellin-colombia-urban-heat/"
              >Medellín's Green Corridors</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 16:01:59</span
              ><span class="points-container"
                >Points: <span class="points">146</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39617325"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39617130">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/history/world-war-ii-rumor-clinics-helped-america-battle-wild-gossip-180983883/"
              >World War II 'rumor clinics' helped America battle wild gossip</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 15:44:19</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39617130"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39616155">
          <h3>
            <a class="item" href="https://www.zompist.com/chance.htm"
              >How likely are chance resemblances between languages? (2002)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 14:15:25</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39616155"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39616111">
          <h3>
            <a
              class="item"
              href="https://www.ffam.org/2022/09/17/early-american-fire-alarm-systems/"
              >Early American Fire Alarm Systems (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 14:10:51</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39616111"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39615198">
          <h3>
            <a
              class="item"
              href="https://developer.chrome.com/blog/shared-dictionary-compression"
              >Compression efficiency with shared dictionaries in Chrome</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 12:29:37</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39615198"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39614433">
          <h3>
            <a class="item" href="https://dada-lang.org/"
              >Dada, an experimental new programming language</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 10:31:02</span
              ><span class="points-container"
                >Points: <span class="points">356</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39614433"
                  >Comments</a
                ><span class="descendants">: 317</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39613669">
          <h3>
            <a class="item" href="https://github.com/tembo-io/pg_vectorize"
              >Pg_vectorize: Vector search and RAG on Postgres</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 08:34:16</span
              ><span class="points-container"
                >Points: <span class="points">245</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39613669"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39613198">
          <h3>
            <a
              class="item"
              href="https://securelist.com/network-tunneling-with-qemu/111803/"
              >Network Tunneling with QEMU</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 07:15:29</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39613198"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39613021">
          <h3>
            <a class="item" href="https://github.com/soorajshankar/logScreen"
              >Show HN: Piping logs, visualizing in a web app – just suffix "|
              npx logscreen"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 06:42:45</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39613021"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39612950">
          <h3>
            <a class="item" href="https://yacy.net/"
              >YaCy, a distributed Web Search Engine, based on a peer-to-peer
              network</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 06:33:04</span
              ><span class="points-container"
                >Points: <span class="points">228</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39612950"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39612775">
          <h3>
            <a class="item" href="https://github.com/jchester/spc-kit"
              >Spc-kit: A toolkit for statistical process control using SQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 05:57:47</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39612775"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39612640">
          <h3>
            <a class="item" href="https://iss-mimic.github.io/Mimic/"
              >Realtime telemetry from ISS internal components</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 05:28:50</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39612640"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39612484">
          <h3>
            <a
              class="item"
              href="https://www.canva.dev/blog/engineering/fonts-are-still-a-helvetica-of-a-problem/"
              >Fonts are still a Helvetica of a Problem</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 04:57:44</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39612484"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39612443">
          <h3>
            <a
              class="item"
              href="https://corecursive.com/leaving-linkedin-with-chris-krycho/"
              >Leaving LinkedIn</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-06 @ 04:49:38</span
              ><span class="points-container"
                >Points: <span class="points">393</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39612443"
                  >Comments</a
                ><span class="descendants">: 261</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39602807">
          <h3>
            <a
              class="item"
              href="https://www.jonashietala.se/series/voron_trident/"
              >Let's build a VORON Trident (a DIY 3D printer)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-05 @ 13:06:23</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39602807"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39602093">
          <h3>
            <a
              class="item"
              href="https://www.amazon.science/publications/forecasting-with-trees"
              >Forecasting with Trees (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-05 @ 11:37:34</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39602093"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39601814">
          <h3>
            <a
              class="item"
              href="https://www.wh0rd.org/books/linkers-and-loaders/linkers_and_loaders.pdf"
              >Linkers and Loaders (1999) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-05 @ 10:58:03</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39601814"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39589488">
          <h3>
            <a
              class="item"
              href="https://pages.cpsc.ucalgary.ca/~robin/class/449/Evolution.htm"
              >The Evolution of a Haskell Programmer (2001)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-04 @ 12:12:01</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39589488"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39589282">
          <h3>
            <a class="item" href="https://biosrhythm.com/?p=2767"
              >A Global AppleTalk Network: Pushing AppleTalk Across the
              Internet</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-04 @ 11:42:51</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39589282"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
