<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43479094">
          <h3>
            <a
              class="item"
              href="https://elixir-lang.org/blog/2025/03/25/cyanview-elixir-case/"
              >Coordinating the Superbowl's visual fidelity with Elixir</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-26 @ 05:19:22</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43479094"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43476793">
          <h3>
            <a
              class="item"
              href="https://tratt.net/laurie/blog/2025/better_shell_history_search.html"
              >Better Shell History Search</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 22:35:17</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43476793"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43476365">
          <h3>
            <a
              class="item"
              href="https://www.honest-broker.com/p/whats-happening-to-students"
              >What's Happening to Students?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 21:47:20</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43476365"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43476337">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/ai/2025/03/devs-say-ai-crawlers-dominate-traffic-forcing-blocks-on-entire-countries/"
              >Devs say AI crawlers dominate traffic, forcing blocks on entire
              countries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 21:42:37</span
              ><span class="points-container"
                >Points: <span class="points">244</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43476337"
                  >Comments</a
                ><span class="descendants">: 167</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43476249">
          <h3>
            <a
              class="item"
              href="https://www.solipsys.co.uk/new/SellYourselfSellYourWork.html?yc25hn"
              >Sell yourself, sell your work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 21:35:16</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43476249"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43476134">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2503.13751"
              >Optimizing ML training with metagradient descent</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 21:22:35</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43476134"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43474593">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/03/25/us/maverick-county-texas-court-system.html"
              >In Jail Without a Lawyer: How a Texas Town Fails Poor
              Defendants</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 18:59:22</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43474593"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43474505">
          <h3>
            <a
              class="item"
              href="https://refactoringenglish.com/tools/hn-popularity/"
              >The highest-ranking personal blogs of Hacker News</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 18:48:57</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43474505"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43474112">
          <h3>
            <a
              class="item"
              href="https://openai.com/index/introducing-4o-image-generation/"
              >4o Image Generation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 18:06:02</span
              ><span class="points-container"
                >Points: <span class="points">689</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43474112"
                  >Comments</a
                ><span class="descendants">: 391</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43473623">
          <h3>
            <a
              class="item"
              href="https://alexwlchan.net/2025/github-actions-audit/"
              >Whose code am I running in GitHub Actions?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 17:17:05</span
              ><span class="points-container"
                >Points: <span class="points">150</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43473623"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43473618">
          <h3>
            <a
              class="item"
              href="https://supernuclear.substack.com/p/stoop-coffee-how-a-simple-idea-transformed"
              >Stoop Coffee: A simple idea transformed my neighborhood</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 17:16:45</span
              ><span class="points-container"
                >Points: <span class="points">1052</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43473618"
                  >Comments</a
                ><span class="descendants">: 346</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43473489">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/google-deepmind/gemini-model-thinking-updates-march-2025/"
              >Gemini 2.5</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 17:01:54</span
              ><span class="points-container"
                >Points: <span class="points">752</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43473489"
                  >Comments</a
                ><span class="descendants">: 359</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43473358">
          <h3>
            <a class="item" href="https://abcdinamo.com/news/german-bold-italic"
              >Kylie Minogue song about a typeface</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 16:51:09</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43473358"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43472143">
          <h3>
            <a class="item" href="https://danilafe.com/blog/chapel_x_macros/"
              >My Favorite C++ Pattern: X Macros (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 14:57:59</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43472143"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43471177">
          <h3>
            <a
              class="item"
              href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/RunMoreExtraNetworkFiber"
              >If you get the chance, always run more extra network fiber
              cabling</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 13:40:59</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43471177"
                  >Comments</a
                ><span class="descendants">: 160</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43470906">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/open-sourcing-openpubkey-ssh-opkssh-integrating-single-sign-on-with-ssh/"
              >Open-sourcing OpenPubkey SSH (OPKSSH): integrating single sign-on
              with SSH</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 13:22:09</span
              ><span class="points-container"
                >Points: <span class="points">208</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43470906"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43470651">
          <h3>
            <a class="item" href="https://github.com/facebookresearch/vggt"
              >VGGT: Visual Geometry Grounded Transformer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 12:59:26</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43470651"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43468498">
          <h3>
            <a
              class="item"
              href="https://www.theparisreview.org/blog/2025/03/17/is-robert-frost-even-a-good-poet/"
              >Is Robert Frost Even a Good Poet?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 06:11:46</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43468498"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43465740">
          <h3>
            <a class="item" href="https://dedede.de/en"
              >Show HN: A website for sharing the "Good, Bad, and Why"s of urban
              spaces</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 21:48:07</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43465740"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <a href="https://dedede.de/en">https://dedede.de/en</a>) that
              invites people to share the various positives, negatives,
              oddities, etc. they find in urban spaces.
              <p>
                The project grew out of an earlier effort where we'd built an
                app that assisted participatory urbanism workshops run by local
                nonprofits. With the new platform, we're trying to build
                something similar but more casual and hopefully with broader
                appeal, that'll be fun to use even outside of formal workshop
                situations.
              </p>
              <p>We'd love to hear your thoughts!</p>
            </div>
          </section>
        </section>
        <section id="43462783">
          <h3>
            <a
              class="item"
              href="https://www.theatlantic.com/politics/archive/2025/03/trump-administration-accidentally-texted-me-its-war-plans/682151/"
              >U.S. national-security leaders included me in a group chat</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 16:23:55</span
              ><span class="points-container"
                >Points: <span class="points">1948</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43462783"
                  >Comments</a
                ><span class="descendants">: 907</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43452491">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43452491"
              >Recommendation for non-DOS/Unix open source OS outside x86/X64</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 12:37:11</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43452491"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
            <div class="text">
              <p>Are there similar things say for ARM/RISC/etc ?</p>
            </div>
          </section>
        </section>
        <section id="43452486">
          <h3>
            <a class="item" href="https://www.intelrealsense.com"
              >Intel RealSense Stereo Depth Cameras</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 12:36:31</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43452486"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43451579">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2025/Mar/22/ollama-models-atom-feed/"
              >Ollama Models Atom Feed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 08:32:40</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43451579"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43451435">
          <h3>
            <a
              class="item"
              href="https://lilianweng.github.io/posts/2018-02-19-rl-overview/"
              >A (Long) Peek into Reinforcement Learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 07:40:29</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43451435"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43451285">
          <h3>
            <a
              class="item"
              href="https://iliabylich.github.io/ruby-ractors-and-lock-free-data-structures/"
              >Ruby, Ractors, and lock-free data structures</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 06:55:11</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43451285"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43450745">
          <h3>
            <a
              class="item"
              href="https://www.commentary.org/articles/joseph-epstein/rest-work-purpose/"
              >Rest Easy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-23 @ 03:42:23</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43450745"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43449608">
          <h3>
            <a
              class="item"
              href="https://www.engadget.com/ai/amc-theatres-will-screen-a-swedish-movie-visually-dubbed-with-the-help-of-ai-130022232.html"
              >AMC Theatres will screen a Swedish movie 'visually dubbed' with
              the help of AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-22 @ 23:37:43</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43449608"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43444999">
          <h3>
            <a class="item" href="https://github.com/sveltejs/svelte/pull/15570"
              >Svelte: $derived can now be overwritten</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-22 @ 11:17:30</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43444999"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43440321">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-03-scientists-plastic-simple-inexpensive-catalyst.html"
              >Scientists break down plastic using a simple, inexpensive
              catalyst and air</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-21 @ 20:12:49</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43440321"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43439501">
          <h3>
            <a
              class="item"
              href="https://research.google/blog/deciphering-language-processing-in-the-human-brain-through-llm-representations/"
              >Deciphering language processing in the human brain through LLM
              representations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-21 @ 18:44:37</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43439501"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
