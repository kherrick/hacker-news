<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45085156">
          <h3>
            <a
              class="item"
              href="https://jghuff.com/articles/ultrassembler-so-fast/"
              >How is Ultrassembler so fast?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 17:42:43</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45085156"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45085002">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/08/26/realestate/switzerland-rental-coops-nonprofit-lausanne.html"
              >A 'Third Way' Between Buying or Renting? Swiss Co-Ops Say They've
              Found It</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 17:26:03</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45085002"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45084913">
          <h3>
            <a
              class="item"
              href="https://oikofuge.com/sun-sets-on-british-empire/"
              >The Sun Sets on the British Empire</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 17:15:19</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45084913"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45084759">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45084759"
              >Launch HN: VibeFlow (YC S25) – Web app generator with visual,
              editable workflows</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 17:00:19</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45084759"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <a href="https://vibeflow.ai">https://vibeflow.ai</a>). VibeFlow
              lets semi-technical people (i.e. people with some technical skill
              but who are not professional programmers) build full-stack web
              apps from natural language prompts, while making the underlying
              business logic clear and editable as a visual workflow. Demo
              video:
              <a href="https://www.youtube.com/watch?v=-CwWd3-b1JI"
                >https://www.youtube.com/watch?v=-CwWd3-b1JI</a
              >.
              <p>
                The problem we’re trying to solve: today, people who want to
                build apps without coding often have to stitch together multiple
                tools, e.g. using Lovable for the frontend, n8n for workflows,
                and Supabase for the database. That creates data silos and
                leaves builders with fragile apps that break in production,
                don’t scale, and aren’t safe. We saw YouTube tutorials teaching
                people how to duct-tape these together just to get a functional
                app running. As engineers building no-code tools, we realized
                that people wanted the power of AI-generated UIs but also the
                ability to see and control their backend workflows and data.
              </p>
              <p>
                Our solution is to generate the whole app at once, and represent
                it as a visual workflow. Users describe what they want in
                English (“I need a chat widget with an AI agent”) and VibeFlow
                generates both the interface and the logic. That logic shows up
                as a workflow graph they can edit visually or by giving new
                instructions.
              </p>
              <p>
                We use Convex (<a href="https://www.convex.dev/"
                  >https://www.convex.dev/</a
                >) as backend. The generation of the backend code is fully
                deterministic, we map workflow graphs to code templates. This
                makes deployments predictable and avoids the hallucinated,
                black-box code you often get from AI.
              </p>
              <p>
                Workflow representation: the logic is a directed graph where
                each node can be customized. We currently support CRUD
                operations and agent components. Any changes to the graph
                compiles directly back into code, so you always own the
                underlying logic.
              </p>
              <p>
                Frontend: generated via AI and directly linked to workflow
                outputs, so it always stays in sync with the business logic.
                Changes to the frontend can be made through a chat interface.
              </p>
              <p>
                Semi-technical builders can create maintainable apps (not opaque
                “magic”), and technical folks can still inspect the code and
                architecture. Compared to Bubble/Webflow, the interface is
                simpler; compared to Zapier, the workflows have an output code;
                and compared to AI coding assistants, you get an automatic
                backend plugged in with no black-box.
              </p>
              <p>
                You can try it here:
                <a href="https://app.vibeflow.ai/">https://app.vibeflow.ai/</a>.
                The demo video is
                <a href="https://youtu.be/-CwWd3-b1JI"
                  >https://youtu.be/-CwWd3-b1JI</a
                >
                We'd love to hear from the HN community, whether you're a
                builder who's struggled with stitching tools together, a
                developer who's seen the pain points in no-code platforms, or
                someone curious about where AI-powered app generation is heading
                - we're eager for your thoughts!
              </p>
            </div>
          </section>
        </section>
        <section id="45084757">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/infisical/jobs/yaEvock-solutions-engineer"
              >Infisical (YC W23) Is Hiring Solutions Engineers to Scale the OSS
              Security Stack</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 17:00:06</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45084673">
          <h3>
            <a class="item" href="https://idonthavespotify.sjdonado.com/"
              >I Don't Have Spotify</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 16:50:45</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45084673"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45084370">
          <h3>
            <a
              class="item"
              href="https://padailypost.com/2025/08/29/family-of-microsoft-employee-who-died-warn-tech-companies-not-to-overwork-workers/"
              >Family of MSFT employee who died warn tech companies not to
              overwork workers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 16:22:38</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45084370"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45084328">
          <h3>
            <a class="item" href="https://journal.hexmos.com/ebpf-introduction/"
              >eBPF 101: Your First Step into Kernel Programming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 16:17:07</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45084328"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45084016">
          <h3>
            <a class="item" href="https://bradt.ca/blog/no-clicks-no-content/"
              >No clicks, no content: The unsustainable future of AI search</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 15:37:24</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45084016"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45083952">
          <h3>
            <a class="item" href="https://jj-for-everyone.github.io/"
              >Jujutsu for Everyone</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 15:31:04</span
              ><span class="points-container"
                >Points: <span class="points">150</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45083952"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45083845">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/us-news/2025/aug/31/fda-official-youtube-videos"
              >FDA official demands removal of YouTube videos of himself
              criticizing vaccines</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 15:19:54</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45083845"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45083635">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/08/28/older_developers_ai_code/"
              >Older developers are down with the vibe coding vibe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 14:55:56</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45083635"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45083495">
          <h3>
            <a class="item" href="https://avi.im/blag/2025/db-cache/"
              >Replacing a Cache Service with a Database</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 14:41:15</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45083495"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45083134">
          <h3>
            <a
              class="item"
              href="https://borretti.me/article/notes-on-managing-adhd"
              >Notes on Managing ADHD</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 13:49:01</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45083134"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45082750">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=QBEKlIV_70E"
              >Google: 'Your $1000 phone needs our permission to install apps
              now' [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 12:44:26</span
              ><span class="points-container"
                >Points: <span class="points">381</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45082750"
                  >Comments</a
                ><span class="descendants">: 338</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45082731">
          <h3>
            <a
              class="item"
              href="https://history.stackexchange.com/questions/79371/this-telegram-must-be-closely-paraphrased-before-being-communicated-to-anyone"
              >"This telegram must be closely paraphrased before being
              communicated" Why?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 12:39:47</span
              ><span class="points-container"
                >Points: <span class="points">331</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45082731"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45082595">
          <h3>
            <a
              class="item"
              href="https://gitlab.com/fdroid/fdroid-website/-/issues/883"
              >F-Droid site certificate expired</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 12:16:00</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45082595"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45082587">
          <h3>
            <a class="item" href="https://algassert.com/post/2500"
              >Why haven't quantum computers factored 21 yet?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 12:14:26</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45082587"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45080808">
          <h3>
            <a
              class="item"
              href="https://kristun.dev/posts/my-foray-into-vlang/"
              >My Foray into Vlang</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 06:17:26</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45080808"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45080388">
          <h3>
            <a class="item" href="https://sheafification.com/the-fast-track/"
              >Sheafification – The optimal path to mathematical mastery: The
              fast track (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 04:31:29</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45080388"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45080051">
          <h3>
            <a class="item" href="https://github.com/red/red"
              >Red: A programming language inspired by REBOL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 03:14:05</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45080051"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45079962">
          <h3>
            <a
              class="item"
              href="https://www.davepagurek.com/blog/minimal-phone/"
              >My phone is an ereader now</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-31 @ 02:58:32</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45079962"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45074248">
          <h3>
            <a class="item" href="https://github.com/zakirullin/cognitive-load"
              >Cognitive load is what matters</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-30 @ 12:58:48</span
              ><span class="points-container"
                >Points: <span class="points">1367</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45074248"
                  >Comments</a
                ><span class="descendants">: 483</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45053764">
          <h3>
            <a
              class="item"
              href="https://levelup.gitconnected.com/vibe-coding-as-a-coding-veteran-cd370fe2be50"
              >Vibe coding as a coding veteran: from 8-bit assembly to
              English-as-code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-28 @ 15:55:15</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45053764"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45053704">
          <h3>
            <a
              class="item"
              href="https://debramaymacleod.com/blog/the-last-vestal-virgin-and-the-fall-of-rome"
              >The Last Vestal Virgin and the Fall of Rome</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-28 @ 15:50:09</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45053704"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45044442">
          <h3>
            <a class="item" href="https://github.com/seanwevans/fluid-sims"
              >Show HN: An ncurses CUDA-based fluid simulation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 20:03:20</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45044442"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">I just think they're neat</div>
          </section>
        </section>
        <section id="45043126">
          <h3>
            <a
              class="item"
              href="https://trackerninja.codeberg.page/post/how-to-run-latest-vegas-pro-22-in-windows-7-no-matter-what/"
              >How to run latest Vegas Pro 22 in Windows 7 x64</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 18:21:39</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45043126"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45042985">
          <h3>
            <a class="item" href="http://ai.stanford.edu/blog/db-ksvd/"
              >A 20-Year-Old Algorithm Can Help Us Understand Transformer
              Embeddings</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 18:08:43</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45042985"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45039525">
          <h3>
            <a class="item" href="https://cdm.link/bitwig-studio-6-details/"
              >Bitwig Studio 6 details revealed, and editing gets a big boost</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 13:39:44</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45039525"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45038567">
          <h3>
            <a
              class="item"
              href="https://dev.37signals.com/running-our-docker-registry-on-prem-with-harbor/"
              >Running our Docker registry on-prem with Harbor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-27 @ 12:10:31</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45038567"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
