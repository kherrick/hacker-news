<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44573799">
          <h3>
            <a class="item" href="https://github.com/videosdk-live/agents"
              >Open-source framework for real-time AI voice</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 17:40:18</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44573799"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44573574">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/technology/mira-muratis-ai-startup-thinking-machines-raises-2-billion-a16z-led-round-2025-07-15/"
              >Mira Murati's AI startup Thinking Machines raises $2B in A16Z-led
              round</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 17:19:57</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44573574"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44573409">
          <h3>
            <a
              class="item"
              href="https://the-nerve-blog.ghost.io/to-be-a-better-programmer-write-little-proofs-in-your-head/"
              >To be a better programmer, write little proofs in your head</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 17:05:39</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44573409"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44573326">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/07/15/oracle_java_users_audited/"
              >Nearly 3 out of 4 Oracle Java users say they've been audited in
              the past 3 years</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 17:00:23</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44573326"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44573320">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44573320"
              >CoinTracker (YC W18) is hiring to solve crypto taxes and
              accounting (remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 17:00:04</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We solve challenging technical problems: tracking crypto assets
                across wallets and exchanges, classifying complex transactions
                like DeFi and NFTs, global stablecoin payments, and helping
                users stay compliant in an evolving global regulatory landscape.
              </p>
              <p>
                We currently track $100B+ in crypto assets across 3M users. Our
                customers range from everyday dabblers in crypto to large
                enterprises.
              </p>
              <p>
                We’re a remote-first, globally distributed team of 80 people,
                backed by Accel, YC, and others. Our team has experience from
                Google, Airbnb, Stripe, Coinbase, Intuit, and other top
                companies.
              </p>
              <p>We’re hiring across multiple roles, including:</p>
              <p>
                - Software Engineers (Backend, Full Stack, Infra) - Product
                Designers - Product Managers - Crypto Accounting CPAs -
                Marketers - Customer Experience
              </p>
              <p>
                We care about building a mission-driven company that enables
                everyone in the world to use crypto with peace of mind. A key
                part of that mission is solving crypto taxes and accounting as
                more financial activity moves onchain.
              </p>
              <p>
                If you’re interested in helping solve messy crypto data problems
                and improving financial infrastructure, please learn more and
                apply here:
                <a href="https://www.cointracker.com/careers"
                  >https://www.cointracker.com/careers</a
                >
              </p>
              <p>
                CoinTracker builds the rails for crypto taxes and onchain
                accounting.
              </p>
              <p>
                What we do • Aggregate transactions from 500+ wallets &amp;
                exchanges and reconcile them to GAAP/IFRS rules • Classify hard
                edge‑cases (DeFi, NFTs, stablecoin payments) • Generate
                IRS-ready (and international) tax forms with $100B+ tracked in
                crypto
              </p>
              <p>
                Why it's interesting - Streaming terabytes of blockchain data →
                millisecond portfolio views - Global tax rules engine written as
                pure functions: testable &amp; versioned - 80-person remote team
                shipping daily
              </p>
              <p>
                Stack &amp; culture - TypeScript / Node, Python, React, Postgres
                - Remote‑first across 15 countries - Async‑heavy with quarterly
                in‑person meet‑ups
              </p>
              <p>
                Open roles (all remote) - Software Engineer – backend / infra /
                full‑stack - Product Designer - Product Marketing - Product
                Manager - Crypto Accounting CPA / Tax Analyst - Customer
                Experience
              </p>
              <p>
                Comp &amp; benefits - Competitive salary (see details in link
                below) - Meaningful equity - Strong health care - 401(k)
                matching - Learning budget - Home-office budget - Company-wide
                retreats
              </p>
              <p>
                If untangling messy crypto data and upgrading the world’s
                financial back‑office sounds fun, say hello:
                www.cointracker.com/careers
              </p>
            </div>
          </section>
        </section>
        <section id="44573317">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=MbEZ-DC0L-g"
              >Why the Real Computer Revolution Never Happened – Alan Kay and
              Anjan Katta [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 16:59:54</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44573317"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44573195">
          <h3>
            <a class="item" href="https://calv.info/openai-reflections"
              >Reflections on OpenAI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 16:49:06</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44573195"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44572499">
          <h3>
            <a
              class="item"
              href="https://www.nist.gov/news-events/news/2025/07/nist-ion-clock-sets-new-record-most-accurate-clock-world"
              >NIST Ion Clock Sets New Record for Most Accurate Clock in the
              World</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 15:56:47</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44572499"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44572377">
          <h3>
            <a
              class="item"
              href="https://www.matthieulc.com/posts/shoggoth-mini"
              >Show HN: Shoggoth Mini – A soft tentacle robot powered by GPT-4o
              and RL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 15:46:41</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44572377"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44572273">
          <h3>
            <a
              class="item"
              href="https://systemf.epfl.ch/blog/rust-regex-lookbehinds/"
              >Adding lookbehinds to rust-lang/regex</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 15:37:15</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44572273"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44571917">
          <h3>
            <a
              class="item"
              href="https://www.blender.org/download/releases/4-5/"
              >Blender 4.5 LTS Released</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 15:06:44</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44571917"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44571740">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44571740"
              >Ask HN: Is it time to fork HN into AI/LLM and "Everything
              else/other?"</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 14:51:17</span
              ><span class="points-container"
                >Points: <span class="points">247</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44571740"
                  >Comments</a
                ><span class="descendants">: 188</span></span
              >
            </h4>
            <div class="text">
              <p>
                The increasing AI/LLM domination of the site has made it much
                less appealing to me.
              </p>
            </div>
          </section>
        </section>
        <section id="44571563">
          <h3>
            <a
              class="item"
              href="https://torrentfreak.com/cloudflare-starts-blocking-pirate-sites-for-uk-users-thats-a-pretty-big-deal-250715/"
              >Cloudflare Starts Blocking Pirate Sites for UK Users</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 14:33:55</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44571563"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44570048">
          <h3>
            <a class="item" href="https://github.com/trymirai/uzu"
              >Show HN: We made our own inference engine for Apple Silicon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 11:29:02</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44570048"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
            <div class="text">
              We wrote our inference engine on Rust, it is faster than llama cpp
              in all of the use cases. Your feedback is very welcomed. Written
              from scratch with idea that you can add support of any kernel and
              platform.
            </div>
          </section>
        </section>
        <section id="44567888">
          <h3>
            <a
              class="item"
              href="https://clickhouse.com/blog/sigterm-postgres-mystery"
              >When Sigterm Does Nothing: A Postgres Mystery</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 04:43:08</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44567888"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44567857">
          <h3>
            <a
              class="item"
              href="https://tomrenner.com/posts/llm-inevitabilism/"
              >LLM Inevitabilism</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 04:35:35</span
              ><span class="points-container"
                >Points: <span class="points">1304</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44567857"
                  >Comments</a
                ><span class="descendants">: 1194</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44567683">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/culture/critics-notebook/the-new-literalism-plaguing-todays-biggest-movies"
              >Literalism plaguing today’s movies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 03:52:38</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44567683"
                  >Comments</a
                ><span class="descendants">: 284</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44565668">
          <h3>
            <a class="item" href="https://github.com/ml-explore/mlx/pull/1983"
              >Apple's MLX adding CUDA support</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-14 @ 21:40:30</span
              ><span class="points-container"
                >Points: <span class="points">497</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44565668"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44564656">
          <h3>
            <a
              class="item"
              href="https://www.caltech.edu/about/news/ligo-detects-most-massive-black-hole-merger-to-date"
              >LIGO detects most massive black hole merger to date</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-14 @ 20:06:51</span
              ><span class="points-container"
                >Points: <span class="points">334</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44564656"
                  >Comments</a
                ><span class="descendants">: 174</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44563324">
          <h3>
            <a class="item" href="https://cognition.ai/blog/windsurf"
              >Cognition (Devin AI) to Acquire Windsurf</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-14 @ 18:07:15</span
              ><span class="points-container"
                >Points: <span class="points">475</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44563324"
                  >Comments</a
                ><span class="descendants">: 391</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44561328">
          <h3>
            <a
              class="item"
              href="https://assemblingamerica.substack.com/p/there-is-no-meritocracy-without-lottocracy"
              >Random selection is necessary to create stable meritocratic
              institutions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-14 @ 15:28:36</span
              ><span class="points-container"
                >Points: <span class="points">325</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44561328"
                  >Comments</a
                ><span class="descendants">: 271</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44560662">
          <h3>
            <a class="item" href="https://kiro.dev/blog/introducing-kiro/"
              >Kiro: A new agentic IDE</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-14 @ 14:24:40</span
              ><span class="points-container"
                >Points: <span class="points">966</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44560662"
                  >Comments</a
                ><span class="descendants">: 406</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44551203">
          <h3>
            <a
              class="item"
              href="https://www.uninformativ.de/blog/postings/2025-07-13/0/POSTING-en.html"
              >A quick look at unprivileged sandboxing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-13 @ 15:41:30</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44551203"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44549549">
          <h3>
            <a class="item" href="https://menerdu.vercel.app/"
              >Show HN: I built this to talk Danish to my girlfriend – works
              with any language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-13 @ 11:38:18</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44549549"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
            <div class="text">
              <p>
                Especially in those cases, I used to give up and translate the
                entire message from English, which kind of defeats the purpose
                and interrupts the learning process.
              </p>
              <p>
                So I started prompting GPT. I’d write my message with wildcards
                or notes for the parts I didn’t know, and it would return a
                corrected version. That worked well, but reusing the prompt each
                time became tedious.
              </p>
              <p>So I built a wrapper around it.</p>
              <p>
                Now I can type in the target language, mark unclear parts with
                curly braces {like this}, and get an instant corrected version
                with explanations. I also added a history feature so I can
                review what I got wrong, and I plan to build more on that soon
                (eg. summary of areas or words to review).
              </p>
              <p>
                This app is for language learners who want to practice writing
                without feeling insecure about mistakes or breaking their flow
                by switching to a translator.
              </p>
              <p>I hope you find it useful!</p>
            </div>
          </section>
        </section>
        <section id="44549517">
          <h3>
            <a
              class="item"
              href="https://auri-microadventure.azurewebsites.net/"
              >Micro Adventure – Space Attack (online emulator)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-13 @ 11:32:51</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44549517"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44546321">
          <h3>
            <a
              class="item"
              href="https://www.nict.go.jp/en/press/2025/05/29-1.html"
              >Petabit-class transmission over &amp;gt; 1000 km using standard
              19-core optical fiber</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-13 @ 00:06:20</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44546321"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44543388">
          <h3>
            <a
              class="item"
              href="https://whatisthequestion.wordpress.com/2025/07/12/english-translators-of-homer-by-simeon-underwood/"
              >"English Translators of Homer": A Review</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-12 @ 17:09:08</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44543388"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44534807">
          <h3>
            <a
              class="item"
              href="https://blog.engora.com/2025/06/english-football-data.html"
              >Win, lose, or draw: trends in English football match results</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 17:23:55</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44534807"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44533759">
          <h3>
            <a
              class="item"
              href="https://rubenerd.com/vcds-and-laserdiscs-in-southeast-asia/"
              >VHS, VCDs, and Laserdiscs in Southeast Asia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 16:02:13</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44533759"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44530518">
          <h3>
            <a class="item" href="https://github.com/slaily/aiosqlitepool"
              >SQLite async connection pool for high-performance</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 10:26:32</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44530518"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
