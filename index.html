<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39513493">
          <h3>
            <a
              class="item"
              href="https://thefatefulforce.com/firearms-vs-armour-in-the-late-middle-ages-and-renaissance/"
              >Firearms vs. Armour in the Late Middle Ages and Renaissance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:46:05</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39513493"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39513126">
          <h3>
            <a
              class="item"
              href="https://about.jstor.org/news/jstor-available-in-1000-prisons/"
              >Jstor is Now Available in 1k Prisons</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:22:31</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39513126"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39513092">
          <h3>
            <a
              class="item"
              href="https://www.cbc.ca/news/politics/online-harms-legislation-new-regulator-1.7125289"
              >Ottawa to create regulator to hold platforms accountable for
              harmful content</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:20:18</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39513092"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39513059">
          <h3>
            <a
              class="item"
              href="https://www.levernews.com/ending-the-ivy-leagues-tax-dodge/"
              >Ending the Ivy League's Tax Dodge</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:18:25</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39513059"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39513054">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39513054"
              >Launch HN: Delve (YC W24) – HIPAA compliance as a service</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:17:54</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39513054"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <a href="https://getdelve.com">https://getdelve.com</a>). We help
              companies get HIPAA compliant fast, with 1-click infrastructure,
              streamlined legal policies, and real-time monitoring. Here’s a
              quick demo:
              <a href="https://youtu.be/mQbb5mprsUA"
                >https://youtu.be/mQbb5mprsUA</a
              >.
              <p>
                HIPAA is a US federal law passed back in 1996 that sets
                standards for protecting sensitive health information. Here’s an
                article that breaks it down pretty simply:
                <a href="https://www.getdelve.com/blog/quick-guide-to-hipaa"
                  >https://www.getdelve.com/blog/quick-guide-to-hipaa</a
                >.
              </p>
              <p>
                Most companies that process health information in the US need to
                become HIPAA compliant, a process that can be long and
                expensive. At our previous health tech company, we spent 6 weeks
                (and tens of thousands of dollars) on getting compliant. We had
                to complete a lot of manual work, even after purchasing an
                industry-standard compliance solution, and felt like we were
                hitting checkboxes with little confidence in our security. We
                realized that many parts of the compliance process could be
                streamlined and simplified, which led us to building Delve.
              </p>
              <p>
                To get HIPAA compliant, you need (1) secure infrastructure, (2)
                legal policies, and (3) logging/monitoring. At Delve, we help
                startups with all three. We provide 1-click HIPAA compliant
                infrastructure deployed in your cloud and a CI/CD pipeline to
                update infrastructure from git push (think Heroku but HIPAA
                compliant). Then, we provide legal policies, paperwork, and a
                complete task list customized to your infrastructure setup.
                Finally, we have a real-time monitoring dashboard to help
                oversee compliance, track system activity, and review logs.
              </p>
              <p>
                One thing we noticed the first time we ever got HIPAA compliant
                was that we had to use many tools along the way. We bought an
                industry-standard HIPAA compliance solution, hired a HIPAA
                DevOps contractor to help configure secure infrastructure, and
                worked with lawyers to adapt the boilerplate legal policies that
                our compliance solution had provided. When building Delve, we
                worked hard to give you everything you need in one place,
                reducing the hassle and cost.
              </p>
              <p>
                We currently charge on an annual flat-fee basis. However, we’re
                still exploring our pricing model (flat-fee vs. usage-based vs.
                combination of both), and if you have any thoughts to share on
                that, we’d love to hear them.
              </p>
              <p>
                We’re really excited about making it easier to build in
                healthcare and removing compliance bottlenecks. Thrilled to
                share this with you and hear your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="39513051">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2024/03/04/what-a-major-solar-storm-could-do-to-our-planet"
              >What a Major Solar Storm Could Do to Our Planet</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:17:36</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39513051"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39512896">
          <h3>
            <a
              class="item"
              href="https://tracebit.com/blog/2024/02/finding-aws-account-id-of-any-s3-bucket/"
              >It's now possible to find the AWS Account ID for any S3 Bucket
              (private too)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 16:07:43</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39512896"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39512684">
          <h3>
            <a
              class="item"
              href="https://stratechery.com/2024/gemini-and-googles-culture/"
              >Gemini and Google's Culture</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 15:54:13</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39512684"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39512332">
          <h3>
            <a
              class="item"
              href="https://airminded.org/2024/02/20/a-bad-day-at-the-office/"
              >A bad day at the office</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 15:26:20</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39512332"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39512230">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/space/2024/02/final-images-of-ingenuity-reveal-an-entire-blade-broke-off-the-helicopter/"
              >Final images of Ingenuity reveal an entire blade broke off the
              helicopter</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 15:19:42</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39512230"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39512140">
          <h3>
            <a
              class="item"
              href="https://masoncurrey.substack.com/p/david-milch-disembodied-writing-process"
              >David Milch’s disembodied writing process</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 15:12:37</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39512140"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39511714">
          <h3>
            <a class="item" href="https://aboutideasnow.com/"
              >Show HN: AboutIdeasNow – search /about, /ideas, /now pages of 7k+
              personal sites</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 14:39:40</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39511714"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
            <div class="text">
              <p>
                It’s hard to find interesting people to work with on your ideas.
              </p>
              <p>
                Our solution: index the /about, /ideas, /now pages of 1000s of
                personal websites. There are thousands of cool personal sites
                out there, with amazing ideas on them, but there’s nowhere to
                easily search through. So we built a simple site that indexes
                7k+ personal sites [0]. We were inspired by Derek Sivers’ Now
                page movement [1] and other IndieWeb directories [2], but we
                figured that it would be more useful if we:
              </p>
              <p>
                * Let you search directly across personal sites without having
                to visit them
              </p>
              <p>
                * Take the content from 3 specific pages, /about, /now and
                /ideas, to structure everything
              </p>
              <p>
                * Define /ideas pages as a space to articulate things you want
                to work on
              </p>
              <p>
                We hope this’ll be a cool place for people to find others to
                collaborate with - would love your feedback. If you’d like your
                site to appear at the top, add it via the form and add a last
                updated date of today (any format). It’s completely open source
                (MIT) and open to contributions [3]!
              </p>
              <p>Peter &amp; Louis</p>
              <p>
                [0] gathered from: 1)
                <a href="https://nownownow.com">https://nownownow.com</a> and
                similar sites 2) checking all HN posts since 2020 with more than
                100 upvotes
              </p>
              <p>
                [1] <a href="https://nownownow.com">https://nownownow.com</a>
              </p>
              <p>
                [2] <a href="https://personalsit.es">https://personalsit.es</a>
              </p>
              <p>
                [3]
                <a href="https://github.com/lindylearn/aboutideasnow"
                  >https://github.com/lindylearn/aboutideasnow</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39511676">
          <h3>
            <a class="item" href="https://superset.apache.org/"
              >Apache Superset</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 14:36:35</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39511676"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39511530">
          <h3>
            <a
              class="item"
              href="https://www.ft.com/content/cd6eb51a-3276-450f-87fd-97e8410db9eb"
              >Microsoft strikes deal with Mistral in push beyond OpenAI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 14:25:05</span
              ><span class="points-container"
                >Points: <span class="points">212</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39511530"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39511477">
          <h3>
            <a class="item" href="https://mistral.ai/news/mistral-large/"
              >Mistral Large</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 14:20:53</span
              ><span class="points-container"
                >Points: <span class="points">357</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39511477"
                  >Comments</a
                ><span class="descendants">: 141</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39510874">
          <h3>
            <a class="item" href="https://github.com/SciPhi-AI/R2R"
              >Show HN: R2R – Open-source framework for production-grade RAG</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 13:10:13</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39510874"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.sciphi.ai/">https://www.sciphi.ai/</a>), a
              startup working on simplifying˛Retrieval-Augmented Generation
              (RAG). Today we’re excited to share R2R (<a
                href="https://github.com/SciPhi-AI/R2R"
                >https://github.com/SciPhi-AI/R2R</a
              >), an open-source framework that makes it simpler to develop and
              deploy production-grade RAG systems.
              <p>
                Just a quick reminder: RAG helps Large Language Models (LLMs)
                use current information and specific knowledge. For example, it
                allows a programming assistant to use your latest documents to
                answer questions. The idea is to gather all the relevant
                information ("retrieval") and present it to the LLM with a
                question ("augmentation"). This way, the LLM can provide answers
                (“generation”) as though it was trained directly on your data.
              </p>
              <p>
                The R2R framework is a powerful tool for addressing key
                challenges in deploying RAG systems, avoiding the complex
                abstractions common in other projects. Through conversations
                with numerous developers, we discovered that many were
                independently developing similar solutions. R2R distinguishes
                itself by adopting a straightforward approach to streamline the
                setup, monitoring, and upgrading of RAG systems. Specifically,
                it focuses on reducing unnecessary complexity and enhancing the
                visibility and tracking of system performance.
              </p>
              <p>
                The key parts of R2R include: an Ingestion Pipeline that
                transforms different data types (like json, txt, pdf, html) into
                'Documents' ready for embedding. Next, the Embedding Pipeline
                takes text and turns it into vector embeddings through various
                processes (such as extracting text, transforming it, chunking,
                and embedding). Finally, the RAG Pipeline follows the steps of
                the embedding pipeline but adds an LLM provider to create text
                completions.
              </p>
              <p>
                R2R is currently in use at several companies building
                applications from B2B lead generation to educational tools for
                consumers.
              </p>
              <p>
                Our GitHub repo (<a href="https://github.com/SciPhi-AI/R2R"
                  >https://github.com/SciPhi-AI/R2R</a
                >) includes basic examples for application deployment and
                standalone use, demonstrating the framework's adaptability in a
                simple way.
              </p>
              <p>
                We’d love for you to give R2R a try, and welcome your feedback
                and comments as we refine and develop it further!
              </p>
            </div>
          </section>
        </section>
        <section id="39510793">
          <h3>
            <a class="item" href="https://github.com/calyxir/calyx"
              >Calyx: Intermediate Language for Hardware Accelerators</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 12:59:55</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39510793"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39510147">
          <h3>
            <a class="item" href="https://arnon.dk/the-14-pains-of-billing/"
              >Pains of building your own billing system</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 11:41:45</span
              ><span class="points-container"
                >Points: <span class="points">219</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39510147"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39509983">
          <h3>
            <a
              class="item"
              href="https://fabiensanglard.net/Compile_Like_Its_1992/index.php"
              >Let's compile like it's 1992 (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 11:18:13</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39509983"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39509772">
          <h3>
            <a
              class="item"
              href="http://www.6502.org/source/interpreters/sweet16.htm"
              >Porting Sweet 16 (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 10:50:59</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39509772"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39509560">
          <h3>
            <a
              class="item"
              href="https://www.atlasobscura.com/articles/the-real-world-locations-used-in-fourteen-film-dystopias"
              >The Real-World Locations of 14 Sci-Fi Dystopias (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 10:20:42</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39509560"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39509287">
          <h3>
            <a class="item" href="http://www.arxiv.org/abs/2402.13520"
              >Fractal Scaling and the Aesthetics of Trees</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 09:40:27</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39509287"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39509156">
          <h3>
            <a
              class="item"
              href="https://asteriskmag.com/issues/05/all-aboard-the-bureaucracy-train"
              >All Aboard the Bureaucracy Train</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 09:15:54</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39509156"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39509012">
          <h3>
            <a
              class="item"
              href="https://web-in-security.blogspot.com/2021/01/insecure-features-in-pdfs.html"
              >Insecure Features in PDFs (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 08:57:45</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39509012"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39508626">
          <h3>
            <a class="item" href="https://raphting.dev/posts/monitor-rss/"
              >Show HN: Free Certificate Monitoring via RSS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-26 @ 07:51:35</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39508626"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39504351">
          <h3>
            <a
              class="item"
              href="https://priceonomics.com/the-time-everyone-corrected-the-worlds-smartest/"
              >Marilyn vos Savant and the Monty Hall Problem (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-25 @ 20:19:31</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39504351"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39504342">
          <h3>
            <a class="item" href="https://fontreviewjournal.com/windsor/"
              >Windsor Typeface (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-25 @ 20:18:42</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39504342"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39500565">
          <h3>
            <a class="item" href="https://github.com/allmonday/pydantic-resolve"
              >Pydantic-resolve, a hierarchical solution for data fetching and
              processing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-25 @ 13:18:17</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39500565"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39498281">
          <h3>
            <a
              class="item"
              href="https://qsantos.fr/2024/02/24/vihn-vim-for-hacker-news/"
              >ViHN: Vim for Hacker News</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-25 @ 06:44:43</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39498281"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39489748">
          <h3>
            <a
              class="item"
              href="http://www.geocities.ws/politalk/win31/slimwin.htm"
              >Slimming Down Windows 3.1/3.11 (2002)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-24 @ 07:04:46</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39489748"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
