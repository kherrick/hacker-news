<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44182795">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/cars/2025/06/tesla-shows-no-sign-of-improvement-in-may-sales-data/"
              >Tesla shows no sign of improvement in May sales data</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:54:07</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182795"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182634">
          <h3>
            <a
              class="item"
              href="https://paulkrugman.substack.com/p/we-are-no-longer-a-serious-country"
              >We Are No Longer a Serious Country – Paul Krugman</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:39:36</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182634"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182582">
          <h3>
            <a
              class="item"
              href="https://restofworld.org/2025/employee-surveillance-software-vc-funding/"
              >VC money is fueling a global boom in worker surveillance tech</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:35:58</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182582"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182356">
          <h3>
            <a
              class="item"
              href="https://www.404media.co/directfile-open-source-irs-tax-filing-software-turbotax-is-trying-to-kil/"
              >The IRS Tax Filing Software TurboTax Is Trying to Kill Just Got
              Open Sourced</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:16:39</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182356"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182275">
          <h3>
            <a class="item" href="https://teenage.engineering/"
              >Teenage Engineering lets you pick what you want to pay for an
              OP-1 Field</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:08:03</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182275"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182206">
          <h3>
            <a class="item" href="https://www.adamcad.com/"
              >Show HN: GPT image editing, but for 3D models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:00:52</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182206"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’m Zach one of the co-founders of Adam (<a
                  href="https://www.adamcad.com"
                  >https://www.adamcad.com</a
                >). We're building AI-powered tools for CAD and 3D modeling [1].
              </p>
              <p>
                We’ve recently been exploring a new way to bring GPT-style image
                editing directly into 3D model generation and are excited to
                showcase this in our web-app today. We’re calling it creative
                mode and are intrigued by the fun use cases this could create by
                making 3D generation more conversational!
              </p>
              <p>
                For example you can put a prompt in such as “an elephant” then
                follow it up by “have it ride a skateboard” and it preserves the
                context, identity and maintains consistency with the previous
                model. We believe this lends itself better to an iterative
                design process when prototyping creative 3D assets or models for
                printing.
              </p>
              <p>
                We’re offering everyone 10 free generations to start (ramping up
                soon!). Here’s a short video explaining how it works:
                <a
                  href="https://www.loom.com/share/cf9ab91375374a4f93d6cc89619a043b"
                  >https://www.loom.com/share/cf9ab91375374a4f93d6cc89619a043b</a
                >
              </p>
              <p>
                We’d also love you to try our parametric mode (free!) which uses
                LLMs to create a conversational interface for solid modeling as
                touched on in a recent HN thread [2]. We are leveraging the code
                generation capabilities of these models to generate OpenSCAD
                code (an open-source script based CAD) and are surfacing the
                variables as sliders the user can toggle to adjust their design.
                We hope this can give a glimpse into what it could be like to
                “vibe-CAD”. We will soon be releasing our results on Will
                Patrick's Text to CAD eval [3] and adding B-rep compatible
                export!
              </p>
              <p>
                We’d love to hear what you think and where we should take this
                next :)
              </p>
              <p>
                [1]<a href="https://x.com/zachdive/status/1882858765613228287"
                  >https://x.com/zachdive/status/1882858765613228287</a
                >
              </p>
              <p>
                [2]<a href="https://news.ycombinator.com/item?id=43774990"
                  >https://news.ycombinator.com/item?id=43774990</a
                >
              </p>
              <p>
                [3]<a
                  href="https://willpatrick.xyz/technology/2025/04/23/teaching-llms-how-to-solid-model.html"
                  >https://willpatrick.xyz/technology/2025/04/23/teaching-llms-...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44182204">
          <h3>
            <a
              class="item"
              href="https://news.sky.com/story/meta-found-covertly-tracking-android-users-through-instagram-and-facebook-13379083"
              >Meta found 'covertly tracking' Android users through Instagram
              and Facebook</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 16:00:42</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182204"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44182186">
          <h3>
            <a
              class="item"
              href="https://git.ffmpeg.org/gitweb/ffmpeg.git/commit/167e343bbe75515a80db8ee72ffa0c607c944a00"
              >FFmpeg Merges WebRTC Support</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 15:58:50</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44182186"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44181613">
          <h3>
            <a
              class="item"
              href="https://thegradient.pub/agi-is-not-multimodal/"
              >AGI Is Not Multimodal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 15:15:33</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44181613"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44181522">
          <h3>
            <a
              class="item"
              href="https://archive.org/details/departmentstorecatalogs"
              >215 Department Store Catalogs 1908-2019</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 15:09:23</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44181522"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44181421">
          <h3>
            <a
              class="item"
              href="https://www.eff.org/deeplinks/2025/06/right-repair-law-washington-state"
              >The Right to Repair Is Law in Washington State</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 15:00:29</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44181421"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44181305">
          <h3>
            <a class="item" href="https://ianreppel.org/from-steam-to-silicon/"
              >From Steam to Silicon: Patterns of Technological Revolutions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 14:50:12</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44181305"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44181237">
          <h3>
            <a class="item" href="https://verysmall.site"
              >Show HN: Verysmall.site – vibecode single page websites</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 14:44:49</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44181237"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <p>
                I had non-technical relatives who needed a really simple
                website. I could have built it for them in a couple of hours,
                but instead I spent a few more hours to solve the more general
                problem.
              </p>
              <p>
                They want to talk to a technical person to create and make basic
                updates to a simple landing page.
              </p>
              <p>
                I know v0, loveable, replit etc all exist, but they still have a
                learning curve, and then hosting gets expensive. This way they
                can download the site as a single HTML file and upload it to
                their oldschool ISP webhosting package.
              </p>
              <p>
                I was inspired by carrd.co which I used a lot from when it was
                still html5up all the way through its various iterations. I
                think constraints can actually be good sometimes, though in this
                case probably the lack of way to upload images and other assets
                to integrate might be too much of a limitation.
              </p>
              <p>
                It's fully vibe-coded using Replit agent (which I bought on a
                Black Friday special and some extra credits for this month) and
                also hosted on Replit. I have no idea how scalable it is or how
                many concurrent users it can serve, or how reliable the vibe
                coded queue system is, but I guess I might be about to find out.
              </p>
              <p>Let me know what you think</p>
            </div>
          </section>
        </section>
        <section id="44179257">
          <h3>
            <a
              class="item"
              href="https://happihacking.com/blog/posts/2025/why_I_wrote_theBEAMBook/"
              >Why I Wrote the BEAM Book</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 10:36:49</span
              ><span class="points-container"
                >Points: <span class="points">259</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44179257"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44178902">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/cockatoos-have-learned-operate-drinking-fountains-australia"
              >Cockatoos have learned to operate drinking fountains in
              Australia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 09:42:29</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44178902"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44178468">
          <h3>
            <a
              class="item"
              href="https://cloud.google.com/blog/products/serverless/cloud-run-gpus-are-now-generally-available"
              >Cloud Run GPUs, now GA, makes running AI workloads easier for
              everyone</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 08:28:46</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44178468"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44178445">
          <h3>
            <a class="item" href="https://github.com/SpencerTorres/Click-V"
              >Click-V: A RISC-V emulator built with ClickHouse SQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 08:24:08</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44178445"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44177901">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/depot/jobs/NdCr76D-enterprise-support-engineer"
              >Depot (YC W23) is hiring an enterprise support engineer
              (UK/EU)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 07:00:54</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44177446">
          <h3>
            <a
              class="item"
              href="https://jimmyhmiller.com/machine-code-isnt-scary"
              >Machine Code Isn't Scary</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 05:19:10</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44177446"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44176919">
          <h3>
            <a
              class="item"
              href="https://eerielinux.wordpress.com/2025/05/31/installing-bsd-in-2025-part-3-a-critical-look-at-netbsds-installer/"
              >A critical look at NetBSD’s installer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 03:19:45</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44176919"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44176829">
          <h3>
            <a class="item" href="https://merlin.allaboutbirds.org/"
              >Merlin Bird ID</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 02:58:40</span
              ><span class="points-container"
                >Points: <span class="points">470</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44176829"
                  >Comments</a
                ><span class="descendants">: 161</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44176825">
          <h3>
            <a class="item" href="https://wordle.chengeric.com/"
              >Binary Wordle</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 02:57:11</span
              ><span class="points-container"
                >Points: <span class="points">219</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44176825"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44176737">
          <h3>
            <a class="item" href="https://diffx.org/"
              >DiffX – Next-Generation Extensible Diff Format</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 02:38:46</span
              ><span class="points-container"
                >Points: <span class="points">323</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44176737"
                  >Comments</a
                ><span class="descendants">: 134</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44176514">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44176514"
              >Ask HN: Has anybody built search on top of Anna's Archive?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 01:47:26</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44176514"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
            <div class="text"><p>What would it cost?</p></div>
          </section>
        </section>
        <section id="44176510">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44176510"
              >Ask HN: Startup getting spammed with PayPal disputes, what should
              we do?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-04 @ 01:46:49</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44176510"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
            <div class="text">
              <p>
                I founded an e-commerce marketplace startup. We use PayPal's
                Multiparty APIs (PayPal Commerce Platform) for checkout. For the
                10 days, someone has been bombarding us with purchases that they
                later dispute. There's consistent pattern to it:
              </p>
              <p>
                * They use an email address that has no footprint online, always
                from the same two domains * They use an unverified PayPal
                account to pay * They pay a low amount, not always the same, in
                a narrow range for a digital item * All of the charges were
                disputed within a few hours
              </p>
              <p>
                They're not doing this through our API. The purchase process
                requires a browser because of the way our payment form is
                configured. There's an amount of variation to each purchase that
                tells us they're automating a browser. Logs indicate that
                they're changing IP each time. The events come in bursts and
                seem to be spaced to avoid automated detection.
              </p>
              <p>
                We added the typical mitigations to our network stack and code.
                A few are still slipping through. Logs indicate a high amount of
                bot traffic.
              </p>
              <p>
                PayPal does not seem equipped to deal with this. Their support
                is always extremely slow, relies on canned responses, and to
                date has a very limited understanding of how their own
                Multiparty APIs work. Their phone support people will not talk
                with me, they see no indication that my PayPal account is
                affiliated with these purchases in any way. They want each of
                our sellers to contact them independently, which we know will
                result in disparate cases that don't tell the complete story or
                offer any assistance.
              </p>
              <p>
                Has anyone encountered anything like this before? We're
                struggling to find the motive or intended outcome by the
                attacker(s). We're a small company with a niche audience, we've
                never had a conflict with anyone that got serious enough that
                we'd expect them to come after us like this.
              </p>
              <p>
                Any thoughts and recommendations would be greatly appreciated.
                We feel like we are on our own here and are unsure of how to
                handle it.
              </p>
            </div>
          </section>
        </section>
        <section id="44174965">
          <h3>
            <a
              class="item"
              href="https://rachel.fast.ai/posts/2025-06-04-enzyme-ml-fails/index.html"
              >Deep learning gets the glory, deep fact checking gets ignored</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 21:31:56</span
              ><span class="points-container"
                >Points: <span class="points">552</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44174965"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44174856">
          <h3>
            <a
              class="item"
              href="https://richardcsuwandi.github.io/blog/2025/dgm/"
              >A deep dive into self-improving AI and the Darwin-Gödel
              Machine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 21:19:32</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44174856"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44161102">
          <h3>
            <a
              class="item"
              href="https://harpers.org/archive/2025/06/twain-dreams-samuel-clemens-john-jeremiah-sullivan/"
              >Twain Dreams</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-02 @ 17:25:55</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44161102"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44144299">
          <h3>
            <a
              class="item"
              href="https://www.danielputtick.com/writing/mapbox-postmortem-interview.html"
              >Writing a postmortem: an interview exercise I like (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 13:54:31</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44144299"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44143199">
          <h3>
            <a
              class="item"
              href="https://journal.stuffwithstuff.com/2025/05/30/consider-knitting/"
              >Consider Knitting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 10:06:16</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44143199"
                  >Comments</a
                ><span class="descendants">: 107</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
