<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39339287">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2024/1/30/24055807/spec-ops-the-line-delisting-licensing-2k"
              >Spec Ops: The Line permanently removed from Steam and other
              digital stores</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 22:15:05</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39339287"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39339264">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/disney-robot-2666681104"
              >Disney's newest robot demonstrates collaborative cuteness</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 22:11:41</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39339264"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39339249">
          <h3>
            <a
              class="item"
              href="https://killedbyapixel.github.io/TinyCode/256B/BitwiseLiminal/"
              >Ｂｉｔｗｉｓｅ Ｌｉｍｉｎａｌ – A Short Film in 256 Bytes of
              Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 22:09:48</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39339249"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39339182">
          <h3>
            <a
              class="item"
              href="https://blog.openstreetmap.org/2024/02/11/2024-announcing-the-year-of-the-openstreetmap-vector-maps/"
              >2024: The year of the OpenStreetMap vector maps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 21:59:39</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39339182"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39338626">
          <h3>
            <a
              class="item"
              href="https://roundup.getdbt.com/p/is-the-modern-data-stack-still-a"
              >Is the "modern data stack" still a useful idea?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 20:58:21</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39338626"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39338582">
          <h3>
            <a
              class="item"
              href="https://bits.danielrothmann.com/corporate-agile"
              >It's time to break free from Corporate Agile</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 20:53:55</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39338582"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39337923">
          <h3>
            <a
              class="item"
              href="https://www.zainrizvi.io/blog/why-software-engineers-like-woodworking/"
              >Why Software Engineers like Woodworking (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 19:42:06</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39337923"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39337813">
          <h3>
            <a
              class="item"
              href="https://starwarz.com/tbone/wp-content/uploads/Star-Wars-Sequel-Brackett.pdf"
              >The Empire Strikes Back First Draft by Leigh Brackett (1978)
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 19:31:56</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39337813"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39337696">
          <h3>
            <a
              class="item"
              href="https://henrikwarne.com/2024/02/11/finding-a-new-software-developer-job/"
              >Finding a new software developer job</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 19:18:46</span
              ><span class="points-container"
                >Points: <span class="points">202</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39337696"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39337485">
          <h3>
            <a
              class="item"
              href="https://earth.fm/the-quietest-places-in-the-worlds-loudest-cities/"
              >The quietest places in the loudest cities</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 18:58:24</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39337485"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39336840">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39336840"
              >Ask HN: What are the best articles on managing people?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 17:53:47</span
              ><span class="points-container"
                >Points: <span class="points">192</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39336840"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
            <div class="text">
              I recently found out about
              https://blog.sbensu.com/posts/lieutenants/ &amp;amp; was curious
              what are your favorite articles on management or generally
              managing people?
            </div>
          </section>
        </section>
        <section id="39336677">
          <h3>
            <a
              class="item"
              href="https://killedbyapixel.github.io/TinyCode/games/CrossMyHeart/"
              >Cross My Heart – A Frogger Demake in 256 Bytes of HTML/JS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 17:34:03</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39336677"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39336336">
          <h3>
            <a
              class="item"
              href="https://jamsocket.com/blog/senior-rust-engineer"
              >Jamsocket (YC W22) is hiring a senior Rust engineer for a
              WebSocket PaaS (NYC)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 17:00:02</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39336308">
          <h3>
            <a class="item" href="https://stephango.com/vcware"
              >100% User-Supported</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 16:56:18</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39336308"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39336221">
          <h3>
            <a
              class="item"
              href="https://usborne.com/us/books/computer-and-coding-books"
              >Usborne 1980s Computer Books</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 16:47:14</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39336221"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39336139">
          <h3>
            <a class="item" href="https://willempennings.nl/balancing-cube/"
              >I designed a cube that balances itself on a corner</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 16:36:58</span
              ><span class="points-container"
                >Points: <span class="points">1139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39336139"
                  >Comments</a
                ><span class="descendants">: 225</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39335509">
          <h3>
            <a
              class="item"
              href="https://datadreamer.dev/docs/latest/pages/get_started/quick_tour/aligning.html"
              >RLHF a LLM in &amp;lt;50 lines of Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 15:12:37</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39335509"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39335450">
          <h3>
            <a class="item" href="https://classic.themanaworld.org/"
              >The Mana World Classic – Open-Source MMORPG</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 15:04:16</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39335450"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39335126">
          <h3>
            <a class="item" href="https://github.com/IdreesInc/Miracode"
              >Show HN: Miracode, a Minecraft programming font that is
              readable</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 14:17:11</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39335126"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
            <div class="text">
              I always believe in using what one makes, which is unfortunate
              because I made Monocraft. For the past year I've been stuck
              looking at those pixels while I code, so over the weekend I tried
              my hand at making a version of Monocraft that was more legible.
              Introducing Miracode, a Minecraft programming font that is
              actually usable! Using a custom algorithm, I've converted adjacent
              pixels from the original font into strokes, which allow for a more
              smooth look while maintaining that Minecraft-y look. Give it a try
              and let me know what you think!
            </div>
          </section>
        </section>
        <section id="39333309">
          <h3>
            <a class="item" href="https://github.com/fiddyschmitt/SimpleKVM"
              >Show HN: Multi-monitor KVM using just a USB switch</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 07:56:46</span
              ><span class="points-container"
                >Points: <span class="points">296</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39333309"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
            <div class="text">
              <p>
                It is similar to Haimgel's display-switch (<a
                  href="https://news.ycombinator.com/item?id=29608967"
                  >https://news.ycombinator.com/item?id=29608967</a
                >), but it provides a GUI which hopefully makes it a bit easier
                to set up. It also supports hotkeys which effectively lets you
                alt+tab between computers.
              </p>
              <p>
                I was surprised by the star-to-download ratio (55:400) on
                GitHub, so I thought I'd post it here as it might be useful to
                someone.
              </p>
              <p>Feedback welcome!</p>
              <p>Thanks, Fidel</p>
            </div>
          </section>
        </section>
        <section id="39325821">
          <h3>
            <a class="item" href="https://viralinstruction.com/posts/mojo/"
              >A look at the Mojo language for bioinformatics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 12:50:48</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39325821"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39325659">
          <h3>
            <a
              class="item"
              href="https://engineering.purdue.edu/online/programs/masters-degrees/semiconductors/semiconductor-fabrication-101"
              >Semiconductor Fabrication 101 at Purdue Online for Free</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 12:24:15</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39325659"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39325642">
          <h3>
            <a
              class="item"
              href="https://www.amusingplanet.com/2019/12/vladimir-lukyanovs-water-computer.html"
              >Vladimir Lukyanov's Water Computer (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 12:21:38</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39325642"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39325273">
          <h3>
            <a
              class="item"
              href="https://best-sci-fi-books.com/12-best-mathematical-science-fiction-books/"
              >Best Mathematical Science Fiction Books</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 11:07:23</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39325273"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39325110">
          <h3>
            <a class="item" href="https://bou.ke/blog/robotics/"
              >Getting into robotics as a software engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 10:30:49</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39325110"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39324898">
          <h3>
            <a
              class="item"
              href="https://logic-masters.de/Raetselportal/Raetsel/zeigen.php?chlang=en&amp;id=000F6A"
              >Pentominoku for Layla</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 09:43:11</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39324898"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39324491">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/02/09/it_incident_report_the_clock/"
              >Broken VPNs, the Year 2038, and certs that expired 100 years
              ago</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 08:10:15</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39324491"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39324278">
          <h3>
            <a
              class="item"
              href="https://martypc.blogspot.com/2024/02/the-complete-bus-logic-of-intel-8088.html"
              >The Complete Bus Logic of the Intel 8088</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 07:19:05</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39324278"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39324040">
          <h3>
            <a
              class="item"
              href="https://literaryreview.co.uk/the-soliloquies-of-the-lambs"
              >Review of Why Animals Talk: The New Science of Animal
              Communication</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 06:13:46</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39324040"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39316019">
          <h3>
            <a class="item" href="https://oration.app"
              >Show HN: Oration (iOS) turns pdfs into audiobooks</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-09 @ 15:51:07</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39316019"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm excited to introduce a project I've recently launched:
                Oration, an iOS app designed to convert PDFs into audiobooks.
                This idea was inspired by my experiences as an engineering
                student with ADHD, struggling to engage with dense academic
                papers. Relying on Text-to-Speech tools, despite their robotic
                quality, was a workaround for me and others with similar
                learning preferences or challenges, such as Dyslexia.
              </p>
              <p>
                Recognizing the limitations of existing tools—difficulty with
                complex formats, inability to skip over citations or footnotes,
                and inadequate handling of tables, graphs, and figures—I
                developed Oration. Our goal is to refine these areas
                continuously, offering both summarized and full versions of PDFs
                for a more accessible learning experience.
              </p>
              <p>
                Oration aims to serve as a high-quality, user-friendly platform
                for auditory learners and those who find traditional reading
                methods challenging, with features akin to popular audiobook
                apps like Audible or Spotify.
              </p>
              <p>How Oration Works:</p>
              <p></p>
              <pre><code>    1. Download the app and sign up using either a username and password or through Google, with a 2-week free trial that doesn't require a payment method.
    2. Upload a PDF document.
    3. Within about 5-10 minutes, you'll receive a notification that your Audiobook is ready.
    4. Listen to your Audiobook directly in the app or through a browser-based web player, which also facilitates easy sharing with friends and family.
</code></pre>
              Also, to emphasize - all audio generated by the user is yours to
              own! We're working on some updates to easily export .MP3 files of
              Oration Audiobooks you create
              <p>
                For an example of how the web player looks and functions, check
                out this link:
                <a
                  href="https://player.oration.app/75e079c1-bd7e-4a16-8e02-23636837a81c"
                  >https://player.oration.app/75e079c1-bd7e-4a16-8e02-23636837a...</a
                >
              </p>
              <p>
                I believe Oration can significantly benefit those who prefer or
                require alternative learning formats. We're committed to
                enhancing the app's functionality and user experience, so
                feedback and constructive criticism are always welcome.
              </p>
              <p>
                Thank you for considering Oration, and I hope it proves to be a
                valuable tool for you or someone you know.
              </p>
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
