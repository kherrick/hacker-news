<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43696798">
          <h3>
            <a
              class="item"
              href="https://hforsten.com/designing-a-low-cost-high-performance-10-mhz-15-ghz-vector-network-analyzer.html"
              >Designing a low-cost high-performance 10 MHz – 15 GHz vector
              network analyzer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 18:38:52</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43696798"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43696756">
          <h3>
            <a
              class="item"
              href="https://mcyoung.xyz/2025/04/14/target-triples/"
              >What the Hell Is a Target Triple?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 18:35:05</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43696756"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43696544">
          <h3>
            <a class="item" href="https://metseditions.org"
              >METS, the Middle English Texts Series</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 18:17:06</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43696544"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43696334">
          <h3>
            <a
              class="item"
              href="https://marylandmatters.org/2025/04/14/end-of-an-era-the-last-radioshack-in-maryland-is-closing-its-doors/"
              >'End of an era': The last RadioShack in Maryland is closing its
              doors</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 18:00:17</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43696334"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43695834">
          <h3>
            <a
              class="item"
              href="https://www.intel.com/content/www/us/en/content-details/851929/post-silicon-validation-of-static-lockstep-mode-on-intel-xeon-6-processor-e-core-architecture.html"
              >Post-Silicon Validation of Static Lockstep Mode</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 17:21:51</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43695834"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43695723">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/oldnewthing/20250411-00/?p=111066"
              >The case of the UI thread that hung in a kernel call</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 17:13:31</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43695723"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43695620">
          <h3>
            <a class="item" href="https://github.com/bobschrag/clolog"
              >Clolog</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 17:04:47</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43695620"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43695592">
          <h3>
            <a
              class="item"
              href="https://blog.google/products/gemini/video-generation/"
              >Generate videos in Gemini and Whisk with Veo 2</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 17:02:16</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43695592"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43695285">
          <h3>
            <a
              class="item"
              href="https://dynamicecology.wordpress.com/2016/09/21/fun-ways-of-deciding-authorship-order/"
              >Fun ways of deciding authorship order</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 16:37:47</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43695285"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43694549">
          <h3>
            <a
              class="item"
              href="https://cliutils.gitlab.io/modern-cmake/README.html"
              >Modern CMake</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 15:48:59</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43694549"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43694546">
          <h3>
            <a class="item" href="https://cohere.com/blog/embed-4"
              >Cohere Launches Embed 4</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 15:48:41</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43694546"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43694157">
          <h3>
            <a class="item" href="https://alexandrefrancois.org/Resonate/"
              >Show HN: Resonate – real-time high temporal resolution spectral
              analysis</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 15:26:13</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43694157"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43693406">
          <h3>
            <a class="item" href="https://github.com/ripplebiz/MeshCore"
              >MeshCore, a new lightweight, hybrid routing mesh protocol for
              packet radios</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 14:38:58</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43693406"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43693402">
          <h3>
            <a
              class="item"
              href="https://seths.blog/2025/04/how-to-win-an-argument-with-a-toddler/"
              >How to Win an Argument with a Toddler</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 14:38:25</span
              ><span class="points-container"
                >Points: <span class="points">439</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43693402"
                  >Comments</a
                ><span class="descendants">: 311</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43693326">
          <h3>
            <a
              class="item"
              href="https://pgdog.dev/blog/hacking-postgres-wire-protocol"
              >Hacking the Postgres Wire Protocol</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 14:33:10</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43693326"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43692476">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43692476"
              >Launch HN: mrge.io (YC X25) – Cursor for code review</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 13:34:21</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43692476"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.mrge.io/home">https://www.mrge.io/home</a>),
              an AI code review platform to help teams merge code faster with
              fewer bugs. Our early users include Better Auth, Cal.com, and
              n8n—teams that handle a lot of PRs every day.
              <p>
                Here’s a demo video:
                <a href="https://www.youtube.com/watch?v=pglEoiv0BgY"
                  >https://www.youtube.com/watch?v=pglEoiv0BgY</a
                >
              </p>
              <p>
                We (Allis and Paul) are engineers who faced this problem when we
                worked together at our last startup. Code review quickly became
                our biggest bottleneck—especially as we started using AI to code
                more. We had more PRs to review, subtle AI-written bugs slipped
                through unnoticed, and we (humans) increasingly found ourselves
                rubber-stamping PRs without deeply understanding the changes.
              </p>
              <p>
                We’re building mrge to help solve that. Here’s how it works:
              </p>
              <p>
                1. Connect your GitHub repo via our Github app in two clicks
                (and optionally download our desktop app). Gitlab support is on
                the roadmap!
              </p>
              <p>
                2. AI Review: When you open a PR, our AI reviews your changes
                directly in an ephemeral and secure container. It has context
                into not just that PR, but your whole codebase, so it can pick
                up patterns and leave comments directly on changed lines. Once
                the review is done, the sandbox is torn down and your code
                deleted – we don’t store it for obvious reasons.
              </p>
              <p>
                3. Human-friendly review workflow: Jump into our web app (it’s
                like Linear but for PRs). Changes are grouped logically (not
                alphabetically), with important diffs highlighted, visualized,
                and ready for faster human review.
              </p>
              <p>
                The AI reviewer works a bit like Cursor in the sense that it
                navigates your codebase using the same tools a developer
                would—like jumping to definitions or grepping through code.
              </p>
              <p>
                But a big challenge was that, unlike Cursor, mrge doesn’t run in
                your local IDE or editor. We had to recreate something similar
                entirely in the cloud.
              </p>
              <p>
                Whenever you open a PR, mrge clones your repository and checks
                out your branch in a secure and isolated temporary sandbox. We
                provision this sandbox with shell access and a Language Server
                Protocol (LSP) server. The AI reviewer then reviews your code,
                navigating the codebase exactly as a human reviewer would—using
                shell commands and common editor features like "go to
                definition" or "find references". When the review finishes, we
                immediately tear down the sandbox and delete the code—we don’t
                want to permanently store it for obvious reasons.
              </p>
              <p>
                We know cloud-based review isn't for everyone, especially if
                security or compliance requires local deployments. But a cloud
                approach lets us run SOTA AI models without local GPU setups,
                and provide a consistent, single AI review per PR for an entire
                team.
              </p>
              <p>
                The platform itself focuses entirely on making <i>human</i> code
                reviews easier. A big inspiration came from productivity-focused
                apps like Linear or Superhuman, products that show just how much
                thoughtful design can impact everyday workflows. We wanted to
                bring that same feeling into code review.
              </p>
              <p>
                That’s one reason we built a desktop app. It allowed us to
                deliver a more polished experience, complete with keyboard
                shortcuts and a snappy interface.
              </p>
              <p>
                Beyond performance, the main thing we care about is making it
                easier for humans to read and understand code. For example,
                traditional review tools sort changed files alphabetically—which
                forces reviewers to figure out the order in which they should
                review changes. In mrge, files are automatically grouped and
                ordered based on logical connections, letting reviewers
                immediately jump in.
              </p>
              <p>
                We think the future of coding isn’t about AI replacing
                humans—it’s about giving us better tools to quickly understand
                high-level changes, abstracting more and more of the code
                itself. As code volume continues to increase, this shift is
                going to become increasingly important.
              </p>
              <p>
                You can sign up now (<a href="https://www.mrge.io/home"
                  >https://www.mrge.io/home</a
                >). mrge is currently free while we're still early. Our plan for
                later is to charge closed-source projects on a per-seat basis,
                and to continue giving mrge away for free to open source ones.
              </p>
              <p>
                We’re very actively building and would love your honest
                feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="43692089">
          <h3>
            <a class="item" href="https://github.com/ubisoft/Chroma"
              >Chroma, Ubisoft's internal tool used to simulate color-blindness,
              open sourced</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 13:04:26</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43692089"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43691891">
          <h3>
            <a class="item" href="https://a.weird.one"
              >WEIRD – a way to be on the web</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 12:42:54</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43691891"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43690955">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2410.03730"
              >Teuken-7B-Base and Teuken-7B-Instruct: Towards European LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 10:17:17</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43690955"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43689801">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/typewise/jobs/u4OdKNh-machine-learning-engineer-f-m-x"
              >Typewise (YC S22) Is Hiring an ML Engineer (Zurich,
              Switzerland)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 07:00:37</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43688658">
          <h3>
            <a
              class="item"
              href="https://jmswrnr.com/blog/hacking-a-smart-home-device"
              >Hacking a Smart Home Device (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 03:12:55</span
              ><span class="points-container"
                >Points: <span class="points">289</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43688658"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43687495">
          <h3>
            <a
              class="item"
              href="https://searchengineland.com/temu-pulls-us-google-shopping-ads-454260"
              >Temu pulls its U.S. Google Shopping ads</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-14 @ 23:43:56</span
              ><span class="points-container"
                >Points: <span class="points">341</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43687495"
                  >Comments</a
                ><span class="descendants">: 613</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43683410">
          <h3>
            <a class="item" href="https://openai.com/index/gpt-4-1/"
              >GPT-4.1 in the API</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-14 @ 17:01:45</span
              ><span class="points-container"
                >Points: <span class="points">658</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43683410"
                  >Comments</a
                ><span class="descendants">: 481</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43678590">
          <h3>
            <a class="item" href="https://www.bellard.org/jslinux/">JSLinux</a>
          </h3>
          <section>
            <h4>
              <span>2025-04-14 @ 06:27:48</span
              ><span class="points-container"
                >Points: <span class="points">339</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43678590"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43678231">
          <h3>
            <a
              class="item"
              href="https://archaeology.org/collection/a-passion-for-fruit/"
              >A Passion for Fruit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-14 @ 05:05:45</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43678231"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43669057">
          <h3>
            <a class="item" href="https://unnamed.website/posts/rng-cosine-nix/"
              >RNG and Cosine in Nix</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-13 @ 00:30:22</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43669057"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43666083">
          <h3>
            <a
              class="item"
              href="https://www.science.org/doi/10.1126/sciadv.adr9092"
              >Rotatum of Light</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-12 @ 16:57:25</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43666083"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43663713">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/smart-news/7000-year-old-skeletons-from-the-green-sahara-reveal-a-previously-unknown-human-lineage-180986403/"
              >7k-Year-Old Skeletons from the Green Sahara Reveal a Mysterious
              Human Lineage</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-12 @ 12:11:46</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43663713"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43661954">
          <h3>
            <a
              class="item"
              href="https://badastronomy.beehiiv.com/p/ban-447-wait-how-many-supernova-explode"
              >Wait. HOW MANY supernova explode every year?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-12 @ 06:48:19</span
              ><span class="points-container"
                >Points: <span class="points">314</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43661954"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43653322">
          <h3>
            <a
              class="item"
              href="https://blog.dogac.dev/how-do-one-time-passwords-work/"
              >Behind the 6-digit code: Building HOTP and TOTP from scratch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-11 @ 13:06:17</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43653322"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
