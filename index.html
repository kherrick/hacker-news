<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39196532">
          <h3>
            <a
              class="item"
              href="https://webbtelescope.org/contents/news-releases/2024/news-2024-105?news=true"
              >NASA's Webb Depicts Staggering Structure in 19 Nearby Spiral
              Galaxies</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 22:06:27</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39196532"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39196055">
          <h3>
            <a
              class="item"
              href="https://daringfireball.net/2024/01/the_vision_pro#fnr2-2024-01-30"
              >The Vision Pro</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 21:24:29</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39196055"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39195796">
          <h3>
            <a
              class="item"
              href="https://abc.xyz/assets/95/eb/9cef90184e09bac553796896c633/2023q4-alphabet-earnings-release.pdf"
              >Google Announces Fourth Quarter and Fiscal Year 2023 Results
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 21:04:53</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39195796"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39195747">
          <h3>
            <a
              class="item"
              href="https://relationshiphero.com/careers?role=coach"
              >Relationship Hero (YC S17) Is Hiring Relationship Coaches</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 21:00:35</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39194578">
          <h3>
            <a class="item" href="https://github.com/fiatjaf/gitstr"
              >Gitstr: Send and receive Git patches over Nostr</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 19:34:35</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39194578"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39194477">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/ai-domains"
              >.ai website registrations are a windfallf for tiny Anguilla</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 19:26:44</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39194477"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39194439">
          <h3>
            <a
              class="item"
              href="https://www.cpushack.com/2021/11/04/the-soviet-1801vm2-lsi-11-processor/"
              >The Soviet 1801VM2 LSI-11 Processor (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 19:24:29</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39194439"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39194297">
          <h3>
            <a
              class="item"
              href="https://danrodricks.com/2024/01/29/tear-up-unused-parking-lots-plant-trees/"
              >Tear up unused parking lots, plant trees</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 19:13:01</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39194297"
                  >Comments</a
                ><span class="descendants">: 162</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39192807">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41467-024-44785-3"
              >Why flying insects gather at artificial light</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 17:18:32</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39192807"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39192709">
          <h3>
            <a
              class="item"
              href="https://pythonspeed.com/articles/numba-profiling/"
              >Profiling Your Numba Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 17:12:18</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39192709"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39192304">
          <h3>
            <a class="item" href="https://github.com/wasp-lang/open-saas"
              >Show HN: Open SaaS – An open-source alternative to paid
              boilerplate starters</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 16:48:22</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39192304"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39191870">
          <h3>
            <a
              class="item"
              href="https://www.ubicloud.com/use-cases/github-actions"
              >Show HN: Open-source x64 and Arm GitHub runners</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 16:14:42</span
              ><span class="points-container"
                >Points: <span class="points">343</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39191870"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
            <div class="text">
              <p>
                Our first use-case is GitHub Actions. We support x64 and arm64
                Linux runners; and reduce your Github Actions bill by 10x. We
                can give you hardware similar to default GitHub runners because
                of the very high margins on the cloud. One difference with our
                hardware is that we use local NVMes for better disk performance.
              </p>
              <p>
                Ubicloud and our GitHub Actions integration is also open source.
                You can check out our integration here:
                <a
                  href="https://github.com/ubicloud/ubicloud/blob/main/routes/web/webhook/github.rb"
                  >https://github.com/ubicloud/ubicloud/blob/main/routes/web/we...</a
                >
              </p>
              <p>
                For security and isolation, we give you a clean and ephemeral VM
                for each job. When the job completes, we deprovision the VM and
                wipe out the block storage device attached to the VM. We set up
                your firewall rules to lock down access to the VM; and also
                encrypt your data at rest and in-transit.
              </p>
              <p>
                (We use Linux KVM and the Cloud Hypervisor as our underlying VM
                tech. For our block device, we use and extend SPDK:
                <a
                  href="https://www.ubicloud.com/blog/building-block-storage-for-cloud-with-spdk-non-replicated"
                  >https://www.ubicloud.com/blog/building-block-storage-for-clo...</a
                >)
              </p>
              <p>
                Ubicloud runners are also fully compatible with GitHub runners.
                To get started, all you need to do is change 1-line in your
                workflow file. Each account gets 1,250 free build minutes per
                month with standard-2 runners.
              </p>
              <p>We’d love to hear your feedback!</p>
              <p>
                <a
                  href="https://www.ubicloud.com/docs/github-actions-integration/quickstart"
                  >https://www.ubicloud.com/docs/github-actions-integration/qui...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39191627">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/how-to-build-an-origami-computer-20240130/"
              >How to Build an Origami Computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 15:58:37</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39191627"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39191507">
          <h3>
            <a class="item" href="https://www.philipzucker.com/cbmc_tut/"
              >The C Bounded Model Checker: Criminally Underused</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 15:51:19</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39191507"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39191260">
          <h3>
            <a
              class="item"
              href="https://www.vpnmentor.com/news/report-coronalab-breach/"
              >Covid Test Data Breach: 1.3M Patient Records Exposed Online</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 15:32:37</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39191260"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39190947">
          <h3>
            <a
              class="item"
              href="https://www.dw.com/en/germany-police-seize-bitcoins-worth-2-billion/a-68121384"
              >Germany: Police seize bitcoins worth €2B</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 15:09:28</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39190947"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39190791">
          <h3>
            <a
              class="item"
              href="https://12challenges.substack.com/p/how-to-deal-with-receiving-a-cease"
              >How to deal with receiving a cease-and-desist letter from Big
              Tech</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 14:57:31</span
              ><span class="points-container"
                >Points: <span class="points">375</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39190791"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39190468">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/tech/apple-vision-pro-review-39f2d82e"
              >Apple Vision Pro review</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 14:28:36</span
              ><span class="points-container"
                >Points: <span class="points">293</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39190468"
                  >Comments</a
                ><span class="descendants">: 397</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39190345">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/sand-mafias-are-plundering-the-earth/"
              >Crime rings trafficking sand</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 14:17:32</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39190345"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39190223">
          <h3>
            <a class="item" href="https://github.com/bjesus/wren"
              >Show HN: Wren – simple yet extensible task management with CLI,
              Telegram, HTTP</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 14:05:13</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39190223"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39190110">
          <h3>
            <a class="item" href="https://akrl.sdf.org/#orgc15a10d"
              >The original magic Emacs garbage collection hack (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 13:54:35</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39190110"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39190096">
          <h3>
            <a
              class="item"
              href="https://www.hezmatt.org/~mpalmer/blog/2024/01/30/why-certificate-automation-matters.html"
              >Why Certificate Lifecycle Automation Matters</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 13:52:27</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39190096"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39189881">
          <h3>
            <a
              class="item"
              href="https://chadaustin.me/2024/01/truecolor-terminal-emacs/"
              >I just wanted Emacs to look nice – Using 24-bit color in
              terminals</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 13:32:34</span
              ><span class="points-container"
                >Points: <span class="points">354</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39189881"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39189015">
          <h3>
            <a
              class="item"
              href="https://www.red-gate.com/simple-talk/opinion/opinion-pieces/chris-date-and-the-relational-model/"
              >Chris Date and the Relational Model (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 11:50:49</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39189015"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39188760">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39188760"
              >Launch HN: Univerbal (YC W23) – Language learning with a
              conversational AI tutor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 11:19:06</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39188760"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
            <div class="text">
              <a href="https://univerbal.app">https://univerbal.app</a>).
              <p>
                We’re an AI language learning app where you talk to your AI
                Tutor, just like you would with a human one. Here’s a short demo
                of what that looks like in an actual conversation:
                <a href="https://www.youtube.com/watch?v=IukKGc00juY"
                  >https://www.youtube.com/watch?v=IukKGc00juY</a
                >
              </p>
              <p>
                We actually started as a Show HN over a year ago and the
                responses we got from the HN community led us to apply to YC and
                make an actual company out of a side project (original Show HN
                <a href="https://news.ycombinator.com/item?id=32993130"
                  >https://news.ycombinator.com/item?id=32993130</a
                >). We were called Quazel which we have since realized is too
                hard to spell and only makes sense in German.
              </p>
              <p>
                We started off as only offering open-ended conversations. While
                that is still at the core of what we do, we quickly realized
                that we need to solve a bigger problem for learners than simply
                giving them the option to hold a conversation with an AI.
                Tutoring is (usually) the highest quality of education you can
                get. The curriculum is based on your interests and needs, you
                move at your own pace and you get personalized feedback about
                your specific mistakes.
              </p>
              <p>
                At the same time, the reality is that tutoring is prohibitively
                expensive for most people, let alone that it can be very
                time-consuming to find a tutor that you like and you have to
                work around their schedule. We want to fix these issues by
                providing an AI Language Tutor that’s available whenever you
                want and affordable to everyone.
              </p>
              <p>
                Now the tricky thing about this, is that a human tutor (to no
                one’s surprise) actually does many things at the same time,
                which are very much not straightforward to approximate, even
                with AI. The interaction part of a tutor session is already the
                main interaction in Univerbal, through speaking and having the
                replies read out loud. The hard part intervenes when you try to
                replicate the progress tracking and tailoring of the curriculum.
              </p>
              <p>
                These are things that tutors automatically do, and getting a
                system, even one that’s based on LLM to do something like that
                is very hard! Our current approach is based on “Skills” (e.g. I
                can introduce myself), that a user works towards. These are a
                measure of where the user currently stands and we use this
                progress in a feedback loop to come up with relevant and
                interesting next lessons for a learner.
              </p>
              <p>
                I often get asked, “Ohh so is it like Duolingo?”. When I get
                that question, I smile, feel something inside me die and then
                say that, while Duolingo is a great language-learning app, we
                don’t really see them as our competition, rather we see online
                tutoring platforms (italki, verbling, cambly etc.) as the
                companies we’re “attacking”.
              </p>
              <p>
                We already have a couple of success stories. One of which comes
                from an Australian user who’s living in Italy and has
                successfully prepared herself for her Italian B2 language exam
                by using Univerbal :). If you’d like to give it a try, you can
                try it without an account for free for 7 days (no credit card
                required). Afterwards, it’s about $10ish/month.
              </p>
              <p>
                One thing I’d love to get HN’s opinion on is how much
                gamification you think we should add. On the one hand, we don’t
                want to become a “game” and a Tutor lesson is always a “hard”
                thing and kind of exhausting, but there is obviously some
                balance to be struck there. Thoughts?
              </p>
              <p>David, Same and Philipp (me :) )</p>
              <p>
                You can try it without an account at
                <a href="https://chat.univerbal.app"
                  >https://chat.univerbal.app</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39188432">
          <h3>
            <a class="item" href="https://github.com/quickemu-project/quickemu"
              >Quickemu: Quickly run optimised Windows, macOS and Linux virtual
              machines</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-30 @ 10:25:04</span
              ><span class="points-container"
                >Points: <span class="points">371</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39188432"
                  >Comments</a
                ><span class="descendants">: 113</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39174998">
          <h3>
            <a
              class="item"
              href="https://www.kravchyk.com/adding-type-safety-to-object-ids-typescript/"
              >Adding type safety to object IDs in TypeScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-29 @ 11:04:00</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39174998"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39173034">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2401.14953"
              >Learning Universal Predictors</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-29 @ 05:36:30</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39173034"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39172981">
          <h3>
            <a class="item" href="https://github.com/semickolon/kirei"
              >Kirei is a work-in-progress keyboard library written in Zig</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-29 @ 05:25:59</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39172981"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39165089">
          <h3>
            <a class="item" href="https://arc.aiaa.org/doi/10.2514/1.C035399"
              >Flight-Testing of Otto Lilienthal's Monoplane Design from 1893</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-28 @ 12:34:59</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39165089"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
