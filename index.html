<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39374797">
          <h3>
            <a class="item" href="https://ifuckinghatejira.com"
              >I Fucking Hate Jira (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 20:23:42</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39374797"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39374389">
          <h3>
            <a
              class="item"
              href="https://variety.com/2024/digital/news/amazon-prime-video-ads-lawsuit-class-action-1235910694/"
              >Amazon Sued over Prime Video Ads: Class-Action Suit Alleges
              Deception</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 19:54:11</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39374389"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39374332">
          <h3>
            <a
              class="item"
              href="https://molecularspec.substack.com/p/nanoplastics-in-water-surprisingly"
              >Nanoplastics in water – surprisingly large amounts discovered and
              its not good</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 19:49:59</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39374332"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39374152">
          <h3>
            <a
              class="item"
              href="https://www.mother.ly/parenting/social-safety-net/"
              >The happiest kids in the world have social safety nets</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 19:37:32</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39374152"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39374020">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/inside-the-proton-the-most-complicated-thing-imaginable-20221019/"
              >Inside the proton, the ‘most complicated thing you could possibly
              imagine’</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 19:26:18</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39374020"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39373960">
          <h3>
            <a
              class="item"
              href="https://pears.com/news/holepunch-unveils-groundbreaking-open-source-peer-to-peer-app-development-platform-pear-runtime/"
              >Holepunch Unveils P2P Platform "Pear Runtime"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 19:21:07</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39373960"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39373829">
          <h3>
            <a class="item" href="https://kk.org/books/out-of-control"
              >Out of Control by Kevin Kelly (1994)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 19:10:37</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39373829"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39373814">
          <h3>
            <a class="item" href="https://amazon-ltts-paper.com/"
              >BASE TTS: The largest text-to-speech model to-date</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 19:09:29</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39373814"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39373800">
          <h3>
            <a class="item" href="https://foldmation.com"
              >Show HN: FoldMation – Interactive origami learning and
              creation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 19:08:24</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39373800"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                On comparing to video instructions, you have the ability to
                quickly skip/rewind steps and replay a complicated step many
                times.
              </p>
              <p>
                On the creation side, there have been one or two attempts at
                this before, but those solutions rely on mouse drags as the user
                interface. This greatly limited the kinds of folds possible. The
                foldMation Creator uses commands, keywords and values to compose
                a domain specific language/step and provides a (relatively
                speaking) easy to use user interface to compose the steps.
              </p>
              <p>
                For those interested in using the Creator, please go through the
                tutorial at the top of the create page.
              </p>
              <p>
                Btw, the DSL for foldMation uses
                <a href="https://github.com/mationai/mation-spec"
                  >https://github.com/mationai/mation-spec</a
                >. I created it since I couldn't find anything out there that is
                similar, allowing me to specify a well structured data with
                English-like readable syntax.
              </p>
              <p>Let me know what you think?</p>
            </div>
          </section>
        </section>
        <section id="39373744">
          <h3>
            <a class="item" href="https://console.dataherald.ai/playground"
              >Show HN: Natural Language to SQL "Text-to-SQL" API</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 19:03:55</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39373744"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>
                (1) Explain Your Data: Feed in dictionaries, dbt, schemas,
                Confluence docs - we'll understand the business context to your
                data.
              </p>
              <p>
                (2) Train Your AI: Fine-tune an LLM (including GPT-4)
                specifically for your data, increasing accuracy and lowering
                latency
              </p>
              <p>
                (3) Trust the Answer: See confidence scores with each
                AI-generated query, stay in control.
              </p>
              <p>(4) Conduct complex SQL queries</p>
              <p>
                Problem background - Developers struggle to build NL-to-SQL into
                products because LLMs do not work out-of-the-box; they lack
                metadata and business definitions. Existing NL-to-SQL tools
                struggle with context, complexity, and adapting to your data.
              </p>
              <p>
                For example, given the question “what was the average rent in
                Los Angeles in May 2023?” a reasonable human would either assume
                the question is about Los Angeles, CA or would confirm the state
                with the question asker in a follow up. However, an LLM
                translates this to:
              </p>
              <p></p>
              <pre><code>  select price from rent_prices where city=”Los Angeles” AND month=”05” AND year=”2023”
</code></pre>
              Dataherald integrates with major data warehouses, including
              PostgreSQL, Databricks, Snowflake, BigQuery, and DuckDB.
              <p>
                You can try it now free – no fees, no credit card, no sales
                pitches, just get the API key and get going. Let us know if it
                works for you, even your complex queries. (<a
                  href="https://console.dataherald.ai/playground"
                  >https://console.dataherald.ai/playground</a
                >)
              </p>
              <p>
                While the open source version works just fine (<a
                  href="https://github.com/Dataherald/dataherald"
                  >https://github.com/Dataherald/dataherald</a
                >), the hosted API might be a better fit for those looking for:
                (1) someone else to take care of infrastructure setup, (2)
                access to an Admin UI console where you can configure and
                monitor performance, and (3) ability to invite team members to a
                project.
              </p>
              <p>
                We're looking for feedback, particularly from anyone who can
                compare this performance to other NL-to-SQL products. Share your
                thoughts and join the conversation For more background on the
                release:
                <a href="https://www.dataherald.com/news/introducing-dhai"
                  >https://www.dataherald.com/news/introducing-dhai</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39373662">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39373662"
              >Ask HN: What are some actual use cases of AI Agents right now?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 18:58:06</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39373662"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
            <div class="text">
              <p>
                That all makes sense to me and I think is the right direction to
                be headed. However, it's been a bit since the inception of some
                of these projects/cool demos but I haven't seen anyone who uses
                agents as a core/regular part of their workflow.
              </p>
              <p>
                I'm curious if you use these agents regularly or know someone
                that does. Or if you're working on one of these, I'd love to
                know what are some of the hidden challenges to making a useful
                product with agents? What's the main bottle neck?
              </p>
              <p>Any thoughts are welcome!</p>
            </div>
          </section>
        </section>
        <section id="39373612">
          <h3>
            <a
              class="item"
              href="https://mailman.nginx.org/pipermail/nginx-announce/2024/NW6MNW34VZ6HDIHH5YFBIJYZJN7FGNAV.html"
              >Nginx Security Advisory</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 18:53:17</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39373612"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39373495">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/a-lobby-where-a-molecule-mob-tells-genes-what-to-do-20240214/"
              >A 'Lobby' Where a Molecule Mob Tells Genes What to Do</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 18:43:06</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39373495"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39373327">
          <h3>
            <a
              class="item"
              href="https://mailman.nginx.org/pipermail/nginx-devel/2024-February/K5IC6VYO2PB7N4HRP2FUQIBIBCGP4WAU.html"
              >Freenginx: Core Nginx developer announces fork</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 18:29:40</span
              ><span class="points-container"
                >Points: <span class="points">434</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39373327"
                  >Comments</a
                ><span class="descendants">: 171</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39372384">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/02/13/dnssec_vulnerability_internet/"
              >Just one bad packet can bring down a vulnerable DNS server thanks
              to DNSSEC</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 17:18:56</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39372384"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39372159">
          <h3>
            <a class="item" href="https://github.com/reorproject/reor"
              >Show HN: Reor – An AI note-taking app that runs models locally</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 17:00:52</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39372159"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
            <div class="text">
              <p>The four main things to know are:</p>
              <p>
                1. Notes are connected automatically with vector search. You can
                do semantic search + related notes are automatically connected.
              </p>
              <p>
                2. You can do RAG Q&amp;A on your notes using the local LLM of
                your choice.
              </p>
              <p>
                3. Embedding model, LLM, vector db and files are all run or
                stored locally.
              </p>
              <p>
                4. Point it to a directory of markdown files (like an Obsidian
                vault) and it works seamlessly alongside Obsidian.
              </p>
              <p>
                Under the hood, Reor uses Llama.cpp (node-llama-cpp
                integration), Transformers.js and Lancedb to power the local AI
                features.
              </p>
              <p>
                Reor was built right from the start to support local models. The
                future of knowledge management involves using lots of AI to
                organize pieces of knowledge - but crucially, that AI should run
                as much as possible privately &amp; locally.
              </p>
              <p>
                It's available for Mac, Windows &amp; Linux on the project
                Github:
                <a href="https://github.com/reorproject/reor"
                  >https://github.com/reorproject/reor</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39371831">
          <h3>
            <a
              class="item"
              href="https://smlx.dev/posts/goodwe-sems-protocol-teardown/"
              >Reverse-engineering an encrypted IoT protocol</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 16:34:22</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39371831"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39371805">
          <h3>
            <a class="item" href="https://www.ycombinator.com/rfs"
              >YC: Requests for Startups</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 16:31:57</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39371805"
                  >Comments</a
                ><span class="descendants">: 293</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39371669">
          <h3>
            <a
              class="item"
              href="https://rosenzweig.io/blog/conformant-gl46-on-the-m1.html"
              >Conformant OpenGL 4.6 on the M1</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 16:18:44</span
              ><span class="points-container"
                >Points: <span class="points">221</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39371669"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39371297">
          <h3>
            <a class="item" href="https://github.com/traceloop/openllmetry-js"
              >Show HN: You don't need to adopt new tools for LLM
              observability</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 15:52:03</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39371297"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <p>
                Why should it be different when the app you're building happens
                to be using LLMs?
              </p>
              <p>
                So today we're open-sourcing OpenLLMetry-JS. It's an open
                protocol and SDK, based on OpenTelemetry, that provides traces
                and metrics for LLM JS/TS applications and can be connected to
                any of the 15+ tools that already support OpenTelemetry. Here's
                the repo:
                <a href="https://github.com/traceloop/openllmetry-js"
                  >https://github.com/traceloop/openllmetry-js</a
                >
              </p>
              <p>
                A few months ago we launched the python flavor here (<a
                  href="https://news.ycombinator.com/item?id=37843907"
                  >https://news.ycombinator.com/item?id=37843907</a
                >) and we've now built a compatible one for Node.js.
              </p>
              <p>Would love to hear your thoughts and opinions!</p>
              <p>Check it out -</p>
              <p>
                Docs:
                <a
                  href="https://www.traceloop.com/docs/openllmetry/getting-started-ts"
                  >https://www.traceloop.com/docs/openllmetry/getting-started-t...</a
                >
              </p>
              <p>
                Github:
                <a href="https://github.com/traceloop/openllmetry-js"
                  >https://github.com/traceloop/openllmetry-js</a
                >
                <a href="https://github.com/traceloop/openllmetry"
                  >https://github.com/traceloop/openllmetry</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39370681">
          <h3>
            <a
              class="item"
              href="https://www.cnn.com/2024/02/14/tech/billions-in-ai-patents-get-new-regulations/index.html"
              >Only real people can patent inventions – not AI, US Government
              says</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 15:14:01</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39370681"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39369653">
          <h3>
            <a
              class="item"
              href="https://www.eureporter.co/world/human-rights-category/european-court-of-human-rights-echr/2024/02/14/european-court-of-human-rights-bans-weakening-of-secure-end-to-endencryption-the-end-of-eus-chat-control-csar-mass-surveillance-plans/"
              >European Court of Human Rights bans weakening of secure
              end-to-end encryption</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 13:44:45</span
              ><span class="points-container"
                >Points: <span class="points">1270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39369653"
                  >Comments</a
                ><span class="descendants">: 182</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39368868">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/hubble/jobs/IZ0giSa-analytics-engineering-advocate"
              >Lightdash (YC S20) Is hiring an analytics engineering advocate</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 12:00:09</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39368859">
          <h3>
            <a
              class="item"
              href="https://openai.com/blog/disrupting-malicious-uses-of-ai-by-state-affiliated-threat-actors"
              >Disrupting malicious uses of AI by state-affiliated threat
              actors</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 11:58:05</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39368859"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39368776">
          <h3>
            <a
              class="item"
              href="http://schwitzsplinters.blogspot.com/2024/02/grade-inflation-at-uc-riverside-and.html"
              >Grade inflation at UC Riverside, and institutional pressures for
              easier grading</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 11:47:16</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39368776"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39367580">
          <h3>
            <a
              class="item"
              href="https://easyperf.net/blog/2024/02/12/Memory-Profiling-Part1"
              >Memory Profiling: Introduction</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 08:01:04</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39367580"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39367540">
          <h3>
            <a
              class="item"
              href="https://www.hezmatt.org/~mpalmer/blog/2024/02/13/not-all-tlds-are-created-equal.html"
              >Not all TLDs are Created Equal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 07:51:07</span
              ><span class="points-container"
                >Points: <span class="points">200</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39367540"
                  >Comments</a
                ><span class="descendants">: 253</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39366542">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/02/13/business/bob-moore-dead.html"
              >Bob Moore, who founded Bob's Red Mill, has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 04:38:29</span
              ><span class="points-container"
                >Points: <span class="points">243</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39366542"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39356259">
          <h3>
            <a
              class="item"
              href="https://www.koaa.com/news/news5-originals/the-last-linotype-newspaper-operating-the-saguache-crescent"
              >The Last Linotype Newspaper (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-13 @ 10:17:32</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39356259"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39344355">
          <h3>
            <a class="item" href="https://github.com/R-O-C-K-E-T/Factorio-SAT"
              >Enhancing Factorio with SAT solvers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-12 @ 13:09:47</span
              ><span class="points-container"
                >Points: <span class="points">307</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39344355"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
