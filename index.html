<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44004625">
          <h3>
            <a class="item" href="https://sci-hub.se/sci-net"
              >Sci-Hub Sci-Net</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 12:30:05</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44004625"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44004568">
          <h3>
            <a
              class="item"
              href="https://asteriskmag.substack.com/p/forecast-series-the-mortality-impacts"
              >The Mortality Impacts of Usaid Cuts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 12:23:12</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44004568"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44004388">
          <h3>
            <a
              class="item"
              href="https://virtualize.sh/blog/ground-control-to-major-trial/"
              >Ground control to Major Trial</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 12:03:07</span
              ><span class="points-container"
                >Points: <span class="points">264</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44004388"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44004362">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/dalus/jobs/oFjdHjD-founding-software-engineer-1"
              >Dalus (YC W25) is hiring a founding engineer for hardware system
              design software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 12:01:05</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44004250">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/news/668220/grok-white-genocide-south-africa-xai-unauthorized-modification-employee"
              >Grok's white genocide fixation caused by 'unauthorized
              modification'</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 11:50:46</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44004250"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44003741">
          <h3>
            <a class="item" href="https://github.com/ollama/ollama/issues/3185"
              >Ollama violating llama.cpp license for over a year</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 10:36:38</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44003741"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44003700">
          <h3>
            <a
              class="item"
              href="https://albertofortin.com/writing/coding-with-ai"
              >After months of coding with LLMs, I'm going back to using my
              brain</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 10:29:35</span
              ><span class="points-container"
                >Points: <span class="points">210</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44003700"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44003449">
          <h3>
            <a
              class="item"
              href="https://www.library.hbs.edu/working-knowledge/you-re-right-you-are-working-longer-and-attending-more-meetings"
              >You're Right You Are Working Longer and Attending More Meetings
              (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 09:43:17</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44003449"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44003447">
          <h3>
            <a
              class="item"
              href="https://daniel.haxx.se/blog/2025/05/16/leeks-and-leaks/"
              >Leeks and Leaks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 09:42:59</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44003447"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44003445">
          <h3>
            <a
              class="item"
              href="https://labs.quansight.org/blog/free-threaded-one-year-recap"
              >The first year of free-threaded Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 09:42:31</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44003445"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44003347">
          <h3>
            <a
              class="item"
              href="https://blog.fka.dev/blog/2025-05-16-beyond-text-only-ai-on-demand-ui-generation-for-better-conversational-experiences/"
              >Beyond Text: On-Demand UI Generation for Better Conversational
              Experiences</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 09:23:51</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44003347"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44002333">
          <h3>
            <a
              class="item"
              href="https://zverok.space/blog/2024-08-08-bmac-snafu.html"
              >BuyMeACoffee silently dropped support for many countries
              (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 06:23:05</span
              ><span class="points-container"
                >Points: <span class="points">254</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44002333"
                  >Comments</a
                ><span class="descendants">: 204</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44001765">
          <h3>
            <a
              class="item"
              href="https://faculty.georgetown.edu/jod/texts/twain.german.html"
              >The Awful German Language (1880)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 04:09:48</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44001765"
                  >Comments</a
                ><span class="descendants">: 287</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44001391">
          <h3>
            <a
              class="item"
              href="https://github.com/billorcutt/i_dropped_my_phone_the_screen_cracked"
              >Cracked - Method chaining/CSS-style selector web audio library</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 02:46:18</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44001391"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44001087">
          <h3>
            <a class="item" href="https://ollama.com/blog/multimodal-models"
              >Ollama's new engine for multimodal models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 01:43:27</span
              ><span class="points-container"
                >Points: <span class="points">263</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44001087"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44000759">
          <h3>
            <a class="item" href="https://teal-language.org/"
              >Teal – A statically-typed dialect of Lua</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 00:40:35</span
              ><span class="points-container"
                >Points: <span class="points">173</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44000759"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43999748">
          <h3>
            <a
              class="item"
              href="https://hueffner.de/falk/blog/a-leap-year-check-in-three-instructions.html"
              >A leap year check in three instructions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 21:57:19</span
              ><span class="points-container"
                >Points: <span class="points">374</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43999748"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43999492">
          <h3>
            <a
              class="item"
              href="https://blog.tartanllama.xyz/initialization-is-bonkers/"
              >Initialization in C++ is bonkers (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 21:27:10</span
              ><span class="points-container"
                >Points: <span class="points">176</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43999492"
                  >Comments</a
                ><span class="descendants">: 177</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43998472">
          <h3>
            <a class="item" href="https://sketch.dev/blog/agent-loop"
              >The unreasonable effectiveness of an LLM agent loop with tool
              use</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 19:33:44</span
              ><span class="points-container"
                >Points: <span class="points">392</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43998472"
                  >Comments</a
                ><span class="descendants">: 259</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43998049">
          <h3>
            <a
              class="item"
              href="https://windsurf.com/blog/windsurf-wave-9-swe-1"
              >Windsurf SWE-1: Our First Frontier Models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 18:47:55</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43998049"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43997636">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/05/15/health/gene-editing-personalized-rare-disorders.html"
              >Baby is healed with first personalized gene-editing treatment</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 18:06:06</span
              ><span class="points-container"
                >Points: <span class="points">1014</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43997636"
                  >Comments</a
                ><span class="descendants">: 422</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43996555">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43996555"
              >Launch HN: Tinfoil (YC X25): Verifiable Privacy for Cloud AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 16:19:00</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43996555"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
            <div class="text">
              <a href="https://tinfoil.sh">https://tinfoil.sh</a>. We host
              models and AI workloads on the cloud while guaranteeing zero data
              access and retention. This lets us run open-source LLMs like
              Llama, or Deepseek R1 on cloud GPUs without you having to trust
              us—or any cloud provider—with private data.
              <p>
                Since AI performs better the more context you give it, we think
                solving AI privacy will unlock more valuable AI applications,
                just how TLS on the Internet enabled e-commerce to flourish
                knowing that your credit card info wouldn't be stolen by someone
                sniffing internet packets.
              </p>
              <p>
                We come from backgrounds in cryptography, security, and
                infrastructure. Jules did his PhD in trusted hardware and
                confidential computing at MIT, and worked with NVIDIA and
                Microsoft Research on the same, Sacha did his PhD in
                privacy-preserving cryptography at MIT, Nate worked on privacy
                tech like Tor, and I (Tanya) was on Cloudflare's cryptography
                team. We were unsatisfied with band-aid techniques like PII
                redaction (which is actually undesirable in some cases like AI
                personal assistants) or “pinky promise” security through legal
                contracts like DPAs. We wanted a real solution that replaced
                trust with provable security.
              </p>
              <p>
                Running models locally or on-prem is an option, but can be
                expensive and inconvenient. Fully Homomorphic Encryption (FHE)
                is not practical for LLM inference for the foreseeable future.
                The next best option is using secure enclaves: a secure
                environment on the chip that no other software running on the
                host machine can access. This lets us perform LLM inference in
                the cloud while being able to prove that no one, not even
                Tinfoil or the cloud provider, can access the data. And because
                these security mechanisms are implemented in hardware, there is
                minimal performance overhead.
              </p>
              <p>
                Even though we (Tinfoil) control the host machine, we do not
                have any visibility into the data processed inside of the
                enclave. At a high level, a secure enclave is a set of cores
                that are reserved, isolated, and locked down to create a
                sectioned off area. Everything that comes out of the enclave is
                encrypted: memory and network traffic, but also peripheral
                (PCIe) traffic to other devices such as the GPU. These
                encryptions are performed using secret keys that are generated
                inside the enclave during setup, which never leave its
                boundaries. Additionally, a “hardware root of trust” baked into
                the chip lets clients check security claims and verify that all
                security mechanisms are in place.
              </p>
              <p>
                Up until recently, secure enclaves were only available on CPUs.
                But NVIDIA confidential computing recently added these
                hardware-based capabilities to their latest GPUs, making it
                possible to run GPU-based workloads in a secure enclave.
              </p>
              <p>Here’s how it works in a nutshell:</p>
              <p>
                1. We publish the code that should run inside the secure enclave
                to Github, as well as a hash of the compiled binary to a
                transparency log called Sigstore
              </p>
              <p>
                2. Before sending data to the enclave, the client fetches a
                signed document from the enclave which includes a hash of the
                running code signed by the CPU manufacturer. It then verifies
                the signature with the hardware manufacturer to prove the
                hardware is genuine. Then the client fetches a hash of the
                source code from a transparency log (Sigstore) and checks that
                the hash equals the one we got from the enclave. This lets the
                client get verifiable proof that the enclave is running the
                exact code we claim.
              </p>
              <p>
                3. With the assurance that the enclave environment is what we
                expect, the client sends its data to the enclave, which travels
                encrypted (TLS) and is only decrypted inside the enclave.
              </p>
              <p>
                4. Processing happens entirely within this protected
                environment. Even an attacker that controls the host machine
                can’t access this data. We believe making end-to-end
                verifiability a “first class citizen” is key. Secure enclaves
                have traditionally been used to remove trust from the cloud
                provider, not necessarily from the application provider. This is
                evidenced by confidential VM technologies such as Azure
                Confidential VM allowing ssh access by the host into the
                confidential VM. Our goal is to provably remove trust both from
                ourselves, aka the application provider, as well as the cloud
                provider.
              </p>
              <p>
                We encourage you to be skeptical of our privacy claims.
                Verifiability is our answer. It’s not just us saying it’s
                private; the hardware and cryptography let you check. Here’s a
                guide that walks you through the verification process:
                <a
                  href="https://docs.tinfoil.sh/verification/attestation-architecture"
                  >https://docs.tinfoil.sh/verification/attestation-architectur...</a
                >.
              </p>
              <p>
                People are using us for analyzing sensitive docs, building
                copilots for proprietary code, and processing user data in
                agentic AI applications without the privacy risks that
                previously blocked cloud AI adoption.
              </p>
              <p>We’re excited to share Tinfoil with HN!</p>
              <p>
                * Try the chat (<a href="https://tinfoil.sh/chat"
                  >https://tinfoil.sh/chat</a
                >): It verifies attestation with an in-browser check. Free,
                limited messages, $20/month for unlimited messages and
                additional models
              </p>
              <p>
                * Use the API (<a href="https://tinfoil.sh/inference"
                  >https://tinfoil.sh/inference</a
                >): OpenAI API compatible interface. $2 / 1M tokens
              </p>
              <p>
                * Take your existing Docker image and make it end to end
                confidential by deploying on Tinfoil. Here's a demo of how you
                could use Tinfoil to run a deepfake detection service that could
                run securely on people's private videos:
                <a href="https://www.youtube.com/watch?v=_8hLmqoutyk"
                  >https://www.youtube.com/watch?v=_8hLmqoutyk</a
                >. Note: This feature is not currently self-serve.
              </p>
              <p>
                * Reach out to us at contact@tinfoil.sh if you want to run a
                different model or want to deploy a custom application, or if
                you just want to learn more!
              </p>
              <p>
                Let us know what you think, we’d love to hear about your
                experiences and ideas in this space!
              </p>
            </div>
          </section>
        </section>
        <section id="43996307">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2025/05/15/coinbase-says-hackers-bribed-staff-to-steal-customer-data-and-are-demanding-20-million-ransom.html"
              >Coinbase says hackers bribed staff to steal customer data,
              demanding $20M ransom</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 15:52:21</span
              ><span class="points-container"
                >Points: <span class="points">365</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43996307"
                  >Comments</a
                ><span class="descendants">: 447</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43975352">
          <h3>
            <a
              class="item"
              href="https://design.google/library/expressive-material-design-google-research"
              >Material 3 Expressive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 17:20:11</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43975352"
                  >Comments</a
                ><span class="descendants">: 196</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43974872">
          <h3>
            <a class="item" href="https://yeet.cx/blog/lock-free-rust/"
              >Lock-Free Rust: How to Build a Rollercoaster While It's on
              Fire</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 16:43:04</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43974872"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43974599">
          <h3>
            <a
              class="item"
              href="https://onlinelibrary.wiley.com/doi/10.1002/cey2.650"
              >Thermoelectric generator based on a robust carbon nanotube/BiSbTe
              foam</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 16:20:13</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43974599"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43974461">
          <h3>
            <a
              class="item"
              href="https://yucatanmagazine.com/mayan-language-renaissance/"
              >Náhuatl and Mayan Language Renaissance Occurring in Mexico</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 16:08:00</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43974461"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43973677">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/zinc-microcapacitor"
              >Zinc Microcapacitors Are the Best of Both Worlds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 14:57:57</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43973677"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43971616">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/oldnewthing/20250507-00/?p=111157"
              >What were the MS-DOS programs that the moricons.dll icons were
              intended for?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 11:06:58</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43971616"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43968693">
          <h3>
            <a
              class="item"
              href="https://beesbuzz.biz/blog/14719-Comma-3X-Initial-impressions"
              >Comma 3X: Initial Impressions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 00:26:07</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43968693"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
