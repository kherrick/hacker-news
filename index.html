<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46092688">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46092688"
              >Tell HN: Regrets. Think carefully about how you spend your
              time</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-30 @ 01:33:27</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46092688"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
            <div class="text">
              <p>
                1. A small number of accomplishments really mean something, but
                you often won't know which ones. I started three companies and
                two were successes, and even though they comprised more than two
                decades of my life, I feel like I remember a grand total of six
                important hours between them. Meanwhile, I still remember the
                shed I built for my father in the first summer after college.
                Whatever seems unimportant, you will care about the most.
              </p>
              <p>
                2. The thing you do today, you will probably do tomorrow. I've
                wasted a lot of time, but most people I know have wasted lots of
                time, and it's because of the tendency to make an exception of
                the present day, which either excuses laziness or pathological
                busyness, which is a form of the same thing. "I'll do it
                tomorrow." But tomorrow it will be today. It's always today.
              </p>
              <p>
                3. Ethics matter. I don't believe there's any life after this
                one, but I find myself ruminating on what I've done. In 2015, I
                had a lot of interaction with a startup incubator you know well,
                and ended up sitting in the discussions and planning around
                banning and erasing a young programmer we considered a threat to
                our financial interests, due to his concerns about
                authoritarianism in technology. In retrospect, he was harmless,
                but an example had to be made. The decision was made to ban him
                here, try to get him fired though I don't know if we succeeded,
                and attack him with sockpuppets on Reddit, and it seems to have
                worked because you don't hear his name much.
              </p>
              <p>
                Ten years later, I'm still stuck thinking about this. Am I the
                kind of person who does shitty things? I was. Am I still? How
                would I even know?
              </p>
              <p>
                I don't believe that faith is an out, or that you can apologize
                or donate your way out of past behaviors. You will always be the
                person who has done what you have done.
              </p>
              <p>
                4. Be kind to animals. There are few joys like having a dog. I
                always refused when my ex-wife wanted one, and she got one after
                we separated. For her, it was probably an upgrade.
              </p>
              <p>
                5. I developed a knack for founding companies, but I never
                learned how to build communities. They aren't the same thing.
                You might have three hundred people at your company and you
                truly feel like they are your village, but they're not.
                Circumstances will change, and people will move, and in five
                years, most of them will not remember your name.
              </p>
              <p>
                That's probably enough for now. My mind goes between periods of
                racing and long spells of languid acceptance. All humans end up
                in the place where I am, and I hope you reach it with fewer
                regrets than I have.
              </p>
            </div>
          </section>
        </section>
        <section id="46092630">
          <h3>
            <a
              class="item"
              href="https://evanhahn.com/stopping-bad-guys-from-using-my-open-source-project/"
              >Stopping bad guys from using my open source project (feedback
              wanted)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-30 @ 01:25:43</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46092630"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46092558">
          <h3><a class="item" href="https://meshtastic.org/">Meshtastic</a></h3>
          <section>
            <h4>
              <span>2025-11-30 @ 01:15:59</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46092558"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46092478">
          <h3>
            <a
              class="item"
              href="https://www.lepetitprince.com/en/events-around-the-world/a-new-little-prince-museum-has-opened-its-doors-in-switzerland/"
              >A new Little Prince museum has opened its doors in Switzerland</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-30 @ 01:03:44</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46092478"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46092000">
          <h3>
            <a class="item" href="https://www.huygens-fokker.org/scala/"
              >Scala</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 23:51:21</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46092000"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46091362">
          <h3>
            <a class="item" href="https://bazzite.gg/"
              >Bazzite: The next generation of Linux gaming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 22:22:24</span
              ><span class="points-container"
                >Points: <span class="points">250</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46091362"
                  >Comments</a
                ><span class="descendants">: 148</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46090969">
          <h3>
            <a class="item" href="https://blog.prizrak.me/post/landlock/"
              >Landlock-Ing Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 21:30:53</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46090969"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46090619">
          <h3>
            <a class="item" href="https://github.com/gavrielc/Nano-PDF"
              >Show HN: Nano PDF – A CLI Tool to Edit PDFs with Gemini's Nano
              Banana</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 20:44:24</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46090619"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>Examples:</p>
              <p>
                - `nano-pdf edit deck.pdf 5 "Update the revenue chart to show Q3
                at $2.5M"`
              </p>
              <p>
                - `nano-pdf add deck.pdf 15 "Create an executive summary slide
                with 5 bullet points"`
              </p>
              <p>Features:</p>
              <p>- Edit multiple pages in parallel</p>
              <p>- Add entirely new slides that match your deck's style</p>
              <p>
                - Google Search enabled by default so the model can look up
                current data
              </p>
              <p>- Preserves text layer for copy/paste and search</p>
              <p>
                It can work with any kind of PDF but I expect it would be most
                useful for a quick edit to a deck or something similar.
              </p>
              <p>
                GitHub:
                <a href="https://github.com/gavrielc/Nano-PDF"
                  >https://github.com/gavrielc/Nano-PDF</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46090433">
          <h3>
            <a
              class="item"
              href="https://alearningaday.blog/2025/11/28/all-it-takes-is-for-one-to-work-out-2/"
              >All it takes is for one to work out</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 20:22:44</span
              ><span class="points-container"
                >Points: <span class="points">379</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46090433"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46090294">
          <h3>
            <a
              class="item"
              href="https://www.artima.com/articles/the-origins-of-scala"
              >The Origins of Scala (2009)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 19:59:12</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46090294"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46090269">
          <h3>
            <a class="item" href="https://zackyzz.github.io/feynman.html"
              >Learning Feynman's Trick for Integrals</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 19:55:17</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46090269"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46090172">
          <h3>
            <a class="item" href="https://be-clippy.com/">Be Like Clippy</a>
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 19:41:55</span
              ><span class="points-container"
                >Points: <span class="points">239</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46090172"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46089546">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2507.22900"
              >Student perceptions of AI coding assistants in learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 18:14:21</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46089546"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46089394">
          <h3>
            <a
              class="item"
              href="https://www.johndcook.com/blog/2025/11/29/zkp-composite/"
              >Zero knowlege proof of compositeness</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 17:53:57</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46089394"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46089008">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/accessowl/jobs/dGC3pcO-technical-account-manager-identity-access-management"
              >AccessOwl (YC S22) Is Hiring a Technical Account Manager (IAM)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 17:00:23</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46088379">
          <h3>
            <a
              class="item"
              href="https://www.core77.com/posts/138925/Testing-Shows-Automotive-Glassbreakers-Cant-Break-Modern-Automotive-Glass"
              >Testing shows automotive glassbreakers can't break modern
              automotive glass</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 15:43:58</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46088379"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46087616">
          <h3>
            <a
              class="item"
              href="https://taranis.ie/datacenters-in-space-are-a-terrible-horrible-no-good-idea/"
              >Datacenters in space aren't going to work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 14:05:53</span
              ><span class="points-container"
                >Points: <span class="points">172</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46087616"
                  >Comments</a
                ><span class="descendants">: 160</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46087022">
          <h3>
            <a
              class="item"
              href="https://www.iankduncan.com/engineering/2025-11-27-crdt-dictionary/"
              >The CRDT Dictionary: A Field Guide to Conflict-Free Replicated
              Data Types</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 12:25:35</span
              ><span class="points-container"
                >Points: <span class="points">166</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46087022"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46086771">
          <h3>
            <a
              class="item"
              href="https://www.bleepingcomputer.com/news/artificial-intelligence/leak-confirms-openai-is-preparing-ads-on-chatgpt-for-public-roll-out/"
              >Leak confirms OpenAI is preparing ads on ChatGPT for public roll
              out</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 11:31:58</span
              ><span class="points-container"
                >Points: <span class="points">542</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46086771"
                  >Comments</a
                ><span class="descendants">: 520</span></span
              >
            </h4>
            <div class="text">
              <a href="https://x.com/btibor91/status/1994714152636690834"
                >https://x.com/btibor91/status/1994714152636690834</a
              >
              <p>
                <a
                  href="https://xcancel.com/btibor91/status/1994714152636690834"
                  >https://xcancel.com/btibor91/status/1994714152636690834</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46078684">
          <h3>
            <a class="item" href="https://far.computer/battery-update/"
              >An update on the Farphone's battery</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-28 @ 13:57:43</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46078684"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46071221">
          <h3>
            <a
              class="item"
              href="https://github.com/shun126/livelinkface_arkit_receiver/wiki"
              >Blender facial animation tool. What else should it do?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-27 @ 17:13:51</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46071221"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46060432">
          <h3>
            <a
              class="item"
              href="https://www.empa.ch/web/s604/eureca-satellit-mit-roentgenmethoden-untersucht"
              >Rare X-ray images of a 4.5-ton satellite that returned intact
              from space</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-26 @ 18:02:45</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46060432"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46057141">
          <h3>
            <a
              class="item"
              href="https://posthog.com/blog/nov-24-shai-hulud-attack-post-mortem"
              >Post-mortem of Shai-Hulud attack on November 24th, 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-26 @ 13:22:46</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46057141"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46056954">
          <h3>
            <a
              class="item"
              href="https://www.ietf.org/archive/id/draft-ietf-httpbis-safe-method-w-body-14.html"
              >The HTTP Query Method</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-26 @ 12:57:35</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46056954"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46054879">
          <h3>
            <a class="item" href="https://bourdain.greg.technology/"
              >Anthony Bourdain's Lost Li.st's</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-26 @ 07:03:27</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46054879"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
            <div class="text">
              I read through the years about Bourdain's content on the defunct
              li.st service, but was never able to find an archive of it. A more
              thorough perusing of archive.org and a pointer from an Internet
              stranger led me to create this site. Cheers
            </div>
          </section>
        </section>
        <section id="46050302">
          <h3>
            <a
              class="item"
              href="https://emudev.org/docs/1964-recompiling-engine-documentation.pdf"
              >1964 Recompiling Engine Documentation (2001) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-25 @ 20:24:12</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46050302"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46033872">
          <h3>
            <a
              class="item"
              href="https://aschrein.github.io/jekyll/update/2025/11/23/generating_cats2.html"
              >Generating Cats with learned lookup tables</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 13:27:46</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46033872"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46032074">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46032074"
              >Show HN: Network Monitor – a GUI to spot anomalous connections on
              your Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-24 @ 09:30:40</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46032074"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/grigio/network-monitor"
                >https://github.com/grigio/network-monitor</a
              >
            </div>
          </section>
        </section>
        <section id="46020730">
          <h3>
            <a class="item" href="https://queue.acm.org/detail.cfm?id=3773097"
              >Hardening the C++ Standard Library at scale</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-23 @ 04:22:41</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46020730"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46006323">
          <h3>
            <a
              class="item"
              href="https://archaeologymag.com/2025/11/bronze-age-mega-settlement-in-kazakhstan/"
              >Bronze Age mega-settlement in Kazakhstan has advanced urban
              planning, metallurgy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-21 @ 17:06:21</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46006323"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
