<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43851225">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2025-04-home-machines-important-pathogens-textiles.html"
              >Home washing machines fail to remove important pathogens from
              textiles</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 22:04:41</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43851225"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43851099">
          <h3>
            <a
              class="item"
              href="https://www.inceptionlabs.ai/introducing-mercury"
              >Mercury, the first commercial-scale diffusion language model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 21:51:10</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43851099"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43850398">
          <h3>
            <a class="item" href="https://adam-p.ca/blog/2025/04/string-length/"
              >The best – but not good – way to limit string length</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 20:37:49</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43850398"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43850377">
          <h3>
            <a
              class="item"
              href="https://devclass.com/2025/04/30/jetbrains-defends-removal-of-negative-reviews-for-unpopular-ai-assistant/"
              >JetBrains defends removal of negative reviews for unpopular AI
              Assistant</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 20:36:37</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43850377"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43850238">
          <h3>
            <a class="item" href="https://chipsandcheese.com/p/zhaoxins-kx-7000"
              >Zhaoxin's KX-7000</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 20:23:33</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43850238"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43849791">
          <h3>
            <a
              class="item"
              href="https://qns.com/2025/04/home-prices-rise-early-2025-malba-highest-queens/"
              >NYC home prices rise 10% in early 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 19:43:55</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43849791"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43849383">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2025/04/29/google-play-sees-47-decline-in-apps-since-start-of-last-year/"
              >Google Play sees 47% decline in apps since start of last year</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 19:03:49</span
              ><span class="points-container"
                >Points: <span class="points">189</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43849383"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43849373">
          <h3>
            <a class="item" href="https://hoefler.dev/articles/vsock.html"
              >Linux Kernel Exploitation: Attack of the Vsock</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 19:03:04</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43849373"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43849271">
          <h3>
            <a class="item" href="https://osuosl.org/blog/osl-future/"
              >Future of OSU Open Source Lab in Jeopardy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 18:51:52</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43849271"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43848398">
          <h3>
            <a
              class="item"
              href="https://tennysontbardwell.com/blog/2025/04/30/mechanical-computing/index.html"
              >Reversible computing with mechanical links and pivots</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 17:35:08</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43848398"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43848325">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/google-labs/notebooklm-audio-overviews-50-languages/"
              >NotebookLM Audio Overviews are now available in over 50
              languages</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 17:28:38</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43848325"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43848007">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43848007"
              >Archil (YC F24) Is Hiring a Distributed Systems Engineer
              (In-Person, SF)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 17:01:05</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=42174204"
                >https://news.ycombinator.com/item?id=42174204</a
              >), and you can see a demo of our product here (<a
                href="https://archil.com/"
                >https://archil.com/</a
              >).
              <p>
                Now, we’re looking to grow the team to keep up with customer
                demand! We’re looking for a Distributed Systems Engineer, who
                will be focused on helping us build scalable, distributed
                systems in the cloud. Notably, you don’t need prior experience
                in the storage space, just experience (~2-5 years) building,
                scaling, and operating backend software. Ideally, you’ve worked
                at a high-growth startup in the past. Most importantly, you’re
                someone who understands how computers work from the ground up
                (from CPUs, to the Linux kernel, to the TCP stack, to
                distributed consensus). Our stack is primarily written in Rust
                (for the stuff that’s important), Go (for the stuff that needs
                to be written fast), and React/Next.js (for the small number of
                things that people look at).
              </p>
              <p>
                We raised a successful round after YC, we’re here to stay, and
                we think that there’s immense opportunity in this space (that’s
                only growing with large AI models, data sets, and agents taking
                over). We’re a team of 4 today, with backgrounds in storage
                infra (at AWS) and AI. If you’re a builder who’s looking to
                build the next foundation of cloud computing, we’d love to have
                you join us. Send us a note if you’re interested here:
                <a
                  href="https://www.ycombinator.com/companies/archil/jobs/svfkDVv-founding-distributed-systems-engineer"
                  >https://www.ycombinator.com/companies/archil/jobs/svfkDVv-fo...</a
                >
              </p>
              <p>
                [1] Local to your cloud instances, that is, not your laptop.
              </p>
            </div>
          </section>
        </section>
        <section id="43847432">
          <h3>
            <a
              class="item"
              href="https://github.com/deepseek-ai/DeepSeek-Prover-V2"
              >DeepSeek-Prover-V2</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 16:23:28</span
              ><span class="points-container"
                >Points: <span class="points">264</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43847432"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43846964">
          <h3>
            <a class="item" href="https://promptrepo.com/finetune/"
              >Show HN: Create your own finetuned AI model using Google
              Sheets</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 15:53:36</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43846964"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              <p>
                We built Promptrepo to make finetuning accessible to product
                teams — not just ML engineers. Last week, OpenAI’s CPO shared
                how they use fine-tuning for everything from customer support to
                deep research, and called it the future for serious AI teams.
                Yet most teams I know still rely on prompting, because
                fine-tuning is too technical, while the people who have the
                training data (product managers and domain experts) are often
                non-technical. With Promptrepo, they can now:
              </p>
              <p>- Add training examples in Google Sheets</p>
              <p>- Click a button to train</p>
              <p>- Deploy and test instantly</p>
              <p>- Use OpenAI, Claude, Gemini or Llama models</p>
              <p>
                We’ve used this internally for years to power AI workflows in
                our products (Formfacade, Formesign, Neartail), and we're now
                opening it up to others. Would love your feedback and happy to
                answer any questions!
              </p>
              <p>---</p>
              <p>
                Try it free -
                <a href="https://promptrepo.com/finetune"
                  >https://promptrepo.com/finetune</a
                >
              </p>
              <p>
                Demo video -
                <a href="https://www.youtube.com/watch?v=e1CTin1bD0w"
                  >https://www.youtube.com/watch?v=e1CTin1bD0w</a
                >
              </p>
              <p>
                Why we built it -
                <a
                  href="https://guesswork.co/support/post/fine-tuning-is-the-future-and-now-its-within-every.anc-ddfd2598-5798-423d-b6ec-e7d84e98847a.html"
                  >https://guesswork.co/support/post/fine-tuning-is-the-future-...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43846690">
          <h3>
            <a class="item" href="https://github.com/OpenPipe/ART"
              >Show HN: ART – a new open-source RL framework for training
              agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 15:35:00</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43846690"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/OpenPipe/ART"
                >https://github.com/OpenPipe/ART</a
              >).
              <p>
                ART is a new open-source framework for training agents using
                reinforcement learning (RL). RL allows you to train an agent to
                perform better at any task whose outcome can be measured and
                quantified.
              </p>
              <p>
                There are many excellent projects focused on training LLMs with
                RL, such as GRPOTrainer (<a
                  href="https://huggingface.co/docs/trl/main/en/grpo_trainer"
                  >https://huggingface.co/docs/trl/main/en/grpo_trainer</a
                >) and verl (<a href="https://github.com/volcengine/verl"
                  >https://github.com/volcengine/verl</a
                >). We've used these frameworks extensively for customer-facing
                projects at OpenPipe, but grew frustrated with some key
                limitations:
              </p>
              <p>
                - Multi-turn workflows, where the agent calls a tool, gets a
                response, and calls another, are not well supported. This makes
                them a non-starter for any task that requires an agent to
                perform a sequence of actions.
              </p>
              <p>
                - Other frameworks typically have low GPU efficiency. They may
                require multiple H100 GPUs just to train a small 7B parameter
                model, and aren't able to keep the GPUs busy consistently during
                both the "rollout" and "training" phases of the training loop.
              </p>
              <p>
                - Existing frameworks are typically not a convenient shape for
                integrating with existing agentic codebases. Existing trainers
                expect you to call raw text completion endpoints, and don't
                automatically provide industry-standard chat completion APIs.
              </p>
              <p>
                ART is designed to address these limitations and make it easy to
                train high-quality agents. We've also shared many details and
                practical lessons learned is in this post, which walks through a
                demo of training an email research agent that outperforms o3 (<a
                  href="https://openpipe.ai/blog/art-e-mail-agent"
                  >https://openpipe.ai/blog/art-e-mail-agent</a
                >). You can also find out more about ART's architecture in our
                announcement post (<a
                  href="https://openpipe.ai/blog/art-trainer-a-new-rl-trainer-for-agents"
                  >https://openpipe.ai/blog/art-trainer-a-new-rl-trainer-for-ag...</a
                >).
              </p>
              <p>Happy to answer any questions you have!</p>
            </div>
          </section>
        </section>
        <section id="43846487">
          <h3>
            <a
              class="item"
              href="https://jayd.ml/2025/04/30/someone-at-youtube-needs-glasses.html"
              >Someone at YouTube needs glasses</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 15:18:47</span
              ><span class="points-container"
                >Points: <span class="points">891</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43846487"
                  >Comments</a
                ><span class="descendants">: 502</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43846187">
          <h3>
            <a class="item" href="https://akapugs.blog/2022/05/03/674/"
              >Joining Sun Microsystems – 40 years ago (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 14:57:31</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43846187"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43844708">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2025/04/29/port-of-los-angeles-sees-shipping-volume-down-35percent-next-week-as-tariffs-bite.html"
              >Port of Los Angeles says shipping volume will plummet 35% next
              week</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 13:07:45</span
              ><span class="points-container"
                >Points: <span class="points">625</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43844708"
                  >Comments</a
                ><span class="descendants">: 539</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43844665">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43844665"
              >Show HN: Kexa.io – Open-Source IT Security and Compliance
              Verification</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 13:04:04</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43844665"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <p>
                We're building Kexa.io (<a
                  href="https://github.com/kexa-io/Kexa"
                  >https://github.com/kexa-io/Kexa</a
                >), an open-source tool developed in France (incubated at
                Euratech Cyber Campus) to help teams automate the often tedious
                process of verifying IT security and compliance. Keeping track
                of configurations across diverse assets (servers, K8s, cloud
                resources) and ensuring they meet security baselines (like CIS
                benchmarks, etc.) manually is challenging and error-prone.
              </p>
              <p>
                Our goal with the open-source core is to provide a
                straightforward way to define checks, scan your assets, and get
                clear reports on your security posture. You can define your own
                rules or use common standards.
              </p>
              <p>
                We are now actively developing our SaaS offering, planned for a
                beta release around June 2025. The key feature will be an
                AI-powered security administration agent specifically designed
                for cloud environments (initially targeting AWS, GCP, Azure).
                Instead of just reporting issues, this agent will aim to provide
                proactive, actionable recommendations and potentially automate
                certain remediation tasks to simplify cloud security management
                and hardening.
              </p>
              <p>
                We'd love for the HN community to check out the open-source
                project on GitHub. Feedback on the concept or the current tool
                is highly welcome, and a star if you find it interesting helps
                others discover the project! If the upcoming AI-powered cloud
                security agent sounds interesting, we'd be particularly keen to
                hear your thoughts or if you might be interested in joining the
                beta (~June 2025).
              </p>
              <p>thank you !!</p>
            </div>
          </section>
        </section>
        <section id="43844279">
          <h3>
            <a class="item" href="https://github.com/raven-ml/raven"
              >OCaml's Wings for Machine Learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 12:31:47</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43844279"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43843821">
          <h3>
            <a
              class="item"
              href="https://fortune.com/article/retailers-weeks-of-inventory-left-trump-china-trade-war/"
              >Retailers will soon have only about 7 weeks of full inventories
              left</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 11:42:06</span
              ><span class="points-container"
                >Points: <span class="points">389</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43843821"
                  >Comments</a
                ><span class="descendants">: 609</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43842683">
          <h3>
            <a class="item" href="https://github.com/XiaomiMiMo/MiMo"
              >Xiaomi MiMo Reasoning Model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 08:48:20</span
              ><span class="points-container"
                >Points: <span class="points">382</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43842683"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43842380">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2504.20879"
              >The Leaderboard Illusion</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 07:58:24</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43842380"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43842306">
          <h3>
            <a class="item" href="https://habr.com/en/articles/905812/"
              >I created Perfect Wiki and reached $250k in annual revenue
              without investors</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 07:45:51</span
              ><span class="points-container"
                >Points: <span class="points">526</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43842306"
                  >Comments</a
                ><span class="descendants">: 299</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43840842">
          <h3>
            <a
              class="item"
              href="https://openai.com/index/sycophancy-in-gpt-4o/"
              >Sycophancy in GPT-4o</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 03:06:26</span
              ><span class="points-container"
                >Points: <span class="points">462</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43840842"
                  >Comments</a
                ><span class="descendants">: 379</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43840193">
          <h3>
            <a class="item" href="https://www.jasonthorsness.com/25"
              >You Wouldn't Download a Hacker News</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 01:26:31</span
              ><span class="points-container"
                >Points: <span class="points">348</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43840193"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43833195">
          <h3>
            <a
              class="item"
              href="https://jepsen.io/analyses/amazon-rds-for-postgresql-17.4"
              >Jepsen: Amazon RDS for PostgreSQL 17.4</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 14:30:11</span
              ><span class="points-container"
                >Points: <span class="points">560</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43833195"
                  >Comments</a
                ><span class="descendants">: 135</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831792">
          <h3>
            <a
              class="item"
              href="https://www.nist.gov/news-events/news/2025/04/new-atomic-fountain-clock-joins-elite-group-keeps-world-time"
              >New atomic fountain clock joins group that keeps the world on
              time</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 12:39:31</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831792"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831708">
          <h3>
            <a
              class="item"
              href="https://physics.stackexchange.com/questions/848666/what-is-induced-atmospheric-vibration"
              >What Is "Induced Atmospheric Vibration"?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 12:30:00</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831708"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43804561">
          <h3>
            <a class="item" href="https://thetruesize.com/">The True Size Of</a>
          </h3>
          <section>
            <h4>
              <span>2025-04-26 @ 15:41:44</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43804561"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
