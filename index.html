<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46611823">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/1000_Blank_White_Cards"
              >1000 Blank White Cards</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 03:08:37</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46611823"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46611667">
          <h3>
            <a class="item" href="https://gleam.run/"
              >The Gleam Programming Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 02:49:25</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46611667"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46611550">
          <h3>
            <a class="item" href="https://tidepool.leaflet.pub/3mcbegnuf2k2i"
              >Stop using natural language interfaces</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 02:29:08</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46611550"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46611548">
          <h3>
            <a class="item" href="https://github.com/OxidizeLabs/cachekit"
              >Show HN: Cachekit – High performance caching policies library in
              Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 02:28:52</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46611548"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46611507">
          <h3>
            <a class="item" href="https://caidan.dev/portfolio/ascii_clouds/"
              >ASCII Clouds</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 02:20:42</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46611507"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46611348">
          <h3>
            <a class="item" href="https://epstein.trynia.ai/"
              >Show HN: OSS AI agent that indexes and searches the Epstein
              files</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 01:56:52</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46611348"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built an open-source AI agent that has already indexed and can
                search the entire Epstein files, roughly 100M words of publicly
                released documents.
              </p>
              <p>
                The goal was simple: make a large, messy corpus of PDFs and text
                files immediately searchable in a precise way, without relying
                on keyword search or bloated prompts.
              </p>
              <p>What it does:</p>
              <p>
                - The full dataset is already indexed - You can ask natural
                language questions - Answers are grounded and include direct
                references to source documents - Supports both exact text lookup
                and semantic search
              </p>
              <p>
                Discussion around these files is often fragmented. This makes it
                possible to explore the primary sources directly and verify
                claims without manually digging through thousands of pages.
              </p>
              <p>Happy to answer questions or go into technical details.</p>
              <p>
                Code:
                <a href="https://github.com/nozomio-labs/nia-epstein-ai"
                  >https://github.com/nozomio-labs/nia-epstein-ai</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46611063">
          <h3>
            <a class="item" href="https://exa.ai/blog/exa-d"
              >Exa-d: How to store the web in S3</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 01:13:59</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46611063"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              exa-d is our internal data processing framework that stores the
              web in S3. It helps deal with the complexity of data at (web)
              scale using specific design decisions like declarative typed
              dependencies and enabling sparse updates.
            </div>
          </section>
        </section>
        <section id="46610967">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/sei/jobs/Rn0KPXR-devops-platform-ai-infrastructure-engineer"
              >Sei (YC W22) Is Hiring a DevOps Engineer
              (India/In-Office/Chennai/Gurgaon)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 01:01:12</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46610557">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46610557"
              >The $LANG Programming Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-14 @ 00:17:19</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46610557"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=46608577"
                >https://news.ycombinator.com/item?id=46608577</a
              >. It occurred to me that HN has a tradition of posts called "The
              {name} programming language" (part of the long tradition of papers
              and books with such titles) and it might be fun to track them
              down. I tried to keep only the interesting ones:
              <p>
                <a href="https://news.ycombinator.com/thelang"
                  >https://news.ycombinator.com/thelang</a
                >
              </p>
              <p>
                Similarly, Show HNs of programming languages are at
                <a href="https://news.ycombinator.com/showlang"
                  >https://news.ycombinator.com/showlang</a
                >.
              </p>
              <p>
                These are curated lists so they're frozen in time. Maybe we can
                figure out how to update them.
              </p>
              <p>A few famous cases:</p>
              <p>
                <i>The Go Programming Language</i> -
                <a href="https://news.ycombinator.com/item?id=934142"
                  >https://news.ycombinator.com/item?id=934142</a
                >
                - Nov 2009 (219 comments)
              </p>
              <p>
                <i>The Rust programming language</i> -
                <a href="https://news.ycombinator.com/item?id=1498528"
                  >https://news.ycombinator.com/item?id=1498528</a
                >
                - July 2010 (44 comments)
              </p>
              <p>
                <i>The Julia Programming Language</i> -
                <a href="https://news.ycombinator.com/item?id=3606380"
                  >https://news.ycombinator.com/item?id=3606380</a
                >
                - Feb 2012 (203 comments)
              </p>
              <p>
                <i>The Swift Programming Language</i> -
                <a href="https://news.ycombinator.com/item?id=7835099"
                  >https://news.ycombinator.com/item?id=7835099</a
                >
                - June 2014 (926 comments)
              </p>
              <p>But the obscure and esoteric ones are the most fun.</p>
              <p>
                (* where 'new' might mean old, of course -
                <a href="https://news.ycombinator.com/item?id=23459210"
                  >https://news.ycombinator.com/item?id=23459210</a
                >)
              </p>
            </div>
          </section>
        </section>
        <section id="46609630">
          <h3>
            <a
              class="item"
              href="https://questdb.com/blog/jvm-current-thread-user-time/"
              >A 40-line fix eliminated a 400x performance gap</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 23:00:36</span
              ><span class="points-container"
                >Points: <span class="points">260</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46609630"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46609492">
          <h3>
            <a class="item" href="https://www.marcia.no/words/eol"
              >When hardware goes end-of-life, companies need to open-source the
              software</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 22:49:51</span
              ><span class="points-container"
                >Points: <span class="points">309</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46609492"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46605854">
          <h3>
            <a class="item" href="https://www.ablg.io/blog/no-management-needed"
              >No management needed: anti-patterns in early-stage engineering
              teams</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 18:54:30</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46605854"
                  >Comments</a
                ><span class="descendants">: 198</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46605675">
          <h3>
            <a
              class="item"
              href="https://marketplace.visualstudio.com/items?itemName=Nogic.nogic"
              >Show HN: Nogic – VS Code extension that visualizes your codebase
              as a graph</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 18:43:28</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46605675"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              <p>
                It’s early and rough, but usable. Would love feedback on whether
                this is useful and what relationships are most valuable to
                visualize.
              </p>
            </div>
          </section>
        </section>
        <section id="46605490">
          <h3>
            <a
              class="item"
              href="https://old.reddit.com/r/BandCamp/comments/1qbw8ba/ai_generated_music_on_bandcamp/"
              >AI generated music barred from Bandcamp</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 18:31:50</span
              ><span class="points-container"
                >Points: <span class="points">765</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46605490"
                  >Comments</a
                ><span class="descendants">: 545</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46605332">
          <h3>
            <a
              class="item"
              href="https://www.owlposting.com/p/the-truth-behind-the-2026-jp-morgan"
              >The truth behind the 2026 J.P. Morgan Healthcare Conference</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 18:22:00</span
              ><span class="points-container"
                >Points: <span class="points">222</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46605332"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46604308">
          <h3>
            <a class="item" href="https://tsonic.org"
              >Show HN: The Tsonic Programming Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 17:26:22</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46604308"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/tsoniclang/proof-is-in-the-pudding"
                >https://github.com/tsoniclang/proof-is-in-the-pudding</a
              >
              <p>
                And a hugo clone (which compiles to native code) here:
                <a href="https://github.com/tsoniclang/tsumo"
                  >https://github.com/tsoniclang/tsumo</a
                >
              </p>
              <p>Linux and macOS for now.</p>
            </div>
          </section>
        </section>
        <section id="46604250">
          <h3>
            <a
              class="item"
              href="https://lmnt.me/blog/how-to-make-a-damn-website.html"
              >How to make a damn website (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 17:23:46</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46604250"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46603995">
          <h3>
            <a class="item" href="https://github.com/shorepine/tulipcc"
              >The Tulip Creative Computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 17:10:42</span
              ><span class="points-container"
                >Points: <span class="points">216</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46603995"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46603111">
          <h3>
            <a
              class="item"
              href="https://eieio.games/blog/two-heads-arent-better-than-one/"
              >Are two heads better than one?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 16:22:59</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46603111"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46602737">
          <h3>
            <a
              class="item"
              href="https://blog.vllm.ai/2025/12/17/large-scale-serving.html"
              >vLLM large scale serving: DeepSeek 2.2k tok/s/h200 with
              wide-ep</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 15:59:59</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46602737"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46602591">
          <h3>
            <a class="item" href="https://www.greptile.com/blog/github-ids"
              >Every GitHub object has two IDs</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 15:52:33</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46602591"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46602102">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=Rs_JrOIo3SE"
              >Scott Adams has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-13 @ 15:18:43</span
              ><span class="points-container"
                >Points: <span class="points">940</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46602102"
                  >Comments</a
                ><span class="descendants">: 1453</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46591810">
          <h3>
            <a
              class="item"
              href="https://blog.jgc.org/2026/01/theres-ridiculous-amount-of-tech-in.html"
              >There's a ridiculous amount of tech in a disposable vape</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-12 @ 17:50:01</span
              ><span class="points-container"
                >Points: <span class="points">343</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46591810"
                  >Comments</a
                ><span class="descendants">: 275</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46589842">
          <h3>
            <a
              class="item"
              href="https://builders.ramp.com/post/why-we-built-our-background-agent"
              >Why we built our own background agent</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-12 @ 15:36:36</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46589842"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46584864">
          <h3>
            <a
              class="item"
              href="https://www.d12frosted.io/posts/2025-11-26-emacs-widget-library"
              >The Emacs Widget Library: A Critique and Case Study</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-12 @ 06:37:26</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46584864"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46579612">
          <h3>
            <a class="item" href="https://github.com/ogermer/1d-pong"
              >Show HN: 1D-Pong Game at 39C3</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-11 @ 20:23:14</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46579612"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                I was inspired by a version I saw at 38C3 and built my own
                interpretation for 39C3. Lots of people enjoyed playing it and
                even Elliot Williams featured it in his 39C3 Hackaday Podcast.
                And I can attest: it's truly fun because it's sooo simple at
                first sight - but wait until the speed increases... Not a bad
                work to fun created ratio for such a little project.
              </p>
              <p>
                I used the opportunity to play around with Claude Code on my
                preexisting codebase to publish a nice-ish repo on GitHub. It
                worked great without any hitch or compile errors - impressive.
                What a nice way to test some capabilities.
              </p>
              <p>
                Have fun with it an build your own version. And there are soooo
                many ideas that could be implemented. I am waiting for your
                feedback!
              </p>
              <p>
                Will we end up with a league of networked 1D-Pong games? ;-)
              </p>
            </div>
          </section>
        </section>
        <section id="46554982">
          <h3>
            <a class="item" href="https://cpu.land/"
              >Putting the "You" in CPU (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 15:38:17</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46554982"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46554774">
          <h3>
            <a
              class="item"
              href="https://linus.schreibt.jetzt/posts/shell-secrets.html"
              >Handling secrets (somewhat) securely in shells</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 15:17:45</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46554774"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46554461">
          <h3>
            <a
              class="item"
              href="https://todayinhistory.blog/2021/04/09/april-9-1940-a-dish-best-served-cold/"
              >April 9, 1940 a Dish Best Served Cold</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 14:50:46</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46554461"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46550453">
          <h3>
            <a
              class="item"
              href="https://www.media.mit.edu/projects/agonist-antagonist-myoneural-interface-ami/overview/"
              >Agonist-Antagonist Myoneural Interface</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 05:44:58</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46550453"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
