<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39398972">
          <h3>
            <a
              class="item"
              href="https://morethancoding.com/2024/02/16/how-to-keep-engineers-out-of-meeting-hell/"
              >How to keep engineers out of meeting hell</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 16:15:54</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39398972"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39398803">
          <h3>
            <a
              class="item"
              href="https://worksinprogress.co/issue/why-we-stopped-building-cut-and-cover/"
              >We stopped building cut and cover</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 16:04:40</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39398803"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39398631">
          <h3>
            <a class="item" href="https://github.com/LargeWorldModel/LWM"
              >LWM – Open LLM with 1M Tokens Context Window</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 15:54:12</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39398631"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39398448">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/technology/amazon-joins-companies-arguing-us-labor-board-is-unconstitutional-2024-02-16/"
              >Amazon joins companies arguing US labor board is
              unconstitutional</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 15:38:45</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39398448"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39398009">
          <h3>
            <a class="item" href="https://mtlynch.io/solo-developer-year-6/"
              >My Sixth Year as a Bootstrapped Founder</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 15:07:15</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39398009"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39397995">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/02/15/microsoft_retires_azure_iot_central/"
              >Microsoft 'retires' Azure IoT Central in platform rethink</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 15:06:07</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39397995"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39397961">
          <h3>
            <a
              class="item"
              href="https://studyfinds.org/device-breast-cancer-5-seconds/"
              >$5 device accurately tests for breast cancer in under 5
              seconds</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 15:04:09</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39397961"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39397942">
          <h3>
            <a class="item" href="https://emacsconf.org/2023/talks/emacsen/"
              >The Emacsen family, the design of an Emacs and the importance of
              Lisp (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 15:02:15</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39397942"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39397817">
          <h3>
            <a
              class="item"
              href="https://www.pasteur.fr/en/home/press-area/press-documents/smoking-has-long-term-effects-immune-system"
              >Smoking has long-term effects on the immune system</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 14:54:03</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39397817"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39397580">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/24067999/ai-bot-chatgpt-chatbot-dungeon"
              >You Sound Like a Bot</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 14:37:29</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39397580"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39397538">
          <h3>
            <a class="item" href="https://www.erlang.org/news/167"
              >Erlang/OTP 27.0 Release Candidate 1</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 14:34:34</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39397538"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39397064">
          <h3>
            <a
              class="item"
              href="https://restofworld.org/2024/showmax-subscription-africa-netflix/"
              >How an African streaming service dethroned Netflix</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 13:57:58</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39397064"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39396337">
          <h3>
            <a
              class="item"
              href="http://mgs.spatial-computing.org/PUBLICATIONS/umc02.pdf"
              >Data Structures as Topological Spaces (2002) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 12:57:24</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39396337"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39396151">
          <h3>
            <a
              class="item"
              href="https://cloud.google.com/blog/topics/systems/the-fifth-epoch-of-distributed-computing"
              >The fifth epoch of distributed computing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 12:39:58</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39396151"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39396130">
          <h3>
            <a
              class="item"
              href="https://blog.cryptpad.org/2024/02/15/no-one-cares-intil/"
              >No one cares about open-source, until</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 12:36:56</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39396130"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39395474">
          <h3>
            <a
              class="item"
              href="https://wingolog.org/archives/2024/02/16/guix-on-the-framework-13-amd"
              >Guix on the Framework 13 AMD</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 11:05:15</span
              ><span class="points-container"
                >Points: <span class="points">165</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39395474"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39395329">
          <h3>
            <a
              class="item"
              href="https://noyb.eu/en/german-credit-agency-earns-millions-through-unlawful-customer-manipulation"
              >German credit agency earns millions through unlawful customer
              manipulation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 10:40:31</span
              ><span class="points-container"
                >Points: <span class="points">235</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39395329"
                  >Comments</a
                ><span class="descendants">: 164</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39394990">
          <h3>
            <a class="item" href="https://seths.blog/2024/02/trading-trust/"
              >Trading Trust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 09:38:40</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39394990"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39394060">
          <h3>
            <a class="item" href="https://kagi.com/changelog#3179"
              >Kagi Changelog 2/13: Faster and more accurate instant answers and
              Wikipedia page</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 06:59:04</span
              ><span class="points-container"
                >Points: <span class="points">271</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39394060"
                  >Comments</a
                ><span class="descendants">: 178</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39393681">
          <h3>
            <a
              class="item"
              href="https://www.whitman.edu/mathematics/eegtti/eeg_toc.html"
              >EFF's (Extended) Guide to the Internet circa 1994</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 05:55:05</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39393681"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39393049">
          <h3>
            <a
              class="item"
              href="https://github.com/orgzly-revived/orgzly-android-revived"
              >Orgzly Revived: a community-maintained version of Orgzly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 04:06:01</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39393049"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39392881">
          <h3>
            <a class="item" href="https://allendowney.github.io/ThinkPython/"
              >Think Python, 3rd Edition</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 03:32:20</span
              ><span class="points-container"
                >Points: <span class="points">339</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39392881"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39391688">
          <h3>
            <a
              class="item"
              href="https://opensource.googleblog.com/2024/02/magika-ai-powered-fast-and-efficient-file-type-identification.html"
              >Magika: AI powered fast and efficient file type identification</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 01:02:36</span
              ><span class="points-container"
                >Points: <span class="points">525</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39391688"
                  >Comments</a
                ><span class="descendants">: 171</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39390965">
          <h3>
            <a
              class="item"
              href="https://scottishgames.net/2024/02/14/it-was-33-years-ago-today-happy-birthday-lemmings/"
              >Happy Birthday Lemmings</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-15 @ 23:48:54</span
              ><span class="points-container"
                >Points: <span class="points">408</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39390965"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39386156">
          <h3>
            <a class="item" href="https://openai.com/sora"
              >Sora: Creating video from text</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-15 @ 18:14:18</span
              ><span class="points-container"
                >Points: <span class="points">3374</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39386156"
                  >Comments</a
                ><span class="descendants">: 1999</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39385635">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39385635"
              >Launch HN: Zenfetch (YC W23) – Turn notes/browser history into an
              AI assistant</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-15 @ 17:39:48</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39385635"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.zenfetch.com">https://www.zenfetch.com</a>) -
              a Chrome extension that transforms your saved web browsing into a
              personal chatGPT and search engine. Here’s a demo video:
              <a
                href="https://www.loom.com/share/abe9d40dc82545a482be55b631f9bf2a?sid=53fb1432-0c59-4c08-93aa-3b3184363cc3"
                >https://www.loom.com/share/abe9d40dc82545a482be55b631f9bf2a?...</a
              >
              <p>
                How it works: (1) Optionally import your existing saved web
                browsing through one of our integrations or through a URL CSV
                import. (2) Click the Zenfetch icon in a tab to save any PDF,
                YouTube video, note, article, email, forum post, etc. Zenfetch
                can save almost anything across the internet. (3) Zenfetch
                indexes the text or transcript and adds that information to your
                personal knowledge assistant. This is done on your computer so
                you don’t have to worry about paywalls, logins, etc. (4) Use the
                dashboard or side panel to search your knowledge or chat with
                your personal knowledge assistant.
              </p>
              <p>
                We built Zenfetch to solve our personal problem: we were reading
                tons of content but using little to none of the information.
                While searching for solutions, we found that most tools were
                good at storing information but not at retrieving it. We even
                found that search functionalities on existing read-later tools
                got worse the more content we saved.
              </p>
              <p>
                A few examples of how our users use Zenfetch: “What was that
                article I read on the new nuclear fusion company?”, “Analyze
                this strategy based on the Lenny Rachitsky article I read”,
                “Summarize Karpathys video introducing LLMs”, “Which research
                papers mentioned the increase in carbon emissions?”, “Compile
                the different perspectives I’ve read on climate change”, and
                more.
              </p>
              <p>
                Zenfetch is free for the first 14 days and then costs $14.99/mo
                (No credit card needed for the trial).
              </p>
              <p>
                We’d love for you to try it out and let us know what we can do
                to improve your experience! While we only work on Chromium-based
                browsers right now, we’re actively working on browser
                compatibility and integrations. Let us know which ones to
                prioritize!
              </p>
            </div>
          </section>
        </section>
        <section id="39383446">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/ai/google-gemini-next-generation-model-february-2024/"
              >Our next-generation model: Gemini 1.5</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-15 @ 15:02:09</span
              ><span class="points-container"
                >Points: <span class="points">1183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39383446"
                  >Comments</a
                ><span class="descendants">: 550</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39369749">
          <h3>
            <a class="item" href="https://github.com/dzove855/Bash-web-server"
              >Pure Bash Web Server</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 13:55:10</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39369749"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39368700">
          <h3>
            <a
              class="item"
              href="https://thechipletter.substack.com/p/satya-nadella-uses-an-ibm-as400-in"
              >Satya Nadella uses an IBM AS/400 in 1993</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 11:35:55</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39368700"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39368010">
          <h3>
            <a
              class="item"
              href="https://www.futilitycloset.com/2024/02/14/a-fuss-budget/"
              >A Fuss Budget (1885)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-14 @ 09:08:30</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39368010"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
