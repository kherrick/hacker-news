<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45432627">
          <h3>
            <a
              class="item"
              href="https://www.dopaminemarkets.com/p/the-business-of-sports-betting-is"
              >Economics of sportsbooks and why they ban the best bettors</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 23:36:23</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45432627"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45431489">
          <h3>
            <a
              class="item"
              href="https://thejpster.org.uk/blog/blog-2025-09-28/"
              >Pre-Emptive Multi-Tasking on Arm Cortex-M</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 21:29:29</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45431489"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45431367">
          <h3>
            <a
              class="item"
              href="https://rubycentral.org/news/our-stewardship-where-we-are-whats-changing-and-how-well-engage/"
              >Our stewardship: Where we are, what's changing and how we'll
              engage</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 21:16:48</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45431367"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45431271">
          <h3>
            <a class="item" href="https://arxiv.org/abs/1904.07272"
              >Introduction to Multi-Armed Bandits</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 21:08:28</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45431271"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45431167">
          <h3>
            <a
              class="item"
              href="https://sambowman.tech/blog/posts/mind-the-encryptionroot-how-to-save-your-data-when-zfs-loses-its-mind/"
              >Mind the encryptionroot: How to save your data when ZFS loses its
              mind</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 20:58:52</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45431167"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45431001">
          <h3>
            <a
              class="item"
              href="https://blog.atuin.sh/atuin-desktop-open-source/"
              >Atuin Desktop: Runbooks That Run – Now Open Source</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 20:44:30</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45431001"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45430604">
          <h3>
            <a class="item" href="https://flo.znkr.io/diff/">Diff Algorithms</a>
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 20:09:44</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45430604"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45430542">
          <h3>
            <a
              class="item"
              href="https://aggressivelyparaphrasing.me/2025/09/30/organize-your-slack-channels-by-how-often-not-what/"
              >Organize your Slack channels by "How Often", not "What"</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 20:04:46</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45430542"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45430498">
          <h3>
            <a
              class="item"
              href="https://www.empirical.health/blog/inflammation-and-heart-health/"
              >Inflammation now predicts heart disease more strongly than
              cholesterol</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 20:00:21</span
              ><span class="points-container"
                >Points: <span class="points">317</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45430498"
                  >Comments</a
                ><span class="descendants">: 190</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45430048">
          <h3>
            <a
              class="item"
              href="https://diff.wikimedia.org/2025/09/30/making-sure-ai-serves-people-and-knowledge-stays-human-wikimedia-foundation-publishes-a-human-rights-impact-assessment-on-the-interaction-of-ai-and-machine-learning-with-wikimedia-projects/"
              >Making sure AI serves people and knowledge stays human</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 19:23:34</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45430048"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45428482">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/business/airlines/boeing-has-started-working-on-a-737-max-replacement-40a110df"
              >Boeing has started working on a 737 MAX replacement</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 17:31:34</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45428482"
                  >Comments</a
                ><span class="descendants">: 274</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://finance.yahoo.com/news/boeing-reportedly-working-737-max-150822530.html"
                >https://finance.yahoo.com/news/boeing-reportedly-working-737...</a
              >,
              <a
                href="https://www.foxbusiness.com/markets/boeing-developing-new-single-aisle-plane-replace-737-max-aircraft"
                >https://www.foxbusiness.com/markets/boeing-developing-new-si...</a
              >
            </div>
          </section>
        </section>
        <section id="45428081">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/bild-ai/jobs/m2ilR5L-founding-engineer-applied-ai"
              >Bild AI (YC W25) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 17:01:27</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45427982">
          <h3>
            <a class="item" href="https://openai.com/index/sora-2/">Sora 2</a>
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 16:55:01</span
              ><span class="points-container"
                >Points: <span class="points">481</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45427982"
                  >Comments</a
                ><span class="descendants">: 523</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.youtube.com/watch?v=gzneGhpXwjU"
                >https://www.youtube.com/watch?v=gzneGhpXwjU</a
              >
              <p>
                System card:
                <a href="https://openai.com/index/sora-2-system-card/"
                  >https://openai.com/index/sora-2-system-card/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45427482">
          <h3>
            <a class="item" href="https://github.com/airweave-ai/airweave"
              >Launch HN: Airweave (YC X25) – Let agents search any app</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 16:21:09</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45427482"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <a href="https://airweave.ai/">https://airweave.ai/</a>), an
              open-source tool that lets AI agents search and retrieve context
              from your existing apps and databases through a single
              LLM-friendly API (or an MCP server, if that’s your thing). Our
              Github is at
              <a href="https://github.com/airweave-ai/airweave"
                >https://github.com/airweave-ai/airweave</a
              >. We previously did a Show HN
              <a href="https://news.ycombinator.com/item?id=43964201"
                >https://news.ycombinator.com/item?id=43964201</a
              >
              and since then we’ve recently launched the managed service and new
              search functionality.
              <p>
                Here’s an example of Cursor using Airweave
                <a href="https://www.youtube.com/watch?v=IvxidK9Ciy4"
                  >https://www.youtube.com/watch?v=IvxidK9Ciy4</a
                >. And here’s a general example of our new search functionality:
                <a href="https://www.youtube.com/watch?v=iqEqc_iGUO8"
                  >https://www.youtube.com/watch?v=iqEqc_iGUO8</a
                >
              </p>
              <p>
                We came to this problem while building agentic applications for
                webshop owners and customer service, and noticing most failure
                modes weren’t about tool execution, but finding the right
                internal context to enable the right actions.
              </p>
              <p>
                We started solving, what seemed at the time, a problem for our
                own use case, and quickly fell into a rabbithole of issues.
                Company and user data lives across SaaS and databases; it’s
                sparse, messy, and constantly changing. Agents need a data
                orchestration and retrieval layer that accepts free-form natural
                language queries and returns actionable results quickly.
              </p>
              <p>
                Simply pointing an agent at an MCP server does not equate to
                fine-grained search functionality or deep understanding of the
                underlying resource. Most MCP servers are thin wrappers that
                expose an existing API in a more LLM-friendly way, but this
                doesn’t actually give the agent any new capabilities beyond what
                the resource or app already offered. Specifically, it doesn’t
                give the agent a way to thoroughly search and understand the
                contents of the resource.
              </p>
              <p>
                Airweave connects to sources via their APIs, crawls and
                normalizes content, chunks it, extracts entity relationships,
                and indexes the chunks in a vector store alongside keyword
                fields and lightweight graph metadata in Postgres. Data sync is
                orchestrated with Temporal (handles pagination/rate limits,
                schedules, and change detection via timestamps and content
                hashes) so collections stay close to real-time with their
                sources.
              </p>
              <p>
                On retrieval, Airweave can run semantic and BM25 keyword search
                in parallel, fuse results (RRF), apply recency bias, and
                re-rank. Agents can fetch ranked chunks with citations or ask
                for a synthesized answer. The same interface is exposed via
                REST, Python/TS SDKs, and MCP so agents can discover it like any
                other tool.
              </p>
              <p>
                It’s been fun to see what users have built with Airweave; from
                legal AI assistants to research discovery agents and context
                augmentation for coding agents. We’re currently experimenting
                with agentic search patterns, layering different types of
                enrichment and indexing, RBAC on indexed data, and streaming
                architectures.
              </p>
              <p>
                If this is interesting to you, feel free to take it for a spin.
                Curious to hear your thoughts and feedback on the problem and
                our solution!
              </p>
            </div>
          </section>
        </section>
        <section id="45427197">
          <h3>
            <a class="item" href="https://browser.geekbench.com/v6/cpu/14173685"
              >Leaked Apple M5 9 core Geekbench scores</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 16:00:36</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45427197"
                  >Comments</a
                ><span class="descendants">: 232</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45427061">
          <h3>
            <a
              class="item"
              href="https://hyprmcp.com/blog/mcp-server-prompt-analytics/"
              >Prompt analytics for MCP servers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 15:50:22</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45427061"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45427059">
          <h3>
            <a class="item" href="https://paulbourke.net/fractals/lyapunov/"
              >Visualizations of Random Attractors Found Using Lyapunov
              Exponents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 15:50:14</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45427059"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45426680">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2025/Sep/30/designing-agentic-loops/"
              >Designing agentic loops</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 15:21:23</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45426680"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45426490">
          <h3>
            <a class="item" href="https://blog.kagi.com/kagi-news">Kagi News</a>
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 15:09:00</span
              ><span class="points-container"
                >Points: <span class="points">725</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45426490"
                  >Comments</a
                ><span class="descendants">: 340</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45425770">
          <h3>
            <a
              class="item"
              href="https://progressandpoverty.substack.com/p/valuing-land-the-simplest-viable"
              >Valuing Land: The Simplest Viable Method</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 14:16:51</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45425770"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45425568">
          <h3>
            <a
              class="item"
              href="https://refactoringenglish.com/blog/software-essays-that-shaped-me/"
              >The Software Essays That Shaped Me</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 14:01:53</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45425568"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45425298">
          <h3>
            <a class="item" href="https://www2.dmst.aueb.gr/dds/sw/dgsh/"
              >dgsh – Directed Graph Shell</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 13:39:22</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45425298"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45425061">
          <h3>
            <a class="item" href="https://isomorphism.xyz/blog/2025/duolingo/"
              >An opinionated critique of Duolingo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 13:19:53</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45425061"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45424888">
          <h3>
            <a
              class="item"
              href="https://www.express.co.uk/news/uk/2115228/image-site-imgur-pulls-out"
              >Imgur pulls out of UK as data watchdog threatens fine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 13:01:05</span
              ><span class="points-container"
                >Points: <span class="points">287</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45424888"
                  >Comments</a
                ><span class="descendants">: 301</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45424827">
          <h3>
            <a
              class="item"
              href="https://www.cnn.com/2025/09/30/business/charlie-javice-frank-sentenced-jpmorgan-intl"
              >Founder sentenced to seven years in prison for fraudulent sale to
              JPMorgan</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 12:53:49</span
              ><span class="points-container"
                >Points: <span class="points">165</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45424827"
                  >Comments</a
                ><span class="descendants">: 201</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45424704">
          <h3>
            <a class="item" href="https://www.jefftk.com/p/pasta-cooking-time"
              >Pasta Cooking Time</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-30 @ 12:40:17</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45424704"
                  >Comments</a
                ><span class="descendants">: 118</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45415646">
          <h3>
            <a
              class="item"
              href="https://blog.cuongle.dev/p/level-up-your-rust-pattern-matching"
              >Level Up your Rust pattern matching</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 16:25:27</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45415646"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45406645">
          <h3>
            <a class="item" href="https://nanochess.org/ecs_basic.html"
              >Coding a new BASIC interpreter in 2025 to replace a slow one</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-28 @ 18:28:14</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45406645"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45395038">
          <h3>
            <a class="item" href="https://dita-lang.org/"
              >DITA – Darwin Information Typing Architecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-27 @ 12:06:18</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45395038"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45394719">
          <h3>
            <a
              class="item"
              href="https://users.cs.utah.edu/~regehr/papers/pldi11-preprint.pdf"
              >Finding and Understanding Bugs in C Compilers (2011) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-27 @ 10:59:30</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45394719"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
