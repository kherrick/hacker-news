<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41055947">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/07/23/cachyos_arch_linux/"
              >Arch-based CachyOS promises speed but trips over its laces</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 11:46:00</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41055947"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41055934">
          <h3>
            <a class="item" href="https://longform.asmartbear.com/legacy/"
              >Legacy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 11:44:30</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41055934"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41055481">
          <h3>
            <a
              class="item"
              href="https://www.haskellforall.com/2024/07/software-engineers-are-not-and-should.html"
              >Software engineers are not (and should not be) technicians</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 10:25:03</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41055481"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41053761">
          <h3>
            <a
              class="item"
              href="http://www.kohala.com/start/papers.others/doors.html"
              >"Doors" in Solaris: Lightweight RPC Using File Descriptors
              (1996)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 05:02:30</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41053761"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41053201">
          <h3>
            <a
              class="item"
              href="https://github.com/trholding/llama2.c/blob/master/runq.c"
              >Llama 3.1 in C</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 02:49:44</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41053201"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41052934">
          <h3>
            <a class="item" href="https://glhf.chat/landing/home"
              >Show HN: We made glhf.chat – run almost any open-source LLM,
              including 405B</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 01:52:09</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41052934"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
            <div class="text">
              <a href="https://glhf.chat/">https://glhf.chat/</a>
              <p>Hey HN!</p>
              <p>
                We’ve been working for the past few months on a website to let
                you easily run (almost) any open-source LLM on autoscaling GPU
                clusters. It’s free for now while we figure out how to price it,
                but we expect to be cheaper than most GPU offerings since we can
                run the models multi-tenant.
              </p>
              <p>
                Unlike Together AI, Fireworks, etc, we’ll run any model that the
                open-source vLLM project supports: we don’t have a hardcoded
                list. If you want a specific model or finetune, you don’t have
                to ask us for it: you can just paste the Hugging Face link in
                and it’ll work (as long as vLLM supports the base model
                architecture, we’ll run anything up to ~640GB of VRAM, give or
                take a little for some overhead buffer).
              </p>
              <p>
                Large models will take a few minutes to boot, but if a bunch of
                people are trying to use the same model, it might already be
                loaded and not need boot time at all. The Llama-3-70b finetunes
                are especially nice, since they’re basically souped-up versions
                of the 8b finetunes a lot of people like to run locally but
                don’t have the VRAM for. We’re expecting the Llama-3.1 finetunes
                to be pretty great too once they start getting released.
              </p>
              <p>
                There are some caveats for now — for example, while we support
                the Deepseek V2 architecture, we actually can only run their
                smaller “Lite” models due to some underlying NVLink limitations
                (though we’re working on it). But for the most part if vLLM
                supports it, we should too!
              </p>
              <p>
                We figured Llama-3.1-405B Launch Day was a good day to launch
                ourselves too — let us know in the comments if there’s anything
                you want us to support, or if you run into any issues. I know
                it’s not “local” Llama, but, well, that’s a lot of GPUs…
              </p>
            </div>
          </section>
        </section>
        <section id="41052593">
          <h3>
            <a
              class="item"
              href="https://onlisp.co.uk/On-the-Origin-of-Emacs-in-1976.html"
              >The Origin of Emacs in 1976</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 00:49:26</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41052593"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41052446">
          <h3>
            <a class="item" href="https://pnut.sh"
              >Pnut: A C to POSIX Shell Compiler you can Trust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 00:22:04</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41052446"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41052371">
          <h3>
            <a class="item" href="https://github.com/tekknolagi/scrapscript"
              >Scrapscript: A functional, content-addressable programming
              language</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 00:08:21</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41052371"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41052365">
          <h3>
            <a
              class="item"
              href="https://martin.janiczek.cz/2024/07/23/taking-my-diabetes-treatment-into-my-own-hands.html"
              >Taking my diabetes treatment into my own hands (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 00:06:59</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41052365"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41050801">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41050801"
              >Meticulous (YC S21) is hiring to eliminate UI tests</a
            >
          </h3>
        </section>
        <section id="41050055">
          <h3>
            <a
              class="item"
              href="https://www.jhnewsandguide.com/the_hole_scroll/video-biscuit-basin-geyser-explodes-sending-yellowstone-tourists-packing/article_6862fda2-4923-11ef-b5c4-abdc9bc8cd83.html"
              >Hydrothermal explosion at Yellowstone National Park</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 19:49:44</span
              ><span class="points-container"
                >Points: <span class="points">438</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41050055"
                  >Comments</a
                ><span class="descendants">: 229</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41049587">
          <h3>
            <a class="item" href="https://github.com/Troels51/dtui"
              >Dtui – TUI for introspecting the state of the system/session
              dbus</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 19:02:48</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41049587"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41049399">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/motor-doping-cycling"
              >How Olympics officials try to catch “motor doping”</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 18:43:51</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41049399"
                  >Comments</a
                ><span class="descendants">: 359</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41048777">
          <h3>
            <a
              class="item"
              href="https://divisbyzero.com/2010/05/27/turings-topological-proof-that-every-written-alphabet-is-finite/"
              >Turing's topological proof that every written alphabet is finite
              (2010)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 17:43:41</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41048777"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41048707">
          <h3>
            <a
              class="item"
              href="https://www.chemistryworld.com/news/computer-program-paints-porphyrin-structures-in-the-style-of-famous-artist/4019839.article"
              >Computer program 'paints' porphyrin structures in the style of
              Piet Mondrian</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 17:37:36</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41048707"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41048194">
          <h3>
            <a class="item" href="https://github.com/getomni-ai/zerox"
              >Show HN: Zerox – Document OCR with GPT-mini</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 16:49:53</span
              ><span class="points-container"
                >Points: <span class="points">176</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41048194"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
            <div class="text">
              <p>
                But this turned out to be better performing than our current
                implementation of Unstructured/Textract. At pretty much the same
                cost.
              </p>
              <p>
                I've tested almost every variant of document OCR over the past
                year, especially trying things like table / chart extraction.
                I've found the rules based extraction has always been lacking.
                Documents are meant to be a visual representation after all.
                With weird layouts, tables, charts, etc. Using a vision model
                just make sense!
              </p>
              <p>
                In general, I'd categorize this solution as slow, expensive, and
                non deterministic. But 6 months ago it was impossible. And 6
                months from now it'll be fast, cheap, and probably more
                reliable!
              </p>
            </div>
          </section>
        </section>
        <section id="41047163">
          <h3>
            <a
              class="item"
              href="https://blog.jovono.com/p/ballmer-microsoft-underrated"
              >Is Steve Ballmer the Most Underrated CEO of the 21st Century?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 15:38:21</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41047163"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41047110">
          <h3>
            <a class="item" href="https://punkx.org/unix-pipe-game/"
              >The Unix Pipe Card Game</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 15:35:10</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41047110"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41046956">
          <h3>
            <a
              class="item"
              href="https://letsencrypt.org/2024/07/23/replacing-ocsp-with-crls.html"
              >Intent to end OCSP service</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 15:25:14</span
              ><span class="points-container"
                >Points: <span class="points">341</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41046956"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41046773">
          <h3>
            <a
              class="item"
              href="https://about.fb.com/news/2024/07/open-source-ai-is-the-path-forward/"
              >Open source AI is the path forward</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 15:08:41</span
              ><span class="points-container"
                >Points: <span class="points">2001</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41046773"
                  >Comments</a
                ><span class="descendants">: 770</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41046397">
          <h3>
            <a
              class="item"
              href="https://fight-flash-fraud.readthedocs.io/en/latest/introduction.html#correcting-capacity-to-actual-size-with-f3fix"
              >A free tool to quickly detect counterfeit flash (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 14:34:50</span
              ><span class="points-container"
                >Points: <span class="points">188</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41046397"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41045834">
          <h3>
            <a class="item" href="https://briefer.cloud/launches/notebooks/"
              >Show HN: Briefer – multiplayer notebooks with schedules, SQL, and
              built-in LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 13:30:32</span
              ><span class="points-container"
                >Points: <span class="points">192</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41045834"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
            <div class="text">
              <p>
                Our notebooks are kind of a mix between Notion and Jupyter with
                extra features, like the ability to schedule notebooks, turn
                them into dashboards and apps, and write SQL queries whose
                results turn into data frames automatically.
              </p>
              <p>
                We're building better notebooks because we think they're a great
                idea poorly executed - for three reasons.
              </p>
              <p>
                The first problem with notebooks is that they're difficult to
                share. Non-technical people don't want to download docker
                containers and install Python libraries to see what the data
                team is doing. Then, the data team takes screenshots of their
                work and pastes them somewhere else. The issue with this
                approach is that the data gets stale, and the output is not
                interactive, so it's difficult to get feedback and iterate.
              </p>
              <p>
                The second problem with notebooks is that they get too messy too
                quickly. One morning you have 10 blocks, and by the end of the
                day you have 192, but only six of them are meant to be seen by
                other people and the rest is just you jiu-jitsuing with the
                data. Consequently, even if non-technical people could see your
                work, they'd have a hard time figuring out what's happening.
              </p>
              <p>
                The third problem with notebooks is that it takes too much work
                to do simple things like when you want to query a database. In
                that case, you need to have the database credentials in your
                machine, and you have to write a bunch of wrapper code. Calling
                APIs, plotting simple graphs, and adding interactive components
                is equally as annoying.
              </p>
              <p>
                We're solving the sharing problem by bringing notebooks to the
                cloud (so you can schedule them) and using CRDTs to manage their
                state. Whenever you edit a Briefer notebook, we reconcile that
                using Yjs, and then propagate it to everyone else who's editing
                that notebook. Regarding compute instances, each workspace gets
                its own, and we provision them on demand.
              </p>
              <p>
                By the way, we manage the execution state of your blocks using
                Yjs too, which makes it much more stable and responsive across
                all clients. When you click "run", for example, we don't
                immediately send a request to run the block. Instead, we change
                the block's state to "execution-requested". Then, the observers
                in the back-end react to the change and update the block's state
                with the results. In other words, the front end and the server
                communicate with each other through the notebook's state. One
                side updates the state, and the other reacts.
              </p>
              <p>
                To solve the "messiness" issue, we've invested a lot of time in
                designing clean notebooks and allowing you to organize blocks in
                ways that make them more presentable. In Briefer, you can group
                multiple blocks into tabs and decide which blocks appear in the
                published version of your notebook. That way, you can hide all
                that data wrangling and focus on results. We also know that a
                vertical format is not always the best way to display results,
                so you can use your notebook's outputs to build dashboards too.
              </p>
              <p>
                Last but not least, we're reducing friction in simple tasks like
                plotting graphs and querying databases. In Briefer, you can plot
                graphs using a click-through interface, and if you need to plot
                something more intricate like a Sankey chart there's also a
                built-in AI assistant that you can prompt to generate code. When
                it comes to queries, we turn their results into dataframes
                automatically, and you can use SQL to query uploaded files too
                (we use DuckDB for that).
              </p>
              <p>
                We're really happy we get to show this to you all, thank you for
                reading about it! Please let us know your thoughts and questions
                in the comments.
              </p>
            </div>
          </section>
        </section>
        <section id="41034297">
          <h3>
            <a
              class="item"
              href="https://d-star.ai/solving-the-out-of-context-chunk-problem-for-rag"
              >Solving the out-of-context chunk problem for RAG</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 13:44:19</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41034297"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41033042">
          <h3>
            <a
              class="item"
              href="https://tommihovi.com/2024/05/demystifying-cookies-and-tokens/"
              >Demystifying Cookies and Tokens</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 11:06:22</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41033042"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41025341">
          <h3>
            <a
              class="item"
              href="https://www.popularfintech.com/p/why-discover-is-no-american-express"
              >Why Discover is no American Express</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-21 @ 14:28:35</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41025341"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41022251">
          <h3>
            <a
              class="item"
              href="https://www.henrikkarlsson.xyz/p/making-a-home-together"
              >Relationships are coevolutionary loops (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-21 @ 03:54:35</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41022251"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41012854">
          <h3>
            <a class="item" href="https://www.nasa.gov/history/alsj/main.html"
              >Apollo Lunar Surface Journal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-20 @ 00:15:13</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41012854"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41001951">
          <h3>
            <a
              class="item"
              href="https://jpcamara.com/2024/07/15/ruby-methods-are.html"
              >Ruby methods are colorless</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-19 @ 04:07:51</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41001951"
                  >Comments</a
                ><span class="descendants">: 152</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41000844">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41000844"
              >Ask HN: Fast data structures for disjoint intervals?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-18 @ 23:53:18</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41000844"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
            <div class="text">
              <p>
                In the past I've represented these with some kind of ordered map
                or tree. In Rust this might look something like
                `BTreeMap&lt;u32, 32&gt;` with start being the key and the end
                being the value. This works really well in practice, but it's
                not as fast I'd like for some real-time applications for really
                read-heavy range queries with thousands of intervals.
              </p>
              <p>
                A lot of the specialized interval libraries I've found don't
                seem to perform better than a plain ordered map like I mentioned
                (many use an ordered map internally anyway). Many of these also
                weren't designed with cache-efficiency or SIMD in mind and spend
                a lot of time on tree (pointer) traversal.
              </p>
              <p>
                I spent some time prototyping with some other data structures
                that might fit (adaptive radix trees to take advantage of the
                small integer key, dense bitsets for small ranges, applying a
                spatial index in 1-dimension, fixed grid hierarchies) but
                haven't been able to find anything much faster than an ordered
                map.
              </p>
              <p>
                I was wondering if anyone has come across any interesting data
                structures that handle this well. Approaches that use a
                combination of multiple data structures to accelerate reads at
                the cost of slightly slower inserts/removals could be
                interesting.
              </p>
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
