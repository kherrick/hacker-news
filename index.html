<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42074592">
          <h3>
            <a
              class="item"
              href="https://developer.apple.com/documentation/virtualization/accelerating_the_performance_of_rosetta"
              >Accelerating the Performance of Rosetta in Linux VMs on Apple
              Silicon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-07 @ 08:02:21</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42074592"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42074348">
          <h3>
            <a class="item" href="https://junxuan-li.github.io/urgca-website/"
              >URAvatar: Universal Relightable Gaussian Codec Avatars</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-07 @ 07:20:32</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42074348"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42073801">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2406.03689"
              >Evaluating the world model implicit in a generative model</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-07 @ 05:51:32</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42073801"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42072750">
          <h3>
            <a
              class="item"
              href="https://purplesyringa.moe/blog/bringing-faster-exceptions-to-rust/"
              >Bringing Faster Exceptions to Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-07 @ 02:37:37</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42072750"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42072709">
          <h3>
            <a class="item" href="https://github.com/TutoriaLLM/TutoriaLLM"
              >Show HN: TutoriaLLM – AI Integrated programming tutorials</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-07 @ 02:32:44</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42072709"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <a href="https://tokumaru.work">https://tokumaru.work</a> ), high
              school student from Japan working on ways to leverage large
              language models (LLMs) for K-12 programming education. Recently, I
              built a project called "TutoriaLLM," a self-hosted application
              designed to support educators and students through a multi-modal
              LLM that offers guided tutorials.
              <p>
                TutoriaLLM integrates voice (voice-to-voice) and text-based AI
                interactions into Blockly, a block editor widely known for its
                use in Scratch. It enables server-side code execution and allows
                students to test their code directly in Minecraft (Bedrock or
                Education Edition) without any setup.
              </p>
              <p>
                I’m actively developing this project and aim to bring it to a
                level ready for use in programming education by next year. I’d
                love to hear any feedback!
              </p>
              <p>
                Documentation:
                <a href="https://tutoriallm.com">https://tutoriallm.com</a>
              </p>
              <p>
                Demo:
                <a href="https://demo.tutoriallm.com"
                  >https://demo.tutoriallm.com</a
                >
              </p>
              <p>
                Repository:
                <a href="https://github.com/TutoriaLLM/TutoriaLLM"
                  >https://github.com/TutoriaLLM/TutoriaLLM</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="42072647">
          <h3>
            <a
              class="item"
              href="https://www.tokyodev.com/articles/the-english-paradox-four-decades-of-life-and-language-in-japan"
              >The English Paradox: Four decades of life and language in
              Japan</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-07 @ 02:24:38</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42072647"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42071310">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/technology/cybersecurity/australia-proposes-ban-social-media-those-under-16-2024-11-06/"
              >Australia proposes ban on social media for those under 16</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 23:38:58</span
              ><span class="points-container"
                >Points: <span class="points">241</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42071310"
                  >Comments</a
                ><span class="descendants">: 206</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42070153">
          <h3>
            <a
              class="item"
              href="https://xy2i.blogspot.com/2024/11/using-imhexs-pattern-language-to-parse.html"
              >Visualizing binary files with ImHex's DSL, the "pattern
              language"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 22:00:09</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42070153"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42069646">
          <h3>
            <a class="item" href="https://maxsiedentopf.com/passport-photos/"
              >Passport Photos</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 21:23:50</span
              ><span class="points-container"
                >Points: <span class="points">913</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42069646"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42069246">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/science/2024/10/23/nvidia-prime-mersenne-gpu-cloud/"
              >One year, 41M digits: How Luke Durant found the largest known
              prime number</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 20:56:47</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42069246"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42067233">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/physicists-spot-quantum-tornadoes-twirling-in-a-supersolid-20241106/"
              >Physicists spot quantum tornadoes twirling in a 'supersolid'</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 18:46:53</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42067233"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42066500">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42066500"
              >Launch HN: Midship (YC S24) – Turn PDFs, docs, and images into
              usable data</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 18:05:55</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42066500"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
            <div class="text">
              <a href="https://midship.ai">https://midship.ai</a>). Midship
              makes it easy to extract data from unstructured documents like
              pdfs and images.
              <p>
                Here’s a video showing it in action:
                <a
                  href="https://www.loom.com/share/ae43b6abfcc24e5b82c87104339f2625?sid=2f2cf0fa-d671-4590-992a-da51712c69e1"
                  >https://www.loom.com/share/ae43b6abfcc24e5b82c87104339f2625?...</a
                >, and a demo playground (no signup required!) to test it out:
                <a href="https://app.midship.ai/demo"
                  >https://app.midship.ai/demo</a
                >
              </p>
              <p>
                We started 5 months ago initially trying to make an AI natural
                language workflow builder that would be a simpler alternative to
                Zapier or Make.com. However, most of our users seemed to be much
                more interested in the basic (and not very good) document
                extraction feature we had. Seeing how people were spending hours
                a day manually extracting data from pdfs inspired us to build
                what has become Midship!
              </p>
              <p>
                The problem is that despite all our progress in software, huge
                amounts of business data still lives in PDFs and images. Sure,
                you can OCR them, but getting clean, structured data out is
                still painful. Most existing tools just give you a blob of
                markdown - leaving you to figure out which parts matter and how
                they relate.
              </p>
              <p>
                We've found that combining OCR with language models lets us do
                something more useful: extract specific fields and tables that
                users actually care about. The LLMs help correct OCR mistakes
                and understand context (like knowing that "Inv#" and "Invoice
                Number" mean the same thing).
              </p>
              <p>
                We have two main kinds of users today, non-technical users that
                extract data via our web app and developers who use our
                extraction api. We were initially focused on the first one as
                they seemed like an underserved part of the market, but we’ve
                received a lot of interest from developers who face the same
                issues.
              </p>
              <p>
                For pricing, we currently charge a monthly Saas fee per seat for
                the web app and a volume based pricing for the API.
              </p>
              <p>
                We’re really excited to share what we’ve built so far and look
                forward to any feedback from the community!
              </p>
            </div>
          </section>
        </section>
        <section id="42065561">
          <h3>
            <a
              class="item"
              href="https://github.com/stoix-dev/stoix-cloud-saver"
              >Forget CDK and AWS's insane costs. Pulumi and DigitalOcean to the
              rescue</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 17:15:43</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42065561"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42063709">
          <h3>
            <a class="item" href="https://yourhackernews.com/"
              >Show HN: Hacker News frontpage as a print newspaper that you can
              personalize</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 15:23:42</span
              ><span class="points-container"
                >Points: <span class="points">369</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42063709"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42063346">
          <h3>
            <a class="item" href="https://aide.dev/"
              >Show HN: Aide, an open-source AI native IDE</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 15:01:00</span
              ><span class="points-container"
                >Points: <span class="points">192</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42063346"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
            <div class="text">
              <p>To talk through the features, we engineered the following:</p>
              <p>- A proactive agent</p>
              <p>
                Agent which iterates on the linter errors (powered by the
                Language Server) and pulls in relevant context by doing
                go-to-definitions, go-to-references etc and propose fixes or ask
                for more files which might be missing in the context.
              </p>
              <p>- Developer control</p>
              <p>
                We encourage you to do edits on top of your coding sessions. To
                enable this, we built a VSCode native rollback feature which
                gets rid of all the edits made by the agent in a single click if
                there were mistakes, without messing up your changes from
                before.
              </p>
              <p>
                - A combined chat+edit flow which you can use to brainstorm and
                edit
              </p>
              <p>
                You can brainstorm a problem in chat by @’ting the files and
                then jump into edits (which can happen across multiple files) or
                go from a smaller set of edits and discuss the side-effects of
                it
              </p>
              <p>- Inline editing widget</p>
              <p>
                We took inspiration from the macos spotlight widget and created
                a similar one inside the editor, you can highlight part of the
                code, do Cmd+K and just give your instructions freely
              </p>
              <p>- Local running AI brain</p>
              <p>
                We ship a binary called sidecar which takes care of talking to
                the LLM providers, preparing the prompts and using the editor
                for the LLM. All of this is local first and you get full control
                over the prompts/responses without anything leaking to our end
                (unless you choose to use your subscription and share the data
                with us)
              </p>
              <p>
                We spent the last 15 months learning about the internals of
                VSCode (its a non-trivial codebase) and also powering up our AI
                game, the framework is also at the top of swebench-lite with 43%
                score. On top of this, since the whole AI side of the logic runs
                locally on your machine you have complete control over the data,
                from the prompt to the responses and you can use your own API
                Keys as well (can be any LLM provider) and talk to them
                directly.
              </p>
              <p>
                There’s still a whole lot to build and we are at 1% of the
                journey. Right now the editor feels robust and does not break on
                any of the flows which we aimed to solve for.
              </p>
              <p>
                Let us know if there’s anything else you would like to see us
                build. We also want to empower extensibility and work together
                with the community to build the next set of features and set a
                new milestone of AI native editors.
              </p>
            </div>
          </section>
        </section>
        <section id="42062230">
          <h3>
            <a
              class="item"
              href="https://security.apple.com/documentation/private-cloud-compute/"
              >Private Cloud Compute Security Guide</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 13:48:55</span
              ><span class="points-container"
                >Points: <span class="points">350</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42062230"
                  >Comments</a
                ><span class="descendants">: 165</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42062074">
          <h3>
            <a class="item" href="https://ente.io/blog/monorepo-retrospective/"
              >Monorepo – Our Experience</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 13:37:03</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42062074"
                  >Comments</a
                ><span class="descendants">: 201</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42060856">
          <h3>
            <a
              class="item"
              href="https://playcanvas.com/supersplat/editor?load=https://raw.githubusercontent.com/willeastcott/assets/main/toy-cat.ply&amp;camera.overlay=false&amp;show.bound=false"
              >Show HN: SuperSplat – open-source 3D Gaussian Splat Editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-06 @ 12:07:06</span
              ><span class="points-container"
                >Points: <span class="points">229</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42060856"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42048105">
          <h3>
            <a
              class="item"
              href="https://archaeology.org/issues/november-december-2024/features/let-the-games-begin/"
              >Gladiators in ancient Anatolia lived to entertain the masses</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 02:33:03</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42048105"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42048091">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/history/this-19th-century-toy-book-used-science-to-prove-that-ghosts-were-simply-an-illusion-180985347/"
              >19th-Century 'Toy Book' Used Science to Prove That Ghosts Were an
              Illusion</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 02:27:38</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42048091"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42030798">
          <h3>
            <a class="item" href="https://github.com/kmarker1101/jeopardy"
              >Jeopardy game using LLM and Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 02:30:21</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42030798"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42030615">
          <h3>
            <a
              class="item"
              href="https://johnhawks.net/weblog/the-mystery-of-the-german-cockroach/"
              >The evolutionary mystery of the German cockroach</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 01:44:41</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42030615"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42028890">
          <h3>
            <a
              class="item"
              href="https://charliegerard.dev/blog/replay-attacks-javascript-hackrf/"
              >Hacking cars in JavaScript (Replay attacks in the browser with
              the HackRF)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 20:05:17</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42028890"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42025037">
          <h3>
            <a
              class="item"
              href="https://tech.marksblogg.com/ornl-fema-buildings.html"
              >131M American Buildings</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 09:03:28</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42025037"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42023707">
          <h3>
            <a class="item" href="https://blog.regehr.org/archives/1676"
              >It's time for a modern synthesis kernel (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 02:50:33</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42023707"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42016115">
          <h3>
            <a class="item" href="https://dev.java/learn/jlink/"
              >Creating Runtime and Application Images with JLink</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-01 @ 12:06:19</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42016115"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42015269">
          <h3>
            <a
              class="item"
              href="https://www.pcgamer.com/games/strategy/i-tracked-down-the-guy-who-gave-a-negative-review-to-battlezone-98-redux-after-playing-for-over-8-000-hours-and-came-away-convinced-he-was-right/"
              >The guy who gave a negative review to Battlezone 98 Redux after
              playing 8k hours</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-01 @ 09:27:22</span
              ><span class="points-container"
                >Points: <span class="points">208</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42015269"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42013109">
          <h3><a class="item" href="https://automat.org">Automat</a></h3>
          <section>
            <h4>
              <span>2024-11-01 @ 01:07:56</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42013109"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42008401">
          <h3>
            <a
              class="item"
              href="https://www.tudelft.nl/en/2024/tu-delft/a-rudimentary-quantum-network-link-between-dutch-cities"
              >A rudimentary quantum network link between Dutch cities</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-31 @ 16:21:18</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42008401"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41992851">
          <h3>
            <a class="item" href="https://garethx.com/posts/cart-pole-mpc/"
              >Model Predictive Control in the Browser with WebAssembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-30 @ 08:15:37</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41992851"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
