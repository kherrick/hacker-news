<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46555977">
          <h3>
            <a
              class="item"
              href="https://forms.icepanel.io/careers/senior-product-engineer"
              >IcePanel (YC W23) is hiring full-stack engineers in Vancouver</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 17:01:02</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46555963">
          <h3>
            <a
              class="item"
              href="https://xdaforums.com/t/discussion-the-root-and-mod-hiding-fingerprint-spoofing-keybox-stealing-cat-and-mouse-game.4425939/page-118"
              >The Vietnam government has banned rooted phones from using any
              banking app</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 17:00:11</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46555963"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46555760">
          <h3>
            <a
              class="item"
              href="https://twitter.com/eastdakota/status/2009654937303896492"
              >Cloudflare CEO on the Italy Fines</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 16:46:48</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46555760"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46554462">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/London%E2%80%93Calcutta_bus_service"
              >London–Calcutta Bus Service</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 14:50:48</span
              ><span class="points-container"
                >Points: <span class="points">219</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46554462"
                  >Comments</a
                ><span class="descendants">: 107</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46554013">
          <h3>
            <a class="item" href="https://noiseevidence.com/"
              >Show HN: Free noise evidence generator for tenant complaints</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 14:12:18</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46554013"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
            <div class="text">
              <p>
                Features: - Supports 27 US cities with accurate noise ordinances
                - Real-time recording + professional court-ready PDF reports -
                100% local processing (no data upload, privacy-first) - Auto
                day/night noise limit detection - Completely free (10 PDF
                generations/day)
              </p>
              <p>
                Why: As a tenant dealing with noise issues, I was frustrated
                that existing tools either required subscriptions or uploaded
                data to servers. This tool is: - Totally free, no hidden costs -
                No registration or installation required - All processing
                happens locally on your device
              </p>
              <p>
                Website:
                <a href="https://noiseevidence.com"
                  >https://noiseevidence.com</a
                >
              </p>
              <p>Feedback welcome!</p>
            </div>
          </section>
        </section>
        <section id="46553343">
          <h3>
            <a
              class="item"
              href="https://help.kagi.com/orion/misc/linux-status.html"
              >Kagi releases alpha version of Orion for Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 12:54:48</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46553343"
                  >Comments</a
                ><span class="descendants">: 172</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46551044">
          <h3>
            <a
              class="item"
              href="https://emnudge.dev/blog/what-happened-to-webassembly/"
              >What happened to WebAssembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 07:38:30</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46551044"
                  >Comments</a
                ><span class="descendants">: 256</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46550912">
          <h3>
            <a class="item" href="https://lwn.net/Articles/1053107/"
              >European Commission issues call for evidence on open source</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 07:09:39</span
              ><span class="points-container"
                >Points: <span class="points">364</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46550912"
                  >Comments</a
                ><span class="descendants">: 280</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46550895">
          <h3>
            <a
              class="item"
              href="https://courses.csail.mit.edu/6.042/spring18/mcs.pdf"
              >Mathematics for Computer Science (2018) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 07:06:41</span
              ><span class="points-container"
                >Points: <span class="points">290</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46550895"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46549444">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46549444"
              >Show HN: Executable Markdown files with Unix pipes</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 02:29:12</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46549444"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
            <div class="text">
              <p>task.md:</p>
              <p></p>
              <pre><code>    #!/usr/bin/env claude-run

    Analyze this codebase and summarize the architecture.
</code></pre>
              Then:
              <p></p>
              <pre><code>    chmod +x task.md

    ./task.md
</code></pre>
              These aren't just prompts. Claude Code has tool use, so a markdown
              file can run shell commands, write scripts, read files, make API
              calls. The prompt orchestrates everything.
              <p>
                A script that runs your tests and reports results
                (`run_tests.md`):
              </p>
              <p></p>
              <pre><code>    #!/usr/bin/env claude-run --permission-mode bypassPermissions

    Run ./test/run_tests.sh and summarize what passed and failed.
</code></pre>
              Because stdin/stdout work like any Unix program, you can chain
              them:
              <p></p>
              <pre><code>    cat data.json | ./analyze.md &gt; results.txt

    git log -10 | ./summarize.md

    ./generate.md | ./review.md &gt; final.txt
</code></pre>
              Or mix them with traditional shell scripts:
              <p></p>
              <pre><code>    for f in logs/\*.txt; do

        cat "$f" | ./analyze.md &gt;&gt; summary.txt

    done
</code></pre>
              This replaced a lot of Python glue code for us. Tasks that needed
              LLM orchestration libraries are now markdown files composed with
              standard Unix tools. Composable as building blocks, runnable as
              cron jobs, etc.
              <p>
                One thing we didn't expect is that these are more auditable (and
                shareable) than shell scripts. Install scripts like `curl -fsSL
                <a href="https://bun.com/install">https://bun.com/install</a> |
                bash` could become:
              </p>
              <p></p>
              <pre><code>    `curl -fsSL https://bun.com/install.md | claude-run`
</code></pre>
              Where install.md says something like "Detect my OS and
              architecture, download the right binary from GitHub releases,
              extract to ~/.local/bin, update my shell config." A normal human
              can actually read and verify that.
              <p>
                The (really cool) executable markdown idea and auditability
                examples are from Pete Koomen (@koomen on X). As Pete says:
                "Markdown feels increasingly important in a way I'm not sure
                most people have wrapped their heads around yet."
              </p>
              <p>
                We implemented it and added Unix pipe semantics. Currently works
                with Claude Code - hoping to support other AI coding tools too.
                You can also route scripts through different cloud providers
                (AWS Bedrock, etc.) if you want separate billing for automated
                jobs.
              </p>
              <p>
                GitHub:
                <a href="https://github.com/andisearch/claude-switcher"
                  >https://github.com/andisearch/claude-switcher</a
                >
              </p>
              <p>What workflows would you use this for?</p>
            </div>
          </section>
        </section>
        <section id="46548940">
          <h3>
            <a
              class="item"
              href="https://kueda.net/blog/2026/01/06/why-i-left-inat/"
              >Why I left iNaturalist</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-09 @ 01:17:51</span
              ><span class="points-container"
                >Points: <span class="points">247</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46548940"
                  >Comments</a
                ><span class="descendants">: 141</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46547740">
          <h3>
            <a class="item" href="https://github.com/embassy-rs/embassy"
              >Embassy: Modern embedded framework, using Rust and async</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-08 @ 23:00:45</span
              ><span class="points-container"
                >Points: <span class="points">280</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46547740"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46546614">
          <h3>
            <a
              class="item"
              href="https://web.archive.org/web/20180719052026/http://item.warp.net/interview/aphex-twin-speaks-to-tatsuya-takahashi/"
              >Richard D. James aka Aphex Twin speaks to Tatsuya Takahashi
              (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-08 @ 21:17:26</span
              ><span class="points-container"
                >Points: <span class="points">242</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46546614"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46546113">
          <h3>
            <a class="item" href="https://github.com/samuel-vitorino/sopro"
              >Sopro TTS: A 169M model with zero-shot voice cloning that runs on
              the CPU</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-08 @ 20:37:07</span
              ><span class="points-container"
                >Points: <span class="points">316</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46546113"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46545620">
          <h3>
            <a
              class="item"
              href="https://www.mihaileric.com/The-Emperor-Has-No-Clothes/"
              >How to Code Claude Code in 200 Lines of Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-08 @ 19:54:26</span
              ><span class="points-container"
                >Points: <span class="points">653</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46545620"
                  >Comments</a
                ><span class="descendants">: 208</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46544981">
          <h3>
            <a class="item" href="https://joshuawise.com/resources/ofdm/"
              >The unreasonable effectiveness of the Fourier transform</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-08 @ 19:00:28</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46544981"
                  >Comments</a
                ><span class="descendants">: 130</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46544276">
          <h3>
            <a
              class="item"
              href="https://sfstandard.com/2026/01/07/called-terrorist-sympathizer-now-ai-company-valued-3b/"
              >Replit founder Amjad Masad isn’t afraid of Silicon Valley</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-08 @ 18:05:02</span
              ><span class="points-container"
                >Points: <span class="points">270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46544276"
                  >Comments</a
                ><span class="descendants">: 396</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46542036">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/ai-coding-degrades"
              >AI coding assistants are getting worse?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-08 @ 15:20:15</span
              ><span class="points-container"
                >Points: <span class="points">404</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46542036"
                  >Comments</a
                ><span class="descendants">: 640</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46541892">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2026/01/bose-open-sources-its-soundtouch-home-theater-smart-speakers-ahead-of-eol/"
              >Bose has released API docs and opened the API for its EoL
              SoundTouch speakers</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-08 @ 15:07:57</span
              ><span class="points-container"
                >Points: <span class="points">2444</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46541892"
                  >Comments</a
                ><span class="descendants">: 366</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46540498">
          <h3>
            <a class="item" href="https://github.com/LRitzdorf/TheJeffDeanFacts"
              >The Jeff Dean Facts</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-08 @ 13:02:05</span
              ><span class="points-container"
                >Points: <span class="points">525</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46540498"
                  >Comments</a
                ><span class="descendants">: 175</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46509376">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/smart-news/hundreds-of-mysterious-victorian-era-shoes-are-washing-up-on-a-beach-in-wales-nobody-knows-where-they-came-from-180987943/"
              >Mysterious Victorian-era shoes are washing up on a beach in
              Wales</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-06 @ 06:34:45</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46509376"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46506902">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/tech/854556/lego-announces-smart-brick-the-most-significant-evolution-in-50-years"
              >Lego announces Smart Brick, the 'most significant evolution' in
              50 years, no AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-05 @ 23:51:27</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46506902"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46506143">
          <h3>
            <a
              class="item"
              href="https://www.bitsxpages.com/p/sorted-string-tables-sst-from-first"
              >Sorted string tables (SST) from first principles</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-05 @ 22:41:33</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46506143"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46500798">
          <h3>
            <a
              class="item"
              href="https://www.economist.com/christmas-specials/2025/12/18/how-wolves-became-dogs"
              >How wolves became dogs</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-05 @ 16:29:10</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46500798"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46493199">
          <h3>
            <a
              class="item"
              href="https://practical.engineering/blog/2025/4/15/when-kitty-litter-caused-a-nuclear-catastrophe"
              >When Kitty Litter Caused a Nuclear Catastrophe</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-04 @ 22:47:53</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46493199"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46489514">
          <h3>
            <a
              class="item"
              href="https://kk.org/thetechnium/how-will-the-miracle-happen-today/"
              >How Will the Miracle Happen Today?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-04 @ 16:32:13</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46489514"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46489232">
          <h3>
            <a
              class="item"
              href="https://medium.com/infosec-watchtower/how-i-hacked-casio-f-91w-digital-watch-892bd519bd15"
              >Hacking a Casio F-91W digital watch (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-04 @ 16:05:08</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46489232"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46486545">
          <h3>
            <a
              class="item"
              href="https://download.samba.org/pub/tridge/misc/french_cafe.txt"
              >Samba Was Written (2003)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-04 @ 09:58:36</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46486545"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46478558">
          <h3>
            <a
              class="item"
              href="https://www.hackster.io/news/jesse-taube-gets-linux-up-and-running-on-the-raspberry-pi-rp2350-s-hazard3-risc-v-cores-19088b87bb2c"
              >Linux Runs on Raspberry Pi RP2350's Hazard3 RISC-V Cores
              (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-03 @ 16:34:38</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46478558"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46461862">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/c9d9409p76qo"
              >Photographing the hidden world of slime mould</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-02 @ 05:56:47</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46461862"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
