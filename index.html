<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37945452">
          <h3>
            <a
              class="item"
              href="https://openai.com/blog/dall-e-3-is-now-available-in-chatgpt-plus-and-enterprise"
              >DALL·E 3 is now available in ChatGPT Plus and Enterprise</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 17:02:10</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37945452"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37945432">
          <h3>
            <a class="item" href="https://www.svix.com/careers/"
              >Svix (YC W21) Is Hiring a Tech Lead (US Remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 17:00:44</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37944691">
          <h3>
            <a
              class="item"
              href="https://www.techradar.com/pro/even-a-laptop-can-run-ram-externally-thanks-to-a-little-known-tech-called-cxl-but-its-not-for-sale-to-mere-mortals-who-only-want-1tb-of-ram"
              >Even a laptop can run RAM externally thanks to a little-known
              tech called CXL</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 16:02:51</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37944691"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37944680">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/tech-policy/2023/10/fcc-moves-ahead-with-title-ii-net-neutrality-rules-in-3-2-party-line-vote/"
              >FCC moves ahead with Title II net neutrality rules in 3-2
              party-line vote</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 16:01:59</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37944680"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37944269">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-10-largest-solar-storm-ancient-year-old.html"
              >Researchers identify largest ever solar storm in 14,300-year-old
              tree rings</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 15:30:18</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37944269"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37944219">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-10-scientists-winkle-secret-mona-lisa.html"
              >Scientists pry a secret from 'Mona Lisa' about how Leonardo
              painted masterpiece</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 15:27:20</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37944219"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37944198">
          <h3>
            <a class="item" href="https://rarehistoricalphotos.com/mikiphone/"
              >Mikiphone: The First Pocket Record Player</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 15:25:56</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37944198"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37944101">
          <h3>
            <a
              class="item"
              href="https://thenewstack.io/rust-is-surging-ahead-in-webassembly-for-now/"
              >Rust Is Surging Ahead in WebAssembly (For Now)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 15:19:56</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37944101"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37944091">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-10-nasa-asteroid-sample-life-critical-carbon.html"
              >NASA asteroid sample contains life-critical water and carbon</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 15:19:17</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37944091"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37943963">
          <h3>
            <a class="item" href="https://www.benkuhn.net/wireless/"
              >Wireless Is a Trap (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 15:11:14</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37943963"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37943843">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/smart-news/early-europeans-ate-seaweed-and-aquatic-plants-180983102/"
              >Early Europeans ate seaweed for thousands of years</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 15:01:21</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37943843"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37942791">
          <h3>
            <a class="item" href="https://github.com/Exein-io/pulsar"
              >Linux runtime security agent powered by eBPF</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 13:42:59</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37942791"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37942574">
          <h3>
            <a
              class="item"
              href="https://www.modular.com/blog/mojo-is-now-available-on-mac"
              >Mojo is now available on Mac</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 13:26:18</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37942574"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37942418">
          <h3>
            <a
              class="item"
              href="https://ir.amd.com/news-events/press-releases/detail/1162/amd-introduces-new-amd-ryzen-threadripper-7000-series"
              >AMD Introduces New AMD Ryzen Threadripper 7000/Pro 7000 WX</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 13:12:05</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37942418"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37942114">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/security/2023/10/theres-a-new-way-to-flip-bits-in-dram-and-it-works-against-the-latest-defenses/"
              >There's a new way to flip bits in DRAM, and it works against the
              latest defenses</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 12:45:28</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37942114"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37941727">
          <h3>
            <a
              class="item"
              href="https://downloads.apache.org/httpd/CHANGES_2.4.58"
              >Apache HTTP Server 2.4.58 (CVE fixes)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 12:07:19</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37941727"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37941413">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/LiquidityC/c832cd3d8394f267299d43b1f1719e90"
              >Show HN: One makefile to rule them all</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 11:34:35</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37941413"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37941234">
          <h3>
            <a class="item" href="https://guestbook.goodenough.us/"
              >"We have a thermal printer hooked up to the internet, you can
              send us a doodle"</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 11:15:38</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37941234"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37941075">
          <h3>
            <a
              class="item"
              href="https://app.codecrafters.io/courses/bittorrent/overview"
              >Build your own BitTorrent</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 10:53:56</span
              ><span class="points-container"
                >Points: <span class="points">343</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37941075"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37940713">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2023/10/19/north_korea_fake_freelance_avoidance/"
              >How not to hire a North Korean plant posing as a techie</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 10:01:36</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37940713"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37940572">
          <h3>
            <a class="item" href="https://github.com/danielgross/localpilot"
              >LocalPilot: Open-source GitHub Copilot on your MacBook</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 09:40:31</span
              ><span class="points-container"
                >Points: <span class="points">192</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37940572"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37940315">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=4b52A3sKz-I"
              >Monty Python and the Holy Grail 48 1/2 year anniversary in
              theaters December</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 09:03:35</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37940315"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37940249">
          <h3>
            <a
              class="item"
              href="https://www.npmjs.com/package/@imgly/background-removal-node"
              >Show HN: Open-source background removal in Node.js</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 08:54:51</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37940249"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              IMG.LY's popular background removal js library is now available
              for NodeJS.
            </div>
          </section>
        </section>
        <section id="37939576">
          <h3>
            <a class="item" href="https://www.learnhouse.app/"
              >Show HN: Modern Moodle learning platform open-source
              alternative</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 07:22:43</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37939576"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
            <div class="text">
              Code is still in pre-alpha but is perfectly usable, what do you
              think we can do better ?
            </div>
          </section>
        </section>
        <section id="37938866">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/security/2023/10/google-hosted-malvertising-leads-to-fake-keepass-site-that-looks-genuine/"
              >Google-hosted malvertising leads to fake Keepass site that looks
              genuine</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 05:33:24</span
              ><span class="points-container"
                >Points: <span class="points">322</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37938866"
                  >Comments</a
                ><span class="descendants">: 165</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37938636">
          <h3>
            <a
              class="item"
              href="https://www.404media.co/bandcamps-entire-union-bargaining-team-was-laid-off/"
              >Bandcamp's Entire Union Bargaining Team Was Laid Off</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 04:57:23</span
              ><span class="points-container"
                >Points: <span class="points">524</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37938636"
                  >Comments</a
                ><span class="descendants">: 414</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37938183">
          <h3>
            <a class="item" href="https://github.com/localsend/localsend"
              >Localsend: Open-Source Airdrop Alternative</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-19 @ 03:56:45</span
              ><span class="points-container"
                >Points: <span class="points">437</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37938183"
                  >Comments</a
                ><span class="descendants">: 187</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37934324">
          <h3>
            <a class="item" href="https://www.spacedrive.com/"
              >Spacedrive: Unify files from all your devices and clouds into one
              explorer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-18 @ 20:26:04</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37934324"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37930441">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37930441"
              >Launch HN: Pier (YC W23) – Stripe for Credit</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-18 @ 15:50:30</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37930441"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.pier-finance.com"
                >https://www.pier-finance.com</a
              >). Pier is an API for launching credit products. We enable any
              company to offer credit by handling origination, underwriting,
              compliance and servicing with just a few lines of code.
              <p>
                There’s no ‘try it out’ link, primarily because (as most fintech
                devs know) there are compliance and regulatory thresholds that
                make it hard for us to give out sandbox keys freely. However,
                we’ve put together this video to show you the basics of how Pier
                works:
                <a
                  href="https://www.loom.com/share/04883eb17f394b46a67cce919cb77356"
                  >https://www.loom.com/share/04883eb17f394b46a67cce919cb77356</a
                >.
              </p>
              <p>
                Alex &amp; I worked together at our last company, a credit tech
                startup, where we saw how businesses struggle to launch credit
                products quickly &amp; compliantly, due to fragmented solutions
                and high compliance hurdles. We’ve talked to many companies
                looking to launch their own product, and are taking our
                learnings from before to build a modular, flexible credit stack.
              </p>
              <p>
                Credit is highly complex and requires a dedicated team -—and few
                people specialize in this. Unlike social apps where you can
                launch with a 70% product and iterate over time, credit is
                heavily regulated and needs to be done 100% right from the
                beginning. When you factor this in with federal and state
                regulations across 50 states, the tech stack and compliance
                hurdles become too time-consuming and expensive for companies to
                build in-house, especially for fast-moving teams trying to build
                innovative products. We’re talking 9-12 months of buildout and
                millions of dollars. This is what most companies struggle with
                and it’s why we’re valuable to them.
              </p>
              <p>
                Our credit infrastructure gives developers the freedom of not
                having to worry about the details of managing a credit program.
                Using Pier, they can offer credit to their users without ever
                directing them outside their app. Our API powers it all under
                the hood (see API docs:
                <a href="https://pier-dev.readme.io"
                  >https://pier-dev.readme.io</a
                >)
              </p>
              <p>
                For example, a business (say "ACME") has a user who comes to
                their platform &amp; applies for a loan. That user stays on
                ACME’s platform and is never redirected to a 3rd party. ACME
                owns the entire UX from presenting loan offer, to signing loan
                docs, to disbursing funds, sending statements and collecting
                payments. What ACME doesn’t have to deal with is any of the back
                end. Each part of this flow is powered by Pier API.
              </p>
              <p>
                We support the full credit lifecycle from loan origination to
                loan servicing. Want to generate a loan doc for a specific
                credit offer &amp; user? We've an endpoint that creates a pdf to
                present to the user, and ensures it doesn’t violate any laws for
                the state the user is in. Want to retrieve loan balance,
                generate loan statement or process loan payment? We've API
                endpoints for that too.
              </p>
              <p>
                There're existing products that solve parts of the credit stack,
                such as KYC &amp; underwriting, but nothing that solves the
                credit stack end-to-end. Credit is different from payments and
                banking-—those are 1x activities, while loan terms are for 12
                months or more. We see “credit” as a living-and-breathing
                creature that evolves throughout each loan’s life cycle due to a
                variety of behaviors, hence requires an end-to-end solution to
                properly address.
              </p>
              <p>
                Since launching a few months ago, we’ve onboarded several
                customers and have live loan traffic on our platform. Our
                existing customers use Pier to provide a wide variety of credit
                products to their users, including BNPL for wedding, credit
                builder, BNPL for clean energy, salary advance loans, portfolio
                line of credit, etc.
              </p>
              <p>
                Pricing - Monthly min Saas fee ($7-20k/mth), and a usage fee of
                0.2-1.0% of loan volume for origination and servicing. This
                largely depends on the credit program and loan volume.
              </p>
              <p>
                We’re building devtools to enable the next-gen of credit
                products, with our goal to make credit more accessible to
                everyone! We’re super eager to get your feedback — What’s your
                experience building in fintech/credit? What can we do to make
                this better? Anything else that comes to mind? Thank you!
              </p>
            </div>
          </section>
        </section>
        <section id="37911900">
          <h3>
            <a
              class="item"
              href="https://ntietz.com/blog/write-more-useless-software/"
              >Write more "useless" software</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 08:05:16</span
              ><span class="points-container"
                >Points: <span class="points">736</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37911900"
                  >Comments</a
                ><span class="descendants">: 215</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
