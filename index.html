<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44971273">
          <h3>
            <a
              class="item"
              href="https://www.telegraph.co.uk/business/2025/08/21/zuckerberg-freezes-ai-hiring-amid-bubble-fears/"
              >Mark Zuckerberg freezes AI hiring amid bubble fears</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-21 @ 11:04:08</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44971273"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44970751">
          <h3>
            <a
              class="item"
              href="https://meyerweb.com/eric/thoughts/2025/08/20/to-infinity-but-not-beyond/"
              >To Infinity but Not Beyond</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-21 @ 09:30:52</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44970751"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44970401">
          <h3>
            <a
              class="item"
              href="https://www.timeextension.com/news/2025/08/dev-reveals-secrets-behind-stunning-new-3d-platformer-for-the-zx-spectrum"
              >Dev Reveals Secrets Behind New "3D" Platformer for the ZX
              Spectrum</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-21 @ 08:21:35</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44970401"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44969622">
          <h3>
            <a class="item" href="https://github.com/Growth-Kinetics/DiffMem"
              >Show HN: I replaced vector databases with Git for AI memory
              (PoC)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-21 @ 06:20:11</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44969622"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
            <div class="text">
              <p>
                The insight: Git already solved versioned document management.
                Why are we building complex vector stores when we could just use
                markdown files with Git's built-in diff/blame/history?
              </p>
              <p>How it works:</p>
              <p>
                Memories stored as markdown files in a Git repo Each
                conversation = one commit git diff shows how understanding
                evolves over time BM25 for search (no embeddings needed) LLMs
                generate search queries from conversation context Example: Ask
                "how has my project evolved?" and it uses git diff to show
                actual changes in understanding, not just similarity scores.
              </p>
              <p>
                This is very much a PoC - rough edges everywhere, not production
                ready. But it's been working surprisingly well for personal use.
                The entire index for a year of conversations fits in ~100MB RAM
                with sub-second retrieval.
              </p>
              <p>
                The cool part: You can git checkout to any point in time and see
                exactly what the AI knew then. Perfect reproducibility,
                human-readable storage, and you can manually edit memories if
                needed.
              </p>
              <p>
                GitHub:
                <a href="https://github.com/Growth-Kinetics/DiffMem"
                  >https://github.com/Growth-Kinetics/DiffMem</a
                >
              </p>
              <p>
                Stack: Python, GitPython, rank-bm25, OpenRouter for LLM
                orchestration. MIT licensed.
              </p>
              <p>
                Would love feedback on the approach. Is this crazy or clever?
                What am I missing that will bite me later?
              </p>
            </div>
          </section>
        </section>
        <section id="44969221">
          <h3>
            <a class="item" href="https://fstring.help/cheat/"
              >Python f-string cheat sheets (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-21 @ 05:08:08</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44969221"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44969211">
          <h3>
            <a
              class="item"
              href="https://www.tedinski.com/2018/01/23/data-objects-and-being-railroaded-into-misdesign.html"
              >Data, objects, and how we're railroaded into poor design
              (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-21 @ 05:06:05</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44969211"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44968883">
          <h3>
            <a
              class="item"
              href="https://thereader.mitpress.mit.edu/why-repetition-in-art-pleases-the-brain/"
              >The Pleasure of Patterns in Art</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-21 @ 03:53:47</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44968883"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44967796">
          <h3>
            <a
              class="item"
              href="https://www.statsignificant.com/p/is-rotten-tomatoes-still-reliable"
              >A statistical analysis of Rotten Tomatoes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-21 @ 00:10:07</span
              ><span class="points-container"
                >Points: <span class="points">160</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44967796"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44967469">
          <h3>
            <a
              class="item"
              href="https://tigerbeetle.com/blog/2025-08-04-code-review-can-be-better/"
              >Code review can be better</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 23:10:37</span
              ><span class="points-container"
                >Points: <span class="points">302</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44967469"
                  >Comments</a
                ><span class="descendants">: 165</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44966408">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/coris/jobs/rqO40yy-ai-engineer"
              >Coris (YC S22) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 21:00:14</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44966170">
          <h3>
            <a class="item" href="https://github.com/plutoprint/plutoprint"
              >Show HN: PlutoPrint – Generate PDFs and PNGs from HTML with
              Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 20:37:58</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44966170"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’d be glad to hear what you think. If you’ve ever had to
                wrestle with generating PDFs or images from HTML, I hope this
                feels like a smoother option. Feedback, ideas, or even just
                impressions are all very welcome, and I’d love to learn how
                PlutoPrint could be more useful for you.
              </p>
            </div>
          </section>
        </section>
        <section id="44965233">
          <h3>
            <a
              class="item"
              href="https://mackuba.eu/2025/08/20/introduction-to-atproto/"
              >Introduction to AT Protocol</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 19:13:09</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44965233"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44964916">
          <h3>
            <a class="item" href="https://github.com/zedless-editor/zed"
              >Zedless: Zed fork focused on privacy and being local-first</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 18:47:03</span
              ><span class="points-container"
                >Points: <span class="points">510</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44964916"
                  >Comments</a
                ><span class="descendants">: 273</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44964693">
          <h3>
            <a class="item" href="https://imperialcollegelondon.github.io/FLT/"
              >Project to formalise a proof of Fermat’s Last Theorem in the Lean
              theorem prover</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 18:27:25</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44964693"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44963724">
          <h3>
            <a class="item" href="https://github.com/google/pytype"
              >An Update on Pytype</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 17:04:51</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44963724"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44963135">
          <h3>
            <a class="item" href="https://github.com/luminal-ai/luminal"
              >Show HN: Luminal – Open-source, search-based GPU compiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 16:01:13</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44963135"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
            <div class="text">
              <a href="https://luminalai.com/">https://luminalai.com/</a>), a
              GPU compiler for automatically generating fast GPU kernels for AI
              models. It uses search-based compilation to achieve high
              performance.
              <p>
                We take high level model code, like you'd have in PyTorch, and
                generate very fast GPU code. We do that without using LLMs or AI
                - rather, we pose it as a search problem. Our compiler builds a
                search space, generates millions of possible kernels, and then
                searches through it to minimize runtime.
              </p>
              <p>
                You can try out a demo in `demos/matmul` on mac to see how
                Luminal takes a naive operation, represented in our IR of 12
                simple operations, and compiles it to an optimized, tensor-core
                enabled Metal kernel. Here’s a video showing how:
                <a href="https://youtu.be/P2oNR8zxSAA"
                  >https://youtu.be/P2oNR8zxSAA</a
                >
              </p>
              <p>
                Our approach differs significantly from traditional ML libraries
                in that we ahead-of-time compile everything, generate a large
                search space of logically-equivalent kernels, and search through
                it to find the fastest kernels. This allows us to leverage the
                Bitter Lesson to discover complex optimizations like Flash
                Attention entirely automatically without needing manual
                heuristics. The best rule is no rule, the best heuristic is no
                heuristic, just search everything.
              </p>
              <p>
                We’re working on bringing CUDA support up to parity with Metal,
                adding more flexibility to the search space, adding full-model
                examples (like Llama), and adding very exotic hardware backends.
              </p>
              <p>
                We aim to radically simplify the ML ecosystem while improving
                performance and hardware utilization. Please check out our repo:
                <a href="https://github.com/luminal-ai/luminal"
                  >https://github.com/luminal-ai/luminal</a
                >
                and I’d love to hear your thoughts!
              </p>
            </div>
          </section>
        </section>
        <section id="44962881">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44962881"
              >Launch HN: Channel3 (YC S25) – A database of every product on the
              internet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 15:34:07</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44962881"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
            <div class="text">
              <a href="https://trychannel3.com/">https://trychannel3.com/</a>),
              a database of every product on the internet, searchable via
              text/image, and with built-in affiliate monetization. Here’s a
              demo:
              <a href="https://www.youtube.com/watch?v=Mx8FyP7KvJg"
                >https://www.youtube.com/watch?v=Mx8FyP7KvJg</a
              >.
              <p>
                It’s surprisingly hard to find good product data. If you want
                your software to recommend products and deep-link to merchants,
                you’ll quickly discover that the data you need—clean titles,
                normalized attributes, deduped listings, current prices and
                inventory, variant options, images, and brand info—is not just
                messy; it’s also spread across a long, long tail of retailers,
                and often lives behind advanced bot-detection systems.
              </p>
              <p>
                We ran into this problem while building an AI teacher that could
                recommend relevant supplies. We asked Exa for products, but got
                back articles, not structured data. Same for Tavily and Bing
                (deprecated as of 8/13/25). And we got rejected from affiliate
                programs, who suggested we come back with 1000s of TikTok
                followers. Channel3 is the API we wished we had.
              </p>
              <p>
                Product detail pages (PDPs) usually present the main item
                alongside recommendations. We use computer vision to isolate the
                main product and find its attributes, like title and price. We
                apply the same logic to the rest of the PDPs on the domain.
              </p>
              <p>
                Products are often sold across multiple retailers, with no
                guarantee they’ll be labeled consistently. We collapse products
                across the web into a canonicalized set by using LLMs and
                multimodal embeddings to actually understand each product.
              </p>
              <p>
                To normalize everything into a schema that tries to be both
                minimal and extensible, we have to be opinionated. Are a $50 10”
                and $60 12” skillet the same product? Probably not, but the
                S/M/L variants of a T-shirt are. Our goal is that any product
                you’d search for specifically is treated as its own product.
              </p>
              <p>
                We process a massive amount of data. We quickly ran out of room
                on our Cloudflare Vectorize indices and moved to the brand-new
                AWS S3 Vectors platform, syncing to OpenSearch for faster
                response times and more dynamic filtering. We hit rate limits
                constantly, so we spread our work over multiple cloud providers
                and AI models.
              </p>
              <p>
                You can search things like “outdoor grill, less than $1000”, or
                “sweat-resistant, wireless running earbuds”, or "women's jeans
                from Paige that look like [<a
                  href="https://www.gap.com/webcontent/0020/666/799/cn20666799.jpg"
                  >https://www.gap.com/webcontent/0020/666/799/cn20666799.jpg</a
                >]”. Products come back as JSON with title, brand, images,
                price, specs, etc.
              </p>
              <p>
                Developers earn commission on sales they drive (averaging 5%).
                Channel3 takes a cut. We want you to earn way more money from
                Channel3 than you spend on it. We win when you win.
              </p>
              <p>
                We provide an API, SDK (Typescript and Python), and MCP. We
                offer 1000 free searches, and charge $7/1000 searches after
                that. You can view expected commissions per-brand on our
                dashboard.
              </p>
              <p>
                So far, products are US-only (sorry! we will expand). We’re live
                with millions of products and hundreds of developers.
              </p>
              <p>
                To get started, make a free account at
                <a href="https://trychannel3.com">https://trychannel3.com</a>,
                then select which brands you’d like to sell (choose from 50k+ or
                request your own), generate an API key, and start selling and
                earning.
              </p>
              <p>
                We’d really appreciate feedback from this community. If you’ve
                built product search before, what did we miss in the schema? If
                you’ve tried to add commerce to an app, what blocked you? If you
                tried to build this yourself, what did you learn? Are there
                endpoints you wish existed (e.g. price alerts, back-in-stock
                webhooks, product feed)? For any suggestions, we’re all ears.
              </p>
              <p>
                We’ll be in the thread all day to answer questions, share more
                technical detail, and hear whatever would make this most useful
                to you. Comment away!
              </p>
            </div>
          </section>
        </section>
        <section id="44962771">
          <h3>
            <a
              class="item"
              href="https://petapixel.com/2025/08/20/home-depot-sued-for-secretly-using-facial-recognition-technology-on-self-checkout-cameras/"
              >Home Depot sued for 'secretly' using facial recognition at
              self-checkouts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 15:23:19</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44962771"
                  >Comments</a
                ><span class="descendants">: 221</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44962529">
          <h3>
            <a class="item" href="https://lock.cmpxchg8b.com/anubis.html"
              >Why are anime catgirls blocking my access to the Linux kernel?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 14:54:45</span
              ><span class="points-container"
                >Points: <span class="points">622</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44962529"
                  >Comments</a
                ><span class="descendants">: 654</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44962066">
          <h3>
            <a
              class="item"
              href="https://visualrambling.space/moving-objects-in-3d/"
              >Show HN: I was curious about spherical helix, ended up making
              this visualization</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 14:02:47</span
              ><span class="points-container"
                >Points: <span class="points">791</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44962066"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
            <div class="text">
              <p>
                I ended up learning about parametric equations again, and make
                this visualization to document what I learned:
              </p>
              <p>
                <a href="https://visualrambling.space/moving-objects-in-3d/"
                  >https://visualrambling.space/moving-objects-in-3d/</a
                >
              </p>
              <p>feel free to visit and let me know what you think!</p>
            </div>
          </section>
        </section>
        <section id="44962059">
          <h3>
            <a
              class="item"
              href="https://github.com/rasbt/LLMs-from-scratch/tree/main/ch05/12_gemma3"
              >Gemma 3 270M re-implemented in pure PyTorch for local
              tinkering</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 14:01:26</span
              ><span class="points-container"
                >Points: <span class="points">387</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44962059"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44961172">
          <h3>
            <a class="item" href="https://zed.dev/blog/sequoia-backs-zed"
              >Sequoia backs Zed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-20 @ 12:13:16</span
              ><span class="points-container"
                >Points: <span class="points">412</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44961172"
                  >Comments</a
                ><span class="descendants">: 271</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44942099">
          <h3>
            <a class="item" href="https://mavericksforever.com/"
              >Show HN: OS X Mavericks Forever</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-18 @ 16:01:44</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44942099"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44940896">
          <h3>
            <a
              class="item"
              href="https://gr-im.github.io/a/dependency-injection.html"
              >Basic dependency injection in OCaml with objects</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-18 @ 14:17:01</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44940896"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44936535">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2025/05/gouach-wants-you-to-insert-and-pluck-the-cells-from-its-infinite-e-bike-battery/"
              >French firm Gouach is pitching an Infinite Battery with
              replaceable cells</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-18 @ 01:32:44</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44936535"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44933290">
          <h3>
            <a
              class="item"
              href="https://koreajoongangdaily.joins.com/news/2025-08-15/business/tech/Thanks-Nvidia-SK-hynix-dethrones-Samsung-as-worlds-top-DRAM-maker-for-first-time-in-over-30-years/2376834"
              >SK hynix dethrones Samsung as world’s top DRAM maker</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-17 @ 17:31:33</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44933290"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44933019">
          <h3>
            <a class="item" href="https://chriskw.xyz/2025/08/11/Wine/"
              >Sixteen Bottles of Wine Riddle</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-17 @ 16:57:50</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44933019"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44932401">
          <h3>
            <a class="item" href="https://www.nmichaels.org/musings/d4d4/d4d4/"
              >D4d4</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-17 @ 15:42:32</span
              ><span class="points-container"
                >Points: <span class="points">231</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44932401"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44931371">
          <h3>
            <a class="item" href="https://mw.rat.bz/MX-80/"
              >Epson MX-80 Fonts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-17 @ 13:18:21</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44931371"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44931305">
          <h3>
            <a
              class="item"
              href="https://www.unicode.org/L2/L2019/19310-mirror-ball-emoji.pdf"
              >Mirror Ball Emoji Proposal (2018) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-17 @ 13:05:31</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44931305"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
