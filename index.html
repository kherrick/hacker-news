<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44391711">
          <h3>
            <a
              class="item"
              href="https://9to5mac.com/2025/06/25/senators-reintroduce-app-store-bill-to-rein-in-gatekeeper-power-in-the-app-economy/"
              >Senators reintroduce App Store bill to rein in 'gatekeeper
              power'</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 21:35:58</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44391711"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390962">
          <h3>
            <a class="item" href="https://www.isc.org/blogs/kea-3-0/"
              >Kea 3.0, our first LTS version</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 20:26:33</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390962"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390915">
          <h3>
            <a class="item" href="https://openai.com/index/robots-that-learn/"
              >Robots that learn</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 20:22:54</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390915"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390781">
          <h3>
            <a class="item" href="https://angadh.com/space-data-centers-1"
              >Starcloud says 1 launch, $8M but ISS tech says 17 launches,
              $850M+</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 20:06:28</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390781"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390740">
          <h3>
            <a
              class="item"
              href="https://matrix.org/blog/2025/06/26/matrix-v1.15-release/"
              >Matrix v1.15</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 20:01:28</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390740"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390527">
          <h3>
            <a
              class="item"
              href="https://www.usenix.org/publications/loginonline/memory-safety-merely-table-stakes"
              >Memory safety is table stakes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 19:36:11</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390527"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390501">
          <h3>
            <a
              class="item"
              href="https://alternativelayoutsystem.com/scripts/#same-sizer"
              >Alternative Layout System</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 19:31:29</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390501"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390488">
          <h3>
            <a
              class="item"
              href="https://sharnoff.io/blog/why-rust-compiler-slow"
              >"Why is the Rust compiler so slow?"</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 19:29:32</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390488"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390454">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/economy-tariffs-trump-gdp-shrink-86d1f15e66c646ac4ce88ffc0a956942"
              >US economy shrank 0.5% in the first quarter, worse than earlier
              estimates</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 19:23:40</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390454"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390452">
          <h3>
            <a
              class="item"
              href="https://justinfagnani.com/2025/06/26/the-time-is-right-for-a-dom-templating-api/"
              >The time is right for a DOM templating API</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 19:23:28</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390452"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390113">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/signoz/jobs/cPaxcxt-devrel-engineer-remote-us-time-zones"
              >SigNoz (YC W21, Open Source Datadog) Is Hiring DevRel Engineers
              (Remote)(US)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 18:43:37</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390072">
          <h3>
            <a
              class="item"
              href="https://www.cell.com/current-biology/fulltext/S0960-9822(25)00507-X?_returnURL=https%3A%2F%2Flinkinghub.elsevier.com%2Fretrieve%2Fpii%2FS096098222500507X%3Fshowall%3Dtrue"
              >Lateralized sleeping positions in domestic cats</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 18:38:47</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390072"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44390005">
          <h3>
            <a class="item" href="https://github.com/magnitudedev/magnitude"
              >Show HN: Magnitude – Open-source AI browser automation
              framework</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 18:30:56</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44390005"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=43796003"
                >https://news.ycombinator.com/item?id=43796003</a
              >).
              <p>
                We got some great feedback from the community, with the most
                positive response being about our vision-first approach used in
                our browser agent. However, many wanted to use the underlying
                agent outside the testing domain. So today, we're releasing our
                fully featured AI browser automation framework.
              </p>
              <p>
                You can use it to automate tasks on the web, integrate between
                apps without APIs, extract data, test your web apps, or as a
                building block for your own browser agents.
              </p>
              <p>
                Traditionally, browser automation could only be done via the
                DOM, even though that’s not how humans use browsers. Most
                browser agents are still stuck in this paradigm. With a
                vision-first approach, we avoid relying on flaky DOM navigation
                and perform better on complex interactions found in a broad
                variety of sites, for example:
              </p>
              <p>- Drag and drop interactions</p>
              <p>- Data visualizations, charts, and tables</p>
              <p>- Legacy apps with nested iframes</p>
              <p>
                - Canvas and webGL-heavy sites (like design tools or photo
                editing)
              </p>
              <p>- Remote desktops streamed into the browser</p>
              <p>
                To interact accurately with the browser, we use visually
                grounded models to execute precise actions based on pixel
                coordinates. The model used by Magnitude must be smart enough to
                plan out actions but also able to execute them. Not many models
                are both smart *and* visually grounded. We highly recommend
                Claude Sonnet 4 for the best performance, but if you prefer open
                source, we also support Qwen-2.5-VL 72B.
              </p>
              <p>
                Most browser agents never make it to production. This is because
                of (1) the flaky DOM navigation mentioned above, but (2) the
                lack of control most browser agents offer. The dominant paradigm
                is you give the agent a high-level task + tools and hope for the
                best. This quickly falls apart for production automations that
                need to be reliable and specific. With Magnitude, you have
                fine-grained control over the agent with our `act()` and
                `extract()` syntax, and can mix it with your own code as needed.
                You also have full control of the prompts at both the action and
                agent level.
              </p>
              <p>```ts</p>
              <p>// Magnitude can handle high-level tasks</p>
              <p>await agent.act('Create an issue', {</p>
              <p></p>
              <pre><code>  // Optionally pass data that the agent will use where appropriate

  data: {

    title: 'Use Magnitude',

    description: 'Run "npx create-magnitude-app" and follow the instructions',

  },
</code></pre>
              });
              <p>// It can also handle low-level actions</p>
              <p>
                await agent.act('Drag "Use Magnitude" to the top of the in
                progress column');
              </p>
              <p>
                // Intelligently extract data based on the DOM content matching
                a provided zod schema
              </p>
              <p>const tasks = await agent.extract(</p>
              <p></p>
              <pre><code>    'List in progress issues',

    z.array(z.object({

        title: z.string(),

        description: z.string(),

        // Agent can extract existing data or new insights

        difficulty: z.number().describe('Rate the difficulty between 1-5')

    })),
</code></pre>
              );
              <p>```</p>
              <p>
                We have a setup script that makes it trivial to get started with
                an example, just run "npx create-magnitude-app". We’d love to
                hear what you think!
              </p>
              <p>
                Repo:
                <a href="https://github.com/magnitudedev/magnitude"
                  >https://github.com/magnitudedev/magnitude</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44389497">
          <h3>
            <a
              class="item"
              href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0323675"
              >Shifts in diatom and dinoflagellate biomass in the North Atlantic
              over 6 decades</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 17:36:04</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44389497"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44389202">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/introducing-gemma-3n-developer-guide/"
              >Introducing Gemma 3n</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 17:03:43</span
              ><span class="points-container"
                >Points: <span class="points">245</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44389202"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44388395">
          <h3>
            <a class="item" href="https://www.mdpi.com/2226-4310/12/6/519"
              >A Review of Aerospike Nozzles: Current Trends in Aerospace
              Applications</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 15:33:10</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44388395"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44388387">
          <h3>
            <a
              class="item"
              href="https://bfl.ai/announcements/flux-1-kontext-dev"
              >FLUX.1 Kontext [Dev] – Open Weights for Image Editing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 15:31:58</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44388387"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44388093">
          <h3>
            <a class="item" href="https://github.com/metabase/dataset-generator"
              >Show HN: I built an AI dataset generator</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 14:58:32</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44388093"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44387904">
          <h3>
            <a
              class="item"
              href="https://github.com/zarhus/zarhusbmc/discussions/3"
              >Access BMC UART on Supermicro X11SSH</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 14:40:00</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44387904"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44387828">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44387828"
              >Launch HN: Issen (YC F24) – Personal AI language tutor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 14:32:28</span
              ><span class="points-container"
                >Points: <span class="points">208</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44387828"
                  >Comments</a
                ><span class="descendants">: 187</span></span
              >
            </h4>
            <div class="text">
              <a href="https://issen.com">https://issen.com</a>), a foreign
              language voice tutor app that adapts to your interests, goals, and
              needs.
              <p>
                Demo:
                <a
                  href="https://www.loom.com/share/a78e713d46934857a2dc88aed1bb100d?sid=ec4dc1f3-1a4f-4d75-8e87-efbb3d2b2e90"
                  >https://www.loom.com/share/a78e713d46934857a2dc88aed1bb100d?...</a
                >
              </p>
              <p>
                We started this company after struggling to find great tools to
                practice speaking Japanese and French. Having a tutor can be
                awesome, but there are downsides: they can be expensive (since
                you pay by the hour), difficult to schedule, and have a high
                upfront cost (finding a tutor you like often forces you to cycle
                through a few that you don’t).
              </p>
              <p>
                We wanted something that would talk with us — realistically, in
                full conversations — and actually help us improve. So we built
                it ourselves. The app relies on a custom voice AI pipeline
                combining STT (speech-to-text), TTS (text-to-speech), LLMs, long
                term memory, interruptions, turn-taking, etc. Getting
                speech-to-text to work well for learners was one of the hardest
                parts — especially with accents, multi-lingual sentences, and
                noisy environments. We now combine Gemini Flash, Whisper,
                Scribe, and GPT-4o-transcribe to minimize errors and keep the
                conversation flowing.
              </p>
              <p>
                We didn’t want to focus too much on gamification. In our
                experience, that leads to users performing well in the app,
                achieving long streaks and so on, without actually getting
                fluent in the language you're wanting to learn.
              </p>
              <p>
                With ISSEN you instantly speak and immerse yourself in the
                language, which, while not easy, is a much more efficient way to
                learn.
              </p>
              <p>
                We combine this with a word bank and SRS flashcards for new
                words learned in the AI voice chats, which allows very rapid
                improvement in both vocabulary and speaking skills. We also
                create custom curriculums for each student based on goals,
                interests, and preferences, and fully customizable settings like
                speed, turn taking, formality, etc.
              </p>
              <p>
                App: <a href="https://issen.com">https://issen.com</a> (works on
                web, iOS, Android) Pricing: 20 min free trial, $20–29/month
                (depending on duration and specific geography)
              </p>
              <p>
                We’d love your feedback — on the tech, the UX, or what you’d
                wish from a tool like this. Thanks!
              </p>
            </div>
          </section>
        </section>
        <section id="44387659">
          <h3>
            <a
              class="item"
              href="https://deepmind.google/discover/blog/alphagenome-ai-for-better-understanding-the-genome/"
              >AlphaGenome: AI for better understanding the genome</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 14:16:00</span
              ><span class="points-container"
                >Points: <span class="points">318</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44387659"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44385981">
          <h3>
            <a
              class="item"
              href="https://research.google/blog/muvera-making-multi-vector-retrieval-as-fast-as-single-vector-search/"
              >Muvera: Making multi-vector retrieval as fast as single-vector
              search</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 10:29:34</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44385981"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44385562">
          <h3>
            <a class="item" href="https://snowemu.com/"
              >Snow - Classic Macintosh emulator</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-26 @ 09:08:00</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44385562"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/twvd/snow"
                >https://github.com/twvd/snow</a
              >, Originally-submitted source explaining project:
              <a href="https://oldbytes.space/@smallsco/114747196289375530"
                >https://oldbytes.space/@smallsco/114747196289375530</a
              >,
            </div>
          </section>
        </section>
        <section id="44382834">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/puerto-rico-solar-microgrids"
              >Puerto Rico's Solar Microgrids Beat Blackout</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-25 @ 23:41:16</span
              ><span class="points-container"
                >Points: <span class="points">331</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44382834"
                  >Comments</a
                ><span class="descendants">: 189</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44381297">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/a-new-pyramid-like-shape-always-lands-the-same-side-up-20250625/"
              >A new pyramid-like shape always lands the same side up</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-25 @ 20:01:07</span
              ><span class="points-container"
                >Points: <span class="points">607</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44381297"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44358148">
          <h3>
            <a class="item" href="https://ambient.garden">Ambient Garden</a>
          </h3>
          <section>
            <h4>
              <span>2025-06-23 @ 17:38:08</span
              ><span class="points-container"
                >Points: <span class="points">281</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44358148"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44356385">
          <h3>
            <a class="item" href="https://samestep.com/blog/random-access/"
              >How much slower is random access, really?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-23 @ 14:49:31</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44356385"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44355409">
          <h3>
            <a
              class="item"
              href="https://thereader.mitpress.mit.edu/the-business-of-betting-on-catastrophe/"
              >The Business of Betting on Catastrophe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-23 @ 13:04:26</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44355409"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44353576">
          <h3>
            <a class="item" href="https://github.com/Sakura-sx/typr"
              >Typr – TUI typing test with a word selection algorithm inspired
              by keybr</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-23 @ 08:27:03</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44353576"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44352990">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2506.16883"
              >Low Overhead Allocation Sampling in a Garbage Collected Virtual
              Machine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-23 @ 06:26:19</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44352990"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
