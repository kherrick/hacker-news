<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46219544">
          <h3>
            <a
              class="item"
              href="https://historicengland.org.uk/images-books/archive/collections/aerial-photos/"
              >England Historic Aerial Photo Explorer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 16:13:57</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46219544"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46219538">
          <h3>
            <a
              class="item"
              href="https://qwen.ai/blog?id=qwen3-omni-flash-20251201"
              >Qwen3-Omni-Flash-2025-12-01：a next-generation native multimodal
              large model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 16:13:38</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46219538"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46219386">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46219386"
              >Launch HN: InspectMind (YC W24) – AI agent for reviewing
              construction drawings</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 16:05:03</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46219386"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.inspectmind.ai/"
                >https://www.inspectmind.ai/</a
              >), an AI “plan checker” that finds issues in construction
              drawings, details, and specs.
              <p>
                Construction drawings quietly go out with lots of errors:
                dimension conflicts, co-ordination gaps, material mismatches,
                missing details and more. These errors turn into delays and
                hundreds of thousands of dollars of rework during construction.
                InspectMind reviews the full drawing set of a construction
                project in minutes. It cross-checks architecture, engineering,
                and specifications to catch issues that cause rework before
                building begins.
              </p>
              <p>
                Here’s a video with some examples:
                <a href="https://www.youtube.com/watch?v=Mvn1FyHRlLQ"
                  >https://www.youtube.com/watch?v=Mvn1FyHRlLQ</a
                >.
              </p>
              <p>
                Before this, I (Aakash) built an engineering firm that worked on
                ~10,000 buildings across the US. One thing that always
                frustrated us: a lot of design coordination issues don’t show up
                until construction starts. By then, the cost of a mistake can be
                10–100x higher, and everyone is scrambling to fix problems that
                could have been caught earlier.
              </p>
              <p>
                We tried everything including checklists, overlay reviews, peer
                checks but scrolling through 500–2000 PDF sheets and remembering
                how every detail connects to every other sheet is a brittle
                process. City reviewers and GC pre-con teams try to catch issues
                too, yet they still sneak through.
              </p>
              <p>
                We thought: if models can parse code and generate working
                software, maybe they can also help reason about the built
                environment on paper. So we built something we wished we had!
              </p>
              <p>
                You upload drawings and specs (PDFs). The system breaks them
                into disciplines and detail hierarchies, parses geometry and
                text, and looks for inconsistencies: - Dimensions that don’t
                reconcile across sheets; - Clearances blocked by
                mechanical/architectural elements; - Fire/safety details missing
                or mismatched; - Spec requirements that never made it into
                drawings; - Callouts referencing details that don’t exist.
              </p>
              <p>
                The output is a list of potential issues with sheet refs and
                locations for a human to review. We don’t expect automation to
                replace design judgment, just to help ACE professionals not miss
                the obvious stuff. Current AIs are good at obvious stuff, plus
                can process data at quantities way beyond what humans can
                accurately do, so this is a good application for them.
              </p>
              <p>
                Construction drawings aren't standardized and every firm names
                things differently. Earlier “automated checking” tools relied
                heavily on manually-written rules per customer, and break when
                naming conventions change. Instead, we’re using multimodal
                models for OCR + vector geometry, callout graphs across the
                entire set, constraint-based spatial checks, and
                retrieval-augmented code interpretation. No more hard-coded
                rules!
              </p>
              <p>
                We’re processing residential, commercial, and industrial
                projects today. Latency ranges from minutes to a few hours
                depending on sheet count. There’s no onboarding required, simply
                upload PDFs. There are still lots of edge cases (PDF extraction
                weirdness, inconsistent layering, industry jargon), so we’re
                learning a lot from failures, maybe more than successes. But the
                tech is already delivering results that couldn’t be done with
                previous tools.
              </p>
              <p>
                Pricing is pay-as-you-go: we give an instant online quote per
                project after you upload the project drawings. It’s hard to do
                regular SaaS pricing since one project may be a home remodel and
                another may be a highrise. We’re open to feedback on that too,
                we’re still figuring it out.
              </p>
              <p>
                If you work with drawings as an architect, engineer, MEP, GC
                preconstruction, real estate developer, plan reviewer we’d love
                a chance to run a sample set and hear what breaks, what’s
                useful, and what’s missing!
              </p>
              <p>
                We’ll be here all day to go into technical details about
                geometry parsing, clustering failures, code reasoning attempts
                or real-world construction stories about how things go wrong.
                Thanks for reading! We’re happy to answer anything and look
                forward to your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="46219346">
          <h3>
            <a class="item" href="https://neal.fun/size-of-life/"
              >Size of Life</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 16:02:57</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46219346"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46218800">
          <h3>
            <a
              class="item"
              href="https://www.qualcomm.com/news/releases/2025/12/qualcomm-acquires-ventana-micro-systems--deepening-risc-v-cpu-ex"
              >Qualcomm acquires RISC-V focused Ventana Micro Systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 15:30:46</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46218800"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46218725">
          <h3>
            <a
              class="item"
              href="https://e360.yale.edu/digest/new-york-congestion-pricing-pollution"
              >In New York City, congestion pricing leads to marked drop in
              pollution</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 15:25:05</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46218725"
                  >Comments</a
                ><span class="descendants">: 213</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46218538">
          <h3>
            <a class="item" href="https://tritium.legal/blog/outlook"
              >COM Like a Bomb: Rust Outlook Add-in</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 15:10:36</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46218538"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46218202">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/review/kindle-scribe-colorsoft-2025/"
              >The New Kindle Scribes Are Great, but Not Great Enough</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 14:39:05</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46218202"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46214693">
          <h3>
            <a
              class="item"
              href="https://eli.thegreenplace.net/2025/revisiting-lets-build-a-compiler/"
              >Revisiting "Let's Build a Compiler"</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 06:22:19</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46214693"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46213585">
          <h3>
            <a class="item" href="https://lwn.net/Articles/1049831/"
              >Rust in the kernel is no longer experimental</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 03:15:24</span
              ><span class="points-container"
                >Points: <span class="points">829</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46213585"
                  >Comments</a
                ><span class="descendants">: 602</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46210748">
          <h3>
            <a class="item" href="https://www.bloodhoundsecurity.ca"
              >Show HN: Bloodhound – Grey-box attack-path discovery in
              Rust/Go/C++ binaries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 21:14:15</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46210748"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                We built a CLI tool to bridge this gap using grey box testing
                from a red team approach. We use internal knowledge of the
                codebase to guide parallel execution, allowing us to find
                complex or hidden logic errors and attack paths standard
                linters/scanners miss.
              </p>
              <p>
                The Tech (Grey Box Graphing &amp; Execution): - Internal
                Graphing (The Map): It ingests the codebase to build a
                dependency graph of the internal logic. - Parallel Execution
                (The Test): The code is then tested on parallel engines. We spin
                up copies of your local dev environment to exercise the codebase
                in thousands of ways. This is the validation that proves a bug
                is real. - Logic Error Detection: Because It understands the
                intended architecture (the graph) and sees the actual behavior
                (execution), we can flag Logic Errors, (ex. race conditions,
                state inconsistencies, memory leaks etc). - Tainted Flow
                Mapping: We map tainted control flow over the dependency graph.
                This highlights exactly how external input threads through your
                logic to trigger a vulnerability. It then spins up a local
                instance to replay this flow and confirm the exploit.
              </p>
              <p>
                How it runs: It runs locally via CLI to maintain privacy with
                secure repos and ease. Generates remediation via MD reports
                pinpointing the line of the error and downstream effects.
              </p>
              <p>
                The Trade-off: This approach trades power for speed and deep
                testing. This testing engine is recommended for more
                sophisticated systems.
              </p>
              <p>
                Try it out: We are currently opening our beta VS extension for
                early users.
              </p>
              <p>
                Optimized for (Rust, C++, Go, Java) and IaC (Terraform, Docker,
                K8s). Also supports Python, TS/JS, C#, PHP, and (20+ other
                languages).
              </p>
              <p>
                P.S. We are happy to run this ourselves on repos. If you
                maintain a complex project and want to see if our engine can
                find logic or security holes, drop a link or reach out via the
                comments/site and we’ll do it and send the results.
              </p>
            </div>
          </section>
        </section>
        <section id="46210240">
          <h3>
            <a
              class="item"
              href="https://adamj.eu/tech/2025/12/03/django-whats-new-6.0/"
              >Django: what’s new in 6.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 20:33:14</span
              ><span class="points-container"
                >Points: <span class="points">349</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46210240"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46208962">
          <h3>
            <a class="item" href="https://letsencrypt.org/2025/12/09/10-years"
              >10 Years of Let's Encrypt</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 18:54:55</span
              ><span class="points-container"
                >Points: <span class="points">770</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46208962"
                  >Comments</a
                ><span class="descendants">: 320</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46208773">
          <h3>
            <a
              class="item"
              href="https://dylanbeattie.net/2025/12/08/so-you-want-to-speak-at-software-conferences.html"
              >So you want to speak at software conferences?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 18:42:27</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46208773"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46207505">
          <h3>
            <a
              class="item"
              href="https://stephenramsay.net/posts/vibe-coding.html"
              >If you're going to vibe code, why not do it in C?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 17:11:09</span
              ><span class="points-container"
                >Points: <span class="points">583</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46207505"
                  >Comments</a
                ><span class="descendants">: 546</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46207464">
          <h3>
            <a class="item" href="https://www.digitalpublicgoods.net/r/peertube"
              >PeerTube is recognized as a digital public good by Digital Public
              Goods Alliance</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 17:08:37</span
              ><span class="points-container"
                >Points: <span class="points">634</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46207464"
                  >Comments</a
                ><span class="descendants">: 134</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46207425">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/news/donating-the-model-context-protocol-and-establishing-of-the-agentic-ai-foundation"
              >Donating the Model Context Protocol and establishing the Agentic
              AI Foundation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 17:05:42</span
              ><span class="points-container"
                >Points: <span class="points">274</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46207425"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46206531">
          <h3>
            <a class="item" href="https://bruno-simon.com/"
              >Bruno Simon – 3D Portfolio</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 16:06:58</span
              ><span class="points-container"
                >Points: <span class="points">704</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46206531"
                  >Comments</a
                ><span class="descendants">: 165</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46206277">
          <h3>
            <a
              class="item"
              href="https://boomsupersonic.com/flyby/ai-needs-more-power-than-the-grid-can-deliver-supersonic-tech-can-fix-that"
              >A supersonic engine core makes the perfect power turbine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 15:51:32</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46206277"
                  >Comments</a
                ><span class="descendants">: 252</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46205661">
          <h3>
            <a
              class="item"
              href="https://repebble.com/blog/meet-pebble-index-01-external-memory-for-your-brain"
              >Pebble Index 01 – External memory for your brain</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 15:03:09</span
              ><span class="points-container"
                >Points: <span class="points">560</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46205661"
                  >Comments</a
                ><span class="descendants">: 538</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46205632">
          <h3>
            <a
              class="item"
              href="https://dosaygo-studio.github.io/hn-front-page-2035/news"
              >Show HN: Gemini Pro 3 imagines the HN front page 10 years from
              now</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 15:00:38</span
              ><span class="points-container"
                >Points: <span class="points">3176</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46205632"
                  >Comments</a
                ><span class="descendants">: 907</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46205437">
          <h3>
            <a class="item" href="https://mistral.ai/news/devstral-2-vibe-cli"
              >Mistral releases Devstral2 and Mistral Vibe CLI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 14:45:01</span
              ><span class="points-container"
                >Points: <span class="points">697</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46205437"
                  >Comments</a
                ><span class="descendants">: 321</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46171008">
          <h3>
            <a
              class="item"
              href="https://aws.amazon.com/ec2/instance-types/m9g/"
              >Amazon EC2 M9g Instances</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-06 @ 05:36:48</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46171008"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46170707">
          <h3>
            <a
              class="item"
              href="https://www.cam.ac.uk/stories/volcanoes-black-death"
              >Volcanic eruptions set off a chain of events that brought Black
              Death to Europe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-06 @ 04:31:42</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46170707"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46164197">
          <h3>
            <a
              class="item"
              href="https://blog.mozilla.org/en/mozilla/av1-video-codec-wins-emmy/"
              >When a video codec wins an Emmy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 17:15:01</span
              ><span class="points-container"
                >Points: <span class="points">243</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46164197"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46155740">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/lifestyle/culture-current/anna-possi-six-decades-behind-counter-italys-bar-centrale-2025-11-20/"
              >Italy's longest-serving barista reflects on six decades behind
              the counter</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 01:22:29</span
              ><span class="points-container"
                >Points: <span class="points">270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46155740"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46154220">
          <h3>
            <a
              class="item"
              href="https://gizmodo.com/literally-a-map-showing-all-the-buildings-in-the-world-2000694696"
              >Map of all the buildings in the world</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-04 @ 22:43:33</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46154220"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46140579">
          <h3>
            <a
              class="item"
              href="https://eamonnsullivan.co.uk/posts-output/email-setup/2025-12-3-putting-email-in-its-place/"
              >Putting email in its place with Emacs and Mu4e</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-03 @ 21:42:48</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46140579"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46128523">
          <h3>
            <a
              class="item"
              href="https://thejpster.org.uk/blog/blog-2025-12-02/"
              >Running Linux on a RiscPC – why is it so hard?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-02 @ 23:48:19</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46128523"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46127981">
          <h3>
            <a class="item" href="https://cloth.mikail-khan.com/"
              >Cloth Simulation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-02 @ 22:44:37</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46127981"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
