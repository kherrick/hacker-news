<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45764986">
          <h3>
            <a
              class="item"
              href="https://www.apple.com/newsroom/2025/10/apple-reports-fourth-quarter-results/"
              >Apple reports fourth quarter results</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 20:34:02</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45764986"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45763877">
          <h3>
            <a class="item" href="https://github.com/itsfrank/MinecraftHDL"
              >Minecraft HDL, an HDL for Redstone</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 18:59:02</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45763877"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45763858">
          <h3>
            <a class="item" href="https://www.truthwave.com"
              >TruthWave – A platform for corporate whistleblowers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 18:57:39</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45763858"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45763769">
          <h3>
            <a
              class="item"
              href="https://zachholman.com/posts/money-off-the-table"
              >Taking money off the table</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 18:50:11</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45763769"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45763076">
          <h3>
            <a
              class="item"
              href="https://twitter.com/XenoPanther/status/1983477707968291075"
              >I have released a 69.0MB version of Windows 7 x86</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 18:05:39</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45763076"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45762837">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2025/11/03/some-people-cant-see-mental-images-the-consequences-are-profound"
              >Some people can't see mental images</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 17:45:53</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45762837"
                  >Comments</a
                ><span class="descendants">: 217</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.ph/iMdvd">https://archive.ph/iMdvd</a>
            </div>
          </section>
        </section>
        <section id="45762259">
          <h3>
            <a
              class="item"
              href="https://www.dissonances.blog/p/the-ear-does-not-do-a-fourier-transform"
              >The ear does not do a Fourier transform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 17:01:20</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45762259"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45762012">
          <h3>
            <a class="item" href="https://app.propolis.tech/#/launch"
              >Launch HN: Propolis (YC X25) – Browser agents that QA your web
              app autonomously</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 16:40:02</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45762012"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
            <div class="text">
              <p>
                You can try an initial run (two minute set up) to get a feel for
                the product for free here: app.propolis.tech/#/launch. Or watch
                our demo video:
                <a
                  href="https://www.tella.tv/video/autonomous-qa-system-walkthrough-3s4e"
                  >https://www.tella.tv/video/autonomous-qa-system-walkthrough-...</a
                >
              </p>
              <p>The Problem</p>
              <p>
                Both Matt and I have been thinking about software quality for
                the last 10 years. While at Airtable Matt worked on the
                infrastructure team responsible for deploys and thought a lot
                about how to catch bugs before users did. Deterministic tests
                are incredibly effective at ensuring pre-defined behavior
                continues to function, but it's hard to get meaningful coverage
                &amp; easy to "stub/mock" so much that it's no longer
                representative of real usage.
              </p>
              <p>
                I like to pitch what we're building now as a set of “users” you
                can treat like a canary group without worrying about impacting
                real users.
              </p>
              <p>
                What we do: Propolis runs "swarms" of browser agents that
                collaborate to come up with user journeys, flag points of
                friction, and propose e2e tests that can then be run more
                cheaply on any trigger you'd like. We have customers from public
                companies to startups running "swarms" regularly to massively
                increase the breadth of their automated testing + running the
                produced tests as part of their CI pipeline to ensure that more
                specific flows stay working without needing to worry about
                updating playwright/selenium tests.
              </p>
              <p>
                One thing that really excites me about this approach is how
                flexible "checks" can be since they're evaluated partially via
                LLM, for example we've caught bugs related to the quality of
                non-deterministic output (think a shopping assistant
                recommending a product that the user then searches for and can’t
                find).
              </p>
              <p>Pricing and Availability</p>
              <p>
                It's production-ready today at $1000/month unlimited-use +
                active support for early users willing to give feedback and
                request features. We're also happy to work with you for
                capped-use / hobby plans at lower prices if you'd like to use it
                for smaller or personal projects.
              </p>
              <p>
                We'd love to hear from the HN community - especially curious if
                folks have thoughts on what else autonomous agents could
                validate beyond bugs and functional correctness. Try it out and
                let us know what you think!
              </p>
            </div>
          </section>
        </section>
        <section id="45761789">
          <h3>
            <a class="item" href="https://www.qt.io/blog/qt-creator-18-released"
              >Qt Creator 18 Released</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 16:23:56</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45761789"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45761445">
          <h3>
            <a class="item" href="https://www.affinity.studio/get-affinity"
              >Affinity Studio now free</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 15:54:38</span
              ><span class="points-container"
                >Points: <span class="points">564</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45761445"
                  >Comments</a
                ><span class="descendants">: 437</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.affinity.studio/"
                >https://www.affinity.studio/</a
              >
            </div>
          </section>
        </section>
        <section id="45761042">
          <h3>
            <a class="item" href="https://github.com/st-tech/ppf-contact-solver"
              >ZOZO's Contact Solver for physics-based simulations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 15:21:46</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45761042"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45760878">
          <h3>
            <a class="item" href="https://danieldelaney.net/normal/"
              >Free software scares normal people</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 15:07:15</span
              ><span class="points-container"
                >Points: <span class="points">329</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45760878"
                  >Comments</a
                ><span class="descendants">: 227</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45760328">
          <h3>
            <a
              class="item"
              href="https://therecord.media/us-declines-signing-cybercrime-treaty?"
              >US declines to join more than 70 countries in signing UN
              cybercrime treaty</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 14:22:44</span
              ><span class="points-container"
                >Points: <span class="points">270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45760328"
                  >Comments</a
                ><span class="descendants">: 177</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45760321">
          <h3>
            <a class="item" href="https://0github.com"
              >Show HN: I made a heatmap diff viewer for code reviews</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 14:21:58</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45760321"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
            <div class="text">
              <p>
                To try it, replace github.com with 0github.com in any
                pull-request URL. Under the hood, we split the PR into
                individual files, and for each file, we ask an LLM to annotate
                each line with a data structure that we parse into a colored
                heatmap.
              </p>
              <p>Examples:</p>
              <p>
                <a href="https://0github.com/manaflow-ai/cmux/pull/666"
                  >https://0github.com/manaflow-ai/cmux/pull/666</a
                >
              </p>
              <p>
                <a href="https://0github.com/stack-auth/stack-auth/pull/988"
                  >https://0github.com/stack-auth/stack-auth/pull/988</a
                >
              </p>
              <p>
                <a href="https://0github.com/tinygrad/tinygrad/pull/12995"
                  >https://0github.com/tinygrad/tinygrad/pull/12995</a
                >
              </p>
              <p>
                <a href="https://0github.com/simonw/datasette/pull/2548"
                  >https://0github.com/simonw/datasette/pull/2548</a
                >
              </p>
              <p>
                Notice how all the example links have a 0 prepended before
                github.com. This navigates you to our custom diff viewer where
                we handle the same URL path parameters as github.com. Darker
                yellows indicate that an area might require more investigation.
                Hover on the highlights to see the LLM's explanation. There's
                also a slider on the top left to adjust the "should review"
                threshold.
              </p>
              <p>
                Repo (MIT license):
                <a href="https://github.com/manaflow-ai/cmux"
                  >https://github.com/manaflow-ai/cmux</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45759649">
          <h3>
            <a
              class="item"
              href="http://mfranchi.net/posts/claustrophobic-streets/"
              >Estimating the perceived 'claustrophobia' of New York City's
              streets (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 13:10:03</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45759649"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45759572">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=v9Ob5yPpC0A"
              >Jujutsu at Google [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 13:00:58</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45759572"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45758421">
          <h3>
            <a class="item" href="https://roberdam.com/en/dinversiones.html"
              >Show HN: In a single HTML file, an app to encourage my children
              to invest</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 10:39:21</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45758421"
                  >Comments</a
                ><span class="descendants">: 329</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45755027">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/security/2025/10/npm-flooded-with-malicious-packages-downloaded-more-than-86000-times/"
              >NPM flooded with malicious packages downloaded more than 86k
              times</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 00:37:33</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45755027"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45751868">
          <h3>
            <a
              class="item"
              href="https://www.agwa.name/blog/post/verifying_go_reproducible_builds"
              >Independently verifying Go's reproducible builds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 19:32:00</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45751868"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45748484">
          <h3>
            <a
              class="item"
              href="https://www.tigerdata.com/blog/fluid-storage-forkable-ephemeral-durable-infrastructure-age-of-agents"
              >Replacing EBS and Rethinking Postgres Storage from First
              Principles</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 15:49:18</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45748484"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45746482">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/us-news/2025/oct/29/google-amazon-israel-contract-secret-code"
              >Israel demanded Google and Amazon use secret 'wink' to sidestep
              legal orders</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 13:20:03</span
              ><span class="points-container"
                >Points: <span class="points">468</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45746482"
                  >Comments</a
                ><span class="descendants">: 184</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45746020">
          <h3>
            <a
              class="item"
              href="https://andrewkelley.me/post/zig-new-async-io-text-version.html"
              >Zig's New Async I/O</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 12:35:12</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45746020"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.youtube.com/watch?v=mdOxIc0HM04"
                >https://www.youtube.com/watch?v=mdOxIc0HM04</a
              >
            </div>
          </section>
        </section>
        <section id="45736461">
          <h3>
            <a
              class="item"
              href="https://www.joshwcomeau.com/animation/linear-timing-function/"
              >Springs and bounces in native CSS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-28 @ 18:01:46</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45736461"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45724229">
          <h3>
            <a class="item" href="https://mealsyoulove.com"
              >Show HN: Meals You Love – AI-powered meal planning and grocery
              shopping</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 17:57:18</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45724229"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                I originally built this to help my wife with meal planning and
                grocery shopping. We were always struggling to decide what to
                make and inevitably forgot ingredients. Most meal planners felt
                too rigid or generic, and few handled the grocery side well (or
                at all). We've also used meal kits like Home Chef in the past
                but they end up being quite expensive and produce a comical
                amount of packaging waste, plus you still wind up needing to
                purchase groceries anyway. In all honesty, I also wanted an
                excuse to try building something "real" using AI and to see if
                it could be used in an actually useful manner.
              </p>
              <p>
                Would love feedback from anyone interested in food, meal
                planning, or product design!
              </p>
              <p>Tech stack:</p>
              <p>- Cloud Run</p>
              <p>- Firestore</p>
              <p>- Vertex AI / Gemini</p>
              <p>
                <a href="https://mealsyoulove.com">https://mealsyoulove.com</a>
              </p>
            </div>
          </section>
        </section>
        <section id="45712620">
          <h3>
            <a
              class="item"
              href="https://www.johndcook.com/blog/2025/10/26/987654321/"
              >987654321 / 123456789</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-26 @ 15:22:16</span
              ><span class="points-container"
                >Points: <span class="points">440</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45712620"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45711003">
          <h3>
            <a
              class="item"
              href="https://juliaobjects.github.io/Accessors.jl/stable/lenses/"
              >Lenses in Julia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-26 @ 11:53:08</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45711003"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45707971">
          <h3>
            <a class="item" href="https://www.chibiakumas.com/z80/"
              >Learn Multiplatform Z80 Assembly Programming with Vampires</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-26 @ 00:15:14</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45707971"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45702831">
          <h3>
            <a
              class="item"
              href="https://ducklake.select/2025/10/24/frozen-ducklake/"
              >Frozen DuckLakes for Multi-User, Serverless Data Access</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 10:57:51</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45702831"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45694032">
          <h3>
            <a class="item" href="https://github.com/geomys/sandboxed-step"
              >Show HN: Run a GitHub Actions step in a gVisor sandbox</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 12:42:31</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45694032"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45676941">
          <h3>
            <a class="item" href="https://github.com/Piebald-AI/tweakcc"
              >Tweakcc</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-23 @ 00:44:27</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45676941"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
