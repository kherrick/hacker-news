<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40663704">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=2MYzvQ1v8Ww"
              >Gerald Sussman: Programming is (should be) fun (2022) [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 22:02:27</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40663704"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40663356">
          <h3>
            <a
              class="item"
              href="https://english.kyodonews.net/news/2024/06/bc2d7f45d456-japan-enacts-law-to-curb-apple-googles-app-dominance.html"
              >Japan enacts law to curb Apple, Google's app dominance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 21:31:32</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40663070">
          <h3>
            <a
              class="item"
              href="https://etleap.com/careers/customer-success-manager/"
              >Etleap (YC W13) Is Hiring Customer Success Manager (SF)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 21:01:21</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40662176">
          <h3>
            <a
              class="item"
              href="https://english.kyodonews.net/news/2024/06/bc2d7f45d456-japan-enacts-law-to-curb-apple-googles-app-dominance.html#google_vignette"
              >Japan enacts law to curb Apple, Google's app dominance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 19:43:50</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40662176"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40660986">
          <h3>
            <a
              class="item"
              href="https://stamen.com/designing-the-avocado-of-uncertainty/"
              >Designing the avocado of uncertainty visualization</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 17:58:14</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40660986"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40660761">
          <h3>
            <a class="item" href="https://computerwebsite.net/writing/gjk"
              >The GJK Algorithm: A weird and beautiful way to do a simple
              thing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 17:35:09</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40660761"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40660689">
          <h3>
            <a
              class="item"
              href="https://wp.optics.arizona.edu/oscoutreach/diffractive-chocolate/"
              >Diffractive Chocolate</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 17:27:33</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40660689"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40659322">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2406.07394"
              >Accessing Math Solutions via Monte Carlo Self-Refine with LLaMa-3
              8B</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 15:38:45</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40659322"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40659281">
          <h3>
            <a
              class="item"
              href="https://www.mihaileric.com/posts/how-alexa-dropped-the-ball-conversational-ai/"
              >How Alexa dropped the ball on being the top conversational
              system</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 15:35:55</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40659281"
                  >Comments</a
                ><span class="descendants">: 150</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40659236">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40659236"
              >Launch HN: Overwatch (YC S22): OSINT platform for cyber and fraud
              risk</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 15:32:53</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40659236"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.overwatchdata.ai"
                >https://www.overwatchdata.ai</a
              >), a platform to automate OSINT and threat intel, turning it into
              actionable insights. Check out our clickthrough demo here:
              <a href="https://app.storylane.io/share/qyayvtamapis"
                >https://app.storylane.io/share/qyayvtamapis</a
              >.
              <p>
                Overwatch began when we were working with risk and threat intel
                teams at Google, Stripe, and government. We experienced the
                immense challenge every fraud and cyber threat analyst faces:
                manually parsing through an ocean of data to find valuable
                insights and filter out the noise. This included using many of
                the feeds and tools out there that were often very expensive,
                noisy, keyword-based, and lacked accurate entity extraction or
                advanced query features.
              </p>
              <p>
                Most threat intelligence tools utilize thousands of keywords and
                teams of analysts to manually sift through torrents of alerts.
                These alerts are usually individual posts on various platforms
                across news, social media, deep and dark web sources that have
                some matching keyword. This is full of false positives,
                requiring many hours to wade through to figure out what intel
                matters most to our users, why, and what they can do next.
              </p>
              <p>
                Overwatch uses an alternative approach by layering AI agents and
                NLP techniques, including a combination of multifarious
                datasets, cluster analysis, topic modeling, Retrieval Augmented
                Language Models (RALM) and domain knowledgeable agents.
              </p>
              <p>
                This allows us to (1) Filter through OSINT in real time to
                identify events and narratives that matter to our users, and
                write reports on what they could do about it; (2) Identify dark
                web and deep web threats, fraud methods, new tactics, and
                compromised accounts, stolen checks, and credentials affecting
                our users or their peers; (3) Send an alert any time one a 3rd
                party supplier or parts of the tech stack are impacted by a
                widely exploited vulnerability, ransomware attack, or breach;
                and (4) Track malware and ransomware groups that are actively
                targeting your industry including Indicators of Compromise
                (IOCs).
              </p>
              <p>
                Our intelligence is actionable because the alert comes with the
                context and important details that an analyst needs to make an
                informed decision. Being AI-native, we also have a range of chat
                and data visualization features to effectively function as an
                intel co-pilot or industry expert. Finally, our in-house
                intelligence analysts and investigators can assist threat
                intelligence teams with HUMINT investigations and darkweb
                acquisition.
              </p>
              <p>
                Our current customers include internet platforms, financial
                institutions, and supply chain companies. Within a day of one
                breach, one of our customers used Overwatch to surface 18,000+
                leaked credentials. Another used us to surface fraudulent checks
                and learn exactly how threat actors were targeting their
                specific product features.
              </p>
              <p>
                Our website says “Request a demo” but if you want to poke around
                on a very basic example of how we’re aggregating dark web, deep
                web, social, and surface web, log in at
                <a href="https://app.overwatchdata.io/"
                  >https://app.overwatchdata.io/</a
                >
                using these credentials: username:
                try_overwatch@overwatchdata.io pw: HelloHNWorld
              </p>
              <p>
                That login is for an un-personalized feed of cyber threat intel
                (breaches, vulnerabilities, ransomed organizations, and industry
                updates) that gives you a flavor of not just the kind of
                information from which we can collect, but more importantly, how
                our technology prioritizes, clusters, and summarizes alerts for
                cyber / fraud analysts. Try the chat agent on the left-hand side
                to parse through the data.
              </p>
              <p>
                Or sign up for a longer trial and preview of our email alerts:
                <a href="https://xryl45u9uep.typeform.com/to/pvtZQyS0"
                  >https://xryl45u9uep.typeform.com/to/pvtZQyS0</a
                >. You can also check out our clickthrough demo for dark and
                deep web intelligence:
                <a href="https://app.storylane.io/share/qyayvtamapis"
                  >https://app.storylane.io/share/qyayvtamapis</a
                >.
              </p>
              <p>
                Integration options range from simple dashboard access to our
                API for those who want to weave our intelligence directly into
                other products. Pricing is dependent on how complex a threat
                landscape our users want to monitor and we’re still figuring out
                how to standardize this but we’ll always do our best for the HN
                community.
              </p>
              <p>
                Since the platform is AI-powered, it can also be used for news
                monitoring, supply chain disruptions, regulatory monitoring, or
                social media monitoring. We’ve had a lot of experience wrangling
                text-based feeds and using numerous AI-models (from embeddings,
                entity extractors, and LLMs) to filter, categorize, cluster, and
                analyze the data into meaning - so let us know if you’d like to
                nerd-out or have had any particular challenges. Looking forward
                to your feedback and questions! Thanks, HN!
              </p>
            </div>
          </section>
        </section>
        <section id="40659160">
          <h3>
            <a class="item" href="https://restate.dev/"
              >Show HN: Restate – Low-latency durable workflows for
              JavaScript/Java, in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 15:25:23</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40659160"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
            <div class="text">
              <p>
                <a href="https://github.com/restatedev/"
                  >https://github.com/restatedev/</a
                >
                <a href="https://restate.dev/">https://restate.dev/</a>
              </p>
              <p>
                It is free and open, SDKs are MIT-licensed, runtime permissive
                BSL (basically just the minimal Amazon defense). We worked on
                that for a bit over a year. A few points I think are worth
                mentioning:
              </p>
              <p>
                - Restate's runtime is a single binary, self-contained, no
                dependencies aside from a durable disk. It contains basically a
                lightweight integrated version of a durable log, workflow state
                machine, state storage, etc. That makes it very compact and easy
                to run both on a laptop and a server.
              </p>
              <p>
                - Restate implements durable execution not only for workflows,
                but the core building block is durable RPC handlers (or event
                handler). It adds a few concepts on top of durable execution,
                like virtual objects (turn RPC handlers into virtual actors),
                durable communication, and durable promises. Here are more
                details:
                <a href="https://restate.dev/programming-model"
                  >https://restate.dev/programming-model</a
                >
              </p>
              <p>
                - Core design goal for APIs was to keep a familiar style. An app
                developer should look at Restate examples and say "hey, that
                looks quite familiar". You can let us know if that worked out.
              </p>
              <p>
                - Basically every operation (handler invocation, step, ...) goes
                through a consensus layer, for a high degree of resilience and
                consistency.
              </p>
              <p>
                - The lightweight log-centric architecture gives Restate still
                good latencies: For example around 50ms roundtrip (invoke to
                result) for a 3-step durable workflow handler (Restate on EBS
                with fsync for every step).
              </p>
              <p>We'd love to hear what you think of it!</p>
            </div>
          </section>
        </section>
        <section id="40658901">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/star-botanist-likely-made-data-about-nutritional-supplements-new-probe-finds"
              >Star botanist likely made up data about nutritional supplements,
              new probe finds</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 14:59:04</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40658901"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40656780">
          <h3>
            <a
              class="item"
              href="https://www.damninteresting.com/faxes-from-the-far-side/"
              >Faxes from the Far Side of the Moon (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 11:20:16</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40656780"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40656747">
          <h3>
            <a
              class="item"
              href="https://elixir-lang.org/blog/2024/06/12/elixir-v1-17-0-released/"
              >Elixir 1.17 released: set-theoretic types in patterns, durations,
              OTP 27</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 11:13:52</span
              ><span class="points-container"
                >Points: <span class="points">329</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40656747"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40654190">
          <h3>
            <a
              class="item"
              href="https://www.stefantheard.com/silicon-valleys-best-kept-secret-founder-liquidity/"
              >Silicon Valley's best kept secret: Founder liquidity</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-12 @ 03:32:43</span
              ><span class="points-container"
                >Points: <span class="points">1560</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40654190"
                  >Comments</a
                ><span class="descendants">: 716</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40651054">
          <h3>
            <a
              class="item"
              href="https://www.swift.org/documentation/articles/static-linux-getting-started.html"
              >Swift Static Linux SDK</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 20:25:18</span
              ><span class="points-container"
                >Points: <span class="points">273</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40651054"
                  >Comments</a
                ><span class="descendants">: 211</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40650974">
          <h3>
            <a class="item" href="https://github.com/lexbor/lexbor"
              >Lexbor – An open source HTML Renderer library</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 20:16:23</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40650974"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40648404">
          <h3>
            <a class="item" href="https://clipbook.app/"
              >Show HN: A keyboard-centric clipboard history app for macOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 16:40:12</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40648404"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
            <div class="text">
              <p>
                As a Software Engineer, I frequently copy and paste content. The
                fact that macOS clipboard buffer can keep only one item is very
                frustrating. It’s very annoying to copy → switch app → paste →
                switch app → copy → switch app → paste, and so on. Losing items
                I copied hours ago and having to find and copy them again is a
                waste of time.
              </p>
              <p>
                I tried many third-party clipboard managers like Alfred,
                Raycast, Paste, Maccy, etc. While great, they didn't fully meet
                my needs.
              </p>
              <p>As a developer, my requirements are:</p>
              <p>
                1. Keyboard-centric operation to avoid using the mouse. I don’t
                want to waste my time moving my hands from the keyboard.
              </p>
              <p>
                2. Display many clipboard history items at once. I don’t like
                the idea with big tiles, so I can see only 5-7 history items on
                my 32” monitor.
              </p>
              <p>3. Full content preview for each clipboard item.</p>
              <p>4. Quick search functionality.</p>
              <p>
                So, I created ClipBook for my own use. After months of
                development, daily use, and positive feedback from my
                colleagues, I decided to share it publicly. It’s free. All data
                is securely stored on your computer. I’m planning to make it
                open source as well.
              </p>
              <p>
                If you try it out, please let me know if you found it useful, if
                you have anything you’d like me to add, or if you have any other
                feedback.
              </p>
              <p>Happy to answer any questions. Much appreciated.</p>
            </div>
          </section>
        </section>
        <section id="40648082">
          <h3>
            <a class="item" href="https://twenty.com"
              >Twenty, a modern CRM alternative to Salesforce</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 16:15:47</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40648082"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40646940">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/c6pprpd3x96o"
              >Banana giant Chiquita held liable by US court for funding
              paramilitaries</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 14:58:52</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40646940"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40646909">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/ai-will-become-mathematicians-co-pilot/"
              >Terence Tao on proof checkers and AI programs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 14:56:38</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40646909"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40646397">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/space/2024/06/stoke-space-ignites-its-ambitious-main-engine-for-the-first-time/"
              >Stoke Space ignites its ambitious main engine</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 14:14:37</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40646397"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40645015">
          <h3>
            <a class="item" href="https://flora.metazooa.com">Metaflora</a>
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 11:34:17</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40645015"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40644960">
          <h3>
            <a class="item" href="https://www.authorclock.com/"
              >Author Clock: a novel way to tell time</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 11:24:20</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40644960"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40644750">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/future/article/20240610-how-the-concrete-in-your-house-could-be-turned-into-a-battery"
              >Researchers make a supercapacitor from water, cement, and carbon
              black</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 10:55:01</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40644750"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40644366">
          <h3>
            <a
              class="item"
              href="https://news.artnet.com/art-world/medieval-game-pieces-emerge-from-the-ruins-of-a-mysterious-german-castle-2497815"
              >Medieval game pieces emerge from the ruins of a German castle</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 09:51:48</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40644366"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40642803">
          <h3>
            <a class="item" href="https://tembo.io/blog/optimizing-memory-usage"
              >How to get the most out of Postgres memory settings</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-11 @ 05:40:57</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40642803"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40640190">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/environment/article/2024/jun/10/przewalskis-horses-only-wild-species-return-central-asian-steppes-kazakhstan"
              >Wild horses reintroduced to Kazakhstan steppes after absence of
              two centuries</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-10 @ 22:51:51</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40640190"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40633671">
          <h3>
            <a
              class="item"
              href="https://robert.ocallahan.org/2024/06/real-time-settlers.html"
              >Real-Time Settlers of Catan</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-10 @ 13:47:18</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40633671"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40633329">
          <h3>
            <a
              class="item"
              href="https://aeon.co/essays/for-over-a-century-telepathy-has-been-just-around-the-corner"
              >Tomorrow people: For a century, it felt like telepathy was around
              the corner</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-10 @ 13:18:14</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40633329"
                  >Comments</a
                ><span class="descendants">: 181</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
