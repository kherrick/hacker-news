<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43088964">
          <h3>
            <a
              class="item"
              href="https://www.petecodes.io/marketing-genius-of-bryan-johnson/"
              >The marketing genius of Bryan Johnson</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 12:58:30</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43088964"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43088906">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/features/2025-02-17/india-s-tcs-misclassified-managers-to-skirt-h-1b-rules-former-staffers-say"
              >India's Tata Consultancy Was Gaming the US Visa System</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 12:50:59</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43088906"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43088785">
          <h3>
            <a
              class="item"
              href="https://soatok.blog/2025/02/18/reviewing-the-cryptography-used-by-signal/"
              >Reviewing the Cryptography Used by Signal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 12:35:34</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43088785"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43088567">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/jiga/jobs/KMtdgpo-full-stack-engineer"
              >Jiga (YC W21) Is Hiring Mongo/React/Node Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 12:00:43</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43088486">
          <h3>
            <a
              class="item"
              href="https://www.phoronix.com/news/Linux-Wireless-Maintainer-2025"
              >Linux’s Sole Wireless/WiFi Driver Maintainer Is Stepping Down</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 11:49:07</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43088486"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43086479">
          <h3>
            <a class="item" href="https://tintin.dlazaro.ca/"
              >Show HN: Live-updating version of the 'What a week, huh?' meme</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 05:53:55</span
              ><span class="points-container"
                >Points: <span class="points">403</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43086479"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
            <div class="text">
              <p>There's a page for every timeframe:</p>
              <p>
                - 'What a day':
                <a href="https://tintin.dlazaro.ca/day"
                  >https://tintin.dlazaro.ca/day</a
                >
              </p>
              <p>
                - 'What a week':
                <a href="https://tintin.dlazaro.ca/week"
                  >https://tintin.dlazaro.ca/week</a
                >
              </p>
              <p>
                - 'What a month':
                <a href="https://tintin.dlazaro.ca/month"
                  >https://tintin.dlazaro.ca/month</a
                >
              </p>
              <p>
                - 'What a year':
                <a href="https://tintin.dlazaro.ca/year"
                  >https://tintin.dlazaro.ca/year</a
                >
              </p>
              <p>
                Current time is determined by a Cloudflare Worker using the
                request IP (not logged or stored). No JavaScript is sent to the
                browser.
              </p>
              <p>
                [1]
                <a href="https://knowyourmeme.com/memes/what-a-week-huh"
                  >https://knowyourmeme.com/memes/what-a-week-huh</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43085957">
          <h3>
            <a class="item" href="https://x.com/xai/status/1891699715298730482"
              >Grok3 Launch [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 04:04:54</span
              ><span class="points-container"
                >Points: <span class="points">310</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43085957"
                  >Comments</a
                ><span class="descendants">: 504</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43085885">
          <h3>
            <a class="item" href="https://www.wheresyoured.at/longcon/"
              >The Generative AI Con</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 03:47:00</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43085885"
                  >Comments</a
                ><span class="descendants">: 191</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43085876">
          <h3>
            <a
              class="item"
              href="https://www.cosive.com/blog/my-washing-machine-refreshed-my-thinking-on-software-effort-estimation"
              >My washing machine refreshed my thinking on software
              estimation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 03:45:28</span
              ><span class="points-container"
                >Points: <span class="points">240</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43085876"
                  >Comments</a
                ><span class="descendants">: 217</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43085687">
          <h3>
            <a
              class="item"
              href="https://swling.com/blog/2021/03/the-sony-fx-300-jackal-a-holy-grail-technological-marvel-of-the-late-70s/"
              >Sony FX-300 Jackal: A technological marvel of the late 70s
              (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 03:07:45</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43085687"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43085492">
          <h3>
            <a class="item" href="https://youtubesequencer.com/"
              >A web platform for using YouTube as a drum sequencer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 02:34:37</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43085492"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43084958">
          <h3>
            <a
              class="item"
              href="https://danco.substack.com/p/have-you-ever-seen-a-goth-downtown"
              >Have you ever seen a goth downtown?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 01:08:41</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43084958"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43084355">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/science/2025/feb/16/why-cant-we-remember-our-lives-as-babies-or-toddlers"
              >Why can't we remember our lives as babies or toddlers?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 23:44:28</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43084355"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43084145">
          <h3>
            <a class="item" href="https://www.benningtonreview.org/adam-golaski"
              >On David Lynch's Revenge of the Jedi (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 23:11:33</span
              ><span class="points-container"
                >Points: <span class="points">202</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43084145"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43083772">
          <h3>
            <a class="item" href="https://libreture.com/bookshops/"
              >List of DRM-Free Bookshops</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 22:09:09</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43083772"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43083687">
          <h3>
            <a class="item" href="https://previnder.com/tls-ca-linux/"
              >Setting up a trusted, self-signed SSL/TLS certificate authority
              in Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 21:59:14</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43083687"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43083017">
          <h3>
            <a
              class="item"
              href="https://maplant.com/2025-02-17-Why-I%27m-Writing-a-Scheme-Implementation-in-2025-(The-Answer-is-Async-Rust).html"
              >Why I'm writing a Scheme implementation in 2025: Async Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 20:30:26</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43083017"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43083012">
          <h3>
            <a
              class="item"
              href="https://www.cbc.ca/news/canada/toronto/toronto-pearson-overturned-airplane-1.7461227"
              >Plane crashes, overturns during landing at Toronto airport</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 20:30:04</span
              ><span class="points-container"
                >Points: <span class="points">400</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43083012"
                  >Comments</a
                ><span class="descendants">: 451</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43081713">
          <h3>
            <a class="item" href="https://bryce.co/undebuggable/"
              >Debugging an Undebuggable App</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 18:10:35</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43081713"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43080895">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43080895"
              >Launch HN: Roark (YC W25) – Taking the pain out of voice AI
              testing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 16:54:52</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43080895"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              <a href="https://roark.ai">https://roark.ai</a>). We built a tool
              that lets developers replay real production calls against their
              latest Voice AI changes, so they can catch failures, test updates,
              and iterate with confidence.
              <p>
                Here’s a demo video:
                <a href="https://www.youtube.com/watch?v=eu8mo28LsTc"
                  >https://www.youtube.com/watch?v=eu8mo28LsTc</a
                >.
              </p>
              <p>
                We ran into this problem while building a voice AI agent for a
                dental clinic. Patients kept getting stuck in loops, failing to
                confirm insurance, or misunderstanding responses. The only way
                to test fixes was to manually call the agent or read through
                hundreds of transcripts, hoping to catch issues. It was slow,
                frustrating, and unreliable.
              </p>
              <p>
                Talking to other teams, we found this wasn’t just a niche issue
                - every team building Voice AI struggled to validate performance
                efficiently. Debugging meant calling the agent over and over.
                Updates shipped with unknown regressions. Sentiment analysis
                relied only on text, missing key audio cues like hesitation or
                frustration, which often signal deeper issues.
              </p>
              <p>
                That’s why we built Roark. Instead of relying on scripted test
                cases, Roark captures real production calls from VAPI, Retell,
                or a custom-built agent via API and replays them against your
                latest agent changes. We don’t just feed back text, we preserve
                what the user said, how they said it, and when they said it,
                mimicking pauses, sentiment, and tone up until the conversation
                flow changes. This ensures your agent is tested under real-world
                conditions, not just synthetic scripts.
              </p>
              <p>
                For each replay that we run, Roark checks if the agent follows
                key flows (e.g. verifying identity before sharing account
                details). Our speech based evaluators also detect sentiments
                such as frustration and confusion, long pauses, and
                interruptions - things that regular transcripts miss.
              </p>
              <p>
                After testing, Roark provides Mixpanel-style analytics to track
                failures, conversation flows, and key performance metrics,
                helping teams debug faster and ship with confidence. Instead of
                hoping changes work, teams get immediate pass/fail results,
                side-by-side transcript comparisons, and real-world insights.
              </p>
              <p>
                We’re already working with teams in healthcare, legal, and
                customer service who rely on Voice AI for critical interactions.
                They use Roark to debug AI failures faster, test updates before
                they go live, and improve customer experiences - without
                manually calling their bots dozens of times.
              </p>
              <p>
                Our product isn’t <i>quite</i> ready yet for self-service, so
                you’ll still see the dreaded “book a demo” on our home page. If
                you’re reading this, though, we’d love to fast-track you, so we
                made a special page for HN signups here:
                <a href="https://roark.ai/hn-access"
                  >https://roark.ai/hn-access</a
                >. If you’re working on Voice AI and want to try us out, please
                do!
              </p>
              <p>
                Would love any feedback, thoughts, or questions from the HN
                community!
              </p>
            </div>
          </section>
        </section>
        <section id="43080531">
          <h3>
            <a class="item" href="https://github.com/dhealy05/frames_of_mind"
              >Watch R1 "think" with animated chains of thought</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 16:23:07</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43080531"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43071983">
          <h3>
            <a
              class="item"
              href="https://nyanpasu64.gitlab.io/blog/amdgpu-sleep-wake-hang/"
              >I helped fix sleep-wake hangs on Linux with AMD GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-16 @ 21:42:03</span
              ><span class="points-container"
                >Points: <span class="points">672</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43071983"
                  >Comments</a
                ><span class="descendants">: 182</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43067639">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/automotive/bosch-brake-by-wire-system/"
              >Bosch's brake-by-wire system may be the next big leap in
              automotive tech</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-16 @ 12:57:16</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43067639"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43066394">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41598-021-02311-1"
              >670nm red light exposure improved aged mitochondrial function,
              colour vision</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-16 @ 08:33:47</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43066394"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43065010">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=qp9UG0plBRQ"
              >What will happen if you do an entire woodworking project using a
              VR headset? [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-16 @ 03:21:03</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43065010"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43061521">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-02-tweezers-technique-generates-topological-gravity.html"
              >New technique generates topological structures with gravity water
              waves</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 19:36:31</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43061521"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43056456">
          <h3>
            <a
              class="item"
              href="https://tristanrhodes.com/blog/The-Joy-of-Nand2Tetris"
              >The Joy of Nand2Tetris</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 06:44:40</span
              ><span class="points-container"
                >Points: <span class="points">146</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43056456"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43052635">
          <h3>
            <a class="item" href="https://github.com/cordx56/rustowl"
              >Visualize Ownership and Lifetimes in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-14 @ 20:16:10</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43052635"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43049659">
          <h3>
            <a
              class="item"
              href="https://pid1.dev/posts/siren-call-of-sqlite-on-the-server/"
              >Siren Call of SQLite on the Server</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-14 @ 15:53:34</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43049659"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43047341">
          <h3>
            <a
              class="item"
              href="https://www.infobip.com/developers/blog/seniors-working-on-a-legacy-project"
              >You're not a senior engineer until you've worked on a legacy
              project (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-14 @ 11:36:39</span
              ><span class="points-container"
                >Points: <span class="points">694</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43047341"
                  >Comments</a
                ><span class="descendants">: 387</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
