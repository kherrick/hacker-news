<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45749781">
          <h3>
            <a
              class="item"
              href="https://www.404media.co/ice-and-cbp-agents-are-scanning-peoples-faces-on-the-street-to-verify-citizenship/"
              >ICE and CBP Agents Are Scanning Faces on the Street to Verify
              Citizenship</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 17:05:24</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45749781"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45749690">
          <h3>
            <a class="item" href="https://www.upwave.com/job/8228849002/"
              >Does brand advertising work? Upwave (YC S12) is hiring engineers
              to answer that</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 17:00:15</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45749161">
          <h3>
            <a
              class="item"
              href="https://www.axios.com/2025/10/29/aol-bending-spoons-deal"
              >AOL to be sold to Bending Spoons for roughly $1.5B</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 16:28:56</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45749161"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45749019">
          <h3>
            <a
              class="item"
              href="https://alearningaday.blog/2025/10/29/floss-before-brushing/"
              >Floss Before Brushing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 16:21:48</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45749019"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45749017">
          <h3>
            <a class="item" href="https://tailscale.com/blog/peer-relays-beta"
              >Tailscale Peer Relays</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 16:21:36</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45749017"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45748879">
          <h3>
            <a
              class="item"
              href="https://www.minecraft.net/en-us/article/removing-obfuscation-in-java-edition"
              >Minecraft removing obfuscation in Java Edition</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 16:12:56</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45748879"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45748799">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45748799"
              >Azure Outage</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 16:08:35</span
              ><span class="points-container"
                >Points: <span class="points">373</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45748799"
                  >Comments</a
                ><span class="descendants">: 185</span></span
              >
            </h4>
            <div class="text">
              Their pricing calculator, and main portal.azure.com is down - at
              least here in the UK. Nothing on the status page yet -
            </div>
          </section>
        </section>
        <section id="45748756">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45748756"
              >Azure major outage: Portal, Front Door and global regions down</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 16:05:52</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45748756"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
            <div class="text">
              Just started ~5 minutes ago: multiple global regions report that
              Azure is offline — portal won’t load (even cached), Front Door
              services unreachable, CDN failing — US East/Central, West US,
              Netherlands, UK, Italy, NZ all reporting issues. Status pages
              still show green. Heads up to anyone on Azure. Last week AWS, now
              this.
            </div>
          </section>
        </section>
        <section id="45748725">
          <h3>
            <a class="item" href="https://cursor.com/blog/composer"
              >Cursor Composer: Building a fast frontier model with RL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 16:04:33</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45748725"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45748608">
          <h3>
            <a class="item" href="https://a.coffee/"
              >AirTips – Alternative to Bento.me/Linktree</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 15:57:17</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45748608"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45748195">
          <h3>
            <a
              class="item"
              href="https://www.economist.com/finance-and-economics/2025/10/27/the-end-of-the-rip-off-economy"
              >The end of the rip-off economy: consumers use LLMs against
              information asymmetry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 15:32:46</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45748195"
                  >Comments</a
                ><span class="descendants">: 113</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45748186">
          <h3>
            <a
              class="item"
              href="https://phiresky.github.io/blog/2021/hosting-sqlite-databases-on-github-pages/"
              >Hosting SQLite Databases on GitHub Pages (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 15:32:11</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45748186"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45747804">
          <h3>
            <a
              class="item"
              href="https://www.ccc.de/en/disclosure/collins-aerospace-mit-test-test-textnachrichten-bis-ins-cockpit-senden"
              >Collins Aerospace: Sending text messages to the cockpit with
              test:test</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 15:07:20</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45747804"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45747605">
          <h3>
            <a
              class="item"
              href="https://hexacluster.ai/blog/postgresql/oracles-adoption-of-native-boolean-data-type-vs-postgresql/"
              >Oracle has adopted BOOLEAN in 23ai and PostgreSQL had it
              forever</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 14:51:40</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45747605"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45747402">
          <h3>
            <a class="item" href="https://draw.wrobele.com/"
              >Show HN: HUD-like live annotation and sketching app for macOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 14:36:36</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45747402"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm happy to announce we've finally released our 2nd macOS app,
                Draw Over It, a tiny desktop app that enables drawing,
                highlighting, or annotating directly on top of anything on your
                Mac.
              </p>
              <p>
                I've always wanted something like this for instant and
                unobtrusive sketching and annotation for pair programming and
                demos. I always found the standard web-based diagram and drawing
                tools a bit too cumbersome. So we built a simple overlay that
                could appear over any window or app with one shortcut.
              </p>
              <p>
                It doesn't collect any user data and doesn't require any system
                permissions - it's sandboxed. It all stays on your device. You
                can export your annotations to a PNG with one click - or just
                take a screenshot if you need the background too.
              </p>
              <p>
                It offers a slim but functional toolkit for every day tasks:
              </p>
              <p>
                - Global hotkeys, hit a shortcut and start drawing over any app
              </p>
              <p>- Multiple tools, pens, shapes, highlighters</p>
              <p>- Per-screen canvases, each monitor gets its own space</p>
              <p>
                - Focus mode, temporarily blur the background to emphasize what
                matters
              </p>
              <p>
                - Low footprint, no subscriptions, no sign-ups, no data
                collected
              </p>
              <p>- Localization, the app is translated to 14 languages</p>
              <p>
                These two reasons make it different from other canvas apps, it's
                simple, lean and keeps your data on-device only.
              </p>
              <p>It’s a one-time purchase ($2.99) on the Mac App Store.</p>
              <p>I’d love feedback and suggestions for improvements!</p>
            </div>
          </section>
        </section>
        <section id="45747112">
          <h3>
            <a
              class="item"
              href="https://www.atomic14.com/2025/10/29/CH32V003-talking"
              >I made a 10¢ MCU Talk</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 14:12:50</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45747112"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45747018">
          <h3>
            <a
              class="item"
              href="https://topicpartition.io/blog/postgres-pubsub-queue-benchmarks"
              >Kafka is Fast – I'll use Postgres</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 14:06:01</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45747018"
                  >Comments</a
                ><span class="descendants">: 177</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45746726">
          <h3>
            <a class="item" href="https://alex-j-lowry.github.io/z80tvg.html"
              >Recreating a Homebrew Game System from 1987</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 13:42:05</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45746726"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45746478">
          <h3>
            <a
              class="item"
              href="https://ergaster.org/posts/2025/10/29-vscode-to-helix/"
              >From VS Code to Helix</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 13:19:30</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45746478"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45745566">
          <h3>
            <a class="item" href="https://www.learngermanwithgames.com/"
              >Show HN: Learn German with Games</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 11:50:58</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45745566"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
            <div class="text">
              I just started learning German, and it has been a frustrating
              experience, to say the least. There are so many seemingly
              arbitrary rules that make pattern recognition very difficult.
              Therefore, I have been looking for ways to make memorization a bit
              easier and fun. So, I came up with a bunch of games to make
              learning German a bit more engaging. Hope you find it useful as
              well!
            </div>
          </section>
        </section>
        <section id="45745281">
          <h3>
            <a
              class="item"
              href="https://oneuptime.com/blog/post/2025-10-29-aws-to-bare-metal-two-years-later/view"
              >AWS to bare metal two years later: Answering your questions about
              leaving AWS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 11:14:38</span
              ><span class="points-container"
                >Points: <span class="points">427</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45745281"
                  >Comments</a
                ><span class="descendants">: 325</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45744395">
          <h3>
            <a
              class="item"
              href="https://firefox-source-docs.mozilla.org/js/gc.html"
              >SpiderMonkey Garbage Collector</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 09:06:36</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45744395"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45742907">
          <h3>
            <a
              class="item"
              href="https://spidermonkey.dev/blog/2025/10/28/iongraph-web.html"
              >Who needs Graphviz when you can build it yourself?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 05:17:49</span
              ><span class="points-container"
                >Points: <span class="points">386</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45742907"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45742488">
          <h3>
            <a class="item" href="http://keepandroidopen.org/"
              >Keep Android Open</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 04:03:41</span
              ><span class="points-container"
                >Points: <span class="points">1983</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45742488"
                  >Comments</a
                ><span class="descendants">: 601</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45742446">
          <h3>
            <a
              class="item"
              href="https://apps.apple.com/in/app/ublock-origin-lite/id6745342698"
              >uBlock Origin Lite Apple App Store</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 03:57:06</span
              ><span class="points-container"
                >Points: <span class="points">332</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45742446"
                  >Comments</a
                ><span class="descendants">: 166</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45742419">
          <h3>
            <a
              class="item"
              href="https://blog.j11y.io/2025-10-29_stroke_tips_for_engineers/"
              >Tips for stroke-surviving software engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-29 @ 03:51:56</span
              ><span class="points-container"
                >Points: <span class="points">409</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45742419"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45734429">
          <h3>
            <a class="item" href="https://sturdystatistics.com/deepdive-search"
              >Show HN: Research Hacker News, ArXiv &amp;amp; Google with
              Hierarchical Bayesian Models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-28 @ 15:49:51</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45734429"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                My literature review process starts with a broad search to find
                a few key papers/groups, and from there expands along their
                citation networks. I needed to conduct a few rounds of
                literature reviews during the course of my research and decided
                to build a tool to facilitate this process. The tool started as
                an experimental wrapper over low-level statistical software in
                C, quickly became a testing/iteration ground for our api, and is
                now my personal go-to for lit reviews.
              </p>
              <p>
                The tool organizes corpuses of text content, visualizes the high
                level themes, and enables me to pull up relevant excerpts.
                Unlike LLMs, this model transparently organizes the data and can
                train from scratch quickly on small datasets to learn custom
                hierarchical taxonomies. My favorite part of the tool is the
                citation network integration: any research paper it pulls up has
                a button “Citation Network Deep Dive” that pulls every paper
                that cites or is cited by the original paper, and organizes it
                for further exploration.
              </p>
              <p>
                I initially built this tool for academic research, but ended up
                extending it to support Hacker News to mine technical
                conversation, the top 200 Google results, and earnings
                transcripts. We have a gallery of ready to explore results on
                the homepage. If you are kicking off a custom deep dive, it
                takes about 1-5 minutes for academic search, 3-7 minutes for
                Hacker News, and 5-10 minutes for Google. To demonstrate the
                process, I put together a video walkthrough of a short
                literature review I conducted on AI hallucinations:
                <a href="https://www.youtube.com/watch?v=OUmDPAcK6Ns"
                  >https://www.youtube.com/watch?v=OUmDPAcK6Ns</a
                >
              </p>
              <p>
                I host this tool on my company’s website, free for personal use.
                I’d love to know if the HN community finds it useful (or to hear
                what breaks)!
              </p>
            </div>
          </section>
        </section>
        <section id="45702397">
          <h3>
            <a
              class="item"
              href="https://www.anildash.com//2025/10/22/atlas-anti-web-browser/"
              >ChatGPT's Atlas: The Browser That's Anti-Web</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 09:08:26</span
              ><span class="points-container"
                >Points: <span class="points">664</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45702397"
                  >Comments</a
                ><span class="descendants">: 271</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45697234">
          <h3>
            <a
              class="item"
              href="https://sbcwiki.com/news/articles/state-of-embedded-q4-25/"
              >Beyond RaspberryPi: What are all the other SoC vendors up to
              *summarised*</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 17:52:20</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45697234"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45671677">
          <h3>
            <a
              class="item"
              href="https://med.stanford.edu/news/all-news/2025/10/eye-prosthesis.html"
              >Eye prosthesis is the first to restore sight lost to macular
              degeneration</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 16:36:25</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45671677"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
