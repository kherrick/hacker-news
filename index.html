<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="35279349">
          <h3>
            <a
              class="item"
              href="https://driverscoops.com/the-heaviest-bicycle-in-the-world-4800-lb/"
              >The heaviest bicycle in the world is 4800 lb</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 18:38:14</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35279349"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35279155">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35279155"
              >Launch HN: Helicone.ai (YC W23) – Open-source logging for
              OpenAI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 18:25:45</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35279155"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.helicone.ai">https://www.helicone.ai</a>) an
              open-source logging solution for OpenAi applications. Helicone's
              one-line integration logs the prompts, completions, latencies, and
              costs of your OpenAI requests. It currently works with GPT, and
              can be integrated with one line of code. There’s a demo at
              <a href="https://www.helicone.ai/video"
                >https://www.helicone.ai/video</a
              >.
              <p>
                Helicone's core technology is a proxy that routes all your
                OpenAI requests through our edge-deployed Cloudflare Workers.
                These workers are incredibly reliable and cause no discernible
                latency impact in production environments. As a proxy, we offer
                more than just observability: we provide caching and prompt
                formatting, and we'll soon add user rate limiting and model
                provider back off to make sure your app is still up when OpenAI
                is down.
              </p>
              <p>
                Our web application then provides insights into key metrics,
                such as which users are disproportionately driving costs and
                what is the token usage broken down by prompts. You can filter
                this data based on custom logic and export it to other
                destinations.
              </p>
              <p>
                Getting started with Helicone is quick and easy, regardless of
                the OpenAI SDK you use. Our proxy-based solution does not
                require a third party package—simply change your request's base
                URL from
                <a href="https://api.openai.com/v1"
                  >https://api.openai.com/v1</a
                >
                to
                <a href="https://oai.hconeai.com/v1"
                  >https://oai.hconeai.com/v1</a
                >. Helicone can be integrated with LangChain, LLama Index, and
                all other OpenAI native libraries. (<a
                  href="https://docs.helicone.ai/quickstart/integrate-in-one-line-of-code"
                  >https://docs.helicone.ai/quickstart/integrate-in-one-line-of...</a
                >)
              </p>
              <p>
                We have exciting new features coming up, one of which is an API
                to log user feedback. For instance, if you're developing a tool
                like GitHub Copilot, you can log when a user accepted or
                rejected a suggestion. Helicone will then aggregate your result
                quality into metrics and make finetuning suggestions for when
                you can save costs or improve performance.
              </p>
              <p>
                Before launching Helicone, we developed several projects with
                GPT-3, including airapbattle.com, tabletalk.ai, and
                dreamsubmarine.com. For each project, we used a beta version of
                Helicone which gave us instant visibility into user engagement
                and result quality issues. As we talked to more builders and
                companies, we realized they were spending too much time building
                in-house solutions like this and that existing analytics
                products were not tailored to inference endpoints like GPT-3.
              </p>
              <p>
                Helicone is developed under the Common Clause V1.0 w/ Apache 2.0
                license so that you can use Helicone within your own
                infrastructure. If you do not want to self-host, we provide a
                hosted solution with 1k requests free per month to try our
                product. If you exceed that we offer a paid subscription as
                well, and you can view our pricing at
                <a href="https://www.helicone.ai/pricing"
                  >https://www.helicone.ai/pricing</a
                >.
              </p>
              <p>
                We're thrilled to introduce Helicone to the HackerNews community
                and would love to hear your thoughts, ideas, and experiences
                related to LLM logging and analytics. We're eager to engage in
                meaningful discussions, so please don't hesitate to share your
                insights and feedback with us!
              </p>
            </div>
          </section>
        </section>
        <section id="35279044">
          <h3>
            <a
              class="item"
              href="https://forum.sushi.com/t/establish-sushi-legal-defense-fund/11813"
              >SushiDAO served with subpoena by SEC</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 18:18:08</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35279044"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35277925">
          <h3>
            <a
              class="item"
              href="https://writings.stephenwolfram.com/2023/03/chatgpt-gets-its-wolfram-superpowers/"
              >ChatGPT can now call Wolfram Alpha</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 17:12:43</span
              ><span class="points-container"
                >Points: <span class="points">447</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35277925"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35277721">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35277721"
              >Retool (YC W17) is hiring hackers to combine visual programming
              with AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 17:00:35</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re Retool (<a href="https://retool.com">https://retool.com</a
                >), a visual programming environment for building internal
                tools. Here’s a 3 minute demo video:
                <a
                  href="https://d3399nw8s4ngfo.cloudfront.net/videos/intro-to-retool.mp4"
                  >https://d3399nw8s4ngfo.cloudfront.net/videos/intro-to-retool...</a
                >.
              </p>
              <p>
                You can think of Retool as something like Visual Basic, but in
                the cloud. The idea is that there are lots of internal
                applications that businesses need, and today, build from scratch
                (probably via React). But while React is great for many things
                (our landing page is built in React, our product is built in
                React, etc.), it’s possible that it might be overkill for
                building a simple form that POSTs data back to your API. (Who
                _wants_ to worry about debouncing the submit button, handling
                errors from the backend, and authenticating and authorizing the
                users?)
              </p>
              <p>
                We launched on HN around five years ago (<a
                  href="https://news.ycombinator.com/item?id=17725966"
                  >https://news.ycombinator.com/item?id=17725966</a
                >). Since then, we’ve launched three new products – a native
                mobile product (<a href="https://retool.com/products/mobile"
                  >https://retool.com/products/mobile</a
                >), an automation product for developers (<a
                  href="https://retool.com/products/workflows/"
                  >https://retool.com/products/workflows/</a
                >), and a database product (<a
                  href="https://retool.com/products/database/"
                  >https://retool.com/products/database/</a
                >). We’ve hired and grown the team to over 350, and are proud to
                have businesses like Doordash, NBC Universal, Mercedes Benz, and
                the NFL using Retool.
              </p>
              <p>
                The network at Retool is also fairly strong — our lead investors
                in the Series B were Sequoia, along with Elad Gil, Nat Friedman,
                as well as John and Patrick Collison. Other investors include
                the founders of Github, Gusto, Segment, PagerDuty, Plaid, etc.
              </p>
              <p>
                This year, while other companies are downsizing, we’re doubling
                down. (Literally.) We’re attempting to double our engineering,
                product, and design orgs this year. We think the opportunity to
                invent the future of programming is enormous, and we’re looking
                for more hackers to join our team.
              </p>
              <p>
                We think that AI is going to change the way people build
                software. We think that there is tremendous potential in
                building interfaces that help humans and AI collaborate together
                to build software. We want to build a world where humans can
                quickly assemble full applications by just providing high level
                directions to AI.
              </p>
              <p>
                We believe we’re set up especially well to do just that – we
                have all the building blocks for creating software (frontends,
                backend compute, data storage) as well as a live interactive
                builder environment. Why entangle yourself with messy things
                like Webpack, Docker, and Kubernetes when you can directly
                manipulate a live app, running right in front of you?
              </p>
              <p>
                We also think that the world. as a whole, is under-utilizing AI.
                Businesses are broadly interested in generative AI and LLMs, but
                don’t know how yet to leverage and use them. It should be simple
                for businesses to quickly set up flows to have AI automatically
                triage bug reports, summarize customer feedback, and enrich
                datasets.
              </p>
              <p>
                We’ve shared a sneak peak of what we think some of this could
                look like (<a href="https://retool.com/blog/gpt4-in-retool/"
                  >https://retool.com/blog/gpt4-in-retool/</a
                >), and there’s a bunch more coming up that we’re really excited
                to talk about soon.
              </p>
              <p>
                If you’re interested in working with AIs and LLMs to change the
                way companies build software, we’d love to hear from you. We've
                made multiple hires from HN in the past, so we’re posting here.
                But if you know any friends who are interested, feel free to
                tell them to reach out as well.
              </p>
              <p>
                Please email me at david AT retool with “HN” in the subject
                line.
              </p>
              <p>Thanks!</p>
            </div>
          </section>
        </section>
        <section id="35277677">
          <h3>
            <a class="item" href="https://openai.com/blog/chatgpt-plugins"
              >ChatGPT Plugins</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 16:57:28</span
              ><span class="points-container"
                >Points: <span class="points">710</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35277677"
                  >Comments</a
                ><span class="descendants">: 296</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35277660">
          <h3>
            <a class="item" href="https://frame.work/"
              >Framework announces AMD, new Intel gen, 16“ laptop and more</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 16:56:30</span
              ><span class="points-container"
                >Points: <span class="points">402</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35277660"
                  >Comments</a
                ><span class="descendants">: 215</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35277245">
          <h3>
            <a
              class="item"
              href="https://www.space.com/relativity-space-terran-1-test-launch-failure"
              >Relativity Space launches first 3D-printed rocket on historic
              test flight</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 16:28:25</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35277245"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35276765">
          <h3>
            <a class="item" href="https://github.com/bibliotechy/dirty-poetry"
              >Poetry from dirty OCR</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 15:57:49</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35276765"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35276032">
          <h3>
            <a
              class="item"
              href="https://acoup.blog/2023/03/17/collections-how-to-polis-part-iia-politeia-in-the-polis/"
              >How to Polis, 101, Part IIa: Politeia in the Polis</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 15:09:19</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35276032"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35275658">
          <h3>
            <a
              class="item"
              href="https://www.coindesk.com/business/2023/03/23/do-kwon-arrested-in-montenegro-interior-minister/"
              >Do Kwon arrested in Montenegro: Interior Minister</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 14:48:11</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35275658"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35275301">
          <h3>
            <a
              class="item"
              href="https://tristancacqueray.github.io/blog/introducing-butler"
              >Butler Virtual Operating System</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 14:24:46</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35275301"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35274519">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2023/3/23/23652373/ftc-click-to-cancel-subscription-service-dark-patterns-ban"
              >The FTC wants to ban those tough-to-cancel gym and cable
              subscriptions</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 13:33:10</span
              ><span class="points-container"
                >Points: <span class="points">465</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35274519"
                  >Comments</a
                ><span class="descendants">: 223</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35274486">
          <h3>
            <a
              class="item"
              href="https://atlas.cern/Updates/Briefing/2023-W-Mass-Measurement"
              >New ATLAS result weighs in on the W boson</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 13:31:01</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35274486"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35274362">
          <h3>
            <a
              class="item"
              href="https://oneusefulthing.substack.com/p/a-quick-and-sobering-guide-to-cloning"
              >A quick and sobering guide to cloning yourself</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 13:22:33</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35274362"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35273884">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gaming/2023/03/epics-new-motion-capture-animation-tech-has-to-be-seen-to-be-believed/"
              >Epic’s new motion-capture animation tech</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 12:47:18</span
              ><span class="points-container"
                >Points: <span class="points">286</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35273884"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35273712">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2023/03/23/new-starbucks-ceo-says-hell-work-a-shift-at-its-cafes-once-a-month.html"
              >Starbucks CEO will work a shift at the company’s cafes once a
              month</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 12:33:31</span
              ><span class="points-container"
                >Points: <span class="points">259</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35273712"
                  >Comments</a
                ><span class="descendants">: 258</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35273707">
          <h3>
            <a
              class="item"
              href="https://www.newscientist.com/article/2365363-mathematicians-discover-shape-that-can-tile-a-wall-and-never-repeat/"
              >Mathematicians discover shape that can tile a wall and never
              repeat</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 12:33:13</span
              ><span class="points-container"
                >Points: <span class="points">362</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35273707"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35273406">
          <h3>
            <a
              class="item"
              href="https://about.sourcegraph.com/blog/cheating-is-all-you-need"
              >Cheating is All You Need</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 12:06:14</span
              ><span class="points-container"
                >Points: <span class="points">268</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35273406"
                  >Comments</a
                ><span class="descendants">: 236</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35272900">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/technology/2023/mar/23/tech-guru-jaron-lanier-the-danger-isnt-that-ai-destroys-us-its-that-it-drives-us-insane"
              >Jaron Lanier on the danger of AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 11:10:55</span
              ><span class="points-container"
                >Points: <span class="points">265</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35272900"
                  >Comments</a
                ><span class="descendants">: 312</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35272227">
          <h3>
            <a
              class="item"
              href="https://markessien.com/posts/drama_of_transcription/"
              >The drama in trying to convert election PDFs to Spreadsheets</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 09:40:21</span
              ><span class="points-container"
                >Points: <span class="points">560</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35272227"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35271779">
          <h3>
            <a
              class="item"
              href="https://outerproduct.net/boring/2023-03-22_cpu-compiler-gc-ohmy.html"
              >A CPU is a compiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 08:20:21</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35271779"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35270877">
          <h3>
            <a
              class="item"
              href="https://react.dev/learn/you-might-not-need-an-effect"
              >You might not need an effect</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 05:42:24</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35270877"
                  >Comments</a
                ><span class="descendants">: 190</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35270806">
          <h3>
            <a
              class="item"
              href="https://rmc.library.cornell.edu/witchcraftcoll/"
              >The Cornell University Witchcraft Collection</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 05:25:55</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35270806"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35270131">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2023/03/21/well/live/cleaning-disinfectant-bleach-risks.html"
              >The risks of cleaning with bleach and other disinfectants</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-23 @ 03:16:33</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35270131"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35264919">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Miller_test"
              >Miller test</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-22 @ 18:10:20</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35264919"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35262129">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/articles/these-techniques-might-help-you-direct-your-dreams-6812735e"
              >Choose what to dream tonight</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-22 @ 15:02:43</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35262129"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35256014">
          <h3>
            <a
              class="item"
              href="https://www.historytoday.com/archive/history-matters/codes-and-crowns"
              >Codes and Crowns</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-22 @ 02:30:05</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35256014"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35242211">
          <h3>
            <a
              class="item"
              href="http://daveshacks.blogspot.com/2015/12/inside-alu-of-armv1-first-arm.html"
              >The ALU of the armv1 – the first ARM microprocessor (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-21 @ 03:27:09</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35242211"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35240820">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-03-unique-image-scientists-high-speed-camera.html"
              >Image obtained with high-speed camera shows how lightning rods
              work</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-21 @ 00:20:56</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35240820"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
