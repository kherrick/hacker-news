<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42380054">
          <h3>
            <a
              class="item"
              href="https://gizmodo.com/ai-firms-stop-hiring-humans-billboard-campaign-sparks-outrage-2000536368"
              >Y Combinator Funded AI Firm's 'Stop Hiring Humans' Billboard
              Sparks Outrage</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 18:54:00</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42380054"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42379974">
          <h3>
            <a
              class="item"
              href="https://supabase.com/blog/durable-workflows-in-postgres-dbos"
              >Running Durable Workflows in Postgres Using DBOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 18:47:20</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42379974"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42379970">
          <h3>
            <a
              class="item"
              href="http://sibervepunk.com/digital-consumption.html"
              >Digital consumption keeps me from getting better at my job</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 18:46:50</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42379970"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42379967">
          <h3>
            <a
              class="item"
              href="https://kyle.cascade.family/posts/how-to-actually-migrate-complex-systems-in-infrastructure/"
              >How to Migrate Complex Systems in Infrastructure</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 18:46:28</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42379967"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42379361">
          <h3>
            <a class="item" href="https://openai.com/12-days/?day=4"
              >OpenAI Releases Canvas</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 18:01:23</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42379361"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42378994">
          <h3>
            <a
              class="item"
              href="https://www.cognition.ai/blog/devin-generally-available"
              >Devin is now generally available</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 17:30:22</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42378994"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42378843">
          <h3>
            <a
              class="item"
              href="https://turso.tech/blog/introducing-limbo-a-complete-rewrite-of-sqlite-in-rust"
              >Limbo: A complete rewrite of SQLite in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 17:16:12</span
              ><span class="points-container"
                >Points: <span class="points">227</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42378843"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42378673">
          <h3>
            <a
              class="item"
              href="https://www.opb.org/article/2024/12/09/artificial-intelligence-local-news-oregon-ashland/"
              >AI slop is already invading Oregon's local journalism</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 17:01:46</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42378673"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42378519">
          <h3>
            <a
              class="item"
              href="https://www.surrey.ac.uk/news/surrey-announces-worlds-first-ai-model-near-instant-image-creation-consumer-grade-hardware"
              >AI model for near-instant image creation on consumer-grade
              hardware</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 16:44:52</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42378519"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42378488">
          <h3>
            <a class="item" href="https://antirez.com/news/144"
              >From where I left</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 16:41:52</span
              ><span class="points-container"
                >Points: <span class="points">434</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42378488"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42378407">
          <h3>
            <a class="item" href="https://scottaaronson.blog/?p=8525"
              >The Google Willow Thing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 16:34:02</span
              ><span class="points-container"
                >Points: <span class="points">220</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42378407"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42378335">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2412.06769"
              >Training LLMs to Reason in a Continuous Latent Space</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 16:26:17</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42378335"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42378194">
          <h3>
            <a class="item" href="https://github.com/hikettei/Caten"
              >From Unemployment to Lisp: Running GPT-2 on a Teen's Deep
              Learning Compiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 16:12:10</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42378194"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42378138">
          <h3>
            <a
              class="item"
              href="https://pmc.ncbi.nlm.nih.gov/articles/PMC9974643/"
              >Neuroplasticity in F16 fighter jet pilots</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 16:07:12</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42378138"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42377770">
          <h3>
            <a
              class="item"
              href="https://asteriskmag.com/issues/08/the-depths-of-wikipedians"
              >The Depths of Wikipedians</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 15:32:04</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42377770"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42377644">
          <h3>
            <a
              class="item"
              href="https://www.medievalists.net/2024/06/colour-middle-ages/"
              >Colour in the Middle Ages</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 15:19:57</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42377644"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42377159">
          <h3>
            <a
              class="item"
              href="https://windowsreport.com/mozilla-firefox-removes-do-not-track-feature-support-heres-what-it-means-for-your-privacy/"
              >Firefox removes "do not track" feature support</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 14:33:20</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42377159"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42377018">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42377018"
              >Launch HN: Double (YC W24) – Index Investing with 0% Expense
              Ratios</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 14:16:54</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42377018"
                  >Comments</a
                ><span class="descendants">: 275</span></span
              >
            </h4>
            <div class="text">
              <a href="https://double.finance">https://double.finance</a>).
              Double lets you invest in 50+ broad stock market indexes with 0%
              expense ratios. We handle all the management, including
              rebalancing and tax-loss harvesting—proactively selling losing
              stocks to potentially save on taxes—for $1/month.
              <p>
                Our goal is to bring the low fee trend pioneered by Robinhood to
                ETFs and mutual funds. We posted a Show HN about 3 months ago
                (<a href="https://news.ycombinator.com/item?id=41246686"
                  >https://news.ycombinator.com/item?id=41246686</a
                >) and since then have crossed $10M in AUM (Assets Under
                Management) [1].
              </p>
              <p>
                Here’s a demo video:
                <a
                  href="https://www.loom.com/share/10c9150ce4114f278e8c249f211e7ec8"
                  >https://www.loom.com/share/10c9150ce4114f278e8c249f211e7ec8</a
                >. Please note that none of this content should be treated as
                financial advice.
              </p>
              <p>
                Everyone knows that fees eat into your investing returns.
                Financial advisors generally charge 1% of AUM per year, and ETFs
                have a weighted average expense ratio of about 0.17%, although
                some go as low as 0.03% for VOO. Over a 30-year period on a
                $500k portfolio with $2k invested monthly, the money lost to
                those fees would be $1.30M for the financial advisor and $244k
                for the average ETF and even $42,951 for the low fee VOO.
              </p>
              <p>
                Double lets you index invest without paying any percentage-based
                fees - we charge just $1/month. It works by buying the
                individual stocks that make up popular indexes. By buying the
                individual positions, we can also customize and tax-loss harvest
                your account, something ETFs or Mutual Funds cannot do.
              </p>
              <p>
                Most ETFs and mutual funds today are not that complicated - they
                can be expressed as a CSV file with 2 columns - a ticker and a
                share number. You can find these holding csv files on most ETF
                pages (VOO[2], QQQ[3]). Right now there are about $9.1T of
                assets in ETFs[4] and $20T in Mutual Funds[5] in the US, with
                estimated revenue of $100B per year. We think this market is
                ripe for disruption.
              </p>
              <p>
                We offer 50+ strategies that track popular ETFs and are updated
                as stocks merge and indexes change. You can customize these by
                weighting sectors or stocks differently, or even build your own
                indexes from scratch using our stock/etf screening tools. Once
                you've chosen your strategy, simply set your target weights and
                deposit funds (we also support transferring existing stocks).
                Our engine then checks your portfolio daily for potential
                trades, optimizes for tax-loss harvesting, portfolio tracking,
                and redeploys any generated cash.
              </p>
              <p>
                I (JJ) started working on this after selling my last company.
                After using nearly every brokerage product out there and working
                with a financial advisor, I noticed a huge gap between the
                indexing capabilities of financial advisors and what individual
                investors could access. We wanted to bridge that gap and provide
                these powerful tools to everyone in a simple, low-cost way.
              </p>
              <p>
                There are a number of robo-advisor products out there, but none
                that we know of offer direct indexing without expense ratios or
                AUM fees. One similar product is M1 Finance, but Double is more
                powerful. We offer tax-loss harvesting, a wider range of
                indexes, and greater customization. For example, when building
                your own index, you can set weights down to 0.1% (compared to
                M1's 1%) and even weight by market cap.
              </p>
              <p>
                We also compete with robo-advisors like Wealthfront, but offer
                more control over your investments. And did I mention we don't
                charge AUM fees? You can see our strategies and play with the
                research page
                <a href="https://double.finance/p/explore"
                  >https://double.finance/p/explore</a
                >
                without creating an account.
              </p>
              <p>
                Over the past year we’ve learned a lot about the guts of
                building portfolio software. For example, stocks don’t really
                have persistent identifiers that are easy to model and pass
                around. We trade CUSIPs with our custodian Apex*, but these
                change all the time for stock splits or re-org’s that you would
                not think would lead to a new “stock”.
              </p>
              <p>
                We’ve also learned a lot about how tax loss harvesting (TLH) is
                best implemented on large direct index portfolios using a factor
                model as opposed to pairs based replacements which I initially
                thought might be the way to execute these. We do use a pairs
                strategy on smaller sized strategies. And how TLH and portfolio
                optimization generally is best expressed as a linear
                optimization problem with competing objectives (tracking vs. tax
                alpha vs. trading costs for example).
              </p>
              <p>
                If you have any thoughts on the product or our positioning as
                the low fee alternative I’d love to hear it. I think Robinhood
                has proved that you can build a strong business by getting rid
                of an industry wide cost (in their case commissions, in our
                expense ratios). We aim to do the same.
              </p>
              <p>
                [1]
                <a
                  href="https://www.axios.com/pro/fintech-deals/2024/12/10/direct-indexing-platform-double-finance-raises-seed?utm_source=editorial&amp;utm_medium=social&amp;utm_campaign=pro_edit_regwall_01-24&amp;utm_term=regwall"
                  >https://www.axios.com/pro/fintech-deals/2024/12/10/direct-in...</a
                >
                [2]
                <a
                  href="https://investor.vanguard.com/investment-products/etfs/profile/voo#portfolio-composition"
                  >https://investor.vanguard.com/investment-products/etfs/profi...</a
                >
                [3]
                <a href="https://www.invesco.com/qqq-etf/en/about.html"
                  >https://www.invesco.com/qqq-etf/en/about.html</a
                >
                [4]
                <a href="https://fred.stlouisfed.org/series/BOGZ1LM564090005Q"
                  >https://fred.stlouisfed.org/series/BOGZ1LM564090005Q</a
                >
                [5]
                <a href="https://fred.stlouisfed.org/series/BOGZ1LM654090000Q"
                  >https://fred.stlouisfed.org/series/BOGZ1LM654090000Q</a
                >
              </p>
              <p>
                * Edit to add a note on risk: If Double goes out of business,
                your assets are safe and held in your name at Apex Clearing.
                They have processes in place for these scenarios to help you
                access and transfer those assets. See more at
                <a href="https://news.ycombinator.com/item?id=42379135"
                  >https://news.ycombinator.com/item?id=42379135</a
                >
                below.
              </p>
            </div>
          </section>
        </section>
        <section id="42374959">
          <h3>
            <a
              class="item"
              href="https://github.com/ReturnInfinity/BareMetal-OS"
              >BareMetal OS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 08:32:24</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42374959"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42374823">
          <h3>
            <a
              class="item"
              href="https://old.reddit.com/r/neovim/comments/1h7vhmg/bro_been_developing_his_2k_star_plugin_on_a/"
              >Developer wrote 25k lines of Neovim plugin code using phone and
              touchscreen</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 08:00:48</span
              ><span class="points-container"
                >Points: <span class="points">263</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42374823"
                  >Comments</a
                ><span class="descendants">: 141</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42373437">
          <h3>
            <a class="item" href="https://treecalcul.us/">Tree Calculus</a>
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 03:30:32</span
              ><span class="points-container"
                >Points: <span class="points">423</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42373437"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42373343">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42373343"
              >Ask HN: Those making $500/month on side projects in 2024 – Show
              and tell</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-10 @ 03:12:12</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42373343"
                  >Comments</a
                ><span class="descendants">: 152</span></span
              >
            </h4>
            <div class="text">
              <p>
                Previously asked on: 2023 →
                <a href="https://news.ycombinator.com/item?id=38467691"
                  >https://news.ycombinator.com/item?id=38467691</a
                >
              </p>
              <p>
                2022 →
                <a href="https://news.ycombinator.com/item?id=34190421"
                  >https://news.ycombinator.com/item?id=34190421</a
                >
              </p>
              <p>
                2021 →
                <a href="https://news.ycombinator.com/item?id=29667095"
                  >https://news.ycombinator.com/item?id=29667095</a
                >
              </p>
              <p>
                2020 →
                <a href="https://news.ycombinator.com/item?id=24947167"
                  >https://news.ycombinator.com/item?id=24947167</a
                >
              </p>
              <p>
                2019 →
                <a href="https://news.ycombinator.com/item?id=20899863"
                  >https://news.ycombinator.com/item?id=20899863</a
                >
              </p>
              <p>
                2018 →
                <a href="https://news.ycombinator.com/item?id=17790306"
                  >https://news.ycombinator.com/item?id=17790306</a
                >
              </p>
              <p>
                2017 →
                <a href="https://news.ycombinator.com/item?id=15148804"
                  >https://news.ycombinator.com/item?id=15148804</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="42371476">
          <h3>
            <a
              class="item"
              href="https://www.bitsaboutmoney.com/archive/debanking-and-debunking/"
              >Debanking (and Debunking?)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-09 @ 22:56:27</span
              ><span class="points-container"
                >Points: <span class="points">230</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42371476"
                  >Comments</a
                ><span class="descendants">: 266</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42369294">
          <h3>
            <a
              class="item"
              href="https://home.cern/news/news/physics/alice-finds-first-ever-evidence-antimatter-partner-hyperhelium-4"
              >ALICE finds first ever evidence of the antimatter partner of
              hyperhelium-4</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-09 @ 19:01:17</span
              ><span class="points-container"
                >Points: <span class="points">270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42369294"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42368604">
          <h3>
            <a class="item" href="https://openai.com/index/sora-is-here/"
              >Sora is here</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-09 @ 18:02:10</span
              ><span class="points-container"
                >Points: <span class="points">1105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42368604"
                  >Comments</a
                ><span class="descendants">: 936</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42353333">
          <h3>
            <a
              class="item"
              href="https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html"
              >B+ Tree Visualization</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-07 @ 22:25:47</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42353333"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42351436">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42351436"
              >Ask HN: Git Alternatives – Sapling vs. Jj</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-07 @ 17:57:24</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42351436"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
            <div class="text">
              <p>
                I am uninterested in `you can do that in git with [insert
                esoteric commands]`.
              </p>
              <p>
                My main contenders right now are Sapling[0], a project from
                Meta, and jj[1]. I am wondering if anyone has experience with
                either, or definitely those who have tried both, what was your
                experience? They both have a lot of nice features.
              </p>
              <p>
                [0] https://sapling-scm.com/ [1]
                https://github.com/martinvonz/jj/blob/main/docs/sapling-comparison.md
              </p>
            </div>
          </section>
        </section>
        <section id="42347533">
          <h3>
            <a
              class="item"
              href="https://johncarlosbaez.wordpress.com/2024/12/07/martianus-capella/"
              >Precursors of Copernicus' heliocentric theory</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-07 @ 05:36:48</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42347533"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42341343">
          <h3>
            <a
              class="item"
              href="https://www.bbc.co.uk/news/articles/c86w9n4jlvwo"
              >Oldest known wild bird lays egg at 74</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-06 @ 16:41:04</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42341343"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42295110">
          <h3>
            <a
              class="item"
              href="https://pubs.aeaweb.org/doi/pdfplus/10.1257/jep.38.4.81"
              >Semiconductors and Modern Industrial Policy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-02 @ 11:25:25</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42295110"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
