<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="38616922">
          <h3>
            <a
              class="item"
              href="https://security.googleblog.com/2023/12/hardening-cellular-basebands-in-android.html"
              >Hardening Cellular Basebands in Android</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 19:16:43</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38616922"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38616753">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/features/entering-the-public-domain/2024/"
              >What Will Enter the Public Domain in 2024?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 19:03:55</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38616753"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38616691">
          <h3>
            <a
              class="item"
              href="https://supabase.com/blog/edge-functions-node-npm"
              >Edge Functions: Node and native NPM compatibility</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 18:59:38</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38616691"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38616550">
          <h3>
            <a
              class="item"
              href="https://www.aljazeera.com/features/2023/12/12/like-we-were-lesser-humans-gaza-boys-men-recall-israeli-arrests-torture"
              >'Like we were lesser humans': Gaza boys, men recall Israeli
              arrest, torture</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 18:50:46</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38616550"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38616023">
          <h3>
            <a
              class="item"
              href="https://andygrove.io/2020/05/why-musl-extremely-slow/"
              >Why does musl make my Rust code so slow? (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 18:13:15</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38616023"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38615868">
          <h3>
            <a
              class="item"
              href="https://news.wisc.edu/zapping-manure-with-special-electrode-promises-an-efficient-method-to-produce-fertilizers-other-chemicals/"
              >Zapping manure with special electrode to produce fertilizers,
              other chemicals</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 18:02:58</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38615868"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38615841">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/technology/2023/12/12/pharmacy-records-police-privacy-abortion/"
              >Pharmacies share medical data with police without a warrant,
              inquiry finds</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 18:00:33</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38615841"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38615315">
          <h3>
            <a
              class="item"
              href="https://news.vmware.com/company/vmware-by-broadcom-business-transformation"
              >VMware by Broadcom transition to subscription, end of sale of
              perpetual licenses</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 17:25:58</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38615315"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38615232">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=38615232"
              >Launch HN: Bracket (YC W22) – Two-Way Sync Between Salesforce and
              Postgres</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 17:20:38</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38615232"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.usebracket.com">https://www.usebracket.com</a
              >) along with Kunal and Vinesh. Bracket makes it easy to set up
              fast, bidirectional syncs between Salesforce and Postgres.
              <p>
                We have two main use cases: 1) building apps on top of Postgres
                instead of Salesforce, and 2) replacing existing Salesforce
                &lt;&gt; Postgres syncs (either Heroku Connect or in-house
                builds).
              </p>
              <p>
                Postgres makes a bunch of things easy for developers: building
                responsive web apps, handling SSO and user access rules, and
                scaling large datasets like time-series data. But Sales,
                Customer Success, and Ops teams usually don’t have direct access
                to Postgres - instead, they rely on Salesforce as a type of
                database. These teams need up-to-date data on users, orders, and
                services, and they need to edit this data. As a result, in a lot
                of organizations there’s a sort of abyss between Postgres and
                Salesforce.
              </p>
              <p>
                For example: say you're a car rental company. People rent cars
                via your web app built on Postgres, but your CX team uses
                Salesforce to track/update users, cars, and rentals. One of your
                users calls in to say that they were in an accident and the car
                is totaled. Your CX team (on the Salesforce side of the abyss)
                needs to manually update the status of the car - "Unavailable" -
                and reassign upcoming reservations to other cars. These edits
                made in Salesforce must sync to Postgres so that the user sees
                their updated reservation details.
              </p>
              <p>
                We first came across this syncing problem when we were deep in
                pivot hell during YC W22. At the time, we were two weeks away
                from Demo Day and we had been pivoting for five weeks. We felt
                like failures every morning, and it seemed inevitable that we’d
                drop out. Then we talked to a founder who told us how hard it is
                to simply keep Airtable and MongoDB in sync with each other. He
                tried Zapier, he tried writing custom scripts, all to no avail.
                At last, we had 1) a technical problem 2) frustrating a smart
                founder 3) with a big potential market. We started to build,
                raised a conservative amount of money at Demo Day, and kept our
                burn extremely low.
              </p>
              <p>
                After a year, we had a product keeping Airtable, Notion, and
                Google Sheet tables in sync with larger databases, but it still
                felt like a stop-gap: companies were often using us to stand up
                lightweight BI, avoid creating internal tools from scratch, or
                build quick admin dashboards. Once they felt the limitations of,
                say, Google Sheets, they moved off Bracket to a more permanent
                solution. Not only did this shrink the size of the market, but
                also left us feeling like we were creating a vitamin, not a
                painkiller.
              </p>
              <p>
                Then we talked with companies who wanted to sync CRMs -
                specifically Salesforce - with Postgres. They either had
                high-maintenance in-house solutions for syncing, or they were
                using Heroku Connect, which enables two-way syncs between
                Salesforce and Heroku-hosted Postgres. They couldn’t get rid of
                Salesforce and they couldn’t allow the two systems to get out of
                sync, so they were stuck with Heroku Connect.
              </p>
              <p>
                There are two major problems with Heroku Connect, though: 1)
                it's super expensive, and 2) it ties you to Heroku Enterprise as
                a hosting platform. These companies wanted something as reliable
                as Heroku Connect, but hosting-agnostic and priced
                competitively. We sensed an opportunity to build something
                useful here, so we got to it.
              </p>
              <p>
                Bracket makes it easy (90 seconds of setup) to get a Salesforce
                object and Postgres table syncing with each other in
                near-real-time. Using our app, you connect your Salesforce via
                oauth, connect your Postgres via connection URI (with options
                for SSL protocols), and either have Bracket generate a Postgres
                table from scratch or map fields between Salesforce and an
                existing Postgres table.
              </p>
              <p>
                Once connected, Bracket can sync two ways or one way at a
                cadence decided by the user. We offer two sync methods: polling
                (default) and streaming. Using the polling sync method, changes
                sync on average every 30-60 seconds. Using streaming, changes
                sync on average every 10-30 seconds. You can read about how each
                method works, and the APIs they use, here:
                <a href="https://docs.usebracket.com/polling"
                  >https://docs.usebracket.com/polling</a
                >
              </p>
              <p>
                We offer a few monthly subscription plans based on the amount of
                data kept in sync, with a free starter plan. You can try us
                without a credit card at
                <a href="https://app.usebracket.com/"
                  >https://app.usebracket.com/</a
                >. If you don’t have a Salesforce or Postgres already set up,
                you can see Bracket in action here:
                <a href="https://www.youtube.com/watch?v=sRkaAa667T0"
                  >https://www.youtube.com/watch?v=sRkaAa667T0</a
                >
              </p>
              <p>
                We’re hoping to build the best two-way syncing tool possible.
                We’ve got tools like Hubspot and MySQL in beta, and we’d love
                your feedback on other integrations that would be useful,
                product experience, and anything else that comes to your mind.
                It’s all very much appreciated. Thank you!
              </p>
            </div>
          </section>
        </section>
        <section id="38614878">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=38614878"
              >Want to apply for YC W24? We opened some last-minute spots for
              the next 3 days</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 17:01:09</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Even though the official YC W24 application deadline was in
                October, we know there are founders that haven't already applied
                but are interested in being a part of the batch.
              </p>
              <p>
                We didn’t want those people to miss out on the chance to
                participate in W24, and we had some extra bandwidth to read late
                applications, so we’re opening up a special application process
                for last minute applications, with at least 10 additional spots.
              </p>
              <p>
                So, if you’ve been thinking about applying to YC for a while and
                just got to the point where you are ready to actually do it, you
                can apply now and get a quick decision rather than waiting
                months for the summer batch.
              </p>
              <p>A few operational details:</p>
              <p>
                1) Apply by December 13 at 5pm Pacific Time. You’ll hear back by
                December 20th.
              </p>
              <p>
                2) To be eligible for these late W24 interviews, in your answer
                to the question “If you have a referral code”, include the
                string: HNW24 (yes, we made a special referral code for HN so we
                can understand where our users come from)
              </p>
              <p>
                3) This is for founders that did not already apply for the W24
                batch.
              </p>
            </div>
          </section>
        </section>
        <section id="38614824">
          <h3>
            <a
              class="item"
              href="https://future.mozilla.org/blog/introducing-memorycache/"
              >Mozilla "MemoryCache" Local AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 16:56:59</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38614824"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38614232">
          <h3>
            <a
              class="item"
              href="https://www.answer.ai/posts/2023-12-12-launch.html"
              >A new old kind of R&amp;amp;D lab</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 16:19:30</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38614232"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38614195">
          <h3>
            <a
              class="item"
              href="https://er4hn.info/blog/2023.08.26-tacit-knowledge-dangerous/"
              >Tacit Knowledge Is Dangerous</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 16:17:29</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38614195"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38613938">
          <h3>
            <a
              class="item"
              href="https://www.vapoursynth.com/doc/introduction.html"
              >VapourSynth: A video processing framework with simplicity in
              mind</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 16:00:11</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38613938"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38613804">
          <h3>
            <a
              class="item"
              href="https://petergray.substack.com/p/why-hunter-gatherers-work-was-play"
              >Why Hunter-Gatherers' Work Was Play</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 15:52:30</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38613804"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38613552">
          <h3>
            <a
              class="item"
              href="https://www.techdirt.com/2023/12/12/the-telecom-industry-is-very-mad-because-the-fcc-might-examine-high-broadband-prices/"
              >Telecom Industry Is Mad Because the FCC Might Examine High
              Broadband Prices</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 15:39:02</span
              ><span class="points-container"
                >Points: <span class="points">361</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38613552"
                  >Comments</a
                ><span class="descendants">: 192</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38613386">
          <h3>
            <a
              class="item"
              href="https://www.engadget.com/23andme-frantically-changed-its-terms-of-service-to-prevent-hacked-customers-from-suing-152434306.html"
              >23andMe frantically changed its terms of service to prevent
              customers from suing</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 15:27:34</span
              ><span class="points-container"
                >Points: <span class="points">418</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38613386"
                  >Comments</a
                ><span class="descendants">: 184</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38613280">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/aircraft/active-turbulence-cancellation/"
              >Active turbulence cancellation makes bumpy flights 80%
              smoother</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 15:19:33</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38613280"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38613219">
          <h3>
            <a
              class="item"
              href="https://www.phoronix.com/news/FFmpeg-CLI-MT-Merged"
              >FFmpeg Lands CLI Multi-Threading as Its "Most Complex
              Refactoring" in Decades</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 15:15:17</span
              ><span class="points-container"
                >Points: <span class="points">338</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38613219"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38613154">
          <h3>
            <a
              class="item"
              href="https://www.jeffgeerling.com/blog/2023/forget-spaceships-i-just-want-my-music"
              >Forget spaceships; I just want my music</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 15:10:57</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38613154"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38612779">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/entertainment/video-games/2023/12/12/e3-permanently-canceled/"
              >E3 Is Officially Dead</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 14:45:53</span
              ><span class="points-container"
                >Points: <span class="points">207</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38612779"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38612164">
          <h3>
            <a
              class="item"
              href="https://resobscura.substack.com/p/roleplaying-with-ai-will-be-powerful-tool"
              >Role-playing with AI will be a powerful tool for writers and
              educators</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 14:02:04</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38612164"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38611700">
          <h3>
            <a
              class="item"
              href="https://github.com/elfvingralf/macOSpilot-ai-assistant"
              >Show HN: Open-source macOS AI copilot (using vision and voice)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 13:17:31</span
              ><span class="points-container"
                >Points: <span class="points">289</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38611700"
                  >Comments</a
                ><span class="descendants">: 107</span></span
              >
            </h4>
            <div class="text">
              <p>It's pretty simple:</p>
              <p>
                - Use a keyboard shortcut to take a screenshot of your active
                macOS window and start recording the microphone.
              </p>
              <p>
                - Speak your question, then press the keyboard shortcut again to
                send your question + screenshot off to OpenAI Vision
              </p>
              <p>
                - The Vision response is presented in-context/overlayed over the
                active window, and spoken to you as audio.
              </p>
              <p>
                - The app keeps running in the background, only taking a
                screenshot/listening when activated by keyboard shortcut.
              </p>
              <p>
                It's built with NodeJS/Electron, and uses OpenAI Whisper, Vision
                and TTS APIs under the hood (BYO API key).
              </p>
              <p>
                There's a simple demo and a longer walk-through in the GH readme
                <a href="https://github.com/elfvingralf/macOSpilot-ai-assistant"
                  >https://github.com/elfvingralf/macOSpilot-ai-assistant</a
                >, and I also posted a different demo on Twitter:
                <a
                  href="https://twitter.com/ralfelfving/status/1732044723630805212"
                  >https://twitter.com/ralfelfving/status/1732044723630805212</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="38611590">
          <h3>
            <a
              class="item"
              href="https://tuta.com/blog/702-open-letter-against-surveillance"
              >Today Is One of the Biggest Surveillance Votes. Will the FBI Stop
              Spying?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 13:01:39</span
              ><span class="points-container"
                >Points: <span class="points">284</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38611590"
                  >Comments</a
                ><span class="descendants">: 148</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38611466">
          <h3>
            <a
              class="item"
              href="https://old.reddit.com/r/youtube/comments/18gjiqy/youtube_doesnt_want_to_take_down_scam_ads/"
              >YouTube doesn't want to take down scam ads</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 12:47:50</span
              ><span class="points-container"
                >Points: <span class="points">460</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38611466"
                  >Comments</a
                ><span class="descendants">: 297</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38609865">
          <h3>
            <a
              class="item"
              href="https://anguscheng.com/post/2023-12-12-wasm-game-in-c-raylib/"
              >Building a Web Game in C</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 05:28:29</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38609865"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38607221">
          <h3>
            <a
              class="item"
              href="https://publishing.cdlib.org/ucpressebooks/view?docId=ft9g50091s&amp;brand=ucpress"
              >Analogies between Analogies by S. Ulam</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-12 @ 00:00:03</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38607221"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38604265">
          <h3>
            <a
              class="item"
              href="https://spaceweatherarchive.com/2023/12/10/an-extremely-rare-occultation-of-betelgeuse/"
              >An Extremely Rare Occultation of Betelgeuse</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-11 @ 19:25:41</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38604265"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38601937">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=WYPNjSoDrqw"
              >Birth of Basic [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-11 @ 16:23:02</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38601937"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38599378">
          <h3>
            <a class="item" href="https://mailtrap.io/blog/rust-send-email/"
              >Send Emails with Rust – SMTP and API Methods with Examples</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-12-11 @ 10:44:52</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38599378"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
