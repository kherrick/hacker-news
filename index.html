<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43022398">
          <h3>
            <a class="item" href="https://elevenreader.io"
              >ElevenReader by ElevenLabs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 06:10:25</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43022398"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43022098">
          <h3>
            <a
              class="item"
              href="https://www.gyford.com/phil/writing/2025/02/10/no-longer-pinboard/"
              >No Longer Posting to Pinboard</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 05:10:09</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43022098"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43021677">
          <h3>
            <a
              class="item"
              href="https://localfirstweb.dev/blog/2023-05-29-i-wrote-a-static-web-page"
              >I wrote a static web page and accidentally started a community
              (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 03:51:37</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43021677"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43021643">
          <h3>
            <a class="item" href="https://claytonwramsey.com/blog/no-html/"
              >No longer writing my own damn HTML</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 03:45:06</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43021643"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43021515">
          <h3>
            <a class="item" href="https://github.com/jj-vcs/jj"
              >jj: a Git-compatible VCS that is both simple and powerful</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 03:26:46</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43021515"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43020983">
          <h3>
            <a
              class="item"
              href="https://bessstillman.substack.com/p/the-year-i-didnt-survive"
              >The year I didn't survive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 02:07:52</span
              ><span class="points-container"
                >Points: <span class="points">353</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43020983"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43020684">
          <h3>
            <a
              class="item"
              href="https://creston.blog/wasm-will-replace-containers/"
              >WASM will replace containers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 01:24:51</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43020684"
                  >Comments</a
                ><span class="descendants">: 198</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43020180">
          <h3>
            <a
              class="item"
              href="https://justinpombrio.net/2025/02/11/jj-cheat-sheet.html"
              >JJ Cheat Sheet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 00:23:16</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43020180"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43019737">
          <h3>
            <a class="item" href="https://support.apple.com/en-us/117294"
              >Migrate purchases from one Apple Account to another</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 23:32:02</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43019737"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43019352">
          <h3>
            <a
              class="item"
              href="https://neuralink.com/blog/a-year-of-telepathy/"
              >A Year of Telepathy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 22:46:31</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43019352"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43018293">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/empirical-health/jobs/nZFQWLW-design-engineer"
              >Empirical Health (YC S23) Is Hiring Design Engineers in NYC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 21:00:32</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43018251">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/thomson-reuters-ai-copyright-lawsuit/"
              >Thomson Reuters wins first major AI copyright case in the US</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 20:56:21</span
              ><span class="points-container"
                >Points: <span class="points">295</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43018251"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43017739">
          <h3>
            <a
              class="item"
              href="https://andrews.substack.com/p/zeroperl-sandboxed-perl-with-webassembly"
              >Zeroperl: Sandboxing Perl with WebAssembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 20:11:37</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43017739"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43017010">
          <h3>
            <a
              class="item"
              href="https://www.theturnsignalblog.com/the-subtle-art-of-designing-physical-control-for-cars/"
              >The subtle art of designing physical controls for cars</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 19:15:02</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43017010"
                  >Comments</a
                ><span class="descendants">: 130</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43016248">
          <h3>
            <a
              class="item"
              href="https://richmond.com/holmberg-reviving-the-joy-and-honor-of-working-with-your-hands-will-strengthen-our-nation/article_d8130166-855d-53b6-94e1-cb735edcd7cc.html"
              >Reviving the joy and honor of working with your hands (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 18:23:03</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43016248"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43015585">
          <h3>
            <a
              class="item"
              href="https://www.gamedeveloper.com/design/postmortem-the-singular-design-of-namco-s-katamari-damacy-2004-"
              >Postmortem: The singular design of Namco's Katamari Damacy
              (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 17:34:31</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43015585"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43015267">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43015267"
              >Launch HN: A0.dev (YC W25) – React Native App Generator</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 17:08:35</span
              ><span class="points-container"
                >Points: <span class="points">188</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43015267"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
            <div class="text">
              <a href="https://a0.dev">https://a0.dev</a>). a0.dev is a platform
              built to cut down React Native development time from weeks to just
              a few hours.
              <p>
                We’ve been building mobile apps together for seven years and
                have had several successes. One thing that’s always bothered us
                though is how much harder it is to build a mobile app than a
                website. If you’ve built an app with React Native before you’re
                familiar with the pains of working with both Xcode and Android
                Studio, writing tons of boilerplate before you can even start
                making the app, setting up state management, and of course going
                through the dreaded app review. We decided to build a platform
                that would make the app development process faster.
              </p>
              <p>
                We’ve seen the success of new code-gen platforms like v0 and
                wanted something for React Native that goes further. We built an
                AI app generator that takes a user's prompt and creates a custom
                React Native app with an instant live preview.
              </p>
              <p>
                Here’s a 5min demo where we recreated the Hacker News UI:
                <a href="https://youtu.be/f3lzBRBUous"
                  >https://youtu.be/f3lzBRBUous</a
                >
              </p>
              <p>
                a0.dev is great for quickly prototyping components and screens
                in React Native and users are able to copy the code from our
                generator into their preferred development environment. Our
                landing page has a couple of example prompts, but we encourage
                you to get creative when trying it out. We’ve had success
                generating not only functional screens like an Instagram Feed
                but also 2d games like Minesweeper or Flappy Bird.
              </p>
              <p>
                Our chat has a “UI Expert” and “Advanced Logic” model users can
                switch between depending on the task at hand. Users can upgrade
                from working on a single screen to creating a full app by
                clicking on the “Need a Full App” button in the top right of the
                page. This changes the scope from a standalone chat with a
                single file to a full project that can include multiple chats
                and files. We launched an IOS app that users can download in
                order to preview the app on a physical device. We find that many
                apps look and feel better on a physical device so we recommend
                trying it out.
              </p>
              <p>
                Our goal is to continue to improve the app generator while
                adding more features to help developers get their apps to the
                app store and make money from those apps. The main features on
                our roadmap right now are a Supabase integration and a “one
                click submit” button to let developers publish their app to the
                App Store.
              </p>
              <p>
                There are a few limitations to note. We’re working on releasing
                our Android app, but Android users should be able to preview
                their app using the Expo Go App. The app is running React Native
                Web in the browser so any dependencies that don’t support web
                won’t work with the web preview but should work on the phone.
                There are also some dependencies that our system can’t handle
                because they require native modules that aren’t packaged into
                our app currently.
              </p>
              <p>
                We hope you guys will check it out and try making an app with
                a0.dev. We’re available on Discord around the clock to help
                developers with any problems they may face and want to guide
                people to actually releasing their app on the App Store. Let us
                know what features you’d like to see and any problems you’ve
                faced building apps, we’d love to hear about your experience.
              </p>
              <p>
                Here’s the link again to check it out: (<a href="https://a0.dev"
                  >https://a0.dev</a
                >)
              </p>
              <p>
                We dropped the need to sign up for the first message so you can
                just jump in and try it out.
              </p>
              <p>Looking forward to your thoughts!</p>
            </div>
          </section>
        </section>
        <section id="43014418">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/technology/e-ink-kaleido-outdoor-3-75-inch-displays/"
              >E Ink's color ePaper tech gets supersized for outdoor displays</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 16:01:19</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43014418"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43014408">
          <h3>
            <a
              class="item"
              href="https://chipsandcheese.com/p/intels-battlemage-architecture"
              >Intel's Battlemage Architecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 16:00:59</span
              ><span class="points-container"
                >Points: <span class="points">173</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43014408"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43013615">
          <h3>
            <a
              class="item"
              href="https://haterade.substack.com/p/i-tasted-hondas-spicy-rodent-repelling"
              >I tasted Honda's spicy rodent-repelling tape and I will do it
              again (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 15:08:08</span
              ><span class="points-container"
                >Points: <span class="points">1255</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43013615"
                  >Comments</a
                ><span class="descendants">: 369</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43013431">
          <h3>
            <a
              class="item"
              href="https://www.backblaze.com/blog/backblaze-drive-stats-for-2024/"
              >Backblaze Drive Stats for 2024</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 14:55:45</span
              ><span class="points-container"
                >Points: <span class="points">438</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43013431"
                  >Comments</a
                ><span class="descendants">: 135</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43007982">
          <h3>
            <a
              class="item"
              href="https://www.joinformal.com/blog/down-the-rabbit-hole-implementing-ssh-port-forwarding-over-aws-session-manager/"
              >Down the rabbit hole: Implementing SSH port forwarding over AWS
              Session Manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 01:42:59</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43007982"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42999598">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-01-durable-plastic-sustainability-makeover-polymerization.html"
              >Durable plastic gets a sustainability makeover in novel
              polymerization process</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 12:44:27</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42999598"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42997344">
          <h3>
            <a
              class="item"
              href="https://pinballnirvana.com/forums/threads/the-pinball-philosophy-john-mcphee-1975.22239/"
              >The Pinball Philosophy (1975)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 05:57:53</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42997344"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42994590">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=swlVkYVSlIE"
              >Smoke in the cabin of two 737 MAX caused by Load Reduction Device
              system [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 22:12:01</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42994590"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42991062">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/future/article/20250207-sky-skimmers-the-race-to-send-satellites-into-very-low-earth-orbits"
              >Sky skimmers: The race to fly satellites at the lowest orbits
              yet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 15:00:37</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42991062"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990103">
          <h3>
            <a
              class="item"
              href="https://www.fastcompany.com/90747313/steve-jobs-lessons-tony-fadell-build-book-excerpt"
              >Storytelling lessons I learned from Steve Jobs (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 11:53:31</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990103"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42986241">
          <h3>
            <a
              class="item"
              href="https://www.lightsource.ca/public/news/2024-25-q4-jan-march/scientists-invent-slime-that-could-be-used-in-new-medical-green-energy-and-robot-applications.php"
              >Scientists invent "slime" – could be used in medical, energy,
              robot applications</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-08 @ 21:11:20</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42986241"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42982755">
          <h3>
            <a class="item" href="https://ohmjs.org/"
              >Ohm: A user-friendly parsing toolkit for JavaScript and
              TypeScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-08 @ 13:15:26</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42982755"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42969038">
          <h3>
            <a
              class="item"
              href="https://hms.harvard.edu/news/ancient-dna-study-identifies-originators-indo-european-language-family"
              >Ancient-DNA study identifies originators of Indo-European
              language family</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 03:30:10</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42969038"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
