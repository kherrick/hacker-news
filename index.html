<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45439721">
          <h3>
            <a
              class="item"
              href="https://fossa.com/blog/fossabot-dependency-upgrade-ai-agent/"
              >Fossabot: AI code review for Dependabot/Renovate on breaking
              changes and impacts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 16:30:16</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45439721"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45438704">
          <h3>
            <a class="item" href="https://www.asimov.press/p/hyperspectral"
              >MIT technology can see microbes from 90 meters away</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 15:15:44</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45438704"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45438496">
          <h3>
            <a class="item" href="https://si.inc/posts/the-heap/"
              >Building a 30 PB storage cluster in the heart of SF</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 15:00:41</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45438496"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45438346">
          <h3>
            <a class="item" href="https://autism-simulator.vercel.app/"
              >Show HN: Autism Simulator</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 14:48:31</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45438346"
                  >Comments</a
                ><span class="descendants">: 197</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm trying to give people a feel for what masking, decision
                fatigue, and burnout can look like day-to-day. That’s hard to
                explain in words, but easier to show through choices and stats.
                I'm not trying to "define autism".
              </p>
              <p>
                I’ve gotten good feedback here about resilience, meds, and
                difficulty tuning. I’ll keep tweaking it. If even a few people
                walk away thinking, "ah, maybe that’s why my coworker struggles
                in those situations," then it’s worth it.
              </p>
              <p>Appreciate everyone who’s tried it and shared thoughts.</p>
            </div>
          </section>
        </section>
        <section id="45438170">
          <h3>
            <a
              class="item"
              href="https://detect.fyi/technical-analysis-of-sap-exploit-script-visual-composer-metadata-uploader-exploit-7b4a01b38548"
              >Technical Analysis of SAP Exploit Script Used in JLR, Harrods
              Hacks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 14:31:37</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45438170"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437906">
          <h3>
            <a class="item" href="https://github.com/unkn0wn-root/resterm"
              >Show HN: Resterm – A terminal-based REST/GraphQL and gRPC
              client</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 14:07:04</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437906"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437893">
          <h3>
            <a
              class="item"
              href="https://www.alephic.com/writing/the-magic-of-claude-code"
              >Unix philosophy and filesystem access makes Claude Code
              amazing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 14:05:45</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437893"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437735">
          <h3>
            <a class="item" href="https://cursor.com/changelog/1-7"
              >Cursor 1.7</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 13:51:03</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437735"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437594">
          <h3>
            <a class="item" href="https://app.chartdb.io/ai"
              >Show HN: ChartDB Agent – Cursor for DB schema design</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 13:38:36</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437594"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=44972238"
                >https://news.ycombinator.com/item?id=44972238</a
              >) - an open-source tool that generates ER diagrams from your
              database (via query/sql/dbml) without needing direct DB access.
              <p>Now we’re launching the ChartDB Agent.</p>
              <p>
                It helps you design databases from scratch or make schema
                changes with natural language.
              </p>
              <p>You can:</p>
              <p>
                - Generate schemas by simply describing them in plain English
              </p>
              <p>- Brainstorm new tables, columns, and relationships with AI</p>
              <p>- Iterate visually in a diagram (ERD)</p>
              <p>- Deterministically export SQL script</p>
              <p>
                Try it out here -
                <a href="https://chartdb.io/ai">https://chartdb.io/ai</a> - no
                signup required.
              </p>
              <p>Or sign up and use it on your own database</p>
              <p>Would love to get your feedback :)</p>
            </div>
          </section>
        </section>
        <section id="45437326">
          <h3>
            <a class="item" href="https://github.com/chr15m/minimal-pwa"
              >Minimal files and config for a PWA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 13:14:48</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437326"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437323">
          <h3>
            <a class="item" href="https://wiki.xxiivv.com/site/uxntal.html"
              >Uxntal: A programming language for the Uxn virtual machine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 13:14:32</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437323"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437112">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/tkafka/e3eb63a5ec448e9be6701bfd1f1b1e58"
              >Detect Electron apps on Mac that hasn't been updated to fix the
              system wide lag</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 12:54:17</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437112"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437081">
          <h3>
            <a
              class="item"
              href="https://blog.nordcraft.com/no-figma-i-wont-fit-in-your-little-box"
              >No Figma, I won't fit in your little box</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 12:50:49</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437081"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437060">
          <h3>
            <a
              class="item"
              href="https://observer.co.uk/news/national/article/hackers-strike-harrods-in-latest-uk-cyberattack"
              >Hackers strike Harrods in latest UK cyberattack</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 12:47:10</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437060"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437027">
          <h3>
            <a
              class="item"
              href="https://bertwagner.com/posts/splashflag-building-an-iot-swimming-notification-device-from-scratch/"
              >Building an IoT Notification Device from Scratch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 12:43:51</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437027"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45436664">
          <h3>
            <a
              class="item"
              href="https://reutersinstitute.politics.ox.ac.uk/news/most-people-want-platforms-not-governments-be-responsible-moderating-content"
              >People want platforms, not governments, to be responsible for
              moderating content</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 11:55:15</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45436664"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45436534">
          <h3>
            <a
              class="item"
              href="https://www.amplifypartners.com/blog-posts/why-tigerbeetle-is-the-most-interesting-database-in-the-world"
              >TigerBeetle is a most interesting database</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 11:33:19</span
              ><span class="points-container"
                >Points: <span class="points">251</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45436534"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45436027">
          <h3>
            <a class="item" href="https://flowsynx.io/"
              >FlowSynx – Orchestrate Declarative, Plugin-Driven DAG Workflows
              on .NET</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 10:00:29</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45436027"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45435825">
          <h3>
            <a class="item" href="https://weakty.com/posts/efforts/"
              >Our efforts, in part, define us</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 09:22:10</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45435825"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45435463">
          <h3>
            <a
              class="item"
              href="https://mayberay.bearblog.dev/why-i-only-use-google-sheets/"
              >I only use Google Sheets</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 08:06:50</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45435463"
                  >Comments</a
                ><span class="descendants">: 211</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45435422">
          <h3>
            <a
              class="item"
              href="https://abuseofnotation.github.io/category-theory-illustrated/11_natural_transformations/"
              >Category Theory Illustrated – Natural Transformations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 08:00:30</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45435422"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45435100">
          <h3>
            <a
              class="item"
              href="https://www.cs.cornell.edu/courses/cs6110/2015sp/textbook/Simon%20Thompson%20textbook.pdf"
              >Type Theory and Functional Programming (1999) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 07:00:21</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45435100"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45434941">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2506.10605"
              >High-resolution efficient image generation from WiFi Mapping</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 06:33:02</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45434941"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45434417">
          <h3>
            <a
              class="item"
              href="https://www.databricks.com/blog/intelligent-kubernetes-load-balancing-databricks"
              >Intelligent Kubernetes Load Balancing at Databricks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 05:06:38</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45434417"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45433768">
          <h3>
            <a class="item" href="https://github.com/google/cdc-file-transfer"
              >CDC File Transfer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 02:38:18</span
              ><span class="points-container"
                >Points: <span class="points">343</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45433768"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45415591">
          <h3>
            <a
              class="item"
              href="https://www.mikekohn.net/micro/ip_over_lasers.php"
              >IP over Lasers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 16:19:49</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45415591"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45404868">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-09-leaf-miners-oldest-insect-plague.html"
              >Leaf miners identified as oldest insect plague in the history of
              Earth</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-28 @ 15:05:12</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45404868"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45404760">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45404760"
              >Ask HN: What is nowadays (opensource) way of converting HTML to
              PDF?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-28 @ 14:52:54</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45404760"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
            <div class="text">
              I'm using wkhtmltopdf but it is painful to work with? what are
              other people using nowadays? i.e canva or other tools?
            </div>
          </section>
        </section>
        <section id="45402213">
          <h3>
            <a class="item" href="https://www.privacyforge.ai/"
              >Show HN: Privacyforge.ai – AI Privacy Compliance Documents That
              Work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-28 @ 06:37:56</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45402213"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm Divy, former CTO at Branch and previously led engineering
                teams at Credit Karma and NexHealth. Over the past decade in
                fintech and healthtech, I've watched too many founders get
                blindsided by privacy compliance.
              </p>
              <p>
                The Problem: 80% of startups are unaware of privacy laws
                affecting their business. The choice between expensive attorneys
                ($5,000+) and risky generic templates is getting worse as
                regulations expand. Generic privacy policies fail because they
                make promises your business can't keep – I've seen this tank
                funding rounds and trigger regulatory investigations.
              </p>
              <p>
                My Personal Pain: At Branch, we spent weeks and over $5K just to
                get basic privacy compliance docs. Our attorneys charged
                hundreds per hour to essentially fill out forms about our data
                practices. The kicker? The policy didn't even cover our specific
                use cases properly, and we had to redo everything when new
                regulations kicked in.
              </p>
              <p>
                The Solution: PrivacyForge.ai generates legally compliant
                privacy documentation using AI trained on current regulations.
                Instead of generic templates, it creates documents based on your
                actual business practices – what data you collect, how you
                process it, where you store it, and which jurisdictions apply to
                you.
              </p>
              <p>
                Technical Approach: We built this on Google Cloud with Vertex
                AI, using Claude Sonnet and Gemini 2.5 for document generation.
                The system maintains separate knowledge bases for GDPR, CCPA,
                CPRA, PIPEDA, COPPA, and CalOPPA. Each document gets validated
                against jurisdiction-specific requirements before delivery.
                We're continuously expanding the regulations we support.
              </p>
              <p>
                Different from existing tools: Most privacy generators use
                static templates with basic fill-in-the-blanks. We analyze your
                specific data flows and generate custom language. No per-site
                pricing that kills agencies – just one-time payments with
                included updates when regulations change. Current status: We're
                live with paying customers who've saved thousands in legal fees.
                Generated documents have passed compliance reviews at companies
                going through Series A due diligence.
              </p>
              <p>
                Try it at privacyforge.ai – would love feedback from the HN
                community, especially if you're dealing with privacy compliance
                headaches at your company.
              </p>
              <p>
                What privacy compliance nightmares have you faced? Always
                curious to hear war stories from fellow builders.
              </p>
            </div>
          </section>
        </section>
        <section id="45395115">
          <h3>
            <a
              class="item"
              href="https://www.oranlooney.com/post/history-of-computing-2/"
              >The Prehistory of Computing, Part II</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-27 @ 12:24:30</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45395115"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
