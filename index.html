<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44658233">
          <h3>
            <a
              class="item"
              href="https://questdb.com/careers/technical-content-lead/"
              >QuestDB (YC S20) Is Hiring a Technical Content Lead</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 12:00:36</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44658103">
          <h3>
            <a
              class="item"
              href="https://www.maxvanijsselmuiden.nl/liquid-glass"
              >Apple's Liquid Glass: When Aesthetics Beat Function</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 11:46:09</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44658103"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44658027">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44658027"
              >Show HN: Header-only GIF decoder in pure C – no malloc, easy to
              use</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 11:36:33</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44658027"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
            <div class="text">
              <p>
                Github:
                <a
                  href="https://github.com/Ferki-git-creator/TurboStitchGIF-HeaderOnly-Fast-ZeroAllocation-PlatformIndependent-Embedded-C-GIF-Decoder"
                  >https://github.com/Ferki-git-creator/TurboStitchGIF-HeaderOn...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44657727">
          <h3>
            <a
              class="item"
              href="https://www.cerebras.ai/press-release/cerebras-launches-qwen3-235b-world-s-fastest-frontier-ai-model-with-full-131k-context-support"
              >Cerebras Launches Qwen3-235B, Achieving 1,500 Tokens per
              Second</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 10:51:51</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44657727"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44657291">
          <h3>
            <a
              class="item"
              href="https://brave.com/privacy-updates/35-block-recall/"
              >Brave blocks Microsoft Recall by default</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 09:33:23</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44657291"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44656105">
          <h3>
            <a
              class="item"
              href="https://forum.vcfed.org/index.php?threads/rescuing-two-pdp-11-systems-in-uk-from-a-former-big-british-telecom-underground-shelter-in-central-london.1244723/page-2"
              >Rescuing two PDP-11s from a former British Telecom underground
              shelter (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 06:02:40</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44656105"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44656073">
          <h3>
            <a
              class="item"
              href="https://andreyor.st/posts/2024-12-20-extending-emacs-with-fennel/"
              >Extending Emacs with Fennel (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 05:54:21</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44656073"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44655632">
          <h3>
            <a class="item" href="https://github.com/scottvr/wtffmpeg"
              >Show HN: WTFfmpeg – Natural Language to FFmpeg Translator</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 04:03:53</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44655632"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44655565">
          <h3>
            <a
              class="item"
              href="https://ocw.mit.edu/courses/6-1200j-mathematics-for-computer-science-spring-2024/"
              >Mathematics for Computer Science (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 03:47:18</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44655565"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
            <div class="text">
              <p>
                <a
                  href="https://ocw.mit.edu/courses/6-1200j-mathematics-for-computer"
                  >https://ocw.mit.edu/courses/6-1200j-mathematics-for-computer</a
                >...
              </p>
              <p>
                <a
                  href="https://www.youtube.com/playlist?list=PLUl4u3cNGP61VNvICqk2H"
                  >https://www.youtube.com/playlist?list=PLUl4u3cNGP61VNvICqk2H</a
                >...
              </p>
            </div>
          </section>
        </section>
        <section id="44655385">
          <h3>
            <a
              class="item"
              href="https://orgmode.org/worg/org-tutorials/index.html"
              >Org tutorials</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 03:09:20</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44655385"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44654444">
          <h3>
            <a class="item" href="https://maurycyz.com/misc/cc/"
              >Why you can't color calibrate deep space photos</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-23 @ 00:16:18</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44654444"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44653965">
          <h3>
            <a
              class="item"
              href="https://lemire.github.io/talks/2025/sea/sea2025.html"
              >Algorithms for Modern Processor Architectures</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 22:56:55</span
              ><span class="points-container"
                >Points: <span class="points">222</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44653965"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44653072">
          <h3>
            <a class="item" href="https://qwenlm.github.io/blog/qwen3-coder/"
              >Qwen3-Coder: Agentic coding in the world</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 21:12:30</span
              ><span class="points-container"
                >Points: <span class="points">657</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44653072"
                  >Comments</a
                ><span class="descendants">: 288</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44651770">
          <h3>
            <a
              class="item"
              href="https://abc.decontextualize.com/more-than-you-wanted-to-know/"
              >More than you wanted to know about how Game Boy cartridges
              work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 19:17:38</span
              ><span class="points-container"
                >Points: <span class="points">356</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44651770"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44651766">
          <h3>
            <a
              class="item"
              href="https://plane.so/blog/everything-you-need-to-know-about-plane-air-gapped"
              >We built an air-gapped Jira alternative for regulated
              industries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 19:17:32</span
              ><span class="points-container"
                >Points: <span class="points">248</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44651766"
                  >Comments</a
                ><span class="descendants">: 161</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44651539">
          <h3>
            <a
              class="item"
              href="https://forums.swift.org/t/introducing-swift-erlang-actor-system/81248"
              >Swift-erlang-actor-system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 18:59:04</span
              ><span class="points-container"
                >Points: <span class="points">292</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44651539"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44651485">
          <h3>
            <a
              class="item"
              href="https://anuraag2601.github.io/gemini_cli_disaster.html"
              >I watched Gemini CLI hallucinate and delete my files</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 18:54:05</span
              ><span class="points-container"
                >Points: <span class="points">243</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44651485"
                  >Comments</a
                ><span class="descendants">: 296</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44651092">
          <h3>
            <a
              class="item"
              href="https://research.google/blog/android-earthquake-alerts-a-global-system-for-early-warning/"
              >Android Earthquake Alerts: A global system for early warning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 18:23:14</span
              ><span class="points-container"
                >Points: <span class="points">307</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44651092"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44650840">
          <h3>
            <a
              class="item"
              href="https://alignment.anthropic.com/2025/subliminal-learning/"
              >Subliminal learning: Models transmit behaviors via hidden signals
              in data</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 18:02:11</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44650840"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44650622">
          <h3>
            <a class="item" href="https://phind.design"
              >Show HN: Phind.design – Image editor &amp;amp; design tool
              powered by 4o / custom models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 17:44:33</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44650622"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                Today we’re launching phind.design (<a
                  href="https://phind.design"
                  >https://phind.design</a
                >), an image editor and design tool that uses 4o and custom
                models to allow users to generate and edit designs for anything
                from logos and advertisements to creative website and app
                designs.
              </p>
              <p>
                4o is great at producing a first version of an image, but is not
                capable of editing it without messing up other parts of it. We
                fix this by running Flux Kontext alongside 4o image gen in the
                chat, as well as by introducing a precision editor powered by
                custom models where a user indicates an area to modify and we
                guarantee that only that area will be modified.
              </p>
              <p>
                Our precision editor is state-of-the-art on image editing in our
                tests and allows inserting new additional images into the
                existing image. The latter allows users to insert a logo,
                product, or face into an image without messing up other parts of
                the image, and even fix logos and faces that were messed up by
                4o. Text editing with the precision edit model is still a work
                in progress, and we will fix it with the next iteration of that
                model. We recommend using the chat for editing text for now.
              </p>
              <p>
                Example: Insert UT Austin logo into helicopter ad (<a
                  href="https://phind.design/edit?chat=cmd27o2n10001l704h6865f3u"
                  >https://phind.design/edit?chat=cmd27o2n10001l704h6865f3u</a
                >)
              </p>
              <p>
                We also always produce multiple variations for image generations
                and edits, as we think this variety is important for getting
                exactly what you asked for.
              </p>
              <p>
                Example: Paul Graham in startup heaven (<a
                  href="https://phind.design/edit?chat=cmd23h91c000jky04no5d92uy"
                  >https://phind.design/edit?chat=cmd23h91c000jky04no5d92uy</a
                >)
              </p>
              <p>
                One thing we’re excited about is adding more variation into
                AI-generated websites, as many website builders all use the same
                CSS libraries, so many websites end up looking the same. We hope
                to allow builders and creatives to make truly unique designs in
                1/10th the time it currently takes with existing tools.
              </p>
              <p>
                Example: Make me a popeyes landing page where the eyes are
                actually popping out (<a
                  href="https://phind.design/edit?chat=cmd25imtm0001jr046nsag4lu"
                  >https://phind.design/edit?chat=cmd25imtm0001jr046nsag4lu</a
                >) Example: A train map with sandwich ingredients replacing
                subway stops. (<a
                  href="https://phind.design/edit?chat=cmd23i98c0001ie04l56npyj3"
                  >https://phind.design/edit?chat=cmd23i98c0001ie04l56npyj3</a
                >)
              </p>
              <p>
                As engineers who have been frustrated by the time commitment it
                takes to learn Figma or Photoshop, we hope that phind.design
                makes it incredibly easy to go from zero to one on your wildest
                creative ideas.
              </p>
              <p>
                The editor is far from perfect, particularly when it comes to
                text. We are working on it and have a new custom precision
                editing model on the way. In the meantime, we’re excited to hear
                your comments and feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="44649651">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/betelgeuse-s-long-predicted-stellar-companion-may-have-been-found-last"
              >Gemini North telescope discovers long-predicted stellar companion
              of Betelgeuse</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 16:41:31</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44649651"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
            <div class="text">
              <a href="https://noirlab.edu/public/news/noirlab2523/"
                >https://noirlab.edu/public/news/noirlab2523/</a
              >
            </div>
          </section>
        </section>
        <section id="44648144">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/07/22/well/lung-cancer-nonsmokers.html"
              >Many lung cancers are now in nonsmokers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 15:18:56</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44648144"
                  >Comments</a
                ><span class="descendants">: 264</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44647190">
          <h3>
            <a
              class="item"
              href="https://www.anthes.is/font-comparison-review-atkinson-hyperlegible-mono.html"
              >Font Comparison: Atkinson Hyperlegible Mono vs. JetBrains Mono
              and Fira Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 14:17:05</span
              ><span class="points-container"
                >Points: <span class="points">240</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44647190"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44646801">
          <h3>
            <a
              class="item"
              href="https://sophiebits.com/2025/07/21/todos-arent-for-doing"
              >TODOs aren't for doing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 13:43:16</span
              ><span class="points-container"
                >Points: <span class="points">382</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44646801"
                  >Comments</a
                ><span class="descendants">: 219</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44638304">
          <h3>
            <a
              class="item"
              href="https://idiallo.com/blog/sql-injection-as-a-feature"
              >SQL Injection as a Feature</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 17:59:23</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44638304"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44632218">
          <h3>
            <a class="item" href="https://kcyesterday.com/articles/subtropolis"
              >SubTropolis and KC's Limestone Caves</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 06:10:57</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44632218"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44631042">
          <h3>
            <a
              class="item"
              href="https://pixelmoondust.neocities.org/archives/archivedtiles"
              >Geocities Backgrounds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-21 @ 01:42:22</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44631042"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44622637">
          <h3>
            <a
              class="item"
              href="https://www.ft.com/content/e17647f0-4c3b-49b4-a031-b56158bbb3b8"
              >AI groups spend to replace low-cost 'data labellers' with
              high-paid experts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-20 @ 07:02:03</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44622637"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44619485">
          <h3>
            <a
              class="item"
              href="https://www.rodsbooks.com/efi-bootloaders/controlling-sb.html"
              >Managing EFI boot loaders for Linux: Controlling secure boot
              (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 21:15:56</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44619485"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44619206">
          <h3>
            <a
              class="item"
              href="https://www.granola.ai/blog/dont-animate-height"
              >Don't animate height</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 20:44:19</span
              ><span class="points-container"
                >Points: <span class="points">428</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44619206"
                  >Comments</a
                ><span class="descendants">: 247</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
