<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46814701">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/world/musks-spacex-merger-talks-with-xai-ahead-planned-ipo-source-says-2026-01-29/"
              >SpaceX in Merger Talks with xAI</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 18:53:30</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46814701"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46814614">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/security/2026/01/county-pays-600000-to-pentesters-it-arrested-for-assessing-courthouse-security/"
              >County pays $600k to pentesters it arrested for assessing
              courthouse security</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 18:48:09</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46814614"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46814569">
          <h3>
            <a
              class="item"
              href="https://restofworld.org/2025/ai-chatbot-china-sick/"
              >My Mom and Dr. DeepSeek (2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 18:45:27</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46814569"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46814129">
          <h3>
            <a class="item" href="https://werai.ca/security-disclosure.html"
              >MakuluLinux (6.4M Downloads) Ships Persistent Backdoor from
              Developer's Own C2</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 18:18:22</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46814129"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46814115">
          <h3>
            <a
              class="item"
              href="https://openai.com/index/inside-our-in-house-data-agent"
              >OpenAI's In-House Data Agent</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 18:17:54</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46814115"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46814089">
          <h3>
            <a
              class="item"
              href="https://electrek.co/2026/01/29/tesla-committing-automotive-suicide/"
              >Tesla is committing automotive suicide</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 18:16:45</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46814089"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46813834">
          <h3>
            <a
              class="item"
              href="https://semiengineering.com/ais-impact-on-engineering-jobs-may-be-different-than-initial-projections/"
              >AI's Impact on Engineering Jobs May Be Different Than Expected</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 18:00:10</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46813834"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46812933">
          <h3>
            <a
              class="item"
              href="https://blog.google/innovation-and-ai/models-and-research/google-deepmind/project-genie/"
              >Project Genie: Experimenting with infinite, interactive worlds</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 17:02:39</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46812933"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46812892">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/reflex/jobs/Jcwrz7A-lead-software-engineer-infra"
              >Reflex (YC W23) Senior Software Engineer Infra</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 17:00:42</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46812608">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46812608"
              >Launch HN: AgentMail (YC S25) – An API that gives agents their
              own email inboxes</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 16:42:33</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46812608"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
            <div class="text">
              <a href="https://agentmail.to">https://agentmail.to</a>), the
              email inbox API for agents. We’re not talking about AI for your
              email, this is email for your AI.
              <p>
                Email is an optimal interface for long-running agents. It’s
                multithreaded and asynchronous with full support for rich text
                and files. It’s a universal protocol with identity and
                authentication built in. Moreover, a lot of workflow critical
                context already lives in email.
              </p>
              <p>
                We wanted to build email agents that you can forward your work
                to and get back a completed task. The agents could act entirely
                autonomously as you wouldn't need to delegate your identity. If
                they did get stuck they could just send you, or anyone else, an
                email.
              </p>
              <p>
                Using Gmail, we kept getting stuck on the limitations of their
                API. No way to create inboxes programmatically. Rate and sending
                limits. OAuth for every single inbox. Keyword search that
                doesn't understand context. Per-seat pricing that doesn't work
                for agents.
              </p>
              <p>
                So we built what we wished existed: an email provider for
                developers. APIs for creating inboxes and configuring domains.
                Email parsing and threading. Text extraction from attachments.
                Realtime webhooks and websockets. Semantic search across
                inboxes. Usage-based pricing that works for agents.
              </p>
              <p>
                Developers, startups, and enterprises are already deploying
                email agents with AgentMail. Agents that convert conversations
                and documents into structured data. Agents that source quotes,
                negotiate prices, and get the best deals. Agents that emulate
                internet users for training models on end-to-end tasks.
              </p>
              <p>
                Here's demo of Clawdbots communicating using AgentMail:
                <a href="https://youtu.be/Y0MfUWS3LKQ"
                  >https://youtu.be/Y0MfUWS3LKQ</a
                >
              </p>
              <p>
                You can get started with AgentMail for free at
                <a href="https://agentmail.to">https://agentmail.to</a>
              </p>
              <p>Looking forward to hearing your thoughts and feedback.</p>
            </div>
          </section>
        </section>
        <section id="46812173">
          <h3>
            <a
              class="item"
              href="https://www.dexerto.com/entertainment/us-cybersecurity-chief-leaked-sensitive-government-files-to-chatgpt-report-3311462/"
              >US cybersecurity chief leaked sensitive government files to
              ChatGPT: Report</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 16:12:19</span
              ><span class="points-container"
                >Points: <span class="points">291</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46812173"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46812159">
          <h3>
            <a
              class="item"
              href="https://www.drugtargetreview.com/news/192714/drug-trio-found-to-block-tumour-resistance-in-pancreatic-cancer/"
              >Drug trio found to block tumour resistance in pancreatic
              cancer</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 16:11:04</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46812159"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46811762">
          <h3>
            <a
              class="item"
              href="https://home.cern/news/news/cern/heating-homes-worlds-largest-particle-accelerator"
              >Heating homes with the largest particle accelerator</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 15:49:04</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46811762"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46811588">
          <h3>
            <a
              class="item"
              href="https://quesma.com/blog/introducing-otel-bench/"
              >OTelBench: AI struggles with simple SRE tasks (Opus 4.5 scores
              only 29%)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 15:37:21</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46811588"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46810904">
          <h3>
            <a class="item" href="https://blog.xoria.org/terminal-colors/"
              >How to Choose Colors for Your CLI Applications (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 14:49:08</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46810904"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46810828">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/moltworker-self-hosted-ai-agent/"
              >Run Clawdbot/Moltbot on Cloudflare with Moltworker</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 14:43:07</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46810828"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46810536">
          <h3>
            <a class="item" href="https://www.breakmeifyoucan.com/"
              >Break Me If You Can: Exploiting PKO and Relay Attacks in 3DES/AES
              NFC</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 14:20:21</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46810536"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46810401">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2026/01/29/waymo-robotaxi-hits-a-child-near-an-elementary-school-in-santa-monica/"
              >Waymo robotaxi hits a child near an elementary school in Santa
              Monica</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 14:08:56</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46810401"
                  >Comments</a
                ><span class="descendants">: 312</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46810337">
          <h3>
            <a class="item" href="https://ipsj.ixsq.nii.ac.jp/records/229345"
              >Playing Board Games with Deep Convolutional Neural Network on
              8bit Motorola 6809</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 14:03:12</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46810337"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46810282">
          <h3>
            <a class="item" href="https://marginlab.ai/trackers/claude-code/"
              >Claude Code Daily Benchmarks for Degradation Tracking</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 13:59:07</span
              ><span class="points-container"
                >Points: <span class="points">384</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46810282"
                  >Comments</a
                ><span class="descendants">: 205</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46809420">
          <h3>
            <a
              class="item"
              href="https://www.scala-lang.org/blog/2026/01/27/sta-invests-in-scala.html"
              >The Sovereign Tech Fund Invests in Scala</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 12:42:58</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46809420"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46806773">
          <h3>
            <a
              class="item"
              href="https://www.esa.int/Applications/Observing_the_Earth/Meteorological_missions/meteosat_third_generation/Europe_s_next-generation_weather_satellite_sends_back_first_images"
              >Europe’s next-generation weather satellite sends back first
              images</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 07:07:17</span
              ><span class="points-container"
                >Points: <span class="points">592</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46806773"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46805665">
          <h3>
            <a class="item" href="https://web.mit.edu/jemorris/humor/500-miles"
              >We can’t send mail farther than 500 miles (2002)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 03:58:33</span
              ><span class="points-container"
                >Points: <span class="points">610</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46805665"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
            <div class="text">
              <a href="https://ibiblio.org/harris/500milemail-faq.html"
                >https://ibiblio.org/harris/500milemail-faq.html</a
              >
            </div>
          </section>
        </section>
        <section id="46801419">
          <h3>
            <a
              class="item"
              href="https://www.macrumors.com/2026/01/28/patreon-apple-tax/"
              >Apple to soon take up to 30% cut from all Patreon creators in iOS
              app</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 20:59:30</span
              ><span class="points-container"
                >Points: <span class="points">941</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46801419"
                  >Comments</a
                ><span class="descendants">: 768</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46779922">
          <h3>
            <a class="item" href="https://playground.shaped.ai"
              >Show HN: ShapedQL – A SQL engine for multi-stage ranking and
              RAG</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-27 @ 13:54:09</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46779922"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’m Tullie, founder of Shaped. Previously, I was a researcher at
                Meta AI, worked on ranking for Instagram Reels, and was a
                contributor to PyTorch Lightning.
              </p>
              <p>
                We built ShapedQL because we noticed that while retrieval
                (finding 1,000 items) has been commoditized by vector DBs,
                ranking (finding the best 10 items) is still an infrastructure
                problem.
              </p>
              <p>
                To build a decent for you feed or a RAG system with long-term
                memory, you usually have to put together a vector DB
                (Pinecone/Milvus), a feature store (Redis), an inference
                service, and thousands of lines of Python to handle business
                logic and reranking.
              </p>
              <p>
                We built an engine that consolidates this into a single SQL
                dialect. It compiles declarative queries into high-performance,
                multi-stage ranking pipelines.
              </p>
              <p>HOW IT WORKS:</p>
              <p>
                Instead of just SELECT
                <i
                  >, ShapedQL operates in four stages native to recommendation
                  systems:
                  <p>
                    RETRIEVE: Fetch candidates via Hybrid Search (Keywords +
                    Vectors) or Collaborative Filtering. FILTER: Apply hard
                    constraints (e.g., "inventory &gt; 0"). SCORE: Rank results
                    using real-time models (e.g., p(click) or p(relevance)).
                    REORDER: Apply diversity logic so your Agent/User doesn’t
                    see 10 nearly identical results.
                  </p>
                  <p>
                    THE SYNTAX: Here is what a RAG query looks like. This
                    replaces about 500 lines of standard Python/LangChain code:
                  </p>
                  <p>SELECT item_id, description, price</p>
                  <p>FROM</p>
                  <p></p>
                  <pre><code>  -- Retrieval: Hybrid search across multiple indexes

  search_flights("$param.user_prompt", "$param.context"),

  search_hotels("$param.user_prompt", "$param.context")
</code></pre>
                  WHERE
                  <p></p>
                  <pre><code>  -- Filtering: Hard business constraints

  price &lt;= "$param.budget" AND is_available("$param.dates")
</code></pre>
                  ORDER BY
                  <p></p>
                  <pre><code>  -- Scoring: Real-time reranking (Personalization + Relevance)

  0.5 * preference_score(user, item) +

  0.3 * relevance_score(item, "$param.user_prompt")
</code></pre>
                  LIMIT 20
                  <p>
                    If you don’t like SQL, you can also use our Python and
                    Typescript SDKs. I’d love to know what you think of the
                    syntax and the abstraction layer!
                  </p></i
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46772132">
          <h3>
            <a
              class="item"
              href="https://ntietz.com/blog/making-niche-solutions-is-the-point/"
              >Making niche solutions is the point</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 21:56:05</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46772132"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46760546">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Usenet_personality"
              >Usenet personality</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 01:09:14</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46760546"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46754097">
          <h3>
            <a
              class="item"
              href="https://blog.ezyang.com/2026/01/computing-sharding-with-einsum/"
              >Computing Sharding with Einsum</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-25 @ 13:54:57</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46754097"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46741602">
          <h3>
            <a class="item" href="https://faresbakhit.github.io/e/cpp-modules/"
              >C++ Modules Are Here to Stay</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 06:49:05</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46741602"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46729139">
          <h3>
            <a class="item" href="https://github.com/EmulatorJS/EmulatorJS"
              >EmulatorJS</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 06:26:40</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46729139"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
