<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40457313">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/security/2024/05/dns-glitch-that-threatened-internet-stability-fixed-cause-remains-unclear/"
              >DNS glitch that threatened Internet stability fixed; cause
              remains unclear</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 17:16:12</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40457313"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40457126">
          <h3>
            <a
              class="item"
              href="https://jobs.lever.co/memfault/9fa58d3b-2415-4d80-9e5c-be989f90c2e4"
              >Memfault (YC W19) Is Hiring a Firmware Engineer in NYC/Boston
              (Lever.co)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 17:00:38</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40456959">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40456959"
              >Show HN: Porter Cloud – PaaS with an eject button</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 16:47:00</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40456959"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <a href="https://porter.run/porter-cloud"
                >https://porter.run/porter-cloud</a
              >) is a Platform as a Service (PaaS) like Heroku, but we make it
              easy for you to migrate to AWS, Azure, or GCP when you're ready.
              <p>
                Like Heroku, Porter takes care of a lot of generic DevOps work
                for you (like setting up CI/CD, containerizing your
                applications, autoscaling, SSL certificates, setting up a
                reverse proxy) and lets you deploy your apps with a few clicks —
                saving you a lot of time while developing. However, as you
                probably know, there’s a downside: platforms like this become
                constraining if and when your app takes off and you need to
                scale. The time you saved while developing can get pretty
                expensive once you’re paying for a lot of users — and the
                platforms tend to try to keep you locked in!
              </p>
              <p>
                Our idea is to give you the best of both worlds: use Porter
                Cloud for as long as it saves you time and development cost, but
                at any time you can press the “eject button” to migrate your app
                to your own AWS, Azure, or GCP account as you please. We make it
                seamless to break out, so you’re no longer subject to the rigid
                constraints of a conventional PaaS. You can migrate in a few
                simple steps outlined here:
                <a href="https://docs.porter.run/other/eject"
                  >https://docs.porter.run/other/eject</a
                >.
              </p>
              <p>
                A bit of background: we first launched on HN almost 3 years ago
                with our original product (<a
                  href="https://news.ycombinator.com/item?id=26993421"
                  >https://news.ycombinator.com/item?id=26993421</a
                >, <a href="https://porter.run">https://porter.run</a>), which
                deploys your applications to your own AWS, Azure, or GCP account
                with the simple experience of a PaaS.
              </p>
              <p>
                Since then, we’ve helped countless companies migrate from a PaaS
                to one of the big three cloud providers. Most of them had gotten
                started on a PaaS in the early days to optimize for speed and
                ease of use, but ultimately had to go through a painful
                migration to AWS, Azure, or GCP as they scaled and ran into
                various constraints on their original PaaS.
              </p>
              <p>
                Interestingly, we learned that many companies that start on a
                PaaS are fully aware that they’ll have to migrate to one of the
                big three public clouds [1] at some point. Yet they choose to
                deploy on a PaaS anyway because outgrowing a cloud platform is a
                “champagne problem” when you’re focused on getting something off
                the ground. This, however, becomes a very tangible problem when
                you need to migrate your entire production infrastructure while
                serving many users at scale. It’s a “nice problem to have”,
                until it isn’t.
              </p>
              <p>
                We’ve built Porter Cloud so that the next generation of startups
                can get off the ground as quickly as possible, with a peace of
                mind that you can effortlessly move to one of the tried and true
                hyperscalers when you are ready to scale.
              </p>
              <p>
                We are excited to see what people build on Porter Cloud. If
                you’ve ever dealt with a migration from a PaaS to one of the big
                three cloud providers, we’d also love to hear about your
                experience in the comments. Looking forward to feedback and
                discussion!
              </p>
              <p>
                [1] By “big three clouds” we mean the lower-level primitives of
                each cloud provider. We don’t mean their higher level offerings
                like AWS App Runner, Google Cloud Run, or Azure App Service,
                since those run into the same PaaS problems described above.
              </p>
            </div>
          </section>
        </section>
        <section id="40456107">
          <h3>
            <a
              class="item"
              href="https://www.ifixit.com/News/96162/were-ending-our-samsung-collaboration"
              >We're Ending Our Samsung Collaboration</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 15:41:29</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40456107"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40456064">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40456064"
              >Launch HN: Metriport (YC S22) – Open-source API for healthcare
              data exchange</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 15:38:25</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40456064"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.metriport.com/">https://www.metriport.com/</a
              >), an open-source platform that makes it easy for healthcare
              organizations to access and exchange medical data for their
              patients. We support all major healthcare IT systems in the US.
              Try out our product and watch a demo video here:
              <a
                href="https://docs.metriport.com/medical-api/getting-started/quickstart"
                >https://docs.metriport.com/medical-api/getting-started/quick...</a
              >. Oh and here's our github:
              <a href="https://github.com/metriport/metriport"
                >https://github.com/metriport/metriport</a
              >.
              <p>
                If you’ve been to doctors in the US, you may have encountered
                the problem: how does a healthcare provider get access to your
                up-to-date medical history to treat you properly? Reliance on
                archaic methods is still the norm: typically you, or your
                provider, need to call the facilities where you’ve previously
                received treatment (assuming you remember them all), just to
                have them send your records via fax (yep, fax). This can take
                weeks, only then to have a provider sift through hundreds of
                pages of unstructured docs, just to figure out basic things like
                your active medication list, what conditions you may have,
                latest lab results, etc. This not only delays treatment, it can
                cause improper treatment, since the medical history is critical
                for treatment decisions.
              </p>
              <p>
                For example, here’s a crazy story from a customer of ours:
                recently a patient came to them asking for a specific
                medication. When the provider pulled their medical history
                through Metriport, they saw that the patient had had a heart
                attack in the last 6 months. (The patient had omitted to mention
                this.) In such a case, the medication they were asking for could
                cause death! Needless to say, the provider did not fulfill that
                request—but they did begin to look for medications that could
                actually work for that patient.
              </p>
              <p>
                Many providers use Electronic Health Record (EHR) software to
                manage their patients’ data, but many EHRs don’t talk to each
                other, which means a patient’s data is more often than not
                siloed across disparate systems with incompatible data formats.
                More recently, Health Information Exchanges (HIEs) emerged to
                make the exchange of patient medical data possible between
                different providers. HIEs are essentially a peer-to-peer network
                for clinical data exchange. These networks helped push
                interoperability in the right direction, but their underlying
                technology is still based on older tech from the 90s, requiring
                SOAP-based protocols for transactions, using mostly C-CDAs (XML
                files), PDFs, and images to exchange medical data. A patient
                with a chronic condition may have thousands of such files across
                dozens of providers, and they all contain messy, likely
                unstructured, and duplicate information. Even if you spend lots
                of dev time, and money, connecting to all of these exchanges
                (like we did), you’re still left with the tough problem of
                making this medical data actually usable for providers.
              </p>
              <p>
                We did YC in S22, starting with a quantified self personal
                health app (this was our Show HN:
                <a href="https://news.ycombinator.com/item?id=29800932"
                  >https://news.ycombinator.com/item?id=29800932</a
                >
                - it didn’t get very far!). Working on clinical use cases for
                the app ran us straight into this insane rats’ nest of
                30-year-old technologies, all incompatible with each other, just
                to integrate medical data into our product. Vendors attempting
                to solve this problem wanted to lock us into $100k+ yearly
                contracts without even letting us try their closed-source
                product! Integration time would have been months, and developer
                docs were a whole new order of jank. It took us a while to
                realize there really was no good solution to this—it was hard to
                believe—but then we started talking to other healthcare
                companies and found they had the same problem. At that point it
                was a no-brainer to pivot to this instead. We kept the name
                Metriport though :).
              </p>
              <p>
                Metriport connects to all 3 major HIE networks (CommonWell,
                Carequality, and eHealth Exchange), and provides an API and
                dashboard. Here’s how it works: (1) You input basic patient
                demographics (name, DOB, gender at birth, address); (2) we
                search through hundreds of thousands of providers across
                multiple HIEs for the patient’s records; (3) Once the records
                are found, we fetch all of them and convert them into usable
                JSON data - standardized to FHIR; (4) The data, and raw files,
                are made available on the API and dashboard.
              </p>
              <p>
                You can render the data in a way that’s immediately useful for
                providers, like deduplicated PDF medical record summaries. From
                there, you can also use Metriport to contribute new clinical
                patient information back to the providers in the network,
                regardless of what EHR they use—eliminating the need for many
                painful one-off EHR integrations. It’s a little known fact that
                you can do this using HIEs without needing to write individual
                integrations to EHRs like Epic, Athena, and Cerner, for example.
              </p>
              <p>
                The value of this approach is that healthtech companies and
                providers don’t have to go build dozens of EHR integrations
                themselves, or have to know where patient data is located, and
                can instead tap into a single “internet of healthcare data”.
                Going from entering inputs to getting a comprehensive medical
                record summary is done in 3 minutes on average. Compare that to
                weeks using fax machines just to get messy data!
              </p>
              <p>
                You may be wondering how the search for records is done, using
                only patient demographics. Essentially, these networks consist
                of a bunch of nodes talking to each other asking “hey, do you
                have records for John Doe?”. So, this boils down to sending HTTP
                requests containing the patient’s demographics to a bunch of
                endpoints, and the endpoints returning the ID representing the
                patient in their system if there’s a match. You’ll be surprised
                (or at least dismayed) to hear that there is no standardization
                for how patient matching is determined across systems in the
                networks, which is problematic with something as highly variable
                as a person’s demographics. This means if one system wants to
                consider a single typo in the patient’s first name a mismatch,
                they can go ahead and do so—making it difficult for others to
                find records in their system. This problem is so pervasive that
                one of the national HIEs started an initiative to get other
                network participants to share their patient matching algorithm
                to help improve response rates for all systems in the network.
                Sadly, only one vendor agreed to share their matching algorithm.
                To combat this status quo, we’ve open-sourced our patient
                matching algorithm, which uses a variant of the Fellegi-Sunter
                model, and we hope other vendors will follow suit in the future:
                <a
                  href="https://github.com/metriport/metriport/blob/3e82111bc081a39a228276f2bf9d041d9a8df60e/packages/core/src/mpi/patient-mpi-metriport-api.ts#L13-L38"
                  >https://github.com/metriport/metriport/blob/3e82111bc081a39a...</a
                >
              </p>
              <p>
                Another big part of this is the data mapping from one format to
                another. If you’re not familiar with healthcare data, FHIR is
                the latest and greatest standard that’s ubiquitous in modern
                systems. In Metriport, FHIR is represented with JSON. The older
                standard is HL7v3 (C-CDA), which is what all healthcare
                information exchanges still use today, and what EHRs typically
                export - C-CDAs are messy XML documents that have structure, but
                also contain a lot of unstructured data in HTML format, or free
                text. So you can imagine, the ability to convert C-CDA medical
                records to something actually usable like FHIR, is pretty
                important. Given that it’s important, you’d also think it’s a
                fairly solved problem, with plenty of resources/tools to wrangle
                the data… nope. Again, there are little to no standards here,
                and you have different vendors building proprietary systems
                in-house, attempting to solve the same problem, with mediocre
                black-box results that you can’t trust. We see making healthcare
                data usable more like a public body of knowledge that can be
                improved upon, and don’t think this work should be closed off to
                the world, so we also open-sourced our FHIR converter (<a
                  href="https://github.com/metriport/metriport/tree/develop/packages/fhir-converter"
                  >https://github.com/metriport/metriport/tree/develop/packages...</a
                >), and you can give it a spin here:
                <a
                  href="https://docs.metriport.com/converter-api/getting-started/quickstart"
                  >https://docs.metriport.com/converter-api/getting-started/qui...</a
                >. In the future, we will also leverage things like OCR on PDFs
                to do clinical data extraction, and use LLMs to make even more
                concise medical record summaries.
              </p>
              <p>
                Making Metriport open-source was a decision we made from day
                one, based on our philosophy that transparency leads to
                innovation, especially in healthcare.
              </p>
              <p>
                From a security and compliance standpoint, we’re fully SOC 2
                Type 2 and HIPAA compliant (<a
                  href="https://security.metriport.com/"
                  >https://security.metriport.com/</a
                >). Additionally, using Metriport for patient data exchange
                today requires a Treatment purpose of use under HIPAA - which
                means that only Covered Entities, or Business Associates who
                work with Covered Entities, can use Metriport. This means that
                companies doing things such as clinical trials recruitment, for
                example, can’t use Metriport, but a primary care provider, or a
                clinical decision support vendor, can. This is due to current
                requirements set forth by HIEs, which may open up to support
                alternative use cases in the future, such as Individual Access
                Services (IAS).
              </p>
              <p>
                We charge per full medical record retrieval for a patient (which
                we call a query). This starts at $1 per query (with a monthly
                minimum), and scales down from there based on volume. We only
                charge for queries that return at least one record (and even if
                a query returns 1000 documents for a single patient, we still
                count that as a single query) - no charge is incurred for
                sharing data back to the networks, or making API calls to
                generate medical record summaries, for example.
              </p>
              <p>
                You can see all the code for Metriport in our public GitHub
                repo:
                <a href="https://github.com/metriport/metriport"
                  >https://github.com/metriport/metriport</a
                >. For anyone wanting to give us a whirl, you can do so by
                getting started with our free sandbox environment (<a
                  href="https://docs.metriport.com/medical-api/getting-started/quickstart"
                  >https://docs.metriport.com/medical-api/getting-started/quick...</a
                >).
              </p>
              <p>
                We’re looking forward to hearing what you think, and happy to
                answer any questions you may have, as the health information
                exchange space is pretty niche - thanks for taking the time to
                read this, we hope it was interesting!
              </p>
            </div>
          </section>
        </section>
        <section id="40455944">
          <h3>
            <a class="item" href="https://matcha.mizu.sh/"
              >Matcha.css – Drop-in semantic styling library in pure CSS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 15:31:09</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40455944"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40455758">
          <h3>
            <a
              class="item"
              href="https://lanceewing.github.io/blog/sierra/agi/sq2/2024/05/22/do-you-own-this-space-quest-2-disk.html"
              >The Space Quest II Master Disk Blunder</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 15:16:20</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40455758"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40455426">
          <h3>
            <a class="item" href="https://github.com/dalance/amber"
              >Amber: A code search and replace tool</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 14:48:29</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40455426"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40455328">
          <h3>
            <a class="item" href="https://github.com/koute/bytehound"
              >Bytehound: Memory Profiler for Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 14:40:58</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40455328"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40455243">
          <h3>
            <a
              class="item"
              href="https://viewfromthewing.com/game-changer-southwest-airlines-now-available-on-google-flights/"
              >Southwest Airlines is available on Google Flights</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 14:34:08</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40455243"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40455208">
          <h3>
            <a class="item" href="https://depot.dev/blog/faster-ec2-boot-time"
              >Making EC2 boot time faster</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 14:31:36</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40455208"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40454383">
          <h3>
            <a
              class="item"
              href="https://www.nottingham.ac.uk/news/first-pictures-from-euclid-satellite-reveal-billions-of-orphan-stars"
              >First pictures from Euclid satellite reveal billions of orphan
              stars</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 13:22:47</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40454383"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40454136">
          <h3>
            <a
              class="item"
              href="https://www.construction-physics.com/p/how-to-build-300000-airplanes-in"
              >How to Build 300k Airplanes in Five Years</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 12:58:09</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40454136"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40453467">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2020/01/06/the-strangeness-of-grief"
              >The Strangeness of Grief (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 11:43:06</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40453467"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40453221">
          <h3>
            <a
              class="item"
              href="https://www.sligocki.com//2024/05/22/bb-3-4-a14.html"
              >BB(3, 4) &amp;gt; Ack(14)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 11:13:28</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40453221"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40452731">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/how-failure-has-made-mathematics-stronger-20240522/"
              >How Failure Has Made Mathematics Stronger</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 10:03:27</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40452731"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40452655">
          <h3>
            <a
              class="item"
              href="http://tomwaitslibrary.info/biography/copyright/frito-lay/"
              >Tom Waits vs. Frito-Lay, Inc (2003)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 09:52:18</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40452655"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40451525">
          <h3>
            <a
              class="item"
              href="https://bitfehler.srht.site/posts/2024-04-15_m2dir-treating-mails-as-files-without-going-crazy.html"
              >M2dir: Treating mails as files without going crazy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 07:17:22</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40451525"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40451009">
          <h3>
            <a class="item" href="https://duckduckgo.com"
              >DuckDuckGo was down</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 06:03:51</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40451009"
                  >Comments</a
                ><span class="descendants">: 393</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40450128">
          <h3>
            <a class="item" href="https://magicui.design/"
              >Magic UI: UI Library for Design Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 03:23:54</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40450128"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40449767">
          <h3>
            <a class="item" href="https://windirstat.net/"
              >WinDirStat – Windows Directory Statistics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 02:34:14</span
              ><span class="points-container"
                >Points: <span class="points">294</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40449767"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40449278">
          <h3>
            <a class="item" href="https://fpvsim.com/drone-flying-101"
              >Drone Flying 101 – An Interactive Tutorial for Beginners</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-23 @ 01:25:35</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40449278"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40448045">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/technology/2024/05/22/openai-scarlett-johansson-chatgpt-ai-voice/"
              >OpenAI didn’t copy Scarlett Johansson’s voice for ChatGPT,
              records show</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-22 @ 23:16:52</span
              ><span class="points-container"
                >Points: <span class="points">469</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40448045"
                  >Comments</a
                ><span class="descendants">: 854</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40447998">
          <h3>
            <a class="item" href="https://github.com/misohena/el-easydraw"
              >Emacs Easydraw – drawing tool inside Emacs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-22 @ 23:13:50</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40447998"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40439515">
          <h3>
            <a class="item" href="https://gmunk.com/Windows-10-Desktop/"
              >Windows 10 wallpaper was physically built and photographed
              (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-22 @ 10:59:46</span
              ><span class="points-container"
                >Points: <span class="points">685</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40439515"
                  >Comments</a
                ><span class="descendants">: 227</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40438523">
          <h3>
            <a
              class="item"
              href="https://netapinotes.com/api-transformation-mad-libs/"
              >API Transformation Mad Libs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-22 @ 08:09:46</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40438523"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40438510">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Number_16_(spider)"
              >Number 16 (spider)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-22 @ 08:08:26</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40438510"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40437638">
          <h3>
            <a class="item" href="https://dl.acm.org/doi/10.1145/356580.356581"
              >Von Neumann's First Computer Program (1970)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-22 @ 05:31:19</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40437638"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40426666">
          <h3>
            <a
              class="item"
              href="https://john-millikin.com/vu128-efficient-variable-length-integers"
              >vu128: Efficient variable-length integers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-21 @ 10:48:59</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40426666"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40424650">
          <h3>
            <a
              class="item"
              href="https://stephaniewalter.design/blog/a-designers-guide-to-documenting-accessibility-user-interactions/"
              >A Designer's Guide to Documenting Accessibility and User
              Interactions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-21 @ 05:56:13</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40424650"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
