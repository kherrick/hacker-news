<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="47017727">
          <h3>
            <a
              class="item"
              href="https://nicole.express/2026/not-my-casual-hobby.html"
              >You can't trust the internet anymore</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 19:51:25</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47017727"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47017682">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2026/Feb/12/gemini-3-deep-think/"
              >Gemini 3 Deep Think drew me a good SVG of a pelican riding a
              bicycle</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 19:47:46</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47017682"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47017545">
          <h3>
            <a class="item" href="https://mrdoob.github.io/three-descent/"
              >Descent, Ported to the Web</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 19:33:24</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47017545"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47017138">
          <h3>
            <a
              class="item"
              href="https://www.niemanlab.org/2026/01/news-publishers-limit-internet-archive-access-due-to-ai-scraping-concerns/"
              >Internet Increasingly Becoming Unarchivable</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 18:46:32</span
              ><span class="points-container"
                >Points: <span class="points">202</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47017138"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47016639">
          <h3>
            <a class="item" href="https://vanilla-gamma-graph.netlify.app/"
              >Gamma Function: Visualization for Complex Arguments</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 17:55:03</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47016639"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47016530">
          <h3>
            <a class="item" href="https://github.com/abdimoallim/vdb"
              >A header-only C vector database library</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 17:45:09</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47016530"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47016443">
          <h3>
            <a
              class="item"
              href="https://github.com/i5heu/ublock-hide-yt-shorts/"
              >uBlock filter list to hide all YouTube Shorts</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 17:36:45</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47016443"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47016058">
          <h3>
            <a class="item" href="https://github.com/Geek-1001/arcmark"
              >Show HN: Arcmark – macOS bookmark manager that attaches to
              browser as sidebar</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 16:55:24</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47016058"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>
                You get workspace-based links/bookmarks organization with nested
                folders, drag-and-drop reordering, and custom workspace colors.
                For the most part I tried replicating Arc's sidebar UX as close
                as possible.
              </p>
              <p>
                1. Local-first: all data lives in a single JSON file (
                ~/Library/Application Support/Arcmark/data.json). No accounts,
                no cloud sync.
              </p>
              <p>
                2. Works with any browser: Chrome, Safari, Brave, Arc, etc. Or
                use it standalone as a bookmark manager with a regular window.
              </p>
              <p>
                3. Import pinned tab and spaces from Arc: it parses Arc's
                StorableSidebar.json to recreate the exact workspace/folder
                structure.
              </p>
              <p>4. Built with swift-bundler rather than Xcode.</p>
              <p>
                There's a demo video in the README showing the sidebar
                attachment in action. The DMG is available on the releases page
                (macOS 13+), or you can build from source.
              </p>
              <p>
                This is v0.1.0 so it's a very early version. Would appreciate
                any feedback or thoughts
              </p>
              <p>
                GitHub:
                <a href="https://github.com/Geek-1001/arcmark"
                  >https://github.com/Geek-1001/arcmark</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="47016008">
          <h3>
            <a class="item" href="https://github.com/davidgiven/ack"
              >Amsterdam Compiler Kit</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 16:50:47</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47016008"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47015579">
          <h3>
            <a
              class="item"
              href="http://www.microscopy-uk.org.uk/mag/artsep16/mol-mdisc-review.html"
              >A Review of M Disc Archival Capability. With long term testing
              results</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 16:07:44</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47015579"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47015330">
          <h3>
            <a class="item" href="https://www.vim.org/vim-9.2-released.php"
              >Vim 9.2 Released</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 15:39:43</span
              ><span class="points-container"
                >Points: <span class="points">248</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47015330"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47015294">
          <h3>
            <a
              class="item"
              href="https://aimilios.bearblog.dev/reverse-engineering-sleep-mask/"
              >My smart sleep mask broadcasts users' brainwaves to an open MQTT
              broker</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 15:35:47</span
              ><span class="points-container"
                >Points: <span class="points">244</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47015294"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47014500">
          <h3>
            <a class="item" href="https://github.com/datavorous/sameshi"
              >Show HN: Sameshi – a ~1200 Elo chess engine that fits within
              2KB</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 13:47:44</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47014500"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
            <div class="text">
              <p>
                I am a great fan of demoscene (computer art subculture) since
                middle school, and hence it was a ritual i had to perform.
              </p>
              <p>
                For estimating the Elo, I measured 240 automated games against
                Stockfish Elo levels (1320 to 1600) under fixed depth-5 and some
                constrained rules, using equal color distribution.
              </p>
              <p>
                Then converted pooled win/draw/loss scores to Elo through some
                standard logistic formula with binomial 95% confidence interval.
              </p>
            </div>
          </section>
        </section>
        <section id="47014449">
          <h3>
            <a class="item" href="https://ooh.directory/"
              >Ooh.directory: a place to find good blogs that interest you</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 13:40:20</span
              ><span class="points-container"
                >Points: <span class="points">328</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47014449"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47014405">
          <h3>
            <a
              class="item"
              href="https://blog.yossarian.net/2020/11/30/How-many-registers-does-an-x86-64-cpu-have"
              >How many registers does an x86-64 CPU have? (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 13:33:03</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47014405"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47012964">
          <h3>
            <a
              class="item"
              href="https://github.com/PulseBeat02/yt-media-storage"
              >YouTube as Storage</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 09:10:15</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47012964"
                  >Comments</a
                ><span class="descendants">: 113</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47012717">
          <h3>
            <a class="item" href="https://ziglang.org/devlog/2026/#2026-02-13"
              >Zig – io_uring and Grand Central Dispatch std.Io implementations
              landed</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 08:22:11</span
              ><span class="points-container"
                >Points: <span class="points">326</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47012717"
                  >Comments</a
                ><span class="descendants">: 233</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47012312">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/cogram/jobs/LDTrViN-ex-technical-founder-product-engineer"
              >Cogram (YC W22) – Hiring former technical founders</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 07:00:15</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47011567">
          <h3>
            <a class="item" href="https://github.com/mickamy/sql-tap"
              >Show HN: SQL-tap – Real-time SQL traffic viewer for PostgreSQL
              and MySQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 04:27:35</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47011567"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
            <div class="text">
              sql-tap is a transparent proxy that captures SQL queries by
              parsing the PostgreSQL/MySQL wire protocol and displays them in a
              terminal UI. You can run EXPLAIN on any captured query. No
              application code changes needed — just change the port.
            </div>
          </section>
        </section>
        <section id="47010823">
          <h3>
            <a class="item" href="https://npmx.dev"
              >NPMX – a fast, modern browser for the NPM registry</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 02:14:34</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47010823"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47009949">
          <h3>
            <a
              class="item"
              href="https://theshamblog.com/an-ai-agent-published-a-hit-piece-on-me-part-2/"
              >An AI agent published a hit piece on me – more things have
              happened</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 00:37:53</span
              ><span class="points-container"
                >Points: <span class="points">555</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47009949"
                  >Comments</a
                ><span class="descendants">: 490</span></span
              >
            </h4>
            <div class="text">
              <a href="https://infosec.exchange/@mttaggart/116065340523529645"
                >https://infosec.exchange/@mttaggart/116065340523529645</a
              >
            </div>
          </section>
        </section>
        <section id="47002633">
          <h3>
            <a
              class="item"
              href="https://www.metachris.dev/2026/02/safe-yolo-mode-running-llm-agents-in-vms-with-libvirt-and-virsh/"
              >Safe YOLO Mode: Running LLM agents in vms with Libvirt and
              Virsh</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-13 @ 13:44:44</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47002633"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47000505">
          <h3>
            <a
              class="item"
              href="https://cordcuttersnews.com/babylon-5-is-now-free-to-watch-on-youtube/"
              >Babylon 5 is now free to watch on YouTube</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-13 @ 08:49:02</span
              ><span class="points-container"
                >Points: <span class="points">569</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47000505"
                  >Comments</a
                ><span class="descendants">: 288</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46968641">
          <h3>
            <a
              class="item"
              href="https://computernewb.com/~lily/files/Documents/NTDesignWorkbook/"
              >Windows NT/OS2 Design Workbook</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-10 @ 23:38:15</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46968641"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46965829">
          <h3>
            <a
              class="item"
              href="https://green.spacedino.net/the-three-year-myth/"
              >The three year myth</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-10 @ 19:51:38</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46965829"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46965462">
          <h3>
            <a
              class="item"
              href="https://blog.janestreet.com/fun-with-algebraic-effects-hardcaml/"
              >Fun with Algebraic Effects – From Toy Examples to Hardcaml
              Simulations</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-10 @ 19:27:33</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46965462"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46959531">
          <h3>
            <a
              class="item"
              href="https://blog.maximeheckel.com/posts/shades-of-halftone/"
              >Shades of Halftone</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-10 @ 13:35:47</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46959531"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46954696">
          <h3>
            <a class="item" href="https://www.wallstreetraider.com/story.html"
              >Show HN: I spent 3 years reverse-engineering a 40 yo stock market
              sim from 1986</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-10 @ 02:44:58</span
              ><span class="points-container"
                >Points: <span class="points">665</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46954696"
                  >Comments</a
                ><span class="descendants">: 225</span></span
              >
            </h4>
            <div class="text">
              <p>
                It has been a rough journey but I finally see the light at the
                end of the tunnel. I just recently redid the website and thought
                maybe the full story of how this project came to be would
                interest you all. Thank you for reading.
              </p>
            </div>
          </section>
        </section>
        <section id="46949870">
          <h3>
            <a
              class="item"
              href="https://capnfabs.net/posts/foamcore-would-be-a-sick-name-for-a-music-genre/"
              >A method and calculator for building foamcore drawer
              organisers</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 19:32:45</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46949870"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934622">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46934622"
              >Ask HN: How to get started with robotics as a hobbyist?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:44:51</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934622"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
            <div class="text">
              I wanted to find new hobbies for myself, something that involves
              more physical stuff compared to only code. How did you started on
              your journey with robotics, what's handy to learn in the first
              place? I know only basics about embedded programming and I'd need
              to brush up of my physics skills. I don't have a set goal in my
              mind, only exploring for the time being.
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
