<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44075911">
          <h3>
            <a
              class="item"
              href="https://attentionmech.github.io/genetic-boids/"
              >Genetic Boids Web Simulation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 19:40:03</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075911"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44075451">
          <h3>
            <a class="item" href="https://doublememory.com"
              >Show HN: DoubleMemory – more efficient local-first read-it-later
              app</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:55:28</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075451"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <p>
                My motivation was not to create a read-it-later app, yet it
                evolved into this unique yet cohesive form of a read-it-later +
                bookmarking organizer + clipboard manager + card based
                note-taking app over the last 6 months. It also launches from
                the menu bar with a shortcut and navigates with keyboard
                shortcuts. My favorite part is instead of rendering a list of
                article titles, everything is rendered as pretty preview cards
                in a translucent Pinterest-like mood board. It also has a nifty
                iOS app, that will allow you to swipe with your thumbs between
                articles just like on iOS Safari...
              </p>
              <p>
                Now that Pocket is closing, this is after Instapaper going back
                to indie and Omnivore and UpNext and numerous others closing
                over the years. All of these are cloud-hosted services, which
                got me reflecting: maybe this local-first architecture would be
                well positioned to build in this space.
              </p>
              <p>Here is my not-so-scientific comparison:</p>
              <p>## Domain</p>
              <p>$10 vs $1M = 100,000x difference.</p>
              <p>## Server running cost</p>
              <p>
                No servers other than what's running by iCloud vs $1M per year =
                1mX difference
              </p>
              <p>## Platforms</p>
              <p>
                Apple only (mac + iphone + ipad) vs Multi platforms (windows,
                linux, android also supported) = 20X maintenance cost difference
              </p>
              <p>## Capturing</p>
              <p>
                No browser extensions required v.s. maintain all extensions for
                various browsers and extension stores = 5x difference
              </p>
              <p>## Architecture</p>
              <p>
                App receives the link, Apple generates the rich preview cards
                for thousands of different types of links, app caches these
                preview cards. vs. Someone write some custom code for each link
                type or with Open Graph, one designer created one generic card
                that works for all links. = 100x cost difference.
              </p>
              <p>
                I know, Apple is coming for clipboards with more restrictions,
                which is basically a shared global state on Mac systems,
                DoubleMemory does also support other ways to capture:
                drag-n-drop to app/menubar icon/app icon, right
                click-&gt;Services menu, or Share sheet. We will add more
                auto-importers.
              </p>
              <p>
                Also vibe coded some importers for Pocket, Omnivore and ReadWise
                here:
                <a href="https://doublememory.com/posts/tools"
                  >https://doublememory.com/posts/tools</a
                >
              </p>
              <p>
                Everything in the app is free with no limits. Capturing is
                really step 0. You giving us a chance to save your content,
                doesn't mean you are getting any values out of it (ain't that
                the typical story of read-it-later apps? save-it and
                never-read-it). the eventual goal is to easily retrieve these
                content, and eventually consuming them. I hope to eventually
                launch paid features that aligns with these value generating
                workflows.
              </p>
              <p>
                App Store link:
                <a
                  href="https://apps.apple.com/us/app/doublememory/id6737529034"
                  >https://apps.apple.com/us/app/doublememory/id6737529034</a
                >
              </p>
              <p>Let me know what you think...</p>
            </div>
          </section>
        </section>
        <section id="44075388">
          <h3>
            <a class="item" href="https://lynn.sh/guix-emacs-file-manager.html"
              >Emacs dired-mode as a file manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:46:57</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075388"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44075353">
          <h3>
            <a class="item" href="https://hcker.news"
              >Show HN: hcker.news – an ergonomic, timeline-based Hacker News
              front page</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:44:31</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075353"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've built an alternative Hacker News front page. It is inspired
                by and meant to be a replacement for hckrnews.com.
              </p>
              <p>
                I built this because HN is woefully underfeatured, but most
                sites that try to improve it seem to assume that the visual
                design is the problem. hcker.news tries to maintain HN's
                familiarity while adding useful enhancements.
              </p>
              <p>There are three primary views:</p>
              <p></p>
              <pre><code>  - Timeline View: Browse top stories by votes or comments grouped by day, week, or month (e.g., top 20 per day, top 100 per week).  
  - Aggregate View: See top stories by votes or comments over custom time ranges.  
  - Front Page View: The original HN front page, untouched.  
</code></pre>
              Feed Filtering:
              <p></p>
              <pre><code>  - Kagi Small Web: View only stories from websites that are a part of Kagi's Small Web, which is a curated list of non-commercial blogs
  - Custom Keyword Filters: Include/exclude keywords (e.g., include "Rust," exclude "DOGE") or set a minimum score threshold.
  - No HN Algorithm: Timeline and Aggregate Views show stories usually downranked by the HN algo (e.g., flagged posts or those with too many comments).
</code></pre>
              UI:
              <p></p>
              <pre><code>  - Unread Flags: Quickly spot new stories or ones you haven't seen.
  - Two Layouts: Classic HN style or a compact story view inspired by hckrnews.com.
  - Multi-column &amp; High-density Modes: Fit more content on screen.
  - Themes: Light, Dark, and Manila.
</code></pre>
              I'd love your feedback and suggestions. Cheers!
            </div>
          </section>
        </section>
        <section id="44075346">
          <h3>
            <a
              class="item"
              href="https://9to5google.com/2025/05/22/google-ai-mode-theft-publisher-opt-out-controls/"
              >Google's AI Mode is 'the definition of theft,' publishers say</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:43:25</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075346"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44075254">
          <h3>
            <a
              class="item"
              href="https://www.pencilofrays.com/lens-design-forms/"
              >Types of optical systems in a lens designer's toolbox (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:33:07</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075254"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44075236">
          <h3>
            <a
              class="item"
              href="https://www.construction-physics.com/p/how-japan-invented-modern-shipbuilding"
              >Japan and the Birth of Modern Shipbuilding</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:30:07</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075236"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44075235">
          <h3>
            <a
              class="item"
              href="https://grid.is/blog/comparison-of-spreadsheet-software"
              >Comparison of Spreadsheet Software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:30:05</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075235"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44075105">
          <h3>
            <a
              class="item"
              href="https://www.stephendiehl.com/posts/post_transformers/"
              >Attention Wasn't All We Needed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:14:29</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075105"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074684">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/05/22/world/canada/alberta-separatism-referendum.html"
              >Alberta separatism push roils Canada</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 17:22:20</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074684"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074668">
          <h3>
            <a
              class="item"
              href="https://www.cip.org/blog/llm-judges-are-unreliable"
              >Positional preferences, order effects, prompt sensitivity
              undermine AI judgments</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 17:20:40</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074668"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074637">
          <h3>
            <a
              class="item"
              href="https://jordanwtaylor2.substack.com/p/into-the-tunnel"
              >Into The Tunnel: The secret life of wind tunnels</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 17:17:26</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074637"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074487">
          <h3>
            <a
              class="item"
              href="https://www.choicesmagazine.org/choices-magazine/submitted-articles/unintended-consequences-of-allergen-food-labeling"
              >Sesame Scheme: Unintended Consequences of Allergen Food
              Labeling</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 16:58:39</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074487"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074111">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2505.13775"
              >Beyond Semantics: Unreasonable Effectiveness of Reasonless
              Intermediate Tokens</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 16:13:43</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074111"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074017">
          <h3>
            <a
              class="item"
              href="https://foundersatwork.posthaven.com/find-your-people"
              >Find Your People</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 16:02:02</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074017"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44073870">
          <h3>
            <a class="item" href="https://granta.com/slime/">Slime (2021)</a>
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 15:43:54</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44073870"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44073867">
          <h3>
            <a
              class="item"
              href="https://www.abc.net.au/news/science/2025-05-20/metre-treaty-anniversary-metric-system-measurement-metrology/105302024"
              >The metre originated in the French Revolution</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 15:43:16</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44073867"
                  >Comments</a
                ><span class="descendants">: 93</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44073785">
          <h3>
            <a
              class="item"
              href="https://www.anildash.com//2025/05/20/mcp-web20-20/"
              >MCP is the coming of Web 2.0 2.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 15:33:00</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44073785"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44073588">
          <h3>
            <a
              class="item"
              href="https://techcommunity.microsoft.com/blog/adforpostgresql/announcing-a-new-ide-for-postgresql-in-vs-code-from-microsoft/4414648"
              >Postgres IDE in VS Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 15:12:44</span
              ><span class="points-container"
                >Points: <span class="points">456</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44073588"
                  >Comments</a
                ><span class="descendants">: 208</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44073185">
          <h3>
            <a
              class="item"
              href="https://charliesabino.com/caesars-last-breath/"
              >Caesar's Last Breath</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 14:22:53</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44073185"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44072788">
          <h3>
            <a class="item" href="https://github.com/MayankPratap/Samchika"
              >Show HN: Samchika – A Java Library for Fast, Multithreaded File
              Processing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 13:39:26</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44072788"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
            <div class="text">
              <p>
                Most Java file processing solutions either involve a lot of
                boilerplate or don’t handle concurrency, backpressure, or
                metrics well out of the box. I needed something fast, clean, and
                production-friendly — so I built this.
              </p>
              <p>Key features:</p>
              <p>
                Multi-threaded line/batch processing using a configurable thread
                pool
              </p>
              <p>Producer/consumer model with built-in backpressure</p>
              <p>Buffered, asynchronous writing with optional auto-flush</p>
              <p>
                Live metrics: memory usage, throughput, thread times, queue
                stats
              </p>
              <p>Simple builder API — minimal setup to get going</p>
              <p>Output metrics to JSON, CSV, or human-readable format</p>
              <p>Use cases:</p>
              <p>Large CSV or log file parsing</p>
              <p>ETL pre-processing</p>
              <p>Line-by-line filtering and transformation</p>
              <p>Batch preparation before ingestion</p>
              <p>
                I’d really appreciate your feedback — feature ideas, performance
                improvements, critiques, or whether this solves a real problem
                for others. Thanks for checking it out!
              </p>
            </div>
          </section>
        </section>
        <section id="44071900">
          <h3>
            <a
              class="item"
              href="https://www.wordonfire.org/articles/remembering-alasdair-macintyre-1929-2025/"
              >Remembering Alasdair MacIntyre</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 11:37:07</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44071900"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44071690">
          <h3>
            <a class="item" href="https://rachelbythebay.com/w/2025/05/22/ssl/"
              >Why I no longer have an old-school cert on my HTTPS site</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 10:56:12</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44071690"
                  >Comments</a
                ><span class="descendants">: 162</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44071610">
          <h3>
            <a
              class="item"
              href="https://github.com/notactuallytreyanastasio/genstage_tutorial_2025/blob/main/README.md"
              >Writing A Job Runner (In Elixir) (Again) (10 years later)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 10:41:12</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44071610"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44070042">
          <h3>
            <a
              class="item"
              href="https://twitter.com/ID_AA_Carmack/status/1925710474366034326"
              >John Carmack talk at Upper Bound 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 05:14:16</span
              ><span class="points-container"
                >Points: <span class="points">420</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44070042"
                  >Comments</a
                ><span class="descendants">: 286</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44060800">
          <h3>
            <a class="item" href="https://punkx.org/jackdoe/misery.html"
              >Machinist and Machine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 10:57:53</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44060800"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44050465">
          <h3>
            <a
              class="item"
              href="https://slate.com/culture/2025/05/birds-movies-charlies-angels-2000-pygmy-nuthatch.html"
              >The Curious Case of the Pygmy Nuthatch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 11:52:40</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44050465"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44038067">
          <h3>
            <a
              class="item"
              href="https://www.thenation.com/article/society/christopher-hill-life-of/"
              >Christopher Hill's History from Below</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-20 @ 05:23:54</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44038067"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44032995">
          <h3>
            <a
              class="item"
              href="https://blog.polybdenum.com/2025/02/14/designing-type-inference-for-high-quality-type-errors.html"
              >Designing type inference for high quality type errors</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 18:22:34</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44032995"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44027471">
          <h3>
            <a class="item" href="https://modvion.com/"
              >Tallest Wooden Wind Turbine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 07:58:59</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44027471"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
