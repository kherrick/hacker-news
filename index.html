<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39309337">
          <h3>
            <a
              class="item"
              href="https://help.funimation.com/hc/en-us/articles/23103586580244-Funimation-End-of-services"
              >Funimation End of Services</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 23:38:56</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39309337"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39309269">
          <h3>
            <a
              class="item"
              href="https://md.jtmn.dev/blog/ðŸ’»+Programming/PR-007+-+Why+you+don%27t+need+React"
              >You Don't Need React</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 23:30:36</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39309269"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39309157">
          <h3>
            <a
              class="item"
              href="https://forum.snap.berkeley.edu/t/what-does-with-continuation-mean/1518/2"
              >What Does "With Continuation" Mean?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 23:18:16</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39309157"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39309093">
          <h3>
            <a
              class="item"
              href="https://www.sleepeasy.app/2024/01/21/elixir-best-language-for-bootstrapped-b2b-saas/"
              >Why Elixir Is the Best Language for Building a Bootstrapped, B2B
              SaaS in 2024</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 23:12:45</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39309093"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39308731">
          <h3>
            <a
              class="item"
              href="https://www.canada.ca/en/public-safety-canada/news/2024/02/federal-action-on-combatting-auto-theft.html"
              >Canadian government banning Flipper Zero to combat auto theft</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 22:35:00</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39308731"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39308679">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/culture/2024/02/funimation-dvds-included-forever-available-digital-copies-forever-ends-april-2/"
              >Sony is erasing digital libraries that were supposed to be
              accessible "forever"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 22:30:02</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39308679"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39308420">
          <h3>
            <a
              class="item"
              href="https://dps8m.gitlab.io/blog/posts/20240207_DPS8M_AS400/"
              >Multics and AS400ï¼šDPS8M on IBM PASE for I (OS/400)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 22:05:08</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39308420"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39308382">
          <h3>
            <a class="item" href="https://docs.sweep.dev/assistant"
              >Show HN: Open-source coding assistant with terminal access</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 22:02:23</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39308382"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                We previously worked on Sweep as a bot that generated pull
                requests from GitHub issues. We learned that AI needs validation
                (like formatters and unit tests) to code properly. We tried
                setting up a code sandbox for each user but this didn't work
                well. Weâ€™re now relying on the prebuilt dev environment on their
                machine to avoid having to install dependencies.
              </p>
              <p>
                LLM based pipelines are also error-prone. Our previous project
                was a pipeline that turns the issue into relevant files as
                context, relevant files to a generated plan of files to change,
                and then the generated plan to a series of code changes. Itâ€™s
                frustrating when one/all of these steps fail and youâ€™re forced
                to start over. You can now intervene at each step, making the
                entire process more reliable.
              </p>
              <p>
                Sweep is open source (licensed under AGPL) and runs entirely on
                your laptop. The only remote calls will be to OpenAI. We'd love
                to help you perform software chores like version upgrades, where
                you describe a set of changes to have Sweep apply over multiple
                files. You can install Sweep here with a one-line command:
                <a href="https://docs.sweep.dev/assistant"
                  >https://docs.sweep.dev/assistant</a
                >. We'd love to hear any feedback you have!
              </p>
            </div>
          </section>
        </section>
        <section id="39307677">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Doorway_effect"
              >Doorway effect</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 21:04:59</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39307677"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39307618">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/reflex/jobs/lLd7KYY-founding-developer-advocate"
              >Reflex (YC W23) Is Hiring a Founding Developer Advocate</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 21:00:29</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39307394">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/how-seriously-read-scientific-paper"
              >How to (seriously) read a scientific paper (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 20:41:41</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39307394"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39307330">
          <h3>
            <a class="item" href="https://ollama.ai/blog/openai-compatibility"
              >OpenAI compatibility</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 20:36:08</span
              ><span class="points-container"
                >Points: <span class="points">264</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39307330"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39306352">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2024/02/12/baruch-spinoza-and-the-art-of-thinking-in-dangerous-times"
              >Baruch Spinoza and the art of thinking in dangerous times</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 19:25:07</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39306352"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39305994">
          <h3>
            <a
              class="item"
              href="https://aras-p.info/blog/2024/02/06/I-accidentally-Blender-VSE/"
              >I accidentally Blender VSE</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 18:57:04</span
              ><span class="points-container"
                >Points: <span class="points">247</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39305994"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39305931">
          <h3>
            <a
              class="item"
              href="https://nicf.net/articles/physics-for-mathematicians/"
              >Physics for Mathematicians â€“ Introduction</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 18:52:37</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39305931"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39305482">
          <h3>
            <a
              class="item"
              href="https://blogs.oracle.com/linux/post/whats-inside-a-linux-kernel-core-dump"
              >What's Inside a Linux Kernel Core Dump</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 18:18:26</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39305482"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39305452">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/commandline/introducing-sudo-for-windows/"
              >Sudo for Windows</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 18:16:05</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39305452"
                  >Comments</a
                ><span class="descendants">: 181</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39304946">
          <h3>
            <a
              class="item"
              href="https://www.ruv.is/english/2024-02-08-eruption-on-the-reykjanes-peninsula-404272"
              >Eruption on the Reykjanes Peninsula</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 17:39:25</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39304946"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39304736">
          <h3>
            <a
              class="item"
              href="https://www.fcc.gov/document/fcc-makes-ai-generated-voices-robocalls-illegal"
              >FCC rules AI-generated voices in robocalls illegal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 17:24:44</span
              ><span class="points-container"
                >Points: <span class="points">802</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39304736"
                  >Comments</a
                ><span class="descendants">: 512</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39304650">
          <h3>
            <a
              class="item"
              href="https://thereader.mitpress.mit.edu/j-g-ballard-my-favorite-books/"
              >J.G. Ballard: My Favorite Books</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 17:18:49</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39304650"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39304188">
          <h3>
            <a class="item" href="https://github.com/awslabs/llrt"
              >LLRT: A low-latency JavaScript runtime from AWS</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 16:46:06</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39304188"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39304068">
          <h3>
            <a class="item" href="https://traderjoesprices.com"
              >Show HN: Daily price tracking for Trader Joe's</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 16:37:38</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39304068"
                  >Comments</a
                ><span class="descendants">: 113</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39302870">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39302870"
              >Launch HN: AgentHub (YC W24) â€“ A no-code automation platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 15:17:05</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39302870"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
            <div class="text">
              <p>
                Weâ€™re Rahul and Max, co-founders of AgentHub.dev (<a
                  href="https://www.agenthub.dev/"
                  >https://www.agenthub.dev/</a
                >). We automate repetitive workflows for businesses using
                LLM-powered automations. Our platform lets you build and host
                these automations to emulate employee workflows in a scalable
                way. Hereâ€™s a demo video:
                <a href="https://www.youtube.com/watch?v=BD9aoyKPOjs"
                  >https://www.youtube.com/watch?v=BD9aoyKPOjs</a
                >
              </p>
              <p>
                We started 9 months ago while lurking in the Auto-GPT discord
                and seeing thousands of non-technical users struggle to clone
                the repo or set up their environments. We were excited by the
                concepts of Agents so we built and deployed a (very ugly) web
                app within a few days so anyone could experiment. We started to
                see people literally begging the Agents to complete simple tasks
                and giving up due to cost/frustration. Seeing the type of
                relatively simple work people were trying to automate with AI
                was the catalyst for what we ended up building.
              </p>
              <p>
                We decided to make a drag-and-drop automation builder so these
                users could piece together their ideal automations instead of
                begging the agent to do that same task and failing. V1 was a
                borderline un-usable series of drop down menus but evolved into
                the canvas based workflow builder it is now.
              </p>
              <p>
                Itâ€™s somewhat similar in concept to Zapier or Make.com except
                weâ€™re aiming to automate much more complex work end to end
                instead of just speeding up simple tasks. We originally
                described it as Zapier on crack but as it's gotten more complex,
                some people compare it to existing RPA platforms like UI Path.
                We like to call it an 'LLM-based Intelligent Automation
                Platform'.
              </p>
              <p>
                Our biggest challenge from the very beginning has been balancing
                usability and complexity. We wanted anyone to be able to
                understand it while still being powerful enough for people to
                get creative. Building the framework has been an extremely
                iterative process of users getting confused (for good reason)
                and us tweaking our approach. We still have a ways to go in
                terms of usability but are proud of where itâ€™s at. Eager to hear
                your feedback!
              </p>
              <p>
                Here are 3 template automations we built to give people a
                starting point. I think the real beauty of the platform is how
                personalized the automations users create are but these general
                templates give a nice idea of how it works.
              </p>
              <p>
                <a
                  href="https://www.agenthub.dev/templates/hr_hiring/linkedin_profile_processor"
                  >https://www.agenthub.dev/templates/hr_hiring/linkedin_profil...</a
                >
                <a
                  href="https://www.agenthub.dev/templates/media_news/autonomous_twitter_bot"
                  >https://www.agenthub.dev/templates/media_news/autonomous_twi...</a
                >
                <a
                  href="https://www.agenthub.dev/templates/sales_crm/automated_sales_emails"
                  >https://www.agenthub.dev/templates/sales_crm/automated_sales...</a
                >
              </p>
              <p>
                These templates are on the simpler side. Our power users nest
                automations, trigger them via webhook and have them running at a
                pretty surprising scale. The highest weâ€™ve seen was last Friday
                with a single user running 5k automations within a few hours.
                The unofficial record before that for most automations runs was
                one of our users who discovered infinite-recursion by accident,
                but that doesn't count.
              </p>
              <p>
                We have two main types of users at the moment, people automating
                their existing businesses work and people using the no-code
                builder to build new ideas. The first was our original
                intention, letting any semi technical person in a company spot
                inefficiency and quickly get a solution deployed to address it.
                The second and more unexpected type of user has been
                non-technical founders spotting problems and being able to build
                APIs to serve niches theyâ€™ve found without needing to code.
              </p>
              <p>
                Itâ€™s called AgentHub because I bought the domain for 10 dollars
                on day 2 of building when I thought weâ€™d be a hub to host and
                share agents and never bothered rebranding. If anyone wants to
                take a crack at a better name, weâ€™d be interested!(I speak kind
                of quickly and people think Iâ€™m saying â€˜asian-hubâ€™ pretty oftenâ€¦
              </p>
              <p>
                Weâ€™re really excited to share the platform with you all and look
                forward to your feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="39302744">
          <h3>
            <a
              class="item"
              href="https://fortune.com/2024/02/08/mozilla-firefox-ceo-laura-chambers-mitchell-baker-leadership-transition/"
              >Mozilla names new CEO as it pivots to data privacy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 15:06:47</span
              ><span class="points-container"
                >Points: <span class="points">556</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39302744"
                  >Comments</a
                ><span class="descendants">: 488</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39301944">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2402.04494"
              >Grandmaster-Level Chess Without Search</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 13:57:19</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39301944"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39301495">
          <h3>
            <a
              class="item"
              href="https://blog.google/products/gemini/bard-gemini-advanced-app/"
              >Bard is now Gemini, and weâ€™re rolling out a mobile app and Gemini
              Advanced</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 13:07:37</span
              ><span class="points-container"
                >Points: <span class="points">452</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39301495"
                  >Comments</a
                ><span class="descendants">: 912</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39300317">
          <h3>
            <a
              class="item"
              href="https://cyberus-technology.de/articles/vbox-kvm-public-release"
              >VirtualBox KVM Public Release</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 10:20:25</span
              ><span class="points-container"
                >Points: <span class="points">474</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39300317"
                  >Comments</a
                ><span class="descendants">: 177</span></span
              >
            </h4>
            <div class="text">
              <p>
                Cyberus Technologyâ€™s KVM backend allows VirtualBox to run
                virtual machines utilizing the Linux KVM hypervisor instead of
                the custom kernel module used by standard VirtualBox. Today we
                are announcing the open-source release of our KVM backend for
                Virtualbox.
              </p>
            </div>
          </section>
        </section>
        <section id="39288062">
          <h3>
            <a
              class="item"
              href="https://geoffboeing.com/2018/07/city-street-orientations-world/"
              >City Street Orientations Around the World</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-07 @ 13:06:17</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39288062"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39287983">
          <h3>
            <a class="item" href="https://github.com/02alexander/robby-fischer"
              >An autonomous robot arm that you can play against</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-07 @ 12:58:21</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39287983"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39287120">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/lifeandstyle/2024/feb/07/the-art-of-doing-nothing-have-the-dutch-found-the-answer-to-burnout-culture"
              >"Niksen": The art of doing nothing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-07 @ 11:12:24</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39287120"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
