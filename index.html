<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41659324">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/tech-policy/2024/09/startup-behind-worlds-first-robot-lawyer-to-pay-193k-for-false-ads-ftc-says/"
              >DoNotPay has to pay $193K for falsely touting untested AI lawyer,
              FTC says</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 15:13:44</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41659324"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41658766">
          <h3>
            <a class="item" href="https://www.meme.net.au/nkrypt/"
              >NKRYPT Sculpture</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 14:24:36</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41658766"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41657986">
          <h3>
            <a
              class="item"
              href="https://www.postgresql.org/about/news/postgresql-17-released-2936/"
              >PostgreSQL 17</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 13:10:24</span
              ><span class="points-container"
                >Points: <span class="points">260</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41657986"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41657833">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/kia-web-vulnerability-vehicle-hack-track/"
              >Vehicles Could Be Hacked and Tracked Thanks to a Simple Website
              Bug</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 12:53:26</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41657833"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41657343">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/poka-labs/jobs/ao5FevM-founding-engineer"
              >Poka Labs (YC S24) Is Hiring a Founding Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 12:00:32</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41656381">
          <h3>
            <a class="item" href="https://www.michelecoscia.com/?p=2372"
              >Italian Music Through the Lens of Complex Networks</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 09:39:57</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41656381"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41655954">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/tech/ai/openai-chief-technology-officer-resigns-7a8b4639"
              >OpenAI to Become For-Profit Company</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 08:34:43</span
              ><span class="points-container"
                >Points: <span class="points">654</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41655954"
                  >Comments</a
                ><span class="descendants">: 350</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41655382">
          <h3>
            <a
              class="item"
              href="https://blog.trailofbits.com/2024/09/24/notes-on-aws-nitro-enclaves-attack-surface/"
              >AWS Nitro Enclaves: Attack Surface</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 07:12:04</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41655382"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41654723">
          <h3>
            <a class="item" href="https://docs.rs/cronexpr/latest/cronexpr/"
              >Show HN: Cronexpr, a Rust library to parse and iter crontab
              expression</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 05:10:46</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41654723"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41654078">
          <h3>
            <a
              class="item"
              href="https://developers.redhat.com/articles/2024/09/24/go-compiler-register-allocation"
              >Register Allocation in the Go Compiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 02:54:26</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41654078"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41653191">
          <h3>
            <a class="item" href="https://github.com/tummychow/git-absorb"
              >Git-absorb: Git commit –fixup, but automatic</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-26 @ 00:12:53</span
              ><span class="points-container"
                >Points: <span class="points">356</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41653191"
                  >Comments</a
                ><span class="descendants">: 188</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41650905">
          <h3>
            <a class="item" href="https://github.com/cle-b/httpdbg"
              >Show HN: Httpdbg – A tool to trace the HTTP requests sent by your
              Python code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 19:18:12</span
              ><span class="points-container"
                >Points: <span class="points">175</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41650905"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
            <div class="text">
              <p>
                I created httpdbg, a tool for Python developers to easily debug
                HTTP(S) client requests in Python programs.
              </p>
              <p>
                I developed it because I needed a tool that could help me trace
                the HTTP requests sent by my tests back to the corresponding
                methods in our API client.
              </p>
              <p>
                The goal of this tool is to simplify the debugging process, so I
                designed it to be as simple as possible. It requires no external
                dependencies, no setup, no superuser privileges, and no code
                modifications.
              </p>
              <p>
                I'm sharing it with you today because I use it regularly, and it
                seems like others have found it useful too—so it might be
                helpful for you as well.
              </p>
              <p>Hope you will like it.</p>
              <p>cle</p>
              <p>
                Source:
                <a href="https://github.com/cle-b/httpdbg"
                  >https://github.com/cle-b/httpdbg</a
                >
              </p>
              <p>
                Documentation:
                <a href="https://httpdbg.readthedocs.io/"
                  >https://httpdbg.readthedocs.io/</a
                >
              </p>
              <p>
                A blog post on a use case:
                <a
                  href="https://medium.com/@cle-b/trace-all-your-http-requests-in-python-using-httpdbg-9db9110db981/"
                  >https://medium.com/@cle-b/trace-all-your-http-requests-in-py...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41650647">
          <h3>
            <a
              class="item"
              href="https://security.googleblog.com/2024/09/eliminating-memory-safety-vulnerabilities-Android.html"
              >Eliminating Memory Safety Vulnerabilities at the Source</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 18:49:03</span
              ><span class="points-container"
                >Points: <span class="points">275</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41650647"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41650534">
          <h3>
            <a
              class="item"
              href="https://clarkwakeland.com/blog/2024/avoiding-a-BSOD-on-your-satellite/"
              >How to avoid a BSOD on your 2B dollar spacecraft</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 18:40:26</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41650534"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41650047">
          <h3>
            <a
              class="item"
              href="https://about.fb.com/news/2024/09/introducing-orion-our-first-true-augmented-reality-glasses/"
              >Orion, our first true augmented reality glasses</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 17:56:53</span
              ><span class="points-container"
                >Points: <span class="points">1111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41650047"
                  >Comments</a
                ><span class="descendants">: 892</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41649763">
          <h3>
            <a
              class="item"
              href="https://ai.meta.com/blog/llama-3-2-connect-2024-vision-edge-mobile-devices/?_fb_noscript=1"
              >Llama 3.2: Revolutionizing edge AI and vision with open,
              customizable models</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 17:29:27</span
              ><span class="points-container"
                >Points: <span class="points">799</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41649763"
                  >Comments</a
                ><span class="descendants">: 264</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41649134">
          <h3>
            <a
              class="item"
              href="https://krebsonsecurity.com/2024/09/timeshare-owner-the-mexican-drug-cartels-want-you/"
              >Timeshare owner? The Mexican drug cartels want you</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 16:28:20</span
              ><span class="points-container"
                >Points: <span class="points">222</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41649134"
                  >Comments</a
                ><span class="descendants">: 255</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41648564">
          <h3>
            <a
              class="item"
              href="https://github.com/haystackeditor/haystack-editor"
              >Launch HN: Haystack (YC S24) – Visualize and edit code on an
              infinite canvas</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 15:31:00</span
              ><span class="points-container"
                >Points: <span class="points">295</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41648564"
                  >Comments</a
                ><span class="descendants">: 152</span></span
              >
            </h4>
            <div class="text">
              <a href="https://haystackeditor.com/"
                >https://haystackeditor.com/</a
              >). Haystack re-imagines the IDE by putting it on a 2D digital
              whiteboard that automatically draws connections between code as
              you navigate and edit files. We designed it to match our mental
              model of how code works – as a graph of connected components.
              Here’s a demo of what it looks like:
              <a href="https://www.youtube.com/watch?v=5XADctpWNNs"
                >https://www.youtube.com/watch?v=5XADctpWNNs</a
              >. You can download Haystack from
              <a href="https://haystackeditor.com/"
                >https://haystackeditor.com/</a
              >.
              <p>
                We used to work as software engineers at big companies, and when
                the explosion in AI code-generation tools started we were really
                excited about them. They gave us a huge speed boost in our
                day-to-day work. But something was missing: writing code had
                become easier, but navigating codebases remained painful. We
                found that we were spending more time on the latter than the
                former!
              </p>
              <p>
                Our vision of Haystack is an IDE that helps you navigate your
                codebase at speed. You should be able to type a vague
                description of the code you’re looking for (“Show me the code
                flow that triggers after we click the submit button”) and
                immediately see the right result. But we don’t think the
                traditional split-panel interface is the best fit for this type
                of rapid navigation. Inspired by the fluidity of design tools
                like Figma (Akshay used to work there!) and Miro, we realized
                that the canvas layout is a perfect way to represent and operate
                on code flows, and a great base for all the AI and collaborative
                tooling we want to build! This is how Haystack was born.
              </p>
              <p>
                You might have seen our original Show HN (<a
                  href="https://news.ycombinator.com/item?id=41068719"
                  >https://news.ycombinator.com/item?id=41068719</a
                >) about two months ago. Since then, a ton of our users have
                told us that they’d love to contribute. We’ve made the decision
                to make the editor source-available so that folks can make
                contributions and so that they can examine the code to make sure
                they can trust it. Our repo is at
                <a href="https://github.com/haystackeditor/haystack-editor"
                  >https://github.com/haystackeditor/haystack-editor</a
                >.
              </p>
              <p>
                If you’re wondering why we’re going source-available rather than
                proper open-source: as a startup, we're going to eventually
                monetize and it’s too early for us to make the decision on
                whether going fully open-source is the right move. We want to
                own the distribution of Haystack until we can better understand
                the ramifications that open-sourcing would have, and whether
                it’s sustainable business-wise. We’d love to find a way to make
                proper open-source work, but it’s a one-way door, so we want to
                take our time to make sure we’re making an informed decision.
              </p>
              <p>
                We would love to hear about what you think about having a canvas
                in your IDE and the role visualizations have to play in software
                development!
              </p>
            </div>
          </section>
        </section>
        <section id="41647843">
          <h3>
            <a
              class="item"
              href="https://duriansoftware.com/joe/the-lost-language-extensions-of-metaware%27s-high-c-compiler"
              >The lost language extensions of MetaWare's High C compiler
              (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 14:19:13</span
              ><span class="points-container"
                >Points: <span class="points">284</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41647843"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41646531">
          <h3>
            <a
              class="item"
              href="https://www.jonashietala.se/blog/2024/09/25/why_i_still_blog_after_15_years/"
              >Why I still blog after 15 years</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 12:19:29</span
              ><span class="points-container"
                >Points: <span class="points">433</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41646531"
                  >Comments</a
                ><span class="descendants">: 212</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41645173">
          <h3>
            <a
              class="item"
              href="https://wafris.org/blog/rearchitecting-for-sqlite"
              >Rearchitecting: Redis to SQLite</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-25 @ 08:37:48</span
              ><span class="points-container"
                >Points: <span class="points">323</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41645173"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41638987">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2024/Sep/24/xkcd-1425-turns-ten-years-old-today/"
              >Xkcd 1425 (Tasks) turns ten years old today</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 17:37:50</span
              ><span class="points-container"
                >Points: <span class="points">794</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41638987"
                  >Comments</a
                ><span class="descendants">: 371</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41631157">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-09-wasp-species.html"
              >Another new wasp species discovered by researchers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-23 @ 22:15:17</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41631157"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41629893">
          <h3>
            <a
              class="item"
              href="https://www.nbcnews.com/science/science-news/octopuses-hunt-with-fish-punch-video-rcna171705"
              >Octopuses seen hunting together with fish, punching those that
              don't cooperate</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-23 @ 20:03:44</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41629893"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41616413">
          <h3>
            <a
              class="item"
              href="https://developer.nvidia.com/blog/writing-portable-rendering-code-with-nvrhi/"
              >Writing Portable Rendering Code with Nvrhi</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-22 @ 11:53:26</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41616413"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41616023">
          <h3>
            <a class="item" href="https://shizuku.rikka.app/"
              >Shizuku: App that lets you use system APIs with higher privileges
              without root</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-22 @ 10:11:43</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41616023"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41609246">
          <h3>
            <a class="item" href="https://github.com/zbycz/github-events-viewer"
              >GitHub-events-viewer a.k.a. "What did I do yesterday?"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-21 @ 11:17:22</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41609246"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41608496">
          <h3>
            <a
              class="item"
              href="https://www.petercollingridge.co.uk/blog/mathematics-toys-and-games/dobble/"
              >The Mathematics of Dobble</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-21 @ 08:32:40</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41608496"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41602519">
          <h3>
            <a class="item" href="https://hoodmaps.com"
              >Hoodmaps: Publicly Annotated City Maps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-20 @ 14:45:15</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41602519"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41601783">
          <h3>
            <a
              class="item"
              href="https://www.tokyoweekender.com/art_and_culture/moerenuma-park-a-giant-gorgeous-living-sculpture-in-hokkaido/"
              >Moerenuma Park: A Giant, Gorgeous 'Living Sculpture' in
              Hokkaido</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-20 @ 13:24:32</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41601783"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
