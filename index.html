<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45706487">
          <h3>
            <a class="item" href="https://shadcnthemer.com"
              >Show HN: Open-source shadcn/UI theme editor â€“ design and share
              shadcn themes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 19:51:24</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45706487"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <p>
                The goal was to make it easy to visually design shadcn color
                themes, preview them live across various example UIs, and export
                them straight into your projects (as CSS or via the shadcn CLI
                registry command).
              </p>
              <p>
                I had a bit of experience going into this because I built the
                Theme Studio for VS Code in the past, but it was fun using a
                modern stack and leveraging Cursor to help me along the way this
                time.
              </p>
            </div>
          </section>
        </section>
        <section id="45706380">
          <h3>
            <a class="item" href="https://amit.prasad.me/blog/before-main"
              >The Journey Before main()</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 19:33:22</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45706380"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45706077">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/world/2025/10/25/switzerland-nuclear-bunkers-overhaul/"
              >Switzerland is spending millions revamping its vast network of
              bunkers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 18:47:55</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45706077"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45705381">
          <h3>
            <a class="item" href="https://libera.chat/news/advised"
              >We do not have sufficient links to the UK for Online Safety Act
              to be applicable</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 17:07:40</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45705381"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45705125">
          <h3>
            <a
              class="item"
              href="https://rocktumbler.com/tips/rock-tumbler-instructions/"
              >Rock Tumbler Instructions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 16:32:40</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45705125"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45704419">
          <h3>
            <a
              class="item"
              href="https://www.scattered-thoughts.net/writing/against-sql/"
              >Against SQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 15:00:06</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45704419"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45703926">
          <h3>
            <a
              class="item"
              href="https://tigerbeetle.com/blog/2025-10-25-synadia-and-tigerbeetle-pledge-512k-to-the-zig-software-foundation/#blog-post"
              >TigerBeetle and Synadia pledge $512k to the Zig Software
              Foundation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 13:54:33</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45703926"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.synadia.com/blog/synadia-tigerbeetle-zig-foundation-pledge"
                >https://www.synadia.com/blog/synadia-tigerbeetle-zig-foundat...</a
              >
            </div>
          </section>
        </section>
        <section id="45703556">
          <h3>
            <a
              class="item"
              href="https://popovicu.com/posts/making-a-micro-linux-distro/"
              >Making a micro Linux distro (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 13:01:39</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45703556"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45702877">
          <h3>
            <a
              class="item"
              href="https://unworkableideas.com/the-great-saas-lighting-how-it-users-got-gaslit/"
              >The Great SaaS Gaslight</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 11:05:41</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45702877"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45702558">
          <h3>
            <a class="item" href="https://backbonenotbad.hyperclay.com/"
              >React vs. Backbone in 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 09:43:54</span
              ><span class="points-container"
                >Points: <span class="points">260</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45702558"
                  >Comments</a
                ><span class="descendants">: 193</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45701404">
          <h3>
            <a
              class="item"
              href="https://www.seangoedecke.com/good-code-reviews/"
              >Mistakes I see engineers making in their code reviews</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 04:42:09</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45701404"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45700946">
          <h3>
            <a
              class="item"
              href="https://iverify.io/blog/key-iocs-for-pegasus-and-predator-spyware-cleaned-with-ios-26-update"
              >Key IOCs for Pegasus and Predator Spyware Removed with iOS 26
              Update</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 02:31:55</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45700946"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45700879">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45700879"
              >Ask HN: Not treated respectfully by colleague â€“ advice?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 02:14:39</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45700879"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.pickardlaws.com/myleadership/myfiles/rtdocs/hbr/Competent%20Jerks,%20Lovable%20Fools%20&amp;%20Formationa%20of%20Social%20Networks%200605.pdf"
                >https://www.pickardlaws.com/myleadership/myfiles/rtdocs/hbr/...</a
              >
              <p>
                Backstory -- I joined my current team a year ago. It was falling
                apart. The team members hated each other and were trying to get
                each other fired. The team lead whoâ€™d joined a quarter before
                had quit to join another team largely due to conflict with one
                difficult coworker.
              </p>
              <p>
                Then I joined as the lead. I helped to stabilize the team over
                the last year. Itâ€™s grown from four to ten engineers. Three
                engineers joined specifically to work with me.
              </p>
              <p>
                Yet the entire time Iâ€™ve been on that team, that one difficult
                coworker has been criticizing and fighting almost everything
                Iâ€™ve done. That coworker was relatively inexperienced, yet was
                told by a previous director that he was meant to be the lead of
                this platform. Hence the fighting with the other lead from a
                year ago. And with me over the past year. Itâ€™s burning me out
                bad.
              </p>
              <p>
                It mostly comes across in passive-aggressive comments, and in
                trying to argue and prove he is right about trivial things, with
                every bit of disagreement. It used to come up in terms of
                aggression towards his peers. That stopped when me and my
                manager intervened. Yet continues with me. It's clear he doesn't
                respect me as lead, and makes that clear in team meetings.
              </p>
              <p>
                It makes everything harder. Even in an incident that caused a
                global outage for three hours, and where we didn't have alerts
                and had to get told by our users we were down, I get pushback on
                calling for a post-mortem since his work was involved. Now I
                have to back-channel to my manager (who wasn't in the room), and
                still face the . Just the friction alone that he adds in getting
                anything done makes doing the right thing often not worth it.
              </p>
              <p>
                I'm at a loss. My other teammates love working with me. I was
                promoted last year. I'm two levels above this guy which means my
                company trusts me. I'm frankly wishing I could leave the team
                but it's difficult to transfer since I'm in something of a
                specialty and there aren't other positions at my level in the
                company.
              </p>
              <p>
                My manager's been resistant to doing much of anything. I think
                he's tired of me bringing it up. He says that the engineer "gets
                along with [junior engineer who never disagrees with him]". He
                says the difficult engineer is improving and sees him trying.
                His feedback to me is not to let it bother me so much. He asks
                me what he should do to change his behavior (he's the manager,
                not me...).
              </p>
              <p>
                I really just want to be able to come in to work and do my job
                without dealing with an asshole trying to one-up me or "score
                points" against me all day and without expecting conflict every
                time we're in the same meeting. I'm tired of the status and
                perception games and his overall impact on the team vibe and
                culture.
              </p>
            </div>
          </section>
        </section>
        <section id="45700663">
          <h3>
            <a class="item" href="https://whatisintelligence.antikythera.org/"
              >What is intelligence? (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-25 @ 01:21:43</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45700663"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45699285">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/science/2025/10/24/napoleons-army-diseases-ancient-dna-teeth/"
              >Dead soldiers' teeth reveal diseases that doomed Napoleon's
              army</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 21:28:39</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45699285"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.gavi.org/vaccineswork/dna-reveals-real-killers-brought-down-napoleons-army"
                >https://www.gavi.org/vaccineswork/dna-reveals-real-killers-b...</a
              >
              <p>
                <a
                  href="https://www.cell.com/current-biology/fulltext/S0960-9822(25)01247-3"
                  >https://www.cell.com/current-biology/fulltext/S0960-9822(25)...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45698909">
          <h3>
            <a
              class="item"
              href="https://www.ormanager.com/briefs/study-mri-contrast-agent-causes-harmful-metal-buildup-in-some-patients/"
              >Study: MRI contrast agent causes harmful metal buildup in some
              patients</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 20:48:46</span
              ><span class="points-container"
                >Points: <span class="points">232</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45698909"
                  >Comments</a
                ><span class="descendants">: 201</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.frontiersin.org/journals/toxicology/articles/10.3389/ftox.2025.1664840/abstract"
                >https://www.frontiersin.org/journals/toxicology/articles/10....</a
              >
            </div>
          </section>
        </section>
        <section id="45698570">
          <h3>
            <a
              class="item"
              href="https://www.swift.org/blog/nightly-swift-sdk-for-android/"
              >The Swift SDK for Android</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 20:06:52</span
              ><span class="points-container"
                >Points: <span class="points">656</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45698570"
                  >Comments</a
                ><span class="descendants">: 253</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45698554">
          <h3>
            <a
              class="item"
              href="https://www.heatpumped.org/p/harnessing-america-s-heat-pump-moment"
              >Harnessing America's heat pump moment</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 20:05:07</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45698554"
                  >Comments</a
                ><span class="descendants">: 491</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45695134">
          <h3>
            <a
              class="item"
              href="https://www.saxrag.com/tech/reversing/2025/06/01/BAWiFi.html"
              >Unlocking free WiFi on British Airways</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 14:40:34</span
              ><span class="points-container"
                >Points: <span class="points">544</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45695134"
                  >Comments</a
                ><span class="descendants">: 132</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45694856">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/first-shape-found-that-cant-pass-through-itself-20251024/"
              >First convex polyhedron found that can't pass through itself</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 14:12:00</span
              ><span class="points-container"
                >Points: <span class="points">515</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45694856"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
            <div class="text">
              <a href="https://arxiv.org/abs/2508.18475"
                >https://arxiv.org/abs/2508.18475</a
              >
              <p>
                <i>Rupert's snub cube and other Math Holes</i> -
                <a href="https://news.ycombinator.com/item?id=45261566"
                  >https://news.ycombinator.com/item?id=45261566</a
                >
                - Sept 2025 (10 comments)
              </p>
              <p>
                <i>Rupert's Property</i> -
                <a href="https://news.ycombinator.com/item?id=45057561"
                  >https://news.ycombinator.com/item?id=45057561</a
                >
                - Aug 2025 (23 comments)
              </p>
            </div>
          </section>
        </section>
        <section id="45682164">
          <h3>
            <a
              class="item"
              href="https://mbleigh.dev/posts/context-engineering-with-links/"
              >Context engineering is sleeping on the humble hyperlink</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-23 @ 14:24:47</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45682164"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45672494">
          <h3>
            <a class="item" href="https://github.com/danirod/jacqueline"
              >Jacqueline â€“ A minimal i386 kernel written in Pascal (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 17:37:46</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45672494"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45665513">
          <h3>
            <a class="item" href="https://edera.dev/stories/tarmageddon"
              >Tarmageddon Open Source Abandonware</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 06:26:33</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45665513"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45663990">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2411.03720"
              >Magic sizes enable high-fidelity assembly of programmable
              shells</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 01:35:43</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45663990"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45657970">
          <h3>
            <a
              class="item"
              href="https://thegradient.pub/state-of-ml-frameworks-2019-pytorch-dominates-research-tensorflow-dominates-industry/"
              >The State of Machine Learning Frameworks in 2019</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-21 @ 16:44:06</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45657970"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45653639">
          <h3>
            <a
              class="item"
              href="https://www.nbcnews.com/health/health-news/tiny-eye-implant-special-glasses-legally-blind-patients-can-read-rcna238488"
              >People with blindness can read again after retinal implant and
              special glasses</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-21 @ 08:19:27</span
              ><span class="points-container"
                >Points: <span class="points">276</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45653639"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.nature.com/articles/d41586-025-03420-x"
                >https://www.nature.com/articles/d41586-025-03420-x</a
              >
            </div>
          </section>
        </section>
        <section id="45642571">
          <h3>
            <a class="item" href="https://valetudo.cloud/"
              >Valetudo: Cloud replacement for vacuum robots enabling local-only
              operation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-20 @ 11:08:44</span
              ><span class="points-container"
                >Points: <span class="points">375</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45642571"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45638990">
          <h3>
            <a
              class="item"
              href="https://asawicki.info/news_1791_calculating_the_bounding_rectangle_of_a_circular_sector"
              >Calculating the Bounding Rectangle of a Circular Sector</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-19 @ 23:40:14</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45638990"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45633877">
          <h3>
            <a
              class="item"
              href="https://aschmelyun.com/blog/i-invited-strangers-to-message-me-through-a-receipt-printer/"
              >I invited strangers to message me through a receipt printer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-19 @ 13:13:24</span
              ><span class="points-container"
                >Points: <span class="points">284</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45633877"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45633311">
          <h3>
            <a
              class="item"
              href="https://blog.baro.dev/p/the-future-of-python-web-services-looks-gil-free"
              >The future of Python web services looks GIL-free</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-19 @ 10:38:25</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45633311"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
