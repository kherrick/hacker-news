<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42990540">
          <h3>
            <a class="item" href="https://booktalk.club/"
              >Show HN: My first side project, streamlined book clubs on
              Slack</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 13:28:10</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990540"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990401">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2412.12140"
              >Frontier AI systems have surpassed the self-replicating red
              line</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 13:01:21</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990401"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990351">
          <h3>
            <a class="item" href="https://www.ocal.ai/"
              >Show HN: AI driven calendar to combat student procrastination</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 12:49:48</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990351"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                Ocal is an AI calendar that automatically blocks out your time
                as soon as you get assignments. Linked with your LMS (Canvas
                currently), our AI scans your task, estimates its duration, and
                schedules time (within boundaries you set—maybe you’re a night
                owl or an early bird) so you can complete the work comfortably
                ahead of the deadline. The goal: reclaim your time by tackling
                tasks early, so you’re not pulling all-nighters. But
                wait…there’s more.
              </p>
              <p>
                We plan to market this tool to institutions so everyone in your
                area can use it. That opens the door to my favorite feature: the
                social aspect. You can friend people through the calendar, see
                when they’re busy or free (in a privacy-friendly way), and use
                our AI bot to find an open slot for you, Jim, John, and Joe to
                play Magic: The Gathering—or to coordinate club meetings, team
                workouts, or group hangouts. Schedules become painless. Let Ocal
                be that shared “secretary” who knows everyone’s availability and
                can effortlessly set you up with the right people at the right
                time.
              </p>
              <p>
                We’re excited to bring this to the world to streamline
                productivity and scheduling in one go. We've been building for a
                week so it’s not fully built for institutions quite yet, but
                it’s developed enough for you to poke around (a lot of features
                in the works). Join our waitlist to support! Let us know what
                you think, where we can improve, and features you’d love to see.
              </p>
            </div>
          </section>
        </section>
        <section id="42990324">
          <h3>
            <a
              class="item"
              href="https://iquilezles.org/articles/gpuconditionals/"
              >Don't "optimize" conditional moves in shaders with
              mix()+step()</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 12:42:54</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990324"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990036">
          <h3>
            <a
              class="item"
              href="https://github.com/Pravko-Solutions/FlashLearn/tree/main/examples"
              >Classic Data science pipelines built with LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 11:39:38</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990036"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990000">
          <h3>
            <a
              class="item"
              href="https://www.watchesofespionage.com/blogs/woe-dispatch/vice-president-jd-vance-apple-watch-smartwatch-intelligence-risks"
              >Dear Mr. Vice President, Please Take Off Your Apple Watch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 11:29:35</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990000"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42989923">
          <h3>
            <a class="item" href="http://www.colinux.org/"
              >Linux as co-operative Windows process</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 11:07:52</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42989923"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42989628">
          <h3>
            <a class="item" href="https://itizso.itch.io/retrofab"
              >RetroFab: Playable 3D simulations of vintage electronic games</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 09:50:35</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42989628"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42989609">
          <h3>
            <a
              class="item"
              href="https://asteriskmag.com/issues/08/chimes-at-midnight"
              >Chimes at Midnight (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 09:45:57</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42989609"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42989419">
          <h3>
            <a
              class="item"
              href="https://marktomforde.com/academic/miscellaneous/images/atiyah20thcentury.pdf"
              >Mathematics in the 20th century, by Michael Atiyah [pdf]
              (2002)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 08:54:37</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42989419"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42989320">
          <h3>
            <a class="item" href="https://thebullshitmachines.com"
              >Modern-Day Oracles or Bullshit Machines</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 08:24:17</span
              ><span class="points-container"
                >Points: <span class="points">273</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42989320"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42989062">
          <h3>
            <a
              class="item"
              href="https://www.theatlantic.com/magazine/archive/2025/03/gary-shteyngart-bespoke-suit-mens-fashion-self-love/681441/"
              >The Man in the Midnight-Blue Six-Ply Italian-Milled Wool Suit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 07:10:56</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42989062"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42988946">
          <h3>
            <a class="item" href="https://github.com/fdavies93/daily-notes.nvim"
              >Show HN: Daily-notes.nvim – fuzzy time journal and planning
              plugin</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 06:42:10</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42988946"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <p>
                note: not using NLP, LLMs or 'true' fuzzy parsing as per
                academic literature; just normal recursive descent parsing
              </p>
            </div>
          </section>
        </section>
        <section id="42988303">
          <h3>
            <a
              class="item"
              href="https://www.cell.com/cell-reports/fulltext/S2211-1247(13)00570-6"
              >Brain Hyperconnectivity in Children with Autism and Its Links to
              Social Deficits (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 03:54:04</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42988303"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42986485">
          <h3>
            <a class="item" href="https://datagubbe.se/endofciv/"
              >Is software abstraction killing civilization? (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-08 @ 21:49:51</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42986485"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42986320">
          <h3>
            <a class="item" href="https://jacksonpollock.org/"
              >Jacksonpollock.org (2003)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-08 @ 21:22:49</span
              ><span class="points-container"
                >Points: <span class="points">418</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42986320"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42985427">
          <h3>
            <a class="item" href="https://johnkerl.org/doc/ortho/ortho.html"
              >Tips for mathematical handwriting (2007)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-08 @ 19:20:10</span
              ><span class="points-container"
                >Points: <span class="points">242</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42985427"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42984457">
          <h3>
            <a
              class="item"
              href="https://scorpiosoftware.net/2025/02/08/writing-a-simple-driver-in-rust/"
              >Writing a simple windows driver in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-08 @ 17:25:03</span
              ><span class="points-container"
                >Points: <span class="points">221</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42984457"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42983699">
          <h3>
            <a class="item" href="https://github.com/xajik/thedeck"
              >The Deck: An open-source cross-platform multiplayer card game
              engine in Flutter</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-08 @ 15:47:36</span
              ><span class="points-container"
                >Points: <span class="points">289</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42983699"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42983275">
          <h3>
            <a class="item" href="https://antirez.com/news/145"
              >We are destroying software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-08 @ 14:48:25</span
              ><span class="points-container"
                >Points: <span class="points">818</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42983275"
                  >Comments</a
                ><span class="descendants">: 540</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42978199">
          <h3>
            <a class="item" href="https://amanvir.com/obscure-islands"
              >Obscure islands I find interesting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 22:23:31</span
              ><span class="points-container"
                >Points: <span class="points">433</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42978199"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42976698">
          <h3>
            <a
              class="item"
              href="https://blog.danslimmon.com/2019/07/15/do-nothing-scripting-the-key-to-gradual-automation/"
              >Do-nothing scripting: the key to gradual automation (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 19:48:16</span
              ><span class="points-container"
                >Points: <span class="points">494</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42976698"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42975492">
          <h3>
            <a
              class="item"
              href="https://kevin.burke.dev/kevin/norcal-cities-new-utility/"
              >Cities can cost effectively start their own utilities</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 17:55:40</span
              ><span class="points-container"
                >Points: <span class="points">308</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42975492"
                  >Comments</a
                ><span class="descendants">: 284</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42972982">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/how-noethers-theorem-revolutionized-physics-20250207/"
              >Noether's Theorem Revolutionized Physics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 14:33:32</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42972982"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42971806">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/technology/2025/feb/06/google-edits-super-bowl-ad-for-ai-that-featured-false-information"
              >Google edits Super Bowl ad for AI that featured false
              information</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 12:25:54</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42971806"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42961855">
          <h3>
            <a
              class="item"
              href="https://bencane.com/cell-based-architecture-explained-with-zombies-f5e814d3e5d2"
              >Cell-Based Architecture Explained, with Zombies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-06 @ 12:52:52</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42961855"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42951744">
          <h3>
            <a
              class="item"
              href="https://www.bbc.co.uk/news/articles/c5yvrq7dyg6o"
              >First glimpse inside burnt scroll after 2k years</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-05 @ 17:12:50</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42951744"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42950059">
          <h3>
            <a class="item" href="https://tenochtitlan.thomaskole.nl/"
              >3D reconstruction of the capital of the Aztec empire</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-05 @ 15:40:27</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42950059"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42948590">
          <h3>
            <a
              class="item"
              href="https://blog.maximeheckel.com/posts/post-processing-as-a-creative-medium/"
              >Post-Processing Shaders as a Creative Medium</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-05 @ 14:02:43</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42948590"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42946270">
          <h3>
            <a class="item" href="https://research.swtch.com/interfaces"
              >Go Data Structures: Interfaces (2009)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-05 @ 09:48:30</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42946270"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
