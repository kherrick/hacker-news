<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37452528">
          <h3>
            <a
              class="item"
              href="https://www.filfre.net/2023/09/magic-and-loss-part-1-magic-in-the-cards/"
              >Magic and Loss, Part 1: Magic in the Cards</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-10 @ 03:02:38</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37452528"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37452051">
          <h3>
            <a class="item" href="https://github.com/GSA/code-gov"
              >GitHub â€“ GSA/code-gov: An informative repo for all Code.gov
              repos</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-10 @ 01:33:14</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37452051"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37451913">
          <h3>
            <a class="item" href="https://mcyoung.xyz/2023/08/09/yarns/"
              >I Wrote a String Type</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-10 @ 01:03:04</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37451913"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37451728">
          <h3>
            <a
              class="item"
              href="https://one-from-nippon.ghost.io/coffee-in-a-can/"
              >Coffee in a Can</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-10 @ 00:30:20</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37451728"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37451715">
          <h3>
            <a class="item" href="https://github.com/linkedin/school-of-sre"
              >School of SRE: Curriculum for onboarding non-traditional hires
              and new grads</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-10 @ 00:27:25</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37451715"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37451551">
          <h3>
            <a class="item" href="https://www.bottomupcs.com/"
              >Computer Science from the Bottom Up</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-10 @ 00:00:17</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37451551"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37451518">
          <h3>
            <a
              class="item"
              href="https://thomask.sdf.org/blog/2023/09/09/memories-from-old-lan-parties.html"
              >Memories from old LAN parties</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 23:54:29</span
              ><span class="points-container"
                >Points: <span class="points">227</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37451518"
                  >Comments</a
                ><span class="descendants">: 118</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37451080">
          <h3>
            <a
              class="item"
              href="https://www.npr.org/2023/09/08/1198373683/sucking-carbon-dioxide-out-of-the-sky-is-moving-from-science-fiction-to-reality"
              >Sucking carbon dioxide out of the sky is moving from science
              fiction to reality</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 22:48:00</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37451080"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37450915">
          <h3>
            <a
              class="item"
              href="https://www.chemistryworld.com/news/lithium-discovery-in-us-volcano-could-be-biggest-deposit-ever-found/4018032.article"
              >Lithium discovery in US volcano could be biggest deposit ever
              found</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 22:27:16</span
              ><span class="points-container"
                >Points: <span class="points">450</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37450915"
                  >Comments</a
                ><span class="descendants">: 207</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37450228">
          <h3>
            <a
              class="item"
              href="https://jobs.ashbyhq.com/freshpaint/bfe56523-bff4-4ca3-936b-0ba15fb4e572?utm_source=hn"
              >Freshpaint (YC S19) is hiring engineers to build a HIPAA
              compliant data platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 21:00:20</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37449439">
          <h3>
            <a
              class="item"
              href="https://lithub.com/look-inside-the-gorgeous-english-cottage-where-john-le-carre-wrote-tinker-tailor-soldier-spy/"
              >The English cottage where John le CarrÃ© wrote Tinker Tailor
              Soldier Spy</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 19:34:44</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37449439"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37448914">
          <h3>
            <a class="item" href="https://github.com/ZeroIntensity/view.py"
              >Show HN: I built a Python web framework</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 18:47:54</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37448914"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
            <div class="text">been working on this for nearly a year</div>
          </section>
        </section>
        <section id="37448659">
          <h3>
            <a class="item" href="https://github.com/scottbez1/smartknob"
              >SmartKnob â€“ Haptic input knob with software-defined endstops and
              virtual detents</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 18:30:39</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37448659"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37448554">
          <h3>
            <a
              class="item"
              href="https://mycophobia.org/desktop_gui_minimalism.html"
              >On Desktop GUI Minimalism</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 18:23:18</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37448554"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37447445">
          <h3>
            <a class="item" href="https://productonboarding.com"
              >Show HN: Productonboarding.com â€“ Mobbin for SaaS product
              onboarding</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 16:56:08</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37447445"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Wanted to share a new website we just built called
                productonboarding.com (Next.js and RSC). The site has
                screenshots and videos of product onboarding from companies like
                Figma, Notion, Framer, and more. Itâ€™s sort of like Mobbin for
                web-based product onboarding.
              </p>
              <p>
                We build a lot of product onboarding at our startup Frigade, and
                over the last year weâ€™ve put together an internal library of
                hundreds of product onboarding examples that we refer to all the
                time with customers. It helps them find and copy patterns that
                work at other companies so they donâ€™t need to create net new
                experiences or A/B test their way into the best performing
                pattern from scratch.
              </p>
              <p>
                Given it's been so useful to us, we decided to open it up to the
                world. We bought productonboarding.com and have started adding
                examples from our collection and made them browsable and
                sortable. Weâ€™re planning to add new examples weekly.
              </p>
              <p>
                Hope this is helpful to any of you who are currently thinking
                through building new onboarding experiences. Would love any
                ideas and feedback. Thanks!
              </p>
            </div>
          </section>
        </section>
        <section id="37446430">
          <h3>
            <a
              class="item"
              href="https://ffmpeg.org/pipermail/ffmpeg-devel/2023-September/314167.html"
              >FFmpeg Patches for a 20% speedup of Apple ProRes decoding</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 15:23:10</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37446430"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37445401">
          <h3>
            <a class="item" href="https://benchmarks.llmonitor.com"
              >Asking 60 LLMs a set of 20 questions</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 13:51:33</span
              ><span class="points-container"
                >Points: <span class="points">582</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37445401"
                  >Comments</a
                ><span class="descendants">: 294</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37444268">
          <h3>
            <a
              class="item"
              href="https://bricknerd.com/home/every-type-of-plastic-used-by-lego-5-20-22"
              >Every type of plastic used by LEGO (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 11:43:59</span
              ><span class="points-container"
                >Points: <span class="points">341</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37444268"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37443316">
          <h3>
            <a
              class="item"
              href="https://www.404media.co/meet-the-guy-preserving-the-new-history-of-pc-games-one-linux-port-at-a-time/"
              >A guy preserving the new history of PC games, one Linux port at a
              time</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 08:25:03</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37443316"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37442986">
          <h3>
            <a
              class="item"
              href="https://gregalder.com/yardposts/common-garden-weeds-in-southern-california/"
              >Common garden weeds in Southern California</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-09 @ 07:14:07</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37442986"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37440696">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/obituaries/2023/09/08/dennis-austin-software-developer-powerpoint-dies/"
              >Dennis Austin, developer of PowerPoint, has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-08 @ 23:45:55</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37440696"
                  >Comments</a
                ><span class="descendants">: 153</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37433784">
          <h3>
            <a
              class="item"
              href="https://daily.jstor.org/a-teen-celebrity-in-1804/"
              >A Teen Celebrity in 1804</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-08 @ 14:15:01</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37433784"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37433126">
          <h3>
            <a
              class="item"
              href="https://www.themarginalian.org/2016/01/11/what-is-an-emotion-william-james/"
              >What is an emotion? William Jamesâ€™s theory of how our bodies
              affect our feelings</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-08 @ 13:21:17</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37433126"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37431588">
          <h3>
            <a
              class="item"
              href="https://underjord.io/unpacking-elixir-realtime-latency.html"
              >Unpacking Elixir: Real-Time and Latency</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-08 @ 09:47:29</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37431588"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37431541">
          <h3>
            <a
              class="item"
              href="https://richard.hulse.nz/2023/09/08/digital-strategy-at-rnz-2005-2016-part-four/"
              >Digital Strategy at Radio New Zealand, 2005-2016, Part Four</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-08 @ 09:39:47</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37431541"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37431496">
          <h3>
            <a
              class="item"
              href="https://www.smartermarx.com/t/chromostereopsis/650"
              >Chromostereopsis</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-08 @ 09:33:07</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37431496"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37430857">
          <h3>
            <a
              class="item"
              href="https://seths.blog/2023/09/the-leguin-precepts/"
              >The Le Guin Precepts</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-08 @ 08:02:30</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37430857"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37428491">
          <h3>
            <a
              class="item"
              href="https://www.macstories.net/stories/i-used-a-game-boy-camera-for-facetime-video-calls-in-ipados-17-and-it-was-glorious/"
              >I used a Game Boy camera for Facetime video calls in iPadOS 17</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-08 @ 02:26:44</span
              ><span class="points-container"
                >Points: <span class="points">327</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37428491"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37419739">
          <h3>
            <a
              class="item"
              href="https://neurosciencenews.com/sequential-memory-human-trait-23888/"
              >A test of memory for stimulus sequences in great apes</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-07 @ 14:50:54</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37419739"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37418944">
          <h3>
            <a class="item" href="https://i2-camera.polaroid.com"
              >The new Polaroid I-2 instant camera</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-07 @ 13:53:46</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37418944"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
