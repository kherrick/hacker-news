<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41231731">
          <h3>
            <a
              class="item"
              href="https://www.cnn.com/2024/08/10/business/brands-avoid-term-customers/index.html"
              >Brands should avoid the term 'AI'. It's turning off customers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 02:53:59</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41231731"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41231145">
          <h3>
            <a
              class="item"
              href="https://osintteam.blog/mastering-osint-how-to-find-information-on-anyone-680e4086f17f"
              >Mastering Osint: How to Find Information on Anyone</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 01:03:36</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41231145"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41231141">
          <h3>
            <a
              class="item"
              href="http://radio-weblogs.com/0100490/2003/01/28.html"
              >0xCAFEBABE &amp;amp; 0xFEEDFACE</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 01:03:12</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41231141"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41230794">
          <h3>
            <a
              class="item"
              href="https://www.blacksmith.sh/blog/faster-docker-builds-using-a-remote-buildkit-instance"
              >Faster Docker builds using a remote BuildKit instance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 00:11:04</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41230794"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41230344">
          <h3>
            <a class="item" href="https://github.com/judofyr/spice"
              >Spice: Fine-grained parallelism with sub-nanosecond overhead in
              Zig</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 23:01:37</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41230344"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41230169">
          <h3>
            <a
              class="item"
              href="https://begriffs.com/posts/2018-03-20-user-defined-order.html"
              >User-defined Order in SQL (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 22:40:53</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41230169"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41229328">
          <h3>
            <a
              class="item"
              href="https://frest.substack.com/p/distributed-relational"
              >Distributed == Relational</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 21:08:15</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41229328"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41229049">
          <h3>
            <a
              class="item"
              href="https://www.flyingmag.com/modern/nasa-investigation-finds-boeing-hindering-americans-return-to-moon/"
              >NASA investigation finds Boeing hindering Americans' return to
              moon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 20:38:27</span
              ><span class="points-container"
                >Points: <span class="points">212</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41229049"
                  >Comments</a
                ><span class="descendants">: 154</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41228935">
          <h3>
            <a class="item" href="https://trieve.ai/history-of-hnsearch/"
              >History of Hacker News Search from 2007 to 2024</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 20:27:27</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41228935"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41228630">
          <h3>
            <a
              class="item"
              href="https://www.eff.org/deeplinks/2024/08/federal-appeals-court-finds-geofence-warrants-are-categorically-unconstitutional"
              >Federal appeals court finds geofence warrants "categorically"
              unconstitutional</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 19:57:57</span
              ><span class="points-container"
                >Points: <span class="points">389</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41228630"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41228579">
          <h3>
            <a class="item" href="https://www.tp-link.com/us/support/gpl-code/"
              >TP-Link GPL Code Center</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 19:53:19</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41228579"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41228113">
          <h3>
            <a class="item" href="https://github.com/hacking-support/DVUEFI"
              >Damn Vulnerable UEFI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 19:04:16</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41228113"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41227369">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41227369"
              >Launch HN: Synnax (YC S24) – Unified hardware control and sensor
              data streaming</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 17:55:07</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41227369"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.synnaxlabs.com">https://www.synnaxlabs.com</a
              >). With Synnax, engineers connect to their sensors and actuators,
              stream telemetry for control and post-processing, and query
              historical data for analysis. Hardware teams use our platform in
              areas ranging from firing rocket engines to operating
              manufacturing lines. Here’s a video:
              <a href="https://youtu.be/OJtVBfRwooA"
                >https://youtu.be/OJtVBfRwooA</a
              >.
              <p>
                Software developers on hardware teams don’t usually have
                infrastructure to build their custom software on. They have to
                work with dozens of data acquisition devices to get data into a
                single database. Oftentimes, they have to use several different
                solutions to communicate with different devices: LabVIEW for
                National Instruments hardware, ROS for robotics, and SCADA
                software for PLCs.
              </p>
              <p>
                There’s no good “glue” that lets you coordinate all of these
                devices together. Developers end up using tools like Apache
                Kafka for streaming and InfluxDB for storage, but these tools
                are hard to get working with hardware, plus it’s a pain to
                configure these tools to also record and stream data whenever
                commands are sent to control hardware.
              </p>
              <p>
                This forces developers to repeatedly build adapters to get data
                off hardware devices and manage separate systems for real-time
                streaming, data storage, and hardware control.
              </p>
              <p>
                I (Emiliano) discovered this problem while working as a test
                engineer at an aerospace company. We used old control software
                that spit out data in massive 10 GB CSV or TDMS files. After a
                long day and night of testing, no one wanted to go through all
                the work to review the data.
              </p>
              <p>
                One day, I was operating the system, and a very expensive
                component failed, causing a multi-million dollar test stand to
                explode. After many days of data review, we found a small
                anomaly that indicated a component defect.
              </p>
              <p>
                I then got fascinated by this problem, and moved into a software
                engineering role to improve their data pipeline. After I left
                this job and went back to school, I spent most of my time
                skipping classes to build Synnax, eventually meeting Patrick and
                Elham.
              </p>
              <p>
                Synnax has several main parts. We have a custom time
                series-database that was designed to be horizontally scalable
                and fault-tolerant. The database can deploy in an OS or in a
                container. Every sensor and actuator can fit into a “channel”
                that can be written to using our client libraries in C++,
                Python, and TypeScript.
              </p>
              <p>
                When writing to a channel the server both persists it to the
                database and streams it for real-time consumption for any type
                of service, such as a GUI, automated post-processing tools, and
                supervisory control sequences.
              </p>
              <p>
                Finally, we’ve built a React component library that simplifies
                the process of making a GUI, a visualization and control desktop
                application, and pre-built device integrations for National
                Instruments hardware and PLCs via OPC UA.
              </p>
              <p>
                We think Synnax is unique in that it provides a bridge between
                existing solutions like ROS, LabVIEW, and SCADA software and
                general purpose tools like Apache Kafka or InfluxDB.
              </p>
              <p>
                Synnax is source-available on a BSL 1.1 license (GitHub:
                <a href="https://github.com/synnaxlabs/synnax"
                  >https://github.com/synnaxlabs/synnax</a
                >, documentation:
                <a href="https://docs.synnaxlabs.com"
                  >https://docs.synnaxlabs.com</a
                >). Usage of the software is free for up to 50 channels. We
                aren’t yet sure on what pricing to settle on—we’ve talked about
                doing only usage-based implementation or also adding an
                implementation cost.
              </p>
              <p>
                If this sounds interesting to you, please check us out! You can
                follow through on our documentation website (<a
                  href="https://docs.synnaxlabs.com"
                  >https://docs.synnaxlabs.com</a
                >) to deploy a database and download the desktop visualization
                dashboard.
              </p>
              <p>
                We’d really love to hear your feedback and look forward to all
                of the comments!
              </p>
            </div>
          </section>
        </section>
        <section id="41227350">
          <h3>
            <a class="item" href="https://github.com/mawise/bookshelf"
              >Show HN: I built an animated 3D bookshelf for ebooks</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 17:53:36</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41227350"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41226802">
          <h3>
            <a
              class="item"
              href="https://docs.fcc.gov/public/attachments/DA-24-776A1.txt"
              >FCC seek comments on NextNav petition for rulemaking on lower
              900MHz ISM band</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 17:08:12</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41226802"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41226700">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/prohostai/jobs/E50Yl4C-founding-engineer"
              >ProhostAI (YC S24) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 17:01:11</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41226039">
          <h3>
            <a class="item" href="https://comment.org/repair-and-remain/"
              >Repair and Remain (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 16:06:42</span
              ><span class="points-container"
                >Points: <span class="points">453</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41226039"
                  >Comments</a
                ><span class="descendants">: 180</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41224853">
          <h3>
            <a
              class="item"
              href="https://news.patreon.com/articles/understanding-apple-requirements-for-patreon"
              >Apple's requirements are about to hit creators and fans on
              Patreon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 14:34:46</span
              ><span class="points-container"
                >Points: <span class="points">796</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41224853"
                  >Comments</a
                ><span class="descendants">: 711</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41224286">
          <h3>
            <a class="item" href="https://supabase.com/blog/postgres-new"
              >Postgres.new: In-browser Postgres with an AI interface</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 13:43:30</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41224286"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
            <div class="text">
              <p>
                This is a new service that we're experimenting with that uses
                PGLite[0], a WASM build of Postgres that runs in the browser.
                You might remember an earlier WASM build[1] that was around
                ~30MB. The Electric team [2] have gone one step further and
                created a complete build of Postgres that’s under 3MB.
              </p>
              <p>
                Their implementation is technically interesting. Postgres is
                normally multi-process - each client connection is handed to a
                child process by the postmaster process. In WASM there’s
                limited/no support for process forking and threads. Fortunately,
                Postgres has a relatively unknown built-in “single user mode”
                [3] primarily designed for bootstrapping a new database and
                disaster recovery. Single-user mode only supports a minimal
                cancel REPL, so PGlite adds wire-protocol support which enables
                parametrised queries etc.
              </p>
              <p>
                We have created
                <a href="https://postgres.new">https://postgres.new</a> as an
                experiment. You can think of it like a love-child between
                Postgres and ChatGPT: in-browser Postgres sandbox with AI
                assistance. You can spin up as many new Postgres databases as
                you want because they all live inside your browser. We pair
                PGlite with an LLM (currently GPT-4o) and give it full reign
                over the database with unrestricted permissions. This is an
                important detail - giving an LLM full autonomy means that it can
                run multiple operations back-to-back: any SQL errors from
                Postgres are fed back to the language model so that it can have
                a few more attempts to solve the problem. Since it’s in-browser
                it’s low risk.
              </p>
              <p>Some other features include:</p>
              <p></p>
              <pre><code>    - CSV upload: you can upload a CSV and it will automatically create a Postgres table which you can query with natural language.

    - Charts: you can ask the LLM to create a chart with the data and change the colors of the charts.

    - RAG / pgvector: PGLite supports pgvector, so you can ask the LLM to create embeddings for RAG. The site uses transformers.js [4] to create embeddings inside the browser.
</code></pre>
              We’re working on an update to deploy your databases and serve them
              from S3 using pg-gateway [5]. We expect to have a read-only
              deployments ready by the end of the week. You can access them
              using any postgres-compatible tool (eg: psql).
              <p>
                Everything is open source. A huge shout-out to the Electric team
                who have been a pleasure to build with.
              </p>
              <p>
                [0] PGLite:
                <a href="https://github.com/electric-sql/pglite"
                  >https://github.com/electric-sql/pglite</a
                >
              </p>
              <p>
                [1] Postgres-wasm:
                <a href="https://supabase.com/blog/postgres-wasm"
                  >https://supabase.com/blog/postgres-wasm</a
                >
              </p>
              <p>
                [2] Electric:
                <a href="https://electric-sql.com/"
                  >https://electric-sql.com/</a
                >
              </p>
              <p>
                [3] Single user mode:
                <a
                  href="https://www.postgresql.org/docs/current/app-postgres.html#APP-POSTGRES-SINGLE-USER"
                  >https://www.postgresql.org/docs/current/app-postgres.html#AP...</a
                >
              </p>
              <p>
                [4] transformers.js:
                <a href="https://github.com/xenova/transformers.js"
                  >https://github.com/xenova/transformers.js</a
                >
              </p>
              <p>
                [5] pg-gateway:
                <a href="https://github.com/supabase-community/pg-gateway"
                  >https://github.com/supabase-community/pg-gateway</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41224225">
          <h3>
            <a class="item" href="https://qntm.org/scp"
              >There Is No Antimemetics Division (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 13:37:42</span
              ><span class="points-container"
                >Points: <span class="points">538</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41224225"
                  >Comments</a
                ><span class="descendants">: 188</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41223934">
          <h3>
            <a
              class="item"
              href="https://alexplescan.com/posts/2024/08/10/wezterm/"
              >Okay, I Like WezTerm</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 13:02:31</span
              ><span class="points-container"
                >Points: <span class="points">410</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41223934"
                  >Comments</a
                ><span class="descendants">: 223</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41223902">
          <h3>
            <a
              class="item"
              href="https://www.maragu.dev/blog/go-is-my-hammer-and-everything-is-a-nail"
              >Go is my hammer, and everything is a nail</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 12:59:34</span
              ><span class="points-container"
                >Points: <span class="points">241</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41223902"
                  >Comments</a
                ><span class="descendants">: 366</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41215626">
          <h3>
            <a
              class="item"
              href="https://petapixel.com/2024/08/06/a-camera-that-shoots-40000-fps-decided-the-100-meter-sprint-final-olympics-paris-2024-omega/"
              >A camera that shoots 40k FPS decided the 100-meter sprint
              final</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-11 @ 12:11:22</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41215626"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41211091">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s44260-024-00014-y"
              >Antifragility in Complex Dynamical Systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-10 @ 17:50:14</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41211091"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41209900">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/infrared-laser-microphone-keystroke-surveillance/"
              >Open source laser microphone picks up laptop keystrokes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-10 @ 14:48:13</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41209900"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41206168">
          <h3>
            <a
              class="item"
              href="https://www.reviewjournal.com/business/tourism/invasion-of-privacy-hotel-room-inspections-confuse-hacker-convention-attendees-3121350/"
              >Room inspections at Resorts World confuse, annoy DEF CON
              attendees</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 23:15:19</span
              ><span class="points-container"
                >Points: <span class="points">200</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41206168"
                  >Comments</a
                ><span class="descendants">: 183</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41196582">
          <h3>
            <a
              class="item"
              href="https://blog.robertelder.org/gnu-coreutils-package-guide/"
              >Robert Elder's Guide to GNU Coreutils</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 21:37:28</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41196582"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41195805">
          <h3>
            <a
              class="item"
              href="https://www.enterpriseintegrationpatterns.com/ramblings/queues_flow_control.html"
              >Queues invert control flow but require flow control</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 20:22:52</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41195805"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41195492">
          <h3>
            <a
              class="item"
              href="https://www.the-tls.co.uk/literature-by-region/british-literature/william-morris-ingrid-hanson-marcus-waithe/"
              >Making earthly paradise: The art and crafts of William Morris</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 19:51:53</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41195492"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41191175">
          <h3>
            <a
              class="item"
              href="https://jakearchibald.com/2024/video-with-transparency/"
              >Video with Alpha Transparency on the Web</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 13:16:50</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41191175"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
