<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42454405">
          <h3>
            <a class="item" href="https://www.historylink.org/File/5136"
              >Windshield pitting incidents in Washington reach fever pitch on
              April 15, 1954 (2003)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 20:01:18</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42454405"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42453660">
          <h3>
            <a
              class="item"
              href="https://help.openai.com/en/articles/10193193-1-800-chatgpt-calling-and-messaging-chatgpt-with-your-phone"
              >1-800-ChatGPT</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 19:03:13</span
              ><span class="points-container"
                >Points: <span class="points">189</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42453660"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42453582">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-12-tasty-airy-goods-culinary-foam.html"
              >Tasty, airy baked goods with culinary foam made from peas</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 18:56:10</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42453582"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42453341">
          <h3>
            <a class="item" href="https://github.com/features/copilot"
              >GitHub Copilot is now available for free</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 18:29:55</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42453341"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42453126">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2024/12/18/github-launches-a-free-version-of-its-copilot/"
              >GitHub launches a free version of its Copilot</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 18:09:17</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42453126"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42452358">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/formally-modeling-dreidel-the-sequel/"
              >Formally Modeling Dreidel, the Sequel</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 17:05:24</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42452358"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42452315">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/hadrius/jobs/ObynDF9-founding-ui-ux-designer"
              >Hadrius (YC W23) Is Hiring a Founding UI/UX Designer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 17:00:23</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42452285">
          <h3>
            <a class="item" href="https://github.com/Neoteroi/BlackSheep"
              >BlackSheep: Fast ASGI web framework for Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 16:58:03</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42452285"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42451707">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42451707"
              >Launch HN: Innate (YC F24) – Home robots as easy to program as AI
              agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 16:09:56</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42451707"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
            <div class="text">
              <a href="https://innate.bot">https://innate.bot</a>). We build
              general-purpose home robots that you can teach new tasks to simply
              by demonstrating them.
              <p>
                Our system combines a robotic platform (we call the first one
                Maurice) with an AI agent that understands the environment,
                plans actions, and executes them using skills you've taught it
                or programmed within our SDK.
              </p>
              <p>
                If you’ve been building AI agents powered by LLMs before, and in
                particular Claude Computer use, this is how we intend the
                experience of building on it to be, but acting on the real
                world!
              </p>
              <p>
                You can see Maurice serving a glass here (<a
                  href="https://bit.ly/innate-hn-vid-serving"
                  >https://bit.ly/innate-hn-vid-serving</a
                >). Here is another example (<a
                  href="https://bit.ly/innate-hn-vid-officer"
                  >https://bit.ly/innate-hn-vid-officer</a
                >) in which it was given a digital ability (through the SDK) to
                send a notification to your phone, to use when it sees someone
                in the house. In both these cases, the only work you have to do
                is spend 30mn per physical skill to collect data to train the
                arm, and a couple minutes to write a system prompt.
              </p>
              <p>
                You can read more about how it works, about the paradigm we’re
                creating and find our Discord in our documentation (<a
                  href="https://docs.innate.bot"
                  >https://docs.innate.bot</a
                >). We’ll be open-sourcing parts of the system there soon.
              </p>
              <p>
                We want to lower the barrier to entry to robotics. Programming
                robots is usually complicated, time-consuming, and limited to
                experts even with AI helping you write code. We think it should
                be easier.
              </p>
              <p>
                We’re coming from an AI for robotics and HCI background as
                researchers at Stanford, and we’ve worked on multiple hardware +
                agentic AI projects this past year, but this one was clearly the
                most surprising one.
              </p>
              <p>
                The first time we put GPT-4 in a body - after a couple tweaks -
                we were surprised at how well it worked. The robot started
                moving around, figuring out when to use a tiny gripper, and we
                had only written 40 lines of python on a tiny RC car with an
                arm. We decided to combine that with recent advancements in
                robot imitation learning such as ALOHA to make the arm quickly
                teachable to do any task.
              </p>
              <p>
                We think it should be simple to teach robots to do tasks for us.
                AI agents offer a completely new paradigm for this, easy enough
                to help many non-roboticists start in the field, but still
                expandable enough to make a robot able to do very complex tasks.
              </p>
              <p>
                The part of it that excites us most is that for every builder
                teaching their robot to perform a task, every other robot learns
                faster and better. We believe that by spreading our platforms as
                much as possible, we could crowdsource massive and diverse
                datasets to make robotics foundations models that everyone
                contributes to.
              </p>
              <p>
                Under the hood, our brain (running in the cloud) uses 9
                different models and runs in the cloud. A YOLO, a SAM, and 7
                VLMs, from OpenAI, Google, Anthropic, and most importantly a
                couple Llamas running on groq to make the system think and act
                faster. Each model has a responsibility. Together, they act as
                if it was only one model with ability to navigate, talk,
                memorize and activate skills. As a bonus, since these models
                keep getting better and smaller, every new release gets our
                robots smarter and faster!
              </p>
              <p>
                Our first robot Maurice is 25cm-high, has a 5DoF arm, a Jetson
                Orin Nano onboard, and comes equipped with our software
                installed and a mobile app to control it. Our first batch of
                users wants to teach it to clean floors, tidy up after kids,
                wake them up in the morning, play with them, or be a
                professional assistant connected to emails and socials. You can
                go wild quickly!
              </p>
              <p>
                We’re making a small batch available for HackerNews at $2,000
                each for early builders who want to experiment, with $50 free of
                agent per month for a year. You can book one on our website with
                a (refundable) deposit if you’re in the US. These units will
                start shipping in March - the first 10 were booked already for
                February.
              </p>
              <p>
                We’d love your thoughts, experiences, and critiques. If you have
                ideas on what you’d use a home robot for, or feedback on how to
                make these systems more accessible, we’re hanging around for the
                coming hours in the comments. Let us know what you think!
              </p>
            </div>
          </section>
        </section>
        <section id="42451447">
          <h3>
            <a class="item" href="https://www.getzipshare.com"
              >Show HN: Zipshare – one-step Android screen sharing for support
              teams</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 15:50:50</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42451447"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                I work as an Android developer at a large retailer, on the app
                that the in-store employees use to see their schedules, view
                product details, get support, etc. Part of our engineering
                on-call rotation involves helping these in-store employees with
                any app issues they may encounter. There are always a few times
                every rotation where I know solving someone's problem would be
                way easier if I could just see their screen as if I were
                in-store with them.
              </p>
              <p>
                However, many of these employees are non-technical and wouldn't
                want to go through the onboarding of TeamViewer or Zoom, are
                under time constraints in a busy store, or (understandably) just
                wouldn't know how to get set up.
              </p>
              <p>
                As a side project over the past few weekends, I've been building
                an Android screen sharing tool called Zipshare (<a
                  href="https://www.getzipshare.com"
                  >https://www.getzipshare.com</a
                >, demo video:
                <a href="https://www.youtube.com/watch?v=Iuc3HBIuMZE"
                  >https://www.youtube.com/watch?v=Iuc3HBIuMZE</a
                >) that aims to be absolutely as easy as possible to use for the
                person sharing their screen. All the sharer needs to do is
                receive an email (or eventually a text) on their Android device
                and click a link. They will be sent to the Play Store, and upon
                launching the app, will automatically be sent to their session.
                Users don't need to create an account or enter a meeting code -
                there's literally one screen in the app ("xyz@abc.com invited
                you to share your screen, would you like to?") In fact, I
                originally wanted to use Play Store Instant Apps to eliminate
                the installation step entirely, but you can't open a raw socket
                from an Instant App, which I currently depend on... [1]
              </p>
              <p>
                You can try the live demo by entering your email address and
                waiting on the next page, while clicking the link you receive on
                an Android device. Allow the screen share and you'll see it
                appear in your browser on the first device. When this is more
                built out, support agents will be able to sign in to their
                account and click a button to generate a new link/send it out. I
                also want to integrate with platforms like ServiceNow,
                PagerDuty, and Zendesk to allow generating screen sharing
                sessions directly from tickets.
              </p>
              <p>
                I focused on Android for this initial version because the wide
                variety of devices makes giving support more difficult than on
                iOS, and because I have way more experience with Android :)
              </p>
              <p>
                Other features I want to include are automatic notification
                suppression while sharing (for privacy), an "instant
                connectivity check" that reports basic system state to the agent
                like cell/Wi-Fi signal strength and whether a VPN is enabled,
                and an annotation feature so that agents can draw attention to
                certain areas of the screen.
              </p>
              <p>
                My goal with Zipshare was to do one thing and make the
                experience as streamlined as possible. For example, there's no
                voice or video calling because chances are the two parties will
                already be on some other kind of call.
              </p>
              <p>Technical details:</p>
              <p>
                * Screen sharing: WebRTC with signaling provided by a
                self-hosted LiveKit server instance
              </p>
              <p>
                * Android side: Kotlin, Jetpack Compose, LiveKit SDK, Play Store
                Referrer API to route the session ID through to the app install,
                "classic" Android 3rd party libraries (OkHttp, Retrofit, KotlinX
                serialization, ...)
              </p>
              <p>
                * Website and API: Node.js, Express, two Pug templates, one CSS
                file, 50ish lines of JS excluding LiveKit, SQLite DB with one
                table.
              </p>
              <p>Design details:</p>
              <p>* Icon: Fiverr</p>
              <p>* Colors: ChatGPT</p>
              <p>* Landing page copy: The best I could come up with</p>
              <p>
                Please give it a try and let me know what you think! I am eager
                to test this on as many devices as possible, especially older or
                low-end devices. I built this because I wanted it, but would it
                be useful for you or your team? Any feature requests?
              </p>
              <p>
                [1]
                <a href="https://issuetracker.google.com/issues/191070661"
                  >https://issuetracker.google.com/issues/191070661</a
                >, naturally "Won't Fix", definitely something to hack around in
                the future
              </p>
              <p>
                (note: I was given the OK to repost this for a second chance)
              </p>
            </div>
          </section>
        </section>
        <section id="42451130">
          <h3>
            <a
              class="item"
              href="https://nypost.com/2024/12/18/business/us-could-ban-chinese-made-tp-link-routers-over-hacking-fears-report/"
              >US could ban TP-Link routers over hacking fears: report</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 15:19:46</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42451130"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42450963">
          <h3>
            <a class="item" href="https://github.com/brisklib/brisk"
              >Show HN: Brisk – Cross-Platform C++ GUI Framework: Declarative,
              Reactive, Fast</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 15:01:53</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42450963"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
            <div class="text">
              Brisk is an open-source C++ GUI framework with a declarative
              approach, offering powerful data bindings, GPU-accelerated
              graphics, and dynamic widget management. It supports macOS, Linux,
              Windows, and simplifies UI creation with modern paradigms and
              CSS-like layouts. Initially developed for a graphics-intensive
              project with a complex and dynamic GUI, the framework is currently
              under active development.
            </div>
          </section>
        </section>
        <section id="42450950">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2412.10270"
              >Cultural Evolution of Cooperation Among LLM Agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 15:00:52</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42450950"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42450413">
          <h3>
            <a
              class="item"
              href="https://www.uscis.gov/newsroom/news-releases/dhs-strengthens-h-1b-program-allowing-us-employers-to-more-quickly-fill-critical-jobs"
              >Updates to H-1B</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 13:54:05</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42450413"
                  >Comments</a
                ><span class="descendants">: 244</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42449602">
          <h3>
            <a
              class="item"
              href="https://www.cell.com/neuron/abstract/S0896-6273(24)00808-0?_returnURL=https%3A%2F%2Flinkinghub.elsevier.com%2Fretrieve%2Fpii%2FS0896627324008080%3Fshowall%3Dtrue"
              >The unbearable slowness of being: Why do we live at 10 bits/s?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 11:14:09</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42449602"
                  >Comments</a
                ><span class="descendants">: 227</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42449363">
          <h3>
            <a
              class="item"
              href="https://palant.info/2024/10/01/lies-damned-lies-and-impact-hero-refoorest-allcolibri/"
              >Lies, damned lies, and Impact Hero (refoorest, allcolibri)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 10:12:34</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42449363"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42448939">
          <h3>
            <a
              class="item"
              href="https://archaeologymag.com/2024/12/oldest-evidence-of-christianity-north-of-the-alps/"
              >Silver amulet is the oldest evidence of Christianity north of the
              Alps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 08:31:12</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42448939"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42448913">
          <h3>
            <a class="item" href="https://github.com/brenocq/implot3d"
              >Show HN: ImPlot3D – A 3D Plotting Library for Dear ImGui</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 08:24:12</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42448913"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42448184">
          <h3>
            <a class="item" href="http://www.extentofthejam.com/pseudo/"
              >Lou's Pseudo 3D Page (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 04:45:41</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42448184"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42447762">
          <h3>
            <a class="item" href="https://olivernguyen.io/w/namespace.error/"
              >How we centralized and structured error handling in Golang</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 03:04:42</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42447762"
                  >Comments</a
                ><span class="descendants">: 177</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42447071">
          <h3>
            <a class="item" href="https://github.com/ergochat/ergo"
              >Ergo Chat – A modern IRC server written in Go</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 00:46:19</span
              ><span class="points-container"
                >Points: <span class="points">253</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42447071"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42447053">
          <h3>
            <a class="item" href="https://lodev.org/cgtutor/xortexture.html"
              >The XOR Texture (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 00:43:24</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42447053"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42446846">
          <h3>
            <a
              class="item"
              href="https://byroot.github.io/ruby/json/2024/12/15/optimizing-ruby-json-part-1.html"
              >Optimizing Ruby's JSON, Part 1</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 00:08:52</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42446846"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42445328">
          <h3>
            <a
              class="item"
              href="https://www.cs.yale.edu/publications/techreports/tr1049.pdf"
              >Haskell vs. Ada vs. C++ vs. an Experiment in Prototyping
              Productivity (1994) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-17 @ 21:08:34</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42445328"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42443737">
          <h3>
            <a
              class="item"
              href="https://www.cambridge.org/core/journals/antiquity/article/darker-angels-of-our-nature-early-bronze-age-butchered-human-remains-from-charterhouse-warren-somerset-uk/93EBB135C857C7B7992FC80A4ED927AF"
              >Early Bronze Age Butchered Human Remains from Charterhouse
              Warren, Somerset, UK</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-17 @ 18:18:52</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42443737"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42443229">
          <h3><a class="item" href="https://ciechanow.ski/moon/">Moon</a></h3>
          <section>
            <h4>
              <span>2024-12-17 @ 17:26:26</span
              ><span class="points-container"
                >Points: <span class="points">2740</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42443229"
                  >Comments</a
                ><span class="descendants">: 231</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42442354">
          <h3>
            <a
              class="item"
              href="https://increase.com/articles/iso-8583-the-language-of-credit-cards"
              >ISO 8583: The language of credit cards</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-17 @ 15:53:52</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42442354"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42434331">
          <h3>
            <a
              class="item"
              href="https://dontvacuum.me/rocketflashrecovery/index.html"
              >Crashing rockets and recovering data from damaged flash chips</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-16 @ 19:20:49</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42434331"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42423282">
          <h3>
            <a
              class="item"
              href="https://www.ndss-symposium.org/ndss2024/keynote-meredith-whittaker/"
              >AI, Encryption, and the Sins of the 90s</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-15 @ 13:26:02</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42423282"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42418839">
          <h3>
            <a
              class="item"
              href="https://castle-engine.io/wp/2024/11/30/in-progress-web-target-ifc-mormot-sample/"
              >Castle Game Engine: In progress: web target, IFC, mORMot
              sample</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-14 @ 19:09:38</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42418839"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
