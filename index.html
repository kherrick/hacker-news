<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46166709">
          <h3>
            <a
              class="item"
              href="https://www.andrewoswald.com/docs/AdvertisingMicheletal2019EasterlinVolume.pdf"
              >Advertising as a major source of human dissatisfaction (2019)
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 20:18:34</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46166709"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46165513">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/business/spacex-in-talks-for-share-sale-that-would-boost-valuation-to-800-billion-b2852191"
              >SpaceX in Talks for Share Sale That Would Boost Valuation to
              $800B</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 18:49:07</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46165513"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46165251">
          <h3>
            <a class="item" href="https://github.com/serpapi/serpapi-mcp"
              >Show HN: SerpApi MCP Server</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 18:30:06</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46165251"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46165249">
          <h3>
            <a
              class="item"
              href="https://lightpanda.io/blog/posts/why-we-built-lightpanda-in-zig"
              >Why we built Lightpanda in Zig</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 18:29:50</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46165249"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46164952">
          <h3>
            <a
              class="item"
              href="https://commons.wikimedia.org/wiki/User:Spinster/WikiFlix"
              >WikiFlix: Full Movies Hosted on Wikimedia Commons</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 18:08:19</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46164952"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46164646">
          <h3>
            <a
              class="item"
              href="https://www.cell.com/cell/fulltext/S0092-8674(25)01256-5"
              >Shingles vaccination prevented or delayed dementia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 17:47:16</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46164646"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46163977">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46163977"
              >Onlook (YC W25) the Cursor for Designers Is Hiring a Founding
              Fullstack Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 17:00:10</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Since launching, Onlook hit #1 on Hacker News, was the #1
                trending repo on GitHub—above DeepSeek + Anthropic—and has
                earned over 23,000 GitHub stars. We’re looking to bring on
                Onlook’s first Founding Engineers.
              </p>
              <p>
                This role requires autonomy - you’ll be setting standards for
                one of the fastest-growing open source projects backed by YC
                ever. You’ll help design and build an uncompromising visual IDE
                loved by tens of thousands of designers and engineers around the
                world, and you'll have a heavy influence on the direction of
                where we take the company.
              </p>
              <p>
                You’re a full-stack engineer based in the U.S. who is ultra
                comfortable in Typescript, NextJS, React, and Tailwind, and
                ready to jump-in and build.
              </p>
              <p>The most important things we look for:</p>
              <p>
                • Olympic-level dedication – you want to be the best in the
                world at what you do.
              </p>
              <p>
                • Ownership – you like autonomy and control over the destiny of
                the company.
              </p>
              <p>
                • Speed – you’re comfortable shipping and iterating quickly with
                feedback.
              </p>
              <p>
                • Craft – you’re opinionated and are willing to defend your
                opinions.
              </p>
              <p>Ideally, you:</p>
              <p>• Are looking for a fast-paced, early startup environment.</p>
              <p>• Are willing to put in long hours and go the extra mile.</p>
              <p>
                • Are comfortable with any part of the stack, front-end,
                back-end, or database.
              </p>
              <p>
                • Believe in open source and are ok with your work being very
                public.
              </p>
              <p>
                The comp range for this role is $130k-200k, 1-5% equity, great
                healthcare + other perks, and an awesome office if you happen to
                be in SF. We're open to remote / hybrid candidates.
              </p>
              <p>
                If you’d like to stand out, please share a project or piece of
                work that you’re most proud of. We love seeing people’s work. If
                you have a personal website, please include that as well.
              </p>
              <p>
                If you're interested, email daniel@onlook.com with your Github /
                LinkedIn / Website or work samples and why you'd be a great
                addition to the team, or apply here:
                <a
                  href="https://www.ycombinator.com/companies/onlook/jobs/e4gHv1n-founding-engineer-fullstack"
                  >https://www.ycombinator.com/companies/onlook/jobs/e4gHv1n-fo...</a
                >
              </p>
              <p>Excited to meet, and build alongside you!</p>
            </div>
          </section>
        </section>
        <section id="46163804">
          <h3>
            <a
              class="item"
              href="https://www.macrumors.com/2025/12/05/openai-device-barred-from-io-name/"
              >Jony Ive's OpenAI Device Barred from Using 'Io' Name</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 16:48:44</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46163804"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46163671">
          <h3>
            <a
              class="item"
              href="https://tigerbeetle.com/blog/2025-10-25-synadia-and-tigerbeetle-pledge-512k-to-the-zig-software-foundation/"
              >Synadia and TigerBeetle Pledge $512,000 to the Zig Software
              Foundation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 16:38:30</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46163671"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46163609">
          <h3>
            <a
              class="item"
              href="https://corrode.dev/blog/defensive-programming/"
              >Patterns for Defensive Programming in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 16:34:25</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46163609"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46163377">
          <h3>
            <a class="item" href="https://zellij.dev"
              >Zellij: A terminal workspace with batteries included</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 16:18:58</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46163377"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46163308">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/developers/gemini-3-pro-vision/"
              >Gemini 3 Pro: the frontier of vision AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 16:15:10</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46163308"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46163121">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46163121"
              >I'm Peter Roberts, immigration attorney who does work for YC and
              startups. AMA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 16:04:20</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46163121"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
            <div class="text">
              <p>
                Previous threads we've done:
                https://news.ycombinator.com/submitted?id=proberts.
              </p>
            </div>
          </section>
        </section>
        <section id="46162872">
          <h3>
            <a
              class="item"
              href="https://www.notebookcheck.net/Framework-Laptop-13-gets-ARM-processor-with-12-cores-via-upgrade-kit.1177930.0.html"
              >Framework Laptop 13 gets ARM processor with 12 cores via upgrade
              kit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 15:49:56</span
              ><span class="points-container"
                >Points: <span class="points">230</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46162872"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46162656">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/5-december-2025-outage/"
              >Cloudflare outage on December 5, 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 15:35:43</span
              ><span class="points-container"
                >Points: <span class="points">389</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46162656"
                  >Comments</a
                ><span class="descendants">: 264</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46161125">
          <h3>
            <a
              class="item"
              href="https://www.lemonde.fr/en/environment/article/2025/12/03/influential-study-on-glyphosate-safety-retracted-25-years-after-publication_6748114_114.html"
              >Influential study on glyphosate safety retracted 25 years after
              publication</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 13:39:04</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46161125"
                  >Comments</a
                ><span class="descendants">: 191</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46160824">
          <h3>
            <a class="item" href="https://pbnj.sh/"
              >Show HN: Pbnj – A minimal, self-hosted pastebin you can deploy in
              60 seconds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 13:13:03</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46160824"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                When I wanted to self-host a pastebin, every option I found was
                too much. Git-based version control, OAuth, elaborate admin
                panels. I just wanted something I could deploy in under a minute
                with a CLI that actually works.
              </p>
              <p>So I built pbnj (yes, like the sandwich).</p>
              <p>What it is:</p>
              <p>
                - A minimal, beautiful pastebin with syntax highlighting for
                100+ languages
              </p>
              <p>
                - One-click deploy to Cloudflare (free tier gives you ~100,000
                pastes)
              </p>
              <p>- CLI-first: pbnj file.py → get a URL, copied to clipboard</p>
              <p>
                - Memorable URLs: crunchy-peanut-butter-sandwich instead of
                x7f9a2
              </p>
              <p>- Private pastes with optional secret keys</p>
              <p>- Web UI for when you're not in a terminal</p>
              <p>What it isn't:</p>
              <p>- No accounts, no OAuth, no git integration</p>
              <p>- No multi-user support (fork it and run your own)</p>
              <p>- No expiring pastes, no folders, no comments</p>
              <p>- Not trying to replace Gist or be a "platform"</p>
              <p>
                Why not just use Gist? Maybe you want to own your data. Maybe
                you enjoy self-hosting things. Or maybe you're a little autistic
                like me and just like having your own stuff.
              </p>
              <p>
                Live demo: <a href="https://pbnj.sh">https://pbnj.sh</a> GitHub:
                <a href="https://github.com/bhavnicksm/pbnj"
                  >https://github.com/bhavnicksm/pbnj</a
                >
                CLI: npm install -g @pbnjs/cli
              </p>
              <p>
                If this scratches an itch for you, I'd appreciate a star on
                GitHub. Happy to answer any questions!
              </p>
            </div>
          </section>
        </section>
        <section id="46160773">
          <h3>
            <a
              class="item"
              href="https://blog.joeschrag.com/2023/11/most-technical-problems-are-really.html"
              >Most technical problems are people problems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 13:07:59</span
              ><span class="points-container"
                >Points: <span class="points">244</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46160773"
                  >Comments</a
                ><span class="descendants">: 211</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46160698">
          <h3>
            <a class="item" href="https://matduggan.com/making-rss-more-fun/"
              >Making RSS More Fun</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 13:00:28</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46160698"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46160315">
          <h3>
            <a
              class="item"
              href="https://about.netflix.com/en/news/netflix-to-acquire-warner-bros"
              >Netflix to Acquire Warner Bros</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 12:21:19</span
              ><span class="points-container"
                >Points: <span class="points">1185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46160315"
                  >Comments</a
                ><span class="descendants">: 973</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46157594">
          <h3>
            <a
              class="item"
              href="https://blog.ui.com/article/introducing-unifi-5g"
              >UniFi 5G</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 07:06:38</span
              ><span class="points-container"
                >Points: <span class="points">319</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46157594"
                  >Comments</a
                ><span class="descendants">: 257</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46155619">
          <h3>
            <a
              class="item"
              href="https://evclinic.eu/2025/12/04/2021-phev-bmw-ibmucp-21f37e-post-crash-recovery-when-eu-engineering-becomes-a-synonym-for-unrepairable-generating-waste/"
              >BMW PHEV: Safety fuse replacement is extremely expensive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 01:05:57</span
              ><span class="points-container"
                >Points: <span class="points">399</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46155619"
                  >Comments</a
                ><span class="descendants">: 442</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46155135">
          <h3>
            <a
              class="item"
              href="https://netflixtechblog.com/av1-now-powering-30-of-netflix-streaming-02f592242d80"
              >Netflix’s AV1 Journey: From Android to TVs and Beyond</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 00:09:57</span
              ><span class="points-container"
                >Points: <span class="points">476</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46155135"
                  >Comments</a
                ><span class="descendants">: 251</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46151299">
          <h3>
            <a
              class="item"
              href="https://resobscura.substack.com/p/why-i-have-been-writing-a-niche-history"
              >I have been writing a niche history blog for 15 years</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-04 @ 18:49:20</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46151299"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46130260">
          <h3>
            <a
              class="item"
              href="https://hackclub.com/fiscal-sponsorship/mobile/"
              >Show HN: HCB Mobile – financial app built by 17 y/o, processing
              $6M/month</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-03 @ 04:20:44</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46130260"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text">
              <p>
                One of my biggest challenges, while juggling being a full-time
                student, was getting permission from Apple/Google to use
                advanced native features such as Tap to Pay (for in-person
                donations) and Push Provisioning (for adding your card to your
                digital wallet). It was months of back-and-forth emails, test
                case recordings, and also compliance checks.
              </p>
              <p>
                Even after securing Apple/Google’s permission, any minor fix
                required publishing a new build, which was time-consuming. After
                dealing with this for a while, I adopted the idea of “over the
                air updates” using Expo’s EAS update service. This allowed me to
                remotely trigger updates without needing a new app build.
              </p>
              <p>
                The 250 hours I spent building this app were an INSANE learning
                experience, but it was also a whole lot of fun. Give the app a
                try, and I’d love any feedback you have on it!
              </p>
              <p>
                btw, back in March, we open-sourced this nonprofit neobank on
                GitHub.
                <a href="https://news.ycombinator.com/item?id=43519802"
                  >https://news.ycombinator.com/item?id=43519802</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46118986">
          <h3>
            <a
              class="item"
              href="https://theamericanscholar.org/compassionate-curmudgeon/"
              >Compassionate Curmudgeon: Why we must root ourselves in the real
              world</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-02 @ 08:33:52</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46118986"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46115758">
          <h3>
            <a class="item" href="https://nim-lang.org/araq/nimony.html"
              >Nimony (Nim 3.0) Design Principles</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-02 @ 00:39:41</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46115758"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46106411">
          <h3>
            <a
              class="item"
              href="https://www.morling.dev/blog/on-idempotency-keys/"
              >Idempotency Keys for Exactly-Once Processing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-01 @ 12:07:33</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46106411"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46102546">
          <h3>
            <a
              class="item"
              href="https://pointersgonewild.com/2025-11-29-building-a-copying-gc-for-the-plush-programming-language/"
              >Building a Copying GC for the Plush Programming Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-01 @ 01:48:15</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46102546"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46089444">
          <h3>
            <a
              class="item"
              href="https://news.artnet.com/art-world/huge-jerash-jordan-pompeii-middle-easy-2708480"
              >The Forgotten Roman Ruins of the ‘Pompeii of the Middle East’</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-29 @ 18:02:55</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46089444"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
