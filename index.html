<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44070042">
          <h3>
            <a
              class="item"
              href="https://twitter.com/ID_AA_Carmack/status/1925710474366034326"
              >John Carmack at Upper Bound 2025 (slides and notes)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 05:14:16</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44070042"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44069923">
          <h3>
            <a
              class="item"
              href="https://www.ibm.com/quantum/blog/lockheed-martin-sqd"
              >Lockheed Martin and IBM combine quantum computing with HPC in new
              research</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 04:46:37</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44069923"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44069540">
          <h3>
            <a class="item" href="https://getcreatr.com/"
              >Like Lovable but can make apps with gen-AI powered back ends</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 03:15:30</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44069540"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44069304">
          <h3>
            <a
              class="item"
              href="https://jhellerstein.github.io/blog/crdt-turtles/"
              >CRDTs #2: Turtles All the Way Down</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 02:29:28</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44069304"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44069289">
          <h3>
            <a class="item" href="https://chrispenner.ca/posts/interview"
              >Silly job interview questions in Haskell</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 02:27:27</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44069289"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44068400">
          <h3>
            <a class="item" href="https://lwn.net/Articles/1020571/"
              >The Future of Flatpak</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 23:51:20</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44068400"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44068204">
          <h3>
            <a
              class="item"
              href="https://www.inkandswitch.com/ink/notes/sketchy-calendar/"
              >Sketchy Calendar</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 23:19:36</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44068204"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44068197">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/bellmac-32-ieee-milestone"
              >32 bits that changed microprocessor design</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 23:18:22</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44068197"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44067767">
          <h3>
            <a
              class="item"
              href="https://modernagejournal.com/secret-mall-apartment-a-protest-for-place/251023/"
              >“Secret Mall Apartment,” a Protest for Place</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 22:20:00</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44067767"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44067409">
          <h3>
            <a class="item" href="https://github.com/kepano/defuddle"
              >Show HN: Defuddle, an HTML-to-Markdown alternative to
              Readability</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 21:40:54</span
              ><span class="points-container"
                >Points: <span class="points">220</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44067409"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built Defuddle while working on Obsidian Web Clipper[1] (also
                MIT-licensed) because Mozilla's Readability[2] appears to be
                mostly abandoned, and didn't work well for many sites.
              </p>
              <p>
                It's still very much a work in progress, but I thought I'd share
                it today, in light of the announcement that Mozilla is shutting
                down Pocket. This library could be helpful to anyone building a
                read-it-later app.
              </p>
              <p>Defuddle is also available as a CLI:</p>
              <p>
                <a href="https://github.com/kepano/defuddle-cli"
                  >https://github.com/kepano/defuddle-cli</a
                >
              </p>
              <p>
                [1]
                <a href="https://github.com/obsidianmd/obsidian-clipper"
                  >https://github.com/obsidianmd/obsidian-clipper</a
                >
              </p>
              <p>
                [2]
                <a href="https://github.com/mozilla/readability"
                  >https://github.com/mozilla/readability</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44066713">
          <h3>
            <a
              class="item"
              href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=1430463"
              >Trade Secrecy in Willy Wonka's Chocolate Factory (2009)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 20:41:14</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44066713"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44065680">
          <h3>
            <a class="item" href="https://saile.it/1145-pull-requests-per-day/"
              >1,145 pull requests per day</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 19:16:30</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44065680"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44065458">
          <h3>
            <a
              class="item"
              href="http://physics.stackexchange.com/questions/121830/does-earth-really-have-two-high-tide-bulges-on-opposite-sides"
              >Does Earth have two high-tide bulges on opposite sides? (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 18:58:25</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44065458"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44065094">
          <h3>
            <a
              class="item"
              href="https://izbicki.me/blog/how-to-cheat-at-settlers-of-catan-by-loading-the-dice-and-prove-it-with-p-values.html"
              >How to cheat at settlers by loading the dice (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 18:25:07</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44065094"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44064875">
          <h3>
            <a
              class="item"
              href="https://pythonspeed.com/articles/pydantic-json-memory/"
              >Loading Pydantic models from JSON without running out of
              memory</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 18:06:37</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44064875"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44064230">
          <h3>
            <a
              class="item"
              href="https://blog.glitch.com/post/changes-are-coming-to-glitch/"
              >We’ll be ending web hosting for your apps on Glitch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 17:16:25</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44064230"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44063703">
          <h3>
            <a class="item" href="https://www.anthropic.com/news/claude-4"
              >Claude 4</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 16:34:42</span
              ><span class="points-container"
                >Points: <span class="points">1664</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44063703"
                  >Comments</a
                ><span class="descendants">: 926</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44063662">
          <h3>
            <a
              class="item"
              href="https://support.mozilla.org/en-US/kb/future-of-pocket"
              >Mozilla to shut down Pocket and Fakespot</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 16:30:18</span
              ><span class="points-container"
                >Points: <span class="points">905</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44063662"
                  >Comments</a
                ><span class="descendants">: 559</span></span
              >
            </h4>
            <div class="text">
              <a href="https://blog.mozilla.org/en/mozilla/building-whats-next/"
                >https://blog.mozilla.org/en/mozilla/building-whats-next/</a
              >.
            </div>
          </section>
        </section>
        <section id="44063248">
          <h3>
            <a class="item" href="https://chriskw.xyz/2025/05/21/Fractal/"
              >That fractal that's been up on my wall for years</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 15:50:16</span
              ><span class="points-container"
                >Points: <span class="points">372</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44063248"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44063000">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44063000"
              >Launch HN: WorkDone (YC X25) – AI Audit of Medical Charts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 15:23:40</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44063000"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.wrkdn.com/">https://www.wrkdn.com/</a>). In
              one sentence: we built an AI product that audits medical
              documentation in real time to catch and fix errors before they
              turn into treatment mistakes or denied insurance claims.
              <p>
                We got interested in this problem when we saw how often small
                documentation slip-ups can snowball into huge financial, legal,
                and even life-threatening outcomes. Sometimes it’s just a
                mistyped medication time or a missing discharge note - basic
                stuff - but when you’re dealing with claims and regulatory
                rules, a minor error can trigger an automatic denial. Wrong
                copy-pasting on a discharge note will be uncovered by the
                insurance provider and will cost stressful appeal. By the time
                an overworked clinical or compliance team discovers it, it’s
                usually too late to just fix it. Our own experiences hit close
                to home: Dmitry’s family member faced grave consequences from a
                misread lab result, and Sergey comes from a full medical family
                that’s battled these issues up close.
              </p>
              <p>
                Here’s our demo if you’d be interested to take a look -
                <a
                  href="https://www.loom.com/share/add16021bb29432eba7f3254dd5e9a75"
                  >https://www.loom.com/share/add16021bb29432eba7f3254dd5e9a75</a
                >
              </p>
              <p>
                Our solution is a set of AI agents that plug directly into a
                clinic or hospital EHR/EMR system. As clinicians go about their
                daily routines, WorkDone continuously monitors the records. If
                it spots something that looks off-like a missing signature or a
                suspicious timestamp- it asks the responsible staff member to
                double-check and correct it on the spot. We want to prevent
                errors from becoming big headaches and wasted hours down the
                road. Technically, this involves running a secure event listener
                on top of EHR APIs and applying a group of coordinated AI agents
                that’s been loaded with clinical protocols, payor rules, and
                finetuned on historical claim denials and regulatory guidelines.
                The moment the model flags a potential error, an agent nudges
                the user to clarify or confirm. If it’s a genuine mistake, we
                request correction approval from the provider and fix it right
                away and store an audit trail for compliance. We are extending
                the approach to finding conflicting medication or prescribed
                treatments.
              </p>
              <p>
                What’s different about our approach from AI tools for hospital
                revenue management is this focus on near-real-time intervention.
                Most tools detect errors after the claim has already been
                submitted, so compliance teams end up firefighting. We think the
                best place to fix something is in the flow of work itself. One
                common question about the use of AI in the medical/health field
                is: what if the AI hallucinates or gets something wrong? In our
                case, since the tool is flagging possible errors and its primary
                effect is to get extra human review, there’s no impact on
                anything health-critical like treatments. Rather the risk is
                that too many false positives could waste staff members’
                valuable time. For pilots, we are starting with read-only mode
                in which we use API only to retrieve the data, and we are able
                to see that the QA we built into the agent orchestration layer
                does a pretty good job for spotting common documentation
                mistakes even in lengthy charts (for instance, multi-day
                hospital stay).
              </p>
              <p>
                We’re in the early stages of refining our system, and we’d love
                feedback from the community. If you have ideas on integrating
                with EHRs, experiences with compliance tools, or just general
                insights about working in healthcare environments, we’re all
                ears. We’re also on the lookout for early users - particularly
                rehabs, small clinics and hospitals - willing to give our AI a
                try and tell us where it needs improvement.
              </p>
              <p>Thanks for reading, and let us know what you think!</p>
            </div>
          </section>
        </section>
        <section id="44062227">
          <h3>
            <a
              class="item"
              href="https://nexo.sh/posts/why-i-built-a-native-mp3-player-in-swiftui/"
              >I Built My Own Audio Player</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 14:09:25</span
              ><span class="points-container"
                >Points: <span class="points">206</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44062227"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44062160">
          <h3>
            <a
              class="item"
              href="https://railsatscale.com/2025-05-21-fast-allocations-in-ruby-3-5/"
              >Fast Allocations in Ruby 3.5</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 14:01:55</span
              ><span class="points-container"
                >Points: <span class="points">207</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44062160"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44061836">
          <h3>
            <a class="item" href="https://github.com/sqliteai/sqlite-js"
              >Show HN: SQLite JavaScript - extend your database with
              JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 13:25:33</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44061836"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44061160">
          <h3>
            <a
              class="item"
              href="https://ohadravid.github.io/posts/2025-05-rav1d-faster/"
              >Improving performance of rav1d video decoder</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 11:59:03</span
              ><span class="points-container"
                >Points: <span class="points">270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44061160"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44060156">
          <h3>
            <a
              class="item"
              href="https://www.ianvisits.co.uk/articles/ancient-law-requires-a-bale-of-hay-to-hang-from-charing-cross-rail-bridge-81318/"
              >Ancient law requires a bale of straw to hang from Charing Cross
              rail bridge</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 08:52:17</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44060156"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44050269">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/world/2025/may/21/without-time-there-is-no-flavour-a-south-korean-grand-master-on-the-art-of-the-perfect-soy-sauce"
              >A South Korean grand master on the art of the perfect soy
              sauce</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 11:19:59</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44050269"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44033606">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/05/19/science/richard-garwin-hydrogen-bomb.html"
              >Richard Garwin’s role in designing the hydrogen bomb was
              obscured</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 19:09:29</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44033606"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44028616">
          <h3>
            <a class="item" href="https://airport.query.farm/"
              >Airport for DuckDB</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 11:25:32</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44028616"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44027229">
          <h3>
            <a
              class="item"
              href="https://blog.djnavarro.net/posts/2025-05-18_multivariate-normal-sampling-floating-point/"
              >When good pseudorandom numbers go bad</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 07:17:50</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44027229"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44026516">
          <h3>
            <a
              class="item"
              href="https://blog.alexewerlof.com/p/when-a-team-is-too-big"
              >When a team is too big</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 04:31:39</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44026516"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
