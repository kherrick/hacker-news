<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41639589">
          <h3>
            <a
              class="item"
              href="https://creounity.com/apps/time_machine/index.php?go=&amp;lang=en"
              >"Creounity Time Machine", the universal date converter for coin
              collectors</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 18:36:22</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41639589"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41638885">
          <h3>
            <a
              class="item"
              href="https://www.wosu.org/2024-09-24/45-years-ago-compuserve-connected-the-world-before-the-world-wide-web"
              >45 years ago CompuServe connected the world before the World Wide
              Web</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 17:27:49</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41638885"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41638738">
          <h3>
            <a
              class="item"
              href="https://www.lrb.co.uk/the-paper/v46/n18/robert-cioffi/euripides-unbound"
              >Euripedes Unbound</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 17:14:30</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41638738"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41638581">
          <h3>
            <a class="item" href="https://ijc8.me/2024/08/26/gsoc-difflogic/"
              >GSoC'24: Differentiable Logic for Interactive Systems and
              Generative Music</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 17:02:24</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41638581"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41638199">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41638199"
              >Launch HN: Modern Realty (YC S24) – AI Real Estate Agent for Home
              Buyers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 16:23:35</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41638199"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
            <div class="text">
              <a href="https://modernrealty.io">https://modernrealty.io</a>).
              Modern Realty is an AI-powered real estate buying experience that
              helps you purchase homes without relying on a traditional realtor.
              Demo:
              <a href="https://youtu.be/VhsWSVn5blA"
                >https://youtu.be/VhsWSVn5blA</a
              >
              <p>
                Our mission at Modern Realty is to make home buying easier,
                faster, and far more enjoyable. We interpret real estate data,
                giving you an edge on other home buyers.
              </p>
              <p>
                Since 2024, there has been a growing need for innovative
                solutions in real estate, especially with tools like Zillow
                making it easier than ever for buyers to find the right house at
                the right price. However, the process still requires an agent,
                even though buyers are doing most of the work themselves. Modern
                Realty changes this by offering an AI self-service solution.
              </p>
              <p>
                Raymond and Raffi came face-to-face with this technology's
                potential while working on AI at Google and handling
                billion-dollar asset transactions as an attorney, respectively.
                The AI tools we've built guide users through every step of the
                home-buying process, from scheduling showings to making offers,
                all without the need for a traditional agent.
              </p>
              <p>
                Before we expand further, this summer we've built our core AI
                real estate agent, which can handle everything from disclosure
                summaries to competitive market analyses. You can see our
                platform in action at
                <a href="https://modernrealty.io">https://modernrealty.io</a>.
                We're particularly proud of our offer generation tool, which
                creates offers that are then reviewed by an attorney at no
                additional cost.
              </p>
              <p>
                We're excited to be launching here on HN and would love to hear
                what you think! If you're in the market for a new home or just
                curious about the future of real estate, visit our website or
                schedule a call with us to get started.
              </p>
            </div>
          </section>
        </section>
        <section id="41638068">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/updated-production-ready-gemini-models-reduced-15-pro-pricing-increased-rate-limits-and-more/"
              >Two new Gemini models, reduced 1.5 Pro pricing, increased rate
              limits, and more</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 16:08:38</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41638068"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41636804">
          <h3>
            <a class="item" href="https://github.com/WinampDesktop/winamp"
              >Winamp Legacy player source code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 14:27:09</span
              ><span class="points-container"
                >Points: <span class="points">456</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41636804"
                  >Comments</a
                ><span class="descendants">: 206</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41636070">
          <h3>
            <a
              class="item"
              href="https://www.undeadly.org/cgi?action=article;sid=20240924105732"
              >OpenBSD now enforcing no invalid NUL characters in shell
              scripts</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 13:06:35</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41636070"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41635962">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/cancer/cancer-immunotherapy-t-cells-extra-batteries-supercharges/"
              >Giving T cells extra batteries supercharges them against
              cancer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 12:51:35</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41635962"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41635592">
          <h3>
            <a class="item" href="https://openfreemap.org/"
              >Show HN: OpenFreeMap – Open-Source Map Hosting</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 11:59:22</span
              ><span class="points-container"
                >Points: <span class="points">433</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41635592"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
            <div class="text">
              <p>
                After 9 years of running my own OpenStreetMap tile server infra
                for MapHub (<a
                  href="https://news.ycombinator.com/item?id=11389989"
                  >https://news.ycombinator.com/item?id=11389989</a
                >), I've open-sourced it and launched OpenFreeMap.
              </p>
              <p>
                You can either self-host or use our public instance. Everything
                is open-source, including the full production setup — there’s no
                'open-core' model here. Check out the repo (<a
                  href="https://github.com/hyperknot/openfreemap"
                  >https://github.com/hyperknot/openfreemap</a
                >). The map data comes from OpenStreetMap.
              </p>
              <p>
                I also provide weekly full planet downloads both in Btrfs and
                MBTiles formats.
              </p>
              <p>
                I aim to cover the running costs of the public instance through
                donations.
              </p>
              <p>Looking forwards for your feedback.</p>
            </div>
          </section>
        </section>
        <section id="41635583">
          <h3>
            <a
              class="item"
              href="https://engineersneedart.com/blog/movefast/movefast.html"
              >Move Fast and Abandon Things</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 11:58:02</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41635583"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41635176">
          <h3>
            <a class="item" href="https://jazco.dev/2024/09/24/jetstream/"
              >Jetstream: Shrinking the AT Protocol Firehose by &amp;gt;99%</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 10:50:10</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41635176"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41635166">
          <h3>
            <a class="item" href="https://lander.bbcelite.com/"
              >Fully documented source code for Lander on the Acorn
              Archimedes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 10:47:23</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41635166"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41635080">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/science/elements/the-quest-to-build-a-telescope-on-the-moon"
              >The Quest to Build a Telescope on the Moon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 10:30:05</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41635080"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41634356">
          <h3>
            <a class="item" href="https://github.com/loggerhead/json4u"
              >Show HN: JSON For You – Visualize JSON in graph or table views</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 08:20:38</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41634356"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                - Common features include validation, formatting, minification,
                and more.
              </p>
              <p>- Visualize JSON in a graph or table view.</p>
              <p>- Structured comparison with fallback to text comparison.</p>
              <p>- Navigate though JSON using JSON pointer.</p>
              <p>- Supports jq.</p>
              <p>
                Would love to hear the community's questions, thoughts and
                comments!
              </p>
            </div>
          </section>
        </section>
        <section id="41634268">
          <h3>
            <a
              class="item"
              href="https://www.orau.org/health-physics-museum/collection/consumer/miscellaneous/tape-dispenser.html"
              >Radioactive Tape Dispenser (1970s)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 08:05:52</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41634268"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41633155">
          <h3>
            <a class="item" href="https://makerpipe.com/"
              >Maker Pipe – Structural Pipe Fittings for DIY Builders</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 04:43:30</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41633155"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41632823">
          <h3>
            <a class="item" href="https://haidog-yaqub.github.io/EzAudio-Page/"
              >EzAudio: Enhancing Text-to-Audio Generation with Efficient
              Diffusion Transformer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 03:16:10</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41632823"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41632719">
          <h3>
            <a class="item" href="https://github.com/wolfpld/tracy"
              >Tracy: A real time, nanosecond resolution frame profiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-24 @ 02:57:47</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41632719"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41630913">
          <h3>
            <a
              class="item"
              href="https://publish.obsidian.md/felafax/pages/Tune+Llama3+405B+on+AMD+MI300x+(our+journey)"
              >We fine-tuned Llama 405B on AMD GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-23 @ 21:42:26</span
              ><span class="points-container"
                >Points: <span class="points">435</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41630913"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/felafax/felafax"
                >https://github.com/felafax/felafax</a
              >
              <p>
                We're a small startup building AI infra for fine-tuning and
                serving LLMs on non-NVIDIA hardware (TPUs, AMD, Trainium).
              </p>
              <p>
                Problem: Many companies are trying to get PyTorch working on AMD
                GPUs, but we believe this is a treacherous path. PyTorch is
                deeply intertwined with the NVIDIA ecosystem in a lot of ways
                (e.g., `torch.cuda` or scaled_dot_product_attention is an NVIDIA
                CUDA kernel exposed as a PyTorch function). So, to get PyTorch
                code running on non-NVIDIA hardware, there's a lot of
                "de-NVIDIAfying" that needs to be done.
              </p>
              <p>
                Solution: We believe JAX is a better fit for non-NVIDIA
                hardware. In JAX, ML model code compiles to hardware-independent
                HLO graphs, which are then optimized by the XLA compiler before
                hardware-specific optimization. This clean separation allowed us
                to run the same LLaMA3 JAX code both on Google TPUs and AMD GPUs
                with no changes.
              </p>
              <p>
                Our strategy as a company is to invest upfront in porting models
                to JAX, then leverage its framework and XLA kernels to extract
                maximum performance from non-NVIDIA backends. This is why we
                first ported Llama 3.1 from PyTorch to JAX, and now the same JAX
                model works great on TPUs and runs perfectly on AMD GPUs.
              </p>
              <p>We'd love to hear your thoughts on our vision and repo!</p>
            </div>
          </section>
        </section>
        <section id="41629923">
          <h3>
            <a
              class="item"
              href="http://www.righto.com/2024/09/ramtron-ferroelectric-fram-die.html"
              >Inside a Ferroelectric RAM Chip</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-23 @ 20:06:03</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41629923"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41629475">
          <h3>
            <a class="item" href="https://www.atomsonly.news/p/franklin-oil"
              >In 1870, Lord Rayleigh used oil and water to calculate the size
              of molecules</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-23 @ 19:08:14</span
              ><span class="points-container"
                >Points: <span class="points">516</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41629475"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41629377">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41629377"
              >Show HN: I Wrote a Book on Java</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-23 @ 18:56:44</span
              ><span class="points-container"
                >Points: <span class="points">540</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41629377"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.manning.com/books/data-oriented-programming-in-java"
                >https://www.manning.com/books/data-oriented-programming-in-j...</a
              >
              <p>
                This book is a distillation of everything I’ve learned about
                what effective development looks like in Java (so far!). It's
                about how to organize programs around data "as plain data" and
                the surprisingly benefits that emerge when we do. Programs that
                are built around the data they manage tend to be simpler,
                smaller, and significantly easier understand.
              </p>
              <p>
                Java has changed radically over the last several years. It has
                picked up all kinds of new language features which support data
                oriented programming (records, pattern matching, `with`
                expressions, sum and product types). However, this is not a book
                about tools. No amount of studying a screw-driver will teach you
                how to build a house. This book focuses on house building. We'll
                pick out a plot of land, lay a foundation, and build upon it
                house that can weather any storm.
              </p>
              <p>
                DoP is based around a very simple idea, and one people have been
                rediscovering since the dawn of computing, "representation is
                the essence of programming." When we do a really good job of
                capturing the data in our domain, the rest of the system tends
                to fall into place in a way which can feel like it’s writing
                itself.
              </p>
              <p>
                That's my elevator pitch! The book is currently in early access.
                I hope you check it out. I'd love to hear your feedback.
              </p>
              <p>
                You can get 50% off (thru October 9th) with code `mlkiehl`
                <a
                  href="https://www.manning.com/books/data-oriented-programming-in-java"
                  >https://www.manning.com/books/data-oriented-programming-in-j...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41627787">
          <h3>
            <a class="item" href="https://www.nrm.org/2024/08/mad/"
              >What, Me Worry? The Art and Humor of Mad Magazine</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-23 @ 16:25:00</span
              ><span class="points-container"
                >Points: <span class="points">223</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41627787"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41627549">
          <h3>
            <a class="item" href="https://github.com/nobuyuki83/floor_plan"
              >Free-form floor plan design using differentiable Voronoi
              diagram</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-23 @ 16:06:03</span
              ><span class="points-container"
                >Points: <span class="points">235</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41627549"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41623467">
          <h3>
            <a
              class="item"
              href="https://arslan.io/2024/09/23/dieter-rams-inspired-iphone-dock/"
              >I designed a Dieter Rams-inspired iPhone dock</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-23 @ 07:51:26</span
              ><span class="points-container"
                >Points: <span class="points">1414</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41623467"
                  >Comments</a
                ><span class="descendants">: 333</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41609578">
          <h3>
            <a
              class="item"
              href="https://www.sligocki.com//2024/09/20/collatz-coincidence.html"
              >One Collatz Coincidence</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-21 @ 12:36:04</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41609578"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41608810">
          <h3>
            <a
              class="item"
              href="https://www.deccanherald.com/india/life-without-aadhaar-3200235"
              >Life without Aadhaar digital identity in India</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-21 @ 09:49:38</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41608810"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41601517">
          <h3>
            <a
              class="item"
              href="https://www.ethanepperly.com/index.php/2024/07/02/neat-randomized-algorithms-randdiag-for-rapidly-diagonalizing-normal-matrices/"
              >Neat Randomized Algorithms: RandDiag for Rapidly Diagonalizing
              Normal Matrices</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-20 @ 12:53:48</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41601517"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41599327">
          <h3>
            <a class="item" href="https://lwn.net/Articles/987548/"
              >Attracting and Retaining Debian Contributors</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-20 @ 06:21:15</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41599327"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
