<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44429695">
          <h3>
            <a class="item" href="https://tucson-josh.com/posts/rust-clap-cli/"
              >Rust CLIs with Clap</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 01:25:07</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44429695"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44429225">
          <h3>
            <a
              class="item"
              href="https://docs.anthropic.com/en/docs/claude-code/hooks"
              >Claude Code now supports Hooks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 00:01:15</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44429225"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44429182">
          <h3>
            <a
              class="item"
              href="https://www.sbs.com.au/news/article/i-was-shocked-melbourne-mans-unbelievable-find-after-buying-house/m4sksfer8"
              >Melbourne man discovers extensive model train network underneath
              house</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 23:53:42</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44429182"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44429116">
          <h3>
            <a
              class="item"
              href="https://github.com/runzhouye/Local_LLM_Notepad"
              >Show HN: Local LLM Notepad – run a GPT-style model from a USB
              stick</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 23:43:37</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44429116"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Why I built it Existing “local LLM” GUIs assume you can pip
                install, pass long CLI flags, or download GBs of extras.
              </p>
              <p>
                I wanted something my less-technical colleagues could run during
                a client visit by literally plugging in a USB drive.
              </p>
              <p>
                How it works PyInstaller one-file build → bundles Python
                runtime, llama_cpp_python, and the UI into a single PE.
              </p>
              <p>
                On first launch, it memory-maps the .gguf; subsequent prompts
                stream at ~20 tok/s on an i7-10750H with
                gemma-3-1b-it-Q4_K_M.gguf (0.8 GB).
              </p>
              <p>
                Tick-driven render loop keeps the UI responsive while llama.cpp
                crunches.
              </p>
              <p>
                A parser bold-underlines every token that originated in the
                prompt; Ctrl+click pops a “source viewer” to trace facts. (Helps
                spot hallucinations fast.)
              </p>
            </div>
          </section>
        </section>
        <section id="44428674">
          <h3>
            <a class="item" href="https://vldb.org/pvldb/vol18/p1919-wang.pdf"
              >GPEmu: A GPU emulator for rapid, low-cost deep learning
              prototyping [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 22:37:06</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44428674"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44428399">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/dsp-pioneer-jim-boddie"
              >Jim Boddie codeveloped the first successful DSP at Bell Labs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 22:04:53</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44428399"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44427929">
          <h3>
            <a
              class="item"
              href="https://cgad.ski/blog/entropy-of-a-mixture.html"
              >Entropy of a Mixture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 21:11:30</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44427929"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44427757">
          <h3>
            <a class="item" href="https://www.philschmid.de/context-engineering"
              >The new skill in AI is not prompting, it's context engineering</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 20:53:55</span
              ><span class="points-container"
                >Points: <span class="points">450</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44427757"
                  >Comments</a
                ><span class="descendants">: 243</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44427147">
          <h3>
            <a
              class="item"
              href="https://www.japantimes.co.jp/news/2025/06/24/japan/japan-rice-price-falls-below-4000/"
              >Price of rice in Japan falls below ¥4k per 5kg</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 19:54:11</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44427147"
                  >Comments</a
                ><span class="descendants">: 141</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44427134">
          <h3>
            <a
              class="item"
              href="https://community.signalusers.org/t/public-signal-backups-testing/69984"
              >Public Signal Backups Testing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 19:52:19</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44427134"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44426864">
          <h3>
            <a
              class="item"
              href="https://clownacy.wordpress.com/2025/05/24/the-original-lzexe-a-k-a-kosinski-compressor-source-code-has-been-released/"
              >The Original LZEXE (A.K.A. Kosinski) Compressor Source Code Has
              Been Released</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 19:19:52</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426864"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44426845">
          <h3>
            <a
              class="item"
              href="https://www.erasmatazz.com/personal/self/end-of-an-era.html"
              >End of an Era</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 19:17:11</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426845"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44426726">
          <h3>
            <a
              class="item"
              href="https://www.xfinity.com/support/articles/wifi-motion"
              >Xfinity using WiFi signals in your house to detect motion</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 19:03:50</span
              ><span class="points-container"
                >Points: <span class="points">411</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426726"
                  >Comments</a
                ><span class="descendants">: 283</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44426476">
          <h3>
            <a class="item" href="https://beanbook.app"
              >Show HN: We're two coffee nerds who built an AI app to track
              beans and recipes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 18:38:47</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426476"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
            <div class="text">
              <a href="https://itunes.apple.com/app/id6499280064"
                >https://itunes.apple.com/app/id6499280064</a
              >
              <p>
                We got into specialty coffee during COVID and, like many others,
                fell deep down the rabbit hole. Along the way, we ran into the
                same frustrations:
              </p>
              <p>- A drawer full of empty coffee bags.</p>
              <p>
                - No simple way to track grind size, rest dates, notes—by bean.
              </p>
              <p>
                - My coffee history scattered across photos, screenshots,
                notebooks, and half-memories.
              </p>
              <p>
                - The unique traits, people, and stories behind each coffee
                disappearing from the internet once it sold out (since coffee is
                an agricultural good)
              </p>
              <p>
                - In our opinion, no coffee tool really captures the flavor,
                emotion, and aesthetic of great coffee—from a design
                perspective.
              </p>
              <p>
                So we built BeanBook—a coffee notebook log beans, extract
                recipes, and organize your coffee life in one place with just a
                snap, powered by AI
              </p>
              <p>Here’s what it does:</p>
              <p>
                - Snap a bag → Auto-detects roaster, origin, process, roast
                date, notes, producer, farm, and more
              </p>
              <p>
                - Paste a YouTube link or photo → Extracts a structured recipe
                automatically
              </p>
              <p>
                - Log grind size, roast timeline, ratings &amp; notes → All
                saved in a clean, elegant UI
              </p>
              <p>
                - See your coffee year in review → Track habits, trends, and
                favorites
              </p>
              <p>
                - Ask BeanBook AI → From brew temps to bean facts, get instant
                answers
              </p>
              <p>
                My co-founder and I built everything ourselves—branding, code,
                and UX design. If you’re into coffee (or trying to get more into
                it), we’d love your feedback.
              </p>
              <p>- Rokey &amp; Eric</p>
            </div>
          </section>
        </section>
        <section id="44426428">
          <h3>
            <a
              class="item"
              href="https://www.linaro.org/blog/hidden-jtag-qualcomm-snapdragon-usb/"
              >The hidden JTAG in a Qualcomm/Snapdragon device’s USB port</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 18:34:27</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426428"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44426233">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44426233"
              >Ask HN: What's the 2025 stack for a self-hosted photo library
              with local AI?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 18:10:50</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426233"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
            <div class="text">
              <p>
                My goal is to create a system with smart search capabilities,
                and one of the most important requirements is that it must run
                entirely on my local hardware. Privacy is key, but the main
                driver is the challenge and joy of building it myself (an
                obviously learn).
              </p>
              <p>The key features I'm aiming for are:</p>
              <p>
                Automatic identification and tagging of family members (local
                face recognition).
              </p>
              <p>Generation of descriptive captions for each photo.</p>
              <p>
                Natural language search (e.g., "Show me photos of us at the
                beach in Luquillo from last summer").
              </p>
              <p>
                I've already prompted AI tools for a high-level project plan,
                and they provided a solid blueprint (eg, Ollama with LLaVA, a
                vector DB like ChromaDB, you know it). Now, I'm highly
                interested in the real-world human experience. I'm looking for
                advice, learning stories, and the little details that only come
                from building something similar.
              </p>
              <p>
                What tools, models, and best practices would you recommend for a
                project like this in 2025? Specifically, I'm curious about
                combining structured metadata (EXIF), face recognition data, and
                semantic vector search into a single, cohesive application.
              </p>
              <p>Any and all advice would be deeply appreciated. Thanks!</p>
            </div>
          </section>
        </section>
        <section id="44426171">
          <h3>
            <a class="item" href="https://kevinboone.me/dtc-700.html"
              >They don't make 'em like that any more: Sony DTC-700 audio DAT
              player/recorder</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 18:03:26</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426171"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44425537">
          <h3>
            <a class="item" href="https://14.ai/careers"
              >14.ai (YC W24) hiring founding engineers in SF to build a Zendesk
              alternative</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 17:00:57</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44425461">
          <h3>
            <a
              class="item"
              href="https://danielchasehooper.com/posts/typechecked-generic-c-data-structures/"
              >I write type-safe generic data structures in C</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 16:55:20</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44425461"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44425253">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/carmax-used-pcs"
              >A CarFax for Used PCs; Hewlett Packard wants to give old laptops
              new life</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 16:38:43</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44425253"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44424194">
          <h3>
            <a class="item" href="https://jsgroth.dev/blog/posts/dkc2-open-bus/"
              >Donkey Kong Country 2 and Open Bus</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 15:01:12</span
              ><span class="points-container"
                >Points: <span class="points">202</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44424194"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44423983">
          <h3>
            <a
              class="item"
              href="https://blog.jxmo.io/p/there-are-no-new-ideas-in-ai-only"
              >There are no new ideas in AI only new datasets</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 14:43:46</span
              ><span class="points-container"
                >Points: <span class="points">335</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44423983"
                  >Comments</a
                ><span class="descendants">: 171</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44422480">
          <h3>
            <a class="item" href="https://github.com/M4THYOU/TokenDagger"
              >Show HN: TokenDagger – A tokenizer faster than OpenAI's
              Tiktoken</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 12:33:58</span
              ><span class="points-container"
                >Points: <span class="points">253</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44422480"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’m teaching myself LLM internals by re-implementing the stack
                from first principles. Profiling TikToken’s Python/Rust
                implementation showed a lot of time was spent doing regex
                matching. Most of my perf gains come from a) using a faster
                jit-compiled regex engine; and b) simplifying the algorithm to
                forego regex matching special tokens at all.
              </p>
              <p>
                Benchmarking code is included. Notable results show: - 4x faster
                code sample tokenization on a single thread. - 2-3x higher
                throughput when tested on a 1GB natural language text file.
              </p>
            </div>
          </section>
        </section>
        <section id="44421776">
          <h3>
            <a
              class="item"
              href="https://untested.sonnet.io/notes/new-enso-first-public-beta/"
              >Show HN: New Ensō – first public beta</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 11:02:55</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44421776"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
            <div class="text">
              <a href="https://enso.sonnet.io/">https://enso.sonnet.io/</a>
              <p>
                After 6 years and 2 million words of daily writing I feel like
                I've learned enough to make Ensō simpler and more accessible.
              </p>
              <p>
                Related thread:
                <a href="https://news.ycombinator.com/item?id=38025073"
                  >https://news.ycombinator.com/item?id=38025073</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44416093">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44416093"
              >Ask HN: What Are You Working On? (June 2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-29 @ 20:21:28</span
              ><span class="points-container"
                >Points: <span class="points">371</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44416093"
                  >Comments</a
                ><span class="descendants">: 1152</span></span
              >
            </h4>
            <div class="text">
              What are you working on? Any new ideas which you're thinking
              about?
            </div>
          </section>
        </section>
        <section id="44416009">
          <h3>
            <a
              class="item"
              href="https://addons.mozilla.org/en-GB/firefox/addon/youtube-no-translation/"
              >YouTube No Translation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-29 @ 20:10:54</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44416009"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44410135">
          <h3>
            <a class="item" href="https://jslegend.itch.io/harvest-move"
              >Harvest Move – A game that requires careful movement</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-29 @ 03:28:10</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44410135"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44407708">
          <h3>
            <a
              class="item"
              href="https://www.dolthub.com/blog/2025-06-03-people-keep-inventing-prolly-trees/"
              >People Keep Inventing Prolly Trees</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-28 @ 20:01:54</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44407708"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44402618">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2025/05/your-next-gaming-dice-could-be-shaped-like-a-dragon-or-armadillo/"
              >Creating fair dice from random objects</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-28 @ 06:11:38</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44402618"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44398809">
          <h3>
            <a
              class="item"
              href="https://scottandrew.com/blog/2025/06/you-can-now-play-plot-of-the-phantom-the-text-adventure-game/"
              >The Plot of the Phantom, a text adventure that took 40 years to
              finish</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-27 @ 17:50:44</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44398809"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
