<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43029089">
          <h3>
            <a class="item" href="https://jsr.io/@fullsoak/fullsoak"
              >Show HN: A no-build fullstack SSR TypeScript web framework</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 19:54:52</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43029089"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'd love to seek your insights on a fullstack web framework that
                employs a different approach: no build.
              </p>
              <p>
                It's not a new concept. The folks as Preact mentioned it:
                <a href="https://preactjs.com/guide/v10/no-build-workflows/"
                  >https://preactjs.com/guide/v10/no-build-workflows/</a
                >
              </p>
              <p>
                However, in the Web Framework market, I've yet to find many that
                support both "no build" and "SSR". There's always some sorts of
                "client mount" and "server mount" and either has (or both have)
                to go through a build (bundling) process.
              </p>
              <p>
                With the build process, there comes additional maintenance
                efforts and cognitive load. I've enjoyed wrestling with
                tsconfig, webpack config, all sorts of presets and plugins
                countless times... When things work, they just work, but when we
                need sth a bit custom or unconventional, then we're almost
                always in for a tough ride. (or it's just me )
              </p>
              <p>
                Not to say I'm against any existing build workflow. In fact I
                benefited a lot in the past from webpack, and i'm very positive
                about modern bundlers like Parcel 2, Turbopack, rspack, etc.
              </p>
              <p>
                I just feel it'd be fair to save some slots for the "no build"
                route :)
              </p>
              <p>
                To this end, I spent the last month working on a prototype of a
                TypeScript fullstack SSR web framework. It's compatible with
                Deno and Bun runtimes. I'd love to make it compatible with
                Node.js as well (at some point).
              </p>
              <p>
                The framework registry page (<a
                  href="https://jsr.io/@fullsoak/fullsoak"
                  >https://jsr.io/@fullsoak/fullsoak</a
                >) summarizes the motives expressed so far.
              </p>
              <p>
                An example deployment is available at:
                <a href="https://fullsoak.onrender.com/app"
                  >https://fullsoak.onrender.com/app</a
                >
              </p>
              <p>
                The code behind the deployment above:
                <a href="https://github.com/fullsoak/bun-examples"
                  >https://github.com/fullsoak/bun-examples</a
                >
              </p>
              <p>
                PS: you may see Preact being used &amp; mentioned everywhere but
                I'm positive that React is 100% supported as well (just drop-in
                &amp; use). I just happened to choose Preact to experience it
                more for myself.
              </p>
              <p>
                I look forward to your thoughts :) and learning if this might
                (or might not) be a feasible idea at scale. And perhaps, which
                future directions you would see this (or something like it)
                goes. Thank you much for any insight!
              </p>
            </div>
          </section>
        </section>
        <section id="43028468">
          <h3>
            <a class="item" href="https://imapsync.lamiral.info/">Imapsync</a>
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 18:54:35</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43028468"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43028200">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/are-efficiency-and-horizontal-scalability-at-odds/"
              >Are efficiency and horizontal scalability at odds?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 18:27:41</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43028200"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43028057">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2502.07577"
              >Automated Capability Discovery via Foundation Model
              Self-Exploration</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 18:14:34</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43028057"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43027335">
          <h3>
            <a
              class="item"
              href="https://eli.lipsitz.net/posts/introducing-gamebub/"
              >Show HN: Game Bub – open-source FPGA retro emulation handheld</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 17:11:25</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43027335"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
            <div class="text">
              <p>
                Over the past ~1.5 years, I built an open-source FPGA retro
                emulation handheld that can play Game Boy, Game Boy Color, and
                Game Boy Advance cartridges. To my knowledge, there isn't an
                existing open-source FPGA emulator that can play physical
                cartridges like this.
              </p>
              <p>
                One of my main goals was to do all of the pieces myself, and be
                able to understand every component of it, so I designed my own
                PCB, wrote the firmware, wrote a Game Boy and Game Boy Advance
                emulator for the FPGA (using the Chisel HDL), and designed a
                3D-printed case.
              </p>
              <p>
                I detailed the design and development process in the linked
                post. It's quite long, but there are a lot of pictures and
                videos.
              </p>
              <p>
                Code and design files available on GitHub:
                <a href="https://github.com/elipsitz/gamebub"
                  >https://github.com/elipsitz/gamebub</a
                >, and an overview of the architecture:
                <a
                  href="https://github.com/elipsitz/gamebub/blob/handheld/docs/architecture.md"
                  >https://github.com/elipsitz/gamebub/blob/handheld/docs/archi...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43027266">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/5g-bandwidth"
              >5G networks meet consumer needs as mobile data growth slows</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 17:04:22</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43027266"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43027230">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/artie/jobs/CM1sVks-business-operations"
              >Artie (YC S23) Is Hiring Business Operations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 17:00:48</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43027150">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-025-00444-1"
              >Record-breaking neutrino is most energetic ever detected</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 16:52:57</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43027150"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43026920">
          <h3>
            <a
              class="item"
              href="https://www.worksinprogress.news/p/the-prophet-of-parking"
              >The Prophet of Parking: A eulogy for the great Donald Shoup</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 16:31:04</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43026920"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43026590">
          <h3>
            <a
              class="item"
              href="https://www.techtalksweekly.io/p/100-most-watched-software-engineering"
              >Most-Watched Software Engineering Talks of 2024</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 15:55:20</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43026590"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43026036">
          <h3>
            <a
              class="item"
              href="https://github.com/nexsol-technologies/pgassistant"
              >PgAssistant: OSS tool to help devs understand and optimize PG
              performance</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 15:01:40</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43026036"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43025645">
          <h3>
            <a
              class="item"
              href="https://perthirtysix.com/visualizing-data-is-an-art"
              >Visualizing Data Is an Art – We Should Treat It Like One</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 14:17:48</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43025645"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43024961">
          <h3>
            <a class="item" href="https://deadbeef.sourceforge.io/"
              >DeaDBeeF: The Ultimate Music Player</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 12:58:13</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43024961"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43024540">
          <h3>
            <a
              class="item"
              href="https://blog.archive.org/2025/02/12/vanishing-culture-punch-card-knitting/"
              >Vanishing Culture: Punch Card Knitting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 12:11:33</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43024540"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43024221">
          <h3>
            <a
              class="item"
              href="https://brutecat.com/articles/leaking-youtube-emails"
              >Leaking the email of any YouTube user for $10k</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 11:19:42</span
              ><span class="points-container"
                >Points: <span class="points">1010</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43024221"
                  >Comments</a
                ><span class="descendants">: 315</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43024173">
          <h3>
            <a
              class="item"
              href="https://maknee.github.io/blog/2025/League-Data-Scraping/"
              >League of Legends data scraping the hard and tedious way for
              fun</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 11:11:38</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43024173"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43023634">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2111.12800"
              >Tiny Pointers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 09:43:48</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43023634"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43023554">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/ai/2025/02/us-and-uk-refuse-to-sign-ai-safety-declaration-at-summit/"
              >US and UK refuse to sign AI safety declaration at summit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 09:33:29</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43023554"
                  >Comments</a
                ><span class="descendants">: 315</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43023508">
          <h3>
            <a
              class="item"
              href="https://paulbutler.org/2025/smuggling-arbitrary-data-through-an-emoji/"
              >Smuggling arbitrary data through an emoji</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 09:24:08</span
              ><span class="points-container"
                >Points: <span class="points">312</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43023508"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43023101">
          <h3>
            <a
              class="item"
              href="https://pithlessly.github.io/intensionaljoy.html"
              >Intensional Joy (a concatenative account of internal
              structure)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 08:22:27</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43023101"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43022398">
          <h3>
            <a class="item" href="https://elevenreader.io">ElevenReader</a>
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 06:10:25</span
              ><span class="points-container"
                >Points: <span class="points">227</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43022398"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43021677">
          <h3>
            <a
              class="item"
              href="https://localfirstweb.dev/blog/2023-05-29-i-wrote-a-static-web-page"
              >I wrote a static web page and accidentally started a community
              (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 03:51:37</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43021677"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43020983">
          <h3>
            <a
              class="item"
              href="https://bessstillman.substack.com/p/the-year-i-didnt-survive"
              >The year I didn't survive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 02:07:52</span
              ><span class="points-container"
                >Points: <span class="points">815</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43020983"
                  >Comments</a
                ><span class="descendants">: 207</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43019136">
          <h3>
            <a class="item" href="https://drio.github.io/unixmagic/"
              >Show HN: Mapping the Unix Magic Poster – An Interactive
              Annotation Project</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 22:22:37</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43019136"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
            <div class="text">
              <p>
                We've discussed the Unix Magic poster before (<a
                  href="https://news.ycombinator.com/item?id=27029196"
                  >https://news.ycombinator.com/item?id=27029196</a
                >). Like many of you, I love this poster and all the Unix
                references hidden in it.
              </p>
              <p>
                I built this as a static site that lets us annotate the Unix
                Magic poster by placing markers on references and adding
                descriptions to explain them. I've added a few so far, but
                there's much more to document.
              </p>
              <p>
                What I love about this approach is that contributions happen not
                just on the site itself but also through PRs, where we can
                discuss and refine the details of each reference. Feel free to
                send a PR!
              </p>
              <p>
                Code:
                <a href="https://github.com/drio/unixmagic"
                  >https://github.com/drio/unixmagic</a
                >
                Live site:
                <a href="https://drio.github.io/unixmagic"
                  >https://drio.github.io/unixmagic</a
                >
              </p>
              <p>
                Would love feedback, suggestions, and PRs from the community!
              </p>
              <p>Thanks!</p>
              <p>—drd</p>
            </div>
          </section>
        </section>
        <section id="43013431">
          <h3>
            <a
              class="item"
              href="https://www.backblaze.com/blog/backblaze-drive-stats-for-2024/"
              >Backblaze Drive Stats for 2024</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 14:55:45</span
              ><span class="points-container"
                >Points: <span class="points">597</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43013431"
                  >Comments</a
                ><span class="descendants">: 185</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43008587">
          <h3>
            <a class="item" href="https://github.com/vagos/llm-sort"
              >Show HN: Sort lines semantically using llm-sort</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 03:25:25</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43008587"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>You can do things like:</p>
              <p>
                cat names.txt | llm sort -q "Which one of these names is best
                for a pet seagull?"
              </p>
              <p>
                cat books.txt | llm sort -q "Which book is more related to basic
                vs. advanced CS topics?"
              </p>
              <p>
                I see a lot of potential marrying LLMs with classic UNIX
                interfaces.
              </p>
            </div>
          </section>
        </section>
        <section id="42996656">
          <h3>
            <a
              class="item"
              href="https://www.scattered-thoughts.net/writing/the-missing-tier-for-query-compilers/"
              >The missing tier for query compilers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 03:36:05</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42996656"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42992368">
          <h3>
            <a class="item" href="https://sprocketfox.io/xssfox/2025/02/09/ido/"
              >Bad Smart Watch Authentication</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 18:18:47</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42992368"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990512">
          <h3>
            <a
              class="item"
              href="https://www.nro.gov/Portals/65/documents/history/csnr/corona/The%20CORONA%20Story.pdf"
              >Center for the Study of National Reconnaissance: Corona Satellite
              (2013) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 13:22:22</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990512"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990103">
          <h3>
            <a
              class="item"
              href="https://www.fastcompany.com/90747313/steve-jobs-lessons-tony-fadell-build-book-excerpt"
              >Storytelling lessons I learned from Steve Jobs (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 11:53:31</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990103"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
