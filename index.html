<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43379119">
          <h3>
            <a
              class="item"
              href="https://www.newscientist.com/article/2471120-male-octopus-injects-female-with-venom-during-sex-to-avoid-being-eaten/"
              >Male octopus injects female with venom during sex to avoid being
              eaten</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 13:56:26</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43379119"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43378869">
          <h3>
            <a
              class="item"
              href="https://www.tampabay.com/news/health/2025/03/16/florida-nursing-homes-medicaid-cuts/"
              >Medicaid cuts could devastate elderly in Florida nursing homes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 13:22:47</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43378869"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43378415">
          <h3>
            <a class="item" href="https://learnyousomeerlang.com/content"
              >Learn You Some Erlang for Great Good</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 12:14:33</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43378415"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43378401">
          <h3>
            <a class="item" href="https://antirez.com/news/147"
              >Big LLMs weights are a piece of history</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 12:13:24</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43378401"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43378329">
          <h3>
            <a
              class="item"
              href="https://jobs.lever.co/getlago/42f45126-a365-4f03-9736-565b26bc62f5"
              >Lago (Open-Source Usage Based Billing)Is Hiring Sr Ruby Engineers
              (Latam)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 12:01:04</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43378239">
          <h3>
            <a class="item" href="https://github.com/suitenumerique/docs"
              >Docs â€“ Open source alternative to Notion or Outline</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 11:38:52</span
              ><span class="points-container"
                >Points: <span class="points">242</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43378239"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43378225">
          <h3>
            <a
              class="item"
              href="https://til.simonwillison.net/css/dialog-full-height"
              >Styling an HTML dialog modal to take the full height of the
              viewport</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 11:35:22</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43378225"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43377985">
          <h3>
            <a
              class="item"
              href="https://www.doc.ic.ac.uk/~rak/papers/British%20Nationality%20Act.pdf"
              >The British Nationality Act as a Prolog Program (1986) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 10:28:16</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377985"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43377962">
          <h3>
            <a
              class="item"
              href="https://twitter.com/Baidu_Inc/status/1901089355890036897"
              >GPT 4.5 level for 1% of the price</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 10:23:46</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377962"
                  >Comments</a
                ><span class="descendants">: 172</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43377867">
          <h3>
            <a
              class="item"
              href="https://developer.mozilla.org/en-US/blog/global-privacy-control/"
              >Implications of Global Privacy Control</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 09:50:14</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377867"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43377829">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43377829"
              >Lynx is the oldest web browser still being maintained</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 09:37:59</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377829"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
            <div class="text">
              <p>https://en.m.wikipedia.org/wiki/Lynx_(web_browser)</p>
            </div>
          </section>
        </section>
        <section id="43377690">
          <h3>
            <a
              class="item"
              href="https://drive.google.com/file/d/1_9V6lBTIfDsPdKCohQBc5Ed5UzDbnsrI/view?usp=sharing"
              >Show HN: My high school team's space probe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 08:48:09</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377690"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
            <div class="text">
              <p>
                We had the opportunity to launch it a week ago and you can find
                the video of our launch here:
                <a
                  href="https://drive.google.com/file/d/16bsLzxjP7OWRqVvCB62cLv7QYLRWPKZK/view"
                  >https://drive.google.com/file/d/16bsLzxjP7OWRqVvCB62cLv7QYLR...</a
                >
              </p>
              <p>
                During the launch we reached 400m above sea level, and the can
                pulled 70gs successfully. The parachute and can stayed intact.
                Unfortunately, on the day, we were unable to successfully
                implement GPS.
              </p>
              <p>
                The raw results are here:
                <a
                  href="https://drive.google.com/file/d/1oK1vukjcNcsaXMAPeFlzZ66aHlRS0Vas/view"
                  >https://drive.google.com/file/d/1oK1vukjcNcsaXMAPeFlzZ66aHlR...</a
                >
                And a slightly cleaned up version is here:<a
                  href="https://drive.google.com/file/d/1xYhkp3sWoJF0bCkkvFs1AygSdLUHyrYp/view"
                  >https://drive.google.com/file/d/1xYhkp3sWoJF0bCkkvFs1AygSdLU...</a
                >
              </p>
              <p>
                I used my data presentation software to present our results
                here:
                <a
                  href="https://drive.google.com/file/d/1-r7lT0J4MDLiYfuaasDXJsr5rCA1FNMD/view"
                  >https://drive.google.com/file/d/1-r7lT0J4MDLiYfuaasDXJsr5rCA...</a
                >
                The software (in the form of a python script to be executed in
                blender) can be found here:
                <a
                  href="https://drive.google.com/file/d/1LHP7OwgI_O8t6-NBI0ZPn9JUt2GVgZEi/view"
                  >https://drive.google.com/file/d/1LHP7OwgI_O8t6-NBI0ZPn9JUt2G...</a
                >
                It's not pretty, but it works.
              </p>
              <p>
                The differences in temperature and pressure results were
                exaggerated in the so that the gradient could be clearly seen.
              </p>
              <p>
                Unfortunately, we did not get into the final (judged on this
                document) but it was an awesome experience nevertheless. The
                judges used this form to mark us:
                <a
                  href="https://drive.google.com/file/d/1eZnum5zuJvkLzY7RLtm9A-NNzxwt_iO8/view"
                  >https://drive.google.com/file/d/1eZnum5zuJvkLzY7RLtm9A-NNzxw...</a
                >
                We would love to get any feedback from more experienced people,
                as we intend to do similar projects in the future and at least
                two of us want to be professional engineers. I'm happy to reply
                to any comments.
              </p>
            </div>
          </section>
        </section>
        <section id="43376570">
          <h3>
            <a
              class="item"
              href="http://oldvcr.blogspot.com/2025/03/more-pro-for-dec-professional-380.html"
              >More pro for the DEC Professional 380 (featuring PRO/VENIX)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 02:31:59</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43376570"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43376033">
          <h3>
            <a
              class="item"
              href="https://www.downtowndougbrown.com/2025/03/apples-long-lost-hidden-recovery-partition-from-1994-has-been-found/"
              >Apple's long-lost hidden recovery partition from 1994 has been
              found</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 00:07:03</span
              ><span class="points-container"
                >Points: <span class="points">208</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43376033"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43375923">
          <h3>
            <a class="item" href="https://lethain.com/career-advice-2025/"
              >Career Advice in 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 23:41:44</span
              ><span class="points-container"
                >Points: <span class="points">231</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43375923"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43375780">
          <h3>
            <a
              class="item"
              href="https://supakeen.com/weblog/esp32-wifi-superstitions/"
              >ESP32 WiFi Superstitions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 23:12:08</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43375780"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43374519">
          <h3>
            <a
              class="item"
              href="https://github.blog/security/sign-in-as-anyone-bypassing-saml-sso-authentication-with-parser-differentials/"
              >Sign in as anyone: Bypassing SAML SSO authentication with parser
              differentials</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 19:06:01</span
              ><span class="points-container"
                >Points: <span class="points">268</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43374519"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43373765">
          <h3>
            <a
              class="item"
              href="https://www.cantgetmuchhigher.com/p/how-many-artists-did-the-beatles"
              >How many artists' careers did the Beatles kill?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 17:05:07</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43373765"
                  >Comments</a
                ><span class="descendants">: 167</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43373242">
          <h3>
            <a class="item" href="https://github.com/christian-fei/my-yt"
              >Show HN: A personal YouTube frontend based on yt-dlp</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 15:45:42</span
              ><span class="points-container"
                >Points: <span class="points">281</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43373242"
                  >Comments</a
                ><span class="descendants">: 188</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43373157">
          <h3>
            <a
              class="item"
              href="https://brodzinski.com/2025/03/milk-kanban.html"
              >Milk Kanban</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-15 @ 15:32:02</span
              ><span class="points-container"
                >Points: <span class="points">392</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43373157"
                  >Comments</a
                ><span class="descendants">: 153</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43362667">
          <h3>
            <a
              class="item"
              href="https://news.mit.edu/2025/high-performance-computing-with-much-less-code-0313"
              >High-performance computing, with much less code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-14 @ 13:53:10</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43362667"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43360522">
          <h3>
            <a
              class="item"
              href="https://www.ft.com/content/fb5c11bb-1d4b-465f-8283-451a19a3d425"
              >DeepSeek focuses on research over revenue</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-14 @ 08:07:53</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43360522"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43360249">
          <h3>
            <a class="item" href="https://cohere.com/blog/command-a"
              >Command A: Max performance, minimal compute â€“ 256k context
              window</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-14 @ 07:02:06</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43360249"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43358914">
          <h3>
            <a class="item" href="https://keepworking.github.io/nash/"
              >Show HN: Nash, I made a standalone note with single HTML file</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-14 @ 01:51:22</span
              ><span class="points-container"
                >Points: <span class="points">430</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43358914"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
            <div class="text">
              Hello HN, I hope it will posted as well. I made a note in single
              html file. This does not require a separate membership or
              installation of the software, and if you download and modify an
              empty file, you can modify and read it at any time, regardless of
              online or offline. It can be shared through messengers such as
              Telegram, so it is also suitable to share contents with long
              articles and images. It is also possible to host and blog because
              it is static html file content.
            </div>
          </section>
        </section>
        <section id="43353925">
          <h3>
            <a class="item" href="https://scratch.mit.edu/projects/1061728417/"
              >City simulator I made in Scratch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-13 @ 14:46:31</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43353925"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43349940">
          <h3>
            <a
              class="item"
              href="https://www.vulture.com/article/toni-morrison-play-dreaming-emmett-influenced-beloved.html"
              >Toni Morrison's Lost Play</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-13 @ 02:48:31</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43349940"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43349296">
          <h3>
            <a
              class="item"
              href="https://www.videogameschronicle.com/news/lego-is-starting-to-bring-its-game-development-in-house-key-exec-says/"
              >Lego says it wants to start to bring video game development
              in-house</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-13 @ 00:44:58</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43349296"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43348434">
          <h3>
            <a
              class="item"
              href="https://www.nist.gov/news-events/news/2025/01/technical-blog-strengthening-ai-agent-hijacking-evaluations"
              >Strengthening AI Agent Hijacking Evaluations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 22:38:03</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43348434"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43343765">
          <h3>
            <a
              class="item"
              href="https://interestingengineering.com/energy/steam-driven-nuclear-fusion-reactor"
              >Steam-powered piston system sparks nuclear fusion plasma in
              Canada</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 14:39:25</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43343765"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43340651">
          <h3>
            <a
              class="item"
              href="https://tech.marksblogg.com/wyvern-open-data-feed.html"
              >Wyvern's Open Satellite Feed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 07:20:05</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43340651"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
