<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39438155">
          <h3>
            <a
              class="item"
              href="https://github.com/charlax/professional-programming"
              >A collection of learning resources for curious software
              engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 04:48:14</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39438155"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39437873">
          <h3>
            <a class="item" href="https://queue.acm.org/detail.cfm?id=3489047"
              >Patent Absurdity (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 03:51:28</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39437873"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39437424">
          <h3>
            <a class="item" href="https://mrmr.io/til/prettier/"
              >Why is Prettier rock solid?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 02:36:45</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39437424"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39437387">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/markets/deals/capital-one-considers-acquisition-discover-financial-bloomberg-says-2024-02-19/"
              >Capital One to buy Discover Financial in $35.3B all-stock deal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 02:28:42</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39437387"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39436623">
          <h3>
            <a class="item" href="http://thradams.com/cake/ownership.html"
              >Cake – C23 and Beyond (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 00:34:43</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39436623"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39436621">
          <h3>
            <a
              class="item"
              href="https://acko.net/blog/how-to-fold-a-julia-fractal/"
              >How to Fold a Julia Fractal (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 00:34:39</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39436621"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39436358">
          <h3>
            <a
              class="item"
              href="https://cohost.org/sirocyl/post/2891449-i-broke-ikea"
              >I broke IKEA (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 23:59:42</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39436358"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39436238">
          <h3>
            <a
              class="item"
              href="https://emilymstark.com/2024/02/09/e2ee-on-the-web-is-the-web-really-that-bad.html"
              >E2EE on the web: is the web that bad?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 23:44:15</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39436238"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39435486">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Reverse_graffiti"
              >Reverse graffiti</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 22:15:44</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39435486"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39435458">
          <h3>
            <a
              class="item"
              href="https://overkill.wtf/sony-playstation-portal-hacked-emulate-psp-games/"
              >Sony's Playstation Portal hacked, can now emulate PSP games</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 22:12:32</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39435458"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39435397">
          <h3>
            <a class="item" href="https://github.com/XboxDev/endgame-exploit"
              >Endgame: A dashboard exploit for the original Xbox</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 22:05:43</span
              ><span class="points-container"
                >Points: <span class="points">146</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39435397"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39435320">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=oSCRZkSQ1CE"
              >Jeff Dean: Trends in Machine Learning [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 21:56:48</span
              ><span class="points-container"
                >Points: <span class="points">269</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39435320"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39435262">
          <h3>
            <a
              class="item"
              href="https://www.wezm.net/v2/posts/2024/gleam-tauri/"
              >Building a hybrid native application with Gleam and Tauri</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 21:51:19</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39435262"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39433451">
          <h3>
            <a
              class="item"
              href="https://housefresh.com/david-vs-digital-goliaths/"
              >Big media publishers are inundating the web with subpar product
              recommendations</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 19:09:19</span
              ><span class="points-container"
                >Points: <span class="points">556</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39433451"
                  >Comments</a
                ><span class="descendants">: 268</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39432876">
          <h3>
            <a class="item" href="https://jeffhuang.com/productivity_text_file/"
              >My productivity app is a never-ending .txt file (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 18:14:12</span
              ><span class="points-container"
                >Points: <span class="points">379</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39432876"
                  >Comments</a
                ><span class="descendants">: 207</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39432085">
          <h3>
            <a
              class="item"
              href="https://adoptingerlang.org/docs/development/otp_high_level/"
              >OTP at a High Level (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 17:06:58</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39432085"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39432015">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39432015"
              >About Y Combinator's software team (which is currently hiring)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 17:00:28</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                But I thought that rather than write a regular job post about
                them (boring!), it would be more fun to write about the history
                of the YC software team and what we've been up to. YC is a
                somewhat unusual place to work, and I wanted to give you a
                flavor of what it might be like.
              </p>
              <p>
                First off, a lot of people don't know that YC even has a
                software team, and for most of YC's history, we didn't. The
                first software YC wrote was Hacker News, and Paul Graham built
                and ran HN all by himself for many years.
              </p>
              <p>
                But around 2012, a young YC Partner named Garry Tan built this
                website to be a private directory and forum for the founders YC
                had funded. He called it "Bookface" as a tongue-in-cheek joke.
              </p>
              <p>
                Hacker News was built in Lisp (and still is), but Garry had used
                rails for his startup and didn't really want to learn lisp, so
                he built Bookface in rails. Bookface was an instant hit, but for
                several years after, the only people working on it were Garry
                Tan and a couple of other YC partners, who spent most of their
                time working with companies, and only really got to code on
                nights and weekends.
              </p>
              <p>
                In 2015 I joined YC, and my first job on literally my first day
                was to try to figure out what to do with our software. By then,
                Bookface was getting big enough that it seemed clear to me that
                we needed full-time people working on it, and so we ended up
                finding a few key people to do that.
              </p>
              <p>
                Now that we had a small but real team, for the first time we
                were able to think about doing more ambitious things. We
                launched a website (<a href="https://workatastartup.com/"
                  >https://workatastartup.com/</a
                >) to help our companies hire people, and that did well. Then we
                launched a website (<a href="https://www.startupschool.org/"
                  >https://www.startupschool.org/</a
                >) to turn YC's advice about startups into an online course (<a
                  href="https://news.ycombinator.com/item?id=13801376"
                  >https://news.ycombinator.com/item?id=13801376</a
                >). A few years later, we launched a co-founder matching
                platform (<a
                  href="https://news.ycombinator.com/item?id=27750298"
                  >https://news.ycombinator.com/item?id=27750298</a
                >).
              </p>
              <p>
                Along the way we built a lot of other stuff we haven't talked
                about publicly, like all the internal tools that run YC. We've
                tried to make YC scale by writing software to automate as much
                of our business as possible. We have software that helps us read
                60K applications every year, our own Calendly-like software for
                scheduling the 10K+ meetings we do with founders every year,
                software to automate our financial and legal reporting and lots
                more stuff like that.
              </p>
              <p>
                As we've launched new products, we've added one or two people
                per year to the team so we can work on more things in parallel.
                We're up to about 10 now.
              </p>
              <p>
                When people are interviewing with us, they often ask us what the
                culture of the team is, and the answer is that if you've read
                Paul Graham's essays or watched our videos on YouTube, you
                already know what our culture is like. We try to operate
                according to the same advice we give to our startups.
              </p>
              <p>
                We've also tried to make the YC software team as closely
                connected to the batch as possible, which is part of staying
                close to our users (who are mostly YC founders and employees).
                Most of us work on the third floor of the YC building, and the
                batch happens on the first and second floors. So if you want to
                join one of the famous YC batch dinners, you just walk down to
                the first floor.
              </p>
              <p>
                One of the things we hoped would happen was that some of the
                people on the team would take what they learned from working at
                YC and start their own YC companies. That turned out to work -
                there are now 7 people who have done exactly that.
              </p>
              <p>
                We've historically only hired a couple of people per year, but
                we've got a couple of roles open now. We're looking for someone
                to help Mark with infrastructure (see
                <a href="https://news.ycombinator.com/item?id=39019063"
                  >https://news.ycombinator.com/item?id=39019063</a
                >), and we're also hiring someone to work on YC's private
                founder community site Bookface, which is more traditional
                full-stack web development. It's a little hard to describe
                Bookface if you haven't seen it - it's like LinkedIn and
                Facebook and Quora rolled into one, but just for YC founders.
                Most YC founders use it every day.
              </p>
              <p>
                Working at YC isn't a good fit for most people. I think it could
                be a good fit if you have been following YC for a while, if you
                are confident building web products all by yourself, if you like
                having a lot of responsibility and owning the development of
                products end-to-end, and if you like startups and have already
                worked on one or likely will someday. You’ll also need to live
                in SF or want to move here.
              </p>
              <p>
                If you're interested, you can read a traditional job post and
                apply online here (<a
                  href="https://www.ycombinator.com/careers?ashby_jid=00c6950f-341f-4924-a456-ea32c9d5601d"
                  >https://www.ycombinator.com/careers?ashby_jid=00c6950f-341f-...</a
                >), or just email me at jared@ycombinator.com.
              </p>
            </div>
          </section>
        </section>
        <section id="39431809">
          <h3>
            <a
              class="item"
              href="https://www.adrianflux.co.uk/influx/culture/hip-square-70-years-citroen-h-van/"
              >Hip to be square – 70 years of the Citroën H Van</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 16:43:05</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39431809"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39430349">
          <h3>
            <a
              class="item"
              href="https://github.com/ElesionKyrie/Extreme-Video-Compression-With-Prediction-Using-Pre-trainded-Diffusion-Models-"
              >Extreme video compression with prediction using pre-trainded
              diffusion models</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 14:51:55</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39430349"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39429370">
          <h3>
            <a class="item" href="https://leanrada.com/htmz/"
              >Show HN: htmz – a low power tool for HTML</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 13:12:18</span
              ><span class="points-container"
                >Points: <span class="points">798</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39429370"
                  >Comments</a
                ><span class="descendants">: 195</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39428880">
          <h3>
            <a class="item" href="https://groq.com/"
              >Groq runs Mixtral 8x7B-32k with 500 T/s</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 12:06:01</span
              ><span class="points-container"
                >Points: <span class="points">646</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39428880"
                  >Comments</a
                ><span class="descendants">: 409</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39428728">
          <h3>
            <a
              class="item"
              href="https://blog.stuffedcow.net/2019/09/hard-disk-geometry-microbenchmarking/"
              >Discovering hard disk physical geometry through microbenchmarking
              (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 11:42:53</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39428728"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39427775">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2024-02-17/openai-deal-lets-employees-sell-shares-at-86-billion-valuation"
              >OpenAI Deal Lets Employees Sell Shares at $86B Valuation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 09:42:20</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39427775"
                  >Comments</a
                ><span class="descendants">: 163</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39427265">
          <h3>
            <a
              class="item"
              href="https://hackaday.com/2024/02/12/ethernet-for-hackers-the-very-basics/"
              >Ethernet: The Basics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 08:15:53</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39427265"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39419054">
          <h3>
            <a
              class="item"
              href="https://int10h.org/blog/2024/02/game-font-forensics/"
              >Game Font Forensics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 13:50:23</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39419054"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39418817">
          <h3>
            <a
              class="item"
              href="https://www.thewoodshedd.com/posts/2021-06-12-pickinggames/"
              >Picking Unfair Fights (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 13:19:28</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39418817"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39418810">
          <h3>
            <a
              class="item"
              href="https://www.kianryan.co.uk/2024-02-16-one-handed-accessible-keyboard-inspired-by-frogpad/"
              >An accessible one-handed keyboard, inspired by FrogPad</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 13:17:29</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39418810"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39418707">
          <h3>
            <a
              class="item"
              href="https://www.english-heritage.org.uk/visit/places/kenwood/history-stories-kenwood/old-london-bridge/"
              >Old London Bridge</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 13:05:12</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39418707"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39416623">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2102.11245"
              >Silent data corruptions at scale (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 06:06:03</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39416623"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39406098">
          <h3>
            <a class="item" href="https://deervo.itch.io/diskclick"
              >DiskClick: Ever wanted to hear old hard drive sounds</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-17 @ 03:34:29</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39406098"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
