<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37922200">
          <h3>
            <a
              class="item"
              href="https://untappedcities.com/2023/10/17/pneumatic-tube-mail-new-york-city/"
              >The pneumatic tube mail system in New York City</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 22:01:15</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37922200"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37921832">
          <h3>
            <a
              class="item"
              href="https://www.andrealyip.com/a-young-ladys-illustrated-primer"
              >"A Young Lady's Illustrated Primer" Simulated by GPT-4</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 21:27:43</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37921832"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37921661">
          <h3>
            <a
              class="item"
              href="https://www.nvidia.com/en-us/geforce/news/game-ready-driver-dlss-3-naraka-vermintide-rtx-vsr/"
              >Stable Diffusion Gets a Major Boost with RTX Acceleration</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 21:14:10</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37921661"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37921576">
          <h3>
            <a
              class="item"
              href="https://academic.oup.com/function/article/4/6/zqad055/7306462"
              >How Do We Clean Up the Scientific Record?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 21:07:18</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37921576"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37921497">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37921497"
              >MixRank (YC S11) Is Hiring Global Remote Software Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 21:00:58</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                MixRank processes petabytes of data every month from web
                crawling. We have hundreds of customers using our data products
                including Google, Amazon, Facebook, Intel, and Adobe, across
                industries including Recruiting, Finance, Security, Sales, and
                Marketing.
              </p>
              <p>
                Our team is 42 full-time, full-remote from 16+ countries. We're
                growing, profitable, employee-owned, no dependence on outside
                funding. Applicants from all geographies and backgrounds are
                welcome.
              </p>
              <p>
                We are looking for passionate individuals for whom programming
                is not just a job but it's something they love to do. We're
                obsessed with computers, programming, big data, databases,
                compilers, hardware, math, data science, and the internet. Does
                this sound like you? Please apply to join our team.
              </p>
              <p>
                Our code base is very friendly to new contributors. You'll have
                a (fully-automated) development environment and be pushing
                commits on your first day. Deployments to production happen
                multiple times per day and finish in less than 2 minutes. Our
                codebase is written in Python, SQL, Javascript/TypeScript, Rust,
                and Nix. The basic technologies you'll need to be productive are
                Python, PostgreSQL, Linux, and Git.
              </p>
              <p>
                We operate at a larger scale than typical startups. We operate
                two datacenters with high performance servers we've built that
                are capable of dealing with the volumes of data we process.
                We've implemented our own distributed file system. We do
                full-scale web crawls. We download and perform static analysis
                on the entire universe of Android APKs and iOS IPAs that are
                published. Unlike a typical startup where you'll spend half of
                your time in meetings, and the other half fixing bugs from Jira
                tickets— at MixRank you'll get to direct your entire focus into
                difficult technical problems that will help you to grow as an
                individual.
              </p>
              <p>--</p>
              <p>Junior Software Engineer</p>
              <p>
                We're looking for remote junior engineers that have 0-3 years of
                professional experience in software, and 5+ years of curiosity
                exploring computers, programming, and technical hobby projects.
                This is an open-ended entry role with mentorship and diverse
                opportunities to work on all areas of our product: databases,
                distributed systems, infrastructure and tooling, data analysis,
                machine learning, frontend/backend web development, APIs, data
                mining, data modeling, and more. To stand out, please highlight
                what makes you unique: passion for computing, curiosity and side
                projects, work ethic, niche research, etc.
              </p>
              <p>
                Ideally you've already finished with school, but if you still
                have one or more years left please feel free to apply anyway. If
                you're the right fit for the team we'll figure out a way to
                accommodate your schedule.
              </p>
              <p>--</p>
              <p>Software Engineer</p>
              <p>
                We're hiring generalist software engineers to work on web
                applications, data mining, machine learning/data science, data
                transformation/ETL, data modeling, database scaling,
                infrastructure, devops, and more. We'll customize the role to
                whatever subset of these areas match your interests.
              </p>
              <p>
                Beneficial experience includes PostgreSQL, Python, Linux,
                TypeScript, Rust, Nix, frontend/backend web development, and
                data mining.
              </p>
              <p>--</p>
              <p>
                Please apply here:
                <a href="https://www.ycombinator.com/companies/mixrank/jobs"
                  >https://www.ycombinator.com/companies/mixrank/jobs</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="37920907">
          <h3>
            <a
              class="item"
              href="https://cloud.google.com/blog/topics/systems/google-systems-innovations-at-ocp-global-summit"
              >How We'll build sustainable, scalable, secure infrastructure for
              an AI future</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 20:14:23</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37920907"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37920697">
          <h3>
            <a
              class="item"
              href="https://blog.whiona.me/what-happened-to-blogging-for-the-hell-of-it/"
              >What happened to blogging for the hell of it?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 19:57:06</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37920697"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37920682">
          <h3>
            <a
              class="item"
              href="https://picockpit.com/raspberry-pi/raspberry-pi-5-vs-orange-pi-5-plus-vs-rock-5-model-b/"
              >Raspberry Pi 5 vs. Orange Pi 5 Plus vs. Rock 5 Model B</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 19:55:43</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37920682"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37920678">
          <h3><a class="item" href="https://lumalabs.ai">Lumalabs AI</a></h3>
          <section>
            <h4>
              <span>2023-10-17 @ 19:55:13</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37920678"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37920674">
          <h3>
            <a
              class="item"
              href="https://untested.sonnet.io/Alternatives+to+Adobe"
              >Alternatives to Adobe</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 19:54:49</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37920674"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37920633">
          <h3>
            <a
              class="item"
              href="https://www.irs.gov/newsroom/irs-advances-innovative-direct-file-project-for-2024-tax-season-free-irs-run-pilot-option-projected-to-be-available-for-eligible-taxpayers-in-13-states"
              >Free IRS-run tax filing pilot to be available in 13 states</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 19:51:49</span
              ><span class="points-container"
                >Points: <span class="points">492</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37920633"
                  >Comments</a
                ><span class="descendants">: 190</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37920191">
          <h3>
            <a class="item" href="https://cognitivemedium.com/srs-mathematics"
              >Using spaced repetition systems to see through a piece of
              mathematics</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 19:16:46</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37920191"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37919949">
          <h3>
            <a class="item" href="http://paulgraham.com/superlinear.html"
              >Superlinear Returns</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 19:00:27</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37919949"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37919924">
          <h3>
            <a
              class="item"
              href="https://pytorch.org/executorch/stable/index.html"
              >ExecuTorch: Run PyTorch programs on mobile and edge devices</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 18:58:57</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37919924"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37919241">
          <h3>
            <a class="item" href="https://music.ishkur.com/"
              >Ishkur's Guide to Electronic Music</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 18:15:38</span
              ><span class="points-container"
                >Points: <span class="points">247</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37919241"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37918327">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2310.10631"
              >Llemma: An Open Language Model for Mathematics</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 17:19:29</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37918327"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37917597">
          <h3>
            <a
              class="item"
              href="https://krebsonsecurity.com/2023/10/tech-ceo-sentenced-to-5-years-in-ip-address-scheme/"
              >Tech CEO sentenced to 5 years in IP address scheme</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 16:28:29</span
              ><span class="points-container"
                >Points: <span class="points">288</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37917597"
                  >Comments</a
                ><span class="descendants">: 236</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37916855">
          <h3>
            <a
              class="item"
              href="https://edward-la-barbera.itch.io/frasier-fantasy"
              >Frasier Fantasy</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 15:40:15</span
              ><span class="points-container"
                >Points: <span class="points">328</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37916855"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37916840">
          <h3>
            <a
              class="item"
              href="https://www.tier.run/blog/pricing-engine-vs-billing-engine"
              >Billing Engines Don't Solve Pricing Problems</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 15:39:20</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37916840"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37915934">
          <h3>
            <a
              class="item"
              href="https://jakelazaroff.com/words/making-crdts-98-percent-more-efficient/"
              >Making CRDTs More Efficient</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 14:45:16</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37915934"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37915662">
          <h3>
            <a class="item" href="https://taoranyi.com/gaussiandreamer/"
              >GaussianDreamer: Fast Generation from Text to 3D Gaussian
              Splatting</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 14:28:45</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37915662"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37915044">
          <h3>
            <a
              class="item"
              href="https://www.johndcook.com/blog/2023/05/12/circulant-matrices/"
              >Circulant Matrices, Eigenvectors, and the FFT</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 13:51:13</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37915044"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37914425">
          <h3>
            <a class="item" href="https://www.riffusion.com/"
              >Show HN: Riffusion with Lyrics</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 13:11:43</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37914425"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=33999162"
                >https://news.ycombinator.com/item?id=33999162</a
              >). It was magical to see so many of you enjoy something we built
              for our love of music. We’re back today with a real product and
              are excited to see what you think!
              <p>
                riffusion.com lets you create original music via short,
                shareable audio clips called “riffs”. You describe the lyrics
                and a musical style to generate riffs complete with singing and
                custom artwork in a few seconds. From inspiring musicians, to
                wishing your mom a ‘good morning!’, we are having a lot of fun
                with riffs as a form of expression and communication.
              </p>
              <p>
                We hope you have as much of a blast traveling the latent space
                of music as we did making it. You can generate music from text,
                remix other riffs, or record your own lyric timings.
              </p>
              <p>
                A riff for HN:
                <a
                  href="https://www.riffusion.com/riffs/ac7ff4c3-d86d-4dfa-884e-bb19ec6c4e40"
                  >https://www.riffusion.com/riffs/ac7ff4c3-d86d-4dfa-884e-bb19...</a
                >
              </p>
              <p>Hayk + Seth</p>
            </div>
          </section>
        </section>
        <section id="37914312">
          <h3>
            <a
              class="item"
              href="https://blog.mobian.org/posts/2023/09/30/paperweight-dilemma/"
              >The Paperweight Dilemma</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 13:03:37</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37914312"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37914243">
          <h3>
            <a
              class="item"
              href="https://minnesotareformer.com/2023/10/17/small-business-owners-they-are-pressured-to-hire-off-duty-mpd-cops-for-security/"
              >Small business owners say they're pressured to hire off-duty cops
              for security</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 12:59:13</span
              ><span class="points-container"
                >Points: <span class="points">427</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37914243"
                  >Comments</a
                ><span class="descendants">: 361</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37911544">
          <h3>
            <a
              class="item"
              href="https://www.allaboutcircuits.com/news/sifive-rolls-out-risc-v-cores-aimed-at-generative-ai-and-ml/"
              >SiFive Rolls Out RISC-V Cores Aimed at Generative AI and ML</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-17 @ 07:04:50</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37911544"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37902837">
          <h3>
            <a
              class="item"
              href="https://blogs.bl.uk/digitisedmanuscripts/2023/10/the-largest-greek-manuscript.html"
              >The Largest Greek Manuscript?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-16 @ 17:02:22</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37902837"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37892017">
          <h3>
            <a
              class="item"
              href="https://podbay.fm/p/software-unscripted/e/1697165940"
              >Designing Compilers for Speed with Troels Henriksen from Software
              Unscripted</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-15 @ 18:17:28</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37892017"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37891469">
          <h3>
            <a
              class="item"
              href="https://www.abortretry.fail/p/arrogant-difficult-powerful"
              >WordStar: Arrogant, Difficult, Powerful (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-15 @ 17:06:40</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37891469"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37890637">
          <h3>
            <a class="item" href="https://qaul.net/"
              >Qaul – Internet independent wireless mesh communication app</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-15 @ 15:39:05</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37890637"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
