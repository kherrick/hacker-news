<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45957629">
          <h3>
            <a
              class="item"
              href="https://patshaughnessy.net/2025/11/17/compiling-ruby-to-machine-language"
              >Compiling Ruby to Machine Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 20:04:49</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45957629"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45957402">
          <h3>
            <a class="item" href="https://princejs.vercel.app"
              >Show HN: PrinceJS – 19,200 req/s Bun framework in 2.8 kB (built
              by a 13yo)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 19:45:00</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45957402"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm 13, from Nigeria, and I just released PrinceJS — the fastest
                web framework for Bun right now.
              </p>
              <p>
                • 19,200 req/s (beats Hono/Elysia/Express) • 2.8 kB gzipped •
                Tree-shakable (cache, AI, email, cron, SSE, queue, test,
                static...) • Zero deps. Zero config.
              </p>
              <p>Built in &lt; 1 week. No team. Just me and Bun.</p>
              <p>
                Try it: `bun add princejs` GitHub:
                <a href="https://github.com/MatthewTheCoder1218/princejs"
                  >https://github.com/MatthewTheCoder1218/princejs</a
                >
                Docs:
                <a href="https://princejs.vercel.app"
                  >https://princejs.vercel.app</a
                >
              </p>
              <p>Brutal feedback welcome. What's missing?</p>
              <p>– @Lil_Prince_1218</p>
            </div>
          </section>
        </section>
        <section id="45957073">
          <h3>
            <a
              class="item"
              href="https://rup12.net/posts/learning-rust-custom-errors/"
              >Implementing Rust newtype for errors in axum</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 19:22:06</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45957073"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45956176">
          <h3>
            <a
              class="item"
              href="https://www.cartographerstale.com/p/an-official-atlas-of-north-korea"
              >An official atlas of North Korea</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 18:07:17</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45956176"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45956111">
          <h3>
            <a
              class="item"
              href="https://iggy.apache.org/blogs/2025/11/17/websocket-io-uring/"
              >Show HN: Building WebSocket in Apache Iggy with Io_uring and
              Completion Based IO</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 18:00:31</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45956111"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45955921">
          <h3>
            <a class="item" href="https://www.mdpi.com/2306-5354/12/11/1202"
              >EEG-based neurofeedback in athletes and non-athletes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 17:40:45</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45955921"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45955904">
          <h3>
            <a
              class="item"
              href="https://www.universetoday.com/articles/desis-dizzying-results"
              >DESI's Dizzying Results</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 17:39:43</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45955904"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45955565">
          <h3>
            <a
              class="item"
              href="https://authress.io/knowledge-base/articles/2025/11/01/how-we-prevent-aws-downtime-impacts"
              >How when AWS was down, we were not</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 17:07:17</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45955565"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45955424">
          <h3>
            <a
              class="item"
              href="https://www.sammobile.com/news/israeli-app-app-cloud-samsung-phones-controversy/"
              >Israeli-founded app preloaded on Samsung phones is attracting
              controversy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 16:54:53</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45955424"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45954640">
          <h3>
            <a class="item" href="https://geminiprotocol.net/"
              >Project Gemini</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 15:50:04</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45954640"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45954638">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/so-long-and-thanks-for-all-the-fish-how-to-escape-the-linux-networking-stack/"
              >How to escape the Linux networking stack</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 15:49:38</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45954638"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45954560">
          <h3>
            <a
              class="item"
              href="https://wok.oblomov.eu/tecnologia/google-killing-open-web-2/"
              >Google is killing the open web, part 2</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 15:41:08</span
              ><span class="points-container"
                >Points: <span class="points">272</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45954560"
                  >Comments</a
                ><span class="descendants">: 215</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45954472">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45954472"
              >Show HN: Bsub.io – zero-setup batch execution for command-line
              tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 15:34:38</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45954472"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <p><a href="https://www.bsub.io">https://www.bsub.io</a></p>
              <p>
                bsub lets you execute tools like Whisper, Typst, Pandoc,
                Docling, and FFmpeg as remote batch jobs with no environment
                setup. You can try them locally via the CLI or integrate via a
                simple REST API.
              </p>
              <p>Example (PDF extraction):</p>
              <p></p>
              <pre><code>  bsubio submit -w pdf/extract *.pdf
</code></pre>
              Works like running the tool locally, but the compute and isolation
              happen in the cloud.
              <p>
                Technical details: - Each job runs in an isolated container with
                defined CPU/GPU/RAM limits. - Files are stored ephemerally for
                the duration of the job and deleted after completion. - REST API
                returns job status, logs, and results. - Cold start for light
                processors (Typst, Pandoc) is low; Whisper/FFmpeg take longer
                due to model load/encoding time. - Backend scales horizontally;
                more workers can be added during load spikes.
              </p>
              <p>Current processors:</p>
              <p></p>
              <pre><code>  SST/Whisper -- speech-to-text

  Typography -- Typst, Pandoc

  PDF extraction -- Docling

  Video transcoding -- FFmpeg
</code></pre>
              More coming; suggestions welcome for tools that are painful to set
              up locally.
              <p>
                Looking for testers! CLI is open source:
                <a href="https://github.com/bsubio/cli"
                  >https://github.com/bsubio/cli</a
                >. Installers available for Linux/macOS; Windows testing is in
                progress. Free during early testing; pricing TBD.
              </p>
              <p>
                If you’re on Windows, feedback is especially helpful:
                contact@bsub.io
              </p>
              <p>
                If you try it, I’d appreciate feedback on API design, latency,
                missing processors, or anything rough around the edges.
              </p>
            </div>
          </section>
        </section>
        <section id="45954210">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/google-deepmind/weathernext-2/"
              >WeatherNext 2: Our most advanced weather forecasting model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 15:04:26</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45954210"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45954140">
          <h3>
            <a class="item" href="https://angadh.com/inkhaven-7"
              >Aldous Huxley predicts Adderall and champions alternative
              therapies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 14:57:33</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45954140"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.youtube.com/watch?v=ld2E9LWIYJk&amp;list=PLhQ_EZYXXSe8Ymj_JlriRG3Bk4SM5cuEc&amp;index=9"
                >https://www.youtube.com/watch?v=ld2E9LWIYJk&amp;list=PLhQ_EZYXXS...</a
              >
              <p>
                Transcript:
                <a
                  href="https://www.organism.earth/library/document/realizing-human-potential"
                  >https://www.organism.earth/library/document/realizing-human-...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45953977">
          <h3>
            <a class="item" href="https://github.com/francescopace/espectre"
              >Show HN: ESPectre – Motion detection based on Wi-Fi spectre
              analysis</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 14:40:54</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45953977"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                This is an open-source (GPLv3) project that uses Wi-Fi signal
                analysis to detect motion using CSI data, and it has already
                garnered almost 2,000 stars in two weeks.
              </p>
              <p>Key technical details:</p>
              <p>
                - The system does NOT use Machine Learning, it relies purely on
                Math. — Runs in real-time on a super affordable chip like the
                ESP32. - It integrates seamlessly with Home Assistant via MQTT.
              </p>
            </div>
          </section>
        </section>
        <section id="45953702">
          <h3>
            <a
              class="item"
              href="https://replicate.com/blog/replicate-cloudflare"
              >Replicate is joining Cloudflare</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 14:11:57</span
              ><span class="points-container"
                >Points: <span class="points">234</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45953702"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45953568">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2025/11/24/why-the-time-has-finally-come-for-geothermal-energy"
              >The time has finally come for geothermal energy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 13:55:53</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45953568"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.ph/CR2KL">https://archive.ph/CR2KL</a>
            </div>
          </section>
        </section>
        <section id="45953452">
          <h3>
            <a class="item" href="https://github.com/medusalix/FreeMDU"
              >FreeMDU: Open-source Miele appliance diagnostic tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 13:40:40</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45953452"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45952890">
          <h3>
            <a
              class="item"
              href="https://usefulfictions.substack.com/p/are-you-stuck-in-movie-logic"
              >Are you stuck in movie logic?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 12:06:37</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45952890"
                  >Comments</a
                ><span class="descendants">: 113</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45952614">
          <h3>
            <a
              class="item"
              href="https://medv.io/blog/things-i-dont-like-in-configuration-languages"
              >Things I don't like in configuration languages</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 11:14:41</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45952614"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45952428">
          <h3>
            <a
              class="item"
              href="https://hwisnu.bearblog.dev/giving-c-a-superpower-custom-header-file-safe_ch/"
              >Giving C a superpower: custom header file (safe_c.h)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-17 @ 10:40:55</span
              ><span class="points-container"
                >Points: <span class="points">210</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45952428"
                  >Comments</a
                ><span class="descendants">: 165</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45945114">
          <h3>
            <a
              class="item"
              href="https://unpublishablepapers.substack.com/p/where-do-the-children-play"
              >Where do the children play?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-16 @ 13:45:45</span
              ><span class="points-container"
                >Points: <span class="points">243</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45945114"
                  >Comments</a
                ><span class="descendants">: 191</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45944158">
          <h3>
            <a
              class="item"
              href="https://www.iflscience.com/the-fall-of-icarus-you-have-never-seen-an-astrophotography-picture-like-this-81570"
              >Astrophotographer snaps skydiver falling in front of the sun</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-16 @ 11:02:25</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45944158"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45938517">
          <h3>
            <a
              class="item"
              href="https://github.com/AnandChowdhary/continuous-claude"
              >Show HN: Continuous Claude – run Claude Code in a loop</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-15 @ 16:27:49</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45938517"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                This avoids the typical stateless one-shot pattern of current
                coding agents and enables multi-step changes without losing
                intermediate reasoning, test failures, or partial progress.
              </p>
              <p>
                The tool is useful for tasks that require many small, serial
                modifications: increasing test coverage, large refactors,
                dependency upgrades guided by release notes, or framework
                migrations.
              </p>
              <p>
                Blog post about this:
                <a
                  href="https://anandchowdhary.com/blog/2025/running-claude-code-in-a-loop"
                  >https://anandchowdhary.com/blog/2025/running-claude-code-in-...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45937302">
          <h3>
            <a
              class="item"
              href="https://sashachapin.substack.com/p/my-six-stages-of-learning-to-be-a"
              >My stages of learning to be a socially normal person</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-15 @ 13:24:54</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45937302"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45935687">
          <h3>
            <a class="item" href="https://epstein-doc-explorer-1.onrender.com/"
              >A graph explorer of the Epstein emails</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-15 @ 07:27:21</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45935687"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/maxandrews/Epstein-doc-explorer"
                >https://github.com/maxandrews/Epstein-doc-explorer</a
              >
            </div>
          </section>
        </section>
        <section id="45922997">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/ce9d7j89ykro"
              >Our dogs' diversity can be traced back to the Stone Age</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-14 @ 01:57:57</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45922997"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45901379">
          <h3>
            <a class="item" href="https://ysyx.oscc.cc/docs/en/"
              >"One Student One Chip" Course Homepage</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-12 @ 15:28:54</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45901379"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45900425">
          <h3>
            <a
              class="item"
              href="https://bitsnpieces.dev/posts/a-synth-for-my-daughter/"
              >Show HN: I built a synth for my daughter</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-12 @ 14:12:13</span
              ><span class="points-container"
                >Points: <span class="points">756</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45900425"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
