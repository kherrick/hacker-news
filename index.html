<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43834101">
          <h3>
            <a
              class="item"
              href="https://blog.mozilla.org/en/firefox/tab-groups-community/"
              >Firefox tab groups are here</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 15:37:10</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43834101"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43833310">
          <h3>
            <a class="item" href="https://github.com/arkflow-rs/arkflow"
              >ArkFlow: High-performance Rust stream processing engine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 14:38:43</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43833310"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43832765">
          <h3>
            <a
              class="item"
              href="https://english.elpais.com/science-tech/2025-04-17/one-sixth-of-the-planets-cropland-has-toxic-levels-of-one-or-more-metals.html"
              >One-sixth of the planet's cropland has toxic levels of one or
              more metals</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 14:00:58</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43832765"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831708">
          <h3>
            <a
              class="item"
              href="https://physics.stackexchange.com/questions/848666/what-is-induced-atmospheric-vibration"
              >What Is "Induced Atmospheric Vibration"?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 12:30:00</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831708"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831705">
          <h3>
            <a
              class="item"
              href="https://purplesyringa.moe/blog/why-performance-optimization-is-hard-work/"
              >Why performance optimization is hard work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 12:29:44</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831705"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831667">
          <h3>
            <a
              class="item"
              href="https://www.japanenergyevent.com/media-insights-hub/industry-news/japan-unveils-world-s-first-solar-super-panel-more-powerful-than-20-nuclear-reactors/"
              >Japan unveils first solar super-panel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 12:25:57</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831667"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831628">
          <h3>
            <a
              class="item"
              href="https://blog.tylerglaiel.com/p/programming-languages-should-have"
              >Programming languages should have a tree traversal primitive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 12:23:19</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831628"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831602">
          <h3>
            <a
              class="item"
              href="https://gizmodo.com/after-53-years-a-failed-soviet-venus-spacecraft-is-crashing-back-to-earth-2000595234"
              >After 53 years, a failed Soviet Venus spacecraft is crashing back
              to Earth</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 12:20:10</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831602"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831524">
          <h3>
            <a class="item" href="https://pyrefly.org/"
              >Pyrefly - A faster Python type checker written in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 12:13:31</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831524"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831363">
          <h3>
            <a class="item" href="https://github.com/shadygm/ROSplat"
              >Gaussian Splatting Meets ROS2</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 11:57:17</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831363"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43831298">
          <h3>
            <a
              class="item"
              href="https://blog.bymitch.com/posts/reject-cookies/"
              >Show HN: A Chrome extension that will auto-reject non-essential
              cookies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 11:49:55</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831298"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
            <div class="text">
              <p>
                There are some extensions out there that auto-accept cookies,
                but I didn't find one that auto rejected cookies without either
                chaining some extensions together or setting up custom rules in
                tools like uBlock origin. So with this extension, you just need
                to add it for non-essential cookies to be rejected.
              </p>
              <p>
                Github:
                <a href="https://github.com/mitch292/reject-cookies"
                  >https://github.com/mitch292/reject-cookies</a
                >
                Extension Link:
                <a
                  href="https://chromewebstore.google.com/detail/bnbodofigkfjljnopfggfoecokhmhamc?utm_source=item-share-cb"
                  >https://chromewebstore.google.com/detail/bnbodofigkfjljnopfg...</a
                >
              </p>
              <p>
                It's still very early days for the extension. I want it to keep
                improving and working on more and more sites. Feedback welcome.
                Thanks!
              </p>
            </div>
          </section>
        </section>
        <section id="43831142">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2025-04-heart-disease-deaths-worldwide-linked.html"
              >Heart disease deaths worldwide linked to chemical widely used in
              plastics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 11:35:03</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43831142"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43830613">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/04/29/generative_ai_no_effect_jobs_wages/"
              >Generative AI is not replacing jobs or hurting wages at all, say
              economists</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 10:08:09</span
              ><span class="points-container"
                >Points: <span class="points">247</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43830613"
                  >Comments</a
                ><span class="descendants">: 336</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43830544">
          <h3>
            <a
              class="item"
              href="https://erringtowardsanswers.substack.com/p/intrinsic-motivation"
              >How to build Intrinsic Motivation: a review of the science</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 09:59:04</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43830544"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43830193">
          <h3>
            <a
              class="item"
              href="https://app.getflowcode.io/playground/example1"
              >Show HN: Flowcode – Turing-complete visual programming
              platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 09:04:35</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43830193"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
            <div class="text">
              <p>
                I think that visual programming fits perfectly with modern
                backend dev tasks that revolve around connecting different
                services with basic logic. Flowcode is meant to speed up and
                simplify those tasks, leaving more time to think about design
                and solve design problems. Visual programming also works really
                well for developing workflows involving LLM calls that are
                non-deterministic and require a lot of debugging and prompt
                tweaking.
              </p>
              <p>
                There are many other visual/low code tools, but they all offer
                limited control and flexibility (no concurrency, loops,
                transparency) and most suffer from the same problems (vendor
                lock-in, hard to integrate with existing code etc.).
              </p>
              <p>
                Flowcode is built on an open source visual programming language
                (Flyde
                <a href="https://github.com/flydelabs/flyde"
                  >https://github.com/flydelabs/flyde</a
                >, which I launched last year here on HN -
                <a href="https://news.ycombinator.com/item?id=39628285"
                  >https://news.ycombinator.com/item?id=39628285</a
                >). This means Flowcode has true concurrency, no vendor lock-in
                (you can export flows as .flyde files), is Turing-complete
                (loops, recursion, control flows, multiple IOs etc.), lets you
                fork any node, integrates with code via an SDK and more.
              </p>
              <p>I’d love to hear your thoughts and feedback.</p>
            </div>
          </section>
        </section>
        <section id="43829490">
          <h3>
            <a
              class="item"
              href="https://daringfireball.net/2025/04/try_switching_to_kagi"
              >Try Switching to Kagi</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 07:08:50</span
              ><span class="points-container"
                >Points: <span class="points">372</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43829490"
                  >Comments</a
                ><span class="descendants">: 244</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43829046">
          <h3>
            <a
              class="item"
              href="https://hebiao064.github.io/fa3-attn-backend-basic"
              >Implement Flash Attention Back End in SGLang – Basics and KV
              Cache</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 05:47:04</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43829046"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43829035">
          <h3>
            <a class="item" href="https://librelingo.app"
              >LibreLingo – FOSS Alternative to Duolingo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 05:45:53</span
              ><span class="points-container"
                >Points: <span class="points">564</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43829035"
                  >Comments</a
                ><span class="descendants">: 259</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43829006">
          <h3>
            <a
              class="item"
              href="https://pietrasiak.com/one-line-of-code-that-did-cost-dollar8000"
              >A single line of code cost $8000</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 05:40:35</span
              ><span class="points-container"
                >Points: <span class="points">200</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43829006"
                  >Comments</a
                ><span class="descendants">: 256</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43828131">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/collection/arabic-machine-manuscript/"
              >Manuscript of Ismail al-Jazarī's Ingenious Mechanical Devices
              (ca. 17th century)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 02:16:27</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43828131"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43828096">
          <h3>
            <a
              class="item"
              href="https://specgram.com/Babel.I.2/07.sriyatha.greek.html"
              >Greek Particles (1990)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 02:09:28</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43828096"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43827214">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/oldnewthing/20250428-00/?p=111121"
              >Why did Windows 7 log on slower for months if you had a solid
              color background?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-28 @ 23:27:11</span
              ><span class="points-container"
                >Points: <span class="points">444</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43827214"
                  >Comments</a
                ><span class="descendants">: 219</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43826584">
          <h3>
            <a
              class="item"
              href="https://link.mail.beehiiv.com/ss/c/u001.5SRwDQ9qxPQW8vmD5Do73b3R4eTCi2vXqPyztEk6wMFC9_fqEAcDVx6xEJ96T4BSMXrPS7z5exEBSTF4pF48z8SqJkJnkAwMUW9LtYdd8lWmvkDinT92nsk5HmXOHdWgLsysm9FMGrqmu7dnG57cXpga8ZOe8X0IV8pyeC3AswdRMaitfT307y7naP-_6W5CiolKhXCKrEndMGCW2PftFUu9ieYOxpVJ_fhu82gAh-4/4g1/wA_MG-I5SVCyR3KY66oEaQ/h30/h001.kLDFZMgisudi21zmTPbd_O8U7X98d4UxYqZjQTb_D7o"
              >The One-Person Framework in Practice</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-28 @ 21:58:52</span
              ><span class="points-container"
                >Points: <span class="points">321</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43826584"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43825900">
          <h3>
            <a class="item" href="https://qwenlm.github.io/blog/qwen3/"
              >Qwen3: Think deeper, act faster</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-28 @ 20:44:25</span
              ><span class="points-container"
                >Points: <span class="points">779</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43825900"
                  >Comments</a
                ><span class="descendants">: 354</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43825336">
          <h3>
            <a class="item" href="https://onemillionchessboards.com/#199,276"
              >One Million Chessboards</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-28 @ 19:52:02</span
              ><span class="points-container"
                >Points: <span class="points">302</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43825336"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
            <div class="text">
              <a href="https://eieio.games/blog/one-million-chessboards/"
                >https://eieio.games/blog/one-million-chessboards/</a
              >
            </div>
          </section>
        </section>
        <section id="43823096">
          <h3>
            <a class="item" href="https://github.com/simstudioai/sim"
              >Show HN: Sim Studio – Open-Source Agent Workflow GUI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-28 @ 16:14:31</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43823096"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
            <div class="text">
              <a href="https://simstudio.ai">https://simstudio.ai</a>), an
              open-source drag and drop UI for building and managing multi-agent
              workflows as a directed graph. You can define how agents interact
              with each other, use tools, and handle complex logic like
              branching, loops, transformations, and conditional execution.
              <p>
                Our repo is
                <a href="https://github.com/simstudioai/sim"
                  >https://github.com/simstudioai/sim</a
                >, docs are at
                <a href="https://docs.simstudio.ai/introduction"
                  >https://docs.simstudio.ai/introduction</a
                >, and we have a demo here:
                <a href="https://youtu.be/JlCktXTY8sE?si=uBAf0x-EKxZmT9w4"
                  >https://youtu.be/JlCktXTY8sE?si=uBAf0x-EKxZmT9w4</a
                >
              </p>
              <p>
                Building reliable, multi-step agent systems with current
                frameworks often gets complicated fast. In OpenAI's 'practical
                guide to building agents', they claim that the non-declarative
                approach and single multi-step agents are the best path forward,
                but from experience and experimentation, we disagree. Debugging
                these implicit flows across multiple agent calls and tool uses
                is painful, and iterating on the logic or prompts becomes slow.
              </p>
              <p>
                We built Sim Studio because we believe defining the workflow
                explicitly and visually is the key to building more reliable and
                maintainable agentic applications. In Sim Studio, you design the
                entire architecture, comprising of agent blocks that have system
                prompts, a variety of models (hosted and local via ollama),
                tools with granular tool use control, and structured output.
              </p>
              <p>
                We have plenty of pre-built integrations that you can use as
                standalone blocks or as tools for your agents. The nodes are all
                connected with if/else conditional blocks, llm-based routing,
                loops, and branching logic for specialized agents.
              </p>
              <p>
                Also, the visual graph isn't just for prototyping and
                <i>is</i> actually executable. You can run simulations of the
                workflows 1, 10, 100 times to see how modifying any small system
                prompt change, underlying model, or tool call change change
                impacts the overall performance of the workflow.
              </p>
              <p>
                You can trigger the workflows manually, deploy as an API and
                interact via HTTP, or schedule the workflows to run
                periodically. They can also be set up to trigger on incoming
                webhooks and deployed as standalone chat instances that can be
                password or domain-protected.
              </p>
              <p>
                We have granular trace spans, logs, and observability built-in
                so you can easily compare and contrast performance across
                different model providers and tools. All of these things enable
                a tighter feedback loop and significantly faster iteration.
              </p>
              <p>
                So far, users have built deep research agents to detect
                application fraud, chatbots to interface with their internal HR
                documentation, and agents to automate communication between
                manufacturing facilities.
              </p>
              <p>Sim Studio is Apache 2.0 licensed, and fully open source.</p>
              <p>
                We're excited about bringing a visual, workflow-centric approach
                to agent development. We think it makes building robust, complex
                agentic workflows far more accessible and reliable. We'd love to
                hear the HN community's thoughts!
              </p>
            </div>
          </section>
        </section>
        <section id="43823044">
          <h3>
            <a class="item" href="https://github.com/xdadda/mini-photo-editor"
              >Show HN: A pure WebGL image editor with filters, crop and
              perspective correction</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-28 @ 16:10:21</span
              ><span class="points-container"
                >Points: <span class="points">231</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43823044"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
            <div class="text">
              <p>
                <a href="https://mini2-photo-editor.netlify.app"
                  >https://mini2-photo-editor.netlify.app</a
                >
                to try it out (<a
                  href="https://github.com/xdadda/mini-photo-editor"
                  >https://github.com/xdadda/mini-photo-editor</a
                >)
              </p>
            </div>
          </section>
        </section>
        <section id="43819791">
          <h3>
            <a class="item" href="https://www.bbc.com/news/live/c9wpq8xrvd9t"
              >Widespread power outage in Spain and Portugal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-28 @ 10:50:58</span
              ><span class="points-container"
                >Points: <span class="points">1484</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43819791"
                  >Comments</a
                ><span class="descendants">: 1099</span></span
              >
            </h4>
            <div class="text">
              All of Spain is without energy. All systems have shut down
              immediately and are not coming back. Apparently the same has
              happened in Portugal.
            </div>
          </section>
        </section>
        <section id="43815523">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43815523"
              >Ask HN: What are you working on? (April 2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-27 @ 22:08:21</span
              ><span class="points-container"
                >Points: <span class="points">356</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43815523"
                  >Comments</a
                ><span class="descendants">: 1058</span></span
              >
            </h4>
            <div class="text">
              What are you working on? Any new ideas that you're thinking about?
            </div>
          </section>
        </section>
        <section id="43810211">
          <h3>
            <a
              class="item"
              href="https://romanliutikov.com/blog/running-clojure-in-wasm"
              >Running Clojure in WASM with GraalVM</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-27 @ 07:50:07</span
              ><span class="points-container"
                >Points: <span class="points">189</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43810211"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
