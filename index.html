<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40931636">
          <h3>
            <a
              class="item"
              href="https://news.feinberg.northwestern.edu/2024/07/10/scientists-discover-a-cause-of-lupus-and-a-possible-way-to-reverse-it/"
              >Scientists Discover a Cause of Lupus, Possible Way to Reverse
              It</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 21:24:49</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40931636"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40931540">
          <h3>
            <a
              class="item"
              href="https://jamanetwork.com/journals/jamapediatrics/fullarticle/2815850"
              >Estimated Childhood Lead Exposure from Drinking Water in
              Chicago</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 21:15:20</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40931540"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40930983">
          <h3>
            <a
              class="item"
              href="https://www.currentaffairs.org/news/new-york-times-book-review"
              >The NYT Book Review Is Everything Book Criticism Shouldn't Be</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 20:08:06</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40930983"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40930549">
          <h3>
            <a class="item" href="http://laputan.org/mud/"
              >Big Ball of Mud (1999)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 19:29:32</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40930549"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40929104">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/science/space-astronomy/ed-stone-scientist-voyager-mission-dies-at-88-44c65bc4"
              >Ed Stone, Top Scientist–and Salesman–For the Voyager Mission,
              Dies at 88</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 17:17:05</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40929104"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40928948">
          <h3>
            <a
              class="item"
              href="https://jobs.ashbyhq.com/motion/4f5f6a29-3af0-4d79-99a4-988ff7c5ba05?utm_source=hn"
              >Motion (YC W20) Is Hiring Senior Front End Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 17:01:32</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40928893">
          <h3>
            <a class="item" href="https://zed.dev/linux"
              >Zed on Linux Is Here</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 16:56:02</span
              ><span class="points-container"
                >Points: <span class="points">475</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40928893"
                  >Comments</a
                ><span class="descendants">: 395</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40928756">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-07-scientific-fraud-uncovering.html"
              >Researchers discover a new form of scientific fraud: 'sneaked
              references'</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 16:41:44</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40928756"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40928450">
          <h3>
            <a
              class="item"
              href="https://github.com/Co-dfns/Co-dfns/releases/tag/v5.7.0"
              >Co-Dfns v5.7.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 16:11:50</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40928450"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40928145">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2309.03883"
              >Dola Decoding by Contrasting Layers Improves Factuality in Large
              Language Models</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 15:39:25</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40928145"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40927481">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=_QQ7k5sn2-o"
              >Brian Kernighan on "The Practice of Programming" [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 14:45:19</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40927481"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40927438">
          <h3>
            <a
              class="item"
              href="https://www.timdbg.com/posts/useless-x86-trivia/"
              >Weird things I learned while writing an x86 emulator</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 14:42:03</span
              ><span class="points-container"
                >Points: <span class="points">248</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40927438"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40926734">
          <h3>
            <a class="item" href="https://vlmsareblind.github.io/"
              >Vision language models are blind</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 13:35:22</span
              ><span class="points-container"
                >Points: <span class="points">285</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40926734"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40926648">
          <h3>
            <a
              class="item"
              href="https://www.ft.com/content/7b8d2057-2687-45b3-bae4-1488a75ac5b2"
              >AMD to buy Silo AI for $665M</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 13:26:15</span
              ><span class="points-container"
                >Points: <span class="points">402</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40926648"
                  >Comments</a
                ><span class="descendants">: 217</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40926515">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2406.03372"
              >Training of Physical Neural Networks</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 13:13:51</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40926515"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40926439">
          <h3>
            <a class="item" href="https://antithesis.com/blog/madness/"
              >At the Mountains of Madness</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 13:05:30</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40926439"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40926211">
          <h3>
            <a class="item" href="https://github.com/darrenburns/posting"
              >Show HN: Posting v1 – The modern HTTP client that lives in your
              terminal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 12:35:14</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40926211"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
            <div class="text">
              <p>
                I just released version 1.0 of Posting, an open source terminal
                application I've been working on which you might find useful if
                you work with, test, or develop HTTP APIs!
              </p>
              <p>
                Posting (<a href="https://github.com/darrenburns/posting"
                  >https://github.com/darrenburns/posting</a
                >) is an HTTP client, not unlike Postman and Insomnia. However,
                as a TUI application, it works over SSH and enables efficient
                keyboard-centric workflows. Your requests are stored locally in
                simple readable YAML files, meaning they're easy to read and
                version control.
              </p>
              <p>Some other features include:</p>
              <p>
                - "Jump mode" navigation - Environments/variables with
                autocompletion - Syntax highlighting powered by tree-sitter -
                Vim keys support in much of the UI - Various builtin themes - A
                config system - "Open in $EDITOR" - A fuzzy search command
                palette for quickly accessing functionality.
              </p>
              <p>
                Posting is written in Python using the Textual[1] framework,
                which I also help maintain.
              </p>
              <p>
                Although 1.0 has been released, it's not yet feature complete.
                I'd love to hear feedback from the community to make sure I'm on
                the right track and learn what's important to people.
              </p>
              <p>
                So, if you have any thoughts, feature requests, or opinions, big
                or small, I'd love to hear them. At this early stage, your ideas
                can really help shape the roadmap of the project!
              </p>
              <p>Thanks, Darren</p>
              <p>
                [1] Textual:
                <a href="https://github.com/Textualize/textual"
                  >https://github.com/Textualize/textual</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="40925474">
          <h3>
            <a
              class="item"
              href="https://wingolog.org/archives/2024/07/10/copying-collectors-with-block-structured-heaps-are-unreliable"
              >Copying collectors with block-structured heaps are unreliable</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 10:26:14</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40925474"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40925025">
          <h3>
            <a class="item" href="https://www.simsig.co.uk/"
              >SimSig: Railway Signalling Simulations</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 09:02:16</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40925025"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40922874">
          <h3>
            <a
              class="item"
              href="https://exrocketman.blogspot.com/2021/12/the-seal-failure-in-srb-that-doomed.html"
              >The Seal Failure in the SRB That Doomed Challenger (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 01:11:00</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40922874"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40922739">
          <h3>
            <a class="item" href="https://github.com/lm-sys/RouteLLM"
              >RouteLLM: A framework for serving and evaluating LLM routers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 00:35:38</span
              ><span class="points-container"
                >Points: <span class="points">206</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40922739"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40921989">
          <h3>
            <a class="item" href="https://ai-murder-mystery.onrender.com/"
              >Multi-agent chatbot murder mystery</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 22:34:39</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40921989"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40921038">
          <h3>
            <a
              class="item"
              href="https://aiencoder.substack.com/p/graphrag-analysis-part-1-how-indexing"
              >Knowledge Graphs in RAG: Hype vs. Ragas Analysis</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 21:00:00</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40921038"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40920122">
          <h3>
            <a
              class="item"
              href="https://tedium.co/2024/07/06/compact-disc-pregap-history/"
              >How CD pregaps gained their hidden track superpowers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 19:38:36</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40920122"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40916786">
          <h3>
            <a class="item" href="https://turbopuffer.com/blog/turbopuffer"
              >Turbopuffer: Fast search on object storage</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 14:48:59</span
              ><span class="points-container"
                >Points: <span class="points">329</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40916786"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40914958">
          <h3>
            <a class="item" href="https://circos.ca/"
              >Circos – Circular Visualization</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 11:44:40</span
              ><span class="points-container"
                >Points: <span class="points">160</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40914958"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40912271">
          <h3>
            <a
              class="item"
              href="http://www.rossbencina.com/code/real-time-audio-programming-101-time-waits-for-nothing"
              >Real-time audio programming 101: time waits for nothing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 03:24:22</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40912271"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40907303">
          <h3>
            <a
              class="item"
              href="https://blog.cleancoder.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html"
              >The Transformation Priority Premise (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-08 @ 17:20:57</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40907303"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40891391">
          <h3>
            <a
              class="item"
              href="https://santhoshsundar.medium.com/using-the-5s-principle-in-coding-6237a1614a02"
              >Using the 5S Principle in Coding</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-06 @ 16:19:41</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40891391"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40890002">
          <h3>
            <a
              class="item"
              href="https://joshcannon.me/2024/07/05/package-names.html"
              >An analysis of module names inside top PyPI packages</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-06 @ 12:23:01</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40890002"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
