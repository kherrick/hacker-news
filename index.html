<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="36116189">
          <h3>
            <a
              class="item"
              href="https://mitxonline.mit.edu/courses/course-v1:MITxT+18.03.1x/"
              >MITx Differential Equations starts May 31</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 17:47:35</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36116189"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36116091">
          <h3>
            <a
              class="item"
              href="https://china-journal.org/2016/03/14/filial-piety-in-chinese-culture/"
              >Filial Piety in Chinese Culture (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 17:36:23</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36116091"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36116018">
          <h3>
            <a
              class="item"
              href="https://www.assemblymag.com/articles/97788-tesla-rethinks-the-assembly-line"
              >Tesla rethinks the assembly line</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 17:28:35</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36116018"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36115413">
          <h3>
            <a
              class="item"
              href="https://www.phoronix.com/news/System76-Virgo-Quiet-Perform"
              >System76 Virgo Aims to Be the Quietest yet Most Performant Linux
              Laptop</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 16:27:40</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36115413"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36115321">
          <h3>
            <a class="item" href="https://joker-lang.org/"
              >Joker is a small interpreted dialect of Clojure written in Go</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 16:16:13</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36115321"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36115283">
          <h3>
            <a class="item" href="https://github.com/s0md3v/roop"
              >One Click Deepfake</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 16:12:22</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36115283"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36115062">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/new-york-sinking-sea-level-rise-77c92f3603e90d7322b54e339d085abb"
              >As rising oceans threaten NYC, study documents another risk: The
              city is sinking</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 15:48:36</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36115062"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36114641">
          <h3>
            <a
              class="item"
              href="https://pointersgonewild.com/2023/05/29/software-bugs-that-cause-real-world-harm/"
              >Software bugs that cause real-world harm</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 14:59:38</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36114641"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36114147">
          <h3>
            <a
              class="item"
              href="https://interrupt.memfault.com/blog/cpp-17-for-embedded"
              >C++17’s useful features for embedded systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 14:09:58</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36114147"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36113586">
          <h3>
            <a
              class="item"
              href="https://duncanlock.net/blog/2023/05/28/thanks-david-peter/"
              >Thanks, David Peter</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 13:08:04</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36113586"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36113564">
          <h3>
            <a class="item" href="https://codictionary.com/"
              >Show HN: A weekly newsletter that explain tech terms in plain,
              everyday language</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 13:06:00</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36113564"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
            <div class="text">
              <p>
                At first, I tried to make a newsletter just for my clients. I
                wanted to bridge the gap between tech-savvy folks like me and
                those who aren't as familiar with the ins and outs of
                programming. But then it hit me—why not make it available to
                everyone who wants to understand the tech world without having
                to learn how to code? So, I revamped it to cater to anyone who's
                curious about technology.
              </p>
              <p>
                Each edition of the newsletter focuses on a specific tech term
                or concept. We'll break it down, ditch the complicated jargon,
                and give you real-life examples that make it all crystal clear.
                My goal isn't to teach you programming (that's a whole different
                ball game). Instead, I want to give you the knowledge you need
                to have better conversations and a deeper understanding of the
                tech that shapes our world.
              </p>
              <p>
                So, whether you're an entrepreneur who wants to connect better
                with your tech team, a project manager looking to understand
                what the developers are talking about, or simply a tech
                enthusiast who wants to dive into the digital world, hop on
                board and let's make tech simple together!
              </p>
            </div>
          </section>
        </section>
        <section id="36113551">
          <h3>
            <a
              class="item"
              href="https://www.altnews.in/wrestlers-detained-in-delhi-ai-image-of-smiling-vinesh-sangeeta-phogat-viral/"
              >India ruling party's IT cell used AI to show smile on arrested
              protesters' faces</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 13:04:39</span
              ><span class="points-container"
                >Points: <span class="points">611</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36113551"
                  >Comments</a
                ><span class="descendants">: 298</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36113432">
          <h3>
            <a
              class="item"
              href="https://simonschreibt.de/gat/deus-ex-alpha-terrain/"
              >Deus Ex – Alpha Terrain</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 12:49:41</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36113432"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36113430">
          <h3>
            <a
              class="item"
              href="https://www.nray.dev/blog/300ms-faster-reducing-wikipedias-total-blocking-time/"
              >300ms Faster: Reducing Wikipedia's Total Blocking Time</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 12:49:11</span
              ><span class="points-container"
                >Points: <span class="points">273</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36113430"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36113335">
          <h3>
            <a
              class="item"
              href="https://systemsapproach.substack.com/p/escape-from-big-publishing"
              >Open Source provided the path to achieve our publishing goals</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 12:33:19</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36113335"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36113307">
          <h3>
            <a
              class="item"
              href="https://www.eetimes.com/amprius-high-density-batteries-go-aloft/"
              >Amprius High-Density Batteries Go Aloft</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 12:30:13</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36113307"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36113215">
          <h3>
            <a
              class="item"
              href="https://mullvad.net/en/blog/2023/5/29/removing-the-support-for-forwarded-ports/"
              >Removing the support for forwarded ports</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 12:17:54</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36113215"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36113115">
          <h3>
            <a class="item" href="http://akkartik.name/freewheeling"
              >Using computers more freely and safely (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 12:04:09</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36113115"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36112053">
          <h3>
            <a
              class="item"
              href="https://fasterthanli.me/articles/a-terminal-case-of-linux"
              >A Terminal Case of Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 08:51:42</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36112053"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36112030">
          <h3>
            <a
              class="item"
              href="https://thehistoryofhowweplay.wordpress.com/2023/05/14/arcade-authorship-high-score-table-credits/"
              >Arcade Authorship – High Score Table Credits</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 08:47:29</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36112030"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36111878">
          <h3>
            <a class="item" href="https://github.com/clovaai/donut"
              >Donut: OCR-Free Document Understanding Transformer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 08:19:46</span
              ><span class="points-container"
                >Points: <span class="points">222</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36111878"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36111683">
          <h3>
            <a
              class="item"
              href="https://www.infoq.com/news/2023/05/cloudflare-workers-connect-api/"
              >Cloudflare Workers Introduces Connect() API to Create TCP
              Sockets</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 07:44:15</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36111683"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36111596">
          <h3>
            <a
              class="item"
              href="https://methexis.substack.com/p/production-ai-systems-are-really"
              >Production AI systems are hard</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 07:27:20</span
              ><span class="points-container"
                >Points: <span class="points">192</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36111596"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36110680">
          <h3>
            <a class="item" href="https://www.pagetable.com/?p=1107"
              >Fitting 44% More Data on a C64/1541 Floppy Disk</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 04:35:15</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36110680"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36110527">
          <h3>
            <a
              class="item"
              href="https://blog.archive.org/2023/05/29/let-us-serve-you-but-dont-bring-us-down/"
              >Let us serve you, but don't bring us down</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-29 @ 04:03:29</span
              ><span class="points-container"
                >Points: <span class="points">841</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36110527"
                  >Comments</a
                ><span class="descendants">: 195</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36105603">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/articles/cash-only-movement-apple-pay-paper-money-3814f75a"
              >Paper Money Diehards Refuse to Fold</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-28 @ 16:39:07</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36105603"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36105398">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/articles/a-rare-1914-silent-film-was-considered-lost-forever-a-professor-rescued-it-from-a-vault-9bfdc1f0"
              >1914 Silent Film Considered Lost Forever. A Professor Rescued It
              from a Vault</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-28 @ 16:18:19</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36105398"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36104128">
          <h3>
            <a
              class="item"
              href="https://p.ost2.fyi/courses/course-v1:OpenSecurityTraining2+Arch4031_x86-64_RV_coreboot+2021_v1/about"
              >Architecture 4031: Introductory Coreboot</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-28 @ 14:11:02</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36104128"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36102608">
          <h3>
            <a
              class="item"
              href="https://deliberati.io/what-deserves-our-attention/"
              >What deserves our attention?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-28 @ 09:52:59</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36102608"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36102460">
          <h3>
            <a
              class="item"
              href="https://austinhenley.com/blog/teenytinycompiler1.html"
              >Let's make a Teeny Tiny compiler (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-28 @ 09:25:33</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36102460"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
