<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44583982">
          <h3>
            <a class="item" href="https://mkosi.systemd.io/"
              >Mkosi – Build Bespoke OS Images</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 16:14:20</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44583982"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44583619">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/society/2025/jul/08/the-life-swap-dream-or-a-marketing-gimmick-the-italian-towns-selling-houses-for-1"
              >The Italian towns selling houses for €1</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 15:50:06</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44583619"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44583565">
          <h3>
            <a class="item" href="https://mill-build.org/mill/index.html"
              >Mill: A Better Build Tool for Java, Scala, &amp;amp; Kotlin</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 15:45:14</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44583565"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44583224">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/culture/infinite-scroll/gentle-parenting-my-smartphone-addiction"
              >'Gentle Parenting' My Smartphone Addiction</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 15:17:12</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44583224"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44583171">
          <h3>
            <a
              class="item"
              href="https://www.newscientist.com/article/2487013-weve-discovered-a-new-kind-of-magnetism-what-can-we-do-with-it/"
              >Altermagnets: The first new type of magnet in nearly a century</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 15:11:54</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44583171"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://phys.org/news/2024-02-altermagnetism-magnetism-broad-implications-technology.html"
                >https://phys.org/news/2024-02-altermagnetism-magnetism-broad...</a
              >,
              <a
                href="https://www.ictp.it/news/2025/1/altermagnets-new-magnetic-phase"
                >https://www.ictp.it/news/2025/1/altermagnets-new-magnetic-ph...</a
              >
            </div>
          </section>
        </section>
        <section id="44582855">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2507.11473"
              >Chain of thought monitorability: A new and fragile opportunity
              for AI safety</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 14:39:55</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44582855"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://venturebeat.com/ai/openai-google-deepmind-and-anthropic-sound-alarm-we-may-be-losing-the-ability-to-understand-ai/"
                >https://venturebeat.com/ai/openai-google-deepmind-and-anthro...</a
              >
            </div>
          </section>
        </section>
        <section id="44582662">
          <h3>
            <a
              class="item"
              href="https://www.zeroentropy.dev/blog/improving-rag-with-elo-scores"
              >Show HN: Improving RAG with chess Elo scores</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 14:17:54</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44582662"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm Ghita, co-founder of ZeroEntropy (YC W25). We build high
                accuracy search infrastructure for RAG and AI Agents.
              </p>
              <p>
                We just released two new state-of-the-art rerankers zerank-1,
                and zerank-1-small. One of them is fully open-source under
                Apache 2.0.
              </p>
              <p>
                We trained those models using a novel Elo score inspired
                pipeline which we describe in detail in the blog attached. In a
                nutshell, here is an outline of the training steps: * Collect
                soft preferences between pairs of documents using an ensemble of
                LLMs. * Fit an ELO-style rating system (Bradley-Terry) to turn
                pairwise comparisons into absolute per-document scores. *
                Normalize relevance scores across queries using a bias
                correction step, modeled using cross-query comparisons and
                solved with MLE.
              </p>
              <p>
                You can try the models either through our API (<a
                  href="https://docs.zeroentropy.dev/models"
                  >https://docs.zeroentropy.dev/models</a
                >), or via HuggingFace (<a
                  href="https://huggingface.co/zeroentropy/zerank-1-small"
                  >https://huggingface.co/zeroentropy/zerank-1-small</a
                >).
              </p>
              <p>
                We would love this community's feedback on the models, and the
                training approach. A full technical report is also going to be
                released soon.
              </p>
              <p>Thank you!</p>
            </div>
          </section>
        </section>
        <section id="44582349">
          <h3>
            <a
              class="item"
              href="https://pubs.geoscienceworld.org/uwyo/rmg/article/60/1/1/657560/Denver-s-deepest-dinosaur"
              >Denver's Deepest Dinosaur</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 13:46:28</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44582349"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44581631">
          <h3>
            <a class="item" href="https://cppyy.readthedocs.io/en/latest/"
              >cppyy: Automatic Python-C++ Bindings</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 12:39:51</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44581631"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44581098">
          <h3>
            <a class="item" href="https://dataramen.xyz/"
              >Show HN: DataRamen, a Fast SQL Explorer with Automatic Joins and
              Data Navigation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 11:42:17</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44581098"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
            <div class="text">
              <p>
                You run it locally from the CLI (no cloud version yet), connect
                your databases, and you're ready to go. The goal is to let you
                explore and query data like you would in a spreadsheet:
                intuitive, fast, and without friction.
              </p>
              <p>Key features:</p>
              <p>
                - Automatic joins &amp; related data navigation: Right-click any
                row to instantly see related records in other tables (based on
                foreign keys or references).
              </p>
              <p>
                - Keyboard-driven UI: Hit N to jump to a table, F to filter, and
                so on, it’s optimized for speed so you can go from question to
                insight in seconds (this point is still in progress, I find it
                confortable, but the goal is to make it even better).
              </p>
              <p>
                - Named tabs with saved queries: Keep multiple tabs open with
                different queries, useful for comparing or cross-checking data.
                Tabs are saved, so you can get back to your queries at any time.
              </p>
              <p>
                - Instant edit &amp; insert: One click to edit or add rows, no
                need to write full queries.
              </p>
              <p>
                - Multi-DB support: Connect several databases and search across
                all of them.
              </p>
              <p>
                - Search across all columns: Find what you need even if you
                don't know the exact column.
              </p>
              <p>
                If you've ever felt slowed down by writing the same SQL over and
                over just to explore your data, this might save you a ton of
                time. I’d love feedback or suggestions, especially from folks
                who wrangle data often.
              </p>
              <p>
                Find more information on
                <a href="https://dataramen.xyz">https://dataramen.xyz</a>
              </p>
              <p>PS. don't be harsh on the logo, I did my best :)</p>
            </div>
          </section>
        </section>
        <section id="44580682">
          <h3>
            <a
              class="item"
              href="https://ostechnix.com/linux-reaches-5-desktop-market-share-in-usa/"
              >Linux Reaches 5% Desktop Market Share in USA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 10:37:08</span
              ><span class="points-container"
                >Points: <span class="points">795</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44580682"
                  >Comments</a
                ><span class="descendants">: 448</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44580257">
          <h3>
            <a class="item" href="https://github.com/aws/pgactive"
              >AWS open-sourced Postgres active-active replication extension</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 09:15:28</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44580257"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44579902">
          <h3>
            <a
              class="item"
              href="https://prm.ua/en/ukrainian-hackers-destroyed-the-it-infrastructure-of-a-russian-drone-manufacturer-what-is-known/"
              >Ukrainian hackers destroyed the IT infrastructure of Russian
              drone manufacturer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 08:18:34</span
              ><span class="points-container"
                >Points: <span class="points">458</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44579902"
                  >Comments</a
                ><span class="descendants">: 304</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44579717">
          <h3>
            <a
              class="item"
              href="https://www.cesarsotovalero.net/blog/i-am-switching-to-python-and-actually-liking-it.html"
              >I'm Switching to Python and Actually Liking It</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 07:44:32</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44579717"
                  >Comments</a
                ><span class="descendants">: 225</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44579317">
          <h3>
            <a
              class="item"
              href="https://mozillagfx.wordpress.com/2025/07/15/shipping-webgpu-on-windows-in-firefox-141/"
              >Shipping WebGPU on Windows in Firefox 141</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 06:32:47</span
              ><span class="points-container"
                >Points: <span class="points">255</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44579317"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44578510">
          <h3>
            <a class="item" href="https://github.com/vvaltchev/tilck"
              >Tilck: A Tiny Linux-Compatible Kernel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 03:50:00</span
              ><span class="points-container"
                >Points: <span class="points">228</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44578510"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44578490">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/cloudflare-1-1-1-1-incident-on-july-14-2025/"
              >Cloudflare 1.1.1.1 Incident on July 14, 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 03:44:39</span
              ><span class="points-container"
                >Points: <span class="points">429</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44578490"
                  >Comments</a
                ><span class="descendants">: 283</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44578143">
          <h3>
            <a
              class="item"
              href="https://geminiprotocol.net/news/2025_06_20.gmi"
              >Six Years of Gemini</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 02:37:37</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44578143"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44578070">
          <h3>
            <a class="item" href="https://gwern.net/ai-daydreaming"
              >LLM Daydreaming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 02:22:02</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44578070"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44577268">
          <h3>
            <a class="item" href="https://gpuhammer.com/"
              >GPUHammer: Rowhammer attacks on GPU memories are practical</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-16 @ 00:05:45</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44577268"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44573750">
          <h3>
            <a
              class="item"
              href="https://psychotechnology.substack.com/p/how-i-lost-my-backpack-with-passports"
              >How I Lost My Backpack with Passports and Laptop</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 17:35:35</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44573750"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44573195">
          <h3>
            <a class="item" href="https://calv.info/openai-reflections"
              >Reflections on OpenAI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 16:49:06</span
              ><span class="points-container"
                >Points: <span class="points">657</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44573195"
                  >Comments</a
                ><span class="descendants">: 349</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44572377">
          <h3>
            <a
              class="item"
              href="https://www.matthieulc.com/posts/shoggoth-mini"
              >Show HN: Shoggoth Mini – A soft tentacle robot powered by GPT-4o
              and RL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-15 @ 15:46:41</span
              ><span class="points-container"
                >Points: <span class="points">546</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44572377"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44565806">
          <h3>
            <a
              class="item"
              href="https://www.livescience.com/archaeology/romans/roman-dodecahedron-a-mysterious-12-sided-object-that-has-baffled-archaeologists-for-centuries"
              >Roman dodecahedron: 12-sided object has baffled archaeologists
              for centuries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-14 @ 22:00:08</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44565806"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44551359">
          <h3>
            <a class="item" href="https://github.com/danthegoodman1/bloomsearch"
              >Show HN: BloomSearch – Keyword search with hierarchical bloom
              filters</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-13 @ 16:02:19</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44551359"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                They're an _amazing_ data structure that, at a fixed size,
                tracks potential set membership. That means unlike normal b-tree
                indexes, they don't grow with the number of unique items in the
                dataset.
              </p>
              <p>
                This makes them great for "needle in a haystack" search (logs,
                document) as implementations like VictoriaMetrics and Bing's
                BitFunnel show. I've used them in the past, but they've never
                been center-stage in my projects.
              </p>
              <p>
                I wanted high cardinality keyword search for ANOTHER project...
                and, well, down the yak-shaving rabbit hole we go!
              </p>
              <p>BloomSearch brings this into an extensible Go package:</p>
              <p>
                - Very memory efficient via bloom filters and streaming row
                scans
              </p>
              <p>
                - DataStore and MetaStore interfaces for any backend (can be
                same or separate)
              </p>
              <p>
                - Hierarchical pruning via partitions, minmax indexes, and of
                course bloom filters
              </p>
              <p>
                - Search by field, token, or field:token with complex
                combinators
              </p>
              <p>
                - Disaggregated storage and compute for unbound ingest and query
                throughput
              </p>
              <p>
                And of course, you know I had to make a custom file format ^-^
                (FILE_FORMAT.MD)
              </p>
              <p>
                BloomSearch is optimized for massive concurrency, arbitrary
                cardinality and dataset size, and super low memory usage.
                There's still a lot on the table too in terms of size and
                performance optimizations, but I'm already super pleased with
                it. With distributed query processing I'm targeting &gt;100B
                rows/s over large datasets.
              </p>
              <p>
                I'm also excited to replace our big logging bill ~$0.003/GB for
                log storage with infinite retention and guilt-free querying :P
              </p>
            </div>
          </section>
        </section>
        <section id="44549413">
          <h3>
            <a class="item" href="https://github.com/Deathbyteacup/fluentbird"
              >Thunderbird: Fluent Windows 11 Design</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-13 @ 11:07:53</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44549413"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44549089">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/culture/open-questions/whats-happening-to-reading"
              >What's happening to reading?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-13 @ 10:16:48</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44549089"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44548449">
          <h3>
            <a class="item" href="https://atopile.io/atopile/introduction"
              >Atopile – Design circuit boards with code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-13 @ 08:05:37</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44548449"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44543630">
          <h3>
            <a
              class="item"
              href="http://unenumerated.blogspot.com/2012/07/pascals-scams.html"
              >Pascal's Scams (2012)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-12 @ 17:41:06</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44543630"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44541662">
          <h3>
            <a class="item" href="https://chaos.if.uj.edu.pl/~wojtek/MARS.COM/"
              >MARS.EXE → COM (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-12 @ 12:43:12</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44541662"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
