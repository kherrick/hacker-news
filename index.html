<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="47179038">
          <h3>
            <a
              class="item"
              href="https://www.digitaliser.dk/mitid/nyt-fra-mitid/2026/feb/driftsforstyrrelser-mitid"
              >MitID, Denmarks sole digital ID, has been down for over an hour
              and counting</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 10:52:07</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47179038"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47178863">
          <h3>
            <a
              class="item"
              href="https://f-droid.org/2026/02/26/board-of-directors-nominations.html"
              >F-Droid Board of Directors nominations 2026</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 10:27:29</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47178863"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47178836">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/cddnry8dnl7o"
              >Dyson settles forced labour suit in landmark UK case</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 10:21:40</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47178836"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47178344">
          <h3>
            <a
              class="item"
              href="http://dionisiydk.blogspot.com/2026/02/bpatterns-rewrite-engine-with-smalltalk.html"
              >Working on Pharo Smalltalk: BPatterns: Rewrite Engine with
              Smalltalk Style</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 09:04:48</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47178344"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47178176">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/ubicloud/jobs/j4bntEJ-software-engineer"
              >Ubicloud (YC W24): Software Engineer – $95-$250K in Turkey,
              Netherlands, CA</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 08:45:02</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47177877">
          <h3>
            <a
              class="item"
              href="https://skoolkit.ca/disassemblies/manic_miner/"
              >The complete Manic Miner disassembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 08:02:52</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47177877"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47177186">
          <h3>
            <a
              class="item"
              href="https://gwern.net/doc/sociology/2003-ashforth.pdf"
              >The normalization of corruption in organizations (2003) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 06:21:23</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47177186"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47176257">
          <h3>
            <a
              class="item"
              href="https://moultano.wordpress.com/2026/02/22/the-hunt-for-dark-breakfast/"
              >The Hunt for Dark Breakfast</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 03:49:48</span
              ><span class="points-container"
                >Points: <span class="points">263</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47176257"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47176239">
          <h3>
            <a class="item" href="https://github.com/Frikallo/parakeet.cpp"
              >Parakeet.cpp – Parakeet ASR inference in pure C++ with Metal GPU
              acceleration</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 03:48:05</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47176239"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47176150">
          <h3>
            <a
              class="item"
              href="https://www.researchgate.net/publication/294484774_Compact_disc_story"
              >Compact disc story (1998)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 03:33:28</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47176150"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47173121">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/news/statement-department-of-war"
              >Statement from Dario Amodei on our discussions with the
              Department of War</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 22:42:47</span
              ><span class="points-container"
                >Points: <span class="points">2046</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47173121"
                  >Comments</a
                ><span class="descendants">: 1093</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47172119">
          <h3>
            <a
              class="item"
              href="https://twitter.com/jack/status/2027129697092731343"
              >Layoffs at Block</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 21:17:56</span
              ><span class="points-container"
                >Points: <span class="points">751</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47172119"
                  >Comments</a
                ><span class="descendants">: 824</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.cnbc.com/2026/02/26/block-laying-off-about-4000-employees-nearly-half-of-its-workforce.html"
                >https://www.cnbc.com/2026/02/26/block-laying-off-about-4000-...</a
              >
              <p>
                <a
                  href="https://www.marketwatch.com/story/block-plans-to-lay-off-nearly-half-its-staff-in-deliberate-and-bold-embrace-of-ai-81e99247"
                  >https://www.marketwatch.com/story/block-plans-to-lay-off-nea...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="47171233">
          <h3>
            <a
              class="item"
              href="https://stackoverflow.com/questions/818255/what-does-21-mean"
              >What does " 2&amp;gt;&amp;amp;1 " mean?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 19:58:46</span
              ><span class="points-container"
                >Points: <span class="points">310</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47171233"
                  >Comments</a
                ><span class="descendants">: 172</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47170174">
          <h3>
            <a class="item" href="https://www.usecardboard.com/"
              >Launch HN: Cardboard (YC W26) – Agentic video editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 18:38:38</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47170174"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.usecardboard.com"
                >https://www.usecardboard.com</a
              >). It lets you go from raw footage to an edited video by
              describing what you want in natural language. There’s a demo video
              at
              <a href="https://www.usecardboard.com/share/fUN2i9ft8B46"
                >https://www.usecardboard.com/share/fUN2i9ft8B46</a
              >, and you can try the product out at
              <a href="https://demo.usecardboard.com"
                >https://demo.usecardboard.com</a
              >
              (no login required!)
              <p>
                People sit on mountains of raw assets - product walkthroughs,
                customer interviews, travel videos, screen recordings,
                changelogs, etc. - that could become testimonials, ads, vlogs,
                launch videos, etc.
              </p>
              <p>
                Instead they sit in cloud storage / hard drives because getting
                to a first cut takes hours of scrubbing through the raw footage
                manually, arranging clips in correct sequence, syncing music,
                exporting, uploading to a cloud storage to share, and then
                getting feedback on WhatsApp/iMessage/Slack, then re-doing the
                same thing again till everyone is happy.
              </p>
              <p>
                We grew up together and have been friends for 15 years. Saksham
                creates content on socials with ~250K views/month and kept
                hitting the wall where editing took longer than creating. Ishan
                was producing launch videos for HackerRank's all-hands demo days
                and spent most of his time on cuts and sequencing rather than
                storytelling. We both felt that while tools like Premiere Pro
                and DaVinci are powerful, they have a steep learning curve and
                involve lots of manual labor.
              </p>
              <p>
                So we built Cardboard. You tell it to "make a 60s recap from
                this raw footage" or "cut this into a 20s ad" or "beat-sync this
                to the music I just added" and it proposes a first draft on the
                timeline that you can refine further.
              </p>
              <p>
                We built a custom hardware-accelerated renderer on WebCodecs /
                WebGL2, there’s no server-side rendering, no plugins, everything
                runs in your browser (client-side). Video understanding tasks go
                through a series of Cloud VLMs + traditional ML models, and we
                use third party foundational models for agent orchestration. We
                also give a dropdown for this to the end user.
              </p>
              <p>
                We've shipped 13 releases since November (<a
                  href="https://www.usecardboard.com/changelog"
                  >https://www.usecardboard.com/changelog</a
                >). The editor handles multi-track timelines with keyframe
                animations, shot detection, beat sync via percussion detection,
                voiceover generation, voice cloning, background removal,
                multilingual captions that are spatially aware of subjects in
                frame, and Premiere Pro/DaVinci/FCP XML exports so you can move
                projects into your existing tools if you want.
              </p>
              <p>
                Where we're headed next: real-time collaboration (video git) to
                avoid inefficient feedback loops, and eventually a prediction
                engine that learns your editing patterns and suggests the next
                low entropy actions - similar to how Cursor's tab completion
                works, but for timeline actions.
              </p>
              <p>
                We believe that video creation tools today are stuck where
                developer tools were in the early 2000s: local-first, zero
                collaboration with really slow feedback loops.
              </p>
              <p>
                Here are some videos that we made with Cardboard: -
                <a href="https://www.usecardboard.com/share/YYsstWeWE9KI"
                  >https://www.usecardboard.com/share/YYsstWeWE9KI</a
                >
                -
                <a href="https://www.usecardboard.com/share/nyT9oj93sm1e"
                  >https://www.usecardboard.com/share/nyT9oj93sm1e</a
                >
                -
                <a href="https://www.usecardboard.com/share/xK9mP2vR7nQ4"
                  >https://www.usecardboard.com/share/xK9mP2vR7nQ4</a
                >
              </p>
              <p>We would love to hear your thoughts/feedback.</p>
              <p>We'll be in the comments all day :)</p>
            </div>
          </section>
        </section>
        <section id="47170157">
          <h3>
            <a class="item" href="https://osmand.net/blog/fast-routing/"
              >OsmAnd’s Faster Offline Navigation (2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 18:37:59</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47170157"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47169757">
          <h3>
            <a
              class="item"
              href="https://amplifying.ai/research/claude-code-picks"
              >What Claude Code chooses</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 18:12:26</span
              ><span class="points-container"
                >Points: <span class="points">452</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47169757"
                  >Comments</a
                ><span class="descendants">: 178</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47168726">
          <h3>
            <a
              class="item"
              href="https://cs.uml.edu/~fredm/courses/91.308-spr05/files/palmdocs/uiguidelines.pdf"
              >Palm OS User Interface Guidelines (2003) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 17:01:05</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47168726"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47167763">
          <h3>
            <a
              class="item"
              href="https://www.ndss-symposium.org/wp-content/uploads/2026-f1282-paper.pdf"
              >AirSnitch: Demystifying and breaking client isolation in Wi-Fi
              networks [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 15:55:48</span
              ><span class="points-container"
                >Points: <span class="points">366</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47167763"
                  >Comments</a
                ><span class="descendants">: 169</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47166264">
          <h3>
            <a
              class="item"
              href="https://tuananh.net/2026/02/25/buildkit-docker-hidden-gem/"
              >BuildKit: Docker's Hidden Gem That Can Build Almost Anything</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 14:05:46</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47166264"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47165840">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/mathematicians-make-a-breakthrough-on-2-000-year-old-problem-of-curves/"
              >Quantitativity on the number of rational points in the Mordell
              conjecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 13:32:46</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47165840"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47150674">
          <h3>
            <a
              class="item"
              href="https://paultendo.github.io/posts/confusable-vision-visual-similarity/"
              >I rendered 1,418 confusables over 230 fonts. Most aren't
              confusable to the eye</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-25 @ 12:30:36</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47150674"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47149829">
          <h3>
            <a class="item" href="https://antirez.com/news/160"
              >Implementing a clear room Z80 / ZX Spectrum emulator with Claude
              Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-25 @ 10:36:43</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47149829"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47146487">
          <h3>
            <a
              class="item"
              href="https://blog.janestreet.com/can-you-reverse-engineer-our-neural-network/"
              >Can you reverse engineer our neural network?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-25 @ 02:20:13</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47146487"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47139911">
          <h3>
            <a class="item" href="https://growingswe.com/blog/quadtrees"
              >An interactive intro to quadtrees</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 17:31:05</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47139911"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47138698">
          <h3>
            <a
              class="item"
              href="https://nand2mario.github.io/posts/2026/80386_protection/"
              >80386 Protection</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 15:56:32</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47138698"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47129801">
          <h3>
            <a
              class="item"
              href="https://internals-for-interns.com/posts/go-memory-allocator/"
              >Understanding the Go Runtime: The Memory Allocator</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 22:18:23</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47129801"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47128645">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/lifeandstyle/2026/feb/22/a-new-start-after-60-i-baked-a-pie-every-day-for-a-year-and-it-changed-my-life"
              >I baked a pie every day for a year</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 20:54:34</span
              ><span class="points-container"
                >Points: <span class="points">283</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47128645"
                  >Comments</a
                ><span class="descendants">: 184</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47124999">
          <h3>
            <a class="item" href="https://plugsocketmuseum.nl/index.html"
              >Museum of Plugs and Sockets</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 16:58:58</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47124999"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47124454">
          <h3>
            <a
              class="item"
              href="https://www.openculture.com/2026/02/an-introduction-to-the-codex-seraphinianus.html"
              >An Introduction to the Codex Seraphinianus, the Strangest Book
              Ever Published</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 16:23:01</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47124454"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47123109">
          <h3>
            <a class="item" href="https://www.asimov.press/p/agar"
              >The Origins of Agar</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-23 @ 14:56:58</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47123109"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
