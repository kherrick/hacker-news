<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="35918660">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/blog-post/vaccine-pancreatic-cancer-treatment"
              >A vaccine for pancreatic cancer treatment?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 16:44:05</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35918660"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35918146">
          <h3>
            <a
              class="item"
              href="https://www.salon.com/2023/03/19/dont-believe-the-hype-why-chatgpt-is-not-the-holy-grail-of-ai-research/"
              >Don't believe the hype: why ChatGPT is not the “holy grail” of AI
              research</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 16:06:36</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35918146"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35917912">
          <h3>
            <a
              class="item"
              href="https://twitter.com/elonmusk/status/1657050349608501249"
              >I am excited to welcome Linda Yaccarino as the new CEO of
              Twitter</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 15:51:20</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35917912"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35917899">
          <h3>
            <a
              class="item"
              href="https://www.logicloop.com/ai-sql-query-generator"
              >Show HN: AI SQL Copilot LogicLoop – AI to Generate, Optimize and
              Debug SQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 15:50:37</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35917899"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’m the founder of LogicLoop AI SQL Copilot. If you’re familiar
                with querying data, you’ve probably spent quite some time
                manually writing and debugging SQL queries. If you’re a
                non-technical business user, you will often need to wait and ask
                engineers to help you write the SQL to pull the data you need.
                If you’re an engineer, you might be overwhelmed by all these
                data pull requests from business users.
              </p>
              <p>
                With LogicLoop's AI SQL Helper Suite, you can ask your data
                questions using natural language. Ask AI to discover patterns,
                suggest, write, fix and optimize SQL queries directly on your
                custom data schema. You can get results on your own data
                instantly. Once you have your results, you can visualize them on
                a dashboard or set up recurring alerts and automations. AI makes
                data more accessible for business users, and faster to work with
                for engineers/analysts.
              </p>
              <p>
                Some ways LogicLoop's AI SQL Helper Suite has helped early
                users: - Business operations teams can find top customers to
                email and automate outreach - Risk analysts can discover gaps in
                their fraud monitoring rules to flag more bad actors - Data
                engineers can fix and optimize long queries to reduce costs
              </p>
              <p>
                We don’t think this is a panacea that can replace data analysts,
                but we think this will make data analysis faster and more
                accessible to more people. Would love for you to give it a try
                and share any feedback. Thank you.
              </p>
            </div>
          </section>
        </section>
        <section id="35917361">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2023/05/11/technology/us-chiplets-tech.html"
              >U.S. Focuses on Invigorating Chiplets' to Stay Cuting- Edge in
              Tech</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 15:09:11</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35917361"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35917152">
          <h3>
            <a
              class="item"
              href="https://newsletter.mollywhite.net/p/andreessen-horowitzs-state-of-crypto"
              >Narrative over Numbers: Andreessen Horowitz's State of Crypto
              Report</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 14:51:53</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35917152"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35917145">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Pax_Calendar"
              >Pax Calendar</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 14:51:20</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35917145"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35917030">
          <h3>
            <a
              class="item"
              href="https://www.makeuseof.com/things-you-can-do-with-kde-connect-on-linux/"
              >Things You Can Do with KDE Connect on Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 14:42:59</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35917030"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35916064">
          <h3>
            <a
              class="item"
              href="https://jvns.ca/blog/2023/05/12/introducing-implement-dns-in-a-weekend/"
              >Implement DNS in a Weekend</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 13:37:45</span
              ><span class="points-container"
                >Points: <span class="points">285</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35916064"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35915923">
          <h3>
            <a
              class="item"
              href="https://microcorelabs.wordpress.com/2023/04/28/ibm-pc-8088-replaced-with-a-motorola-68000/"
              >IBM PC 8088 replaced with a Motorola 68000</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 13:25:54</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35915923"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35914929">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35914929"
              >Kalshi (YC W19) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 12:00:05</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <a href="http://kalshi.com/careers">http://kalshi.com/careers</a>
              - if you don't see a role that aligns, feel free to drop a
              "Generic Application"
              <p>
                We're a regulated financial exchange, and the first to allow
                people to trade directly on economic events such as inflation,
                interest rates, whether the debt ceiling will be raised, whether
                student loans will be forgiven, and more. If you're hungry and
                want to build the next stage of financial markets, reach out!
              </p>
            </div>
          </section>
        </section>
        <section id="35914726">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=IFe9wiDfb0E"
              >Welcome to Life: the singularity, ruined by lawyers (2012)
              [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 11:38:04</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35914726"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35914473">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35914473"
              >Ask HN: Where to Feature Startup on Spanish, Portuguese, German,
              French?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 10:55:57</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35914473"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              <p>
                I want to collect websites where I can feature (list) my
                SaaS-startup for Spanish, Portuguese, German and French speaking
                audience. I know that there're a lot of listing's set for
                English speaking but I haven't met for Spanish, Portuguese,
                German and French.
              </p>
              <p>
                If you know some that websites, please, write it in the
                comments. I'll put it together in a single list and then post it
                here.
              </p>
            </div>
          </section>
        </section>
        <section id="35914447">
          <h3>
            <a class="item" href="https://zlib.net/pigz/"
              >Pigz: Parallel gzip for modern multi-processor, multi-core
              machines</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 10:51:40</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35914447"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35913628">
          <h3>
            <a
              class="item"
              href="https://knowablemagazine.org/article/health-disease/2023/what-if-we-tolerated-diseases"
              >What if we tolerated diseases?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 08:52:56</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35913628"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35913572">
          <h3>
            <a class="item" href="https://unrelatedwords.com"
              >Unrelated Words Puzzle</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 08:43:27</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35913572"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35913260">
          <h3>
            <a
              class="item"
              href="https://www.laphamsquarterly.org/roundtable/how-much-smidgen"
              >How much is a smidgen?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 07:53:33</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35913260"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35913241">
          <h3>
            <a class="item" href="https://bqnpad.mechanize.systems/">BQNPAD</a>
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 07:51:32</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35913241"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35913188">
          <h3>
            <a
              class="item"
              href="https://www.nybooks.com/articles/1992/12/17/the-one-and-only-2/"
              >The Life and Science of Richard Feynman (1992)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 07:43:15</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35913188"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35913173">
          <h3>
            <a
              class="item"
              href="https://evadb.readthedocs.io/en/stable/index.html"
              >Eva AI-Relational Database System</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 07:40:31</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35913173"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35913083">
          <h3>
            <a
              class="item"
              href="https://www.chicagomag.com/chicago-magazine/may-2023/the-last-gamble-of-tokyo-joe/"
              >The Last Gamble of Tokyo Joe</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 07:28:04</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35913083"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35912374">
          <h3>
            <a
              class="item"
              href="https://scientificcoder.com/extreme-multi-threading-c-and-julia-19-integration"
              >Extreme Multi-Threading: C++ and Julia 1.9 Integration</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 05:44:55</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35912374"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35912318">
          <h3>
            <a class="item" href="https://www.zelda.com/tears-of-the-kingdom/"
              >The Legend of Zelda: Tears of the Kingdom Release</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 05:38:18</span
              ><span class="points-container"
                >Points: <span class="points">553</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35912318"
                  >Comments</a
                ><span class="descendants">: 591</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35911406">
          <h3>
            <a class="item" href="https://futo.org/"
              >FUTO – An independent software lab and grant fund</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-12 @ 03:07:05</span
              ><span class="points-container"
                >Points: <span class="points">229</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35911406"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35906783">
          <h3>
            <a
              class="item"
              href="https://tedgioia.substack.com/p/how-an-ibm-computer-learned-to-sing"
              >An IBM computer learned to sing in 1961</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-11 @ 19:02:42</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35906783"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35905437">
          <h3>
            <a class="item" href="https://www.boringreport.org/"
              >Show HN: Boring Report, a news app that uses AI to
              desensationalize the news</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-11 @ 17:32:41</span
              ><span class="points-container"
                >Points: <span class="points">1097</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35905437"
                  >Comments</a
                ><span class="descendants">: 311</span></span
              >
            </h4>
            <div class="text">
              <p>
                App Link:
                <a
                  href="https://apps.apple.com/us/app/boring-report-news-by-ai/id6446786839?itsct=apps_box_link&amp;itscg=30200"
                  >https://apps.apple.com/us/app/boring-report-news-by-ai/id644...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="35904988">
          <h3>
            <a class="item" href="https://histre.com/hn/"
              >Show HN: Hacker News with Tags</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-11 @ 17:02:39</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35904988"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
            <div class="text">
              <p>
                One of the features of histre is to auto-organize your
                knowledge. I thought that a fun way to demo that could be to
                apply that to the Hacker News front page.
              </p>
              <p>
                This page mirrors HN with tags automatically applied:
                <a href="https://histre.com/hn/">https://histre.com/hn/</a>
              </p>
              <p>
                You can filter by or exclude multiple tags. For example, if
                you’re tired of posts related to ai and politics, this will
                remove them
                <a href="https://histre.com/hn/?tags=+all-ai-politics"
                  >https://histre.com/hn/?tags=+all-ai-politics</a
                >
              </p>
              <p>The tags for the posts are picked by gpt-3.5</p>
              <p>
                You can get these tags inside Hacker News itself with these
                open-source browser extensions for Chrome and Firefox:
              </p>
              <p>
                Source:
                <a href="https://gitlab.com/histre/hn-tags"
                  >https://gitlab.com/histre/hn-tags</a
                >
              </p>
              <p>
                Chrome:
                <a
                  href="https://chrome.google.com/webstore/detail/hacker-news-tags/iinmfmdejkafpmakbofheoiddalpobca"
                  >https://chrome.google.com/webstore/detail/hacker-news-tags/i...</a
                >
              </p>
              <p>
                Firefox:
                <a
                  href="https://addons.mozilla.org/en-US/firefox/addon/hacker-news-tags/"
                  >https://addons.mozilla.org/en-US/firefox/addon/hacker-news-t...</a
                >
              </p>
              <p>
                People use
                <a href="https://histre.com/">https://histre.com/</a> to keep
                track of all kinds of web research, make highlights, collaborate
                with their teams, generate documentation from chat
                conversations, automatically extract information from pages and
                create comparison tables, etc. I’m excited to be building a
                comprehensive knowledge tool.
              </p>
              <p>
                If you can play with it and share your thoughts, I’d really
                appreciate it.
              </p>
            </div>
          </section>
        </section>
        <section id="35904773">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/index/100k-context-windows"
              >100K Context Windows</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-11 @ 16:46:19</span
              ><span class="points-container"
                >Points: <span class="points">853</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35904773"
                  >Comments</a
                ><span class="descendants">: 364</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35902942">
          <h3>
            <a
              class="item"
              href="https://www.readysetcloud.io/blog/allen.helton/serverless-integration-speed-test/"
              >Comparing Speed of Lambda, Step Functions, App Runner, and Direct
              Integrations</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-11 @ 14:47:39</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35902942"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35901642">
          <h3>
            <a
              class="item"
              href="https://blog.ganssle.io/articles/2018/03/pytz-fastest-footgun.html"
              >Pytz: The Fastest Footgun in the West (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-05-11 @ 13:22:44</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35901642"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
