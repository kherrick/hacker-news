<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43771365">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43771365"
              >Show HN: Node.js video tutorials where you can edit and run the
              code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 12:35:49</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43771365"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm Sindre, CTO of Scrimba (YC S20). We originally launched
                Scrimba to make video learning more interactive for aspiring
                frontend developers. So instead of passively watching videos,
                you can jump in an experiment with the code directly inside the
                video player. Since launch, almost two million people have used
                Scrimba to grow their skills.
              </p>
              <p>
                However, one limitation is that we've only supported frontend
                code, as our interactive videos run in the browser, whereas most
                of our learners want to go fullstack—building APIs, handling
                auth, working with databases, and so forth.
              </p>
              <p>
                To fix this, we spent the last 6 months integrating StackBlitz
                WebContainers into Scrimba. This enables a full Node.js
                environment—including a terminal, shell, npm access, and a
                virtual file system—directly inside our video player. Everything
                runs in the browser.
              </p>
              <p>
                Here is a 2-minute recorded demo:
                <a href="https://scrimba.com/s08dpq3nom"
                  >https://scrimba.com/s08dpq3nom</a
                >
              </p>
              <p>
                If you want to see more, feel free to enroll into any of the
                seven fullstack courses we've launched so far, on subject like
                Node, Next, Express, SQL, Vite, and more. We've opened them up
                for Hacker News today so that you don't even need to create an
                account to watch the content:
              </p>
              <p>
                <a href="https://scrimba.com/fullstack"
                  >https://scrimba.com/fullstack</a
                >
              </p>
              <p><i>Other notable highlights about our "IDE videos":</i></p>
              <p>
                - Based on events (code edits, cursor moves, etc) instead of
                pixels
              </p>
              <p>- Roughly 100x smaller than traditional videos</p>
              <p>- Recording is simple: just talk while you code</p>
              <p>
                - Can be embedded in blogs, docs, or courses, like MDN does
                here:
                <a
                  href="https://developer.mozilla.org/en-US/curriculum/core/css-fundamentals/"
                  >https://developer.mozilla.org/en-US/curriculum/core/css-fund...</a
                >
              </p>
              <p>
                - Entirely built in Imba, a language I created myself:
                <a href="https://news.ycombinator.com/item?id=28207662"
                  >https://news.ycombinator.com/item?id=28207662</a
                >
              </p>
              <p>
                We think this format could be useful for open-source maintainers
                and API-focused teams looking to create interactive docs or
                walkthroughs. Our videos are already embedded by MDN, LangChain,
                and Coursera.
              </p>
              <p>
                If you maintain a library or SDK and want an interactive video
                about it, let us know—happy to record one for free that you can
                use however you like.
              </p>
              <p>
                Would love to answer any questions or hear people's feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="43770797">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/article/us-usa-cyber-mozilla/mozilla-blocks-uae-bid-to-become-an-internet-security-guardian-after-hacking-reports-idUSKCN1U42CA/"
              >Mozilla blocks UAE for internet security guardian after hacking
              reports (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 11:20:24</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43770797"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43770615">
          <h3>
            <a
              class="item"
              href="https://gbragafibra.github.io/2025/01/08/collatz_ant2.html"
              >Collatz's Ant</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 10:52:08</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43770615"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43770446">
          <h3>
            <a
              class="item"
              href="https://www.bitoff.org/geocoding-apis-comparison/"
              >Geocoding APIs compared: Pricing, free tiers and terms of use</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 10:21:58</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43770446"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43770445">
          <h3>
            <a
              class="item"
              href="https://minc.commandlinerevolution.nl/english/home.html"
              >MinC Is Not Cygwin</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 10:21:57</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43770445"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43770396">
          <h3>
            <a
              class="item"
              href="https://www.politico.eu/article/eu-fines-apple-meta-breaking-europe-digital-markets-act-dma/"
              >EU fines Apple €500M and Meta €200M</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 10:12:55</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43770396"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43770382">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/04/23/trump_us_security/"
              >America's cyber defenses are being dismantled from the inside</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 10:10:28</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43770382"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43770337">
          <h3>
            <a
              class="item"
              href="https://ca.finance.yahoo.com/news/apple-fined-570-million-meta-094701712.html"
              >Apple and Meta fined millions for breaching EU law</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 10:01:04</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43770337"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43770312">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/ai/2025/04/chatgpt-head-tells-court-openai-is-interested-in-buying-chrome/"
              >OpenAI wants to buy Chrome and make it an "AI-first"
              experience</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 09:55:09</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43770312"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43770228">
          <h3>
            <a
              class="item"
              href="https://watershedmagazine.com/features/sixty-years-on-we-still-dream-of-the-arrow/"
              >Sixty Years On, We Still Dream of the Arrow</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 09:40:11</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43770228"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43769936">
          <h3>
            <a
              class="item"
              href="https://sebs.website/blog/the%20gruen-transfer-is-consuming-the-internet"
              >The Gruen Transfer is consuming the internet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 08:49:34</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43769936"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43769486">
          <h3>
            <a
              class="item"
              href="https://blog.edward-li.com/tech/advanced-python-features/"
              >Advanced Python Features</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 07:21:44</span
              ><span class="points-container"
                >Points: <span class="points">250</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43769486"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43769482">
          <h3>
            <a
              class="item"
              href="https://nlnet.nl/news/2025/20250422-announcement-grants-CommonsFund.html"
              >Open Source Projects Receive Funding to Reclaim the Public
              Internet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 07:20:33</span
              ><span class="points-container"
                >Points: <span class="points">295</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43769482"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43769478">
          <h3>
            <a
              class="item"
              href="https://www.nayuki.io/page/pixel-is-a-unit-of-length-and-area"
              >Pixel is a unit of length and area</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 07:20:19</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43769478"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43769461">
          <h3>
            <a
              class="item"
              href="https://ebpfchirp.substack.com/p/why-does-my-ebpf-program-work-on"
              >Why Does My eBPF Program Work on One Kernel but Fail on
              Another?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 07:17:16</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43769461"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43769201">
          <h3>
            <a
              class="item"
              href="https://www.historytoday.com/archive/behind-times/ghosts-gaelic"
              >The Ghosts of Gaelic</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 06:23:10</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43769201"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43768421">
          <h3>
            <a
              class="item"
              href="https://github.com/godotengine/godot/pull/105628"
              >Native visionOS platform support</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-23 @ 03:37:05</span
              ><span class="points-container"
                >Points: <span class="points">260</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43768421"
                  >Comments</a
                ><span class="descendants">: 165</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43767058">
          <h3>
            <a class="item" href="https://meaning-machine.streamlit.app"
              >Meaning Machine – Visualize how LLMs break down and simulate
              meaning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 22:55:09</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43767058"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43766728">
          <h3>
            <a
              class="item"
              href="https://eb43.github.io/articles/fast-charging-technologies-in-detail.html"
              >How to quickly charge your smartphone: fast charging technologies
              in detail</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 22:00:36</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43766728"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43766715">
          <h3><a class="item" href="https://csshell.com/">CSS Hell</a></h3>
          <section>
            <h4>
              <span>2025-04-22 @ 21:58:50</span
              ><span class="points-container"
                >Points: <span class="points">166</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43766715"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43766200">
          <h3>
            <a
              class="item"
              href="https://blog.atuin.sh/atuin-desktop-runbooks-that-run/"
              >Atuin Desktop: Runbooks That Run</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 20:54:52</span
              ><span class="points-container"
                >Points: <span class="points">455</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43766200"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43765011">
          <h3>
            <a class="item" href="https://github.com/alexykn/sapphire"
              >Sapphire: Rust based package manager for macOS (Homebrew
              replacement)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 18:39:20</span
              ><span class="points-container"
                >Points: <span class="points">382</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43765011"
                  >Comments</a
                ><span class="descendants">: 245</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43763967">
          <h3>
            <a class="item" href="https://github.com/rowboatlabs/rowboat"
              >Show HN: Rowboat – Open-source IDE for multi-agent systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 16:33:21</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43763967"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.rowboatlabs.com/"
                >https://www.rowboatlabs.com/</a
              >), an AI-assisted IDE for building and managing multi-agent
              systems. You start with a single agent, then scale up to teams of
              agents that work together, use MCP tools, and improve over time -
              all through a chat-based copilot.
              <p>
                Our repo is
                <a href="https://github.com/rowboatlabs/rowboat"
                  >https://github.com/rowboatlabs/rowboat</a
                >, docs are at
                <a href="https://docs.rowboatlabs.com/"
                  >https://docs.rowboatlabs.com/</a
                >, and there’s a demo video here:
                <a href="https://youtu.be/YRTCw9UHRbU"
                  >https://youtu.be/YRTCw9UHRbU</a
                >
              </p>
              <p>
                It’s becoming clear that real-world agentic systems work best
                when multiple agents collaborate, rather than having one agent
                attempt to do everything. This isn’t too surprising - it’s a bit
                like how good code consists of multiple functions that each do
                one thing, rather than cramming everything into one function.
              </p>
              <p>
                For example, a travel assistant works best when different agents
                handle specialized tasks: one agent finds the best flights,
                another optimizes hotel selections, and a third organizes the
                itinerary. This modular approach makes the system easier to
                manage, debug, and improve over time.
              </p>
              <p>
                OpenAI’s Agents SDK provides a neat Python library to support
                this, but building reliable agentic systems requires constant
                iterations and tweaking - e.g. updating agent instructions
                (which can quickly get as complex as actual code), connecting
                tools, and testing the system and incorporating feedback.
                Rowboat is an AI IDE to do all this. Rowboat is to AI agents
                what Cursor is to code.
              </p>
              <p>
                We’ve taken a code-like approach to agent instructions
                (prompts). There are special keywords to directly reference
                other agents, tools or prompts - which are highlighted in the
                UI. The copilot is the best way to create and edit these
                instructions - each change comes with a code-style diff.
              </p>
              <p>
                You can give agents access to tools by integrating any MCP
                server or connecting your own functions through a webhook. You
                can instruct the agents on when to use specific tools via
                ‘@mentions’ in the agent instruction. To enable quick testing,
                we added a way to mock tool responses using LLM calls.
              </p>
              <p>
                Rowboat playground lets you test and debug the assistants as you
                build them. You can see agent transfers, tool invocations and
                tool responses in real-time. The copilot has the context of the
                chat, and can improve the agent instructions based on feedback.
                For example, you could say ‘The agent shouldn’t have done x
                here. Fix this’ and the copilot can go and make this fix.
              </p>
              <p>
                You can integrate agentic systems built in Rowboat into your
                application via the HTTP API or the Python SDK (‘pip install
                rowboat’). For example, you can build user-facing chatbots,
                enterprise workflows and employee assistants using Rowboat.
              </p>
              <p>
                We’ve been working with LLMs since GPT-1 launched in 2018. Most
                recently, we built Coinbase’s support chatbot after our last AI
                startup was acquired by them.
              </p>
              <p>
                Rowboat is Apache 2.0 licensed, giving you full freedom to
                self-host, modify, or extend it however you like.
              </p>
              <p>
                We’re excited to share Rowboat with everyone here. We’d love to
                hear your thoughts!
              </p>
            </div>
          </section>
        </section>
        <section id="43763688">
          <h3>
            <a
              class="item"
              href="https://clickhouse.com/blog/clickhouse-gets-lazier-and-faster-introducing-lazy-materialization"
              >ClickHouse gets lazier and faster: Introducing lazy
              materialization</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 16:03:32</span
              ><span class="points-container"
                >Points: <span class="points">315</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43763688"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43763614">
          <h3>
            <a
              class="item"
              href="https://uwplse.org/2025/03/31/Algebraic-Knitting.html"
              >Algebraic Semantics for Machine Knitting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 15:55:12</span
              ><span class="points-container"
                >Points: <span class="points">227</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43763614"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43747283">
          <h3>
            <a
              class="item"
              href="https://rietta.com/blog/child-learning-with-old-software/"
              >Restoring Old Software for Child Learning Safety</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-20 @ 23:23:43</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43747283"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43746532">
          <h3>
            <a
              class="item"
              href="https://www.thepythoncodingstack.com/p/demystifying-python-decorators"
              >Demystifying decorators: They don't need to be cryptic</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-20 @ 21:07:03</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43746532"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43740803">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41586-025-08839-w"
              >Subnanosecond Flash Memory</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-20 @ 01:13:41</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43740803"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43735882">
          <h3>
            <a
              class="item"
              href="https://nautil.us/the-last-of-their-kind-1204387/"
              >The Last of Their Kind</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-19 @ 12:11:49</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43735882"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43734911">
          <h3>
            <a class="item" href="https://www.solidjs.com/"
              >Solidjs: Simple and performant reactivity for building user
              interfaces</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-19 @ 07:50:38</span
              ><span class="points-container"
                >Points: <span class="points">228</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43734911"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
