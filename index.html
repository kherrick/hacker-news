<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39790365">
          <h3>
            <a
              class="item"
              href="https://github.com/jgthms/bulma/releases/tag/1.0.0"
              >The Bulma CSS framework reaches 1.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 13:12:43</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39790365"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39790003">
          <h3>
            <a class="item" href="https://webtag.io"
              >Show HN: Free Plain-Text Bookmarking</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 12:28:46</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39790003"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39789920">
          <h3>
            <a
              class="item"
              href="https://www.construction-physics.com/p/why-is-it-so-hard-to-build-an-airport"
              >Why is it so hard to build an airport?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 12:18:38</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39789920"
                  >Comments</a
                ><span class="descendants">: 181</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39789790">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/aviator/jobs/svf18r9-senior-software-engineer-founding-team"
              >Aviator (YC S21) is hiring engineers to build the DevEx
              platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 12:00:35</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39789139">
          <h3>
            <a
              class="item"
              href="https://aeon.co/essays/my-grandfather-paul-tillich-the-unbelieving-theologian"
              >My grandfather Paul Tillich, the unbelieving theologian Essays</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 10:19:53</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39789139"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39788322">
          <h3>
            <a
              class="item"
              href="https://umarbutler.com/mapping-almost-every-law-regulation-and-case-in-australia/"
              >Show HN: Mapping almost every law, regulation and case in
              Australia</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 07:53:38</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39788322"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              <p>
                After months of hard work, I am excited to share the first ever
                semantic map of Australian law.
              </p>
              <p>
                My map represents the first attempt to map Australian laws,
                cases and regulations across the Commonwealth, States and
                Territories semantically, that is, by their underlying meaning.
              </p>
              <p>
                Each point on the map is a unique document in the Open
                Australian Legal Corpus, the largest open database of Australian
                law (which, full disclosure, I created). The closer any two
                points are on the map, the more similar they are in underlying
                meaning.
              </p>
              <p>
                As I cover in my article, there’s a lot you can learn by mapping
                Australian law. Some of the most interesting insights to come
                out of this initiative are that:
              </p>
              <p>
                ⦁ Migration, family and substantive criminal law are the most
                isolated branches of case law on the map;
              </p>
              <p>
                ⦁ Migration, family and substantive criminal law are the most
                distant branches of case law from legislation on the map;
              </p>
              <p>
                ⦁ Development law is the closest branch of case law to
                legislation on the map;
              </p>
              <p>
                ⦁ Case law is more of a continuum than a rigidly defined
                structure and the borders between branches of case law can often
                be quite porous; and
              </p>
              <p>
                ⦁ The map does not reveal any noticeable distinctions between
                Australian state and federal law, whether it be in style,
                principles of interpretation or general jurisprudence.
              </p>
              <p>
                If you’re interested in learning more about what the map has to
                teach us about Australian law or if you’d like to find out how
                you can create semantic maps of your own, check out the full
                article on my blog, which provides a detailed analysis of my map
                and also covers the finer details of how I built it, with code
                examples offered along the way.
              </p>
            </div>
          </section>
        </section>
        <section id="39787932">
          <h3>
            <a class="item" href="https://hnrankings.info"
              >Hacker News Rankings. Graphs of HN posts rank on timeline</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 06:33:11</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39787932"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39787176">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2403.07815"
              >Chronos: Learning the Language of Time Series</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 03:25:13</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39787176"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39786984">
          <h3>
            <a class="item" href="https://www.lexaloffle.com/picotron.php"
              >Picotron Is a Fantasy Workstation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 02:48:23</span
              ><span class="points-container"
                >Points: <span class="points">477</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39786984"
                  >Comments</a
                ><span class="descendants">: 118</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39786666">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/how-chain-of-thought-reasoning-helps-neural-networks-compute-20240321/"
              >How Chain-of-Thought Reasoning Helps Neural Networks Compute</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 01:50:47</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39786666"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39786124">
          <h3>
            <a
              class="item"
              href="https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2023CN000231"
              >The Origins of the Generic Mapping Tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 00:25:59</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39786124"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39784656">
          <h3>
            <a
              class="item"
              href="http://xahlee.info/math/algorithmic_math_art.html"
              >Algorithmic Mathematical Art (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 21:31:47</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39784656"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39784395">
          <h3>
            <a
              class="item"
              href="https://essopenarchive.org/users/527743/articles/673415-new-views-of-lunar-seismicity-brought-by-analysis-of-newly-discovered-moonquakes-in-apollo-short-period-seismic-data"
              >Apollo Data Uncovers Lunar Seismic Events</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 21:05:39</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39784395"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39784355">
          <h3>
            <a
              class="item"
              href="https://sites.wustl.edu/meteoritesite/items/meteorite-fusion-crust/"
              >Meteorite Self-test check-list</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 21:02:08</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39784355"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39783223">
          <h3>
            <a class="item" href="https://memories.gallery/"
              >Show HN: Memories – FOSS Google Photos alternative built for high
              performance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 19:25:10</span
              ><span class="points-container"
                >Points: <span class="points">701</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39783223"
                  >Comments</a
                ><span class="descendants">: 203</span></span
              >
            </h4>
            <div class="text">
              <p>
                Website:
                <a href="https://memories.gallery/"
                  >https://memories.gallery/</a
                >
              </p>
              <p>
                GitHub:
                <a href="https://github.com/pulsejet/memories"
                  >https://github.com/pulsejet/memories</a
                >
              </p>
              <p>
                Demo Server:
                <a href="https://demo.memories.gallery/apps/memories/"
                  >https://demo.memories.gallery/apps/memories/</a
                >
                (demo runs in San Francisco on a free-tier cloud vm)
              </p>
              <p>
                Memories has been built ground-up for high performance and is
                extremely fast when configured correctly. In our testing
                environment, it can load a timeline view with 100k photos in
                under 500ms, including query and rendering time!
              </p>
              <p>Some features to highlight:</p>
              <p>
                * A timeline similar to Google Photos where you can skip to any
                time in history instantly.
              </p>
              <p>
                * AI-based tagging that runs locally on your server, identifying
                and tagging people and objects.
              </p>
              <p>* Albums and external sharing.</p>
              <p>* Metadata editing support</p>
              <p>
                * A world map of your photos, supported both on mobile and the
                web
              </p>
              <p>* Did I mention it's extremely fast?</p>
              <p>Would love to hear feedback from the HN community! :)</p>
            </div>
          </section>
        </section>
        <section id="39782761">
          <h3>
            <a
              class="item"
              href="https://www.cockroachlabs.com/blog/demonic-nondeterminism/"
              >Antithesis of a One-in-a-Million Bug: Taming Demonic
              Nondeterminism</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 18:48:55</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39782761"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39782213">
          <h3>
            <a class="item" href="https://soundry.ai/"
              >Launch HN: Soundry AI (YC W24) – Music sample generator for music
              creators</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 18:09:18</span
              ><span class="points-container"
                >Points: <span class="points">159</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39782213"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
            <div class="text">
              <a href="https://soundry.ai/">https://soundry.ai/</a>). We provide
              generative AI tools for musicians, including text-to-sound and
              infinite sample packs.
              <p>
                We (Mark and Justin) started writing music together a few years
                ago but felt limited in our ability to create anything that we
                were proud of. Modern music production is highly technical and
                requires knowledge of sound design, tracking, arrangement,
                mixing, mastering, and digital signal processing. Even with our
                technical backgrounds (in AI and cloud computing respectively),
                we struggled to learn what we needed to know.
              </p>
              <p>
                The emergence of latent diffusion models was a turning point for
                us just like many others in tech. All of a sudden it was
                possible to leverage AI to create beautiful art. After meeting
                our cofounder Diandre (half of the DJ duo Bandlez and expert
                music producer), we formed a team to apply generative AI to
                music production.
              </p>
              <p>
                We began by focusing on generating music samples rather than
                full songs. Focusing on samples gave us several advantages, but
                the biggest one was the ability to build and train our custom
                models very quickly due to the small required length of the
                generated audio (typically 2-10 seconds). Conveniently, our
                early text-to-sample model also fit well within many existing
                music producers’ workflows which often involve heavy use of
                music samples.
              </p>
              <p>
                We ran into several challenges when creating our text-to-sound
                model. The first was that we began by training our latent
                transformer (similar to Open AI’s Sora) using off-the-shelf
                audio autoencoders (like Meta’s Encodec) and text embedders
                (like Google’s T5). The domain gap between the data used to
                train these off-the-shelf models and sample data was much
                greater than we expected, which caused us to incorrectly
                attribute blame for issues in the three model components (latent
                transformer, autoencoder, and embedder) during development. To
                see how musicians can use our text-to-sound generator to write
                music, you can see our text-to-sound demo below:
              </p>
              <p>
                <a
                  href="https://www.youtube.com/watch?v=MT3k4VV5yrs&amp;ab_channel=SoundryAI"
                  >https://www.youtube.com/watch?v=MT3k4VV5yrs&amp;ab_channel=Sound...</a
                >
              </p>
              <p>
                The second issue we experienced was more on the product design
                side. When we spoke with our users in-depth we learned that
                novice music producers had no idea what to type into the prompt
                box, and expert music producers felt that our model’s output
                wasn’t always what they had in mind when they typed in their
                prompt. It turns out that text is much better at specifying the
                contents of visual art than music. This particular issue is what
                led us to our new product: the Infinite Sample Pack.
              </p>
              <p>
                The Infinite Sample Pack does something rather unconventional:
                prompting with audio rather than text. Rather than requiring you
                to type out a prompt and specify many parameters, all you need
                to do is click a button to receive new samples. Each time you
                select a sound, our system embeds “prompt samples” as input to
                our model which then creates infinite variations. By limiting
                the number of possible outputs we’re able to hide inference
                latency by pre-computing lots of samples ahead of time. This new
                approach has seen much wider adoption and so this month we’ll be
                opening the system up so that everyone can create Infinite
                Sample Packs of their very own! To compare the workflow of the
                two products, you can check out our new demo using the Infinite
                Sample Pack:
              </p>
              <p>
                <a
                  href="https://www.youtube.com/watch?v=BqYhGipZCDY&amp;ab_channel=SoundryAI"
                  >https://www.youtube.com/watch?v=BqYhGipZCDY&amp;ab_channel=Sound...</a
                >
              </p>
              <p>
                Overall, our founding principle is to start by asking the
                question: "what do musicians actually want?" Meta's open
                sourcing of MusicGen has resulted in many interchangeable
                text-to-music products, but ours is embraced by musicians. By
                constantly having an open dialog with our users we’ve been able
                to satisfy many needs including the ability to specify BPM and
                key, including one-shot instrument samples (so musicians can
                write their own melodies), and adding drag-and-drop support for
                digital audio workstations via our desktop app and VST. To hear
                some of the awesome songs made with our product, take a listen
                to our community showcases below!
              </p>
              <p>
                <a
                  href="https://soundcloud.com/soundry-ai/sets/community-showcases"
                  >https://soundcloud.com/soundry-ai/sets/community-showcases</a
                >
              </p>
              <p>
                We hope you enjoy our tool, and look forward to discussion in
                the comments
              </p>
            </div>
          </section>
        </section>
        <section id="39781776">
          <h3>
            <a
              class="item"
              href="https://reactormag.com/silent-running-a-1970s-environmental-fable-remains-depressingly-all-too-relevant/"
              >Silent Running: 1970s Environmental Fable Remains Depressingly
              All Too Relevant</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 17:35:39</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39781776"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39779195">
          <h3>
            <a class="item" href="https://gofetch.fail"
              >GoFetch: New side-channel attack using data memory-dependent
              prefetchers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 14:51:18</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39779195"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39778999">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/03/21/technology/apple-doj-lawsuit-antitrust.html"
              >U.S. sues Apple, accusing it of maintaining an iPhone monopoly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 14:37:43</span
              ><span class="points-container"
                >Points: <span class="points">2380</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39778999"
                  >Comments</a
                ><span class="descendants">: 2269</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39778570">
          <h3>
            <a class="item" href="https://github.com/chearon/dropflow"
              >Show HN: Dropflow, a CSS layout engine for node or
            </a>
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 13:58:31</span
              ><span class="points-container"
                >Points: <span class="points">377</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39778570"
                  >Comments</a
                ><span class="descendants">: 124</span></span
              >
            </h4>
            <div class="text">
              <p>
                Live demo:
                <a href="https://chearon.github.io/dropflow/"
                  >https://chearon.github.io/dropflow/</a
                >
              </p>
              <p>
                It matches browsers in all cases I can find where they agree,
                and it's fast. It supports `position`, `inline-block`,
                `z-index`, and complex properties like `float` and
                `vertical-align`. It doesn't support high-level layout like
                flexbox or grid yet, but you can get intrinsics to easily divide
                space yourself and paint multiple layout trees. It has a great
                text layout implementation, and supporting non-Latin scripts is
                a top priority.
              </p>
              <p>
                I've wanted this to exist as far back as 2013, and the desire
                kept coming up: for a way to get detailed intrinsics, for high
                quality rich text layout to canvas and SVG, and for server-side
                rich text. We currently use it in CellEngine for our new
                canvas-based spreadsheet library to layout text in hundreds of
                thousands of cells, and will be using it soon to render PDFs
                with thousands of pages in a few seconds.
              </p>
            </div>
          </section>
        </section>
        <section id="39778412">
          <h3>
            <a class="item" href="https://difftastic.wilfred.me.uk/"
              >Difftastic, a structural diff tool that understands syntax</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 13:42:46</span
              ><span class="points-container"
                >Points: <span class="points">1015</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39778412"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39777898">
          <h3>
            <a
              class="item"
              href="https://today.ucsd.edu/story/biodegradable-microplastics"
              >Research shows plant-based polymers can disappear within seven
              months</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 12:50:58</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39777898"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39777229">
          <h3>
            <a class="item" href="https://jsomers.net/e-coli-chemotaxis/"
              >The baffling intelligence of a single cell: The story of E. coli
              chemotaxis</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 11:29:37</span
              ><span class="points-container"
                >Points: <span class="points">476</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39777229"
                  >Comments</a
                ><span class="descendants">: 194</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39775304">
          <h3>
            <a class="item" href="https://file770.com/vernor-vinge-1944-2024/"
              >Vernor Vinge has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 06:08:40</span
              ><span class="points-container"
                >Points: <span class="points">1088</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39775304"
                  >Comments</a
                ><span class="descendants">: 289</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39768434">
          <h3>
            <a
              class="item"
              href="https://www.flightradar24.com/blog/gps-jamming-map/"
              >Flightradar24's new GPS jamming map</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-20 @ 16:03:21</span
              ><span class="points-container"
                >Points: <span class="points">944</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39768434"
                  >Comments</a
                ><span class="descendants">: 267</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39757394">
          <h3>
            <a
              class="item"
              href="https://webkit.org/blog/15190/implementing-vertical-form-controls/"
              >Implementing Vertical Form Controls</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 16:24:29</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39757394"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39754403">
          <h3>
            <a class="item" href="https://www.goto10retro.com/p/atari-falcon030"
              >Atari Falcon030</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 10:35:52</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39754403"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39750836">
          <h3>
            <a class="item" href="https://www.henrikkarlsson.xyz/p/limitatons"
              >On limitations that hide in your blindspot</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 22:29:39</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39750836"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39742921">
          <h3>
            <a class="item" href="https://github.com/AviSoori1x/makeMoE"
              >Implementation of mixture of experts language model in a single
              file of PyTorch</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 11:57:46</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39742921"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
