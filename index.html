<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="38282166">
          <h3>
            <a
              class="item"
              href="https://younganimator.uk/winner/1699875910225x437970782709919500"
              >Blender 16yo winner of UK younganimator of the year</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 20:42:30</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38282166"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38281848">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/humor/sketchbook/is-my-toddler-a-stochastic-parrot"
              >Is my toddler a stochastic parrot?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 20:17:27</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38281848"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38281814">
          <h3>
            <a class="item" href="https://www.bbc.co.uk/news/business-67430888"
              >Price paid for offshore power to rise by 50%</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 20:15:14</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38281814"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38281264">
          <h3>
            <a
              class="item"
              href="https://www.phoronix.com/news/Firefox-Change-Wayland-Release"
              >Firefox Is Going to Try and Ship with Wayland Enabled by
              Default</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 19:31:34</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38281264"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38281137">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/society/2023/nov/16/australia-antibiotics-overuse-drug-resistant-infections"
              >Australia's overuse of antibiotics driving rate of drug-resistant
              infections</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 19:21:54</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38281137"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38281079">
          <h3>
            <a
              class="item"
              href="https://twitter.com/charliebholtz/status/1724815159590293764"
              >David Attenborough is now narrating my life</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 19:19:04</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38281079"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38280974">
          <h3>
            <a
              class="item"
              href="https://techcommunity.microsoft.com/t5/azure-high-performance-computing/azure-announces-new-ai-optimized-vm-series-featuring-amd-s/ba-p/3980770"
              >Azure announces new AI optimized VM series featuring AMD's
              flagship MI300X GPU</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 19:11:47</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38280974"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38280937">
          <h3>
            <a class="item" href="https://www.demoscene.info/"
              >Demoscene (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 19:08:10</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38280937"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38280490">
          <h3>
            <a
              class="item"
              href="https://github.com/kharitonov-ivan/multi-object-tracking-in-python"
              >Show HN: Multi-Object Tracking in Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 18:36:48</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38280490"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Tracking is an important topic, closely related to object
                detection. However, I've noticed that it doesn't receive as much
                attention compared to machine learning approaches. Or, the focus
                is on filters like the Kalman filter. This tutorial begins with
                single object tracking and progressively complicates the tasks,
                introducing various models and a hypothesis tree to solve them.
              </p>
            </div>
          </section>
        </section>
        <section id="38280472">
          <h3>
            <a class="item" href="https://github.com/poettering/diskomator"
              >Diskomator – NVMe-TCP at your fingertips</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 18:35:42</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38280472"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38279459">
          <h3>
            <a
              class="item"
              href="https://razberry.substack.com/p/btree-factorio"
              >B-trees in Factorio</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 17:25:12</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38279459"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38279073">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/lifestyle/2023/11/14/iowa-teen-farmer-donate-garden/"
              >Iowa teen grew 7k pounds of veggies, then gave them all away</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 17:03:11</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38279073"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38278380">
          <h3>
            <a
              class="item"
              href="https://scholars-stage.org/on-cultures-that-build/"
              >On Cultures That Build (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 16:18:28</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38278380"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38278171">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2023/11/15/23960345/microsoft-cpu-gpu-ai-chips-azure-maia-cobalt-specifications-cloud-infrastructure"
              >The first two custom silicon chips designed by Microsoft for its
              cloud</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 16:02:51</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38278171"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38277926">
          <h3>
            <a class="item" href="https://simonwillison.net/2023/Nov/15/gpts/"
              >Exploring GPTs: ChatGPT in a trench coat?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 15:44:23</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38277926"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38277863">
          <h3>
            <a
              class="item"
              href="https://www.space.com/james-webb-space-telescope-distant-galaxies"
              >James Webb Space Telescope finds 2 of the most distant galaxies
              ever seen</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 15:40:06</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38277863"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38277598">
          <h3>
            <a
              class="item"
              href="https://mythic.ai/products/m1076-analog-matrix-processor/"
              >M1076 Analog Matrix Processor</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 15:22:46</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38277598"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38277430">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2023/11/ai-outperforms-conventional-weather-forecasting-for-the-first-time-google-study/"
              >AI outperforms conventional weather forecasting for the first
              time: Google study</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 15:10:20</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38277430"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38277412">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2023-11-surgeons-world-eye-transplant.html"
              >US surgeons perform first whole eye transplant</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 15:09:02</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38277412"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38276951">
          <h3>
            <a
              class="item"
              href="https://www.marginalia.nu/log/19-website-discoverability-crisis/"
              >The Small Website Discoverability Crisis (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 14:31:36</span
              ><span class="points-container"
                >Points: <span class="points">435</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38276951"
                  >Comments</a
                ><span class="descendants">: 196</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38276657">
          <h3>
            <a class="item" href="https://ieeexplore.ieee.org/document/526833"
              >A defined process for project post mortem review (1996)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 14:00:21</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38276657"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38276518">
          <h3>
            <a class="item" href="https://cobolworx.com/pages/cobforgcc.html"
              >COBOL for GCC Development</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 13:44:21</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38276518"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38276075">
          <h3>
            <a class="item" href="https://wasmbyexample.dev/home.en-us.html"
              >WASM by example</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 12:46:58</span
              ><span class="points-container"
                >Points: <span class="points">173</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38276075"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38275791">
          <h3>
            <a class="item" href="https://mux.com/jobs?j=dse"
              >Mux (YC W16) Is Hiring a Senior Distributed Systems Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 12:00:49</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38274923">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/shakna-israel/7cd4251d1a6b7b9ebd3a9b2a26cbbfb8"
              >Obfuscating Lua (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 09:39:08</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38274923"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38274782">
          <h3>
            <a
              class="item"
              href="https://www.ledger.com/blog/hacking-adhd-strategies-for-the-modern-developer"
              >Hacking ADHD: Strategies for the modern developer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 09:15:20</span
              ><span class="points-container"
                >Points: <span class="points">549</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38274782"
                  >Comments</a
                ><span class="descendants">: 540</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38274714">
          <h3>
            <a class="item" href="http://haroldbot.nl/"
              >Haroldbot, client-side tool that checks 32-bit bitvector
              arithmetic equivalence</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 09:04:05</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38274714"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38273999">
          <h3>
            <a
              class="item"
              href="https://daniel.haxx.se/blog/2023/11/14/curl-on-100-operating-systems/"
              >Curl on 100 Operating Systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 06:48:53</span
              ><span class="points-container"
                >Points: <span class="points">265</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38273999"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38273488">
          <h3>
            <a class="item" href="https://accentual.com/bmc64/"
              >Bare Metal Emulation on the Raspberry Pi – Commodore 64</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 04:56:18</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38273488"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38260248">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41598-023-46527-9"
              >The "computers are social actors" theory no longer applies to
              desktop computers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-14 @ 07:44:03</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38260248"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
