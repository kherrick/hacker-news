<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46844870">
          <h3>
            <a class="item" href="https://netbird.io/"
              >Netbird a German Tailscale alternative (P2P WireGuard-based
              overlay network)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-01 @ 09:44:01</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46844870"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46844822">
          <h3>
            <a
              class="item"
              href="https://mariozechner.at/posts/2025-11-30-pi-coding-agent/"
              >What I learned building an opinionated and minimal coding
              agent</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-01 @ 09:33:46</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46844822"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46844350">
          <h3>
            <a class="item" href="https://nostarch.com/book-of-pf-4th-edition"
              >The Book of PF, 4th edition</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-01 @ 07:50:51</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46844350"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46842975">
          <h3>
            <a class="item" href="https://seths.blog/2008/12/pre-steal-this/"
              >Pre-Steal This Book</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-01 @ 02:11:57</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46842975"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46842603">
          <h3>
            <a class="item" href="https://rose.systems/animalist/"
              >List animals until failure</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-01 @ 01:03:23</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46842603"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46842586">
          <h3>
            <a
              class="item"
              href="http://ternarysearch.blogspot.com/2026/01/sparse-file-lru-cache.html"
              >Sparse File LRU Cache</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-01 @ 01:00:07</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46842586"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46842178">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/cells-use-bioelectricity-to-coordinate-and-make-group-decisions-20260112/"
              >Cells use 'bioelectricity' to coordinate and make group
              decisions</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-01 @ 00:00:11</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46842178"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46841374">
          <h3>
            <a
              class="item"
              href="https://nmn.sh/blog/2023-10-02-swift-is-the-more-convenient-rust"
              >Swift is a more convenient Rust (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 22:05:03</span
              ><span class="points-container"
                >Points: <span class="points">298</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46841374"
                  >Comments</a
                ><span class="descendants">: 285</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46840924">
          <h3>
            <a
              class="item"
              href="https://wikiedu.org/blog/2026/01/29/generative-ai-and-wikipedia-editing-what-we-learned-in-2025/"
              >Generative AI and Wikipedia editing: What we learned in 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 21:14:02</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46840924"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46840865">
          <h3>
            <a
              class="item"
              href="https://erikjohannes.no/posts/20260130-outsourcing-thinking/index.html"
              >Outsourcing thinking</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 21:06:57</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46840865"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46840698">
          <h3>
            <a class="item" href="https://github.com/zupat/related_post_gen"
              >Data Processing Benchmark Featuring Rust, Go, Swift, Zig, Julia
              etc.</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 20:50:56</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46840698"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46840612">
          <h3>
            <a
              class="item"
              href="https://henrikwarne.com/2026/01/31/in-praise-of-dry-run/"
              >In praise of –dry-run</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 20:42:13</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46840612"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46840178">
          <h3>
            <a class="item" href="https://github.com/rtvkiz/minimal"
              >Show HN: Minimal – Open-Source Community driven Hardened
              Container Images</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 19:58:00</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46840178"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              I would like to share Minimal - Its a open source collection of
              hardened container images build using Apko, Melange and Wolfi
              packages. The images are build daily, checked for updates and
              resolved as soon as fix is available in upstream source and Wolfi
              package. It utilizes the power of available open source solutions
              and contains commercially available images for free. Minimal
              demonstrates that it is possible to build and maintain hardened
              container images by ourselves. Minimal will add more images
              support, and goal is to be community driven to add images as
              required and fully customizable.
            </div>
          </section>
        </section>
        <section id="46839215">
          <h3>
            <a class="item" href="https://crl.io/ds-game-engine/"
              >Nintendo DS code editor and scriptable game engine</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 18:27:36</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46839215"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46838597">
          <h3>
            <a class="item" href="https://an.dywa.ng/carrier-gnss.html"
              >Mobile carriers can get your GPS location</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 17:21:34</span
              ><span class="points-container"
                >Points: <span class="points">691</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46838597"
                  >Comments</a
                ><span class="descendants">: 414</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46838417">
          <h3>
            <a class="item" href="https://yle.fi/a/74-20207494"
              >Finland looks to introduce Australia-style ban on social media</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 17:06:22</span
              ><span class="points-container"
                >Points: <span class="points">636</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46838417"
                  >Comments</a
                ><span class="descendants">: 451</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46837814">
          <h3>
            <a
              class="item"
              href="https://help.apple.com/pdf/security/en_US/apple-platform-security-guide.pdf"
              >Apple Platform Security (Jan 2026) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 16:04:03</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46837814"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46837346">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2026/01/inside-nvidias-10-year-effort-to-make-the-shield-tv-the-most-updated-android-device-ever/"
              >Nvidia's 10-year effort to make the Shield TV the most updated
              Android device</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-31 @ 15:14:14</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46837346"
                  >Comments</a
                ><span class="descendants">: 141</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46817779">
          <h3>
            <a
              class="item"
              href="https://www.loe.org/shows/shows.html?programID=96-P13-00047#feature4"
              >EV-1 for Lease (1996)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 22:36:21</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46817779"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46813909">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2026-01-coffee-agent-substitute-electron-microscopy.html"
              >Coffee as a staining agent substitute in electron microscopy</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 18:04:45</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46813909"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46804009">
          <h3>
            <a class="item" href="https://github.com/DataDog/pg_tracing"
              >pg_tracing: Distributed Tracing for PostgreSQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-29 @ 00:36:30</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46804009"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46802254">
          <h3>
            <a class="item" href="https://www.moltbook.com/"
              >Show HN: Moltbook – A social network for moltbots (clawdbots) to
              hang out</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 22:09:15</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46802254"
                  >Comments</a
                ><span class="descendants">: 833</span></span
              >
            </h4>
            <div class="text">
              <p>Just made this over the past few days.</p>
              <p>
                Moltbots can sign up and interact via CLI, no direct human
                interactions.
              </p>
              <p>Just for fun to see what they all talk about :)</p>
            </div>
          </section>
        </section>
        <section id="46796718">
          <h3>
            <a class="item" href="https://cds.cern.ch/record/1157741/"
              >Drawings of the elements of CMS detector, in the style of
              Leonardo da Vinci</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 15:38:05</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46796718"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46793313">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/smallpox-eradication-champion-william-foege-dies-at-89/"
              >Scientist who helped eradicate smallpox dies at age 89</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 10:03:11</span
              ><span class="points-container"
                >Points: <span class="points">232</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46793313"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46792347">
          <h3>
            <a class="item" href="https://lab174.com/blog/202601-nonograms/"
              >Nonograms: a practical guide with interactive examples</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 08:00:08</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46792347"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46787211">
          <h3>
            <a class="item" href="https://opentrees.org/#pos=1/-37.8/145"
              >Opentrees.org (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-27 @ 21:33:28</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46787211"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46786575">
          <h3>
            <a
              class="item"
              href="https://kohlschuetter.github.io/blog/posts/2026/01/27/tb25/"
              >Reliable 25 Gigabit Ethernet via Thunderbolt</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-27 @ 20:57:25</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46786575"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46782872">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=uMqx8NNT4xY"
              >The history of C# and TypeScript with Anders Hejlsberg |
              GitHub</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-27 @ 17:07:35</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46782872"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46781490">
          <h3>
            <a
              class="item"
              href="https://randsinrepose.com/archives/sometimes-your-job-is-to-stay-the-hell-out-of-the-way/"
              >Sometimes Your Job Is to Stay the Hell Out of the Way</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-27 @ 15:44:11</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46781490"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46780086">
          <h3>
            <a class="item" href="https://github.com/zpoint/CPython-Internals"
              >CPython Internals Explained</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-27 @ 14:07:37</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46780086"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
