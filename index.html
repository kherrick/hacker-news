<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39758601">
          <h3>
            <a
              class="item"
              href="https://github.com/Dobiasd/articles/blob/master/internals_of_the_async_await_pattern_from_first_principles.md"
              >Internals of the async/await pattern from first principles</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 18:09:05</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39758601"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39758451">
          <h3>
            <a
              class="item"
              href="https://blog.google/around-the-globe/google-asia/8-years-later-a-world-go-champions-reflections-on-alphago/"
              >8 years later: A world Go champion's reflections on AlphaGo</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 17:53:18</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39758451"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39758391">
          <h3>
            <a
              class="item"
              href="https://www.quora.com/What-does-Alan-Kay-think-about-programming-and-teaching-programming-with-copilots-and-LLMs-of-today"
              >What does Alan Kay think about LLMs?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 17:48:28</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39758391"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39757824">
          <h3>
            <a class="item" href="https://www.easypost.com/careers"
              >EasyPost (YC S13) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 17:01:03</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39757665">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41593-024-01607-5"
              >Natural language instructions induce generalization in networks
              of neurons</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 16:47:29</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39757665"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39757368">
          <h3>
            <a class="item" href="https://inflection.ai/the-new-inflection"
              >The New Inflection</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 16:23:08</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39757368"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39757207">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/quantum-weirdness-in-new-strange-metals-bends-the-rules-of-physics/"
              >Quantum Weirdness in New Metals Bends the Rules of Physics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 16:09:35</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39757207"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39756865">
          <h3>
            <a class="item" href="https://paulgraham.com/google.html"
              >How to Start Google</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 15:36:19</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39756865"
                  >Comments</a
                ><span class="descendants">: 220</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39756434">
          <h3>
            <a
              class="item"
              href="https://letsencrypt.org/2024/03/19/new-intermediate-certificates.html"
              >New Intermediate Certificates</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 15:02:24</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39756434"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39756325">
          <h3>
            <a class="item" href="https://godspeedapp.com/"
              >Show HN: Godspeed is a fast, 100% keyboard oriented todo app for
              Mac</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 14:53:51</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39756325"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
            <div class="text">
              <p>
                Godspeed has everything you expect in a todo manager like shared
                lists, labels, smart lists, boolean search operators, and cloud
                sync. If you're already a user of an app like Todoist or
                OmniFocus you should be able find everything you need in
                Godspeed.
              </p>
              <p>
                I think the most appealing thing to most HN users would be the
                keyboard orientation. Literally every single action in Godspeed
                is doable from your keyboard. I'm so serious about this that I
                built "hardcore mode" to completely disable the mouse - this
                both helps you break the habit of reaching for your mouse, and
                keeps us honest about 100% hotkey support.
              </p>
              <p>
                You can fully customize the hotkeys, but if you're into Vim or
                Emacs you'll feel right at home by default.
              </p>
              <p>
                We've got a 2 week free trial with no limitations, and then
                offer subscription or one-time purchase options.
              </p>
              <p>
                Thanks for checking out Godspeed, I'd love to hear your
                feedback!
              </p>
              <p>
                <a href="https://godspeedapp.com/">https://godspeedapp.com/</a>
              </p>
            </div>
          </section>
        </section>
        <section id="39756262">
          <h3>
            <a
              class="item"
              href="https://www.micahlerner.com/2020/03/22/understanding-googles-file-system.html"
              >Understanding Google's File System (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 14:48:12</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39756262"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39755927">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39755927"
              >Launch HN: Okapi (YC W24) – A new, flexible CRM with good UX</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 14:14:24</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39755927"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re Ulysse and Ned from Okapi. We’re making a modern CRM. It's
                kind of like if Airtable/Notion built Salesforce today.
                <a href="https://okapicrm.com">https://okapicrm.com</a>
              </p>
              <p>
                When I was fresh out of college, working for startups,
                Salesforce was this big mystery to me. It's the perpetual second
                screen for everyone in sales. They were building this gigantic
                obelisk downtown. What was this thing? And why did every
                salesperson I knew seem to live in it all day, and yet hate it
                so much?
              </p>
              <p>
                Turns out Salesforce is basically PhpMyAdmin for salespeople.
                It's just basically two things:
              </p>
              <p>
                1. A really generic database, and a UI for CRUDing your data.
              </p>
              <p>2. An API and ecosystem of integrations.</p>
              <p>
                In other words, it's the back-office CRUD app to end all
                back-office CRUD apps. People call the result a "CRM" (Customer
                Relationship Management).
              </p>
              <p>
                Salesforce is slow and clunky. And that doesn’t matter because
                people don’t buy Salesforce to be delighted. They buy Salesforce
                to avoid being screwed over.
              </p>
              <p>
                SObjects are how Salesforce does that. It’s the best idea
                Salesforce ever had: make everything in your product be built
                upon a generic data layer that your users can configure. Just
                like how you can add a new sheet or column in a spreadsheet, in
                Salesforce you can add new objects and fields. You can CRUD,
                report on, and do automations on top of custom data in exactly
                the same way you do it for built-in data.
              </p>
              <p>
                The graveyard of wannabe Salesforces is littered with people who
                forgot about this key insight.
              </p>
              <p>
                We think the way you win in CRM in 2024 is by keeping the
                flexibility of SObjects, and then tacking on modern UX. That
                first part takes engineering discipline, but the second part is
                much easier than Salesforce had it 25 years ago. Just about
                every part of a modern SaaS product has dozens of vendors that
                do most of the work for you.
              </p>
              <p>
                We're really excited to get feedback from HN on what we have.
                Here’s a video demo:
                <a href="https://www.youtube.com/watch?v=4uRBf_9CRyM"
                  >https://www.youtube.com/watch?v=4uRBf_9CRyM</a
                >
                - and you can try it yourself:
              </p>
              <p>
                <a href="https://app.okapicrm.com">https://app.okapicrm.com</a>
              </p>
              <p>Email: hn.login.user@okapicrm.com</p>
              <p>Password: sk9ueEAfhXP9j4cuxLCVmw7.</p>
              <p>
                You can test out our email integration, send an email to:
                hn.demo@okapicrm.com
              </p>
              <p>
                And see that email (up to ~10min latency):
                <a href="https://app.okapicrm.com/objects/emails/records"
                  >https://app.okapicrm.com/objects/emails/records</a
                >
              </p>
              <p>
                We’re very eager for your honest feedback. What do you think
                we're missing? One thing we can’t decide if it’s a need-to-have
                is Apex -- is having in-transaction custom scripting really
                necessary for a CRM? Or is that just something they tacked on as
                Salesforce became more of an app platform and less of a focused
                CRM product?
              </p>
            </div>
          </section>
        </section>
        <section id="39755858">
          <h3>
            <a class="item" href="https://causal.app"
              >Show HN: Causal 2.0 – Modern Financial Planning for Startups</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 14:06:25</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39755858"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39755471">
          <h3>
            <a
              class="item"
              href="https://mail.openjdk.org/pipermail/jdk-dev/2024-March/008827.html"
              >Java 22 Released</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 13:22:12</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39755471"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39755407">
          <h3>
            <a
              class="item"
              href="https://resobscura.substack.com/p/he-spoke-of-computers-with-some-awe"
              >Margaret Mead, John von Neumann, and the Prehistory of AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 13:15:38</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39755407"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39755267">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/apollo-10-astronaut-tom-stafford-18600e218bd145ce99a3605b35df7b8c"
              >Astronaut Thomas Stafford has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 13:00:15</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39755267"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39754770">
          <h3>
            <a
              class="item"
              href="https://yzena.com/2024/03/build-system-schism-the-curse-of-meta-build-systems/"
              >Build System Schism: The Curse of Meta Build Systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 11:44:20</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39754770"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39754651">
          <h3>
            <a
              class="item"
              href="https://ismaelcelis.com/posts/practical-railway-oriented-pipelines-in-ruby/"
              >Practical Railway-Oriented Pipelines in Ruby</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 11:22:37</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39754651"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39754461">
          <h3>
            <a
              class="item"
              href="https://www.esa.int/Science_Exploration/Space_Science/Euclid/Operations_begin_to_de-ice_Euclid_s_vision"
              >Operations begin to de-ice Euclid’s vision</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 10:48:16</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39754461"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39754330">
          <h3>
            <a
              class="item"
              href="https://www.troyhunt.com/inside-the-massive-alleged-att-data-breach/"
              >Inside the Massive Alleged AT&amp;amp;T Data Breach</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 10:19:34</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39754330"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39753650">
          <h3>
            <a class="item" href="https://github.com/nanochess/bootLogo"
              >BootLogo: Logo language in 508 bytes of x86 machine code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 07:32:12</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39753650"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39753210">
          <h3>
            <a
              class="item"
              href="https://blog.vladzahorodnii.com/2024/03/18/how-to-write-a-qml-effect-for-kwin/"
              >How to write a QML effect for KWin</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 05:29:19</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39753210"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39753115">
          <h3>
            <a
              class="item"
              href="https://www.math.columbia.edu/~woit/wordpress/?p=13864"
              >20 Years of "Not Even Wrong"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 05:08:21</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39753115"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39752941">
          <h3>
            <a
              class="item"
              href="https://sites.google.com/view/elizagen-org/news#h.ykbzq5nuiccs"
              >Draft Paper Discovered in Which Joseph Weizenbaum Envisions
              ELIZA's Applications</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 04:27:27</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39752941"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39752051">
          <h3>
            <a
              class="item"
              href="https://github.blog/2024-03-18-gaining-kernel-code-execution-on-an-mte-enabled-pixel-8/"
              >Gaining kernel code execution on an MTE-enabled Pixel 8</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 01:20:45</span
              ><span class="points-container"
                >Points: <span class="points">261</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39752051"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39749475">
          <h3>
            <a
              class="item"
              href="https://www.commonreader.co.uk/p/the-soul-moved-the-pen-and-broke"
              >The soul moved the pen, and broke it: Flaubert's emotional
              style</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 20:19:24</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39749475"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39749312">
          <h3>
            <a
              class="item"
              href="https://stability.ai/news/introducing-stable-video-3d"
              >Stability.ai – Introducing Stable Video 3D</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 20:06:17</span
              ><span class="points-container"
                >Points: <span class="points">668</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39749312"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39748546">
          <h3>
            <a
              class="item"
              href="https://thenewstack.io/joel-spolsky-on-stack-overflow-inclusion-and-how-he-broke-it-recruiting/"
              >Joel Spolsky on Stack Overflow, Inclusion, and How He Broke IT
              Recruiting (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 19:05:14</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39748546"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39746468">
          <h3>
            <a
              class="item"
              href="https://blog.google/intl/en-in/products/platforms/how-were-helping-creators-disclose-altered-or-synthetic-content/"
              >YouTube now requires to label their realistic-looking videos made
              using AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 16:19:58</span
              ><span class="points-container"
                >Points: <span class="points">779</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39746468"
                  >Comments</a
                ><span class="descendants">: 446</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39744669">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-03-neural-networks-mathematical-formula-relevant.html"
              >How do neural networks learn?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 14:01:25</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39744669"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
