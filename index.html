<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44460991">
          <h3>
            <a
              class="item"
              href="https://aftermath.site/ea-dice-battlefield-battle-royale-free-to-play-f2p"
              >Electronic Arts Leadership Are Out of Their Goddamned Minds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-04 @ 03:48:21</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44460991"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44459980">
          <h3>
            <a
              class="item"
              href="https://www.science.org/doi/10.1126/sciadv.adr7250"
              >CO2 sequestration through accelerated weathering of limestone on
              ships</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 23:31:03</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44459980"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44459608">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/07/03/movies/michael-madsen-dead.html"
              >Michael Madsen has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 22:17:10</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44459608"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44459146">
          <h3>
            <a class="item" href="https://www.runconverge.com/careers"
              >Converge (YC S23) well-capitalized New York startup seeks product
              developers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 21:01:06</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44458890">
          <h3>
            <a
              class="item"
              href="https://www.merelkarhof.nl/work/wind-knitting-factory"
              >Wind Knitting Factory</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 20:28:57</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44458890"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44458877">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2502.03382"
              >High-Fidelity Simultaneous Speech-to-Speech Translation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 20:27:01</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44458877"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44457390">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/safety-security/opening-up-zero-knowledge-proof-technology-to-promote-privacy-in-age-assurance/"
              >Opening up ‘Zero-Knowledge Proof’ technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 17:36:13</span
              ><span class="points-container"
                >Points: <span class="points">249</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44457390"
                  >Comments</a
                ><span class="descendants">: 151</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/google/longfellow-zk"
                >https://github.com/google/longfellow-zk</a
              >
            </div>
          </section>
        </section>
        <section id="44457215">
          <h3>
            <a
              class="item"
              href="https://ethanzuckerman.com/2025/07/03/stalking-the-statistically-improbable-restaurant-with-data/"
              >Stalking the Statistically Improbable Restaurant with Data</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 17:15:56</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44457215"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44456904">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44456904"
              >Launch HN: K-Scale Labs (YC W24) – Open-Source Humanoid Robots</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 16:44:18</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44456904"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
            <div class="text">
              <a href="https://kscale.dev">https://kscale.dev</a>). We're
              building open-source humanoid robots.
              <p>
                Hardware video:
                <a href="https://www.youtube.com/watch?v=qhZi9rtdEKg"
                  >https://www.youtube.com/watch?v=qhZi9rtdEKg</a
                >
              </p>
              <p>
                Software video:
                <a href="https://www.youtube.com/watch?v=hXi3b3xXJFw"
                  >https://www.youtube.com/watch?v=hXi3b3xXJFw</a
                >
              </p>
              <p>
                Docs:
                <a href="https://docs.kscale.dev">https://docs.kscale.dev</a>
              </p>
              <p>
                Github:
                <a href="https://github.com/kscalelabs"
                  >https://github.com/kscalelabs</a
                >
              </p>
              <p>
                HN thread from back in May:
                <a href="https://news.ycombinator.com/item?id=44023680"
                  >https://news.ycombinator.com/item?id=44023680</a
                >
              </p>
              <p>
                I started K-Scale because I really wanted a humanoid robot to
                hack on, so I knew that if I built one, I would have at least
                one customer. It was before the Unitree G1 came out so the
                cheapest option at the time costed over $50k, but I figured I
                could build one for about $10k using COTS (Commercial
                Off-the-Shelf) components, which would be a much better price
                point for indie hackers and developers.
              </p>
              <p>
                We built the first version using some 3D printers and parts that
                I bought off of Amazon and Alibaba. It was not great, but it let
                us build out the full pipeline, from designing and building the
                hardware to training control policies in simulation. We actually
                did most of this in about two months, and had a standing, waving
                robot by YC Demo Day (although it wasn't good for much else!).
              </p>
              <p>
                Since then, our focus has been on figuring out how to go from a
                hobby-grade robot to a consumer-grade robot, without inflating
                our BOM (Bill of Materials, i.e. cost of all the parts) or
                having to set up our own factories. This is surprisingly
                difficult. A lot of the supply chain for robotics components
                currently goes through China, but tariffs have made it difficult
                to rely on Chinese suppliers for components. Also, even a $10k
                price point is pretty expensive for most customers, for a
                humanoid robot that has fairly limited capabilities.
              </p>
              <p>
                Our solution to this is to open-source our hardware and
                software. This makes it easier for us to navigate tariffs and
                manufacturing challenges. By making our reference design public,
                our suppliers have a much easier time figuring out how to offer
                us competitive solutions, and our manufacturing partners are
                able to more easily adjust our design for their production
                processes.
              </p>
              <p>
                On the demand side, the basic problem with humanoid robots is
                that they're mostly useless right now, and it will probably be a
                long and fairly capital-intensive journey to make them useful.
                My expectation was that there is a large pool of latent interest
                from people like me who are interested in hacking on humanoids,
                and that this customer segment is a much better customer segment
                to sell into than more traditional business-focused robotics
                applications. As someone in this customer segment myself, I felt
                that open-source software and hardware would be a strong value
                proposition, particularly for developers exploring bringing
                humanoids into their own business verticals.
              </p>
              <p>
                More philosophically, I think it is important that there is a
                good, open-source humanoid robot. I think the technology is
                likely to mature much more rapidly than many people currently
                expect, and the idea of armies of humanoids owned by some single
                company walking around is pretty dystopian.
              </p>
              <p>
                Right now, we're selling our base humanoid robot, K-Bot, for
                $8999. The main reason we're selling it now, instead of waiting
                to do more R&amp;D, is because we're trying to negotiate volume
                prices with our own suppliers before we do final DfM (Design for
                Manufacturing). For example, we are able to negotiate better
                volume pricing for actuators and end effectors than what the
                average indie developer would be able to get for low-volume
                orders.
              </p>
              <p>
                However, a lot of the people who want to buy a humanoid robot
                today do so because they want a completely autonomous robot to
                do all their chores, which is a pretty hard (although exciting)
                thing to build. To square this circle, we're offering a "Full
                Autonomy" option - it is the same robot hardware, but we will
                provide free hardware and software upgrades until we are able to
                make the robot fully autonomous. This way, we can have some
                extra cash upfront to kickstart development, and start to build
                a core group of people who are aligned with helping us improve
                the robot's capabilities across a diverse set of environments.
                From our customers' perspective, it's a way to de-risk buying a
                first-generation product from a young hardware company, and to
                have a bigger influence on how the technology unfolds.
              </p>
              <p>
                The best part about building open source software and hardware
                is getting torn apart by people smarter than us, so we'd love
                your feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="44456827">
          <h3>
            <a
              class="item"
              href="https://www.contraption.co/postcard-open-source/"
              >Postcard is now open source</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 16:38:02</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44456827"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44456779">
          <h3>
            <a
              class="item"
              href="https://netflixtechblog.com/av1-scale-film-grain-synthesis-the-awakening-ee09cfdff40b"
              >AV1@Scale: Film Grain Synthesis, The Awakening</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 16:34:51</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44456779"
                  >Comments</a
                ><span class="descendants">: 150</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44456379">
          <h3>
            <a class="item" href="https://ednamode.xyz/blogs/2.html"
              >Encoding Jake Gyllenhaal into one million checkboxes (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 15:58:32</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44456379"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44456135">
          <h3>
            <a class="item" href="https://github.com/zserge/pennybase"
              >Poor Man's Back End-as-a-Service (BaaS), Similar to
              Firebase/Supabase/Pocketbase</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 15:35:34</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44456135"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44455950">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2507.01903"
              >AI for Scientific Search</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 15:19:20</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44455950"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44455933">
          <h3>
            <a
              class="item"
              href="https://joincolossus.com/article/flounder-mode/"
              >Flounder Mode – Kevin Kelly on a different way to do great
              work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 15:18:01</span
              ><span class="points-container"
                >Points: <span class="points">202</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44455933"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44455787">
          <h3>
            <a class="item" href="https://richardscollin.github.io/tmux-rs/"
              >Introducing tmux-rs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 15:03:14</span
              ><span class="points-container"
                >Points: <span class="points">668</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44455787"
                  >Comments</a
                ><span class="descendants">: 216</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44455222">
          <h3>
            <a
              class="item"
              href="https://knightsdigest.com/what-exactly-is-the-peasant-railgun-in-dd-5e/"
              >Peasant Railgun</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 14:05:05</span
              ><span class="points-container"
                >Points: <span class="points">214</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44455222"
                  >Comments</a
                ><span class="descendants">: 157</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44455022">
          <h3>
            <a class="item" href="https://angadh.com/wherevonbraunwheel"
              >Where is my von Braun wheel?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 13:44:55</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44455022"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44451329">
          <h3>
            <a
              class="item"
              href="https://www.abc.net.au/news/science/2025-07-03/3i-atlas-a11pl3z-interstellar-object-in-our-solar-system/105489180"
              >Astronomers discover 3I/ATLAS – Third interstellar object to
              visit Solar System</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-03 @ 03:19:24</span
              ><span class="points-container"
                >Points: <span class="points">291</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44451329"
                  >Comments</a
                ><span class="descendants">: 161</span></span
              >
            </h4>
            <div class="text">
              <a href="https://minorplanetcenter.net/mpec/K25/K25N12.html"
                >https://minorplanetcenter.net/mpec/K25/K25N12.html</a
              >
            </div>
          </section>
        </section>
        <section id="44433996">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=_PioN-CpOP0"
              >Fei-Fei Li: Spatial intelligence is the next frontier in AI
              [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 14:00:33</span
              ><span class="points-container"
                >Points: <span class="points">264</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44433996"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44432506">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/jaffray/archive/caching-is-an-abstraction-not-an-optimization/"
              >Caching is an abstraction, not an optimization</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 10:42:46</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44432506"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44432451">
          <h3>
            <a
              class="item"
              href="https://media.ccc.de/v/gpn23-302-sound-chip-whisper-me-your-secrets-"
              >Sound Chip, whisper me your secrets [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 10:31:54</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44432451"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44432351">
          <h3>
            <a
              class="item"
              href="https://cacm.acm.org/news/an-algorithm-for-a-better-bookshelf/"
              >An Algorithm for a Better Bookshelf</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 10:12:50</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44432351"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44432055">
          <h3>
            <a class="item" href="https://omeru.bearblog.dev/lifestyle/"
              >You are what you launch: how software became a lifestyle brand</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 09:16:43</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44432055"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44431828">
          <h3>
            <a
              class="item"
              href="https://www.omgubuntu.co.uk/2025/06/ubuntu-riscv-rva23-support"
              >Ubuntu 25.10 Raises RISC-V Profile Requirements</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 08:32:19</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44431828"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44430117">
          <h3>
            <a class="item" href="https://hamel.dev/blog/posts/evals-faq/"
              >About AI Evals</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-01 @ 02:48:16</span
              ><span class="points-container"
                >Points: <span class="points">172</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44430117"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44426153">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2404.17625"
              >Alice's Adventures in a Differentiable Wonderland</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 18:02:06</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44426153"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44423194">
          <h3>
            <a
              class="item"
              href="https://technicalwriting.dev/ai/agents/colocate.html"
              >(Experiment) Colocating agent instructions with eng docs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 13:44:12</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44423194"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44421490">
          <h3>
            <a
              class="item"
              href="https://www.cell.com/cell-reports-physical-science/fulltext/S2666-3864(25)00221-8"
              >Manipulating trapped air bubbles in ice for message storage in
              cold regions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 10:15:52</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44421490"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44420711">
          <h3>
            <a class="item" href="https://numpad.io"
              >Show HN: I rewrote my notepad calculator as a local-first app
              with CRDT syncing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-30 @ 08:10:27</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44420711"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                Now I've rewritten it as a PWA that supports multiple documents,
                persists them to IndexedDB, and has a syncing service for paying
                customers. Syncing is handled by Automerge[1] under the hood,
                which <i>should</i> make it relatively easy to get document
                sharing working too.
              </p>
              <p>
                [1] <a href="https://automerge.org/">https://automerge.org/</a>
              </p>
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
