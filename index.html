<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44537113">
          <h3>
            <a class="item" href="https://bettersoftwareconference.com/"
              >A software conference that advocates for quality</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 21:50:51</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44537113"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44537093">
          <h3>
            <a
              class="item"
              href="https://www.bleepingcomputer.com/news/security/123456-password-exposed-chats-for-64-million-mcdonalds-job-applicants/"
              >'123456' password exposed chats for 64M McDonald's job
              applicants</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 21:48:45</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44537093"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44536988">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/openai/705999/google-windsurf-ceo-openai"
              >OpenAI's Windsurf deal is off, and its CEO is going to Google</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 21:35:31</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44536988"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44536748">
          <h3>
            <a class="item" href="https://careers.activeloop.ai/"
              >Activeloop (YC S18) Is Hiring AI Search and Python Back End
              Engineers(Onsite,MV)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 21:01:21</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44536459">
          <h3>
            <a class="item" href="https://www.bbc.co.uk/news/live/cx20p2x9093t"
              >Preliminary report into Air India crash released</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 20:23:18</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44536459"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://aaib.gov.in/What%27s%20New%20Assets/Preliminary%20Report%20VT-ANB.pdf"
                >https://aaib.gov.in/What%27s%20New%20Assets/Preliminary%20Re...</a
              >
            </div>
          </section>
        </section>
        <section id="44536248">
          <h3>
            <a
              class="item"
              href="https://medium.com/@mikehall314/im-more-proud-of-these-128-kilobytes-than-anything-i-ve-built-since-53706cfbdc18"
              >I'm more proud of these 128 kilobytes than anything I've built
              since</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 19:55:39</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44536248"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44535977">
          <h3>
            <a class="item" href="https://ccrma.stanford.edu/~jos/filters/"
              >Introduction to Digital Filters</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 19:24:24</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44535977"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44535637">
          <h3>
            <a
              class="item"
              href="https://ethz.ch/en/news-and-events/eth-news/news/2025/07/a-language-model-built-for-the-public-good.html"
              >ETH Zurich and EPFL to release a LLM developed on public
              infrastructure</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 18:45:10</span
              ><span class="points-container"
                >Points: <span class="points">254</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44535637"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44535604">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2025/07/a-mess-of-its-own-making-google-nerfs-second-pixel-phone-battery-this-year/"
              >Google nerfs Pixel 6a batteries following fire hazard</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 18:41:14</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44535604"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44535078">
          <h3>
            <a class="item" href="https://openpipe.ai/blog/ruler"
              >Show HN: RULER – Easily apply RL to any agent</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 17:47:36</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44535078"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <p>
                Reinforcement learning is one of the best techniques for making
                agents more reliable, and has been widely adopted by frontier
                labs. However, adoption in the outside community has been slow
                because it's so hard to implement.
              </p>
              <p>
                One of the biggest challenges when adapting RL to a new task is
                the need for a task-specific "reward function" (way of measuring
                success). This is often difficult to define, and requires either
                high-quality labeled data and/or significant domain expertise to
                generate.
              </p>
              <p>
                RULER is a drop-in reward function that works across different
                tasks without any of that complexity.
              </p>
              <p>
                It works by showing N trajectories to an LLM judge and asking it
                to rank them relative to each other. This sidesteps the
                calibration issues that plague most LLM-as-judge approaches.
                Combined with GRPO (which only cares about relative scores
                within groups), it just works (surprisingly well!).
              </p>
              <p>
                We have a full writeup on the blog, including results on 4
                production tasks. On all 4 tasks, small Qwen 2.5 models trained
                with RULER+GRPO beat the best prompted frontier model, despite
                being significantly smaller and cheaper to run. Surprisingly,
                they even beat models trained with hand-crafted reward functions
                on 3/4 tasks!
                <a href="https://openpipe.ai/blog/ruler"
                  >https://openpipe.ai/blog/ruler</a
                >
              </p>
              <p>
                Repo:
                <a href="https://github.com/OpenPipe/ART"
                  >https://github.com/OpenPipe/ART</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44534787">
          <h3>
            <a
              class="item"
              href="https://jank-lang.org/blog/2025-07-11-jank-is-cpp/"
              >jank is C++</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 17:22:01</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44534787"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44533982">
          <h3>
            <a
              class="item"
              href="https://www.pennlive.com/news/2025/07/pa-house-passes-click-to-cancel-subscription-bills-as-court-throws-out-federal-rule.html"
              >Pa. House passes 'click-to-cancel' subscription bills</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 16:19:13</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44533982"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44533843">
          <h3>
            <a
              class="item"
              href="https://e360.yale.edu/digest/solar-biggest-power-source-europe-june-2025"
              >In a First, Solar Was Europe's Biggest Source of Power Last
              Month</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 16:09:04</span
              ><span class="points-container"
                >Points: <span class="points">172</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44533843"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44533464">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/astronomers-race-study-interstellar-interloper"
              >Astronomers race to study interstellar interloper</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 15:43:20</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44533464"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44533337">
          <h3>
            <a
              class="item"
              href="https://www.npr.org/sections/goats-and-soda/2024/09/23/nx-s1-5011028/detectives-mystery-lead-poisoning-new-york-bangladesh"
              >Lead pigment in turmeric is the culprit in a global poisoning
              mystery (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 15:33:17</span
              ><span class="points-container"
                >Points: <span class="points">267</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44533337"
                  >Comments</a
                ><span class="descendants">: 138</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44533004">
          <h3>
            <a class="item" href="https://github.com/BloopAI/vibe-kanban"
              >Show HN: Vibe Kanban – Kanban board to manage your AI coding
              agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 15:08:52</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44533004"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
            <div class="text">
              <p>
                We started working on this a few weeks ago. Personally, I was
                feeling pretty useless working synchronously with coding agents.
                The 2-5 minutes that they take to complete their work often led
                me to distraction and doomscrolling.
              </p>
              <p>
                But there's plenty of productive work that we (human engineers)
                could be doing in that time, especially if we run coding agents
                in the background and parallelise them.
              </p>
              <p>
                Vibe Kanban lets you effortlessly spin up multiple coding
                agents. While some agents handle tasks in the background, you
                can focus on planning future work or reviewing completed tasks.
              </p>
              <p>
                After a few weeks of internal dog fooding and sharing it with
                friends, we've now open-sourced Vibe Kanban, and it's stable
                enough for day-to-day use.
              </p>
              <p>
                I'd love to hear your feedback, feel free to open an issue on
                the github and we'll respond ASAP.
              </p>
            </div>
          </section>
        </section>
        <section id="44532306">
          <h3>
            <a
              class="item"
              href="https://www.jeffgeerling.com/blog/2025/upgrading-m4-pro-mac-minis-storage-half-price"
              >Upgrading an M4 Pro Mac mini's storage for half the price</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 14:06:07</span
              ><span class="points-container"
                >Points: <span class="points">272</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44532306"
                  >Comments</a
                ><span class="descendants">: 172</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44531707">
          <h3>
            <a class="item" href="https://craigmod.com/ridgeline/210/"
              >Overtourism in Japan, and how it hurts small businesses</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 13:07:03</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44531707"
                  >Comments</a
                ><span class="descendants">: 345</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44531569">
          <h3>
            <a
              class="item"
              href="https://christianselig.com/2025/07/repaste-macbook/"
              >Repaste Your MacBook</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 12:53:27</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44531569"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44531120">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/07/10/world/europe/uk-post-office-scandal-report.html"
              >At Least 13 People Died by Suicide Amid U.K. Post Office Scandal,
              Report Says</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 11:56:19</span
              ><span class="points-container"
                >Points: <span class="points">516</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44531120"
                  >Comments</a
                ><span class="descendants">: 440</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44530767">
          <h3>
            <a
              class="item"
              href="https://patternproject.substack.com/p/from-the-mac-to-the-mystical-bill"
              >Bill Atkinson's psychedelic user interface</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 11:03:59</span
              ><span class="points-container"
                >Points: <span class="points">341</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44530767"
                  >Comments</a
                ><span class="descendants">: 184</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44528943">
          <h3>
            <a class="item" href="https://openfront.io/"
              >OpenFront: Realtime Risk-like multiplayer game in the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 06:27:19</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44528943"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44528509">
          <h3>
            <a
              class="item"
              href="https://decrypt.co/39750/184-billion-bitcoin-anonymous-creator"
              >The day someone created 184 billion Bitcoin (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 04:51:51</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44528509"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44527947">
          <h3>
            <a class="item" href="https://bentoml.com/llm/"
              >LLM Inference Handbook</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-11 @ 02:40:32</span
              ><span class="points-container"
                >Points: <span class="points">281</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44527947"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44526015">
          <h3>
            <a class="item" href="https://github.com/fosrl/pangolin"
              >Show HN: Pangolin – Open source alternative to Cloudflare
              Tunnels</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-10 @ 21:50:43</span
              ><span class="points-container"
                >Points: <span class="points">439</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44526015"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
            <div class="text">
              <p>
                We made Pangolin so you retain full control over your
                infrastructure while providing a user-friendly and feature-rich
                solution for managing proxies, authentication, and access, all
                with a clean and simple dashboard web UI.
              </p>
              <p>
                GitHub:
                <a href="https://github.com/fosrl/pangolin"
                  >https://github.com/fosrl/pangolin</a
                >
              </p>
              <p>
                Deployment takes about 5 minutes on a VPS:
                <a
                  href="https://docs.fossorial.io/Getting%20Started/quick-install"
                  >https://docs.fossorial.io/Getting%20Started/quick-install</a
                >
              </p>
              <p>
                Demo by Lawrence Systems (YouTube):
                <a
                  href="https://youtu.be/g5qOpxhhS7M?si=M1XTWLGLUZW0WzTv&amp;t=723"
                  >https://youtu.be/g5qOpxhhS7M?si=M1XTWLGLUZW0WzTv&amp;t=723</a
                >
              </p>
              <p>Some use cases:</p>
              <p></p>
              <pre><code>  - Grant users access to your apps from anywhere using just a web-browser

  - Proxy behind CGNAT

  - One application load balancer across multiple clouds and on-premises

  - Easily expose services on IoT and edge devices for field monitoring

  - Bring localhost online for easy access
</code></pre>
              A few key features:
              <p></p>
              <pre><code>  - No port forwarding and hide your public IP for self-hosting

  - Create proxies to multiple different private networks

  - OAuth2/OIDC identity providers

  - Role-based access control

  - Raw TCP and UDP support

  - Resource-specific pin codes, passwords, email OTP

  - Self-destructing shareable links

  - API for automation

  - WAF with CrowdSec and Geoblocking</code></pre>
            </div>
          </section>
        </section>
        <section id="44521225">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=RNJCfif1dPY"
              >Andrew Ng: Building Faster with AI [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-10 @ 14:02:08</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44521225"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44514947">
          <h3>
            <a
              class="item"
              href="https://abcnews.go.com/Business/wireStory/allen-hassenfeld-former-ceo-hasbro-family-founded-iconic-123624319"
              >Allen G. Hassenfeld, former CEO of Hasbro, dies at 76</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-09 @ 21:34:36</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44514947"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44504250">
          <h3>
            <a class="item" href="https://muffinman.io/monorail/"
              >Monorail – Turn CSS animations into interactive SVG graphs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-08 @ 21:33:50</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44504250"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44490510">
          <h3>
            <a
              class="item"
              href="https://www.recall.ai/blog/postgres-listen-notify-does-not-scale"
              >Postgres LISTEN/NOTIFY does not scale</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 14:05:06</span
              ><span class="points-container"
                >Points: <span class="points">547</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44490510"
                  >Comments</a
                ><span class="descendants">: 283</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44490308">
          <h3>
            <a
              class="item"
              href="https://www.core77.com/posts/137602/The-ChompSaw-A-Benchtop-Power-Tool-Thats-Safe-for-Kids-to-Use"
              >The ChompSaw: A benchtop power tool that's safe for kids to
              use</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-07 @ 13:43:22</span
              ><span class="points-container"
                >Points: <span class="points">273</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44490308"
                  >Comments</a
                ><span class="descendants">: 193</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
