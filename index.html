<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45596602">
          <h3>
            <a
              class="item"
              href="https://www.jampa.dev/p/llms-and-the-lessons-we-still-havent"
              >Things I've learned in my 7 years implementing AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 18:27:35</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45596602"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45596059">
          <h3>
            <a class="item" href="https://alexzhang13.github.io/blog/2025/rlm/"
              >Recursive Language Models (RLMs)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 17:43:27</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45596059"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45595760">
          <h3>
            <a class="item" href="https://specific.dev/"
              >Show HN: Specific (YC F25) – Build backends with specifications
              instead of code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 17:21:32</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45595760"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                Specific is a platform for building backend APIs and services
                entirely through natural-language specifications and tests,
                without writing code. We then automatically turn your specs into
                a working system and deploy it for you, along with any
                infrastructure needed.
              </p>
              <p>
                We know a lot of developers who have already adopted spec-driven
                development to focus on high-level design and let coding agents
                take care of implementation. We are attempting to take this even
                further by making the specs themselves the source of truth. Of
                course, we can’t blindly trust coding agents to follow the spec,
                so we also support adding tests that will run to ensure the
                system behaves as expected and to avoid regressions.
              </p>
              <p>
                There is so much ground to cover, so we are focusing on a
                smaller set of initial features that in our experience should
                cover a large portion of backends:
              </p>
              <p>
                - An HTTP server for each project. Authentication can be added
                by simply stating in the spec how you want to protect your
                endpoint.
              </p>
              <p>
                - A database automatically spun up and schema configured if the
                spec indicates persistence is needed.
              </p>
              <p>
                - External APIs can be called. You can even link out to API docs
                in your specs.
              </p>
              <p>
                You currently can’t see the generated code, but we are working
                on enabling it. Of course, we don’t claim any ownership of the
                generated code and will gladly let you export it and continue
                building elsewhere.
              </p>
              <p>
                Specific is free to try and we are really eager to hear your
                feedback on it!
              </p>
              <p>
                Try it here:
                <a href="https://app.specific.dev">https://app.specific.dev</a>
              </p>
            </div>
          </section>
        </section>
        <section id="45595724">
          <h3>
            <a
              class="item"
              href="https://www.backblaze.com/blog/are-hard-drives-getting-better-lets-revisit-the-bathtub-curve/"
              >Are hard drives getting better?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 17:18:13</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45595724"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45595403">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/news/claude-haiku-4-5"
              >Claude Haiku 4.5</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 16:55:06</span
              ><span class="points-container"
                >Points: <span class="points">324</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45595403"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://assets.anthropic.com/m/99128ddd009bdcb/original/Claude-Haiku-4-5-System-Card.pdf"
                >https://assets.anthropic.com/m/99128ddd009bdcb/original/Clau...</a
              >
            </div>
          </section>
        </section>
        <section id="45593390">
          <h3>
            <a
              class="item"
              href="https://lab.alexanderobenauer.com/updates/the-jasper-report"
              >Recreating the Canon Cat document interface</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 14:42:14</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45593390"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45593213">
          <h3>
            <a
              class="item"
              href="https://nitrojacob.wordpress.com/2025/09/03/reverse-engineering-a-27mhz-rc-toy-communication-using-rtl-sdr/"
              >Reverse engineering a 27MHz RC toy communication using RTL SDR</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 14:31:54</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45593213"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45592585">
          <h3>
            <a
              class="item"
              href="https://blog.quarkslab.com/./nvidia_gpu_kernel_vmalloc_exploit.html"
              >A kernel stack use-after-free: Exploiting Nvidia's GPU Linux
              drivers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 13:52:15</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45592585"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45592401">
          <h3>
            <a class="item" href="https://ptrpa.ws/nixpkgs-actions-abuse"
              >Pwning the Nix ecosystem</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 13:41:44</span
              ><span class="points-container"
                >Points: <span class="points">214</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45592401"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45592271">
          <h3>
            <a
              class="item"
              href="https://www.bleepingcomputer.com/news/security/f5-says-hackers-stole-undisclosed-big-ip-flaws-source-code/"
              >F5 says hackers stole undisclosed BIG-IP flaws, source code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 13:33:27</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45592271"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.sec.gov/ix?doc=/Archives/edgar/data/1048695/000104869525000149/ffiv-20251015.htm"
                >https://www.sec.gov/ix?doc=/Archives/edgar/data/1048695/0001...</a
              >
            </div>
          </section>
        </section>
        <section id="45591905">
          <h3>
            <a
              class="item"
              href="https://www.apple.com/newsroom/2025/10/apple-introduces-the-powerful-new-ipad-pro-with-the-m5-chip/"
              >iPad Pro with M5 chip</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 13:10:31</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45591905"
                  >Comments</a
                ><span class="descendants">: 226</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45591902">
          <h3>
            <a class="item" href="https://www.apple.com/macbook-pro/"
              >M5 MacBook Pro</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 13:10:08</span
              ><span class="points-container"
                >Points: <span class="points">277</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45591902"
                  >Comments</a
                ><span class="descendants">: 362</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45591799">
          <h3>
            <a
              class="item"
              href="https://www.apple.com/newsroom/2025/10/apple-unleashes-m5-the-next-big-leap-in-ai-performance-for-apple-silicon/"
              >Apple M5 chip</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 13:02:53</span
              ><span class="points-container"
                >Points: <span class="points">835</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45591799"
                  >Comments</a
                ><span class="descendants">: 904</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45591707">
          <h3>
            <a
              class="item"
              href="https://blog.daviddodda.com/how-i-almost-got-hacked-by-a-job-interview"
              >I almost got hacked by a 'job interview'</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 12:56:12</span
              ><span class="points-container"
                >Points: <span class="points">595</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45591707"
                  >Comments</a
                ><span class="descendants">: 307</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45591222">
          <h3>
            <a class="item" href="https://scriberpro.cc/hn/"
              >Show HN: Scriber Pro – Offline AI transcription for macOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 12:16:16</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45591222"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
            <div class="text">
              <p></p>
              <pre><code>  Real metrics from my M1 Max: 4.5hr video file transcribed in 3 minutes 32
  seconds. Works completely offline.

   First 5 HN users who click the button on the page get it free. Literally promo code straight to the app sore  


  Key differences vs Rev/Otter:
  - No 2-hour file limits (handles any length)
  - Timecodes stay accurate on long files (no drift from chunking)
  - Supports MP3, WAV, MP4, MOV, M4A, FLAC
  - Exports to SRT, VTT, JSON, PDF, DOCX, CSV, Markdown

  Built for macOS. Happy to answer questions!</code></pre>
            </div>
          </section>
        </section>
        <section id="45591149">
          <h3>
            <a
              class="item"
              href="https://soft-dev.org/pubs/html/hughes_tratt__garbage_collection_for_rust_the_finalizer_frontier/"
              >Garbage collection for Rust: The finalizer frontier</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 12:08:04</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45591149"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45591082">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45591082"
              >Helpcare AI (YC F24) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 12:00:35</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                - Worked at an early-stage startup (pre-seed, seed, series A)
              </p>
              <p>
                - 7yrs of full-stack experience. (python, react preferred, open
                to other)
              </p>
              <p>- Some experience with LLM / Agentic Applications.</p>
              <p>- Some experience with Data Ingestion.</p>
              <p>- Bonus 2x / yr.</p>
              <p>- $120,000+ / yr. with generous equity.</p>
              <p>Tech Stack:</p>
              <p>Python, React, Fast API, Supabase</p>
              <p>Who we are:</p>
              <p>- Mission to improve the world's capacity for care</p>
              <p>- Respectful, intelligent, positive team</p>
              <p>- A-players that are excited to build the best</p>
              <p>- Well funded, YC- Company with incredible customer demand</p>
            </div>
          </section>
        </section>
        <section id="45590949">
          <h3>
            <a class="item" href="https://github.com/squidowl/halloy"
              >Show HN: Halloy – Modern IRC client</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 11:45:47</span
              ><span class="points-container"
                >Points: <span class="points">243</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45590949"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
            <div class="text">
              <p>
                Three years later, I’ve made new friends who have become core
                contributors, and there are now over 200 people idling in our
                #halloy channel on Libera.
              </p>
              <p>
                My hope is that this client will outlive me and that IRC will
                live on.
              </p>
            </div>
          </section>
        </section>
        <section id="45590935">
          <h3>
            <a
              class="item"
              href="https://andrews.substack.com/p/reverse-engineering-iwork"
              >Reverse engineering iWork</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 11:44:31</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45590935"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45590756">
          <h3>
            <a class="item" href="https://www.unkey.com/blog/serverless-exit"
              >Leaving serverless led to performance improvement and a
              simplified architecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 11:20:35</span
              ><span class="points-container"
                >Points: <span class="points">248</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45590756"
                  >Comments</a
                ><span class="descendants">: 166</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45590681">
          <h3>
            <a
              class="item"
              href="https://joindatacops.com/resources/how-73-of-your-e-commerce-visitors-could-be-fake"
              >Bots are getting good at mimicking engagement</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 11:11:41</span
              ><span class="points-container"
                >Points: <span class="points">326</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45590681"
                  >Comments</a
                ><span class="descendants">: 251</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45588689">
          <h3>
            <a class="item" href="https://steipete.me/posts/just-talk-to-it"
              >Just talk to it – A way of agentic engineering</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 06:21:04</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45588689"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45588594">
          <h3>
            <a class="item" href="https://www.pixnapping.com/"
              >Pixnapping Attack</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-15 @ 06:05:51</span
              ><span class="points-container"
                >Points: <span class="points">277</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45588594"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
            <div class="text">
              <i
                >Hackers can steal 2FA codes and private messages from Android
                phones</i
              >
              -
              <a href="https://news.ycombinator.com/item?id=45574613"
                >https://news.ycombinator.com/item?id=45574613</a
              >
            </div>
          </section>
        </section>
        <section id="45586339">
          <h3>
            <a class="item" href="https://www.fsf.org/news/librephone-project"
              >FSF announces Librephone project</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 23:47:08</span
              ><span class="points-container"
                >Points: <span class="points">1354</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45586339"
                  >Comments</a
                ><span class="descendants">: 550</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45557504">
          <h3>
            <a
              class="item"
              href="https://www.organizingcreativity.com/2025/06/chatgpt-truth-over-comfort-instruction-set/"
              >ChatGPT – Truth over comfort instruction set</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 11:50:53</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45557504"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45555426">
          <h3>
            <a
              class="item"
              href="https://chrispenner.ca/posts/expressiveness-spectrum"
              >Monads are too powerful: The expressiveness spectrum</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 05:11:11</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45555426"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45536373">
          <h3>
            <a
              class="item"
              href="https://www.sandordargo.com/blog/2025/10/08/cpp26-range-support-for-std-optional"
              >C++26: range support for std:optional</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-10 @ 07:58:31</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45536373"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45521779">
          <h3>
            <a
              class="item"
              href="https://invention.si.edu/invention-stories/imitation-ivory-and-power-play"
              >Americans' love of billiards paved the way for synthetic
              plastics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 23:25:51</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45521779"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45512538">
          <h3>
            <a
              class="item"
              href="https://medicine.yale.edu/news-article/brain-navigates-new-spaces-by-flickering-between-reality-and-old-mental-maps/"
              >The brain navigates new spaces by 'darting' between reality and
              mental maps</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 05:51:37</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45512538"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45509713">
          <h3>
            <a class="item" href="https://pearlab.icrl.org/"
              >Princeton Engineering Anomalies Research</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 22:25:58</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45509713"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
