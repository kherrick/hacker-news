<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44174965">
          <h3>
            <a
              class="item"
              href="https://rachel.fast.ai/posts/2025-06-04-enzyme-ml-fails/index.html"
              >Deep learning gets the glory, deep fact checking gets ignored</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 21:31:56</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44174965"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44174856">
          <h3>
            <a
              class="item"
              href="https://richardcsuwandi.github.io/blog/2025/dgm/"
              >A deep dive into self-improving AI and the Darwin-Gödel
              Machine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 21:19:32</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44174856"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44174676">
          <h3>
            <a class="item" href="https://careers.activeloop.ai/"
              >Activeloop (YC S18) Is Hiring Senior Back End and AI Search
              Engineers(Onsite, MV)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 21:00:50</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44174643">
          <h3>
            <a
              class="item"
              href="https://lawzero.org/en/news/yoshua-bengio-launches-lawzero-new-nonprofit-advancing-safe-design-ai"
              >Yoshua Bengio Launches LawZero: A New Nonprofit Advancing
              Safe-by-Design AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 20:57:29</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44174643"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44174540">
          <h3>
            <a
              class="item"
              href="https://www.livescience.com/health/neuroscience/can-adults-grow-new-brain-cells"
              >Can adults grow new brain cells?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 20:46:34</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44174540"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44174190">
          <h3>
            <a class="item" href="https://github.com/neon443/AirAP"
              >Show HN: AirAP AirPlay server - AirPlay to an iOS Device</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 20:12:33</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44174190"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <p>
                This was incredibly fun to make - can’t wait for you all to see
                it!
              </p>
            </div>
          </section>
        </section>
        <section id="44173853">
          <h3>
            <a
              class="item"
              href="https://clarkesworldmagazine.com/liptak_06_25/"
              >Destination: Jupiter</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 19:43:30</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44173853"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44173667">
          <h3>
            <a
              class="item"
              href="https://github.com/dineshgowda24/alfred-gcp-workflow"
              >Show HN: An Alfred workflow to open GCP services and browse
              resources within</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 19:25:57</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44173667"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              An Alfred workflow that lets you instantly open Google Cloud
              services or search GCP resources—fast, simple, and right from your
              Alfred.
            </div>
          </section>
        </section>
        <section id="44173581">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44173581"
              >Ask HN: Options for One-Handed Typing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 19:17:50</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44173581"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
            <div class="text">
              <p>
                So I wanted to prepare some options for one-handed typing that
                they can review. At first glance, it looks like solutions fall
                into one of three categories:
              </p>
              <p>
                - Trainings on how to effectively use a keyboard with one hand
              </p>
              <p>
                - Keyboard remappings on existing hardware to use alternative
                key layouts that favor the keys on the left side
              </p>
              <p>
                - Specialty keyboards that are intended to be used with one
                hand. Some of these seem promising but also shockingly
                expensive.
              </p>
              <p>
                Any thoughts on what solutions you've seen work / you might
                pursue in a similar situation?
              </p>
            </div>
          </section>
        </section>
        <section id="44173193">
          <h3>
            <a
              class="item"
              href="https://seclists.org/fulldisclosure/2025/Jun/2"
              >CVE-2024-47081: Netrc credential leak in PSF requests library</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 18:39:29</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44173193"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44172428">
          <h3>
            <a class="item" href="https://github.com/lingodotdev/lingo.dev"
              >Show HN: Localize React apps without rewriting code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 17:27:32</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44172428"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
            <div class="text">
              <p>
                React app localization typically requires implementing i18n
                frameworks, extracting text to JSON files, and wrapping
                components in translation tags - essentially rewriting your
                entire codebase before you can even start translating.
              </p>
              <p>
                Our React bundler plugin eliminates this friction entirely. You
                add it to an existing React app, specify which languages you
                want, and it automatically makes your app multilingual without
                touching a single line of your component code.
              </p>
              <p>
                Here's a video showing how it works:
                <a href="https://www.youtube.com/watch?v=sSo2ERxAvB4"
                  >https://www.youtube.com/watch?v=sSo2ERxAvB4</a
                >. The docs are at
                <a href="https://lingo.dev/en/compiler"
                  >https://lingo.dev/en/compiler</a
                >
                and, sample apps at
                <a
                  href="https://github.com/lingodotdev/lingo.dev/tree/main/demo"
                  >https://github.com/lingodotdev/lingo.dev/tree/main/demo</a
                >.
              </p>
              <p>
                Last year, a dev from our Twitter community told us: "I don't
                want to wrap every React component with `&lt;T&gt;` tags or
                extract strings to JSON. Can I just wrap the entire React app
                and make it multilingual?"
              </p>
              <p>
                Our first reaction was "That's not how i18n works in React." But
                a couple hours later, we found ourselves deep in a technical
                rabbit hole, wondering what if that actually was possible?
              </p>
              <p>
                That question led us to build the "localization compiler" - a
                middleware for React that plugs into the codebase, processes the
                Abstract Syntax Tree of the React code, deterministically
                locates translatable elements, feeds every context boundary into
                LLMs, and bakes the translations back into the build, making UI
                multilingual in seconds.
              </p>
              <p>
                Everything happens locally during build time, keeping the React
                project as the source of truth. No code modifications, no
                extraction, and no maintenance of separate translation files are
                needed, however, overrides are possible via data-lingo-*
                attributes.
              </p>
              <p>
                Building this was trickier than we expected. Beyond traversing
                React/JS abstract syntax trees, we had to solve some challenging
                problems. We wanted to find a way to deterministically group
                elements that should be translated together, so, for example, a
                phrase wrapped in the `&lt;a&gt;` link tag wouldn't get
                mistranslated because it was processed in isolation. We also
                wanted to detect inline function calls and handle them
                gracefully during compile-time code generation.
              </p>
              <p>
                For example, this entire text block that our localization
                compiler identifies as a single translation unit, preserving the
                HTML structure and context for the LLM.
              </p>
              <p>
                ``` function WelcomeMessage() { return ( &lt;div&gt; Welcome to
                &lt;i&gt;our platform&lt;/i&gt;! &lt;a href="/start"&gt;Get
                started&lt;/a&gt; today. &lt;/div&gt; ); } ```
              </p>
              <p>
                The biggest challenge was making our compiler compatible with
                Hot Module Replacement. This allows developers to code in
                English while instantly seeing the UI in Spanish or Japanese,
                which is invaluable for catching layout issues caused by text
                expansion or contraction in different languages that take
                more/less space on the screen.
              </p>
              <p>
                For performance, we implemented aggressive caching that stores
                AST analysis results between runs and only reprocesses
                components that have changed. Incremental builds stay fast even
                on large codebases, since at any point in time as a dev, you
                update only a limited number of components, and we heavily
                parallelized LLM calls.
              </p>
              <p>
                This approach was technically possible before LLMs, but
                practically useless, since for precise translations you'd still
                need human translators familiar with the product domain.
                However, now, with context-aware models, we can generate decent
                translations automatically.
              </p>
              <p>
                We're excited about finally making it production ready and
                sharing this with the HN community.
              </p>
              <p>
                Run `npm i lingo.dev` , check out the docs at
                lingo.dev/compiler, try breaking it and let us know what you
                think about this approach to React i18n!
              </p>
            </div>
          </section>
        </section>
        <section id="44172166">
          <h3>
            <a
              class="item"
              href="https://www.swift.org/blog/swift-at-apple-migrating-the-password-monitoring-service-from-java/"
              >Swift at Apple: Migrating the Password Monitoring Service from
              Java</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 17:03:13</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44172166"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44171959">
          <h3>
            <a
              class="item"
              href="https://mohitmishra786.github.io/chessman/2025/03/31/Technical-Guide-to-System-Calls-Implementation-and-Signal-Handling-in-Modern-Operating-Systems.html"
              >Technical Guide to System Calls: Implementation and Signal
              Handling in Modern OS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 16:45:15</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44171959"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44171677">
          <h3>
            <a class="item" href="https://go.dev/blog/error-syntax"
              >(On | No) Syntactic Support for Error Handling</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 16:18:45</span
              ><span class="points-container"
                >Points: <span class="points">269</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44171677"
                  >Comments</a
                ><span class="descendants">: 331</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44171652">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2505.05831"
              >Oh fuck! How do people feel about robots that leverage
              profanity?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 16:16:46</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44171652"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44170968">
          <h3>
            <a class="item" href="https://www.inotherwords.app/linguabase/"
              >The Small World of English</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 15:14:52</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44170968"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44170694">
          <h3>
            <a
              class="item"
              href="https://github.com/collidingScopes/3d-model-playground"
              >Show HN: Controlling 3D models with voice and hand gestures</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 14:45:52</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44170694"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <p>
                - use voice commands to change interaction mode (drag, rotate,
                scale, animate)
              </p>
              <p>- use hand gestures to control the 3D model</p>
              <p>
                - drag/drop to import other models (only GLTF format supported
                for now)
              </p>
              <p>
                Created using threejs, mediapipe, web speech API, rosebud AI,
                and Quaternius 3D models
              </p>
              <p>
                Githhub repo:
                <a href="https://github.com/collidingScopes/3d-model-playground"
                  >https://github.com/collidingScopes/3d-model-playground</a
                >
              </p>
              <p>
                Demo:
                <a
                  href="https://xcancel.com/measure_plan/status/1929900748235550912"
                  >https://xcancel.com/measure_plan/status/1929900748235550912</a
                >
              </p>
              <p>I'd love to get your feedback! Thank you</p>
            </div>
          </section>
        </section>
        <section id="44170657">
          <h3>
            <a class="item" href="https://pinsend.app"
              >Show HN: PinSend – Share text between devices using a PIN(P2P, no
              login)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 14:41:47</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44170657"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built [PinSend](<a href="https://pinsend.app"
                  >https://pinsend.app</a
                >) — a free web app for instantly sharing text between devices,
                using a simple 6-character PIN.
              </p>
              <p>
                - No login, no account, no install. - Peer-to-peer WebRTC
                transfer (no server relay, no cloud). - Cross-platform: works on
                any modern browser.
              </p>
              <p>
                I built PinSend for myself while developing web apps—I was
                always copying ngrok links and sending error logs between my
                laptop and mobile devices. I wanted a frictionless, instant way
                to move links and text between anything.
              </p>
              <p>
                *Demo:* 1. Open
                <a href="https://pinsend.app">https://pinsend.app</a> on your
                phone &amp; laptop 2. Paste or type some text and hit "Send",
                enter the PIN on the other device 3. Instant sync! 4. No more
                emailing or Whatsapping notes to yourself
              </p>
              <p>Would love feedback!</p>
            </div>
          </section>
        </section>
        <section id="44169759">
          <h3>
            <a
              class="item"
              href="https://www.ibtimes.co.uk/builderai-collapses-15bn-ai-startup-exposed-actually-indians-pretending-bots-1734784"
              >Builder.ai Collapses: $1.5B 'AI' Startup Exposed as 'Indians'</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 13:17:06</span
              ><span class="points-container"
                >Points: <span class="points">262</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44169759"
                  >Comments</a
                ><span class="descendants">: 167</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44169413">
          <h3>
            <a class="item" href="https://vlmsarebiased.github.io/"
              >Vision Language Models Are Biased</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 12:47:30</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44169413"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44169132">
          <h3>
            <a class="item" href="https://github.com/neocanable/garlic"
              >Show HN: I wrote a Java decompiler in pure C language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 12:14:29</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44169132"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44169115">
          <h3>
            <a class="item" href="https://localmess.github.io/"
              >Covert Web-to-App Tracking via Localhost on Android</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 12:12:28</span
              ><span class="points-container"
                >Points: <span class="points">245</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44169115"
                  >Comments</a
                ><span class="descendants">: 194</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44168265">
          <h3>
            <a
              class="item"
              href="https://www.belfercenter.org/publication/plutonium-mountain-inside-17-year-mission-secure-legacy-soviet-nuclear-testing"
              >Plutonium Mountain: The 17-year mission to guard remains of
              Soviet nuclear tests</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 10:06:37</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44168265"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44168256">
          <h3>
            <a
              class="item"
              href="https://dam.org/museum/essays_ui/essays/there-should-be-no-computer-art/"
              >There should be no Computer Art (1971)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 10:05:29</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44168256"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44168201">
          <h3>
            <a class="item" href="https://paulgraham.com/field.html"
              >The Shape of the Essay Field</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 09:55:55</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44168201"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44167592">
          <h3>
            <a class="item" href="https://github.com/iamgio/quarkdown"
              >Quarkdown: A modern Markdown-based typesetting system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 08:06:28</span
              ><span class="points-container"
                >Points: <span class="points">561</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44167592"
                  >Comments</a
                ><span class="descendants">: 239</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44167049">
          <h3>
            <a class="item" href="https://blog.fredrb.com/2025/06/02/futex-fun/"
              >Fun with Futex</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 06:37:25</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44167049"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44166155">
          <h3>
            <a
              class="item"
              href="https://localroger.com/prime-intellect/mopiall.html"
              >The Metamorphosis of Prime Intellect (1994)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 04:05:19</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44166155"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44142652">
          <h3>
            <a class="item" href="https://ratfactor.com/forth/implementing"
              >Implementing a Forth</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 07:38:30</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44142652"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44142592">
          <h3>
            <a
              class="item"
              href="https://lamport.azurewebsites.net/tla/high-level-view.html"
              >A High-Level View of TLA+</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 07:26:30</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44142592"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
