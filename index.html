<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43062546">
          <h3>
            <a class="item" href="https://h.43z.one/blog/2025-02-12/"
              >Watt The Fox?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 21:32:13</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43062546"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43062457">
          <h3>
            <a
              class="item"
              href="https://taxfoundation.org/blog/trump-reciprocal-tariffs-eu-vat-discriminatory/"
              >The European Vat Is Not a Discriminatory Tax Against US
              Exports</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 21:20:34</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43062457"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43061977">
          <h3>
            <a
              class="item"
              href="https://www.cs.otago.ac.nz/cosc345/resources/nasa-10-rules.htm"
              >NASA has a list of 10 rules for software development</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 20:24:13</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43061977"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43061608">
          <h3>
            <a
              class="item"
              href="https://www.seangoedecke.com/what-llms-cant-do/"
              >To avoid being replaced by LLMs, do what they can't</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 19:44:57</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43061608"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43061498">
          <h3>
            <a class="item" href="https://weeks.ginatrapani.org/"
              >My Life in Weeks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 19:34:29</span
              ><span class="points-container"
                >Points: <span class="points">244</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43061498"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43061482">
          <h3>
            <a
              class="item"
              href="https://sfstandard.com/2025/02/14/san-francisco-department-public-health-daniel-tsai-opioids-mckinsey/"
              >New SF public health chief was part of McKinsey opioid-marketing
              operation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 19:32:16</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43061482"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43061423">
          <h3>
            <a class="item" href="https://github.com/microsoft/OmniParser"
              >OmniParser V2 – A simple screen parsing tool towards pure vision
              based GUI agent</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 19:26:26</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43061423"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43061183">
          <h3>
            <a class="item" href="https://github.com/cosmos72/schemesh"
              >Schemesh: Fusion between Unix shell and Lisp REPL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 19:00:38</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43061183"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43061173">
          <h3>
            <a
              class="item"
              href="https://www.volexity.com/blog/2025/02/13/multiple-russian-threat-actors-targeting-microsoft-device-code-authentication/"
              >Multiple Russian Threat Actors Targeting Microsoft Device Code
              Authentication</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 18:59:39</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43061173"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43060818">
          <h3>
            <a class="item" href="https://source-robotics.github.io/PAROL-docs/"
              >PAROL6: 3D-printed desktop robotic arm</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 18:26:49</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43060818"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43060769">
          <h3>
            <a
              class="item"
              href="https://nabraj.com/blog/basketball-solved-sport/"
              >Basketball has evolved into a game of calculated
              decision-making</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 18:21:10</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43060769"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43060603">
          <h3>
            <a class="item" href="https://github.com/mpatajac/jillc"
              >Jill – a functional programming language for the Nand2Tetris
              platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 18:04:12</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43060603"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43060587">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/brain/alzheimers-dementia/alzheimers-biomarkers-visible-decade-before-symptoms/"
              >Alzheimer's biomarkers now visible up to a decade ahead of
              symptoms</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 18:02:17</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43060587"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43059826">
          <h3>
            <a
              class="item"
              href="https://insideclimatenews.org/news/10022025/solar-battery-storage-texas-grid/"
              >More Solar and Battery Storage Added to TX Grid Than Other Power
              Src Last Year</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 16:37:04</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43059826"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43059579">
          <h3>
            <a
              class="item"
              href="https://github.com/b4rtaz/distributed-llama/discussions/162"
              >Deepseek R1 Distill 8B Q40 on 4 x Raspberry Pi 5</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 16:11:29</span
              ><span class="points-container"
                >Points: <span class="points">254</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43059579"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43058997">
          <h3>
            <a
              class="item"
              href="https://techxplore.com/news/2025-02-carbon-capture-renewables.html"
              >Carbon capture more costly than switching to renewables,
              researchers find</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 15:06:30</span
              ><span class="points-container"
                >Points: <span class="points">344</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43058997"
                  >Comments</a
                ><span class="descendants">: 258</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43058993">
          <h3>
            <a
              class="item"
              href="https://e360.yale.edu/digest/brake-pads-lung-damage-study"
              >Dust from car brakes more harmful than exhaust, study finds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 15:06:15</span
              ><span class="points-container"
                >Points: <span class="points">321</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43058993"
                  >Comments</a
                ><span class="descendants">: 302</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43058522">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gaming/2025/02/the-diablo-hackers-that-debunked-a-record-speedrun/"
              >Diablo hackers uncovered a speedrun scandal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 14:00:00</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43058522"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43058299">
          <h3>
            <a class="item" href="https://github.com/khokao/synergetica"
              >Show HN: Synergetica – A Modern, End-to-End Genetic Circuit
              Design Desktop App</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 13:22:09</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43058299"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <p>You can find the repo and docs here:</p>
              <p>
                - GitHub:
                <a href="https://github.com/khokao/synergetica"
                  >https://github.com/khokao/synergetica</a
                >
              </p>
              <p>
                - Docs:
                <a href="https://khokao.github.io/synergetica/"
                  >https://khokao.github.io/synergetica/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43057375">
          <h3>
            <a class="item" href="https://github.com/Goldziher/kreuzberg"
              >Show HN: Kreuzberg – Modern async Python library for document
              text extraction</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 10:07:23</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43057375"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
            <div class="text">
              <p>
                Kreuzberg is a modern Python library built from the ground up
                with async/await, type hints, and optimized I/O handling.
              </p>
              <p>
                It provides a unified interface for extracting text from
                documents (PDFs, images, office files) without external API
                dependencies.
              </p>
              <p>
                Key technical features: - Built with modern Python best
                practices (async/await, type hints, functional-first) -
                Optimized async I/O with anyio for multi-loop compatibility -
                Smart worker process pool for CPU-bound tasks (OCR, doc
                conversion) - Efficient batch processing with concurrent
                extractions - Clean error handling with context-rich exceptions
              </p>
              <p>
                I built this after struggling with existing solutions that were
                either synchronous-only, required complex deployments, or had
                poor async support. The goal was to create something that works
                well in modern async Python applications, can be easily
                dockerized or used in serverless contexts, and relies only on
                permissive OSS.
              </p>
              <p>
                Key advantages over alternatives: - True async support with
                optimized I/O - Minimal dependencies (much smaller than
                alternatives) - Perfect for serverless and async web apps -
                Local processing without API calls - Built for modern Python
                codebases with rigorous typing and testing
              </p>
              <p>I Would love feedback!</p>
              <p>The library is MIT licensed and open to contributions.</p>
              <p>
                Here is the repo:
                <a href="https://github.com/Goldziher/kreuzberg"
                  >https://github.com/Goldziher/kreuzberg</a
                >
              </p>
              <p>Staring is caring</p>
            </div>
          </section>
        </section>
        <section id="43057344">
          <h3>
            <a class="item" href="https://www.figgie.com/"
              >Jane Street's Figgie card game</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 09:59:20</span
              ><span class="points-container"
                >Points: <span class="points">343</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43057344"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43055671">
          <h3>
            <a
              class="item"
              href="https://wololo.net/2025/02/14/the-20-year-old-psp-can-now-connect-to-wpa2-wifi-networks/"
              >The 20 year old PSP can now connect to WPA2 WiFi Networks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 03:31:56</span
              ><span class="points-container"
                >Points: <span class="points">388</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43055671"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43054069">
          <h3>
            <a
              class="item"
              href="https://meyerweb.com/eric/thoughts/2024/06/07/a-decade-later-a-decade-lost/"
              >A decade later, a decade lost (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-14 @ 23:10:36</span
              ><span class="points-container"
                >Points: <span class="points">495</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43054069"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43053844">
          <h3>
            <a class="item" href="https://fly.io/blog/wrong-about-gpu/"
              >We were wrong about GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-14 @ 22:36:31</span
              ><span class="points-container"
                >Points: <span class="points">770</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43053844"
                  >Comments</a
                ><span class="descendants">: 496</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43053419">
          <h3>
            <a
              class="item"
              href="https://aresluna.org/the-hardest-working-font-in-manhattan/"
              >The hardest working font in Manhattan</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-14 @ 21:45:49</span
              ><span class="points-container"
                >Points: <span class="points">696</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43053419"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43051123">
          <h3>
            <a
              class="item"
              href="https://www.modernism-in-metroland.co.uk/blog/edgware-1924-the-making-of-a-suburb"
              >Edgware 1924: The Making of a Suburb</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-14 @ 18:01:04</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43051123"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43023698">
          <h3>
            <a
              class="item"
              href="https://github.com/mohsen1/llm-debugger-vscode-extension"
              >Show HN: Letting LLMs Run a Debugger</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 09:54:14</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43023698"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              <p>
                I just built an experimental VSCode extension called LLM
                Debugger. It’s a proof-of-concept that lets a large language
                model take charge of debugging. Instead of only looking at the
                static code, the LLM also gets to see the live runtime
                state—actual variable values, function calls, branch decisions,
                and more. The idea is to give it enough context to help diagnose
                issues faster and even generate synthetic data from running
                programs.
              </p>
              <p>Here’s what it does:</p>
              <p>
                * Active Debugging: It integrates with Node.js debug sessions to
                gather runtime info (like variable states and stack traces).
              </p>
              <p>
                * Automated Breakpoints: It automatically sets and manages
                breakpoints based on both code analysis and LLM suggestions.
              </p>
              <p>
                * LLM Guidance: With live debugging context, the LLM can suggest
                actions like stepping through code or adjusting breakpoints in
                real time.
              </p>
              <p>
                I built this out of curiosity to see if combining static code
                with runtime data could help LLMs solve bugs more effectively.
                It’s rough around the edges and definitely not production-ready
              </p>
              <p>
                I’m not planning on maintaining it further. But I thought it was
                a fun experiment and wanted to share it with you all.
              </p>
              <p>
                Check out the attached video demo to see it in action. Would
                love to hear your thoughts and any feedback you might have!
              </p>
              <p>Cheers.</p>
            </div>
          </section>
        </section>
        <section id="43023527">
          <h3>
            <a
              class="item"
              href="https://josvisser.substack.com/p/its-a-knowledge-problem-or-is-it"
              >It's a knowledge problem Or is it?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 09:28:08</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43023527"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43019975">
          <h3>
            <a
              class="item"
              href="https://news.agu.org/press-release/surprise-magma-chamber-growing-under-mediterranean-volcano/"
              >Surprise Magma Chamber Growing Under Mediterranean Volcano
              (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-12 @ 00:00:28</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43019975"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43018928">
          <h3>
            <a
              class="item"
              href="https://startupbaniya.com/sharing-chatgpt-account"
              >Sharing a ChatGPT Account with My Wife</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-11 @ 22:02:13</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43018928"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
