<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40793540">
          <h3>
            <a
              class="item"
              href="https://boards.greenhouse.io/supabase/jobs/5162509004"
              >Supabase (YC S20) Is Hiring Postgres SREs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 21:00:06</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40793174">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/business/autos-transportation/volkswagen-invest-up-5-billion-rivian-part-tech-joint-venture-2024-06-25/"
              >Volkswagen to invest up to $5B in Rivian</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 20:24:44</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40793174"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40792740">
          <h3>
            <a class="item" href="https://foon.uk/fixing-quicklook/"
              >Fixing QuickLook (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 19:45:08</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40792740"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40791829">
          <h3>
            <a
              class="item"
              href="https://sansec.io/research/polyfill-supply-chain-attack"
              >Polyfill supply chain attack hits 100K+ sites</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 18:27:30</span
              ><span class="points-container"
                >Points: <span class="points">431</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40791829"
                  >Comments</a
                ><span class="descendants">: 172</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40790057">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/world/article/2024/jun/25/chinas-change-6-lunar-probe-returns-world-first-samples-from-far-side-of-the-moon"
              >Chang'e 6 lunar sample return mission returns with samples from
              moon's far side</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 15:48:29</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40790057"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40790008">
          <h3>
            <a
              class="item"
              href="https://domain-j.com/Igneous-Linearizer/uuid/9e30337c-b890-4fd9-a0bd-51a7aa6e65b0"
              >Igneous Linearizer: semi-structured source code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 15:44:38</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40790008"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40789919">
          <h3>
            <a
              class="item"
              href="https://chipsandcheese.com/2024/06/25/testing-amds-giant-mi300x/"
              >Testing AMD's Giant MI300X</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 15:36:09</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40789919"
                  >Comments</a
                ><span class="descendants">: 138</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40789862">
          <h3>
            <a class="item" href="https://github.com/glasskube/glasskube"
              >Show HN: Glasskube – Open Source Kubernetes Package Manager,
              alternative to Helm</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 15:30:40</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40789862"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/glasskube/glasskube"
                >https://github.com/glasskube/glasskube</a
              >). We're working on an open-source package manager for
              Kubernetes. It's an alternative to tools like Helm or Kustomize,
              primarily focused on making deploying, updating, and configuring
              Kubernetes packages simpler and a lot faster. Here is a demo video
              (<a href="https://www.youtube.com/watch?v=aIeTHGWsG2c#t=17s"
                >https://www.youtube.com/watch?v=aIeTHGWsG2c#t=17s</a
              >) with quick start instructions.
              <p>
                Most developers working with Kubernetes use Helm, an open-source
                tool created during a hackathon nine years ago. However, with
                the rapid growth of Kubernetes packages to over 800 packages on
                the CNCF landscape today, the prerequisites have changed, and we
                believe it’s time for a new package manager. Every engineer we
                talked to has a love-hate relationship with Helm, and we also
                found ourselves defaulting to Helm despite its shortcomings due
                to a lack of alternatives.
              </p>
              <p>
                We have spent enough time trying to get Helm to do what we need.
                From looking for the correct chart, trying to learn how each
                value affects the components and hand-crafting a schemaless
                values.yaml file, to debugging the final release if it
                inevitably fails to install, the experience of using Helm is,
                for the most part, time consuming and cumbersome.
              </p>
              <p>
                Charts often become more complex, requiring the use of
                sub-charts. These umbrella charts tend to be even harder to
                maintain and upgrade, because so many different components are
                bundled into a single release.
              </p>
              <p>
                We talked to over 100 developers and found that everyone
                developed their own little workarounds, with some working better
                than others. We collected the feedback poured everything we
                learned from that into a new package manager. We want to build
                something that is as easy to use as Homebrew or npm and make
                package management on Kubernetes as easy as on every other
                platform.
              </p>
              <p>Some of the features Glasskube already supports are</p>
              <p>
                Typesafe package configuration via UI or interactive CLI to
                inject values from other packages, ConfigMaps, and Secrets.
              </p>
              <p>
                Browse our central package repository so there is no need to
                look for a Helm repository to find a specific package.
              </p>
              <p>
                All packages are dependency-aware so they can be used and
                referenced by multiple other packages even across namespaces. We
                validate the complete dependency tree - So packages get
                installed in the correct namespace.
              </p>
              <p>
                Preview and perform pending updates to your desired version with
                a single click of a button. All updates have been tested in the
                Glasskube test suite before being available in the public
                repository.
              </p>
              <p>
                Use multiple repositories and publish your own private packages
                (e.g., your company's internal services packages, so all
                developers will have the up-to-date and easily configured
                internal services).
              </p>
              <p>
                All features are available via UI or interactive CLI. You can
                also manage all packages via GitOps.
              </p>
              <p>
                Currently, we are focused on enhancing the user experience,
                aiming to save engineers as much time as possible. We are still
                using Helm and Manifests under the hood. However, together with
                the community, we plan to develop an entirely new packaging and
                bundling format for all cloud-native packages. This will provide
                package developers with a straightforward way to define how to
                install and configure packages, offer simple upgrade paths, and
                enable us to provide feedback, crash reports, and analytics to
                every developer working on Kubernetes packages.
              </p>
              <p>
                We also started working on a cloud version. You can pre-signup
                here in case you are interested:
                <a href="https://glasskube.cloud">https://glasskube.cloud</a>
              </p>
              <p>
                We'd greatly appreciate any feedback you have and hope you get
                the chance to try out Glasskube.
              </p>
            </div>
          </section>
        </section>
        <section id="40789672">
          <h3>
            <a class="item" href="https://flipdisc.io/"
              >Show HN: I built a JavaScript-powered flipdisc display</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 15:14:08</span
              ><span class="points-container"
                >Points: <span class="points">231</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40789672"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40789353">
          <h3>
            <a
              class="item"
              href="https://dotenvx.com/blog/2024/06/24/dotenvx-next-generation-config-management.html"
              >Show HN: From dotenv to dotenvx – better config management</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 14:49:28</span
              ><span class="points-container"
                >Points: <span class="points">172</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40789353"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40789339">
          <h3>
            <a
              class="item"
              href="https://mused.com/en/guided/923/the-tomb-of-nefertari-valley-of-the-queens"
              >Show HN: The Tomb of Nefertari [QV 66] Guided Virtual Tour</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 14:48:21</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40789339"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                I wasn't able to take photogrammetry photos of the artifacts
                from the tomb in the Museo Egizio in Turin because they were
                traveling while I was there (and now the museum is closed to
                install a new roof anyhow), so I tried to include comparanda
                from other museums where I had scanned artifacts.
              </p>
              <p>
                I tested the same dataset with 3d Gaussian Splatting but that
                had lower resolution results for great complexity in frontend
                code and reduced performance on older devices. [3DGS tour:
                <a
                  href="https://mused.com/en/tours/860/learn-about-3d-gaussian-splatting"
                  >https://mused.com/en/tours/860/learn-about-3d-gaussian-splat...</a
                >]
              </p>
              <p>
                Moving forward, if anyone's working on the same idea, I didn't
                find a good path to monetization through web-based 3d content,
                so I'll take the high resolution photogrammetry of spaces into
                Unreal and switch to desktop and headset builds.
              </p>
            </div>
          </section>
        </section>
        <section id="40788648">
          <h3>
            <a class="item" href="https://github.com/aspen-cloud/triplit"
              >Show HN: Triplit – Open-source syncing database that runs on
              server and client</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 13:53:05</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40788648"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.triplit.dev">https://www.triplit.dev</a>).
              Triplit is an open-source database (<a
                href="https://github.com/aspen-cloud/triplit"
                >https://github.com/aspen-cloud/triplit</a
              >) that combines a server-side database, client-side cache, and a
              sync engine into one cohesive product. You can try it out with a
              new project by running:
              <p></p>
              <pre><code>  (npm|bun|yarn) create triplit-app
</code></pre>
              As a team, we’ve worked on several projects that aspired to the
              user experience of Linear or Superhuman, where every interaction
              feels instant like a native app while still having the
              collaborative and syncing features we expect from the web.
              Delivering this level of UX was incredibly challenging. In each
              app we built, we had to implement a local caching strategy, keep
              the cache up to date with optimistic writes, individually handle
              retries and rollbacks from failures, and do a lot of codegen to
              get Typescript to work properly. This was spread across multiple
              libraries and infrastructure providers and required constant
              maintenance.
              <p>
                We finally decided to build the system we always wanted. Triplit
                enables your app to work offline and sync in real-time over
                websockets with an enjoyable developer experience.
              </p>
              <p>
                Triplit lets you (1) define your schema in Typescript and simply
                push to the server without writing migration files; (2) write
                queries that automatically update in real-time to both remote
                changes from the server and optimistic local mutations on the
                client—with complete Typescript types; (3) run the whole stack
                locally without having to run a bunch of Docker containers.
              </p>
              <p>
                One interesting challenge of building a system like this is
                enabling partial replication and incremental query evaluation.
                In order to make loading times as fast as possible, Triplit will
                only fetch the minimal required data from the server to fulfill
                a specific query and then send granular updates to that client.
                This differs from other systems which either sync all of a
                user’s data (too slow for web apps) or repeatedly fetch the
                query to simulate a subscription (which bogs down your database
                and network bandwidth).
              </p>
              <p>
                If you’re familiar with the complexity of cache-invalidation and
                syncing, you’ll know that Triplit is operating firmly in the
                distributed systems space. We did a lot of research and settled
                on a local first approach that uses a fairly simple CRDT
                (conflict-free replicated data type) that allows each client to
                work offline and guarantees that they will converge to a
                consistent state when syncing. It works by treating each
                attribute of an entity as a last writer wins register. Compared
                to more complex strategies, this approach ends up being faster
                and doesn’t require additional logic to handle conflicting edits
                between concurrent writers. It’s similar to the strategy Figma
                uses for their collaborative editor.
              </p>
              <p>
                You can add Triplit to an existing project by installing the
                client NPM package. You may self-host the Triplit Server or pay
                us to manage an instance for you. One cool part is that whether
                you choose to self-host or deploy on Triplit Cloud, you can
                still use our Dashboard to configure your database or
                interactively manage your data in the Triplit Console, a
                spreadsheet-like GUI.
              </p>
              <p>
                In the future, we plan to add APIs for authentication, file
                uploads, and presence to create a Supabase/Firebase-like
                experience.
              </p>
              <p>
                You can get started by going to
                <a href="https://triplit.dev">https://triplit.dev</a> or find us
                on Github
                <a href="https://github.com/aspen-cloud/triplit"
                  >https://github.com/aspen-cloud/triplit</a
                >. Thanks for checking us out and we are looking forward to your
                feedback in the comments!
              </p>
            </div>
          </section>
        </section>
        <section id="40786640">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/microsoft-teams-eu-european-union-antitrust-26d11ada00f504d537d1b054dd6f6bbf"
              >Microsoft breached antitrust rules by bundling Teams and Office,
              EU says</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 10:21:47</span
              ><span class="points-container"
                >Points: <span class="points">243</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40786640"
                  >Comments</a
                ><span class="descendants">: 338</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40784459">
          <h3>
            <a
              class="item"
              href="https://www.cliomuse.com/stalin-disney-eisenstein--ivan-the-terrible.html"
              >Stalin, Eisenstein, Walt Disney and Ivan the Terrible (1992)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 04:23:19</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40784459"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40783742">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-06-titan-strong-erode-coastlines-lakes.html"
              >Wave activity on Titan strong enough to erode the coastlines of
              lakes and seas</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 02:29:54</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40783742"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40783598">
          <h3>
            <a
              class="item"
              href="https://shraiwi.github.io/read.html?md=blog/simd-fast-esp32s3.md"
              >SIMD-accelerated computer vision on a $2 microcontroller</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 02:10:40</span
              ><span class="points-container"
                >Points: <span class="points">274</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40783598"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40783485">
          <h3>
            <a class="item" href="https://github.com/dojoe/Twonkie"
              >Twonkie: A USB-PD sniffer/injector/sink based on Google's Twinkie
              open hardware</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-25 @ 01:55:22</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40783485"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40782130">
          <h3>
            <a
              class="item"
              href="https://www.nbcnews.com/politics/justice-department/julian-assange-reached-plea-deal-us-allowing-go-free-rcna158695"
              >Julian Assange has reached a plea deal with the U.S., allowing
              him to go free</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-24 @ 23:10:07</span
              ><span class="points-container"
                >Points: <span class="points">2417</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40782130"
                  >Comments</a
                ><span class="descendants">: 1281</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40781573">
          <h3>
            <a
              class="item"
              href="https://insidestory.org.au/spy-accomplice-ghostwriter/"
              >Spy, Accomplice, Ghostwriter</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-24 @ 22:13:46</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40781573"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40778594">
          <h3>
            <a
              class="item"
              href="https://letsencrypt.org/2024/06/24/ntpd-rs-deployment.html"
              >More Memory Safety for Let's Encrypt: Deploying ntpd-rs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-24 @ 17:23:28</span
              ><span class="points-container"
                >Points: <span class="points">314</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40778594"
                  >Comments</a
                ><span class="descendants">: 154</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40778241">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/collection/diagramming-sentences-in-the-19th-century/"
              >Diagraming Sentences in the 19th Century</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-24 @ 16:47:34</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40778241"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40776880">
          <h3>
            <a
              class="item"
              href="https://stulle123.github.io/posts/kakaotalk-account-takeover/"
              >I found a 1-click exploit in South Korea's biggest mobile chat
              app</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-24 @ 15:01:42</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40776880"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40772955">
          <h3>
            <a
              class="item"
              href="https://holtwick.de/en/blog/localfirst-resilient-sync"
              >Resilient Sync for Local First</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-24 @ 05:58:41</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40772955"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40772831">
          <h3>
            <a
              class="item"
              href="https://reasonableapproximation.net/2019/05/05/hindley-milner.html"
              >A reckless introduction to Hindley-Milner type inference
              (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-24 @ 05:24:44</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40772831"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40771906">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=w1HhPE0zV6g"
              >The Alternate Reality Kit (1987) [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-24 @ 00:58:30</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40771906"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40770484">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/science/article/2024/jun/22/does-a-cave-beneath-pembroke-castle-hold-key-to-fate-of-early-britons"
              >Does a cave beneath Pembroke Castle hold key to fate of early
              Britons?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-23 @ 20:49:08</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40770484"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40770409">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=3A-Td0i4_Kc"
              >How Cathode Ray Tubes Work. [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-23 @ 20:35:36</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40770409"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40765999">
          <h3>
            <a
              class="item"
              href="https://tailscale.com/blog/remembering-the-lan"
              >Remembering the LAN (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-23 @ 09:26:56</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40765999"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40765014">
          <h3>
            <a
              class="item"
              href="https://xerocraft.org/news/298-maker-interview-the-infinitone-and-the-notes-between-the-notes"
              >Infinitone Microtonal Saxophone</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-23 @ 05:26:54</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40765014"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40749157">
          <h3>
            <a
              class="item"
              href="https://www.ornl.gov/news/quantum-chemistry-and-simulation-help-characterize-coordination-complex-elusive-element-61"
              >Quantum chemistry helps characterize coordination complex of
              elusive Element 61</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-06-21 @ 13:00:51</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40749157"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
