<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42654995">
          <h3>
            <a
              class="item"
              href="https://writings.stephenwolfram.com/2025/01/who-can-understand-the-proof-a-window-on-formalized-mathematics/"
              >Who Can Understand the Proof? A Window on Formalized
              Mathematics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 12:21:06</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42654995"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42654901">
          <h3>
            <a class="item" href="https://www.workatastartup.com/jobs/41643"
              >Wasmer (YC S19) Is Hiring a Rust Engineer in Europe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 12:00:44</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42654331">
          <h3>
            <a class="item" href="https://github.com/gdm85/lc"
              >lc: List files in categories (and columns) – from Coherent Unix
              clone</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 10:10:10</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42654331"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42654019">
          <h3>
            <a class="item" href="https://github.com/NVIDIA/nv-ingest"
              >Nvidia-Ingest: Multi-modal data extraction</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 09:17:47</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42654019"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42653939">
          <h3>
            <a class="item" href="https://github.com/AndyObtiva/glimmer"
              >Glimmer: DSL Framework for Ruby GUI and More</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 09:02:31</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42653939"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42653828">
          <h3>
            <a class="item" href="https://timedilationformula.com/"
              >Time Dilation Formula / Calculator</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 08:42:07</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42653828"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42653811">
          <h3>
            <a class="item" href="https://tactility.one/#/"
              >Tactility: OS for the ESP32 Microcontroller Family</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 08:37:08</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42653811"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42652775">
          <h3>
            <a
              class="item"
              href="https://joyofrails.com/articles/simple-trick-to-understand-ruby-lazy-enumerator"
              >A visual demo of Ruby's lazy enumerator</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 05:21:11</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42652775"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42652577">
          <h3>
            <a class="item" href="https://annas-archive.org/blog/all-isbns.html"
              >Visualizing All ISBNs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 04:45:55</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42652577"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42651275">
          <h3>
            <a
              class="item"
              href="https://rodneybrooks.com/predictions-scorecard-2025-january-01/"
              >Predictions Scorecard, 2025 January 01</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-10 @ 00:27:55</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42651275"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42650561">
          <h3>
            <a
              class="item"
              href="https://hackaday.com/2025/01/09/retrotechtacular-soldering-the-tek-way/"
              >Soldering the Tek way</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 22:37:01</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42650561"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42650501">
          <h3>
            <a
              class="item"
              href="https://joshleeb.com/posts/monospace-ligatures.html"
              >Shaping ligatures in monospace fonts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 22:28:07</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42650501"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42649340">
          <h3>
            <a
              class="item"
              href="https://theconversation.com/how-britain-got-its-first-internet-connection-by-the-late-pioneer-who-created-the-first-password-on-the-internet-45404"
              >How Britain got its first internet connection (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 20:02:36</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42649340"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42647633">
          <h3>
            <a
              class="item"
              href="https://davidallengreen.com/2024/12/twelfth-night-till-candlemas-the-story-of-a-forty-year-book-quest-and-of-its-remarkable-ending/"
              >"Twelfth Night Till Candlemas" – A 40-year book-quest</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 17:07:40</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42647633"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42647343">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41586-024-08328-6/link"
              >Show HN: TabPFN v2 – A SOTA foundation model for small tabular
              data</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 16:38:26</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42647343"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
            <div class="text">
              <p>
                The model is available under an open license: a derivative of
                the Apache 2 license with a single modification, adding an
                enhanced attribution requirement inspired by the Llama 3
                license:
                <a href="https://github.com/PriorLabs/tabpfn"
                  >https://github.com/PriorLabs/tabpfn</a
                >. You can also try it via API:
                <a href="https://github.com/PriorLabs/tabpfn-client"
                  >https://github.com/PriorLabs/tabpfn-client</a
                >
              </p>
              <p>
                TabPFN v2 is trained on 130 million synthetic tabular prediction
                datasets to perform in-context learning and output a predictive
                distribution for the test data points. Each dataset acts as one
                meta-datapoint to train the TabPFN weights with SGD. As a
                foundation model, TabPFN allows for fine-tuning, density
                estimation and data generation.
              </p>
              <p>
                Compared to TabPFN v1, v2 now natively supports categorical
                features and missing values. TabPFN v2 performs just as well on
                datasets with or without these. It also handles outliers and
                uninformative features naturally, problems that often throw off
                standard neural nets.
              </p>
              <p>
                TabPFN v2 performs as well with half the data as the next best
                baseline (CatBoost) with all the data.
              </p>
              <p>
                We also compared TabPFN to the SOTA AutoML system AutoGluon 1.0.
                Standard TabPFN already outperforms AutoGluon on classification
                and ties on regression, but ensembling multiple TabPFNs in
                TabPFN v2 (PHE) is even better.
              </p>
              <p>
                There are some limitations: TabPFN v2 is very fast to train and
                does not require hyperparameter tuning, but inference is slow.
                The model is also only designed for datasets up to 10k data
                points and 500 features. While it may perform well on larger
                datasets, it hasn't been our focus.
              </p>
              <p>
                We're actively working on removing these limitations and intend
                to release new versions of TabPFN that can handle larger
                datasets, have faster inference and perform in additional
                predictive settings such as time-series and recommender systems.
              </p>
              <p>
                We would love for you to try out TabPFN v2 and give us your
                feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="42647101">
          <h3>
            <a
              class="item"
              href="https://blog.orange.tw/posts/2025-01-worstfit-unveiling-hidden-transformers-in-windows-ansi/"
              >WorstFit: Unveiling Hidden Transformers in Windows ANSI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 16:19:34</span
              ><span class="points-container"
                >Points: <span class="points">315</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42647101"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42646922">
          <h3>
            <a class="item" href="https://katesapp.org/hn"
              >Show HN: Kate's App</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 16:03:41</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42646922"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
            <div class="text">
              <p>
                Kate's App is a tool to coordinate doctor contact information,
                prescriptions, pharmacies, appointments, notes, and other
                information with family and caregivers, and do it safely and
                privately. This is not a clinic portal, and is not associated
                with any insurance or medical providers.
              </p>
              <p>
                The app is 95% complete, and is entirely usable as is (for any
                interested beta users). I intend to clean up the rest of it, and
                go GA within a few weeks. In the meantime, I would love to
                answer any questions or hear helpful critiques.
              </p>
              <p>BTW, Show HN is the best.</p>
            </div>
          </section>
        </section>
        <section id="42645218">
          <h3>
            <a class="item" href="https://th0mas.nl/downloads/pdftris.pdf"
              >Show HN: Tetris in a PDF</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 13:31:33</span
              ><span class="points-container"
                >Points: <span class="points">999</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42645218"
                  >Comments</a
                ><span class="descendants">: 179</span></span
              >
            </h4>
            <div class="text">
              <p>
                It was a bit tricky to find a union of features that work in
                both engines, but in the end it turns out that showing/hiding
                annotation "fields" works well to make monochrome pixels, and
                keyboard input can be achieved by typing in a text input box.
              </p>
              <p>
                All in all it's quite janky but a nice reminder of how general
                purpose PDF scripting can be. The linked PDF is all ASCII so you
                can just open it in a text editor, or have a look at the source
                code here:
                <a
                  href="https://github.com/ThomasRinsma/pdftris/blob/main/gengrid.py"
                  >https://github.com/ThomasRinsma/pdftris/blob/main/gengrid.py</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="42645110">
          <h3>
            <a
              class="item"
              href="https://jirevwe.github.io/sql-nulls-are-weird.html"
              >SQL nulls are weird</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 13:21:40</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42645110"
                  >Comments</a
                ><span class="descendants">: 152</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42644896">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/rational-or-not-this-basic-math-question-took-decades-to-answer-20250108/"
              >Rational or not? This basic math question took decades to
              answer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-09 @ 13:01:37</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42644896"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42635049">
          <h3>
            <a class="item" href="https://cardstock.denta.co"
              >Show HN: Cardstock- Free TCG Proxy Manager for Magic, Yugioh,
              &amp;amp; Pokemon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-08 @ 15:11:41</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42635049"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
            <div class="text">
              <a href="https://elestrals.com">https://elestrals.com</a>. I've
              made it easy to build a decklist, download it, and then print at
              home. Modern inkjet printers got really good when nobody was
              looking. While it’s clear they’re not real cards, the upscaling
              makes them look great for casual play (these are not tournament
              legal). It’s totally free, give it a try!
              <p>
                Supplies:
                <a href="https://cardstock.denta.co/kb/supplies"
                  >https://cardstock.denta.co/kb/supplies</a
                >
                Printer Settings:
                <a href="https://cardstock.denta.co/kb/settings"
                  >https://cardstock.denta.co/kb/settings</a
                >
                Instructions:
                <a href="https://cardstock.denta.co/kb/instructions"
                  >https://cardstock.denta.co/kb/instructions</a
                >
              </p>
              <p>
                Overview: I built Cardstock because I had some scripts to do
                this lying around, and wanted to explore the new Rails 8 magic.
                Kamal 2 (kamal-deploy.org/) is a game changer, SQLite in
                production is fine, and the database backed solid family of gems
                work like a charm.
              </p>
              <p>
                Compute: I am renting a box on
                <a href="https://hetzner.com">https://hetzner.com</a> located in
                VA for $15/mo. This box has 8 gigs of ram and 2 vCPU's. This is
                such a deal compared to compute prices on
                <a href="https://render.com">https://render.com</a>.
              </p>
              <p>
                Kamal 2: This thing is amazing. Kamal gives me everything I
                could want (easy console access, easy shell access, a way to
                manage secrets, a way to see my logs, and letsencrypt support
                for DNS), all without a PaaS tax. The best part is the
                accessories feature:
                <a href="https://kamal-deploy.org/docs/commands/accessory/"
                  >https://kamal-deploy.org/docs/commands/accessory/</a
                >. I am running my main app with two accessories: Meilisearch(<a
                  href="https://meilisearch.com"
                  >https://meilisearch.com</a
                >) and OpenObserve (<a href="https://openobserve.ai"
                  >https://openobserve.ai</a
                >). Instead of paying Algolia to host search infrastructure and
                sentry to host monitoring infrastructure, I’m hosting my own OSS
                without any fanfare.
              </p>
              <p>
                Upscaling: To upscale the trading cards (a mandatory part of
                this build, scans are never high enough DPI). I am using this
                (<a href="https://replicate.com/nightmareai/real-esrgan"
                  >https://replicate.com/nightmareai/real-esrgan</a
                >) model. For upscaling every card, I've used under a hundred
                bucks of compute. This model was picked on a whim, but worked
                well enough that I didn’t compare other models.
              </p>
              <p>
                SQLite: I used SQLite combined with Litestream (litestream.io)
                for my database. While I considered Postgres, I hesitated due to
                uncertainties around handling backups on self-hosted
                infrastructure. This was my first time using SQLite in
                production, and it was functional but with some minor
                annoyances. Here’s what I encountered: 1. No Default UUID
                Primary Key Type I had to set primary keys as strings and assign
                IDs manually from the application record. It’s an annoying
                workaround but manageable. 2. No Native Array Columns Because
                SQLite doesn’t support array columns, I had to use its native
                JSON column type, which just felt icky. If I were working with
                something like embeddings, this would be especially annoying,
                because you couldn’t enforce all the records to have the same
                number of dimensions. 3. Cryptic Errors At one point, a
                migration failed silently, leaving a cryptic error in schema.rb.
                The issue was resolved by rolling back the migration and redoing
                it, but it was once again, annoying. 4. Litestream Defaults
                Litestream deletes snapshots after 24 hours by default, which is
                far too short. When I tried to recover some data, I found it had
                already been deleted. Adjusting these defaults fixed the
                problem.
              </p>
              <p>
                Solid Queue/Cache/Cable: The solid family of gems are all backed
                by the database and were a pleasure to work with. Goal was to
                prevent needing to reach for redis, so you have one less thing
                to worry about. You end up with a little more latency, which is
                a totally reasonable tradeoff.
              </p>
              <p>
                Conclusions: We are moving into a post platform as a service
                world. Instead of buying a bespoke render.com or heroku, you
                just buy commodity compute and use Kamal to manage. It's like,
                pretty much all there, excited to see how this space matures.
              </p>
            </div>
          </section>
        </section>
        <section id="42626488">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2025/01/03/books/david-lodge-dead.html"
              >David Lodge, British novelist who satirized academic life, has
              died</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-07 @ 19:42:24</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42626488"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42624048">
          <h3>
            <a class="item" href="https://akkartik.name/post/2024-08-30-devlog"
              >The Patterns of Barricelli (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-07 @ 16:17:22</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42624048"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42621711">
          <h3>
            <a
              class="item"
              href="https://cispa.de/en/research/publications/84162-cascading-spy-sheets-exploiting-the-complexity-of-modern-css-for-email-and-browser-fingerprinting"
              >Cascading Spy Sheets: Exploiting the Complexity of Modern CSS for
              Fingerprinting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-07 @ 12:29:59</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42621711"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42617825">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/bird-drone"
              >Bird-inspired drone uses legs to walk and jump into the air</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-07 @ 00:31:02</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42617825"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42614722">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42614722"
              >Ask HN: Books about people who did hard things</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-06 @ 19:45:02</span
              ><span class="points-container"
                >Points: <span class="points">232</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42614722"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’m reading The Big Rich about the oil boom in Texas and like
                it. I also liked Barbarians at the Gate about how private equity
                got created and how deals went down.
              </p>
              <p>
                Less interested in people and character studies. More interested
                in the mechanics of how things that we take for granted actually
                got built and what the world they were made in was like.
              </p>
            </div>
          </section>
        </section>
        <section id="42612085">
          <h3>
            <a class="item" href="https://apple.fandom.com/wiki/MacBASIC"
              >MacBASIC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-06 @ 16:39:57</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42612085"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42611282">
          <h3>
            <a class="item" href="https://hackclub.com/"
              >We are teen hackers from around the world who code together</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-06 @ 15:21:14</span
              ><span class="points-container"
                >Points: <span class="points">299</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42611282"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42611077">
          <h3>
            <a
              class="item"
              href="http://geon.github.io/programming/2025/01/05/bubble-bobble-c64-wind"
              >Parsing the C64 Bubble Bobble Wind Currents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-06 @ 14:57:50</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42611077"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42610091">
          <h3>
            <a
              class="item"
              href="https://pypy.org/posts/2025/01/musings-tracing.html"
              >Musings on Tracing in PyPy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-06 @ 12:41:20</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42610091"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
