<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43005096">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43005096"
              >Fly.io (YC W20) Is Hiring a Customer Support Director</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 21:00:29</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                CS at Fly.io is a challenging, demanding job: we’re supporting
                every kind of application on every stack as our customers boot
                things up on a new cloud. Our CS team needs machine sympathy not
                just for Fly.io’s own infrastructure, but for every quirk of
                every app a customer tries to run.
              </p>
              <p>
                We hire engineers for CS. We’ve been managing them as engineers.
                Now we’re going to do something different: we’re bringing on a
                Customer Support Director, to manage the team and, more
                importantly, set strategy.
              </p>
              <p>
                This is a very senior role in a part of Fly.io that is
                critically important to our success. It comes with a lot of
                autonomy, an opportunity to have an outsized impact on our
                business, and intense visibility and exposure to a vibrant
                community of developers shipping apps.
              </p>
              <p>
                If you’ve done this kind of work before, and have takes on how
                it can be done better, we’d like to talk to you.
              </p>
              <p>
                <a href="https://fly.io/jobs/support-director/"
                  >https://fly.io/jobs/support-director/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43005093">
          <h3>
            <a
              class="item"
              href="https://jasonsteinhauer.substack.com/p/make-mckinley-great-again"
              >The McKinley Years</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 21:00:14</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43005093"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43004889">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/tech/elon-musk-openai-bid-4af12827"
              >Elon Musk-Led Group Makes $97.4B Bid for Control of OpenAI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 20:42:18</span
              ><span class="points-container"
                >Points: <span class="points">165</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43004889"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43004416">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2502.05171"
              >Scaling Up Test-Time Compute with Latent Reasoning: A Recurrent
              Depth Approach</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 19:50:20</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43004416"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43004373">
          <h3>
            <a
              class="item"
              href="https://docs.google.com/document/d/1nWZtJlPmBD15rGqNxj7u6HroaNvXT6YD-TXktpIwf6c/edit?usp=sharing"
              >What Happens to SaaS in a World with Computer Using Agents?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 19:45:35</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43004373"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43004334">
          <h3>
            <a
              class="item"
              href="https://zknill.io/posts/patterns-for-building-realtime/"
              >Patterns for Building Realtime Features</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 19:42:02</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43004334"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43004147">
          <h3>
            <a
              class="item"
              href="https://www.nativesunnews.today/articles/the-return-of-the-buffalo-is-reviving-portions-of-the-ecosystem/"
              >The return of the buffalo is reviving portions of the
              ecosystem</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 19:24:42</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43004147"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43002906">
          <h3>
            <a
              class="item"
              href="https://www.abortretry.fail/p/work-at-the-mill"
              >Work at the Mill Or, the Story of Digital Equipment
              Corporation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 17:39:28</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43002906"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43002511">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/undergraduate-upends-a-40-year-old-data-science-conjecture-20250210/"
              >Undergraduate Upends a 40-Year-Old Data Science Conjecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 17:05:09</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43002511"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43002440">
          <h3>
            <a
              class="item"
              href="https://www.pcgamer.com/gaming-industry/a-2023-study-concluded-captchas-are-a-tracking-cookie-farm-for-profit-masquerading-as-a-security-service-that-made-us-spend-819-billion-hours-clicking-on-traffic-lights-to-generate-nearly-usd1-trillion-for-google/"
              >CAPTCHAs: 'a tracking cookie farm for profit masquerading as a
              security service'</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 16:59:27</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43002440"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43002426">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/oldnewthing/20040409-00/?p=39873"
              >A story about USB floppy drives (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 16:58:20</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43002426"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43001688">
          <h3>
            <a class="item" href="https://topography.jessekv.com"
              >Show HN: Global 3D topography explorer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 15:54:45</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43001688"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
            <div class="text">
              <p>
                Click anywhere on the map to get a polygon, and then click
                "generate".
              </p>
              <p>
                It should work at most scales, but if your watershed or region
                selection is too large, the result can be less exciting because
                it's so flat.
              </p>
              <p>
                As a warning, the 3D models can sometimes be too much for my
                phone. It's nicer on desktop. I'm still working better on mobile
                support.
              </p>
              <p>
                The land cover data I'm using gives a cool effect, but at some
                point I'd like to add in global imagery and clouds.
              </p>
              <p>
                The backend is a Python thread running on an old Lenovo
                Thinkcentre in my closet, so if it goes down, this is why. (I
                also sometimes need to restart it when the network card stops
                working... I really should figure out why sometime.)
              </p>
              <p>
                If you find a really cool island or watershed, let me know and I
                can add it to the "favorites".
              </p>
            </div>
          </section>
        </section>
        <section id="43000529">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/news/the-anthropic-economic-index"
              >The Anthropic Economic Index</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 14:14:22</span
              ><span class="points-container"
                >Points: <span class="points">339</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43000529"
                  >Comments</a
                ><span class="descendants">: 158</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43000316">
          <h3>
            <a
              class="item"
              href="https://blog.plover.com/lang/etym/nickname-names.html"
              >Surnames from nicknames nobody has any more</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 13:54:38</span
              ><span class="points-container"
                >Points: <span class="points">575</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43000316"
                  >Comments</a
                ><span class="descendants">: 281</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43000303">
          <h3>
            <a
              class="item"
              href="https://github.com/desgeeko/pdfsyntax/blob/main/docs/browse.md"
              >Show HN: HTML visualization of a PDF file's internal structure</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 13:52:53</span
              ><span class="points-container"
                >Points: <span class="points">274</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43000303"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
            <div class="text">
              Hi, I've just finished a rebuild of this function and added a lot
              of new features: info, page index, minimap, inverted index,... I
              think it may be useful for inspection, debugging or just as a
              learning resource showcasing the PDF file format. This is a pet
              project and I would be happy to receive some feedback! Regards
            </div>
          </section>
        </section>
        <section id="42999650">
          <h3>
            <a
              class="item"
              href="https://xpqz.github.io/kbook/Introduction.html"
              >What about K?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 12:51:34</span
              ><span class="points-container"
                >Points: <span class="points">160</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42999650"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42996671">
          <h3>
            <a
              class="item"
              href="https://www.ncregister.com/blog/face-of-aquinas-revealed-after-750-years"
              >Thomas Aquinas' skull reveals appearance and cause of death</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-10 @ 03:38:29</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42996671"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42991676">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2502.03387"
              >LIMO: Less Is More for Reasoning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 16:33:28</span
              ><span class="points-container"
                >Points: <span class="points">370</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42991676"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990704">
          <h3>
            <a
              class="item"
              href="https://swallowmygraphicdesign.com/project/macostalgia"
              >Mac(OS)talgia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 13:55:40</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990704"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990546">
          <h3>
            <a
              class="item"
              href="https://www.ilograph.com/blog/posts/diagram-mistakes/"
              >Common mistakes in architecture diagrams (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 13:29:01</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990546"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42990324">
          <h3>
            <a
              class="item"
              href="https://iquilezles.org/articles/gpuconditionals/"
              >Don't "optimize" conditional moves in shaders with
              mix()+step()</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-09 @ 12:42:54</span
              ><span class="points-container"
                >Points: <span class="points">395</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42990324"
                  >Comments</a
                ><span class="descendants">: 192</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42976244">
          <h3>
            <a
              class="item"
              href="https://www.jeremykun.com/shortform/2025-02-06-2124/"
              >Explainable Linear Programs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 19:06:44</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42976244"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42974278">
          <h3>
            <a
              class="item"
              href="https://www.cnn.com/2025/02/05/science/lunar-grand-canyons-far-side-moon/index.html"
              >Two Grand Canyon-size valleys on far side of the moon formed
              within 10 minutes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 16:10:46</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42974278"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42972622">
          <h3>
            <a class="item" href="https://perma.cc/"
              >Perma.cc – Permanent Link Service</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 14:04:14</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42972622"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42971038">
          <h3>
            <a
              class="item"
              href="https://www.nuanced.dev/blog/system-wide-context"
              >Memory profilers, call graphs, exception reports, and
              telemetry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 09:57:57</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42971038"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42970847">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/environment/2024/dec/18/if-a-million-germans-have-them-there-must-be-something-in-it-how-balcony-solar-is-taking-off"
              >Balcony solar taking off: 1.5M Germans have them there must be
              something in it</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 09:23:49</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42970847"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42970169">
          <h3>
            <a
              class="item"
              href="https://www.mend.io/blog/fake-vs-code-extension-on-npm-spreads-multi-stage-malware/"
              >Fake VS Code Extension on NPM Spreads Multi-Stage Malware</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 06:58:10</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42970169"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42969038">
          <h3>
            <a
              class="item"
              href="https://hms.harvard.edu/news/ancient-dna-study-identifies-originators-indo-european-language-family"
              >Ancient-DNA study identifies originators of Indo-European
              language family</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-07 @ 03:30:10</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42969038"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42961684">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-025-00282-1"
              >Out of Africa: celebrating 100 years of human-origins research</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-06 @ 12:23:10</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42961684"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42959824">
          <h3>
            <a
              class="item"
              href="https://jvns.ca/blog/2025/02/05/some-terminal-frustrations/"
              >Some terminal frustrations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-06 @ 06:59:20</span
              ><span class="points-container"
                >Points: <span class="points">223</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42959824"
                  >Comments</a
                ><span class="descendants">: 258</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
