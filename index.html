<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39099065">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39099065"
              >Tell HN: Hacker News now supports IPv6</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 03:00:15</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39099065"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
            <div class="text">
              <p></p>
              <pre><code>  $ host news.ycombinator.com
  news.ycombinator.com has address 209.216.230.207
  news.ycombinator.com has IPv6 address 2606:7100:1:67::26
</code></pre>
              Both IP addresses share the same ASN (M5 Computer Security):
              <a href="https://bgp.he.net/ip/209.216.230.207"
                >https://bgp.he.net/ip/209.216.230.207</a
              >
              <a href="https://bgp.he.net/ip/2606:7100:1:67::26"
                >https://bgp.he.net/ip/2606:7100:1:67::26</a
              >
              <p>
                The raw IP address correctly redirects to HN:
                <a href="http://[2606:7100:1:67::26]"
                  >http://[2606:7100:1:67::26]</a
                >
              </p>
              <p>
                Good job so far! Please don't pull a Reddit and turn it off
                again.
              </p>
            </div>
          </section>
        </section>
        <section id="39098969">
          <h3>
            <a
              class="item"
              href="https://socket.dev/blog/ethical-hacking-on-trial-german-court-fines-security-researcher"
              >German Court Fines Security Researcher for Reporting Company's
              Vulnerabilities</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 02:47:14</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39098969"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39098803">
          <h3>
            <a
              class="item"
              href="https://zverok.substack.com/p/the-end-of-useless-ruby-sugar-on"
              >The end of "Useless Ruby sugar": On intuitions and evolutions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 02:28:02</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39098803"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39098603">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/01/22/science/space/arno-a-penzias-dead.html"
              >Arno A. Penzias, 90, Dies; Nobel Physicist Confirmed Big Bang
              Theory</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 02:05:46</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39098603"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39098371">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39098371"
              >Ask HN: Best country to run a boostrapped startup from? (After
              Section 174)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 01:38:13</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39098371"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <p>
                If I want to run a bootstrapped startup while living in Taiwan
                that sells to mostly US based businesses, but is developed by
                1099 contractors in Asia (which have a 15 year amortization
                period I believe?), is there a new "best country" to open the
                company in? Singapore? HK? Taiwan?
              </p>
            </div>
          </section>
        </section>
        <section id="39098253">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-01-efficiency-asymmetry-scientists-fundamental-cooling.html"
              >Scientists report fundamental asymmetry between heating and
              cooling</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 01:27:20</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39098253"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39098133">
          <h3>
            <a class="item" href="https://github.com/viraniaman94/sendenv"
              >Show HN: Sendenv, a CLI tool to share environment variables</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 01:17:29</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39098133"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Its currently in alpha obviously, but the core functionality
                works (I have tested sending vaults from a Macbook Air M1 to a
                ubuntu ec2 instance). I have a lot of follow up ideas to make
                this better, but wanted the community's feedback before I invest
                more time on this.
              </p>
              <p>Thanks for reading!</p>
            </div>
          </section>
        </section>
        <section id="39097976">
          <h3>
            <a
              class="item"
              href="https://ryanbrewer.dev/posts/announcing-svm.html"
              >SaberVM</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 01:03:56</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39097976"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39097681">
          <h3>
            <a
              class="item"
              href="https://www.matheusmoreira.com/articles/self-contained-lone-lisp-applications"
              >Self-contained Linux applications with lone Lisp</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 00:34:07</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39097681"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39097502">
          <h3>
            <a class="item" href="https://github.com/stas00/ml-engineering"
              >ML Engineering Online Book</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 00:14:26</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39097502"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39097356">
          <h3>
            <a
              class="item"
              href="https://www.cnn.com/2024/01/22/business/ftc-turbotax-free-services/index.html"
              >FTC bans TurboTax from advertising 'free' services, calls
              deceptive advertising</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 00:00:20</span
              ><span class="points-container"
                >Points: <span class="points">483</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39097356"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39097314">
          <h3>
            <a class="item" href="https://konecipv4.cz/en/"
              >Czech republic sets IPv4 end date</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 23:56:07</span
              ><span class="points-container"
                >Points: <span class="points">166</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39097314"
                  >Comments</a
                ><span class="descendants">: 164</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39097150">
          <h3>
            <a
              class="item"
              href="https://www.riotgames.com/en/news/2024-player-update"
              >Changes at Riot Games and the road ahead</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 23:38:59</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39097150"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39095337">
          <h3>
            <a class="item" href="https://winlator.org/"
              >Winlator: Android app that lets you to run Windows apps with
              Wine</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 20:57:27</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39095337"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39094288">
          <h3>
            <a
              class="item"
              href="https://jacobbartlett.substack.com/p/my-toddler-still-loves-planes-so"
              >My toddler still loves planes, so I upgraded her radar</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 19:38:55</span
              ><span class="points-container"
                >Points: <span class="points">423</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39094288"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39093109">
          <h3>
            <a class="item" href="https://danluu.com/2choices-eviction/"
              >Caches: LRU vs. Random (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 18:19:22</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39093109"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39092849">
          <h3>
            <a
              class="item"
              href="https://www.inngest.com/blog/building-the-inngest-queue-pt-i-fairness-multi-tenancy"
              >Building a fair multi-tenant queuing system</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 17:59:54</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39092849"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39092505">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gaming/2024/01/modder-recreates-game-boy-advance-games-using-the-audio-from-crash-sounds/"
              >Modder re-creates Game Boy Advance games using the audio from
              crash sounds</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 17:39:13</span
              ><span class="points-container"
                >Points: <span class="points">364</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39092505"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39091901">
          <h3>
            <a class="item" href="https://patterns.app/"
              >Patterns (YC S21) is hiring to automate analytics with LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 17:03:26</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39091857">
          <h3>
            <a
              class="item"
              href="https://www.uaf.edu/news/woolly-mammoth-movements-tied-to-earliest-alaska-hunting-camps.php"
              >Woolly mammoth movements tied to earliest Alaska hunting camps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 17:00:14</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39091857"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39091777">
          <h3>
            <a
              class="item"
              href="https://lightning.ai/lightning-ai/studios/code-lora-from-scratch?view=public&amp;section=all"
              >LoRA from scratch: implementation for LLM finetuning</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 16:56:20</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39091777"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39090879">
          <h3>
            <a
              class="item"
              href="https://www.neowin.net/news/meta-now-lets-eu-users-unlink-their-facebook-messenger-and-instagram-accounts/"
              >Meta now lets EU users unlink their Facebook, Messenger and
              Instagram accounts</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 16:00:00</span
              ><span class="points-container"
                >Points: <span class="points">397</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39090879"
                  >Comments</a
                ><span class="descendants">: 206</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39090585">
          <h3>
            <a
              class="item"
              href="https://brave.com/privacy-updates/28-sunsetting-strict-fingerprinting-mode/"
              >Brave browser simplifies its fingerprinting protections</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 15:39:26</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39090585"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39090266">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2024/01/29/tripping-on-utopia-margaret-mead-the-cold-war-and-the-troubled-birth-of-psychedelic-science-benjamin-breen-book-review"
              >When America first dropped acid</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 15:12:25</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39090266"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39088551">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39088551"
              >Launch HN: Diversion (YC S22) – Cloud-Native Git Alternative</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 12:01:10</span
              ><span class="points-container"
                >Points: <span class="points">262</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39088551"
                  >Comments</a
                ><span class="descendants">: 367</span></span
              >
            </h4>
            <div class="text">
              <a href="https://diversion.dev">https://diversion.dev</a>). We’re
              building a modern, cloud-native version control. Our first users
              are game developers, who like its simplicity and scalability. See
              a quick demo here:
              <a href="https://youtu.be/DD0XkL8kDYc"
                >https://youtu.be/DD0XkL8kDYc</a
              >
              <p>
                Why a new VCS? There is no doubt that Git vastly improved our
                lives, and played a significant role in the advancement of
                software development over the past 18 years. But - it was built
                for a very different world in 2005 (slow networks, much smaller
                projects, no cloud), and is not the perfect tool for everyone
                today.
              </p>
              <p>
                The biggest drawback of Git is its limited scalability - both in
                repository and file sizes, and the number of concurrent users.
                This is the reason Google and Meta built their own version
                control systems. It’s also the reason why other large companies,
                most notably in games development, semiconductors and financial
                services are still using legacy tools like SVN and Perforce.
              </p>
              <p>
                Another issue we’re trying to fix is Git’s famous complexity. In
                our previous startup, a data scientist accidentally destroyed a
                month’s work of his team by using the wrong Git command (EDIT:
                we were eventually able to restore from a non-updated repo
                clone, after a few hours). As a developer who used CVS and SVN
                before Git was created, I often wondered why Git is so difficult
                to learn, compared to other tools.
              </p>
              <p>
                On the other hand, Git’s branching and merging abilities are
                exceptional - this has enabled the modern software development
                methodologies that we all take for granted today (e.g. feature
                branches, CI/CD), greatly improving developers’ velocity.
              </p>
              <p>
                We were wondering - is it possible to create an easy-to-use,
                fast, scalable version control system, with Git’s branching
                capabilities? And what else can be improved, while we’re at it?
              </p>
              <p>
                One thing available in modern cloud tools is real-time
                collaboration (e.g. Google Docs, Figma). While developers don’t
                necessarily want their work in progress to be visible to
                everyone, it may be very useful to easily share it when you want
                to get feedback before a commit, to detect and prevent merge
                conflicts, and to have visibility into which parts of the
                codebase are being changed by others.
              </p>
              <p>
                Diversion is built on top of distributed storage and databases,
                accessible via REST API, and runs on serverless cloud
                infrastructure. Every repository operation is an API call
                (commit, branch, merge etc.). The desktop client synchronizes
                all work in progress to the cloud in real time (even before a
                commit). Users can work with Diversion using an interactive CLI,
                Web UI, or IDE plugins (currently JetBrains, more coming soon).
                The Web UI allows to perform most basic operations, without
                needing to install a desktop client.
              </p>
              <p>
                Diversion is compatible with Git, and can synchronize with
                existing Git repositories (each new commit in Diversion goes
                into Git, and vice versa). We’re planning to release it as open
                source once the code base matures, and when we implement an open
                source repositories directory on our website (naturally,
                Diversion’s code is managed on Diversion!)
              </p>
              <p>
                We’re in open beta, you can try it here (<a
                  href="https://diversion.dev"
                  >https://diversion.dev</a
                >) (click Get Started). It’s completely self-service and there’s
                no need to talk to anyone, and it’s free for small teams (<a
                  href="https://diversion.dev/pricing"
                  >https://diversion.dev/pricing</a
                >).
              </p>
              <p>
                Building a version control is hard (as we have learned), and
                Diversion still has a long way to go. We are currently working
                on improving speed, CI integrations, plugins to IDEs and game
                engines, and other usability improvements. We would love to hear
                your thoughts and feedback on what we’ve got so far!
              </p>
            </div>
          </section>
        </section>
        <section id="39087752">
          <h3>
            <a class="item" href="https://qr.blinry.org/"
              >Reading QR codes without a computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 09:21:11</span
              ><span class="points-container"
                >Points: <span class="points">510</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39087752"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39084329">
          <h3>
            <a
              class="item"
              href="https://profmattstrassler.com/2024/01/19/how-far-could-the-sun-possibly-be/"
              >How far could the sun possibly be?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-21 @ 23:52:41</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39084329"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39083928">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=7RXWXYboUjA"
              >Can You Live Code a Church Organ? [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-21 @ 22:54:53</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39083928"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39081876">
          <h3>
            <a
              class="item"
              href="https://bitbytebit.substack.com/p/the-size-of-your-backlog-is-inversely"
              >Backlog size is inversely proportional to how often we talk to
              customers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-21 @ 19:18:00</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39081876"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39067385">
          <h3>
            <a
              class="item"
              href="https://buer.haus/2024/01/16/reversing-and-tooling-a-signed-request-hash-in-obfuscated-javascript/"
              >Reversing and Tooling a Signed Request Hash in Obfuscated
              JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-20 @ 13:29:00</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39067385"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
