<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46746231">
          <h3>
            <a
              class="item"
              href="https://github.com/glittercowboy/get-shit-done"
              >Get-Shit-Done</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 18:38:57</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46746231"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46745998">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2026/01/23/health/milhoan-vaccines-optional-polio.html"
              >US Vaccine Panel Chair Says Polio and Other Shots Should Be
              Optional</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 18:14:28</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46745998"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46745922">
          <h3>
            <a
              class="item"
              href="https://the-diy-life.com/raspberry-pi-drag-race-pi-1-to-pi-5-performance-comparison/"
              >Raspberry Pi Drag Race: Pi 1 to Pi 5 – Performance Comparison</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 18:06:00</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46745922"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46745259">
          <h3>
            <a
              class="item"
              href="https://servo.org/blog/2026/01/23/december-in-servo/"
              >December in Servo: multiple windows, proxy support, better
              caching, and more</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 17:03:24</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46745259"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46745233">
          <h3>
            <a
              class="item"
              href="https://github.com/nrrb/tao-te-ching/blob/master/Ursula%20K%20Le%20Guin.md"
              >Tao Te Ching – Translated by Ursula K. Le Guin</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 17:01:31</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46745233"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46745224">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/metriport/jobs/XC2AF8s-senior-security-engineer"
              >Metriport (YC S22) is hiring a security eng to harden healthcare
              data infra</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 17:00:07</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46744968">
          <h3>
            <a
              class="item"
              href="https://www.economist.com/culture/2026/01/22/are-we-all-plagiarists-now"
              >Are we all plagiarists now?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 16:34:14</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46744968"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.ph/SwLOD">https://archive.ph/SwLOD</a>
            </div>
          </section>
        </section>
        <section id="46744807">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46744807"
              >Ask HN: Gmail spam filtering suddenly marking everything as
              spam?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 16:16:02</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46744807"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
            <div class="text">
              Almost all transactional emails are being marked as suspicious
              even when their SPF/DKIM records are fine and they’ve been
              whitelisted before. Did Google break something in gmail/spam
              filtering?
            </div>
          </section>
        </section>
        <section id="46743908">
          <h3>
            <a
              class="item"
              href="https://twitter.com/NicerInPerson/status/2014989679796347375"
              >Claude Code's new hidden feature: Swarms</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 14:35:47</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46743908"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://xcancel.com/NicerInPerson/status/2014989679796347375"
                >https://xcancel.com/NicerInPerson/status/2014989679796347375</a
              >
              <p>
                <a href="https://github.com/mikekelly/claude-sneakpeek"
                  >https://github.com/mikekelly/claude-sneakpeek</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46743154">
          <h3>
            <a
              class="item"
              href="https://www.windowscentral.com/microsoft/windows-11/microsoft-bitlocker-encryption-keys-give-fbi-legal-order-privacy-nightmare"
              >MS confirms it will give the FBI your Windows PC data encryption
              key if asked</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 12:55:22</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46743154"
                  >Comments</a
                ><span class="descendants">: 207</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46742828">
          <h3>
            <a class="item" href="https://vic20.games/#/basic/24k"
              >JVIC: New web-based Commodore VIC 20 emulator</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 11:53:55</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46742828"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46742635">
          <h3>
            <a class="item" href="https://www.sqlite.org/np1queryprob.html"
              >Many Small Queries Are Efficient in SQLite</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 11:15:15</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46742635"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46742432">
          <h3>
            <a
              class="item"
              href="https://www.whileforloop.com/en/blog/2026/01/21/i-like-gitlab/"
              >I Like GitLab</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 10:32:26</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46742432"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46742389">
          <h3>
            <a
              class="item"
              href="https://www.seangoedecke.com/how-i-estimate-work/"
              >How I Estimate Work as a Staff Software Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 10:22:32</span
              ><span class="points-container"
                >Points: <span class="points">285</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46742389"
                  >Comments</a
                ><span class="descendants">: 159</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46742362">
          <h3>
            <a
              class="item"
              href="https://thehftguy.com/2026/01/22/doing-gigabit-ethernet-over-my-british-phone-wires/"
              >Doing gigabit Ethernet over my British phone wires</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 10:14:31</span
              ><span class="points-container"
                >Points: <span class="points">340</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46742362"
                  >Comments</a
                ><span class="descendants">: 187</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46741482">
          <h3>
            <a
              class="item"
              href="https://nand2mario.github.io/posts/2026/80386_multiplication_and_division/"
              >80386 Multiplication and Division</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 06:11:42</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46741482"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46740748">
          <h3>
            <a
              class="item"
              href="https://www.npr.org/2026/01/20/nx-s1-5683170/let-them-the-small-bit-of-advice-that-made-a-big-difference-to-a-grieving-widow"
              >“Let people help” – Advice that made a big difference to a
              grieving widow</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 03:20:51</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46740748"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46737630">
          <h3>
            <a
              class="item"
              href="https://openai.com/index/unrolling-the-codex-agent-loop/"
              >Unrolling the Codex agent loop</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 20:42:36</span
              ><span class="points-container"
                >Points: <span class="points">418</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46737630"
                  >Comments</a
                ><span class="descendants">: 194</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46737447">
          <h3>
            <a
              class="item"
              href="https://chromium.googlesource.com/chromium/src/+/main/styleguide/c++/c++-features.md"
              >Banned C++ features in Chromium</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 20:27:58</span
              ><span class="points-container"
                >Points: <span class="points">221</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46737447"
                  >Comments</a
                ><span class="descendants">: 224</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46737202">
          <h3>
            <a class="item" href="http://www.jamisbuck.org/mazes/"
              >Maze Algorithms (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 20:07:49</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46737202"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46735511">
          <h3>
            <a class="item" href="https://proofofcorn.com/">Proof of Corn</a>
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 17:56:31</span
              ><span class="points-container"
                >Points: <span class="points">453</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46735511"
                  >Comments</a
                ><span class="descendants">: 298</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46734302">
          <h3>
            <a class="item" href="https://maggieappleton.com/gastown"
              >Gas Town's agent patterns, design bottlenecks, and vibecoding at
              scale</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 16:19:18</span
              ><span class="points-container"
                >Points: <span class="points">380</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46734302"
                  >Comments</a
                ><span class="descendants">: 399</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46696283">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46696283"
              >Show HN: Coi – A language that compiles to WASM, beats
              React/Vue</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-20 @ 19:01:53</span
              ><span class="points-container"
                >Points: <span class="points">172</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46696283"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
            <div class="text">
              <p>
                The main thing I wanted to solve was the JS/WASM interop
                bottleneck. Instead of using the standard glue code for every
                call, I moved everything to a Shared Memory architecture using
                Command and Event buffers.
              </p>
              <p>
                The way it works is that I batch all the instructions in WASM
                and then just send a single "flush" signal to JS. The JS side
                then reads everything directly out of Shared Memory in one go.
                It’s way more efficient, I ran a benchmark rendering 10k
                rectangles on a canvas and the difference was huge: Emscripten
                hit around 40 FPS, while my setup hit 100 FPS.
              </p>
              <p>
                But writing DOM logic in C++ is painful, so I built Coi. It’s a
                component-based language that statically analyzes changes at
                compile-time to enable O(1) reactivity. Unlike traditional
                frameworks, there is no Virtual DOM overhead; the compiler maps
                state changes directly to specific handles in the command
                buffer.
              </p>
              <p>
                I recently benchmarked this against React and Vue on a 1,000-row
                table: Coi came out on top for row creation, row updating and
                element swapping because it avoids the "diffing" step entirely
                and minimizes bridge crossings. Its bundle size was also the
                smallest of the three.
              </p>
              <p>
                One of the coolest things about the architecture is how the
                standard library works. If I want to support a new browser API
                (like Web Audio or a new Canvas feature), I just add the
                definition to my WebCC schema file. When I recompile the Coi
                compiler, the language automatically gains a new standard
                library function to access that API. There is zero manual
                wrapping involved.
              </p>
              <p>
                I'm really proud of how it's coming along. It combines the
                performance of a custom WASM stack with a syntax that actually
                feels good to write (for me atleast :P). Plus, since the
                intermediate step is C++, I’m looking into making it work on the
                server side too, which would allow for sharing components across
                the whole stack.
              </p>
              <p>Example (Coi Code):</p>
              <p>component Counter(string label, mut int&amp; value) {</p>
              <p></p>
              <pre><code>    def add(int i) : void {
        value += i;
    }

    style {
        .counter {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        button {
            padding: 8px 16px;
            cursor: pointer;
        }
    }

    view {
        &lt;div class="counter"&gt;
            &lt;span&gt;{label}: {value}&lt;/span&gt;
            &lt;button onclick={add(1)}&gt;+&lt;/button&gt;
            &lt;button onclick={add(-1)}&gt;-&lt;/button&gt;
        &lt;/div&gt;
    }</code></pre>
              }
              <p>component App { mut int score = 0;</p>
              <p></p>
              <pre><code>    style {
        .app {
            padding: 24px;
            font-family: system-ui;
        }
        h1 {
            color: #1a73e8;
        }
        .win {
            color: #34a853;
            font-weight: bold;
        }
    }

    view {
        &lt;div class="app"&gt;
            &lt;h1&gt;Score: {score}&lt;/h1&gt;
            &lt;Counter label="Player" &amp;value={score} /&gt;
            &lt;if score &gt;= 10&gt;
                &lt;p class="win"&gt;You win!&lt;/p&gt;
            &lt;/if&gt;
        &lt;/div&gt;
    }</code></pre>
              }
              <p>
                app { root = App; title = "My Counter App"; description = "A
                simple counter built with Coi"; lang = "en"; }
              </p>
              <p>
                Live Demo:
                <a href="https://io-eric.github.io/coi"
                  >https://io-eric.github.io/coi</a
                >
              </p>
              <p>
                Coi (The Language):
                <a href="https://github.com/io-eric/coi"
                  >https://github.com/io-eric/coi</a
                >
              </p>
              <p>
                WebCC:
                <a href="https://github.com/io-eric/webcc"
                  >https://github.com/io-eric/webcc</a
                >
              </p>
              <p>
                I'd love to hear what you think. It's still far from finished,
                but as a side project I'm really excited about :)
              </p>
            </div>
          </section>
        </section>
        <section id="46694618">
          <h3>
            <a
              class="item"
              href="https://blog.dshr.org/2026/01/internet-archives-storage.html"
              >Internet Archive's Storage</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-20 @ 17:16:49</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46694618"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46691108">
          <h3>
            <a
              class="item"
              href="https://penntoday.upenn.edu/news/penn-wharton-when-employees-feel-slighted-they-work-less"
              >When employees feel slighted, they work less</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-20 @ 12:28:13</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46691108"
                  >Comments</a
                ><span class="descendants">: 183</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46689631">
          <h3>
            <a class="item" href="https://bloomberg.github.io/crane/"
              >Extracting verified C++ from the Rocq theorem prover at
              Bloomberg</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-20 @ 09:08:22</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46689631"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46689342">
          <h3>
            <a
              class="item"
              href="https://www.mux.com/blog/6-years-building-video-players-9-billion-requests-starting-over"
              >6 Years Building Video Players. 9B Requests. Starting Over</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-20 @ 08:34:44</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46689342"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46688191">
          <h3>
            <a
              class="item"
              href="https://www.qt.io/blog/c26-reflection-qrangemodel"
              >C++26 Reflection loves QRangeModel</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-20 @ 05:19:53</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46688191"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46676125">
          <h3>
            <a
              class="item"
              href="https://www.unix.dog/~yosh/blog/c-habits-for-me.html"
              >Some C habits I employ for the modern day</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-19 @ 08:03:46</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46676125"
                  >Comments</a
                ><span class="descendants">: 134</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46675030">
          <h3>
            <a
              class="item"
              href="https://engineering.nyu.edu/sites/default/files/2021-10/How_I_Became_a_Quant%20%281%29.pdf"
              >How I Became a Quant (2007) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-19 @ 04:21:21</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46675030"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
