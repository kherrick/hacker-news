<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44826484">
          <h3>
            <a
              class="item"
              href="https://tomscii.sig7.se/2024/01/Ditching-GitHub"
              >Ditching GitHub</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 16:18:40</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44826484"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44826463">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=0Uu_VJeVVfo"
              >Live: GPT-5</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 16:16:32</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44826463"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44826164">
          <h3>
            <a class="item" href="https://natalie.sh/posts/bluesky-comments/"
              >Building Bluesky Comments for My Blog</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 15:56:01</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44826164"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44825809">
          <h3>
            <a
              class="item"
              href="https://www.thedrive.com/news/budget-car-buyers-want-automakers-to-k-i-s-s"
              >Budget Car Buyers Want Automakers to K.I.S.S</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 15:32:24</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44825809"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44825660">
          <h3>
            <a
              class="item"
              href="https://www.seuros.com/blog/aws-restored-account-plot-twist/"
              >AWS Restored My Account: The Human Who Made the Difference</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 15:20:56</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44825660"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              <i>AWS deleted my 10-year account and all data without warning</i>
              -
              <a href="https://news.ycombinator.com/item?id=44770250"
                >https://news.ycombinator.com/item?id=44770250</a
              >
              - Aug 2025 (152 comments)
            </div>
          </section>
        </section>
        <section id="44825491">
          <h3>
            <a
              class="item"
              href="https://writings.founderlabs.io/p/how-to-sell-if-your-user-is-not-the"
              >How to Sell if Your User is not the Buyer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 15:09:02</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44825491"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44825326">
          <h3>
            <a
              class="item"
              href="https://hms.harvard.edu/news/could-lithium-explain-treat-alzheimers-disease"
              >Lithium Reverses Alzheimer's in Mice</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 14:56:05</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44825326"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44825175">
          <h3>
            <a
              class="item"
              href="https://alurm.github.io/blog/2025-08-07-first-class-lists-in-shells.html"
              >More shell tricks: first class lists and jq</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 14:46:14</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44825175"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44824981">
          <h3>
            <a
              class="item"
              href="https://www.baldurbjarnason.com/2025/disingenuous-discourse/"
              >Let's stop pretending that managers and executives care about
              productivity</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 14:33:39</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44824981"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44824802">
          <h3>
            <a
              class="item"
              href="https://www.perl.com/article/suse-donates-to-tprf/"
              >SUSE Donates USD 11,500 to the Perl and Raku Foundation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 14:20:56</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44824802"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44824728">
          <h3>
            <a
              class="item"
              href="https://alhadaqa.github.io/globaltradedynamics/"
              >Global Trade Dynamics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 14:14:30</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44824728"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44824560">
          <h3>
            <a
              class="item"
              href="https://www.mechanize.work/blog/sweatshop-data-is-over/"
              >Sweatshop Data Is Over</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 14:00:20</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44824560"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44824539">
          <h3>
            <a class="item" href="https://win32.run/"
              >Windows XP Professional</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 13:58:25</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44824539"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44824502">
          <h3>
            <a
              class="item"
              href="https://github.com/FreeBSDFoundation/proj-laptop/blob/main/monthly-updates/2025-07.md"
              >Laptop Support and Usability (LSU): July 2025 Report from the
              FreeBSD Foundation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 13:55:18</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44824502"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44824056">
          <h3>
            <a
              class="item"
              href="https://meyerweb.com/eric/thoughts/2025/08/07/infinite-pixels/"
              >Infinite Pixels</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 13:12:42</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44824056"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44823850">
          <h3>
            <a
              class="item"
              href="https://hackteam.io/blog/your-llm-does-not-care-about-mcp/"
              >An LLM does not need to understand MCP</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 12:52:24</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44823850"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44823580">
          <h3>
            <a
              class="item"
              href="https://marcin.juszkiewicz.com.pl/2025/07/22/arm-desktop-emulation/"
              >Arm Desktop: x86 Emulation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 12:26:56</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44823580"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44823354">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44823354"
              >GoGoGrandparent (YC S16) Is Hiring Back End and Full-Stack
              Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 12:01:09</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                FULLY REMOTE | EST Timezone | $90k – $150k (partially
                location-dependent)
              </p>
              <p>
                Tech Stack Back-end heavy: Node.js, TypeScript, MySQL, REST +
                GraphQL Front-end: Vue.js (nice to have) Deployment: AWS,
                Docker/Kubernetes (nice to have)
              </p>
              <p>
                Requirements 6+ years of professional experience (primarily in
                Node.js and Vue.js)
              </p>
              <p>Interview Process 2-stage interview process.</p>
              <p>
                If you're passionate about improving the lives of older adults
                and people with disabilities, send your LinkedIn or CV (keep it
                brief) to william@gogograndparent.com, or apply at
                <a
                  href="https://www.ycombinator.com/companies/gogograndparent/jobs"
                  >https://www.ycombinator.com/companies/gogograndparent/jobs</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44822684">
          <h3>
            <a class="item" href="https://croissanthology.com/earring"
              >The Whispering Earring (Scott Alexander)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 10:16:28</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44822684"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44822637">
          <h3>
            <a class="item" href="https://leonardo.chiariglione.org/"
              >Leonardo Chiariglione: “I closed MPEG on 2 June 2020”</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 10:09:41</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44822637"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44822389">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/developers/introducing-gemini-cli-github-actions/"
              >New AI Coding Teammate: Gemini CLI GitHub Actions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 09:28:46</span
              ><span class="points-container"
                >Points: <span class="points">174</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44822389"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44821434">
          <h3>
            <a
              class="item"
              href="https://cyata.ai/blog/cracking-the-vault-how-we-found-zero-day-flaws-in-authentication-identity-and-authorization-in-hashicorp-vault/"
              >Cracking the Vault: How we found zero-day flaws in HashiCorp
              Vault</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 07:01:42</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44821434"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44819917">
          <h3>
            <a class="item" href="https://blog.danielh.cc/blog/passwords"
              >We replaced passwords with something worse</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-07 @ 02:19:25</span
              ><span class="points-container"
                >Points: <span class="points">699</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44819917"
                  >Comments</a
                ><span class="descendants">: 562</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44817539">
          <h3>
            <a class="item" href="https://www.projecthyperion.org"
              >Project Hyperion: Interstellar ship design competition</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 20:40:17</span
              ><span class="points-container"
                >Points: <span class="points">337</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44817539"
                  >Comments</a
                ><span class="descendants">: 282</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44811840">
          <h3>
            <a class="item" href="https://github.com/osmandkitay/aura"
              >Show HN: Aura – Like robots.txt, but for AI actions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 13:37:47</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44811840"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've been watching the rise of AI agents with a mix of
                excitement and dread. We're building incredible tools that can
                browse the web, but we're forcing them to navigate a world built
                for human eyes. They scrape screens and parse fragile DOMs.
              </p>
              <p>
                We're trying to tame them to act like humans. I believe this is
                fundamentally wrong. The goal isn't to make AI operate at a
                human level, but to unlock its super-human potential.
              </p>
              <p>
                The current path is dangerous. When agents from OpenAI, Google,
                and others start browsing at scale and speed, concepts like
                UI/UX will lose meaning for them. The entire model of the web is
                threatened. Website owners are losing control over how their
                sites are used, and no one is offering a real solution. The W3C
                is thinking about it. I decided to build it.
              </p>
              <p>
                That's why I created AURA (Agent-Usable Resource Assertion).
              </p>
              <p>
                It's an open protocol with a simple, powerful idea: let website
                owners declare what an AI can and cannot do. Instead of letting
                an agent guess, the site provides a simple aura.json manifest.
              </p>
              <p>
                This gives control back to the site owner. It's a shift from
                letting AIs scrape data to being granted capabilities. We get to
                define the rules of engagement. This allows us to increase what
                AIs can do, not by letting them run wild, but by giving them
                clear, structured paths to follow.
              </p>
              <p>
                A confession: I'm not a hardcore programmer; I consider myself
                more of a systems thinker. I actually used AI extensively to
                help me write the reference implementation for AURA. It felt
                fitting to use the tool to build its own guardrails.
              </p>
              <p>
                The core of the protocol, a reference server, and a client are
                all open source on GitHub. You can see it work in 5 minutes:
              </p>
              <p>
                Clone &amp; Install: git clone
                <a href="https://github.com/osmandkitay/aura.git"
                  >https://github.com/osmandkitay/aura.git</a
                >
                &amp;&amp; cd aura &amp;&amp; pnpm install
              </p>
              <p>Run the Server: pnpm --filter aura-reference-server dev</p>
              <p>
                Run the Agent: (in a new terminal) pnpm --filter
                aura-reference-client agent -- http://localhost:3000 "list all
                the blog posts"
              </p>
              <p>
                You'll see the agent execute the task directly, no scraping or
                DOM parsing involved.
              </p>
              <p>
                The GitHub repo is here:
                <a href="https://github.com/osmandkitay/aura"
                  >https://github.com/osmandkitay/aura</a
                >
              </p>
              <p>
                I don't know if AURA will become the standard, but I believe
                it's my duty to raise this issue and start the conversation.
                This is a foundational problem for the future of the web. It
                needs to be a community effort.
              </p>
              <p>
                The project is MIT licensed. I'm here all day to answer
                questions and listen to your feedback—especially the critical
                kind. Let's discuss it.
              </p>
            </div>
          </section>
        </section>
        <section id="44811567">
          <h3>
            <a
              class="item"
              href="https://github.com/manzaltu/claude-code-ide.el"
              >Claude Code IDE integration for Emacs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 13:17:38</span
              ><span class="points-container"
                >Points: <span class="points">719</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44811567"
                  >Comments</a
                ><span class="descendants">: 236</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44789750">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2008.02217"
              >Hopfield Networks Is All You Need (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 18:34:22</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44789750"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44787738">
          <h3>
            <a
              class="item"
              href="https://developer.mozilla.org/en-US/docs/Glossary/Debounce"
              >Debounce</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 16:04:13</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44787738"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44783442">
          <h3>
            <a
              class="item"
              href="https://ajmoon.com/posts/koalas-vs-crows-an-evolutionary-theory-of-software"
              >Koalas vs. Crows: An Evolutionary Theory of Software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 09:03:11</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44783442"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44779688">
          <h3>
            <a class="item" href="https://thenumb.at/QMC/"
              >Monte Carlo Crash Course: Quasi-Monte Carlo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-03 @ 20:53:08</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44779688"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
