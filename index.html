<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41506157">
          <h3>
            <a
              class="item"
              href="https://www.chaidiscovery.com/blog/introducing-chai-1"
              >Chai-1 Defeats AlphaFold 3</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 22:13:30</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41506157"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41506124">
          <h3>
            <a
              class="item"
              href="https://www.prnewswire.com/news-releases/k1-acquires-mariadb-a-leading-database-software-company-and-appoints-new-ceo-302243508.html"
              >K1 Buys MariaDB</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 22:09:02</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41506124"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41505670">
          <h3>
            <a
              class="item"
              href="https://www.pcmag.com/news/flipper-zero-gets-major-firmware-update"
              >Flipper Zero Gets Major Firmware Update, Can Eavesdrop on
              Walkie-Talkies</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 21:15:45</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41505670"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41505665">
          <h3>
            <a
              class="item"
              href="https://wegmueller.it/blog/posts/2024-09-02-rust-on-illumos"
              >Rust in illumos</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 21:15:24</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41505665"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41505622">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/collection/tardigrade/"
              >Among the Moss Piglets: The First Image of a Tardigrade (1773)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 21:10:52</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41505622"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41505593">
          <h3>
            <a
              class="item"
              href="https://perthirtysix.com/tool/lottery-simulator"
              >Lottery Simulator (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 21:09:04</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41505593"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41505389">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/why-not-comments/"
              >Why Not Comments</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 20:52:17</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41505389"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41505266">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/thoughtpolice/9c45287550a56b2047c6311fbadebed2"
              >Why some of us like "interdiff" code review systems (not
              GitHub)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 20:39:51</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41505266"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41505009">
          <h3>
            <a
              class="item"
              href="https://forum.torproject.org/t/tor-relays-artikel-5-e-v-another-police-raid-in-germany-general-assembly-on-sep-21st-2024/14533"
              >Another police raid in Germany</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 20:12:49</span
              ><span class="points-container"
                >Points: <span class="points">247</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41505009"
                  >Comments</a
                ><span class="descendants">: 124</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41504885">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2403.18103"
              >Tutorial on diffusion models for imaging and vision</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 19:59:39</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41504885"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41504832">
          <h3>
            <a
              class="item"
              href="https://www.ii.com/git-bash-is-my-preferred-windows-shell/"
              >Git Bash is my preferred Windows shell</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 19:54:38</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41504832"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41504631">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2409.04930"
              >Pixhell Attack: Leaking Info from Air-Gap Computers via 'Singing
              Pixels'</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 19:34:11</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41504631"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41503251">
          <h3>
            <a class="item" href="https://visualdb.com/"
              >Show HN: Visual DB – Web front end for your database</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 17:25:00</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41503251"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
            <div class="text">
              <p>
                Visual DB is the fastest way to create data entry forms for your
                database: Starting with an Excel spreadsheet, you can import
                your data into the database and create a great-looking form in
                under 10 minutes. Watch this video:
                <a href="https://youtu.be/6rVD5rmrjN8"
                  >https://youtu.be/6rVD5rmrjN8</a
                >
              </p>
              <p>
                Visual DB is a comprehensive SaaS frontend for your database. In
                addition to data entry forms, Visual DB also has a
                spreadsheet-like interface for inserting and updating data in
                your database. You can also build interactive reports using
                Visual DB. Finally, although not intended as a replacement for
                your database's admin tool, Visual DB can browse schema, create
                tables, set up relationships, and import and export data.
              </p>
              <p>
                Visual DB began as a drag-and-drop form builder for databases.
                Forms created with Visual DB are practically indistinguishable
                from those hand-coded using React. You can add client-side
                validation, set available values (displayed in dropdowns),
                define default values, and even add logic to dynamically hide or
                disable fields—all without writing a single line of code! With
                Visual DB Forms, you’ll never have to write another CRUD app
                again.
              </p>
              <p>
                If you have been using Excel to manage data and running into its
                limits because the volume of data has grown, Visual DB Sheets
                may be of interest to you. With its spreadsheet-like interface,
                Visual DB Sheets allows users to interact with data as they
                would in Excel, while securely storing that data in a robust
                relational database. Spreadsheet-database hybrids have been
                around for a while now, but we believe we have one of the best
                implementations, with features such as advanced grouping,
                support for foreign keys and lookup tables, query parameters,
                full-text as-you-type filtering, and so on.
              </p>
              <p>
                The newest feature of Visual DB is interactive reporting.
                Traditional reporting tools offer limited interactivity. For
                example, while most reporting tools support time series charts,
                they do not allow users to zoom or pan along the time axis. In
                contrast, Visual DB supports this capability thanks to its
                innovative approach: it downloads the dataset to the client and
                processes and visualizes data directly in the browser. This
                allows it to handle user interactions without a server round
                trip. Visual DB has excellent support for query parameters,
                which allows you to bring only the subset of data that's of
                interest (up to 100K rows), to the client.
              </p>
              <p>
                Visual DB supports PostgreSQL (including Neon), MySQL, SQL
                Server and Oracle. Give it a whirl, and we look forward to
                getting your feedback:
                <a href="https://visualdb.com">https://visualdb.com</a>
              </p>
            </div>
          </section>
        </section>
        <section id="41502721">
          <h3>
            <a
              class="item"
              href="https://sinja.io/blog/get-maximum-out-of-your-font"
              >What you can get out of a high-quality font</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 16:38:50</span
              ><span class="points-container"
                >Points: <span class="points">220</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41502721"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41502510">
          <h3>
            <a class="item" href="https://illuminate.google.com/home"
              >Google Illuminate: Books and papers turned into audio</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 16:22:13</span
              ><span class="points-container"
                >Points: <span class="points">290</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41502510"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41502094">
          <h3>
            <a class="item" href="https://github.com/dbos-inc/dbos-transact-py"
              >Show HN: DBOS transact – Ultra-lightweight durable execution in
              Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 15:53:40</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41502094"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
            <div class="text">
              <p>
                Today we want to share our brand new Python library providing
                ultra-lightweight durable execution.
              </p>
              <p>
                <a href="https://github.com/dbos-inc/dbos-transact-py"
                  >https://github.com/dbos-inc/dbos-transact-py</a
                >
              </p>
              <p>
                Durable execution means your program is resilient to any
                failure. If it is ever interrupted or crashes, all your
                workflows will automatically resume from the last completed
                step. If you want to see durable execution in action, check out
                this demo app:
              </p>
              <p>
                <a href="https://demo-widget-store.cloud.dbos.dev/"
                  >https://demo-widget-store.cloud.dbos.dev/</a
                >
              </p>
              <p>
                Or if you’re like me and want to skip straight to the Python
                decorators in action, here’s the demo app’s backend – an online
                store with reliability and correctness in just 200 LOC:
              </p>
              <p>
                <a
                  href="https://github.com/dbos-inc/dbos-demo-apps/blob/main/python/widget-store/widget_store/main.py"
                  >https://github.com/dbos-inc/dbos-demo-apps/blob/main/python/...</a
                >
              </p>
              <p>Don't want to keep reading and just try it out:</p>
              <p>
                <a href="https://console.dbos.dev/launch"
                  >https://console.dbos.dev/launch</a
                >
              </p>
              <p>
                No matter how many times you try to crash it, it always resumes
                from exactly where it left off! And yes, that button really does
                crash the app.
              </p>
              <p>
                Under the hood, this works by storing your program's execution
                state (which workflows are currently executing and which steps
                they've completed) in a Postgres database. So all you need to
                use it is a Postgres database to connect to—there's no need for
                a "workflow server." This approach is also incredibly fast, for
                example 25x faster than AWS Step Functions.
              </p>
              <p>Some more cool features include:</p>
              <p>
                * Scheduled jobs—run your workflows exactly-once per time
                interval, no more need for cron.
              </p>
              <p>
                * Exactly-once event processing—use workflows to process
                incoming events (for example, from a Kafka topic) exactly-once.
                No more need for complex code to avoid repeated processing
              </p>
              <p>
                * Observability—all workflows automatically emit OpenTelemetry
                traces.
              </p>
              <p>
                Docs:
                <a href="https://docs.dbos.dev/">https://docs.dbos.dev/</a>
              </p>
              <p>
                Examples:
                <a href="https://docs.dbos.dev/examples"
                  >https://docs.dbos.dev/examples</a
                >
              </p>
              <p>
                We also have a webinar on Thursday where we will walk through
                the new library, you can sign up here:
                <a href="https://www.dbos.dev/webcast/dbos-transact-python"
                  >https://www.dbos.dev/webcast/dbos-transact-python</a
                >
              </p>
              <p>
                We'd love to hear what you think! We’ll be in the comments for
                the rest of the day to answer any questions you may have.
              </p>
            </div>
          </section>
        </section>
        <section id="41501496">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/pingora-saving-compute-1-percent-at-a-time/"
              >A good day to trie-hard: saving compute 1% at a time</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 15:03:31</span
              ><span class="points-container"
                >Points: <span class="points">382</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41501496"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41500938">
          <h3>
            <a
              class="item"
              href="https://github.com/yournextstore/yournextstore"
              >Show HN: YourNextStore – an open-source Shopify with Stripe as
              the back end</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 14:08:37</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41500938"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
            <div class="text">
              <p>
                Selling online is often more complex than it needs to be.
                Setting up a storefront with great performance can feel daunting
                and time-consuming. There are many plugins, libraries, etc - the
                choice can be overwhelming.
              </p>
              <p>
                Plus, in e-commerce, the backend and frontend are often written
                in different languages (e.g., PHP, Python, or Ruby for the
                backend). This increases the complexity and makes code
                management more challenging, especially for teams.
              </p>
              <p>
                After working in e-commerce for several years, Michał and I set
                out to build the fastest and most compelling storefront for
                small to medium-sized merchants. Fast e-commerce sites are
                crucial because slow pages hurt sales [1]. Unfortunately,
                performance issues are still very common. The beauty of Your
                Next Store is its simplicity. No additional tools and no
                databases - just Next.js and Stripe.
              </p>
              <p>
                On the technical side, we use App Router, React Server
                Component, Partial Pre-Rendering, Optimistic Updates, and
                Streaming with Suspense to make the store faster and leaner so
                it feels almost like a static website.
              </p>
              <p>In summary:</p>
              <p>
                Modern &amp; Popular Stack: Built with Next.js, React.js, and
                TypeScript, making development faster and hiring easier compared
                to platforms that use less common frameworks like Shopify’s
                Liquid.
              </p>
              <p>
                No Database Needed: Stripe handles the backend, reducing the
                need for complex infrastructure and simplifying the setup
                process.
              </p>
              <p>
                Open Source: Free and open (AGPL), with the option for a
                commercial license if needed.
              </p>
              <p>
                This is just the beginning. We want to make YNS even better and
                easier to use and eventually provide a good, open-source
                alternative to Shopify.
              </p>
              <p>
                Check our code at
                <a href="https://github.com/yournextstore/yournextstore"
                  >https://github.com/yournextstore/yournextstore</a
                >
              </p>
              <p>
                We’d love to hear your thoughts and feedback! What features
                would you like to see next?
              </p>
              <p>
                [1]:
                <a
                  href="https://www.deloitte.com/ie/en/services/consulting/research/milliseconds-make-millions.html"
                  >https://www.deloitte.com/ie/en/services/consulting/research/...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41500522">
          <h3>
            <a
              class="item"
              href="https://www.singlestore.com/blog/how-we-made-notebooks-load-10-times-faster/"
              >How we made Jupyter notebooks load faster</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 13:19:29</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41500522"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41500406">
          <h3>
            <a
              class="item"
              href="https://manuscriptroadtrip.wordpress.com/2024/09/08/multispectral-imaging-and-the-voynich-manuscript/"
              >Multispectral Imaging and the Voynich Manuscript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 13:05:43</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41500406"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41500405">
          <h3>
            <a
              class="item"
              href="https://antithesis.com/blog/multiverse_debugging/"
              >Debugging in the Multiverse</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 13:05:42</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41500405"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41499883">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/roame/jobs/dd4pOgQ-chief-of-staff"
              >Roame (YC S23) Is Hiring a Chief of Staff</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 12:00:23</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41498358">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2024/09/10/apple-loses-eu-court-battle-over-13-billion-euro-tax-bill-in-ireland.html"
              >Apple must pay 13B euros in back taxes, EU's top court rules</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 08:03:54</span
              ><span class="points-container"
                >Points: <span class="points">413</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41498358"
                  >Comments</a
                ><span class="descendants">: 495</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41498264">
          <h3>
            <a class="item" href="https://tmendez.dev/posts/rng-git-hash-bug/"
              >Our Git Hash Bug</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 07:51:35</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41498264"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41497377">
          <h3>
            <a
              class="item"
              href="https://tech.marksblogg.com/ai-sar-satellites-umbra-aircraft-detection.html"
              >Satellites Spotting Aircraft</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-10 @ 05:15:53</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41497377"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41488377">
          <h3>
            <a
              class="item"
              href="https://coredumped.dev/2024/09/09/what-is-the-best-pointer-tagging-method/"
              >What is the best pointer tagging method?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-09 @ 13:33:15</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41488377"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41487653">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2018/12/10/the-friendship-that-made-google-huge"
              >The Friendship that made Google huge</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-09 @ 11:53:59</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41487653"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41480038">
          <h3>
            <a
              class="item"
              href="https://blog.stuffedcow.net/2024/06/microwave-failure-spontaneously-turns-on/"
              >Microwave Oven Failure: Spontaneously turned on by its LED
              display</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-08 @ 12:37:44</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41480038"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41479085">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Floral_formula"
              >Floral formula</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-08 @ 08:49:32</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41479085"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41467420">
          <h3>
            <a class="item" href="https://tomato64.org/"
              >Tomato64: A port of Tomato Firmware to x86_64</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-06 @ 16:12:40</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41467420"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
