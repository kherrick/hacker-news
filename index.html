<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43419237">
          <h3>
            <a
              class="item"
              href="https://github.com/Tencent/Hunyuan3D-2/commit/baab8ba18e46052246f85a2d0f48736586b84a33"
              >Hunyuan3D-2-Turbo: fast high-quality shape generation in ~1s on a
              4090</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-20 @ 01:58:29</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43419237"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43419187">
          <h3>
            <a class="item" href="https://packagephobia.com/"
              >PackagePhobia – Find the cost of adding a new dev dependency to
              your project</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-20 @ 01:47:31</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43419187"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43419072">
          <h3>
            <a
              class="item"
              href="https://www.gilesthomas.com/2025/03/llm-from-scratch-10-dropout"
              >Writing an LLM from scratch, part 10 – dropout</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-20 @ 01:25:54</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43419072"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43418218">
          <h3>
            <a
              class="item"
              href="https://deeplearning.cs.cmu.edu/./S25/index.html"
              >Introduction to Deep Learning (CMU)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 23:12:45</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43418218"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43418184">
          <h3>
            <a
              class="item"
              href="https://newscenter.lbl.gov/2025/03/19/desi-opens-access-to-the-largest-3d-map-of-the-universe-yet/"
              >DESI Opens Access to the Largest 3D Map of the Universe Yet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 23:08:08</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43418184"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43417932">
          <h3>
            <a class="item" href="https://szymanowiczs.github.io/bolt3d"
              >Bolt3D: Generating 3D Scenes in Seconds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 22:30:56</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43417932"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43417894">
          <h3>
            <a class="item" href="https://canopylabs.ai/model-releases"
              >Orpheus-3B – Emotive TTS by Canopy Labs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 22:26:39</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43417894"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43417511">
          <h3>
            <a
              class="item"
              href="https://zacharyhuang.substack.com/p/llm-agent-internal-as-a-graph-tutorial"
              >LLM Agents Are Simply Graph – Tutorial for Dummies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 21:29:13</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43417511"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43416961">
          <h3>
            <a
              class="item"
              href="https://chipsandcheese.com/p/looking-ahead-at-intels-xe3-gpu-architecture"
              >Looking Ahead at Intel's Xe3 GPU Architecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 20:31:13</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43416961"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43414992">
          <h3>
            <a
              class="item"
              href="https://mssv.net/2025/03/19/the-collective-ambition-behind-odysseus-a-game-changing-sci-fi-larp/"
              >The Collective Ambition Behind Odysseus, a Game-Changing Sci-Fi
              Larp</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 17:34:43</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43414992"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43414527">
          <h3>
            <a class="item" href="https://markprompt.com/jobs"
              >Markprompt (YC W24) – Stripe for customer support – is hiring
              founding eng in SF</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 17:00:13</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43414405">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43414405"
              >Launch HN: Modernbanc (YC W20) – Modern and fast accounting
              software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 16:50:05</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43414405"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
            <div class="text">
              <a href="https://modernbanc.com">https://modernbanc.com</a>).
              Today we’re introducing our modern accounting software designed
              for startups and small businesses. Here’s a demo video:
              <a href="https://www.youtube.com/watch?v=gLkJ-6liTNU"
                >https://www.youtube.com/watch?v=gLkJ-6liTNU</a
              >
              <p>
                If you're familiar with the issue tracker Linear, think of it as
                Linear for accounting software. It is fast, works offline, and
                saves you time with automated bookkeeping, accounting and
                invoicing.
              </p>
              <p>
                This is our third pivot. Previously, we built infrastructure
                like a ledger API and payments vault to help companies create
                fintech products.
              </p>
              <p>
                For this idea, our motivation came from two completely opposite
                experiences: using Linear and using Quickbooks. The difference
                in quality between the two products was shocking, and despite
                there being dozens of accounting tools, none come even close to
                the quality of Linear, Notion, or Figma.
              </p>
              <p>
                With Linear, I’ve heard stories of engineers threatening to quit
                if their company switches to another tool! With Quickbooks it
                takes me so long to get to the right page that sometimes I
                forget why I opened it.
              </p>
              <p>
                This was baffling to us because accounting is the core system of
                every business—it tells you what you have, what you made, and
                whether you’ll still be around in 12 months.
              </p>
              <p>
                To solve this, we took a Linear-like approach, focusing on speed
                and quality from day one. For example, we built our own in-house
                real-time sync engine to ensure it’s lightning fast, works
                offline, and keeps your business finances at your fingertips.
              </p>
              <p>
                Modernbanc is still early and doesn’t have every feature yet,
                but we believe we’ve built a long-term foundation for the best
                accounting software in the world. It even includes a built-in
                spreadsheet so you’re never limited in reporting.
              </p>
              <p>
                Although early, the software is already useful and helps
                founders: Automate bookkeeping effortlessly. Transaction rules
                and AI smart actions handle the work for you. Get answers to any
                question, including runway, burn, and custom budgets, all in one
                place; Create and manage invoices. Our AI will auto-match
                incoming payments to them; Be tax-ready with all the data
                available for seamless tax filing. And if you don’t have an
                accountant, we’ll find you one!
              </p>
              <p>
                We’ll have more releases in the coming weeks including receipts
                matching, payroll integrations and AI-powered report generation.
              </p>
              <p>
                We’ve just launched (mainly focusing on smaller US-based
                startups) and would love your feedback! Please give it a go at
                <a href="https://modernbanc.com">https://modernbanc.com</a>
                (you’ll see a demo workspace once you sign-up).
              </p>
              <p>
                We’d love your feedback! If you’ve ever been frustrated by
                accounting software, what has been the worst part? What features
                are missing? Have you ever had to rely on a spreadsheet because
                your accounting tool could not do what you needed? We are still
                early, so your input will help shape what we build next. If you
                have thoughts, frustrations, or ideas, we would love to hear
                them!
              </p>
            </div>
          </section>
        </section>
        <section id="43414393">
          <h3>
            <a class="item" href="https://ezyang.github.io/ai-blindspots/"
              >AI Blindspots – Blindspots in LLMs I've noticed while AI
              coding</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 16:48:32</span
              ><span class="points-container"
                >Points: <span class="points">339</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43414393"
                  >Comments</a
                ><span class="descendants">: 139</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43414235">
          <h3>
            <a class="item" href="https://unsloth.ai/blog/gemma3"
              >Fine-tune Google's Gemma 3</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 16:34:45</span
              ><span class="points-container"
                >Points: <span class="points">150</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43414235"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43413935">
          <h3>
            <a
              class="item"
              href="https://joe-antognini.github.io/astronomy/daylight"
              >How fast the days are getting longer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 16:13:20</span
              ><span class="points-container"
                >Points: <span class="points">454</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43413935"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43413125">
          <h3>
            <a
              class="item"
              href="https://developer.chrome.com/blog/memory-safety-fonts"
              >Memory safety for web fonts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 15:16:48</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43413125"
                  >Comments</a
                ><span class="descendants">: 184</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43411258">
          <h3>
            <a class="item" href="https://www.nber.org/papers/w33576"
              >Supply constraints do not explain house price, quantity growth
              across US cities</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 12:56:03</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43411258"
                  >Comments</a
                ><span class="descendants">: 227</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43410988">
          <h3>
            <a class="item" href="https://konvajs.org/"
              >Konva.js - Declarative 2D Canvas for React, Vue, and Svelte</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 12:30:48</span
              ><span class="points-container"
                >Points: <span class="points">219</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43410988"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43410885">
          <h3>
            <a
              class="item"
              href="https://archaeology.org/issues/march-april-2025/letters-from/on-the-origin-of-the-pork-taboo/"
              >The Origin of the Pork Taboo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 12:16:06</span
              ><span class="points-container"
                >Points: <span class="points">242</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43410885"
                  >Comments</a
                ><span class="descendants">: 253</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43410692">
          <h3>
            <a class="item" href="https://github.com/sharkdp/fd"
              >fd: A simple, fast and user-friendly alternative to 'find'</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 11:44:17</span
              ><span class="points-container"
                >Points: <span class="points">561</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43410692"
                  >Comments</a
                ><span class="descendants">: 250</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43409028">
          <h3>
            <a class="item" href="https://www.fourmilab.ch/documents/netslum/"
              >The Internet Slum: is abandoning the Internet the next big thing?
              (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-19 @ 07:13:23</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43409028"
                  >Comments</a
                ><span class="descendants">: 203</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43397602">
          <h3>
            <a
              class="item"
              href="https://wildlife.onlinelibrary.wiley.com/doi/10.1002/jwmg.70012"
              >Energetic cost of human disturbance on the southern sea otter</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-18 @ 10:12:18</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43397602"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43392951">
          <h3>
            <a class="item" href="https://map.koljapluemer.com"
              >Show HN: Learn where countries are on the world map with Spaced
              Repetition</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-17 @ 21:35:37</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43392951"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
            <div class="text">
              <p>
                I made a web game to practice country locations a while ago and
                HN liked it, so I thought I'd post my updated version as well.
              </p>
              <p>
                As for how the game works and feels, I'd really recommend you
                checking it out for yourself, it's free, no signup, no ads.
              </p>
              <p>
                The tech stack is Vue + ts + Tailwind/Daisy for the looks. The
                learning algorithm is a slight modification of the ts version of
                FSRS.
              </p>
              <p>
                If you have anything to add, it's open source as well (<a
                  href="https://github.com/koljapluemer/learn-worldmap"
                  >https://github.com/koljapluemer/learn-worldmap</a
                >), although not well documented yet.
              </p>
              <p>
                In the end it's just a little sideproject, but I hope you enjoy
                it — any feedback welcome :)
              </p>
            </div>
          </section>
        </section>
        <section id="43386581">
          <h3>
            <a class="item" href="https://github.com/vrana/adminer"
              >Database management in a single PHP file</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-17 @ 09:30:02</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43386581"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43379265">
          <h3>
            <a
              class="item"
              href="https://thephd.dev/c2y-the-defer-technical-specification-its-time-go-go-go"
              >The Defer Technical Specification: It Is Time</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 14:20:13</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43379265"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43378587">
          <h3>
            <a
              class="item"
              href="https://readbunce.com/p/how-i-got-100-off-my-train-travel"
              >How I got 100% off my train travel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 12:44:11</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43378587"
                  >Comments</a
                ><span class="descendants">: 154</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43378358">
          <h3>
            <a
              class="item"
              href="https://news.err.ee/1609634600/muons-used-to-test-the-condition-of-a-road-bridge-in-estonia"
              >Muons used to test the condition of a road bridge in Estonia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 12:05:53</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43378358"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43377958">
          <h3>
            <a class="item" href="https://gitlab.com/-/snippets/4817016"
              >Making a multiplayer action game in Haskell</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 10:23:15</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43377958"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43376769">
          <h3>
            <a
              class="item"
              href="https://nicolashery.com/decoding-json-sum-types-in-go/"
              >Decoding JSON sum types in Go without panicking</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-16 @ 03:32:04</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43376769"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43356016">
          <h3>
            <a class="item" href="https://github.com/ezyang/codemcp"
              >Show HN: Codemcp – Claude Code for Claude Pro subscribers – ditch
              API bills</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-13 @ 18:29:19</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43356016"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
            <div class="text">
              Hi all! I normally work on the PyTorch project but I've been on
              baby leave for the past month, so I've been playing around with AI
              as a user rather than a framework implementor. I really liked the
              agent experience with Claude Code, but I couldn't really justify
              spending so many dollars on API costs for random side projects. I
              already pay for a Claude Pro subscription though, and it turns out
              you can simulate many of Claude Code's features with an MCP. If
              you have a Pro subscription, check this out! I think it really
              captures the Claude Code experience quite well, without forcing
              you to pay for API tokens.
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
