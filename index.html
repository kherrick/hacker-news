<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="36957204">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=36957204"
              >Launch HN: Tiptap (YC S23) – Toolkit for developing collaborative
              editors</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 15:24:51</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36957204"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <a href="https://tiptap.dev/">https://tiptap.dev/</a>), an open
              source developer toolkit for building collaborative editing apps.
              Our editor framework, based on ProseMirror, is at
              <a href="https://github.com/ueberdosis/tiptap"
                >https://github.com/ueberdosis/tiptap</a
              >, and our real-time collaboration backend, based on Yjs, is at
              <a href="https://github.com/ueberdosis/hocuspocus"
                >https://github.com/ueberdosis/hocuspocus</a
              >.
              <p>
                Building editor interfaces like Notion or Google Docs in your
                web app takes a lot of work and time. Our open source tools and
                cloud services let you build collaborative content editing
                faster—in days or weeks, rather than months or years. And this
                is just for the editor. If you want real-time collaboration or
                other advanced features like version history in your editor, the
                overall workload quickly escalates—you will need a robust and
                serious backend infrastructure that requires even more time to
                set up and maintain. This doesn’t make sense for most frontend
                developers or most startups.
              </p>
              <p>
                We spent eight years as a digital agency developing applications
                with complex content editing functionality. We learned the hard
                way how limited the existing editors were. After building Tiptap
                as a headless editor framework with an extension-based
                architecture, we needed to allow multiple users to edit content
                simultaneously, which got complicated. There was no simple
                solution that could be integrated quickly. So we built that too.
              </p>
              <p>
                The Tiptap editor is based on the JS framework ProseMirror,
                which is a good foundation for editors. The learning curve for
                ProseMirror is steep because it's complicated to understand and
                lacks simple APIs and documentation. It takes a lot of code
                around ProseMirror to develop a modern user experience. We’ve
                taken care of that for you.
              </p>
              <p>
                Tiptap is headless, so it will work with whatever frontend or
                design you have in mind—we make no assumptions about your UI.
                You can use it to develop block-based editors like Notion,
                classic interfaces like Google Docs, or whatever you need. It's
                also framework agnostic, so you can use it with React, Vue,
                etc., or vanilla JavaScript. And it's highly customizable
                through our extension architecture. We also provide an API to
                access ProseMirror's internals through Tiptap if you want to dig
                deep into the core.
              </p>
              <p>
                Adding real-time collaboration to your editor is as easy as
                installing and configuring an extension. Our collaboration
                backend, called Hocuspocus, uses Yjs. This is a widely used
                implementation of CRDTs (conflict- free replicated data type).
                Hocuspocus makes it easy to set up a Node.js websocket server to
                handle communication between multiple peers to synchronize data.
                Like the Tiptap editor, Hocuspocus is designed to be extensible
                according to your needs. Also, Hocuspocus can work independently
                of Tiptap with other editors like Lexical or Slate.
              </p>
              <p>
                An earlier version of Tiptap got discussed a couple years ago at
                <a href="https://news.ycombinator.com/item?id=26901975"
                  >https://news.ycombinator.com/item?id=26901975</a
                >. We’ve been enjoying wider adoption since then. For example,
                Substack uses Tiptap for their editor that allows creators to
                write content on substack.com, and YC uses Tiptap in their
                Bookface forum (which is basically HN for YC alums).
              </p>
              <p>
                With the Tiptap Cloud, we offer managed backend services if you
                don't want to build and maintain every feature yourself. For
                real-time collaboration, we provide a cloud infrastructure with
                multiple datacenter regions where you can deploy Hocuspocus. The
                Tiptap AI integration beta is a service where you connect your
                OpenAI API key to our backend and install the Tiptap editor AI
                extension to get AI writing experience in your editor. Here’s a
                demo:
                <a href="https://ai-demo.tiptap.dev/"
                  >https://ai-demo.tiptap.dev/</a
                >
              </p>
              <p>
                We invite you to explore Tiptap's capabilities in your app,
                contribute to its open source development, and (hopefully!) join
                our welcoming community. We'd love to hear what you've already
                built with Tiptap or what's stopping you from creating something
                with it :-) We look forward to all of your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="36956867">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=36956867"
              >Ask HN: Who is hiring? (August 2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 15:02:08</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36956867"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
            <div class="text">
              <i>not</i> an option, include ONSITE.
              <p>
                Please only post if you personally are part of the hiring
                company—no recruiting firms or job boards. One post per company.
                If it isn't a household name, explain what your company does.
              </p>
              <p>
                Commenters: please don't reply to job posts to complain about
                something. It's off topic here.
              </p>
              <p>
                Readers: please only email if you are personally interested in
                the job.
              </p>
              <p>
                Searchers: try
                <a href="https://hnjobs.u-turn.dev">https://hnjobs.u-turn.dev</a
                >,
                <a href="https://hnhired.fly.dev">https://hnhired.fly.dev</a>,
                <a href="https://kennytilton.github.io/whoishiring/"
                  >https://kennytilton.github.io/whoishiring/</a
                >,
                <a href="https://hnjobs.emilburzo.com"
                  >https://hnjobs.emilburzo.com</a
                >.
              </p>
              <p>Don't miss these other fine threads:</p>
              <p>
                <i>Who wants to be hired?</i>
                <a href="https://news.ycombinator.com/item?id=36956865"
                  >https://news.ycombinator.com/item?id=36956865</a
                >
              </p>
              <p>
                <i>Freelancer? Seeking freelancer?</i>
                <a href="https://news.ycombinator.com/item?id=36956866"
                  >https://news.ycombinator.com/item?id=36956866</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="36956865">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=36956865"
              >Ask HN: Who wants to be hired? (August 2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 15:02:06</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36956865"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
            <div class="text">
              <p></p>
              <pre><code>  Location:
  Remote:
  Willing to relocate:
  Technologies:
  Résumé/CV:
  Email:
</code></pre>
              Readers: please only email these addresses to discuss work
              opportunities.
            </div>
          </section>
        </section>
        <section id="36956747">
          <h3>
            <a
              class="item"
              href="https://finance.yahoo.com/news/now-finding-damaging-results-mandated-095555463.html"
              >Damaging results of mandated return to the office: it’s worse
              than we thought</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 14:54:56</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36956747"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36955885">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=9d6eNmtHFQk"
              >YKK: Japan’s Zipper King [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 13:46:48</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36955885"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36955806">
          <h3>
            <a
              class="item"
              href="https://nim-lang.org/blog/2023/08/01/nim-v20-released.html"
              >Nim 2.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 13:39:24</span
              ><span class="points-container"
                >Points: <span class="points">242</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36955806"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36954925">
          <h3>
            <a
              class="item"
              href="https://jobs.lever.co/givecampus/44af3199-546a-404a-95fd-a097ef37e915"
              >GiveCampus (YC S15) Hiring Rails engineers in education
              software</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 12:01:09</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36954792">
          <h3>
            <a
              class="item"
              href="https://krebsonsecurity.com/2023/07/who-and-what-is-behind-the-malware-proxy-service-socksescort/"
              >Who and What Is Behind the Malware Proxy Service SocksEscort?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 11:40:09</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36954792"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36954718">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/articles/uber-q2-earnings-report-2023-453c335a"
              >Uber posts first quarterly net profit</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 11:26:15</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36954718"
                  >Comments</a
                ><span class="descendants">: 173</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36954351">
          <h3>
            <a
              class="item"
              href="https://confidentialcomputing.io/2023/03/06/unifying-remote-attestation-protocol-implementations/"
              >Remote Attestation TLS (RA-TLS)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 10:21:01</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36954351"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36954159">
          <h3>
            <a class="item" href="https://github.com/Ralim/IronOS"
              >IronOS: Open-source soldering iron firmware</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 09:43:43</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36954159"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36953819">
          <h3>
            <a
              class="item"
              href="https://twitter.com/Andercot/status/1686286684424691712"
              >First claimed successful replication of LK-99</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 08:45:29</span
              ><span class="points-container"
                >Points: <span class="points">462</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36953819"
                  >Comments</a
                ><span class="descendants">: 219</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36952894">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2307.12037"
              >Room-Temperature Ambient-Pressure Superconductor LK-99 preprint
              revision 2</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 06:12:59</span
              ><span class="points-container"
                >Points: <span class="points">398</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36952894"
                  >Comments</a
                ><span class="descendants">: 246</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36952867">
          <h3>
            <a
              class="item"
              href="https://utcc.utoronto.ca/~cks/space/blog/linux/SystemdRestartHidesProblems"
              >Systemd auto-restarts of units can hide problems from you</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 06:07:36</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36952867"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36952796">
          <h3>
            <a class="item" href="https://github.com/martinvonz/jj"
              >Jujutsu: A Git-compatible DVCS that is both simple and
              powerful</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 05:53:03</span
              ><span class="points-container"
                >Points: <span class="points">433</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36952796"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36952640">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2307.16040"
              >First-principles study on the electronic structure of
              Pb10−xCux(PO4)6O (x=0, 1)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 05:21:23</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36952640"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36951872">
          <h3>
            <a
              class="item"
              href="https://gpus.llm-utils.org/nvidia-h100-gpus-supply-and-demand/"
              >Nvidia H100 GPUs: Supply and Demand</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 03:10:55</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36951872"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36951809">
          <h3>
            <a
              class="item"
              href="https://www.thenewatlantis.com/publications/why-this-ai-moment-may-be-the-real-deal"
              >Why This AI Moment May Be the Real Deal</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 03:00:59</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36951809"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36951738">
          <h3>
            <a
              class="item"
              href="https://tylercipriani.com/blog/2023/07/31/git-files-hidden-in-plain-sight/"
              >Git files hidden in plain sight</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 02:48:39</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36951738"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36951289">
          <h3>
            <a class="item" href="https://caseymuratori.com/blog_0025"
              >The worst API ever made (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 01:39:54</span
              ><span class="points-container"
                >Points: <span class="points">292</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36951289"
                  >Comments</a
                ><span class="descendants">: 174</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36951140">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2307.16802"
              >Semiconducting Transport in LK99 reproduction attempt</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 01:18:41</span
              ><span class="points-container"
                >Points: <span class="points">549</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36951140"
                  >Comments</a
                ><span class="descendants">: 226</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36951089">
          <h3>
            <a
              class="item"
              href="https://news.mit.edu/2023/mit-engineers-create-supercapacitor-ancient-materials-0731"
              >MIT engineers create an energy-storing supercapacitor from
              ancient materials</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-01 @ 01:11:19</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36951089"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36950075">
          <h3>
            <a
              class="item"
              href="https://blogs.loc.gov/law/2023/06/help-the-library-of-congress-create-video-games-that-improve-public-knowledge-of-civics/"
              >Help the Library of Congress create games to improve public
              knowledge of civics</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-07-31 @ 23:04:25</span
              ><span class="points-container"
                >Points: <span class="points">337</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36950075"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36949314">
          <h3>
            <a
              class="item"
              href="https://matklad.github.io/2023/04/09/can-you-trust-a-compiler-to-optimize-your-code.html"
              >Can you trust a compiler to optimize your code?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-07-31 @ 21:47:33</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36949314"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36947603">
          <h3>
            <a
              class="item"
              href="https://bigthink.com/starts-with-a-bang/missing-baryons-too-hot/"
              >Are the “missing baryons” simply too hot to see?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-07-31 @ 19:30:03</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36947603"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36943874">
          <h3>
            <a class="item" href="https://github.com/r4d10n/retrogram-rtlsdr"
              >Retrogram rtl-SDR – a radio spectrum analyzer for your
              terminal</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-07-31 @ 15:15:56</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36943874"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36943317">
          <h3>
            <a class="item" href="https://blog.dvsj.in/hashing/"
              >What's Hashing? (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-07-31 @ 14:42:40</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36943317"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36942237">
          <h3>
            <a
              class="item"
              href="https://github.com/NVIDIA/torch-harmonics/blob/main/notebooks/getting_started.ipynb"
              >Getting Started with Torch-Harmonics</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-07-31 @ 13:35:06</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36942237"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36941512">
          <h3>
            <a class="item" href="https://sive.rs/d22"
              >Cut out everything that's not surprising (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-07-31 @ 12:21:14</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36941512"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36940937">
          <h3>
            <a
              class="item"
              href="https://blog.jetbrains.com/dotnet/2023/07/27/introducing-predictive-debugging-a-game-changing-look-into-the-future/"
              >Predictive Debugging: A Game-Changing Look into the Future</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-07-31 @ 11:06:08</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36940937"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
