<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42034242">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42034242"
              >GoGoGrandparent (YC S16) Is Hiring Back End and Full-Stack
              Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 17:02:51</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                The positions: FULLY REMOTE | Full-time | US, UK, or able to
                work 4+ hours overlap with mainland US (UK time working hours
                also OK) | $100k to $160k (partially location-dependent)
              </p>
              <p>
                Build high-quality, robust engineering at the rarest of things -
                a Silicon Valley startup that is both wholesome AND profitable.
                We have 8-figure revenue, are YC-backed, and growing fast.
              </p>
              <p>
                Tech stack (<i>required): Back-end heavy (Node</i>, Typescript<i
                  >, MySQL</i
                >, REST*+GraphQL), front-end (Vue), deploy (AWS, Docker/K8s)
              </p>
              <p>Minimum 6 years experience (mostly Node/Vue)</p>
              <p>2-stage interview process.</p>
              <p>
                If you want to help older adults and people with disabilities,
                send your LinkedIn/CV to william@gogograndparent.com (keep it
                brief) or apply at
                <a
                  href="https://www.ycombinator.com/companies/gogograndparent/jobs"
                  >https://www.ycombinator.com/companies/gogograndparent/jobs</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="42034146">
          <h3>
            <a class="item" href="https://lalacheck.fly.dev/"
              >I couldn't find a free, no-login, no-AI checklist app–so I built
              one</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 16:52:35</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42034146"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42033827">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/ap-race-calls-presidential-election-winners-0fd480f8ba2f37d0439b76e0c7071413"
              >The AP has called winners in elections for more than 170 years.
              How it's done</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 16:09:34</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42033827"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42033241">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/touchscreens"
              >Touchscreens are out, and tactile controls are back</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 14:29:57</span
              ><span class="points-container"
                >Points: <span class="points">287</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42033241"
                  >Comments</a
                ><span class="descendants">: 200</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42032906">
          <h3>
            <a
              class="item"
              href="https://www.tomshardware.com/tech-industry/intel-might-be-too-big-to-fail-washington-policymakers-are-already-discussing-potential-solutions-if-the-chipmaker-cannot-recover"
              >Intel might be too big to fail</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 13:18:24</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42032906"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42032638">
          <h3>
            <a
              class="item"
              href="https://bitfieldconsulting.com/posts/need-money"
              >If you need the money, don't take the job</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 12:17:24</span
              ><span class="points-container"
                >Points: <span class="points">210</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42032638"
                  >Comments</a
                ><span class="descendants">: 124</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42032387">
          <h3>
            <a
              class="item"
              href="https://matrix.org/blog/2024/10/29/matrix-2.0-is-here/?resubmit"
              >Matrix 2.0 Is Here</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 11:09:08</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42032387"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42031169">
          <h3>
            <a
              class="item"
              href="https://cloud.google.com/blog/products/networking/speed-scale-reliability-25-years-of-data-center-networking"
              >Speed, scale and reliability: 25 years of Google datacenter
              networking evolution</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 04:29:14</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42031169"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42030832">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42030832"
              >Ask HN: What would you preserve if the internet were to go down
              tomorrow?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 02:39:51</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42030832"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
            <div class="text">
              thought experiment: if the internet were to go down tomorrow for
              an indefinite period, what content would you most want to download
              and preserve?
            </div>
          </section>
        </section>
        <section id="42030625">
          <h3>
            <a class="item" href="https://slawlor.github.io/ractor/quickstart/"
              >Ractor – a Rust Actor Framework</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-03 @ 01:47:23</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42030625"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42028873">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2111.08566"
              >Spann: Highly-Efficient Billion-Scale Approximate Nearest
              Neighbor Search (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 20:02:23</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42028873"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42028833">
          <h3>
            <a
              class="item"
              href="https://railsatscale.com/2024-10-23-next-generation-oob-gc/"
              >Next Generation Out of Band Garbage Collection</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 19:57:30</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42028833"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42028569">
          <h3>
            <a
              class="item"
              href="https://link.springer.com/article/10.1007/s11831-022-09740-9"
              >Eighty Years of the Finite Element Method (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 19:23:40</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42028569"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42027654">
          <h3>
            <a class="item" href="https://lynx.boo"
              >Show HN: A minimalist (brutalist?) website for sharing all your
              links</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 17:10:25</span
              ><span class="points-container"
                >Points: <span class="points">266</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42027654"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm building a series of websites that have simple concepts but
                too many of the players have tried to make their product so big.
                I also used to live in a very rural area so my goal is to make
                websites that load fast even on very slow internet. I'm starting
                with Lynx.boo.
              </p>
              <p>
                A linktree style website that lets you fully customize your CSS
                (and adds a bunch of classes to your links to help style them
                easier as well as very non-restrictive CSS you can do
                html{display:none;} if you really want to) and the features
                aren't locked behind yet-another monthly fee. I'll be adding
                analytic support when I figure out the best way to do it.
              </p>
              <p>
                Also there isn't a user system (per se), you just confirm
                changes by email but you never register for the site and you
                won't be spammed. Please feel free to try to break the CSS (or
                anything) as much as you want. I think it's fairly robust but I
                would love any security vulnerabilities you see.
              </p>
              <p>Thank you for your time!</p>
            </div>
          </section>
        </section>
        <section id="42027187">
          <h3>
            <a class="item" href="https://github.com/rbbydotdev/someday"
              >Show HN: Someday, Open-Source Calendly Alternative for Gmail /
              Google App Script</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 16:04:40</span
              ><span class="points-container"
                >Points: <span class="points">287</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42027187"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
            <div class="text">
              Free and open-source. Simple alternative to cal.com / calendly,
              built on Google-App-Script for Gmail users. Built with modern
              technologies like React, TypeScript, Shadcn/UI, and Vite.
            </div>
          </section>
        </section>
        <section id="42025951">
          <h3>
            <a class="item" href="https://lmstudio.ai/blog/venvstacks"
              >Venvstacks: Virtual Environment Stacks for Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 12:19:24</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42025951"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42025469">
          <h3>
            <a class="item" href="https://blog.spawek.com/SpawELO"
              >SpawELO – small free matchmaking system for LAN parties</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 10:44:42</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42025469"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42024727">
          <h3>
            <a class="item" href="https://justine.lol/lex/"
              >Weird Lexical Syntax</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-02 @ 07:45:26</span
              ><span class="points-container"
                >Points: <span class="points">397</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42024727"
                  >Comments</a
                ><span class="descendants">: 205</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42017670">
          <h3>
            <a
              class="item"
              href="https://akkartik.itch.io/carousel/devlog/826196/turn-your-phone-or-tablet-into-a-chess-clock"
              >Turn your phone or tablet into a chess clock</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-01 @ 15:10:51</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42017670"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42010249">
          <h3>
            <a
              class="item"
              href="https://ludic.mataroa.blog/blog/get-me-out-of-data-hell/"
              >Get me out of data hell</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-31 @ 19:01:55</span
              ><span class="points-container"
                >Points: <span class="points">510</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42010249"
                  >Comments</a
                ><span class="descendants">: 200</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42005920">
          <h3>
            <a class="item" href="https://github.com/react-gjs/renderer"
              >A React Renderer for Gnome JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-31 @ 11:57:25</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42005920"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42004786">
          <h3>
            <a class="item" href="https://cedardb.com/blog/overflow_handling/"
              >How to Correctly Sum Up Numbers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-31 @ 09:07:17</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42004786"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42003355">
          <h3>
            <a
              class="item"
              href="https://www.lrb.co.uk/the-paper/v46/n20/tom-johnson/big-data-for-the-leviathan"
              >Big Data for the Leviathan</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-31 @ 03:58:01</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42003355"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41994390">
          <h3>
            <a
              class="item"
              href="https://www.afar.com/magazine/historic-cruise-ships-are-at-risk-peter-knego-saves-them"
              >Preserving the history of retiring cruise ships</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-30 @ 13:08:35</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41994390"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41993096">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/toshiba-rice-cooker"
              >The inventor of the automatic rice cooker</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-30 @ 09:08:45</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41993096"
                  >Comments</a
                ><span class="descendants">: 168</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41992270">
          <h3>
            <a class="item" href="https://github.com/Gandalf-/coreutils"
              >Unix core utilities implemented in Haskell</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-30 @ 06:07:34</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41992270"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41984184">
          <h3>
            <a
              class="item"
              href="https://www.prisma.io/blog/announcing-prisma-postgres-early-access"
              >Prisma Postgres – Runs on bare metal and unikernels</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-29 @ 14:27:39</span
              ><span class="points-container"
                >Points: <span class="points">265</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41984184"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41978035">
          <h3>
            <a class="item" href="https://github.com/williambl/blockblockdevice"
              >Create block devices on your computer backed by Redstone
              Memory</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-29 @ 00:16:24</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41978035"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41970571">
          <h3>
            <a
              class="item"
              href="https://dmytroengineering.com/content/projects/t2s-plus-thermal-camera-hacking"
              >Hacking the T2S+ Out of Fear: Get Lock-In Thermography for
              Free</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-28 @ 12:49:57</span
              ><span class="points-container"
                >Points: <span class="points">273</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41970571"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41970406">
          <h3>
            <a
              class="item"
              href="https://www.projectgus.com/2024/01/kona-motor-turns/"
              >The motor turns too much</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-28 @ 12:29:57</span
              ><span class="points-container"
                >Points: <span class="points">339</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41970406"
                  >Comments</a
                ><span class="descendants">: 160</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
