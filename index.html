<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46944555">
          <h3>
            <a class="item" href="https://www.wirewiki.com"
              >Show HN: Browse Internet Infrastructure</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 12:35:19</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46944555"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>
                Wirewiki makes the internet’s hidden infrastructure browsable.
              </p>
              <p>
                I quit my job 5 years ago to scale Nslookup.io. But after
                reaching 600k monthly users, I hit a ceiling. I couldn't
                naturally expand beyond DNS because of the domain name.
              </p>
              <p>
                So I went back to the drawing board: how would I make it today?
                Not as a collection of tools, but as a browsable graph.
              </p>
              <p>
                I've spent hundreds of hours and commits building that. It's not
                even at 10% of what I want it to be, but more than enough to be
                useful, and (in my biased opinion) much better than what's out
                there.
              </p>
              <p>
                Wirewiki launches with DNS lookup, propagation, zone transfer
                and SPF checking. It also scans the entire IPv4 space for DNS
                servers and indexes them. I'm working on adding more data and
                tools.
              </p>
              <p>
                I feel like I've developed tunnel vision, so if you see anything
                that feels off, let me know!
              </p>
              <p>
                I'll keep Wirewiki open and free. Once it has a substantial
                amount of users, I'll open it up to sponsorship / brand
                integration from hosting providers, registrars and CDNs, as
                users will likely be in the market for those. But my goal is to
                keep Wirewiki free from display ads. I'm confident that's
                viable.
              </p>
            </div>
          </section>
        </section>
        <section id="46944245">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2026/02/09/matrix_element_secure_chat/"
              >Matrix messaging gaining ground in government IT</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 11:53:13</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46944245"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46944084">
          <h3>
            <a class="item" href="https://github.com/vhscom/private-landing"
              >Show HN: Minimal NIST/OWASP-compliant auth implementation for
              Cloudflare Workers</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 11:30:06</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46944084"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                Stack: Hono, Turso (libSQL), PBKDF2-SHA384 + normalization +
                common-password checks, JWT access + refresh tokens with
                revocation support, HTTP-only SameSite cookies, device tracking.
              </p>
              <p>
                It's deliberately minimal — no OAuth, no passkeys, no magic
                links, no rate limiting — because the goal is clarity and
                auditability.
              </p>
              <p>
                I wrote it mainly to deeply understand edge-runtime auth
                constraints and to have a clean Apache-2.0 example that follows
                NIST SP 800-63B / SP 800-132 and OWASP guidance.
              </p>
              <p>
                For production I'd almost always reach for Better Auth instead
                (<a href="https://www.better-auth.com"
                  >https://www.better-auth.com</a
                >) — this repo is not trying to compete with it.
              </p>
              <p>
                Live demo:
                <a href="https://private-landing.vhsdev.workers.dev/"
                  >https://private-landing.vhsdev.workers.dev/</a
                >
              </p>
              <p>
                Repo:
                <a href="https://github.com/vhscom/private-landing"
                  >https://github.com/vhscom/private-landing</a
                >
              </p>
              <p>
                Happy to answer questions about the crypto choices, the refresh
                token revocation pattern, Turso schema, constant-time
                comparison, unicode pitfalls, etc.
              </p>
            </div>
          </section>
        </section>
        <section id="46943752">
          <h3>
            <a class="item" href="https://ploum.net/2026-02-09-offpunk3.html"
              >Offpunk 3.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 10:37:20</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46943752"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46943568">
          <h3>
            <a class="item" href="https://alltheviews.world"
              >Show HN: Algorithmically Finding the Longest Line of Sight on
              Earth</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-09 @ 10:05:55</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46943568"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
            <div class="text">
              <p>
                We go into all the details at
                <a href="https://alltheviews.world"
                  >https://alltheviews.world</a
                >
              </p>
              <p>
                And there's an interactive map with over 1 billion longest
                lines, covering the whole world at
                <a href="https://map.alltheviews.world"
                  >https://map.alltheviews.world</a
                >
                Just click on any point and it'll load its longest line of
                sight.
              </p>
              <p>
                Some of you may remember Tom's post[1] from a few months ago
                about how to efficiently pack visibility tiles for computing the
                entire planet. Well now it's done. The compute run itself took
                100s of AMD Turin cores, 100s of GBs of RAM, a few TBs of disk
                and 2 days of constant runtime on multiple machines.
              </p>
              <p>
                If you are interested in the technical details, Ryan and I have
                written extensively about the algorithm and pipeline that got us
                here:
              </p>
              <p>
                * Tom's blog post:
                <a href="https://tombh.co.uk/longest-line-of-sight"
                  >https://tombh.co.uk/longest-line-of-sight</a
                >
              </p>
              <p>
                * Ryan's technical breakdown:
                <a href="https://ryan.berge.rs/posts/total-viewshed-algorithm"
                  >https://ryan.berge.rs/posts/total-viewshed-algorithm</a
                >
              </p>
              <p>
                This was a labor of love and we hope it inspires you both
                technically and naturally, to get you out seeing some of these
                vast views for yourselves!
              </p>
              <p>
                1.
                <a href="https://news.ycombinator.com/item?id=45485227"
                  >https://news.ycombinator.com/item?id=45485227</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46939685">
          <h3>
            <a class="item" href="https://odd-lots-books.netlify.app/"
              >Every book recommended on the Odd Lots Discord</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 23:27:59</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46939685"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46939593">
          <h3>
            <a
              class="item"
              href="https://www.blundergoat.com/articles/ai-makes-the-easy-part-easier-and-the-hard-part-harder"
              >AI makes the easy part easier and the hard part harder</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 23:13:34</span
              ><span class="points-container"
                >Points: <span class="points">441</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46939593"
                  >Comments</a
                ><span class="descendants">: 295</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46939312">
          <h3>
            <a
              class="item"
              href="https://bobbiec.github.io/cistercian-font.html"
              >Show HN: A custom font that displays Cistercian numerals using
              ligatures</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 22:39:46</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46939312"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46939298">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/toma/jobs/oONUnCf-founding-engineer-ai-products"
              >Toma (YC W24) Is Hiring Founding Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 22:38:14</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46939187">
          <h3>
            <a
              class="item"
              href="https://mattst88.com/blog/2026/02/08/Reverse_Engineering_the_PROM_for_the_SGI_O2/"
              >Reverse Engineering the Prom for the SGI O2</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 22:25:25</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46939187"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46938511">
          <h3>
            <a
              class="item"
              href="https://sandboxspirit.com/blog/art-of-roads-in-games/"
              >Art of Roads in Games</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 21:05:24</span
              ><span class="points-container"
                >Points: <span class="points">445</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46938511"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46938398">
          <h3>
            <a
              class="item"
              href="https://eclecticlight.co/2026/01/30/more-malware-from-google-search/"
              >More Mac malware from Google search</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 20:52:55</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46938398"
                  >Comments</a
                ><span class="descendants">: 164</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46938280">
          <h3>
            <a
              class="item"
              href="https://github.com/apple-oss-distributions/xnu/blob/main/doc/scheduler/sched_clutch_edge.md"
              >Apple XNU: Clutch Scheduler</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 20:38:55</span
              ><span class="points-container"
                >Points: <span class="points">156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46938280"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46938241">
          <h3>
            <a
              class="item"
              href="https://gtaforums.com/topic/986492-grand-theft-auto-ready2play-full-game-windows-version/"
              >A GTA modder has got the 1997 original working on modern PCs and
              Steam Deck</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 20:34:51</span
              ><span class="points-container"
                >Points: <span class="points">206</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46938241"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46937696">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46937696"
              >Ask HN: What are you working on? (February 2026)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 19:35:55</span
              ><span class="points-container"
                >Points: <span class="points">186</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46937696"
                  >Comments</a
                ><span class="descendants">: 657</span></span
              >
            </h4>
            <div class="text">
              What are you working on? Any new ideas that you're thinking about?
            </div>
          </section>
        </section>
        <section id="46937012">
          <h3>
            <a
              class="item"
              href="https://nullcathedral.com/posts/2026-02-08-roundcube-svg-feimage-remote-image-bypass/"
              >Roundcube Webmail: SVG feImage bypasses image blocking to track
              email opens</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 18:24:26</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46937012"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46936920">
          <h3>
            <a
              class="item"
              href="https://www.latent.space/p/adversarial-reasoning"
              >Experts Have World Models. LLMs Have Word Models</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 18:13:48</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46936920"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46936828">
          <h3>
            <a
              class="item"
              href="https://blog.svgames.pl/article/the-little-bool-of-doom"
              >The Little Bool of Doom (2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 18:02:50</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46936828"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46936237">
          <h3>
            <a class="item" href="https://underhillgame.com/"
              >Show HN: I created a Mars colony RPG based on Kim Stanley
              Robinson’s Mars books</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 17:08:30</span
              ><span class="points-container"
                >Points: <span class="points">251</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46936237"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
            <div class="text">
              <p>
                There’s Chill Mode for players that just want to build &amp;
                hang, and Conflict Mode that introduces the Red v. Green
                factions. Reds sabotage, the terrain slowly turns green as the
                world gets more terraformed.
              </p>
              <p>Feedback welcome, especially on performance and gameplay!</p>
            </div>
          </section>
        </section>
        <section id="46934579">
          <h3>
            <a class="item" href="https://habr.com/en/articles/446238/"
              >Exploiting signed bootloaders to circumvent UEFI Secure Boot
              (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:40:52</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934579"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934266">
          <h3>
            <a
              class="item"
              href="https://blog.hofstede.it/running-your-own-as-bgp-on-freebsd-with-frr-gre-tunnels-and-policy-routing/"
              >Running Your Own As: BGP on FreeBSD with FRR, GRE Tunnels, and
              Policy Routing</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 14:02:58</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934266"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46934107">
          <h3>
            <a class="item" href="https://github.github.io/gh-aw/"
              >GitHub Agentic Workflows</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 13:40:56</span
              ><span class="points-container"
                >Points: <span class="points">281</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46934107"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46933401">
          <h3>
            <a
              class="item"
              href="https://lists.nanog.org/archives/list/nanog@lists.nanog.org/thread/TSNPJVFH4DKLINIKSMRIIVNHDG5XKJCM/"
              >Dave Farber has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 11:38:57</span
              ><span class="points-container"
                >Points: <span class="points">272</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46933401"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46932444">
          <h3>
            <a class="item" href="https://www.pa3fwm.nl/technotes/tn13a.html"
              >Quartz crystals</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 08:26:36</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46932444"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46930961">
          <h3>
            <a class="item" href="https://github.com/mitchellh/vouch">Vouch</a>
          </h3>
          <section>
            <h4>
              <span>2026-02-08 @ 03:09:28</span
              ><span class="points-container"
                >Points: <span class="points">936</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46930961"
                  >Comments</a
                ><span class="descendants">: 412</span></span
              >
            </h4>
            <div class="text">
              <a href="https://x.com/mitchellh/status/2020252149117313349"
                >https://x.com/mitchellh/status/2020252149117313349</a
              >
              <p>
                <a
                  href="https://nitter.net/mitchellh/status/2020252149117313349"
                  >https://nitter.net/mitchellh/status/2020252149117313349</a
                >
              </p>
              <p>
                <a href="https://github.com/ghostty-org/ghostty/pull/10559"
                  >https://github.com/ghostty-org/ghostty/pull/10559</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46899900">
          <h3>
            <a
              class="item"
              href="https://www.durham.ac.uk/news-events/latest-news/2026/01/roman-industrial-hub-discovered-on-banks-of-river-wear-/"
              >Roman industrial hub discovered on banks of River Wear</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-05 @ 14:20:38</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46899900"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46893069">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Thought-terminating_clich%C3%A9"
              >Thought-Terminating Cliché</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 22:54:55</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46893069"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46889710">
          <h3>
            <a class="item" href="https://github.com/naver/lispe"
              >LispE: Lisp Interpreter with Pattern Programming and Lazy
              Evaluation</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 18:34:29</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46889710"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46885841">
          <h3>
            <a
              class="item"
              href="https://sir68k.re/posts/rh1-firmware-available/"
              >Custom Firmware for the MZ-RH1 – Ready for Testing</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 13:57:39</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46885841"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46885469">
          <h3>
            <a
              class="item"
              href="https://sciencevsmagic.net/tes/#0.5.0.1.aaaaaaaaa"
              >Tessellation Kit (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-04 @ 13:17:05</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46885469"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
