<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44649999">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/better-auth/jobs/N0CtN58-staff-engineer"
              >Better Auth (YC X25) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 17:00:10</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44649817">
          <h3>
            <a class="item" href="https://blog.eladgil.com/p/ai-market-clarity"
              >AI Market Clarity</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 16:50:12</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44649817"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44649713">
          <h3>
            <a
              class="item"
              href="https://collectiveactionintech.substack.com/p/the-case-for-sabotage"
              >The Case for Sabotage</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 16:45:26</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44649713"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44649651">
          <h3>
            <a class="item" href="https://noirlab.edu/public/news/noirlab2523/"
              >Gemini North Discovers Long-Predicted Stellar Companion of
              Betelgeuse</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 16:41:31</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44649651"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44649319">
          <h3>
            <a
              class="item"
              href="https://excamera.substack.com/p/tiny-code-reader-a-7-qr-code-sensor"
              >Tiny Code Reader: a $7 QR code sensor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 16:22:51</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44649319"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44649115">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44649115"
              >Launch HN: Promi (YC S24) – Personalize e-commerce discounts and
              retail offers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 16:11:45</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44649115"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.promi.ai/">https://www.promi.ai/</a>). We’re
              building a platform for ecommerce merchants to send realtime
              personalized discounts, optimized with AI (obviously)
              <p>
                Demo:
                <a href="https://youtu.be/BCYNCqb4fUc"
                  >https://youtu.be/BCYNCqb4fUc</a
                >, Sales Video:
                <a href="https://www.youtube.com/watch?v=WiO1S7RBn-o"
                  >https://www.youtube.com/watch?v=WiO1S7RBn-o</a
                >
              </p>
              <p>
                All the big tech companies send personalized discounts - Uber,
                DoorDash, Google, etc. In fact, I was the product lead
                overseeing discounts at Uber, so if you’ve gotten a promotion on
                Uber Rides or Eats, that was our tech. These personalization
                models often generate &gt;30% more revenue vs. non-personalized
                discounts (cost-neutral that is), so this is a hugely impactful
                product.
              </p>
              <p>
                It’s no surprise then that other merchants want to follow suit.
                Merchants don’t want to waste discounts on customers who would
                have purchased anyway. Frankly it’s not a new idea to offer a
                software solution to personalize discounts - plenty of other
                startups have entered this space with a similar product.
              </p>
              <p>
                The biggest problem with personalizing discounts for mid-size
                and smaller companies has been that traditionally you rely on
                ‘explore’ data - data from randomly sending out discounts to a
                portion of the user base. But this has a lot of problems:
                merchants need to be large, collecting this data is expensive,
                training data really should be fresh (so explores should
                constantly be running), and if you want to try a different
                discount structure (e.g. BOGO instead of 20% off) you’ll need to
                run a new explore with the new structure.
              </p>
              <p>
                So what does Promi do differently? We train on regular traffic
                and simplify the problem by just focusing on conversion rate. If
                we can accurately predict who is unlikely to convert and which
                products are unlikely to be bought, we can issue discounts
                without the fear of burning money on an order that would have
                happened anyway. One of my major takeaways from my time at Uber
                was that our model was mostly targeting users who had a low
                likelihood of converting in a given week. Quantifying how much
                more likely they were to convert when given a discount via
                explores was helpful, but not as impactful as understanding
                starting conversion rate.
              </p>
              <p>
                Side note - It’s been a bit interesting launching an AI company
                during this hype cycle that isn’t actually using the latest and
                greatest LLMs. We believe more traditional machine learning
                still has a lot of value to add. I don’t want to say we won’t
                use LLMs down the road (there may be some interesting
                applications for developing additional features), but starting
                this way has worked out well for us.
              </p>
              <p>
                There have been plenty of other challenges (as with any
                startup). We’ve had to figure out how to automate integrations
                when so many websites have custom code. We’ve had to make the
                model work without rich user data since the majority of website
                visitors aren’t logged in. A quick note in this one - we can use
                first party cookies to more or less track the view and
                transaction history, but we’ve found that one big predictor of
                conversion is traffic source: whether a visitor is coming from
                ads, email, direct traffic, google search, etc. That traffic
                source isn’t something as valuable at Uber (since everyone uses
                the app), so it’s been a bit of a tradeoff in the types of
                features that are most impactful.
              </p>
              <p>
                Our model seems to be working well! We have case studies on our
                website showing the typical revenue and profit lift we see. We
                currently have tiered pricing with different quotas for the
                amount of revenue managed by Promi discounts.
              </p>
              <p>
                I’d love to get thoughts from the machine learning experts in
                this community, though full disclosure I’m the non-technical
                founder. Let us know what you think!
              </p>
            </div>
          </section>
        </section>
        <section id="44648957">
          <h3>
            <a
              class="item"
              href="https://blog.kulkan.com/bypassing-watermark-implementations-fe39e98ca22b"
              >Bypassing Watermark Implementations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 16:03:11</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44648957"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44648772">
          <h3>
            <a class="item" href="https://blip.net/"
              >Blip: Peer-to-Peer Massive File Sharing by Former Dropbox
              Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 15:54:31</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44648772"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44648728">
          <h3>
            <a
              class="item"
              href="https://vasily.cc/blog/facts-dont-change-minds/"
              >Why Facts Don't Change Minds–Structure Does (A Systems Analysis
              of Belief)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 15:51:50</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44648728"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44648700">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2025/07/28/mary-had-schizophrenia-then-suddenly-she-didnt"
              >Mary had schizophrenia, then suddenly didn't</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 15:50:41</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44648700"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44647609">
          <h3>
            <a
              class="item"
              href="https://shkspr.mobi/blog/2025/07/1kb-js-numbers-station/"
              >1KB JavaScript Numbers Station</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 14:47:54</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44647609"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44647600">
          <h3>
            <a
              class="item"
              href="https://startwithawhy.com/reverseproxy/2025/07/20/ReverseProxy-Deep-Dive-Part2.html"
              >Reverse Proxy Deep Dive: Why HTTP Parsing at the Edge Is Harder
              Than It Looks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 14:47:33</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44647600"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44647572">
          <h3>
            <a
              class="item"
              href="https://www.scattered-thoughts.net/writing/go-allocation-probe/"
              >Go Allocation Probe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 14:45:45</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44647572"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44647190">
          <h3>
            <a
              class="item"
              href="https://www.anthes.is/font-comparison-review-atkinson-hyperlegible-mono.html"
              >Font Comparison: Atkinson Hyperlegible Mono vs. JetBrains Mono
              and Fira Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 14:17:05</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44647190"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44647112">
          <h3>
            <a
              class="item"
              href="https://www.state.gov/releases/office-of-the-spokesperson/2025/07/the-united-states-withdraws-from-the-united-nations-educational-scientific-and-cultural-organization-unesco"
              >The United States withdraws from UNESCO</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 14:09:49</span
              ><span class="points-container"
                >Points: <span class="points">501</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44647112"
                  >Comments</a
                ><span class="descendants">: 606</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44646925">
          <h3>
            <a
              class="item"
              href="https://security.googleblog.com/2025/07/introducing-oss-rebuild-open-source.html"
              >OSS Rebuild: open-source, Rebuilt to Last</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 13:53:46</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44646925"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44646901">
          <h3>
            <a class="item" href="https://github.com/pmarreck/yt-transcriber"
              >Yt-transcriber – Give a YouTube URL and get a transcription</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 13:51:21</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44646901"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44646869">
          <h3>
            <a class="item" href="https://daisyui.com/"
              >DaisyUI: Tailwind CSS Components</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 13:48:55</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44646869"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44646801">
          <h3>
            <a
              class="item"
              href="https://sophiebits.com/2025/07/21/todos-arent-for-doing"
              >TODOs Aren't for Doing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 13:43:16</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44646801"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44646780">
          <h3>
            <a class="item" href="https://shafq.at/my-gpu-fan-saga.html"
              >Show HN: My GPU Fan Saga – A DIY ATX Fan Controller</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 13:41:21</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44646780"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44645846">
          <h3>
            <a class="item" href="https://themagicofcode.com/sample/"
              >Show HN: The Magic of Code – book about the wonders and weirdness
              of computation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 12:05:44</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44645846"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
            <div class="text">
              <p>
                Right now there is so much worry and concern around technology
                that I feel like some people—though not the folks here—have
                forgotten how much fun that code and computation can also be. So
                I wanted to rekindle some of that sense of wonder.
              </p>
              <p>
                But, as I’ve written elsewhere, this is also the kind of book I
                wish I had when I was younger and getting interested in
                computers. I’ve always enjoyed the kinds of writing that talks
                about computing but in the context of so many other big ideas,
                especially ones I’ve explored at various points in my own life,
                from evolution to simulation. And that’s what I tried to do.
              </p>
              <p>
                But while “The Magic of Code” is certainly for a wide audience,
                and for people who are unfamiliar with programming and code,
                I’ve also (hopefully!) designed it to be of interest to those
                who are more expert in this realm, with lots of rabbit holes and
                strange ideas to pursue. And if there exists a genre of book to
                explain to outsiders why you love a topic, this is in that
                genre, for computing and code. I think the HN community will
                really enjoy it.
              </p>
            </div>
          </section>
        </section>
        <section id="44645597">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44645597"
              >Show HN: A word of the day that doesn't suck</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 11:31:24</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44645597"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>
                Instead, what you usually get is words that will never be used
                in conversation, held up as curios. Some examples from
                Dictionary.com’s daily email: thewless, balladmonger, vagility,
                contextomy. These words are... not useful.
              </p>
              <p>
                I’ve always thought I could do better. My friend Ben recently
                created a daily puzzle game, called Bracket City, launched here
                on HN [1], which I like because it takes about the same amount
                of time as Wordle but has some of the variety and artistry of a
                good crossword.
              </p>
              <p>
                Ben agreed to let me write a word of the day for the game’s
                audience. We’ve collected them all here:
                <a href="https://bracket.city/words"
                  >https://bracket.city/words</a
                >. It’s such a joy to write -- every day, I pay homage to a word
                I love or use or have newly discovered. I find myself paying
                more attention to words I encounter, thinking if they deserve a
                place.
              </p>
              <p>
                It’s also fun for another reason. Many years ago I wrote a blog
                post, "You’re probably using the wrong dictionary" [2], that
                made the rounds and actually still finds new readers today. It
                was about how the modern-day dictionaries we find by default on
                our iPhones and web browsers are actually kind of bureaucratic
                and lifeless. Through a writer I love, John McPhee, I
                rediscovered Webster’s 1913 dictionary, which feels like it was
                written by a thinking person who loved words. I still consult it
                all the time. Writing a word of the day has reminded me just how
                delightful and useful Webster’s old dictionary is -- and
                reacquainted me with the OED, which I now look to every day, and
                which I discovered you can access with your library card.
              </p>
              <p>
                Some of my favorite entries so far: sophisticated, twee,
                gravitas, blockbuster, meteorologist, send, bid. There are more
                than 175 now -- and more coming once a day, every day, for as
                long as Bracket City stands.
              </p>
              <p>
                To sign up to see each word of the day as it’s published, go to
                <a href="https://bracket.city/words"
                  >https://bracket.city/words</a
                >.
              </p>
              <p>
                [1]
                <a href="https://news.ycombinator.com/item?id=43622719"
                  >https://news.ycombinator.com/item?id=43622719</a
                >
              </p>
              <p>
                [2]
                <a href="https://jsomers.net/blog/dictionary"
                  >https://jsomers.net/blog/dictionary</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44645353">
          <h3>
            <a class="item" href="https://kau.sh/blog/how-to-firefox/"
              >How to Firefox</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 10:51:30</span
              ><span class="points-container"
                >Points: <span class="points">570</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44645353"
                  >Comments</a
                ><span class="descendants">: 326</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44643564">
          <h3>
            <a
              class="item"
              href="https://github.com/openai/whisper/discussions/2608"
              >Complete silence is always hallucinated as "ترجمة نانسي قنقر" in
              Arabic</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 05:42:10</span
              ><span class="points-container"
                >Points: <span class="points">488</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44643564"
                  >Comments</a
                ><span class="descendants">: 266</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44641961">
          <h3>
            <a
              class="item"
              href="https://maddie.wtf/posts/2025-07-21-jujutsu-for-busy-devs"
              >Jujutsu for busy devs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-22 @ 00:21:48</span
              ><span class="points-container"
                >Points: <span class="points">327</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44641961"
                  >Comments</a
                ><span class="descendants">: 452</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44619206">
          <h3>
            <a
              class="item"
              href="https://www.granola.ai/blog/dont-animate-height"
              >Don't Animate Height</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 20:44:19</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44619206"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44616158">
          <h3>
            <a
              class="item"
              href="https://codeblog.jonskeet.uk/2025/07/19/unexpected-inconsistency-in-records/"
              >Unexpected inconsistency in records</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 15:12:04</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44616158"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44614837">
          <h3>
            <a
              class="item"
              href="https://www.usenix.org/conference/woot24/presentation/motallebighomi"
              >MakeShift: Security Analysis of Shimano Di2 Wireless Gear
              Shifting in Bicycles</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 12:08:40</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44614837"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44613594">
          <h3>
            <a
              class="item"
              href="https://www.stirworld.com/see-features-from-cartography-to-code-architectures-of-power-at-the-venice-biennale-2025"
              >From Cartography to Code: Architectures of Power at the Venice
              Biennale 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-19 @ 08:18:57</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44613594"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44602609">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2025-07-18/what-scientists-learned-scanning-the-bodies-of-100-000-brits"
              >An unprecedented window into how diseases take hold years before
              symptoms appear</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-18 @ 08:55:56</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44602609"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.md/0Fg1E">https://archive.md/0Fg1E</a>
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
