<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43500769">
          <h3>
            <a class="item" href="https://github.com/SAT-R/sa2"
              >A decompilation and port of Sonic Advance 2-a GameBoy Advance
              game written in C</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 02:21:49</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43500769"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43500179">
          <h3>
            <a
              class="item"
              href="https://docs.google.com/forms/d/e/1FAIpQLScpzOyP_mk3muEpbKrnW8UTZB_yP5SJwjbeT8_6A6fhdvpJCg/viewform?usp=preview"
              >Helpcare AI (YC F24) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 01:00:54</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43500124">
          <h3>
            <a
              class="item"
              href="https://thisdavej.com/share-python-scripts-like-a-pro-uv-and-pep-723-for-easy-deployment/"
              >Using uv and PEP 723 for Self-Contained Python Scripts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 00:53:46</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43500124"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43499992">
          <h3>
            <a
              class="item"
              href="https://blog.autorouting.com/p/13-things-i-would-have-told-myself"
              >Things I would have told myself before building an autorouter</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 00:38:53</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43499992"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43499966">
          <h3>
            <a
              class="item"
              href="https://nsidc.org/sea-ice-today/analyses/arctic-sea-ice-sets-record-low-maximum-2025"
              >Arctic sea ice sets a record low maximum in 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 00:34:55</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43499966"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43499823">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/oldnewthing/20250325-00/?p=110993"
              >A note on the USB-to-PS/2 mouse adapter that came with Microsoft
              mouse devices</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 00:16:29</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43499823"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43499755">
          <h3>
            <a
              class="item"
              href="http://toughsf.blogspot.com/2017/10/anti-orbit-laser-submarines.html"
              >Anti-Orbit Laser Submarines (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 00:06:17</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43499755"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43499045">
          <h3>
            <a class="item" href="https://kagi.com/stats?stat=leaderboard"
              >Most promoted and blocked domains on Kagi</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 22:39:51</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43499045"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43498984">
          <h3>
            <a
              class="item"
              href="https://reviews.ofb.biz/safari/article/1300.html"
              >Apple needs a Snow Sequoia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 22:32:45</span
              ><span class="points-container"
                >Points: <span class="points">399</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43498984"
                  >Comments</a
                ><span class="descendants">: 285</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43498696">
          <h3>
            <a
              class="item"
              href="https://www.rahuljuliato.com/posts/emacs-solo-demo"
              >Emacs Solo: A Surprise System Crafters Live Demo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 22:03:03</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43498696"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43498570">
          <h3>
            <a
              class="item"
              href="https://newsletter.dancohen.org/archive/asking-good-questions-is-harder-than-giving-great-answers/"
              >Asking good questions is harder than giving great answers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 21:48:23</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43498570"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43498481">
          <h3>
            <a class="item" href="https://rgsilva.com/blog/ps2-go-part-1/"
              >Golang on the Playstation 2</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 21:37:46</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43498481"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43498338">
          <h3>
            <a
              class="item"
              href="https://twitter.com/skdh/status/1905132853672784121"
              >I genuinely don't understand why some people are still bullish
              about LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 21:22:42</span
              ><span class="points-container"
                >Points: <span class="points">226</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43498338"
                  >Comments</a
                ><span class="descendants">: 395</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43498213">
          <h3>
            <a
              class="item"
              href="https://www.scottsmitelli.com/articles/take-oncall-and-shove-it/"
              >Take this on-call rotation and shove it</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 21:09:28</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43498213"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43497954">
          <h3>
            <a class="item" href="https://www.di.ens.fr/~fbach/ltfp_book.pdf"
              >Learning Theory from First Principles [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 20:45:13</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43497954"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43497719">
          <h3>
            <a
              class="item"
              href="https://www.merriam-webster.com/grammar/em-dash-en-dash-how-to-use"
              >How to Use Em Dashes (–), En Dashes (–), and Hyphens (-)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 20:19:38</span
              ><span class="points-container"
                >Points: <span class="points">264</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43497719"
                  >Comments</a
                ><span class="descendants">: 200</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43497394">
          <h3>
            <a
              class="item"
              href="https://victorpoughon.fr/i-tried-making-artificial-sunlight-at-home/"
              >I tried making artificial sunlight at home</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 19:49:28</span
              ><span class="points-container"
                >Points: <span class="points">277</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43497394"
                  >Comments</a
                ><span class="descendants">: 152</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43497264">
          <h3>
            <a
              class="item"
              href="https://citizenlab.ca/2024/11/analysis-of-censorship-on-amazon-com/"
              >Banned Books: Analysis of Censorship on Amazon.com (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 19:37:50</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43497264"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43496644">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/ai-models-miss-disease-black-female-patients"
              >AI models miss disease in Black and female patients</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 18:38:21</span
              ><span class="points-container"
                >Points: <span class="points">265</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43496644"
                  >Comments</a
                ><span class="descendants">: 208</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43496577">
          <h3>
            <a class="item" href="https://blog.zksecurity.xyz/posts/clean/"
              >Clean, a formal verification DSL for ZK circuits in Lean4</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 18:33:00</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43496577"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43495617">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/research/tracing-thoughts-language-model"
              >Tracing the thoughts of a large language model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 17:05:36</span
              ><span class="points-container"
                >Points: <span class="points">607</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43495617"
                  >Comments</a
                ><span class="descendants">: 242</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43494427">
          <h3>
            <a class="item" href="https://hub.continue.dev/explore/assistants"
              >Launch HN: Continue (YC S23) – Create custom AI code
              assistants</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 15:06:26</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43494427"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.continue.dev">https://www.continue.dev</a>),
              which enables developers to create, share, and use custom AI code
              assistants. Today, we are launching Continue Hub and sharing what
              we’ve learned since our Show HN that introduced our open-source VS
              Code extension in July 2023 (<a
                href="https://news.ycombinator.com/item?id=36882146"
                >https://news.ycombinator.com/item?id=36882146</a
              >).
              <p>
                At Continue, we've always believed that developers should be
                amplified, not automated. A key aspect of this philosophy is
                providing choices that let you customize your AI code assistant
                to fit your specific needs, workflows, and preferences.
              </p>
              <p>
                The AI-native development landscape constantly evolves with new
                models, MCP servers, assistant rules, etc. emerging daily.
                Continue's open architecture connects this ecosystem, ensuring
                your custom code assistants always leverage the best available
                resources rather than locking you into yesterday's technology.
              </p>
              <p>
                The Continue Hub makes it even easier to customize with a
                registry for defining, managing, and sharing building blocks
                (e.g. models, rules, MCP servers, etc). These building blocks
                can be combined into custom AI code assistants, which you can
                use with our open-source VS Code and JetBrains extensions (<a
                  href="https://github.com/continuedev/continue"
                  >https://github.com/continuedev/continue</a
                >).
              </p>
              <p>
                Here are a few examples of different custom AI code assistants
                that we’ve built to show how it works:
              </p>
              <p>
                A custom assistant that specializes in helping with data load
                tool (dlt) using their MCP:
                <a
                  href="https://www.loom.com/share/baf843d860f44a91b8c580063fcfbf4a?sid=99e41693-43d1-4166-812d-01d2f2f8c1f4"
                  >https://www.loom.com/share/baf843d860f44a91b8c580063fcfbf4a?...</a
                >
              </p>
              <p>
                A custom assistant that specializes in helping with Dioxus using
                only models from Mistral:
                <a
                  href="https://www.loom.com/share/87583774753045b1b3c12327e662ea38?sid=1241761c-450c-4f72-9afa-d97cf6e26247"
                  >https://www.loom.com/share/87583774753045b1b3c12327e662ea38?...</a
                >
              </p>
              <p>
                A custom assistant that specializes in helping with LanceDB
                using the best LLMs from any vendor via their public APIs
                (Anthropic, Voyage AI, etc):
                <a
                  href="https://www.loom.com/share/3059a35f8b6f436699ab9c1d1421fc8d?sid=e10eb0a8-eb5f-4150-85b4-cc6cae946a7a"
                  >https://www.loom.com/share/3059a35f8b6f436699ab9c1d1421fc8d?...</a
                >
              </p>
              <p>
                Over the last 18+ months since our Show HN, our community has
                rapidly grown to 25k+ GitHub stars, 12.5k+ Discord members, and
                hundreds of thousands of users. This happened because developers
                want to understand how their tools work, figure out how to
                better use them, and shape them to fit their development
                practices / environments. Continue does not constrain their
                creativity like the vertically integrated, proprietary black box
                AI code assistants that lack transparency and offer limited
                customizability.
              </p>
              <p>
                Before Continue Hub, developers faced specific technical
                challenges when building custom AI assistants. They manually
                maintained separate configuration files for different models,
                wrestled with breaking API changes from providers, and built
                redundant context retrieval systems from scratch. We've seen
                teams spend weeks setting up systems that should take hours.
                Many developers abandoned the effort entirely, finding it
                impossible to keep up with the rapidly evolving ecosystem of
                models and tools.
              </p>
              <p>
                Our open-source IDE extensions now read a standardized
                configuration format that fully specifies an AI code assistant's
                capabilities—from models and context providers to prompts and
                rules. Continue Hub hosts these configurations, syncs them with
                your IDE, and adds versioning, permissions, and sharing.
                Assistants are composed of atomic "blocks" that use a common
                yaml format, all managed through our registry with both free
                solo and paid team plans.
              </p>
              <p>
                We're releasing Continue 1.0 today, which includes both Continue
                Hub and the first major release of our Apache 2.0 licensed VS
                Code and JetBrains extensions. While the Hub currently only
                supports our IDE extensions, we've designed the underlying
                architecture to support other tools in the future (<a
                  href="https://blog.continue.dev/continue-1-0"
                  >https://blog.continue.dev/continue-1-0</a
                >). The config format is intentionally tool-agnostic—if you're
                interested in integrating with it or have ideas for improvement,
                we'd love to hear your thoughts!
              </p>
            </div>
          </section>
        </section>
        <section id="43493056">
          <h3>
            <a
              class="item"
              href="https://googleprojectzero.blogspot.com/2025/03/blasting-past-webp.html"
              >Blasting Past WebP - An analysis of the NSO BLASTPASS iMessage
              exploit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 12:49:44</span
              ><span class="points-container"
                >Points: <span class="points">233</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43493056"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43492562">
          <h3>
            <a
              class="item"
              href="https://medium.com/@brunopostle/piranesis-perspective-trick-6bcd7a754da9"
              >Piranesi's Perspective Trick (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-27 @ 11:41:30</span
              ><span class="points-container"
                >Points: <span class="points">321</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43492562"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43486881">
          <h3>
            <a class="item" href="https://dagger.io/blog/dagger-shell"
              >Dagger: A shell for the container age</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-26 @ 20:26:13</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43486881"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43470493">
          <h3>
            <a
              class="item"
              href="https://asteriskmag.com/issues/09/the-unbearable-loudness-of-chewing/"
              >The Unbearable Loudness of Chewing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 12:41:04</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43470493"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43470206">
          <h3>
            <a
              class="item"
              href="https://tratt.net/laurie/blog/2025/better_shell_history_search.html"
              >Better Shell History Search</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 12:02:45</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43470206"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43469735">
          <h3>
            <a class="item" href="https://github.com/zerubeus/elektron-mcp"
              >Show HN: Built an MCP server for direct sound design on my
              hardware synth</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-25 @ 10:41:23</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43469735"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                <a href="https://www.youtube.com/watch?v=EXf6lOTjla8"
                  >https://www.youtube.com/watch?v=EXf6lOTjla8</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43463779">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-025-00863-0?linkId=13622861"
              >First-of-its-kind trial enables paralysed man to stand via stem
              cell injection</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 18:07:04</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43463779"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43459302">
          <h3>
            <a
              class="item"
              href="https://futhark-lang.org/blog/2025-03-04-adding-a-new-backend.html"
              >What it takes to add a new back end to Futhark</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-24 @ 10:31:28</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43459302"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
