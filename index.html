<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46317765">
          <h3>
            <a
              class="item"
              href="https://electricmagicfactory.com/articles/interactive-fluid-typography/"
              >Interactive Fluid Typography</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 19:56:04</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46317765"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46317657">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/developers/t5gemma-2/"
              >T5Gemma 2: The next generation of encoder-decoder models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 19:48:15</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46317657"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46317546">
          <h3>
            <a class="item" href="https://kibty.town/blog/mintlify/"
              >How to hack Discord, Vercel and more with one easy trick</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 19:41:24</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46317546"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46317174">
          <h3>
            <a
              class="item"
              href="https://vividmaps.com/central-pangean-mountains/"
              >The Scottish Highlands, the Appalachians, Atlas are the same
              mountain range</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 19:15:17</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46317174"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46317098">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/hackermondev/5e2cdc32849405fff6b46957747a2d28"
              >We pwned X, Vercel, Cursor, and Discord through a supply-chain
              attack</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 19:08:48</span
              ><span class="points-container"
                >Points: <span class="points">207</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46317098"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46316907">
          <h3>
            <a
              class="item"
              href="https://www.japantimes.co.jp/business/2025/12/18/tech/china-west-ai-chips/"
              >How China built its ‘Manhattan Project’ to rival the West in AI
              chips</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 18:55:34</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46316907"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46316533">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/developers/functiongemma/"
              >FunctionGemma 270M Model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 18:26:52</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46316533"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46316367">
          <h3>
            <a
              class="item"
              href="https://openai.com/index/introducing-gpt-5-2-codex/"
              >GPT-5.2-Codex</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 18:14:48</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46316367"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46315547">
          <h3>
            <a
              class="item"
              href="https://entropicthoughts.com/mil-std-882e-software-control"
              >Military standard on software control levels</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 17:12:46</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46315547"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46315414">
          <h3>
            <a
              class="item"
              href="https://claude.com/blog/organization-skills-and-directory"
              >Skills for organizations, partners, the ecosystem</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 17:04:32</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46315414"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46314385">
          <h3>
            <a class="item" href="https://github.com/composify-js/composify"
              >Show HN: Composify – Open-Source Visual Editor / Server-Driven UI
              for React</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 16:02:29</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46314385"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've run into this for years. Campaign pages come in, engineers
                get pulled in, and tickets stack up. It's usually the same
                components, just rearranged.
              </p>
              <p>
                A few years ago, at a startup I worked at, we built an internal
                tool to deal with this. You register your existing React
                components, they show up as drag-and-drop blocks, and the result
                is a JSX string. No schema to learn, no changes to your
                component code.
              </p>
              <p>
                We used it in production, handling real traffic in a messy,
                legacy-heavy environment. It held up well. Over time, it powered
                roughly 60% of our traffic. Marketing shipped pages without
                filing tickets, and product teams ran layout-level A/B tests.
                That experience eventually led me to clean it up and open-source
                it.
              </p>
              <p>
                Composify sits somewhere between a no-code page builder and a
                headless CMS. Page builders like Wix or Squarespace offer
                drag-and-drop, but lock you into their components. There are
                also solid tools like Builder.io, Puck, and Storyblok, but many
                require you to adapt your components to their model. Composify
                is intentionally minimal: it lets you use your actual production
                components as they are.
              </p>
              <p>
                It's still early. The docs need work, and there are rough edges.
                But it's running in production and has solved a real problem for
                us. If you already have a component library and want non-devs to
                compose pages from it, it might be useful.
              </p>
              <p>
                Homepage:
                <a href="https://composify.js.org">https://composify.js.org</a>
              </p>
              <p>Happy to answer questions or hear feedback!</p>
            </div>
          </section>
        </section>
        <section id="46313991">
          <h3>
            <a class="item" href="https://dl.acm.org/openaccess"
              >Beginning January 2026, all ACM publications will be made open
              access</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 15:39:09</span
              ><span class="points-container"
                >Points: <span class="points">920</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46313991"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46313930">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46313930"
              >Launch HN: Pulse (YC S24) – Production-grade unstructured
              document extraction</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 15:35:52</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46313930"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.runpulse.com/">https://www.runpulse.com/</a
              >). Pulse is a document extraction system to create LLM-ready text
              using hybrid VLM + OCR models.
              <p>
                Here’s a demo video:
                <a
                  href="https://video.runpulse.com/video/pulse-platform-walkthrough-69f9"
                  >https://video.runpulse.com/video/pulse-platform-walkthrough-...</a
                >.
              </p>
              <p>
                Later in this post, you’ll find links to before-and-after
                examples on particularly tricky cases. Check those out to see
                what Pulse can really do! Modern vision language models are
                great at producing plausible text, but that makes them risky for
                OCR and data ingestion. Plausibility isn’t good enough when you
                need accuracy.
              </p>
              <p>
                When we started working on document extraction, we assumed the
                same thing many teams do: foundation models are improving
                quickly, multi-modal systems appear to read documents well,
                what’s not to like? And indeed, for small or clean inputs, those
                assumptions mostly give good results. However, limitations show
                up once you begin processing real documents in volume. Long
                PDFs, dense tables, mixed layouts, low-fidelity scans, and
                financial or operational data expose errors that are subtle,
                hard to detect, and expensive to correct. Outputs look
                reasonable even though they contain small but important
                mistakes, especially in tables and numeric fields.
              </p>
              <p>
                Running into those challenges got us working. We ran controlled
                evaluations on complex documents, fine tuned vision models, and
                built labeled datasets where ground truth actually matters.
                There have been many nights where our team stayed up
                hand-annotating pages, drawing bounding boxes around tables,
                labeling charts point by point, or debating whether a number was
                unreadable or simply poorly scanned. That process shaped our
                intuition far more than benchmarks.
              </p>
              <p>
                One thing became clear quickly. The core challenge is not
                extraction itself, but confidence. Vision language models embed
                document images into high-dimensional representations optimized
                for semantic understanding, not precise transcription. That
                process is inherently lossy. When uncertainty appears, models
                tend to resolve it using learned priors instead of surfacing
                ambiguity. This behavior can be helpful in consumer settings. In
                production pipelines, it creates verification problems that do
                not scale well. Pulse grew out of our trying to address this gap
                through system design rather than prompting alone.
              </p>
              <p>
                Instead of treating document understanding as a single
                generative step, our system separates layout analysis from
                language modeling. Documents are normalized into structured
                representations that preserve hierarchy and tables before schema
                mapping occurs. Extraction is constrained by schemas defined
                ahead of time, and extracted values are tied back to source
                locations so uncertainty can be inspected rather than guessed
                away. In practice, this results in a hybrid approach that
                combines traditional computer vision techniques, layout models,
                and vision language models, because no single approach handles
                these cases reliably on its own.
              </p>
              <p>
                We are intentionally sharing a few documents that reflect the
                types of inputs that motivated this work. These are
                representative of cases where we saw generic OCR or VLM-based
                pipelines struggle.
              </p>
              <p>
                Here is a financial 10K:
                <a
                  href="https://platform.runpulse.com/dashboard/examples/example1"
                  >https://platform.runpulse.com/dashboard/examples/example1</a
                >
              </p>
              <p>
                Here is a newspaper:
                <a
                  href="https://platform.runpulse.com/dashboard/examples/example2"
                  >https://platform.runpulse.com/dashboard/examples/example2</a
                >
              </p>
              <p>
                Here is a rent roll:
                <a
                  href="https://platform.runpulse.com/dashboard/examples/example3"
                  >https://platform.runpulse.com/dashboard/examples/example3</a
                >
              </p>
              <p>
                Pulse is not perfect, particularly on highly degraded scans or
                uncommon handwriting, and we’re working on improvements.
                However, our goal is not to eliminate errors entirely, but to
                make them visible, auditable, and easier to reason about.
              </p>
              <p>
                Pulse is available via usage-based access to the API and
                platform You can sign up to try it at
                <a href="https://platform.runpulse.com/login"
                  >https://platform.runpulse.com/login</a
                >. API docs are at
                <a href="https://docs.runpulse.com/introduction"
                  >https://docs.runpulse.com/introduction</a
                >.
              </p>
              <p>
                We’d love to hear how others here evaluate correctness for
                document extraction, which failure modes you have seen in
                practice, and what signals you rely on to decide whether an
                output can be trusted.
              </p>
              <p>
                We will be around to answer questions and are happy to run
                additional documents if people want to share examples. Put links
                in the comments and we’ll plug them in and get back to you.
              </p>
              <p>Looking forward to your comments!</p>
            </div>
          </section>
        </section>
        <section id="46313899">
          <h3>
            <a
              class="item"
              href="https://scottsantens.substack.com/p/finland-basic-income-experiment-mental-health-ubi"
              >Finland gave two groups identical payments – one saw better
              mental health</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 15:34:11</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46313899"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46313518">
          <h3>
            <a
              class="item"
              href="https://theredline.versionstory.com/p/on-the-immortality-of-microsoft-word"
              >The immortality of Microsoft Word</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 15:11:06</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46313518"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46313297">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2025/Dec/18/code-proven-to-work/"
              >Your job is to deliver code you have proven to work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 14:52:11</span
              ><span class="points-container"
                >Points: <span class="points">484</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46313297"
                  >Comments</a
                ><span class="descendants">: 406</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46313061">
          <h3>
            <a
              class="item"
              href="https://daringfireball.net/linked/2025/12/17/are-apple-gift-cards-safe-to-redeem"
              >Are Apple gift cards safe to redeem?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 14:26:57</span
              ><span class="points-container"
                >Points: <span class="points">458</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46313061"
                  >Comments</a
                ><span class="descendants">: 371</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46312792">
          <h3>
            <a
              class="item"
              href="https://www.ubicloud.com/blog/virtualizing-nvidia-hgx-b200-gpus-with-open-source"
              >Virtualizing Nvidia HGX B200 GPUs with Open Source</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 14:04:03</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46312792"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46311856">
          <h3>
            <a
              class="item"
              href="https://worksinprogress.co/issue/were-classical-statues-painted-horribly/"
              >Classical statues were not painted horribly</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 12:28:45</span
              ><span class="points-container"
                >Points: <span class="points">452</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46311856"
                  >Comments</a
                ><span class="descendants">: 224</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46311637">
          <h3>
            <a class="item" href="https://hightouch.com/careers"
              >Hightouch (YC S19) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 12:01:01</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46309359">
          <h3>
            <a
              class="item"
              href="https://vitalik.eth.limo/general/2025/12/17/societies.html"
              >Let a thousand societies bloom</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 06:00:28</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46309359"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46308748">
          <h3>
            <a class="item" href="https://taggart-tech.com/ringspace/"
              >Ringspace: A proposal for the human web</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-18 @ 03:50:40</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46308748"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46303406">
          <h3>
            <a class="item" href="https://mjg59.dreamwidth.org/73777.html"
              >How did IRC ping timeouts end up in a lawsuit?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-17 @ 18:25:29</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46303406"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46294456">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/news/845400/texas-tv-makers-lawsuit-samsung-sony-lg-hisense-tcl-spying"
              >Texas is suing all of the big TV makers for spying on what you
              watch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-16 @ 21:04:54</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46294456"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46294254">
          <h3>
            <a
              class="item"
              href="https://www.tomshardware.com/tech-industry/artificial-intelligence/dual-pcb-linux-computer-with-843-components-designed-by-ai-boots-on-first-attempt-project-speedrun-was-made-in-just-one-week-and-required-less-than-40-hours-of-human-work"
              >Linux computer designed with AI boots on first attempt</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-16 @ 20:50:13</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46294254"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.quilter.ai/project-speedrun"
                >https://www.quilter.ai/project-speedrun</a
              >
            </div>
          </section>
        </section>
        <section id="46292266">
          <h3>
            <a class="item" href="https://ai.meta.com/samaudio/"
              >Meta Segment Anything Model Audio</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-16 @ 18:26:43</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46292266"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46269625">
          <h3>
            <a
              class="item"
              href="https://www.htmhell.dev/adventcalendar/2025/13/"
              >Hell is other people's markup</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-15 @ 02:13:59</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46269625"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46262031">
          <h3>
            <a class="item" href="https://github.com/danja/dogalog"
              >Dogalog: A realtime Prolog-based livecoding music environment</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-14 @ 10:08:42</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46262031"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46255766">
          <h3>
            <a class="item" href="https://benr.build/blog/one-agent-isnt-enough"
              >One agent isn't enough</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-13 @ 16:31:45</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46255766"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46240855">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gaming/2025/12/jonathan-blow-has-spent-the-past-decade-designing-1400-puzzles-for-you/"
              >Jonathan Blow has spent the past decade designing 1,400
              puzzles</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-12 @ 04:24:34</span
              ><span class="points-container"
                >Points: <span class="points">302</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46240855"
                  >Comments</a
                ><span class="descendants">: 432</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
