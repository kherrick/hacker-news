<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44029142">
          <h3>
            <a class="item" href="https://github.com/clawsoftware/clawPDF"
              >ClawPDF – Open-Source Virtual/Network PDF Printer with OCR and
              Image Support</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 12:31:33</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44029142"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44028587">
          <h3>
            <a
              class="item"
              href="https://www.bbc.co.uk/news/articles/cgr5g4pv2l0o"
              >'Significant amount' of private data stolen in UK Legal Aid
              hack</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 11:21:59</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44028587"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44028483">
          <h3>
            <a class="item" href="https://last9.io/blog/node-js-key-metrics/"
              >Monitoring Node.js: Key Metrics You Should Track</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 11:06:59</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44028483"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44028435">
          <h3>
            <a
              class="item"
              href="https://etymology.substack.com/p/youre-literally-worshipping-your"
              >How scrolling becomes a religious act</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 11:00:25</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44028435"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44028384">
          <h3>
            <a class="item" href="https://www.datagubbe.se/winter/"
              >Is Winter Coming? (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 10:50:40</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44028384"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44028250">
          <h3>
            <a
              class="item"
              href="https://chipsandcheese.com/p/telum-ii-at-hot-chips-2024-mainframe-with-a-unique-caching-strategy"
              >Telum II at Hot Chips 2024: Mainframe with a Unique Caching
              Strategy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 10:27:34</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44028250"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44028153">
          <h3>
            <a
              class="item"
              href="https://vitonsky.net/blog/2025/05/17/language-detection/"
              >Don't Guess My Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 10:12:53</span
              ><span class="points-container"
                >Points: <span class="points">306</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44028153"
                  >Comments</a
                ><span class="descendants">: 171</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44027867">
          <h3>
            <a class="item" href="https://naeemnur.com/side-projects/"
              >Side projects I've built since 2009</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 09:17:20</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44027867"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44027768">
          <h3>
            <a
              class="item"
              href="https://martypc.blogspot.com/2025/05/emulator-debugging-area-5150s-lake.html"
              >Emulator Debugging: Area 5150's Lake Effect</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 08:55:24</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44027768"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44027379">
          <h3>
            <a
              class="item"
              href="https://www.awanderingmind.blog/posts/2025-05-18-what-does-the-end-of-mathematics-look-like.html"
              >What does the end of mathematics look like?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 07:40:24</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44027379"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44026799">
          <h3>
            <a class="item" href="https://github.com/aspizu/goboscript"
              >Show HN: Goboscript, text-based programming language, compiles to
              Scratch</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 05:51:02</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44026799"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
            <div class="text">
              <p>
                goboscript allows you to create advanced Scratch projects with
                ease, you can use any text editor, use a version control system
                such as git. You can refactor your code using search and
                replace. Text code can be copy pasted, which allows you to
                easily reuse code or share it with others. goboscript syntax is
                concise and easy to read.
              </p>
              <p>
                goboscript allows you to integrate external tooling and
                workflows, such as using a script to generate costumes for a
                text rendering engine. Or loading in images into lists.
              </p>
              <p>
                goboscript has a powerful macro system - similar to Rust's macro
                system. This allows you to write macros to generate code.
              </p>
              <p>
                goboscript is more than just an 1:1 mapping of Scratch blocks to
                text, it also has additional features like local variables for
                procedures (custom blocks).
              </p>
              <p>
                goboscript also performs optimizations, detects problems and
                unused code.
              </p>
            </div>
          </section>
        </section>
        <section id="44026201">
          <h3>
            <a
              class="item"
              href="https://ebellani.github.io/blog/2025/the-principles-of-database-design-or-the-truth-is-out-there/"
              >The principles of database design, or, the Truth is out there</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 02:58:27</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44026201"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44025484">
          <h3>
            <a class="item" href="https://www.remoteswe.fyi"
              >Show HN: Job board aggregator for best paying remote SWE jobs in
              the U.S.</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 00:38:34</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44025484"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
            <div class="text">
              <p>
                So I put together a centralized job board aggregator that lists
                the best paying SWE jobs in one place, starting with the U.S.
                and 14 companies. The way it works is via a cron job that runs
                daily in the afternoon to pull the latest job postings from each
                company and updates the website with the new listings.
              </p>
              <p>Some other key features are</p>
              <p>
                1. Quickly see which companies are actively hiring, e.g.
                Coinbase currently has the most openings
              </p>
              <p>
                2. Filter by years of experience or companies to find suitable
                matches
              </p>
              <p>3. Easily see estimated salary and posted date</p>
              <p>
                If you're also on the hunt for the next remote SWE role, I hope
                this site helps streamline your job search and would appreciate
                any feedback and suggestions. Thanks!
              </p>
              <p>
                Home page:
                <a href="https://www.remoteswe.fyi"
                  >https://www.remoteswe.fyi</a
                >
              </p>
              <p>
                FAQ page with additional context:
                <a href="https://www.remoteswe.fyi/faq"
                  >https://www.remoteswe.fyi/faq</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44025439">
          <h3>
            <a
              class="item"
              href="https://worldhistory.substack.com/p/there-are-people-who-can-see-and"
              >“There are people who can see and others who cannot even look”</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-19 @ 00:31:34</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44025439"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44024784">
          <h3>
            <a
              class="item"
              href="https://www.neowin.net/news/kde-is-finally-getting-a-native-virtual-machine-manager-called-karton/"
              >KDE is finally getting a native virtual machine manager called
              “Karton”</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 22:33:16</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44024784"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44024759">
          <h3>
            <a
              class="item"
              href="https://social.numerique.gouv.fr/@codegouvfr/114529954373492878"
              >France Endorses UN Open Source Principles</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 22:27:07</span
              ><span class="points-container"
                >Points: <span class="points">529</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44024759"
                  >Comments</a
                ><span class="descendants">: 173</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44023634">
          <h3>
            <a class="item" href="https://github.com/Blackmamoth/sshsync"
              >Show HN: Sshsync – CLI tool to run shell commands across multiple
              remote servers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 19:10:29</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44023634"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
            <div class="text">
              <p>
                It was inspired by tools like `pssh`, but I wanted something
                more modern, intuitive, and Pythonic.
              </p>
              <p>What it does:</p>
              <p>
                - Run shell commands on multiple servers (in parallel) -
                Push/pull files or directories with progress bars - Uses
                `~/.ssh/config` and lets you group hosts with YAML - Supports
                `--dry-run` mode to preview actions without executing - Outputs
                results using `rich` (tables, colors) - Built with `Typer`,
                `asyncssh`, and `rich`
              </p>
              <p>
                There’s no daemon or extra setup, it reads your existing SSH
                config and just runs.
              </p>
              <p>
                Would love feedback on general use and especially if there are
                ways to improve the `--dry-run` output.
              </p>
            </div>
          </section>
        </section>
        <section id="44022758">
          <h3>
            <a
              class="item"
              href="https://sifter.org/~simon/journal/20240718.html"
              >$30 Homebrew Automated Blinds Opener (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 17:05:56</span
              ><span class="points-container"
                >Points: <span class="points">286</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44022758"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44022448">
          <h3>
            <a
              class="item"
              href="https://amberwilliams.io/blogs/building-my-own-pkms"
              >Ditching Obsidian and building my own</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 16:21:50</span
              ><span class="points-container"
                >Points: <span class="points">373</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44022448"
                  >Comments</a
                ><span class="descendants">: 432</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44022353">
          <h3>
            <a
              class="item"
              href="https://github.com/brianmg/voynich-nlp-analysis"
              >Show HN: I modeled the Voynich Manuscript with SBERT to test for
              structure</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 16:09:01</span
              ><span class="points-container"
                >Points: <span class="points">354</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44022353"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
            <div class="text">
              <p>
                The Voynich Manuscript is a 15th-century book written in an
                unknown script. No one’s been able to translate it, and many
                think it’s a hoax, a cipher, or a constructed language. I wasn’t
                trying to decode it — I just wanted to see: does it behave like
                a structured language?
              </p>
              <p>
                I stripped a handful of common suffix-like endings (aiin, dy,
                etc.) to isolate what looked like root forms. I know that’s a
                strong assumption — I call it out directly in the repo — but it
                helped clarify the clustering. From there, I used SBERT
                embeddings and KMeans to group similar roots, inferred POS-like
                roles based on position and frequency, and built a Markov
                transition matrix to visualize cluster-to-cluster flow.
              </p>
              <p>
                It’s not translation. It’s not decryption. It’s structural
                modeling — and it revealed some surprisingly consistent syntax
                across the manuscript, especially when broken out by section
                (Botanical, Biological, etc.).
              </p>
              <p>
                GitHub repo:
                <a href="https://github.com/brianmg/voynich-nlp-analysis"
                  >https://github.com/brianmg/voynich-nlp-analysis</a
                >
                Write-up:
                <a
                  href="https://brig90.substack.com/p/modeling-the-voynich-manuscript-with?r=3z5dn9"
                  >https://brig90.substack.com/p/modeling-the-voynich-manuscrip...</a
                >
              </p>
              <p>
                I’m new to the NLP space, so I’m sure there are things I got
                wrong — but I’d love feedback from people who’ve worked with
                structured language modeling or weird edge cases like this.
              </p>
            </div>
          </section>
        </section>
        <section id="44022225">
          <h3>
            <a
              class="item"
              href="https://notes.andymatuschak.org/Spaced_repetition_memory_system"
              >Spaced repetition memory system (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 15:48:57</span
              ><span class="points-container"
                >Points: <span class="points">243</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44022225"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44022215">
          <h3>
            <a
              class="item"
              href="https://old.reddit.com/r/AskReddit/comments/2s9u0s/comment/cnnmca8/"
              >What do wealthy people buy, that ordinary people know nothing
              about? (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 15:47:53</span
              ><span class="points-container"
                >Points: <span class="points">269</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44022215"
                  >Comments</a
                ><span class="descendants">: 501</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44020832">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2025/05/12/inventwood-is-about-to-mass-produce-wood-thats-stronger-than-steel/"
              >InventWood is about to mass-produce wood that's stronger than
              steel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 12:22:39</span
              ><span class="points-container"
                >Points: <span class="points">214</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44020832"
                  >Comments</a
                ><span class="descendants">: 203</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44013868">
          <h3>
            <a
              class="item"
              href="https://jordanwtaylor2.substack.com/p/ugly-infrastructure-why-cant-we-have"
              >Ugly infrastructure: Why can't we have nice things?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-17 @ 12:41:11</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44013868"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44012418">
          <h3>
            <a
              class="item"
              href="https://www.cse.chalmers.se/research/group/logic/book/"
              >Programming in Martin-Lof's Type Theory: An Introduction
              (1990)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-17 @ 06:30:59</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44012418"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44012283">
          <h3>
            <a
              class="item"
              href="https://www.neowin.net/news/this-printer-company-served-you-malware-for-months-and-dismissed-it-as-false-positives/"
              >Procolored printer drivers contained malware</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-17 @ 05:44:50</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44012283"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44010096">
          <h3>
            <a
              class="item"
              href="https://robhorning.substack.com/p/font-activations"
              >Font Activations: A Note on the Type</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 21:52:52</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44010096"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43996515">
          <h3>
            <a class="item" href="https://github.com/habedi/cogitator"
              >Show HN: Cogitator – A Python Toolkit for Chain-of-Thought
              Prompting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 16:15:47</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43996515"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <p>
                I made an open-source Python toolkit/library, named Cogitator,
                to make it easier to try and use different chain-of-thought
                (CoT) reasoning methods. The project is at the beta stage, but
                it supports using models provided by OpenAI and Ollama. It
                includes implementations for Cot strategies and frameworks like
                Self-Consistency, Tree of Thoughts, and Graph of Thoughts.
              </p>
              <p>
                GitHub link of the project:
                <a href="https://github.com/habedi/cogitator"
                  >https://github.com/habedi/cogitator</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43995067">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-05-reveals-strongest-solar-event-bc.html"
              >New research reveals the strongest solar event ever detected, in
              12350 BC</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 13:48:46</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43995067"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43993311">
          <h3>
            <a
              class="item"
              href="https://blog.briankitano.com/llama-from-scratch/"
              >Llama from scratch (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-15 @ 09:34:28</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43993311"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
