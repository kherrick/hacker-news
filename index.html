<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46801225">
          <h3>
            <a
              class="item"
              href="https://lwlies.com/article/werner-herzog-penguin-encounters-at-the-end-of-the-world"
              >What does Werner Herzog's nihilist penguin teach us about
              life?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 20:43:10</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46801225"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46800737">
          <h3>
            <a class="item" href="https://linuxmusic.rocks"
              >Native Linux VST plugin directory</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 19:59:04</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46800737"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46800730">
          <h3>
            <a
              class="item"
              href="https://www.atlaspress.co/p/new-books-arent-worth-reading"
              >New books aren't worth reading?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 19:58:30</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46800730"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46800645">
          <h3>
            <a
              class="item"
              href="https://www.engadget.com/audio/native-instruments-enters-into-insolvency-proceedings-leaving-its-future-uncertain-183206826.html"
              >Native Instruments enters into insolvency proceedings</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 19:51:05</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46800645"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46800623">
          <h3>
            <a
              class="item"
              href="https://www.popularmechanics.com/science/a70162364/setting-the-doomsday-clock/"
              >Who sets the Doomsday Clock?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 19:48:59</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46800623"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46800484">
          <h3>
            <a class="item" href="https://github.com/chebykinn/browser-code"
              >Show HN: Cursor for Userscripts</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 19:39:31</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46800484"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                At a high level, the agent generates and maintains userscripts
                and CSS that are re-applied on page load. Rather than just
                editing DOM via JS in console the agent is treating the page,
                and the DOM as a file.
              </p>
              <p>
                The models are often trained in RL sandboxes with full access to
                the filesystem and bash, so they are really good at using it. So
                to make the agent behave well, I've simulated this environment.
              </p>
              <p>
                The whole state of a page and scripts is implemented as a
                virtual filesystem hacked on top of browser.local storage. URL
                is mapped to directories, and the agent starts inside this
                directory. It has the tools to read/edit files, grep around and
                a fake bash command that is just used for running scripts and
                executing JS code.
              </p>
              <p>
                I've tested only with Opus 4.5 so far, and it works pretty
                reliably. The state of the file system can be synced to the real
                filesystem, although because Firefox doesn't support Filesystem
                API, you need to manually import the fs contents first.
              </p>
              <p>
                This agent is <i>really</i> useful for extracting things to CSV,
                but it's also can be used for fun.
              </p>
              <p>
                Demo:
                <a href="https://x.com/ichebykin/status/2015686974439608607"
                  >https://x.com/ichebykin/status/2015686974439608607</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="46799477">
          <h3>
            <a class="item" href="https://lmstudio.ai/blog/0.4.0"
              >LM Studio 0.4.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 18:23:14</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46799477"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46799304">
          <h3>
            <a
              class="item"
              href="https://danq.me/2026/01/28/hsbc-dont-understand-email/"
              >That's not how email works</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 18:12:02</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46799304"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46798994">
          <h3>
            <a
              class="item"
              href="https://computerhistory.org/press-releases/computer-history-museum-launches-digital-portal-to-its-vast-collection/"
              >Computer History Museum Launches Digital Portal to Its
              Collection</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 17:54:54</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46798994"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46798402">
          <h3>
            <a class="item" href="https://github.com/ratatui/mousefood"
              >Mousefood – Build embedded terminal UIs for microcontrollers</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 17:20:31</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46798402"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46797913">
          <h3>
            <a class="item" href="https://amazonone.aws.com/help"
              >Amazon One palm authentication discontinued</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 16:52:05</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46797913"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46797868">
          <h3>
            <a
              class="item"
              href="https://www.siliceum.com/en/blog/post/spinning-around/"
              >Spinning around: Please don't – Common problems with spin
              locks</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 16:48:59</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46797868"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46797865">
          <h3>
            <a
              class="item"
              href="https://writings.stephenwolfram.com/2023/03/will-ais-take-all-our-jobs-and-end-human-history-or-not-well-its-complicated/"
              >Will AIs take all our jobs and end human history, or not?
              (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 16:48:48</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46797865"
                  >Comments</a
                ><span class="descendants">: 102</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46797594">
          <h3>
            <a class="item" href="https://www.dimamik.com/posts/oban_py/"
              >Oban, the job processing framework from Elixir, has come to
              Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 16:32:00</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46797594"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46796745">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/legal/litigation/amazon-cuts-16000-jobs-globally-broader-restructuring-2026-01-28/"
              >Amazon cuts 16k jobs</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 15:39:11</span
              ><span class="points-container"
                >Points: <span class="points">375</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46796745"
                  >Comments</a
                ><span class="descendants">: 496</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46795908">
          <h3>
            <a class="item" href="https://ciechanow.ski/airfoil/"
              >Airfoil (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 14:32:30</span
              ><span class="points-container"
                >Points: <span class="points">286</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46795908"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46795864">
          <h3>
            <a
              class="item"
              href="https://www.himthe.dev/blog/microsoft-to-linux"
              >Microsoft forced me to switch to Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 14:28:21</span
              ><span class="points-container"
                >Points: <span class="points">1382</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46795864"
                  >Comments</a
                ><span class="descendants">: 1088</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46794472">
          <h3>
            <a
              class="item"
              href="https://www.theatlantic.com/economy/2026/01/california-wealth-tax-billionaire-migration/685779/"
              >If you tax them, will they leave?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 12:30:02</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46794472"
                  >Comments</a
                ><span class="descendants">: 175</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46794281">
          <h3>
            <a class="item" href="https://github.com/rafa-rrayes/SHDL"
              >Show HN: SHDL – A minimal hardware description language built
              from logic gates</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 12:06:18</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46794281"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built SHDL (Simple Hardware Description Language) as an
                experiment in stripping hardware description down to its
                absolute fundamentals.
              </p>
              <p>
                In SHDL, there are no arithmetic operators, no implicit bit
                widths, and no high-level constructs. You build everything
                explicitly from logic gates and wires, and then compose larger
                components hierarchically. The goal is not synthesis or
                performance, but understanding: what digital systems actually
                look like when abstractions are removed.
              </p>
              <p>
                SHDL is accompanied by PySHDL, a Python interface that lets you
                load circuits, poke inputs, step the simulation, and observe
                outputs. Under the hood, SHDL compiles circuits to C for fast
                execution, but the language itself remains intentionally small
                and transparent.
              </p>
              <p>
                This is not meant to replace Verilog or VHDL. It’s aimed at: -
                learning digital logic from first principles - experimenting
                with HDL and language design - teaching or visualizing how
                complex hardware emerges from simple gates.
              </p>
              <p>
                I would especially appreciate feedback on: - the language design
                choices - what feels unnecessarily restrictive vs. educationally
                valuable - whether this kind of “anti-abstraction” HDL is useful
                to you.
              </p>
              <p>
                Repo:
                <a href="https://github.com/rafa-rrayes/SHDL"
                  >https://github.com/rafa-rrayes/SHDL</a
                >
              </p>
              <p>Python package: PySHDL on PyPI</p>
              <p>
                To make this concrete, here are a few small working examples
                written in SHDL:
              </p>
              <p>1. Full Adder</p>
              <p>component FullAdder(A, B, Cin) -&gt; (Sum, Cout) {</p>
              <p></p>
              <pre><code>    x1: XOR; a1: AND;
    x2: XOR; a2: AND;
    o1: OR;

    connect {
        A -&gt; x1.A; B -&gt; x1.B;
        A -&gt; a1.A; B -&gt; a1.B;

        x1.O -&gt; x2.A; Cin -&gt; x2.B;
        x1.O -&gt; a2.A; Cin -&gt; a2.B;
        a1.O -&gt; o1.A; a2.O -&gt; o1.B;

        x2.O -&gt; Sum; o1.O -&gt; Cout;
    }</code></pre>
              }
              <p>2. 16 bit register</p>
              <p># clk must be high for two cycles to store a value</p>
              <p>component Register16(In[16], clk) -&gt; (Out[16]) {</p>
              <p></p>
              <pre><code>    &gt;i[16]{
        a1{i}: AND;
        a2{i}: AND;
        not1{i}: NOT;
        nor1{i}: NOR;
        nor2{i}: NOR;
    }
    
    connect {
        &gt;i[16]{
            # Capture on clk
            In[{i}] -&gt; a1{i}.A;
            In[{i}] -&gt; not1{i}.A;
            not1{i}.O -&gt; a2{i}.A;
            
            clk -&gt; a1{i}.B;
            clk -&gt; a2{i}.B;
            
            a1{i}.O -&gt; nor1{i}.A;
            a2{i}.O -&gt; nor2{i}.A;
            nor1{i}.O -&gt; nor2{i}.B;
            nor2{i}.O -&gt; nor1{i}.B;
            nor2{i}.O -&gt; Out[{i}];
        }
    }</code></pre>
              }
              <p>3. 16-bit Ripple-Carry Adder</p>
              <p>use fullAdder::{FullAdder};</p>
              <p>
                component Adder16(A[16], B[16], Cin) -&gt; (Sum[16], Cout) {
              </p>
              <p></p>
              <pre><code>    &gt;i[16]{ fa{i}: FullAdder; }

    connect {
        A[1] -&gt; fa1.A;
        B[1] -&gt; fa1.B;
        Cin -&gt; fa1.Cin;
        fa1.Sum -&gt; Sum[1];

        &gt;i[2,16]{
            A[{i}] -&gt; fa{i}.A;
            B[{i}] -&gt; fa{i}.B;
            fa{i-1}.Cout -&gt; fa{i}.Cin;
            fa{i}.Sum -&gt; Sum[{i}];
        }

        fa16.Cout -&gt; Cout;
    }
}</code></pre>
            </div>
          </section>
        </section>
        <section id="46794231">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/kyber/jobs/GPJkv5v-staff-engineer-tech-lead"
              >Kyber (YC W23) Is Hiring a Staff Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 12:00:08</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46793693">
          <h3>
            <a class="item" href="https://andrewgy8.github.io/hnarcade/"
              >Show HN: The HN Arcade</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 10:50:32</span
              ><span class="points-container"
                >Points: <span class="points">269</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46793693"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
            <div class="text">
              <p>
                I don't want to forget any, so I have built a directory/arcade
                for the games here that I maintain.
              </p>
              <p>
                Feel free to check it out, add your game if its missing and let
                me know what you think. Thanks!
              </p>
            </div>
          </section>
        </section>
        <section id="46792194">
          <h3>
            <a
              class="item"
              href="https://matklad.github.io/2026/01/27/make-ts.html"
              >Make.ts</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 07:35:51</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46792194"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46790740">
          <h3>
            <a
              class="item"
              href="https://9to5google.com/2026/01/27/android-desktop-leak/"
              >Android's desktop interface leaks</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-28 @ 03:34:45</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46790740"
                  >Comments</a
                ><span class="descendants">: 166</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46788384">
          <h3>
            <a
              class="item"
              href="https://jvns.ca/blog/2026/01/27/some-notes-on-starting-to-use-django/"
              >Some notes on starting to use Django</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-27 @ 22:58:30</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46788384"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46765772">
          <h3>
            <a class="item" href="https://github.com/robitec97/gemma3.c"
              >I have written gemma3 inference in pure C</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-26 @ 14:05:46</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46765772"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46744272">
          <h3>
            <a
              class="item"
              href="https://hessammehr.github.io/blog/posts/2025-12-24-maths-to-lampshade.html"
              >3D-Printed Mathematical Lampshades</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 15:17:11</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46744272"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46739704">
          <h3>
            <a class="item" href="https://github.com/saysjonathan/dwm.tmux"
              >Show HN: Dwm.tmux – a dwm-inspired window manager for tmux</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-24 @ 00:15:20</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46739704"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've continued to use this as my primary terminal "window
                manager" and wanted to share in case others might find it
                useful.
              </p>
              <p>
                I would love to hear about other's terminal-based workflows and
                any other tools you may use with similar functionality.
              </p>
            </div>
          </section>
        </section>
        <section id="46739117">
          <h3>
            <a
              class="item"
              href="https://www.danshapiro.com/blog/2026/01/the-five-levels-from-spicy-autocomplete-to-the-software-factory/"
              >The Five Levels: From Spicy Autocomplete to the Software
              Factory</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 22:55:00</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46739117"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46735407">
          <h3>
            <a
              class="item"
              href="https://www.fastcompany.com/91477114/steve-wozniak-woz-apple-the-tech-interactive-humanitarian-award"
              >There's only one Woz, but we can all learn from him</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 17:48:25</span
              ><span class="points-container"
                >Points: <span class="points">296</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46735407"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46728070">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=Wp5NodfvvF4"
              >I Overengineered a Spinning Top</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-01-23 @ 03:32:26</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46728070"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
