<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42055312">
          <h3>
            <a
              class="item"
              href="https://www.sciencealert.com/the-us-navy-put-cameras-on-dolphins-and-the-results-were-wild"
              >The US Navy Put Cameras on Dolphins and the Results Were Wild</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 21:26:45</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42055312"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42054904">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2024-11-05/polymarket-paid-us-social-media-influencers-for-election-content"
              >Polymarket Paid US Social Media Influencers for Election
              Content</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 20:33:29</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054904"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42054813">
          <h3>
            <a
              class="item"
              href="https://thenewstack.io/why-companies-are-ditching-the-cloud-the-rise-of-cloud-repatriation/"
              >Why Companies Are Ditching the Cloud: The Rise of Cloud
              Repatriation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 20:19:13</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054813"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42054791">
          <h3>
            <a
              class="item"
              href="https://www.torquenews.com/1084/fisker-evs-hired-it-spy-who-funneled-millions-north-koreas-missile-program-case-fbi"
              >Fisker EVs Hired an IT Spy Who Funneled Millions to N. Korea's
              Missile Program</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 20:16:40</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054791"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42054779">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/nstc"
              >U.S. Chip Revival Plan Chooses Sites</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 20:14:02</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054779"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42054569">
          <h3>
            <a
              class="item"
              href="https://www.centauri-dreams.org/2024/11/05/vegas-puzzling-disk/"
              >Vega's Puzzling Disk</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 19:43:34</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054569"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42054449">
          <h3>
            <a
              class="item"
              href="https://www.tomshardware.com/pc-components/cpus/for-the-first-time-ever-amd-outsells-intel-in-the-datacenter-space"
              >First time ever, AMD outsells Intel in the datacenter space</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 19:27:15</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054449"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42054186">
          <h3>
            <a
              class="item"
              href="https://github.com/Tencent/Tencent-Hunyuan-Large"
              >Tencent Hunyuan-Large</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 18:52:09</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054186"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42054162">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/a-list-of-ternary-operators/"
              >A List of Ternary Operators</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 18:49:01</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054162"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42054144">
          <h3>
            <a class="item" href="https://reducto.ai/blog/rd-tablebench"
              >Rd-TableBench – Accurately evaluating table extraction</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 18:46:31</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054144"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                A ton of document parsing solutions have been coming out lately,
                each claiming SOTA with little evidence. A lot of these turned
                out to be LLM or LVM wrappers that hallucinate frequently on
                complex tables.
              </p>
              <p>
                We just released RD-TableBench, an open benchmark to help teams
                evaluate extraction performance for complex tables. The
                benchmark includes a variety of challenging scenarios including
                scanned tables, handwriting, language detection, merged cells,
                and more.
              </p>
              <p>
                We employed an independent team of PhD-level human labelers who
                manually annotated 1000 complex table images from a diverse set
                of publicly available documents.
              </p>
              <p>
                Alongside this, we also release a new bioinformatics inspired
                algorithm for grading table similarity. Would love to hear any
                feedback!
              </p>
              <p>-Raunak</p>
            </div>
          </section>
        </section>
        <section id="42054013">
          <h3>
            <a
              class="item"
              href="https://www.startribune.com/check-this-minnesota-map-to-find-out-if-your-homes-drinking-water-comes-through-a-lead-pipe/601174459"
              >Minnesota map to find out if your home's drinking water comes
              through lead pipe</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 18:31:34</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42054013"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42053747">
          <h3>
            <a class="item" href="https://github.com/fortress-build/whirlwind"
              >Show HN: Whirlwind – Async concurrent hashmap for Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 18:02:18</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42053747"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=41426998"
                >https://news.ycombinator.com/item?id=41426998</a
              >).
              <p>
                We use a lot of async Rust internally, and created this library
                out of a need for an async-aware concurrent hashmap since there
                weren’t many available in the Rust ecosystem.
              </p>
              <p>
                Whirlwind is a sharded HashMap with a fully asynchronous API.
                Just as dashmap is a replacement for
                std::sync::RwLock&lt;HashMap&gt;, whirlwind aims to be a
                replacement for tokio::sync::RwLock&lt;HashMap&gt;. It has a
                similar design and performance characteristics to dashmap, but
                seems to perform better in read-heavy workloads with tokio's
                green threading.
              </p>
              <p>
                Benchmarks are in the readme! We used an asyncified version of
                dashmap's benchmark suite. The project is in a pretty early
                stage and I'm sure there are flaws, but I'm pretty happy with
                the performance.
              </p>
              <p>
                There is some unsafe involved, but we run Miri in ci to
                (hopefully) catch undefined behavior well before it's in an
                actual release.
              </p>
              <p>We'd appreciate any feedback! Thanks in advance :)</p>
            </div>
          </section>
        </section>
        <section id="42053043">
          <h3>
            <a
              class="item"
              href="https://www.pnas.org/doi/10.1073/pnas.2413514121"
              >Soft matter mechanics of baseball's Rubbing Mud</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 16:46:41</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42053043"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42052432">
          <h3>
            <a class="item" href="https://github.com/gregpr07/browser-use"
              >Show HN: I wrote an open-source browser alternative for Computer
              Use for any LLM</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 15:51:43</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42052432"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
            <div class="text">
              <p>
                I made Browser-Use, an open-source tool that lets (all Langchain
                supported) LLMs execute tasks directly in the browser just with
                function calling.
              </p>
              <p>
                It allows you to build agents that interact with web elements
                using natural language prompts. We created a layer that
                simplifies website interaction for LLMs by extracting xPaths and
                interactive elements like buttons and input fields (and other
                fancy things). This enables you to design custom web automation
                and scraping functions without manual inspection through
                DevTools.
              </p>
              <p>
                Hasn't this been done a lot of times? Good question, as a
                general SaaS tool yes, but I think a lot of people are going to
                try to make their own web automation agents from scratch, so the
                idea is to provide groundwork/library for the hard part so that
                not everyone has to repeat these steps:
              </p>
              <p>
                - parse html in a LLM friendly way (clickable items +
                screenshots)
              </p>
              <p>
                - provide a nice function calls for everything inside the
                browser
              </p>
              <p>- create reusable agent classes</p>
              <p>
                What this is NOT? An all knowing AI agent that can solve all
                your problems.
              </p>
              <p>
                The vision: create repeatable tasks on the web just by prompting
                your agent and not care about the hows.
              </p>
              <p>
                To better showcase the power of text extraction we made a few
                demos such as:
              </p>
              <p>
                - Applying for multiple software engineering jobs in San
                Francisco
              </p>
              <p>
                - Opening new tabs to search for images of Albert Einstein,
                Oprah Winfrey, and Steve Jobs
              </p>
              <p>
                - Finding the cheapest one-way flight from London to Kyrgyzstan
                for December 25th
              </p>
              <p>
                I’d be interested in feedback on how this tool fits into your
                automation workflows. Try it out and let me know how it performs
                on your end.
              </p>
              <p>We are Gregor &amp; Magnus and we built this in 5 days.</p>
            </div>
          </section>
        </section>
        <section id="42052207">
          <h3>
            <a class="item" href="https://github.com/varse-io/varse"
              >Show HN: Varse – Simple remote application config</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 15:27:03</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42052207"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <p>
                We wanted a simple way to update application configs, without
                redeploying. We wanted to remotely set variables, and read them
                in our application. We created Varse to do this.
              </p>
              <p>
                Varse has a dashboard for creating key - value pairs and an SDK
                to read them. It's un-opinionated and allows for strings,
                booleans, or even json objects to be stored.
              </p>
              <p>
                We have instructions for running it yourself. We also have a
                hosted version where you can create an account and manage
                variables.
              </p>
              <p>
                This is our first time building an open source project. We'd
                love feedback on how to do it right.
              </p>
              <p>
                Github:
                <a href="https://github.com/varse-io/varse"
                  >https://github.com/varse-io/varse</a
                >
              </p>
              <p>
                Hosted Version:
                <a href="https://app.varse.io/signup"
                  >https://app.varse.io/signup</a
                >
              </p>
              <p>
                Website:
                <a href="https://www.varse.io/">https://www.varse.io/</a>
              </p>
              <p>Contact: izak@varse.io</p>
            </div>
          </section>
        </section>
        <section id="42052194">
          <h3>
            <a class="item" href="https://github.com/SelfExplainML/PiML-Toolbox"
              >PiML: Python Interpretable Machine Learning Toolbox</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 15:25:44</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42052194"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42052143">
          <h3>
            <a class="item" href="https://battleda.sh/blog/ea-account-takeover"
              >Hacking 700M Electronic Arts Accounts</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 15:18:34</span
              ><span class="points-container"
                >Points: <span class="points">462</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42052143"
                  >Comments</a
                ><span class="descendants">: 93</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42051968">
          <h3>
            <a class="item" href="https://docs.hackerfab.org/hacker-fab-space"
              >Hacker Fab</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 14:59:15</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42051968"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42051643">
          <h3>
            <a
              class="item"
              href="https://www.bbc.co.uk/news/articles/cwy1vze09wwo"
              >Netflix Europe offices raided in tax fraud probe</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 14:20:49</span
              ><span class="points-container"
                >Points: <span class="points">301</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42051643"
                  >Comments</a
                ><span class="descendants">: 265</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42051607">
          <h3>
            <a
              class="item"
              href="https://www.marginalia.nu/log/a_112_slop_ideas/"
              >Notes on Binary Soup</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 14:15:10</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42051607"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42051452">
          <h3>
            <a
              class="item"
              href="https://literaryreview.co.uk/we-shall-fight-in-the-buttery"
              >We Shall Fight in the Buttery – Oxford's War 1939–1945</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 13:52:31</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42051452"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42051368">
          <h3>
            <a
              class="item"
              href="https://nap.nationalacademies.org/read/26982/chapter/1"
              >Failure Analysis of the Arecibo 305 Meter Telescope Collapse</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 13:37:42</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42051368"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42051231">
          <h3>
            <a
              class="item"
              href="https://igorpak.wordpress.com/2020/12/10/what-if-they-are-all-wrong/"
              >What if they are all wrong? (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 13:13:17</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42051231"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42050862">
          <h3>
            <a class="item" href="https://github.com/darwindarak/rallyup"
              >Show HN: rallyup – Lightweight Wake-on-LAN Scheduler</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-05 @ 12:04:14</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42050862"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’ve wanted a simple solution to handle Wake-on-LAN sequences
                for my home and work labs to boot up servers in the right order.
                I was already dabbling in Rust and thought this would be an
                interesting project to dive deeper and see if it could work well
                for this kind of network tool. The result is rallyup.
              </p>
              <p>
                rallyup lets you set up server dependencies in a YAML file, so
                each service (e.g., firewalls, storage, VM hosts) comes online
                in the right order. It verifies each server’s status before
                moving to the next.
              </p>
              <p>Features:</p>
              <p>
                - Dependency-based WOL with VLAN support - Built-in health
                checks (HTTP, open ports, shell commands) - Lightweight enough
                to run on a Raspberry Pi or similar device
              </p>
              <p>Would love any feedback. Thanks for taking a look!</p>
            </div>
          </section>
        </section>
        <section id="42046953">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-024-03570-4"
              >World’s oldest tree? Genetic analysis traces evolution of iconic
              Pando forest</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-04 @ 22:58:50</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42046953"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42044771">
          <h3>
            <a class="item" href="https://diagrams.mingrammer.com/"
              >Diagram as Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-04 @ 18:46:42</span
              ><span class="points-container"
                >Points: <span class="points">472</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42044771"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42021470">
          <h3>
            <a
              class="item"
              href="https://research.google/blog/scalable-self-improvement-for-compiler-optimization/"
              >Scalable self-improvement for compiler optimization</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-01 @ 20:55:15</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42021470"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42018195">
          <h3>
            <a class="item" href="https://tmpout.sh/2/4.html"
              >Every Boring Problem Found in eBPF (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-01 @ 15:50:56</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42018195"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42012092">
          <h3>
            <a class="item" href="https://oasis-model.github.io/"
              >Oasis: A Universe in a Transformer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-31 @ 22:10:45</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42012092"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42011543">
          <h3>
            <a
              class="item"
              href="https://www.bookforum.com/print/3102/the-lines-they-are-a-changin-61287"
              >The Lines, They Are A-Changin'</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-10-31 @ 21:10:17</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42011543"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
