<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41258628">
          <h3>
            <a
              class="item"
              href="https://www.christies.com/en/stories/gen-one-innovations-from-the-paul-g-allen-collection-1f0df60a726e4dcbabef3a91a57ef7ee"
              >GEN One: Innovations from the Paul G. Allen Collection</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 17:50:27</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41258628"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41258276">
          <h3>
            <a
              class="item"
              href="https://github.com/probably-nothing-labs/denormalized"
              >Show HN: Denormalized – Embeddable Stream Processing in Rust and
              DataFusion</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 17:16:47</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41258276"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/probably-nothing-labs/denormalized"
                >https://github.com/probably-nothing-labs/denormalized</a
              >
              <p>Hey HN,</p>
              <p>
                We’d like to showcase a very early version of our embeddable
                stream processing engine called Denormalized. The rise of DuckDB
                has abundantly made it clear that even for many workloads of
                Terabyte scale, a single node system outshines the distributed
                query engines of previous generation such as Spark, Snowflake
                etc in terms of both performance and cost.
              </p>
              <p>
                Now a lot of workloads DuckDB is used for were normally
                considered to be “big data” in the previous generation, but no
                more. In the context of streaming especially, this problem is
                more acute. A streaming system is designed to incrementally
                process large amounts of data over a period of time. Even on the
                upper end of scale, productionized use-cases of stream
                processing are rarely performing compute on more than tens of
                gigabytes of data at a given time.
              </p>
              <p>
                Even so, the standard stream processing solutions such as Flink
                involve spinning up a distributed JVM cluster to even compute
                against the simplest of event streams. To that end, we’re
                building Denormalized designed to be embeddable in your
                applications and scale up to hundreds of thousands of events per
                second with a Flink-like dataflow API. While we currently only
                support Rust, we have plans for Python and Typescript bindings
                soon.
              </p>
              <p>
                We’re built atop DataFusion and the Arrow ecosystems and
                currently support streaming joins as well as windowed
                aggregations on Kafka topics.
              </p>
              <p>
                Please check out out repo at:
                <a href="https://github.com/probably-nothing-labs/denormalized"
                  >https://github.com/probably-nothing-labs/denormalized</a
                >
              </p>
              <p>We’d love to hear your feedback.</p>
            </div>
          </section>
        </section>
        <section id="41258241">
          <h3>
            <a class="item" href="https://arxiv.org/abs/1011.0014"
              >Galois Theory of Algorithms (2018) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 17:13:34</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41258241"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41258123">
          <h3>
            <a
              class="item"
              href="https://remotejobs.org/companies/rankscience-remote-jobs"
              >RankScience (YC W17) is hiring to supercharge SEO for startups</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 17:01:10</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41257369">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41257369"
              >Launch HN: Hamming (YC S24) – Automated Testing for Voice
              Agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 15:44:53</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41257369"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.hamming.ai">https://www.hamming.ai</a>).
              Hamming lets you automatically test your LLM voice agent. In our
              interactive demo, you play the role of the voice agent, and our
              agent will play the role of a difficult end user. We'll then score
              your performance on the call. Try it here:
              <a href="https://app.hamming.ai/voice-demo"
                >https://app.hamming.ai/voice-demo</a
              >
              (no signup needed). In practice, our agents call your agent!
              <p>
                LLM voice agents currently require a lot of iteration and
                tuning. For example, one of our customers is building an LLM
                drive-through voice agent for fast food chains. Their KPI is
                order accuracy. It's crucial for their system to gracefully
                handle dietary restrictions like allergies and customers who get
                distracted or otherwise change their minds mid-order. Mistakes
                in this context could lead to unhappy customers, potential
                health risks, and financial losses.
              </p>
              <p>
                How do you make sure that such a thing actually works? Most
                teams spend hours calling their voice agent to find bugs, change
                the prompt or function definitions, and then call their voice
                agent again to ensure they fixed the problem and didn't create
                regressions. This is slow, ad hoc, and feels like a waste of
                time. In other areas of software development, automated testing
                has already eliminated this kind of repetitive grunt work — so
                why not here, too?
              </p>
              <p>
                We were initially working on helping users create evals for
                prompts &amp; LLM pipelines for a few months but noticed two
                things:
              </p>
              <p>1) Many of our friends were building LLM voice agents.</p>
              <p>2) They were spending too much time on manual testing.</p>
              <p>
                This gave us evidence that there will be more voice companies in
                the future, and they will need something to make the iteration
                process easier. We decided to build it!
              </p>
              <p>Our solution involves four steps:</p>
              <p>
                (1) Create diverse but realistic user personas and scenarios
                covering the expected conversation space. We create these
                ourselves for each of our customers. Getting LLMs to create
                diverse scenarios even with high temperatures is surprisingly
                tricky. We're learning a lot of tricks along the way to create
                more randomness and more faithful role-play from the folks at
                <a href="https://www.reddit.com/r/LocalLLaMA/"
                  >https://www.reddit.com/r/LocalLLaMA/</a
                >.
              </p>
              <p>
                (2) Have our agents call your agent when we test your agent's
                ability to handle things like background noise, long silences,
                or interruptions. Or have us test just the LLM / logic layer
                (function calls, etc.) via an API hook.
              </p>
              <p>
                (3) We score the outputs for each conversation using
                deterministic checks and LLM judges tailored to the specific
                problem domain (e.g., order accuracy, tone, friendliness). An
                LLM judge reviews the entire conversation transcript (including
                function calls and traces) against predefined success criteria,
                using examples of both good and bad transcripts as references.
                It then provides a classification output and detailed reasoning
                to justify its decisions. Building LLM judges that consistently
                align with human preferences is challenging, but we're improving
                with each judge we manually develop.
              </p>
              <p>
                (4) Re-use the checks and judges above to score production
                traffic and use it to track quality metrics in production.
                (i.e., online evals)
              </p>
              <p>
                We created a Loom recording showing our customers' logged-in
                experience. We cover how you store and manage scenarios, how you
                can trigger an experiment run, and how we score each transcript.
                See the video here:
                <a
                  href="https://www.loom.com/share/839fe585aa1740c0baa4faa33d772d3e"
                  >https://www.loom.com/share/839fe585aa1740c0baa4faa33d772d3e</a
                >
              </p>
              <p>
                We're inspired by our experiences at Tesla, where Sumanyu led
                growth initiatives as a data scientist, and Anduril, where
                Marius headed a data infrastructure team. At both companies,
                simulations were key to testing autonomous systems before
                deployment. A common challenge, however, was that simulations
                often fell short of capturing real-world complexity, resulting
                in outcomes that didn't always translate to reality. In voice
                testing, we're optimistic about overcoming this issue. With
                tools like PlayHT and ElevenLabs, we can generate highly
                realistic voice interactions, and by integrating LLMs that
                exhibit human-like reasoning, we hope our simulations will
                closely replicate how real users interact with voice agents.
              </p>
              <p>
                For now, we're manually onboarding and activating each user.
                We're working hard to make it self-serve in the next few weeks.
                The demo at
                <a href="https://app.hamming.ai/voice-demo"
                  >https://app.hamming.ai/voice-demo</a
                >
                doesn't require any signup, though!
              </p>
              <p>
                Our current pricing is a mix of usage and the number of seats:
                <a href="https://hamming.ai/pricing"
                  >https://hamming.ai/pricing</a
                >. We don't use customer data for training purposes or to
                benefit other customers, and we don't sell any data. We use
                PostHog to track usage. We're in the process of getting HIPAA
                compliance, with SOC 2 being next on the list.
              </p>
              <p>
                Looking ahead, we're focused on making scenario generation and
                LLM judge creation more automated and self-serve. We also want
                to create personas based on real production conversations to
                make it easier to ‘replay’ a user on demand.
              </p>
              <p>
                A natural next step beyond testing is optimization. We're
                considering building a voice agent optimizer (like DSPy) that
                uses scenarios from testing that failed to generate a new set of
                prompts or function call definitions to make the scenario pass.
                We find the potential of self-play and self-improvement here
                super exciting.
              </p>
              <p>
                We'd love to hear about your experiences with voice agents,
                whether as a user or someone building them. If you're building
                in the voice or agentic space, we're curious about what is
                working well for you and what challenges you are encountering.
                We're eager to learn from your insights about setting up evals
                and simulation pipelines or your thoughts on where this space is
                heading.
              </p>
            </div>
          </section>
        </section>
        <section id="41256477">
          <h3>
            <a class="item" href="https://mobiusml.github.io/gemlite_blogpost/"
              >Gemlite: Towards Building Custom Low-Bit Fused CUDA Kernels</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 14:23:36</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41256477"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41256222">
          <h3>
            <a
              class="item"
              href="https://www.cockroachlabs.com/enterprise-license-update/"
              >CockroachDB License Change</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 14:05:30</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41256222"
                  >Comments</a
                ><span class="descendants">: 207</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41255880">
          <h3>
            <a class="item" href="https://github.com/JoinMusic/fish"
              >YouTube Video to Tabs and Lyrics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 13:33:48</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41255880"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41255456">
          <h3>
            <a
              class="item"
              href="https://golem.ph.utexas.edu/category/2024/08/galois_theory.html"
              >Galois Theory</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 13:00:48</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41255456"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41254989">
          <h3>
            <a
              class="item"
              href="https://torrentfreak.com/kim-dotcoms-extradition-to-the-u-s-given-green-light-by-new-zealand-240815/"
              >Kim Dotcom's extradition to the U.S. given green light by New
              Zealand</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 12:05:50</span
              ><span class="points-container"
                >Points: <span class="points">475</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41254989"
                  >Comments</a
                ><span class="descendants">: 642</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41254740">
          <h3>
            <a class="item" href="https://antonz.org/sqlean-time/"
              >Show HN: High-precision date/time in SQLite</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 11:13:37</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41254740"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41254441">
          <h3>
            <a
              class="item"
              href="https://github.com/avishek-sen-gupta/cobol-rekt"
              >Show HN: COBOL-REKT, a toolkit for analysing and
              reverse-engineering COBOL</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 10:04:36</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41254441"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                - Program / Section-level flowchart generation based on AST (SVG
                or PNG) - Parse Tree generation (with export to JSON) - Control
                Flow Tree generation (with export to JSON) - Allows embedding
                code comments as comment nodes in the graph - The SMOJOL
                Interpreter (WIP) - Injecting AST and Control Flow into Neo4J -
                Injecting Cobol data layouts from Data Division into Neo4J (with
                dependencies like MOVE, COMPUTE, etc.) + export to JSON -
                Injecting execution traces from the SMOJOL interpreter into
                Neo4J - Integration with OpenAI GPT to summarise nodes using
                bottom-up node traversal (AST nodes or Data Structure nodes) -
                Exposes a unified model (AST, CFG, Data Structures with
                appropriate interconnections) which can be analysed through
                [JGraphT](<a href="https://jgrapht.org/">https://jgrapht.org/</a
                >), together with export to GraphML format and JSON. - Support
                for namespaces to allow unique addressing of (possibly same)
                graphs - ALPHA: Support for building Glossary of Variables from
                data structures using LLMs - ALPHA: Support for extracting
                Capability Graph from paragraphs of a program using LLMs -
                ALPHA: Injecting inter-program dependencies into Neo4J (with
                export to JSON) - ALPHA: Paragraph similarity map
              </p>
              <p>Contributions / use cases are welcome!</p>
            </div>
          </section>
        </section>
        <section id="41254094">
          <h3>
            <a
              class="item"
              href="https://www.latacora.com/blog/2024/07/29/crypto-right-answers-pq/"
              >Cryptographic Right Answers: Post Quantum Edition</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 08:36:42</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41254094"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41253922">
          <h3>
            <a class="item" href="https://github.com/markqvist/NomadNet"
              >Nomad, communicate off-grid mesh, forward secrecy and extreme
              privacy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 07:54:02</span
              ><span class="points-container"
                >Points: <span class="points">200</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41253922"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41253870">
          <h3>
            <a class="item" href="https://writefreely.org/"
              >WriteFreely: An open source platform for building a writing space
              on the web</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 07:42:28</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41253870"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41253461">
          <h3>
            <a
              class="item"
              href="https://jonathanolson.net/exact-polygonal-filtering"
              >Exact Polygonal Filtering: Using Green's Theorem and Clipping for
              Anti-Aliasing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 05:59:42</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41253461"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41252731">
          <h3>
            <a class="item" href="https://polyfight.io/"
              >Show HN: An online 2D MMO game, written in Rust and JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 02:48:16</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41252731"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
            <div class="text">
              <a href="https://polyfight.io/">https://polyfight.io/</a>) which
              revolves around a player (a tank) leveling up and upgrading by
              killing shapes and other tanks (partially inspired by
              <a href="https://diep.io">https://diep.io</a>). It has a bunch of
              features, a vast number of tanks, an inbuilt chatting system,
              clans to make teams with your friends, a colour scheme maker,
              controllable sandboxes which can be public or private, a last man
              standing gamemode, and an inbuilt 1v1 system with its own ELO
              rankings and a global leaderboard. The game has a few players
              right now, and I'd hope to spread the joy players have with this
              game to people here, as well as any critiques people have about
              the game. Exploits/gray hat hacking is warmly welcomed, as I
              strive to make sure my game is secure and hard to script/bot in.
            </div>
          </section>
        </section>
        <section id="41248104">
          <h3>
            <a
              class="item"
              href="https://www.troyhunt.com/inside-the-3-billion-people-national-public-data-breach/"
              >Inside the "3 billion people" national public data breach</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-14 @ 16:50:31</span
              ><span class="points-container"
                >Points: <span class="points">526</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41248104"
                  >Comments</a
                ><span class="descendants">: 354</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41247023">
          <h3>
            <a class="item" href="https://ytch.xyz"
              >Show HN: If YouTube had actual channels</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-14 @ 15:10:06</span
              ><span class="points-container"
                >Points: <span class="points">2516</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41247023"
                  >Comments</a
                ><span class="descendants">: 495</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41245159">
          <h3>
            <a
              class="item"
              href="https://blog.glyphdrawing.club/font-with-built-in-syntax-highlighting/"
              >Font with Built-In Syntax Highlighting</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-14 @ 12:12:23</span
              ><span class="points-container"
                >Points: <span class="points">561</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41245159"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41241942">
          <h3>
            <a class="item" href="https://leanrada.com/notes/sweep-and-prune/"
              >Sort, sweep, and prune: Collision detection algorithms (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-14 @ 02:19:17</span
              ><span class="points-container"
                >Points: <span class="points">318</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41241942"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41237176">
          <h3>
            <a class="item" href="https://wiki.reactivemicro.com/A2FPGA"
              >Open Source FPGA Expansion Card for the Apple II</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 16:57:10</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41237176"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41236351">
          <h3>
            <a
              class="item"
              href="https://blog.nishantsoni.com/p/the-myth-of-the-product-market-fit"
              >The Myth of the Product-Market Fit (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 15:22:45</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41236351"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41234024">
          <h3>
            <a
              class="item"
              href="https://www.anandtech.com/show/21523/kioxia-demonstrates-raid-offload-scheme-for-nvme-drives"
              >Kioxia Demonstrates Raid Offload Scheme for NVMe Drives</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 10:18:34</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41234024"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41233309">
          <h3>
            <a
              class="item"
              href="https://ieeexplore.ieee.org/abstract/document/4698465"
              >The History of Orthogonal Frequency Division Multiplexing
              (OFDM)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 07:58:45</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41233309"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41233032">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2013/04/how-nasa-brought-the-monstrous-f-1-moon-rocket-back-to-life/"
              >How NASA brought the F-1 “moon rocket” engine back to life
              (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-13 @ 07:06:46</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41233032"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41227716">
          <h3>
            <a class="item" href="https://nostarch.com/writing-c-compiler"
              >Book – Writing a C Compiler: Build a Real Programming Language
              from Scratch 2024</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 18:26:49</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41227716"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41227279">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2024/08/12/devils-contract-the-history-of-the-faustian-bargain-ed-simon-book-review"
              >Deals with the Devil Aren't What They Used to Be</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 17:47:20</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41227279"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41223907">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/podcast/episode/everything-you-ever-wanted-to-know-08-10-08/"
              >Everything You Ever Wanted to Know about E. Coli (2008)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 13:00:04</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41223907"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41221186">
          <h3>
            <a class="item" href="https://firedancer-lang.com/"
              >Firedancer: Language for 2D shmups bullet-hell patterns</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-12 @ 04:34:59</span
              ><span class="points-container"
                >Points: <span class="points">166</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41221186"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
