<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44756045">
          <h3>
            <a class="item" href="https://hadid.dev/posts/living-coding/"
              >Live coding interviews measure stress, not coding skills</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 12:51:38</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44756045"
                  >Comments</a
                ><span class="descendants">: 159</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44755654">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44755654"
              >Launch HN: Societies.io (YC W25) – AI simulations of your target
              audience</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 12:13:12</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44755654"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              <a href="https://societies.io">https://societies.io</a>) lets you
              simulate your target audience so you can test marketing, messaging
              and content before you launch them.
              <p>
                Here’s a quick product demo:
                <a
                  href="https://www.loom.com/share/c0ce8ab860c044c586c13a24b6c9b391?sid=b7b4e23c-5223-4aad-ae08-b5c704d45aad"
                  >https://www.loom.com/share/c0ce8ab860c044c586c13a24b6c9b391?...</a
                >
              </p>
              <p>
                Marketers always say that half their spend will be wasted - they
                just don’t know which half. Real-world experiments help, but
                they’re too slow and expensive to run at scale. So, we’re
                building simulations that let you test rapidly and cheaply to
                find the best version of your message.
              </p>
              <p>How it works:</p>
              <p>
                - We create AI personas based on real-world data from actual
                individuals, collected from publicly available social media
                profiles and web sources.
              </p>
              <p>
                - For each audience, we retrieve relevant personas from our
                database and map them out on an interactive social network
                graph, which is designed to replicate patterns of social
                influence.
              </p>
              <p>
                - Once you’ve drafted your message, each experiment runs a
                multi-agent simulation where the personas react to your content
                and interact with each other - these take 30s to 2 minutes to
                run. Then, we then surface results and insights to help you
                improve your messaging.
              </p>
              <p>
                Our two biggest challenges are accuracy and UI. We’ve tested our
                performance at predicting how LinkedIn posts perform, and the
                initial results have been promising. Our model has an R2 of 0.78
                and we’ve found that “message spread” in our simulations is the
                single most important predictor of actual engagements when
                looking at posts made by the same authors. But there’s a long
                way to go in generalising these simulations to other contexts,
                and finding ground truth data for evals. We have some more info
                on accuracy here:
                <a href="https://societies.io/#accuracy"
                  >https://societies.io/#accuracy</a
                >
              </p>
              <p>
                In terms of UI, our biggest challenge is figuring out whether
                the ‘experiment’ form factor is attractive to users. We’ve
                deliberately focused on this (over AI surveys) as experiments
                leverage our expertise in social influence and how ideas spread
                between personas.
              </p>
              <p>
                James and I are both behavioral scientists by training but took
                different paths to get here. I helped businesses run A/B tests
                to boost sales and retention. Meanwhile, James became a data
                scientist and, in his spare time, hooked together 33,000 LLM
                chatbots and wrote a paper about it (<a
                  href="https://bpspsychub.onlinelibrary.wiley.com/doi/pdfdirect/10.1111/bjop.12764"
                  >https://bpspsychub.onlinelibrary.wiley.com/doi/pdfdirect/10....</a
                >). He showed me the simulations and we decided to make a
                startup out of it.
              </p>
              <p>
                Pricing: Artificial Societies is free to try. New users get 3
                free credits and then a two week free trial. Pro accounts get
                unlimited simulations for $40/month. We’re planning on
                introducing teams later, and enterprise pricing for custom-built
                audiences.
              </p>
              <p>
                We’d love you to give the tool a try and share your thoughts!
              </p>
            </div>
          </section>
        </section>
        <section id="44755551">
          <h3>
            <a
              class="item"
              href="https://www.navair.navy.mil/news/Navy-demonstrates-multi-day-solar-UAS-flight/Tue-07292025-1554"
              >Navy demonstrates multi-day solar UAS flight</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 11:57:23</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44755551"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44755528">
          <h3>
            <a
              class="item"
              href="https://haxrob.net/onavo-facebook-ssl-mitm-technical-analysis/"
              >How did Facebook intercept competitor's encrypted mobile app
              traffic? (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 11:54:06</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44755528"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44755441">
          <h3>
            <a
              class="item"
              href="https://torrentfreak.com/belgium-bans-internet-archives-open-library-in-sweeping-site-blocking-order/"
              >Belgium bans Internet Archive's ‘Open Library’</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 11:41:05</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44755441"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44755341">
          <h3>
            <a
              class="item"
              href="https://twitter.com/GoogleDeepMind/status/1951239132950204439"
              >Gemini 2.5 Deep Think</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 11:22:52</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44755341"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44755279">
          <h3>
            <a
              class="item"
              href="https://blog.google/products/gemini/gemini-2-5-deep-think/"
              >Try Deep Think in the Gemini App</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 11:10:38</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44755279"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44755110">
          <h3>
            <a class="item" href="https://www.onshape.com/en/"
              >Onshape – Product Development Platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 10:45:59</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44755110"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44754523">
          <h3>
            <a class="item" href="https://secuso.aifb.kit.edu/english/2809.php"
              >Our Farewell from Google Play</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 09:08:59</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44754523"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44754492">
          <h3>
            <a class="item" href="https://bower.sh/you-might-not-need-tmux"
              >You might not need tmux</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 09:04:16</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44754492"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44753298">
          <h3>
            <a
              class="item"
              href="https://dewesoft.com/blog/every-satellite-orbiting-earth-and-who-owns-them"
              >Every satellite orbiting earth and who owns them (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-01 @ 05:31:20</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44753298"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44750563">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2025/08/04/no-tax-on-tips-is-an-industry-plant"
              >“No tax on tips” is an industry plant</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 21:47:27</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44750563"
                  >Comments</a
                ><span class="descendants">: 396</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44750416">
          <h3>
            <a
              class="item"
              href="https://www.derekthompson.org/p/the-anti-abundance-critique-on-housing"
              >The anti-abundance critique on housing is wrong</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 21:28:07</span
              ><span class="points-container"
                >Points: <span class="points">416</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44750416"
                  >Comments</a
                ><span class="descendants">: 614</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44748934">
          <h3>
            <a class="item" href="https://michaelnotebook.com/slow/index.html"
              >Slow</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 19:00:58</span
              ><span class="points-container"
                >Points: <span class="points">846</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44748934"
                  >Comments</a
                ><span class="descendants">: 206</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44747457">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/gemini-embedding-powering-rag-context-engineering/"
              >Gemini Embedding: Powering RAG and context engineering</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 16:47:54</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44747457"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44746948">
          <h3>
            <a class="item" href="https://lwn.net/Articles/1029851/"
              >QUIC for the kernel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 15:57:32</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44746948"
                  >Comments</a
                ><span class="descendants">: 199</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44746603">
          <h3>
            <a
              class="item"
              href="https://lazyadmin.nl/home-network/unifi-os-server/"
              >Ubiquiti launches UniFi OS Server for self-hosting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 15:24:05</span
              ><span class="points-container"
                >Points: <span class="points">350</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44746603"
                  >Comments</a
                ><span class="descendants">: 273</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44745897">
          <h3>
            <a
              class="item"
              href="https://manuel.bernhardt.io/posts/2025-07-24-macbook-pro-insomnia"
              >MacBook Pro Insomnia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 14:16:07</span
              ><span class="points-container"
                >Points: <span class="points">451</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44745897"
                  >Comments</a
                ><span class="descendants">: 210</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44745555">
          <h3>
            <a
              class="item"
              href="https://www.krea.ai/blog/flux-krea-open-source-release"
              >Releasing weights for FLUX.1 Krea</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 13:41:45</span
              ><span class="points-container"
                >Points: <span class="points">332</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44745555"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44744715">
          <h3>
            <a
              class="item"
              href="https://digitalcourage.social/@echo_pbreyer/114946559233051667"
              >Many countries that said no to ChatControl in 2024 are now
              undecided</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-31 @ 11:54:22</span
              ><span class="points-container"
                >Points: <span class="points">435</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44744715"
                  >Comments</a
                ><span class="descendants">: 313</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44729452">
          <h3>
            <a class="item" href="https://krakjoe.github.io/ort/"
              >PHP-ORT: Machine learning inference for the web</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 23:32:10</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44729452"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44726347">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/programmers-arent-humble-anymore-nobody-codes-in-perl/"
              >Programmers aren’t so humble anymore, maybe because nobody codes
              in Perl</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 17:51:22</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44726347"
                  >Comments</a
                ><span class="descendants">: 150</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44724259">
          <h3>
            <a class="item" href="https://andrewhart.me/hyper/"
              >How Hyper Built a 1m-Accurate Indoor GPS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 15:01:17</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44724259"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44722910">
          <h3>
            <a class="item" href="https://raohacker.com/rao-reading-algorithm/"
              >Rao Reading Algorithm (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 13:12:19</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44722910"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44721516">
          <h3>
            <a class="item" href="https://github.com/debba/rewindtty"
              >Show HN: Rewindtty – Record and replay terminal sessions as
              structured JSON</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 10:28:36</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44721516"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44720077">
          <h3>
            <a class="item" href="https://mountainofink.com">Mountain of Ink</a>
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 07:10:59</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44720077"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44719222">
          <h3>
            <a class="item" href="https://drawafish.com"
              >Show HN: Draw A Fish and watch it swim with the others</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-29 @ 04:57:22</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44719222"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.morningbrew.com/issues/business-buzzkill"
                >https://www.morningbrew.com/issues/business-buzzkill</a
              >), [MetaFilter](<a
                href="https://www.metafilter.com/209703/Draw-A-Fish"
                >https://www.metafilter.com/209703/Draw-A-Fish</a
              >), boingboing.net, etc. I think it's cute!
              <p>
                I built a basic CNN trained against penises and swastikas, and
                then anything that doesn't hit the 63% confidence score gets
                sent to a mod queue, a [vibe-coded fish-tinder](<a
                  href="https://bsky.app/profile/bigass.bsky.social/post/3luvikxn3f22n"
                  >https://bsky.app/profile/bigass.bsky.social/post/3luvikxn3f2...</a
                >).
              </p>
              <p>
                Was a fun exercise, spent about a month on it. Frontend is HTML5
                hosted on github pages, backend is Node.JS on GCP.
              </p>
            </div>
          </section>
        </section>
        <section id="44716521">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=KISxcJ2DydY"
              >Living with an Apple Lisa [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-28 @ 22:30:32</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44716521"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44707062">
          <h3>
            <a
              class="item"
              href="https://www.cnx-software.com/2025/07/28/raspberry-pi-5-gets-a-microsd-express-hat/"
              >Raspberry Pi 5 Gets a MicroSD Express Hat</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-28 @ 03:49:47</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44707062"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44705960">
          <h3>
            <a class="item" href="https://www.cryonceaweek.com"
              >Show HN: I made a website that makes you cry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-07-28 @ 00:19:37</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44705960"
                  >Comments</a
                ><span class="descendants">: 184</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
