<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44056280">
          <h3>
            <a
              class="item"
              href="https://jobs.ashbyhq.com/sorcerer/6beb70de-9956-49b7-8e28-f48ea39efac6"
              >Sorcerer (YC S24) Is Hiring a Lead Hardware Design Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 21:00:11</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44055895">
          <h3>
            <a class="item" href="https://github.com/IBM/ACE-RISCV"
              >Show HN: Confidential computing for high-assurance RISC-V
              embedded systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 20:21:06</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44055895"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              Dear HN community! Looking forward to hearing your feedback on ACE
              (assured confidential execution), technology that implements
              VM-based trusted execution environment (TEE) for embedded RISC-V
              systems with focus on a formally verified and auditable firmware.
              We target high-assurance systems that can benefit from
              compartmentalization and hardware-backed isolation. The key
              ingredient called security monitor (firmware) is implemented in
              Rust. The formal specification is defined as annotations directly
              in code and gets translated to Coq using RefinedRust automation.
              ACE design is now part of the RISCV confidential VM extension
              (CoVE) specification (deployment model 3).
            </div>
          </section>
        </section>
        <section id="44055771">
          <h3>
            <a
              class="item"
              href="https://americanaffairsjournal.org/2025/05/its-so-over-were-so-back-doomer-techno-optimism/"
              >It’s So Over, We’re So Back: Doomer Techno-Optimism (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 20:10:01</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44055771"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44055542">
          <h3>
            <a class="item" href="https://clipjs.vercel.app/"
              >Show HN: I've built online video editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 19:50:37</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44055542"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44055347">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/for-algorithms-a-little-memory-outweighs-a-lot-of-time-20250521/"
              >For algorithms, a little memory outweighs a lot of time</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 19:34:20</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44055347"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44054953">
          <h3>
            <a class="item" href="https://github.com/rept0id/ratatoi"
              >Ratatoi is a C libary that wraps stdlib's strtol (as atoi does),
              but it's evil.</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 19:00:50</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44054953"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44054775">
          <h3>
            <a
              class="item"
              href="https://thevinylfactory.com/features/the-curious-tale-of-bhutans-playable-record-postage-stamps/"
              >The curious tale of Bhutan's playable record postage stamps
              (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 18:45:18</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44054775"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44054690">
          <h3>
            <a
              class="item"
              href="https://magazine.atavist.com/all-that-glitters-jona-rechnitz-lawsuit-jadelle-jewelry-coba-ethereummax-mayweather/"
              >All That Glitters</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 18:38:21</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44054690"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44054620">
          <h3>
            <a
              class="item"
              href="https://www.minorplanetcenter.net/mpec/K25/K25K47.html"
              >New dwarf planet found in our solar system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 18:32:24</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44054620"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44054425">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2505.12540"
              >Harnessing the Universal Geometry of Embeddings</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 18:15:25</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44054425"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44054185">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/google-ai-studio-native-code-generation-agentic-tools-upgrade/"
              >An upgraded dev experience in Google AI Studio</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 17:53:40</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44054185"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44053759">
          <h3>
            <a
              class="item"
              href="https://www.llamaindex.ai/blog/python-tooling-at-scale-llamaindex-s-monorepo-overhaul"
              >Python Tooling at Scale: LlamaIndex’s Monorepo Overhaul</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 17:20:30</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44053759"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44053754">
          <h3>
            <a
              class="item"
              href="https://github.com/lastmile-ai/mcp-agent/tree/main/examples/mcp_agent_server"
              >Show HN: Representing Agents as MCP Servers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 17:19:52</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44053754"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/lastmile-ai/mcp-agent"
                >https://github.com/lastmile-ai/mcp-agent</a
              >) [1][2], a lightweight framework that implements every agent
              pattern from Anthropic’s Building Effective Agents blog [3] and
              handles MCP server/client management seamlessly. Our core bet is
              that connecting LLMs to tools, resources, and external systems
              will soon be MCP-native by default.
              <p>
                Today we're launching a significant update: Agents as MCP
                servers.
              </p>
              <p>
                Currently "agentic" behavior exists only on the MCP client side
                – clients like Claude or Cursor use MCP servers to solve tasks.
                With this update, Agents can be MCP servers themselves, so that
                any MCP client can invoke, coordinate and orchestrate agents the
                same way it does with any other MCP server.
              </p>
              <p>
                This paradigm shift enables: 1. Agent Composition: Build complex
                multi-agent systems over the same base protocol (MCP). 2.
                Platform Independence: Use your agents from any MCP-compatible
                client 3. Scalability: Run agent workflows on dedicated
                infrastructure, not just within client environments 4.
                Customization: Develop your own agent workflows and reuse them
                across any MCP client.
              </p>
              <p>How an agent server is implemented:</p>
              <p>
                We’ve implemented this in mcp-agent with Workflows. Each
                workflow is an agent application that can interact with other
                MCP servers (e.g. summarizing GitHub issues → Slack message).
                mcp-agent exposes workflows as MCP tools on an MCP Agent Server
                [5]:
              </p>
              <p>
                - workflows/list – list available workflows -
                workflows/{WorkflowName}/run – Execute the workflow (async) -
                workflows/{WorkflowName}/get_status – Check workflow status -
                workflows/{WorkflowName}/resume – Resume paused workflow (e.g.
                with human input) - workflows/{WorkflowName}/cancel – Terminate
                workflow
              </p>
              <p>
                We’ve also implemented Temporal for durable execution [6], so
                agent workflows can be paused, resumed and retried in production
                settings.
              </p>
              <p>
                This demo [7] shows Claude invoking an MCP agent server, running
                workflows when appropriate, and polling for status. It basically
                shows agentic behavior on both the MCP client and MCP server
                side.
              </p>
              <p>
                We're excited about the potential this unlocks—especially as
                more applications become MCP-compatible clients. We'd love your
                feedback and ideas!
              </p>
              <p>
                [1] -
                <a href="https://news.ycombinator.com/item?id=42867050"
                  >https://news.ycombinator.com/item?id=42867050</a
                >
              </p>
              <p>
                [2] -
                <a href="https://github.com/lastmile-ai/mcp-agent"
                  >https://github.com/lastmile-ai/mcp-agent</a
                >
              </p>
              <p>
                [3] -
                <a
                  href="https://www.anthropic.com/research/building-effective-agents"
                  >https://www.anthropic.com/research/building-effective-agents</a
                >
              </p>
              <p>
                [4] -
                <a href="https://github.com/github/github-mcp-server"
                  >https://github.com/github/github-mcp-server</a
                >
              </p>
              <p>
                [5] -
                <a
                  href="https://github.com/lastmile-ai/mcp-agent/tree/main/examples/mcp_agent_server/asyncio"
                  >https://github.com/lastmile-ai/mcp-agent/tree/main/examples/...</a
                >
              </p>
              <p>
                [6] -
                <a
                  href="https://github.com/lastmile-ai/mcp-agent/tree/main/examples/temporal"
                  >https://github.com/lastmile-ai/mcp-agent/tree/main/examples/...</a
                >
              </p>
              <p>
                [7] -
                <a href="https://youtu.be/pLe2GAjEoYs"
                  >https://youtu.be/pLe2GAjEoYs</a
                >
                [DEMO]
              </p>
            </div>
          </section>
        </section>
        <section id="44053744">
          <h3>
            <a class="item" href="https://jngiam.bearblog.dev/mcp-large-data/"
              >LLM function calls don't scale; code orchestration is simpler,
              more effective</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 17:18:52</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44053744"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44053603">
          <h3>
            <a
              class="item"
              href="https://shopify.dev/docs/api/storefront-web-components"
              >Storefront Web Components</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 17:08:58</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44053603"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44053560">
          <h3>
            <a
              class="item"
              href="https://mattweidner.com/2025/05/21/text-without-crdts.html"
              >Collaborative Text Editing Without CRDTs or OT</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 17:05:45</span
              ><span class="points-container"
                >Points: <span class="points">146</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44053560"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44053518">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2025-05-21/openai-to-buy-apple-veteran-jony-ive-s-ai-device-startup-in-6-5-billion-deal"
              >OpenAI to buy AI startup from Jony Ive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 17:01:35</span
              ><span class="points-container"
                >Points: <span class="points">485</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44053518"
                  >Comments</a
                ><span class="descendants">: 662</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44053364">
          <h3>
            <a class="item" href="https://signal.org/blog/signal-doesnt-recall/"
              >By Default, Signal Doesn't Recall</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 16:46:53</span
              ><span class="points-container"
                >Points: <span class="points">271</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44053364"
                  >Comments</a
                ><span class="descendants">: 195</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44052984">
          <h3>
            <a
              class="item"
              href="https://ai.meta.com/blog/llama-startup-program/?_fb_noscript=1"
              >Introducing the Llama Startup Program</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 16:10:06</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44052984"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44052766">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44052766"
              >Launch HN: SIM Studio (YC X25) – Figma-Like Canvas for Agent
              Workflows</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 15:49:15</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44052766"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
            <div class="text">
              <a href="https://simstudio.ai">https://simstudio.ai</a>). We did a
              Show HN a few weeks ago about our open-source project (<a
                href="https://news.ycombinator.com/item?id=43823096"
                >https://news.ycombinator.com/item?id=43823096</a
              >). Today, we’re launching our hosted platform—a collaborative
              interface to build and deploy agent workflows. We just removed the
              waitlist (with 5,000+ people) and you can sign up and access it
              at: <a href="https://simstudio.ai">https://simstudio.ai</a>
              <p>
                Sim Studio lets you build agents with different models, tools,
                and custom functions. In minutes, you can deploy a research
                agent. Demo here -
                <a href="https://youtu.be/F6MqNvnfxbI"
                  >https://youtu.be/F6MqNvnfxbI</a
                >
              </p>
              <p>
                We started working on Sim Studio because we were frustrated with
                agent frameworks that required excessive boilerplate code and
                unhelpful abstractions (like agent roles and backstories). We
                also tried other visual interfaces, but found them difficult to
                set up and too limited for production use cases. Specifically,
                we wanted the ability to write custom functions, force tool
                calls, and run parallel execution.
              </p>
              <p>
                We’re taking a different approach. Our visual canvas lets you
                explicitly define how agents interact, use external tools, and
                handle complex logic like branching, loops, and conditional
                execution. You can seamlessly integrate with popular tools like
                Supabase, Pinecone, Mem0, and Exa without obscure abstractions.
              </p>
              <p>
                You can simulate workflow runs, deploy workflows as APIs or
                standalone chat interfaces, and trigger them via webhooks. We
                offer built-in observability, detailed trace spans, and logs
                that make debugging straightforward. Try searching yourself
                below:
              </p>
              <p>
                Example message for
                <a href="https://hn.simstudio.ai">https://hn.simstudio.ai</a>:
              </p>
              <p>
                - Search [person] from [company] - "Search Emir Karabeg from Sim
                Studio"
              </p>
              <p>
                Check out our Apache 2.0 licensed repo at
                <a href="https://github.com/simstudioai/sim"
                  >https://github.com/simstudioai/sim</a
                >, explore our docs at
                <a href="https://docs.simstudio.ai">https://docs.simstudio.ai</a
                >, or try out our deployed chat from the demo video here:
                <a href="https://hn.simstudio.ai">https://hn.simstudio.ai</a>.
              </p>
              <p>
                We’d love to hear your feedback! Do you think our visual
                solution is a good approach to building agents?
              </p>
            </div>
          </section>
        </section>
        <section id="44052738">
          <h3>
            <a class="item" href="https://github.com/BlackMATov/evolved.lua"
              >Show HN: Evolved.lua – An Evolved Entity Component System for
              Lua</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 15:46:45</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44052738"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
            <div class="text">
              <p>
                evolved.lua is a fast and flexible ECS (Entity-Component-System)
                library for Lua. It is designed to be simple and easy to use,
                while providing all the features needed to create complex
                systems with blazing performance.
              </p>
              <p>Enjoy!</p>
            </div>
          </section>
        </section>
        <section id="44052418">
          <h3>
            <a
              class="item"
              href="https://news.engin.umich.edu/2025/05/the-us-has-a-new-most-powerful-laser/"
              >The US has a new most powerful laser hitting 2 petawatts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 15:17:10</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44052418"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44052106">
          <h3>
            <a class="item" href="https://github.com/lune-org/lune"
              >Lune: Standalone Luau Runtime</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 14:51:38</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44052106"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44051958">
          <h3>
            <a
              class="item"
              href="http://www.datapointed.net/visualizations/math/factorization/animated-diagrams/"
              >Animated Factorization (2012)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 14:39:37</span
              ><span class="points-container"
                >Points: <span class="points">206</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44051958"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44051733">
          <h3>
            <a class="item" href="https://mistral.ai/news/devstral">Devstral</a>
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 14:21:10</span
              ><span class="points-container"
                >Points: <span class="points">267</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44051733"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44051652">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/turbocharged-mitochondria-power-birds-epic-migratory-journeys-20250519/"
              >'Turbocharged' Mitochondria Power Birds' Epic Migratory
              Journeys</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 14:11:33</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44051652"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44023400">
          <h3>
            <a
              class="item"
              href="https://blog.awaxman.com/what-is-the-difference-between-a-block-a-proc-and-a-lambda-in-ruby"
              >What Is the Difference Between a Block, a Proc, and a Lambda in
              Ruby? (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 18:34:12</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44023400"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44023226">
          <h3>
            <a
              class="item"
              href="https://medium.com/@joe_5312/pg-e-sucks-or-how-i-learned-to-stop-worrying-and-love-building-my-own-solar-system-acf0c9f03f3b"
              >Building my own solar power system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 18:07:03</span
              ><span class="points-container"
                >Points: <span class="points">382</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44023226"
                  >Comments</a
                ><span class="descendants">: 281</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44022736">
          <h3>
            <a
              class="item"
              href="https://nghiant3223.github.io/2025/04/15/go-scheduler.html"
              >Understanding the Go Scheduler</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 17:03:55</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44022736"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44018193">
          <h3>
            <a class="item" href="https://speedrun.a16z.com">A16Z Speedrun</a>
          </h3>
          <section>
            <h4>
              <span>2025-05-18 @ 01:03:47</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44018193"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
