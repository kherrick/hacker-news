<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41384316">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/charge-robotics/jobs/ml4f9l4-senior-mechanical-engineer"
              >Charge Robotics (YC S21) is hiring MechEs to build robots that
              build solar farms</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 21:00:17</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41384144">
          <h3>
            <a class="item" href="https://skip.tools/"
              >Show HN: Skip – Build native iOS and Android apps from a single
              Swift codebase</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 20:44:29</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41384144"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <p>
                What it is: Skip stands in contrast to other cross-platform
                development tools like Flutter, React Native, and Xamarin, in
                that it enables the creation of genuinely native applications
                for both of the dominant mobile platforms. It doesn't embed a
                separate engine or runtime into your app, but instead lets you
                use pure Swift and SwiftUI to create the iOS side of the app (as
                per Apple's recommended best practices for creating iOS apps),
                and transpiles it into a pure Kotlin and Jetpack Compose app for
                the Android side (which is Google's recommendation for building
                Android apps). So your application will use platform-native
                controls and will automatically have all the affordances
                provided by the platform vendor: animations, accessibility, and
                future-proof evolution alongside OS updates.
              </p>
              <p>
                How it works: you build a Skip app using the same tools that you
                use to create a standard iOS app: Xcode, Swift, and SwiftUI.
                Skip augments this workflow with a Swift Package Manager plugin
                called "skipstone", which transpiles your Swift into Kotlin each
                time you build your app, and launches the Android app
                side-by-side with the iOS app each time you run the app. The
                transpilation works not just on your primary app module, but
                also transitively processes all your dependent SwiftPM modules,
                so you can break complex projects down into individually
                testable sub-modules containing business logic or UI code. In
                fact, this is how our own adaptor modules for the standard
                frameworks are structured: SkipFoundation adapts the Foundation
                framework and SkipUI adapts the SwiftUI framework, so the same
                familiar API can be used when building the app. And there's a
                GitHub ecosystem of open-source modules supporting popular
                frameworks, including SQLite, Firebase, Lottie, and many other
                common building blocks of modern apps.
              </p>
              <p>
                Over the past year Skip has evolved into a fully-capable
                solution for creating best-in-class apps for both iOS and
                Android. And today we are delighted to announce the release of
                version 1.0, meaning that it is ready for production use.
              </p>
              <p>
                We have a wealth of videos and documentation available at
                <a href="https://skip.tools">https://skip.tools</a>, and I'll be
                around to field any questions that any of you might have. Thanks
                in advance for taking a look!
              </p>
              <p>Home: <a href="https://skip.tools">https://skip.tools</a></p>
              <p>
                FAQ:
                <a href="https://skip.tools/docs/faq/"
                  >https://skip.tools/docs/faq/</a
                >
              </p>
              <p>
                GitHub:
                <a href="https://github.com/skiptools/"
                  >https://github.com/skiptools/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41384118">
          <h3>
            <a
              class="item"
              href="https://nnethercote.github.io/2022/07/27/twenty-years-of-valgrind.html"
              >Twenty Years of Valgrind (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 20:42:03</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41384118"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41384053">
          <h3>
            <a
              class="item"
              href="https://whois.marcaria.com/en/result?SearchDomain=puri.sm"
              >Purism Domain Puri.sm Suspended?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 20:35:50</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41384053"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41383947">
          <h3>
            <a class="item" href="https://www.sqlite.org/np1queryprob.html"
              >Many Small Queries Are Efficient in SQLite</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 20:27:38</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41383947"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41383843">
          <h3>
            <a
              class="item"
              href="https://www.nist.gov/cybersecurity/what-post-quantum-cryptography"
              >What Is Post-Quantum Cryptography? – NIST</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 20:20:04</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41383843"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41383592">
          <h3>
            <a class="item" href="https://github.com/Storia-AI/repo2vec"
              >Show HN: Repo2vec – an open-source library for chatting with any
              codebase</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 19:59:10</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41383592"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                We made this because sometimes you just want to learn how a
                codebase works and how to integrate it, without spending hours
                sifting through the code itself.
              </p>
              <p>
                We tried to make it dead-simple to use. With two scripts, you
                can index and get a functional interface for your repo. Every
                generated response shows where in the code the context for the
                answer was pulled from.
              </p>
              <p>
                We also made it plug-and-play where every component from the
                embeddings, to the vector store, to the LLM is completely
                customizable.
              </p>
              <p>
                If you want to see a hosted version of the chat interface with
                its features, here's a link:
                <a href="https://www.youtube.com/watch?v=CNVzmqRXUCA"
                  >https://www.youtube.com/watch?v=CNVzmqRXUCA</a
                >
              </p>
              <p>We would love your feedback!</p>
              <p>- Mihail and Julia</p>
            </div>
          </section>
        </section>
        <section id="41383244">
          <h3>
            <a
              class="item"
              href="https://www.paritybit.ca/blog/why-i-hate-the-term-modern/"
              >I Hate the Term "Modern"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 19:26:08</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41383244"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41383126">
          <h3>
            <a
              class="item"
              href="https://www.404media.co/appliance-and-tractor-companies-lobby-against-giving-the-military-the-right-to-repair/"
              >Companies Lobby Against Giving the Military the Right to
              Repair</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 19:13:51</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41383126"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41382828">
          <h3>
            <a
              class="item"
              href="https://lamport.azurewebsites.net/tla/future.pdf"
              >The Future of TLA+ [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 18:46:50</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41382828"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41382699">
          <h3>
            <a
              class="item"
              href="https://www.dolthub.com/blog/2024-08-23-the-4-chan-go-programmer/"
              >The 4-chan Go programmer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 18:35:13</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41382699"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41382687">
          <h3>
            <a
              class="item"
              href="https://stepchange.work/blog/scaling-rails-postgres-to-millions-of-users-at-microsoft-lessons-takeaways"
              >Scaling Rails and Postgres to Users at Microsoft: Lessons and
              Takeaways</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 18:34:01</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41382687"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41382579">
          <h3>
            <a
              class="item"
              href="https://bsky.social/about/blog/08-28-2024-anti-toxicity-features"
              >New Anti-Toxicity Features on Bluesky</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 18:24:41</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41382579"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41382578">
          <h3>
            <a
              class="item"
              href="https://kotlinlang.org/docs/data-analysis-overview.html"
              >Kotlin for Data Analysis</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 18:24:39</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41382578"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41382335">
          <h3>
            <a class="item" href="https://www.windowmaker.org/"
              >Window Maker: X11 window manager with the look and feel of the
              NeXTSTEP UI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 18:05:29</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41382335"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41381598">
          <h3>
            <a class="item" href="https://github.com/sjpiper145/MakerSkillTree"
              >Maker Skill Trees</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 17:01:15</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41381598"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41381569">
          <h3>
            <a
              class="item"
              href="https://connect.na.panasonic.com/toughbook/rugged-computers/toughbook-40"
              >Panasonic Toughbook 40</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 16:58:16</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41381569"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41380888">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2403.16850"
              >High-temperature Gibbs states are unentangled and efficiently
              preparable</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 15:53:23</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41380888"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41380814">
          <h3>
            <a class="item" href="https://gptengineer.app"
              >Show HN: Claude Artifacts" but creating real web apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 15:48:02</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41380814"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
            <div class="text">
              <p>Launching gptengineer.app into beta today.</p>
              <p>It's like Claude Artifacts, but:</p>
              <p>
                - you can edit the code in your fav IDE (two-way github sync)
              </p>
              <p>- installs npm packages</p>
              <p>
                - automatically picks up build and runtime errors and fixes them
              </p>
              <p>- very fast, built with rust</p>
              <p>
                The full stack capabilities are built on supabase (prefer to not
                have to handle auth + user data at this point so this is owned
                by the user)
              </p>
              <p>
                The seed for this project was an open source experiment, posted
                about that previously here:
              </p>
              <p>
                <a href="https://news.ycombinator.com/item?id=36422730"
                  >https://news.ycombinator.com/item?id=36422730</a
                >
              </p>
              <p>Would love feedback if you give it a try!</p>
            </div>
          </section>
        </section>
        <section id="41380460">
          <h3>
            <a class="item" href="https://github.com/Zxilly/go-size-analyzer"
              >Show HN: Shed Light on Your Go Binary Bloat with Go Size
              Analyzer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 15:15:24</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41380460"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>Which dependencies are eating up your binary size</p>
              <p>Unexpected bloat from standard library or vendor packages</p>
              <p>Size changes between binary versions with a visual diff</p>
              <p>Key features that set it apart:</p>
              <p>
                Interactive treemap visualizations (check out the demo:
                <a href="https://gsa.zxilly.dev">https://gsa.zxilly.dev</a>)
              </p>
              <p>Slick terminal UI for deep diving into package hierarchies</p>
              <p>
                Cross-platform support (works on Linux, macOS, and Windows
                binaries)
              </p>
              <p>
                Export to SVG for easy sharing and documentation or just
                visualize the CI process
              </p>
              <p>
                Whether you're optimizing for edge devices, reducing Docker
                image sizes, or just curious about what's really inside your Go
                binaries, this tool provides detailed insights. .
              </p>
            </div>
          </section>
        </section>
        <section id="41378478">
          <h3>
            <a
              class="item"
              href="https://elixir-lang.org/blog/2024/08/28/typing-lists-and-tuples/"
              >Typing lists and tuples in Elixir</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 11:49:32</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41378478"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41378428">
          <h3>
            <a
              class="item"
              href="https://www.lightbluetouchpaper.org/2022/07/22/formal-cheri/"
              >Formal CHERI: design-time proof of full-scale architecture
              security properties (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 11:42:02</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41378428"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41377960">
          <h3>
            <a class="item" href="https://github.com/seekbytes/IPA"
              >Show HN: IPA, a GUI for exploring inner details of PDFs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 10:22:52</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41377960"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41375548">
          <h3>
            <a class="item" href="https://gamengen.github.io"
              >Diffusion models are real-time game engines</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-28 @ 02:59:40</span
              ><span class="points-container"
                >Points: <span class="points">989</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41375548"
                  >Comments</a
                ><span class="descendants">: 362</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41356415">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/sf/style/2017/08/07/chefs-say-a-dishwasher-can-make-or-break-a-restaurant-so-i-signed-up-for-a-shift/"
              >A dishwasher can make or break a restaurant (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 12:17:21</span
              ><span class="points-container"
                >Points: <span class="points">191</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41356415"
                  >Comments</a
                ><span class="descendants">: 368</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41349215">
          <h3>
            <a
              class="item"
              href="https://www.facs.org/for-medical-professionals/news-publications/news-and-articles/bulletin/2018/02/the-history-of-the-scalpel-from-flint-to-zirconium-coated-steel/"
              >The scalpel: From flint to zirconium-coated steel (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 17:23:16</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41349215"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41347188">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2024/Aug/24/pipe-syntax-in-sql/"
              >Google's New Pipe Syntax in SQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 13:33:23</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41347188"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41344972">
          <h3>
            <a
              class="item"
              href="https://www.science.org/doi/10.1126/sciadv.adn8129"
              >Human population dynamics in Paleolithic inferred from fossil
              dental phenotypes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 06:36:40</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41344972"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41337268">
          <h3>
            <a
              class="item"
              href="https://www.voidtools.com/en-us/support/everything/"
              >"Everything" is a filename search engine for Windows</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-24 @ 11:07:51</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41337268"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41327394">
          <h3>
            <a
              class="item"
              href="https://sebastianmarines.com/post/journey-of-a-packet-exploring-networks-with-traceroute/"
              >The journey of an internet packet: Exploring networks with
              traceroute</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-23 @ 09:10:39</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41327394"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
