<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37601865">
          <h3>
            <a
              class="item"
              href="https://frigade.com/blog/bundle-size-reduction-with-rsc-and-frigade"
              >React Server Components made our site a lot faster</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 18:28:52</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37601865"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37601526">
          <h3>
            <a
              class="item"
              href="https://srcd.onlinelibrary.wiley.com/doi/full/10.1111/cdep.12442"
              >Developmental costs associated with early maternal withdrawal
              (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 18:06:27</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37601526"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37601363">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2023/09/25/a-young-architects-designs-for-the-climate-apocalypse"
              >A Young Architect’s Designs for the Climate Apocalypse</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 17:53:15</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37601363"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37601064">
          <h3>
            <a class="item" href="https://thelig.ht/ui-apps-are-broken/"
              >Most UI Applications Are Broken Real-Time Applications</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 17:34:11</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37601064"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37600937">
          <h3>
            <a
              class="item"
              href="https://www.cisa.gov/news-events/news/urgent-need-memory-safety-software-products"
              >US Cybersecurity: The Urgent Need for Memory Safety in Software
              Products</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 17:26:58</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37600937"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37600852">
          <h3>
            <a class="item" href="https://blog.isosceles.com/the-webp-0day/"
              >The WebP 0day</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 17:21:39</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37600852"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37600618">
          <h3>
            <a
              class="item"
              href="https://faq.usps.com/s/article/USPS-In-Person-Identity-Proofing"
              >USPS In-Person Identity Proofing</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 17:06:08</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37600618"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37600542">
          <h3>
            <a class="item" href="https://onesignal.com/careers/4264311006"
              >OneSignal (YC S11), email and push notification platform, is
              hiring engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 17:00:48</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37600484">
          <h3>
            <a
              class="item"
              href="https://gizmodo.com/michael-bloomberg-500-million-shut-down-coal-plants-1850861082"
              >Bloomberg Is Throwing $500M at Efforts to Shut Down All U.S. Coal
              Plants</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 16:57:46</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37600484"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37600019">
          <h3>
            <a
              class="item"
              href="https://github.com/Dicklesworthstone/automatic_log_collector_and_analyzer"
              >Show HN: My Single-File Python Script I Used to Replace Splunk in
              My Startup</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 16:26:44</span
              ><span class="points-container"
                >Points: <span class="points">210</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37600019"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
            <div class="text">
              <p>
                "I hated Splunk so much that I spent a couple days a few months
                ago writing a single 1200 line python script that does
                absolutely everything I need in terms of automatic log
                collection, ingestion, and analysis from a fleet of cloud
                instances. It pulls in all the log lines, enriches them with
                useful metadata like the IP address of the instance, the machine
                name, the log source, the datetime, etc. and stores it all in
                SQlite, which it then exposes to a very convenient web interface
                using Datasette.
              </p>
              <p>
                I put it in a cronjob and it's infinitely better (at least for
                my purposes) than Splunk, which is just a total nightmare to
                use, and can be customized super easily and quickly. My
                coworkers all prefer it to Splunk as well. And oh yeah, it's
                totally free instead of costing my company thousands of dollars
                a year! If I owned CSCO stock I would sell it-- this deal shows
                incredibly bad judgment."
              </p>
              <p>
                I had been meaning to clean it up a bit and open-source it but
                never got around to it. However, someone asked today in response
                to my comment if I had released it, so I figured now would be a
                good time to go through it and clean it up, move the constants
                to an .env file, and create a README.
              </p>
              <p>
                This code is obviously tailored to my own requirements for my
                project, but if you know Python, it's extremely straightforward
                to customize it for your own logs (plus, some of the logs are
                generic, like systemd logs, and the output of netstat/ss/lsof,
                which it combines to get a table of open connections by process
                over time for each machine-- extremely useful for finding code
                that is leaking connections!). And I also included the actual
                sample log files from my project that correspond to the parsing
                functions in the code, so you can easily reason by analogy to
                adapt it to your own log files.
              </p>
              <p>
                As many people pointed out in responses to my comment, this is
                obviously not a real replacement for Splunk for enterprise users
                who are ingesting terabytes a day from thousands of machines and
                hundreds of sources. If it were, hopefully someone would be
                paying me $28 billion for it instead of me giving it away for
                free! But if you don't have a huge number of machines and really
                hate using Splunk while wasting thousands of dollars, this might
                be for you.
              </p>
            </div>
          </section>
        </section>
        <section id="37599873">
          <h3>
            <a
              class="item"
              href="https://jxnl.github.io/instructor/blog/2023/09/17/rag-is-more-than-just-embedding-search/"
              >Rag is more than just embedding search</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 16:18:02</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37599873"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37599587">
          <h3>
            <a
              class="item"
              href="https://twitter.com/unusual_whales/status/1704870849831125446"
              >Insider trade on Splunk acquisition for 45,650% return</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 15:58:25</span
              ><span class="points-container"
                >Points: <span class="points">320</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37599587"
                  >Comments</a
                ><span class="descendants">: 228</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37599542">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2023-09-poisoning-death-iq-loss-thought.html"
              >Lead poisoning causes far more death, IQ loss than thought:
              study</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 15:55:20</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37599542"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37599510">
          <h3>
            <a class="item" href="https://matrix.org/blog/2023/09/matrix-2-0/"
              >Matrix 2.0: The Future of Matrix</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 15:53:24</span
              ><span class="points-container"
                >Points: <span class="points">210</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37599510"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37599312">
          <h3>
            <a
              class="item"
              href="https://www.livescience.com/archaeology/ancient-egyptians/sunken-temple-and-sanctuary-from-ancient-egypt-found-brimming-with-treasures-and-secrets"
              >Sunken temple and sanctuary from ancient Egypt found</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 15:40:28</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37599312"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37598604">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/wines-true-origins-are-finally-revealed/"
              >Wine’s origins</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 14:57:49</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37598604"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37598329">
          <h3>
            <a
              class="item"
              href="https://www.semafor.com/article/09/21/2023/the-sec-cracks-down-on-greenwashing"
              >The SEC cracks down on greenwashing</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 14:40:56</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37598329"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37597931">
          <h3>
            <a
              class="item"
              href="https://www.statnews.com/2023/09/21/als-gene-carrier-riluzole-toferson/"
              >They have genetic ALS. What should clinicians do?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 14:14:25</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37597931"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37597201">
          <h3>
            <a class="item" href="https://github.com/memgraph/odin"
              >Show HN: Odin – the integration of LLMs with Obsidian note
              taking</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 13:18:58</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37597201"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37596788">
          <h3>
            <a
              class="item"
              href="https://www.catsuka.com/breves/2023-09-21/nippon-television-rachete-le-studio-ghibli"
              >Nippon Television has just acquired Studio Ghibli</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 12:44:11</span
              ><span class="points-container"
                >Points: <span class="points">482</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37596788"
                  >Comments</a
                ><span class="descendants">: 167</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37596776">
          <h3>
            <a
              class="item"
              href="https://andreyor.st/posts/2023-09-20-why-kakoune/"
              >Why Kakoune</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 12:42:44</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37596776"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37596497">
          <h3>
            <a
              class="item"
              href="https://www.splunk.com/en_us/blog/leadership/splunk-and-cisco-unite-to-accelerate-digital-resilience-as-one-of-the-leading-global-software-companies.html"
              >Cisco Acquires Splunk</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 12:15:19</span
              ><span class="points-container"
                >Points: <span class="points">635</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37596497"
                  >Comments</a
                ><span class="descendants">: 345</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37596253">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37596253"
              >Launch HN: Loops (YC W22) – Email for SaaS Companies</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 11:48:51</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37596253"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
            <div class="text">
              <a href="https://loops.so">https://loops.so</a>), a platform aimed
              at simplifying the email experience for SaaS companies. We support
              creating and sending marketing, product, and transactional email.
              <p>
                Email is important but painful to manage. If you've ever dealt
                with the frustration of coding emails by hand, testing them
                across multiple clients, or integrating them into various SaaS
                tools, you might find our approach interesting.
              </p>
              <p>
                We make it simple to design and send email to your users either
                manually in the app, via API or triggered via an integration. We
                offer unlimited team seats, so your product team can help align
                copy, your marketing team can send newsletters, your revenue
                team can work on dunning and your engineers can have a solid API
                to help orchestrate the sends.
              </p>
              <p>
                Most of our competitors use email editors that are licensed from
                a third party. Our editor is built from the ground up on the
                Lexical text editor from Meta, extended beyond just text nodes.
                It supports mobile editing and dark mode, and it autosaves your
                changes.
              </p>
              <p>
                Our REST API is straightforward, and we have integrations with
                tools like Segment and Census. Documentation is available at
                <a href="https://loops.so/docs">https://loops.so/docs</a>. On
                our homepage, right under the fold, we list endpoints and sample
                payloads.
              </p>
              <p>
                One issue we've worked hard to address is email compatibility
                across devices and platforms. It's a problem full of edge cases
                that we've mitigated by extending MJML, a markup language
                designed for responsive email, to be even more compliant across
                different platforms. We don't think you should have to code and
                test your emails. Email copy shouldn't live in your codebase.
              </p>
              <p>
                If you're concerned about spam, we are too. We educate our users
                on CAN-SPAM rules and automatically add compliant footers to
                emails. We actively monitor to ensure our platform isn't used
                for spam, and we do not allow cold sales emails.
              </p>
              <p>
                Our pricing is upfront and available on our website. You can try
                the platform for free without a credit card. We launched
                publicly a week ago. We're really interested in any technical
                feedback you have, as we aim to make this tool as
                developer-friendly as possible.
              </p>
              <p>Looking forward to hearing your thoughts!</p>
            </div>
          </section>
        </section>
        <section id="37595766">
          <h3>
            <a
              class="item"
              href="https://github.com/madmurphy/libconfini/wiki/An-INI-critique-of-TOML"
              >An INI Critique of TOML (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 10:41:02</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37595766"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37594377">
          <h3>
            <a
              class="item"
              href="https://defcon.social/@mysk/111097362983335713"
              >Philips Hue will soon force users to create an account</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 07:38:19</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37594377"
                  >Comments</a
                ><span class="descendants">: 165</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37594365">
          <h3>
            <a
              class="item"
              href="https://www.undeadly.org/cgi?action=article;sid=20230921073556"
              >OpenBSD/ARM64 on Hetzner Cloud</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 07:36:31</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37594365"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37593967">
          <h3>
            <a
              class="item"
              href="https://elixir-lang.org/blog/2023/09/20/strong-arrows-gradual-typing/"
              >Strong arrows: a new approach to gradual typing</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-21 @ 06:39:03</span
              ><span class="points-container"
                >Points: <span class="points">165</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37593967"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37590580">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2023-09-large-cold-fronts-galaxy-cluster.html"
              >Two large cold fronts detected in the galaxy cluster Abell
              3558</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-20 @ 21:38:24</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37590580"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37581145">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2023/09/18/lhc_infrastructure_monitoring/"
              >CERN swaps out databases to feed its petabyte-a-day habit</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-20 @ 06:46:48</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37581145"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37570889">
          <h3>
            <a
              class="item"
              href="https://www.servethehome.com/intel-xeon-max-9480-deep-dive-intel-has-64gb-hbm2e-onboard-like-a-gpu-or-ai-accelerator/"
              >Intel Xeon Max 9480 Deep-Dive 64GB HBM2e Onboard Like a GPU or AI
              Accelerator</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-09-19 @ 15:00:40</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37570889"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
