<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44172017">
          <h3>
            <a class="item" href="https://github.com/ushakov-igor/chonkify"
              >Show HN: Ultra-lightweight chunker library with emoji support</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 16:50:29</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44172017"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
            <div class="text">
              <p>
                Chonkify is a small (~870B), zero-dependency JS/TS library for
                chunking any kind of data:
              </p>
              <p>
                - Works with Array, String, Buffer, Set, Map, Array-like,
                TypedArray
              </p>
              <p>- Handles AsyncIterable (great for batching streams)</p>
              <p>
                - Unicode-safe (correctly handles grapheme clusters, emoji,
                etc.)
              </p>
              <p>- ESM-first, TypeScript-ready</p>
              <p>
                I mostly made it for myself, but figured others might find it
                useful too.
              </p>
              <p>Would love feedback!</p>
            </div>
          </section>
        </section>
        <section id="44171677">
          <h3>
            <a class="item" href="https://go.dev/blog/error-syntax"
              >(On | No) Syntactic Support for Error Handling</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 16:18:45</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44171677"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44171581">
          <h3>
            <a
              class="item"
              href="https://retrocomputing.stackexchange.com/questions/31722/where-can-i-find-the-initial-version-of-the-etc-magic-file-used-by-the-file1"
              >The initial version of the /etc./magic file used by the file(1)
              command</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 16:10:35</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44171581"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44170968">
          <h3>
            <a class="item" href="https://www.inotherwords.app/linguabase/"
              >The Small World of English</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 15:14:52</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44170968"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44170694">
          <h3>
            <a
              class="item"
              href="https://github.com/collidingScopes/3d-model-playground"
              >Show HN: Controlling 3D models with voice and hand gestures</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 14:45:52</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44170694"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text">
              <p>
                - use voice commands to change interaction mode (drag, rotate,
                scale, animate)
              </p>
              <p>- use hand gestures to control the 3D model</p>
              <p>
                - drag/drop to import other models (only GLTF format supported
                for now)
              </p>
              <p>
                Created using threejs, mediapipe, web speech API, rosebud AI,
                and Quaternius 3D models
              </p>
              <p>
                Githhub repo:
                <a href="https://github.com/collidingScopes/3d-model-playground"
                  >https://github.com/collidingScopes/3d-model-playground</a
                >
              </p>
              <p>
                Demo:
                <a
                  href="https://xcancel.com/measure_plan/status/1929900748235550912"
                  >https://xcancel.com/measure_plan/status/1929900748235550912</a
                >
              </p>
              <p>I'd love to get your feedback! Thank you</p>
            </div>
          </section>
        </section>
        <section id="44170657">
          <h3>
            <a class="item" href="https://pinsend.app"
              >Show HN: PinSend – Share text between devices using a PIN(P2P, no
              login)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 14:41:47</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44170657"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built [PinSend](<a href="https://pinsend.app"
                  >https://pinsend.app</a
                >) — a free web app for instantly sharing text between devices,
                using a simple 6-character PIN.
              </p>
              <p>
                - No login, no account, no install. - Peer-to-peer WebRTC
                transfer (no server relay, no cloud). - Cross-platform: works on
                any modern browser.
              </p>
              <p>
                I built PinSend for myself while developing web apps—I was
                always copying ngrok links and sending error logs between my
                laptop and mobile devices. I wanted a frictionless, instant way
                to move links and text between anything.
              </p>
              <p>
                *Demo:* 1. Open
                <a href="https://pinsend.app">https://pinsend.app</a> on your
                phone &amp; laptop 2. Paste or type some text and hit "Send",
                enter the PIN on the other device 3. Instant sync! 4. No more
                emailing or Whatsapping notes to yourself
              </p>
              <p>Would love feedback!</p>
            </div>
          </section>
        </section>
        <section id="44169314">
          <h3>
            <a class="item" href="https://localmess.github.io/"
              >Covert Web-to-App Tracking via Localhost on Android</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 12:35:06</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44169314"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44169132">
          <h3>
            <a class="item" href="https://github.com/neocanable/garlic"
              >Show HN: I wrote a Java decompiler in pure C language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 12:14:29</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44169132"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44169039">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/spark/jobs/kDeJlPK-software-engineer-full-stack"
              >Spark AI (YC W24) Is Hiring a Full Stack Engineer in San
              Francisco</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 12:00:53</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44168994">
          <h3>
            <a
              class="item"
              href="https://blogs.windows.com/windows-insider/2025/06/02/updates-to-windows-for-the-digital-markets-act/"
              >Updates to Windows for the Digital Markets Act</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 11:55:46</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44168994"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44168705">
          <h3>
            <a
              class="item"
              href="https://astroimagery.com/astronomy/what-does-seeing-mean-in-astrophotography/"
              >What Is "Seeing" in Astrophotography? The Science Behind
              Atmospheric Turbulence</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 11:15:41</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44168705"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44168658">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/ukraine-killer-drones"
              >Ukraine's autonomous killer drones defeat electronic warfare</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 11:08:51</span
              ><span class="points-container"
                >Points: <span class="points">210</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44168658"
                  >Comments</a
                ><span class="descendants">: 210</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44168265">
          <h3>
            <a
              class="item"
              href="https://www.belfercenter.org/publication/plutonium-mountain-inside-17-year-mission-secure-legacy-soviet-nuclear-testing"
              >Plutonium Mountain: The 17-year mission to guard remains of
              Soviet nuclear tests</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 10:06:37</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44168265"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44167592">
          <h3>
            <a class="item" href="https://github.com/iamgio/quarkdown"
              >Quarkdown: A modern Markdown-based typesetting system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 08:06:28</span
              ><span class="points-container"
                >Points: <span class="points">429</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44167592"
                  >Comments</a
                ><span class="descendants">: 201</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44167049">
          <h3>
            <a class="item" href="https://blog.fredrb.com/2025/06/02/futex-fun/"
              >Fun with Futex</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 06:37:25</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44167049"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44166155">
          <h3>
            <a
              class="item"
              href="https://localroger.com/prime-intellect/mopiall.html"
              >The Metamorphosis of Prime Intellect (1994)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 04:05:19</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44166155"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44166102">
          <h3>
            <a
              class="item"
              href="https://resobscura.substack.com/p/ai-makes-the-humanities-more-important"
              >AI makes the humanities more important, but also weirder</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-03 @ 03:53:20</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44166102"
                  >Comments</a
                ><span class="descendants">: 221</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44163496">
          <h3>
            <a
              class="item"
              href="https://www.mongodb.com/blog/post/engineering/conformance-checking-at-mongodb-testing-our-code-matches-our-tla-specs"
              >Conformance checking at MongoDB: Testing that our code matches
              our TLA+ specs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-02 @ 21:50:15</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44163496"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44163063">
          <h3>
            <a class="item" href="https://fly.io/blog/youre-all-nuts/"
              >My AI skeptic friends are all nuts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-02 @ 21:09:53</span
              ><span class="points-container"
                >Points: <span class="points">1947</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44163063"
                  >Comments</a
                ><span class="descendants">: 2338</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44162814">
          <h3>
            <a
              class="item"
              href="https://www.answer.ai/posts/2025-01-15-monsterui.html"
              >MonsterUI: Python library for building front end UIs quickly in
              FastHTML apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-02 @ 20:41:24</span
              ><span class="points-container"
                >Points: <span class="points">123</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44162814"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44159758">
          <h3>
            <a class="item" href="https://github.com/lixiasky/vanta"
              >Show HN: A toy version of Wireshark (student project)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-02 @ 15:20:13</span
              ><span class="points-container"
                >Points: <span class="points">244</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44159758"
                  >Comments</a
                ><span class="descendants">: 71</span></span
              >
            </h4>
            <div class="text">
              <p>
                I recently published a small open-source project. It’s a minimal
                network packet analyzer written in Go — designed more like a
                learning toy than a replacement for Wireshark.
              </p>
              <p>
                It currently supports parsing basic protocols like TLS, DNS, and
                HTTP, and includes a tiny fuzzing engine to test payload
                responses. You can inspect raw packet content directly from the
                terminal. The output is colored for readability, and the code
                structure is kept simple and clear.
              </p>
              <p>
                The entire program is very small — just about 400 lines of Go
                code. I know it’s not anywhere near Wireshark’s level, and I
                still use Wireshark myself for real-world analysis. But I built
                it as a personal experiment in network parsing and to understand
                protocol behavior more directly.
              </p>
              <p>
                If you're curious or would like to try it out, the project is
                here:
                <a href="https://github.com/lixiasky/vanta"
                  >https://github.com/lixiasky/vanta</a
                >
              </p>
              <p>
                I'm happy to hear your thoughts, suggestions, or critiques. It’s
                just a little network toy, but maybe someone out there finds it
                useful or fun.
              </p>
              <p>Thanks for reading!</p>
            </div>
          </section>
        </section>
        <section id="44159528">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44159528"
              >Ask HN: Who is hiring? (June 2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-02 @ 15:01:18</span
              ><span class="points-container"
                >Points: <span class="points">339</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44159528"
                  >Comments</a
                ><span class="descendants">: 368</span></span
              >
            </h4>
            <div class="text">
              <i>not</i> an option.
              <p>
                Please only post if you personally are part of the hiring
                company—no recruiting firms or job boards. One post per company.
                If it isn't a household name, explain what your company does.
              </p>
              <p>
                Please only post if you are actively filling a position and are
                committed to responding to applicants.
              </p>
              <p>
                Commenters: please don't reply to job posts to complain about
                something. It's off topic here.
              </p>
              <p>
                Readers: please only email if you are personally interested in
                the job.
              </p>
              <p>
                Searchers: try
                <a href="https://dheerajck.github.io/hnwhoishiring/"
                  >https://dheerajck.github.io/hnwhoishiring/</a
                >,
                <a
                  href="https://amber-williams.github.io/hackernews-whos-hiring/"
                  >https://amber-williams.github.io/hackernews-whos-hiring/</a
                >,
                <a href="http://nchelluri.github.io/hnjobs/"
                  >http://nchelluri.github.io/hnjobs/</a
                >,
                <a href="https://hnresumetojobs.com"
                  >https://hnresumetojobs.com</a
                >,
                <a href="https://hnhired.fly.dev">https://hnhired.fly.dev</a>,
                <a href="https://kennytilton.github.io/whoishiring/"
                  >https://kennytilton.github.io/whoishiring/</a
                >,
                <a href="https://hnjobs.emilburzo.com"
                  >https://hnjobs.emilburzo.com</a
                >, or this (unofficial) Chrome extension:
                <a
                  href="https://chromewebstore.google.com/detail/hn-hiring-pro/mpfaljjblphnlloddaplgicpkinikjlp"
                  >https://chromewebstore.google.com/detail/hn-hiring-pro/mpfal...</a
                >.
              </p>
              <p>Don't miss these other fine threads:</p>
              <p>
                <i>Who wants to be hired?</i>
                <a href="https://news.ycombinator.com/item?id=44159525"
                  >https://news.ycombinator.com/item?id=44159525</a
                >
              </p>
              <p>
                <i>Freelancer? Seeking freelancer?</i>
                <a href="https://news.ycombinator.com/item?id=44159527"
                  >https://news.ycombinator.com/item?id=44159527</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44159166">
          <h3>
            <a
              class="item"
              href="https://github.com/cloudflare/workers-oauth-provider/"
              >Cloudlflare builds OAuth with Claude and publishes all the
              prompts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-02 @ 14:24:54</span
              ><span class="points-container"
                >Points: <span class="points">725</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44159166"
                  >Comments</a
                ><span class="descendants">: 451</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44157177">
          <h3>
            <a class="item" href="https://github.com/kanbn/kan"
              >Show HN: Kan.bn – An open-source alterative to Trello</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-02 @ 09:47:48</span
              ><span class="points-container"
                >Points: <span class="points">456</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44157177"
                  >Comments</a
                ><span class="descendants">: 209</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44143045">
          <h3>
            <a
              class="item"
              href="https://patricia.no/2025/05/30/why_lean_software_dev_is_wrong.html"
              >GUIs are built at least 2.5 times</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 09:20:36</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44143045"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44142991">
          <h3>
            <a
              class="item"
              href="https://www.prompthub.us/blog/a-complete-guide-to-meta-prompting"
              >A Complete Guide to Meta Prompting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 09:05:53</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44142991"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44142652">
          <h3>
            <a class="item" href="https://ratfactor.com/forth/implementing"
              >Implementing a Forth</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 07:38:30</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44142652"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44142592">
          <h3>
            <a
              class="item"
              href="https://lamport.azurewebsites.net/tla/high-level-view.html"
              >A High-Level View of TLA+</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 07:26:30</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44142592"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44142565">
          <h3>
            <a
              class="item"
              href="https://www.monperrus.net/martin/store-data-paper"
              >How to Store Data on Paper?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 07:20:15</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44142565"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44142343">
          <h3>
            <a
              class="item"
              href="https://shot97retro.blogspot.com/2017/12/sid-meiers-pirates-in-depth-written.html"
              >Sid Meier's Pirates – In-depth (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-31 @ 06:43:27</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44142343"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
