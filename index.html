<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39747116">
          <h3>
            <a
              class="item"
              href="https://www.macrumors.com/2024/03/18/do-not-update-macos-sonoma-14-4/"
              >macOS Sonoma 14.4: Reasons Not to Update</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 17:17:32</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39747116"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39747105">
          <h3>
            <a
              class="item"
              href="https://jacobbartlett.substack.com/p/oh-sht-my-app-is-successful-and-i"
              >Oh shit, my app is successful and I didn't think about
              accessibility</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 17:16:15</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39747105"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39746958">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/scratch-data/jobs/ZWGfZWg-open-source-golang-freelancer"
              >Scratch Data (YC S21) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 17:00:14</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39746806">
          <h3>
            <a
              class="item"
              href="https://apnews.com/article/epa-asbestos-cancer-brakes-biden-72b0fa8b36adedaff6000034d35c2acd"
              >EPA bans asbestos, a deadly carcinogen still in use decades after
              partial ban</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 16:47:38</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39746806"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39746799">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2024/03/25/3-body-problem-tv-review-netflix"
              >"3 Body Problem" Is a Rare Species of Sci-Fi Epic</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 16:46:42</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39746799"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39746625">
          <h3>
            <a
              class="item"
              href="https://vanhunteradams.com/Pico/Bootloader/Boot_sequence.html"
              >RP2040 Boot Sequence</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 16:31:55</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39746625"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39746468">
          <h3>
            <a
              class="item"
              href="https://blog.google/intl/en-in/products/platforms/how-were-helping-creators-disclose-altered-or-synthetic-content/"
              >YouTube now requires to label their realistic-looking videos made
              using AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 16:19:58</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39746468"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39746446">
          <h3>
            <a
              class="item"
              href="https://solar.lowtechmagazine.com/2024/03/how-to-escape-from-the-iron-age/"
              >How to Escape from the Iron Age?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 16:18:34</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39746446"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39746333">
          <h3>
            <a
              class="item"
              href="https://www.cbc.ca/news/world/havana-syndrome-nih-study-1.7147124"
              >5-year study finds no brain abnormalities in 'Havana Syndrome'
              patients</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 16:07:35</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39746333"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39746256">
          <h3>
            <a class="item" href="https://trial.nuanced.dev/demo/"
              >Show HN: Fake or real? Try our AI image detector</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 15:59:34</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39746256"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.nuanced.dev/">https://www.nuanced.dev/</a>).
              We want to share a tool we’re working on to detect fake and real
              images:
              <a href="https://trial.nuanced.dev/demo/"
                >https://trial.nuanced.dev/demo/</a
              >.
              <p>
                The UI is bare-bones but you’ll get the idea. Drag or upload an
                image and our tool will display the probabilities with which it
                thinks that the image might be AI-generated or not. If you want,
                you can click “No, it’s AI” to confirm that the image was
                AI-generated, or “No, it’s real” to confirm that the image was
                <i>not</i> AI-generated.
              </p>
              <p>
                Why we’re working on this: as AI-generated images continue to
                blur the line between real and artificial and their adoption and
                quality rises, so too does the risk for fraud and
                misinformation. Not being able to trust what you see online
                threatens whatever level of "realness" or authenticity online
                material has. Companies like dating apps, news sites, and trust
                and safety teams have a growing need to distinguish AI-generated
                images from authentic ones.
              </p>
              <p>
                The models we built are trained on various architectures, such
                as Dalle-3, Midjourney, and SDXL, with continuous integration of
                data from the latest AI image generators. Our technology can
                detect deepfakes and verify user profile images, documents, IDs,
                or media images. Additionally, it can detect fake or counterfeit
                products, services, or experiences being marketed on e-commerce
                platforms.
              </p>
              <p>
                We hope it’s fun and would be very interested in any cases it
                gets wrong, as well as whatever else you’d like to ask or say!
              </p>
            </div>
          </section>
        </section>
        <section id="39745993">
          <h3>
            <a
              class="item"
              href="https://rxdb.info/articles/websockets-sse-polling-webrtc-webtransport.html"
              >WebSockets vs. Server-Sent-Events vs. Long-Polling vs. WebRTC vs.
              WebTransport</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 15:36:57</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39745993"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39745923">
          <h3>
            <a
              class="item"
              href="https://programmingattack.com/articles/optimizing-the-article-life-from-a-thousand-to-a-milion-particles"
              >Optimizing the Particle Life: From 400 to 4M particles</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 15:32:53</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39745923"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39745700">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39745700"
              >Parakeet: A Tiny LLM</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 15:15:58</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39745700"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                https://colab.research.google.com/drive/1gI8CM9Bz9ov0-E6aL2jF808rE56UtZyF?usp=sharing
              </p>
              <p>
                This post is more for gauging interest, I plan to release the
                entire end to end code including:
              </p>
              <p></p>
              <pre><code>  - Dataset curation (including citations).
  - Model checkpoints.
  - Inference code.
  - Synthetic data generation.
  - etc.
</code></pre>
              Parakeet is the name of a small language model I've designed from
              the ground up for the purpose of research.
              <p>
                The challenge was to see how far I could push the limits of LLM
                tech. given a massively constrained environment.
              </p>
              <p>
                It was trained on a 3080 Ti and has a considerable amount more
                training to do but here are the results so far.
              </p>
              <p>Specs:</p>
              <p></p>
              <pre><code>  - 18 layers / 18 heads
  - 8K context.
  - 1152 embedding dimension.
  - cl100k tokenizer (TikToken)
  - ALiBi (max I can train is 1200 tokens so this was crucial)
  - KV caching for improved inference.
  - Grouped Query Attention (2 layers per group / speeds up inference)
  - `min_p`: Cut-off low quality tokens.
  - Softmax1: https://github.com/kyegomez/AttentionIsOFFByOne - Not sure if this really made much of a difference / it's hard to train comparable models as compute resources are limited.
  - Sub 400M parameters (378M from memory)
</code></pre>
              Edit:
              <p></p>
              <pre><code>  - Things I forgot to mention: NO RLHF / DPO, it's entirely dataset driven.
  - The model seems mostly harmless due to being trained only with synthetic data.
  - A side-effect of only being trained on synthetic data is that the model learns quite fast.
  - There's probably less than 2 weeks of actual training time in the model so far.
  - You don't need to start from scratch when altering model parameters. Weights can be copied/merged in and out of smaller/larger models.
</code></pre>
              Why?
              <p></p>
              <pre><code>  - Curiosity got to me - I wanted to know what would happen if a model with a considerably small amount of parameters was bombarded with data.
  - There were many results showing these language models with room for more training but instead many are scaled up.
  - I wanted to see what happens if you just keep training them.
</code></pre>
              References:
              <p></p>
              <pre><code>  - "./datasets/wikipedia-20220301.en.jsonl"),
  - "./datasets/euclaise_littletown.jsonl"),            # https://huggingface.co/datasets/euclaise/LittleTown?row=99
  - "./datasets/squad-v2.0-processed.jsonl"),
  - "./datasets/huggingface_ultrachat200k.jsonl"),      # https://huggingface.co/datasets/HuggingFaceH4/ultrachat_200k
  - "./datasets/wizardlm_evol_instruct_v2_196k.jsonl"), # https://huggingface.co/datasets/WizardLM/WizardLM_evol_instruct_V2_196k
  - "./datasets/crumb_clean_instruct_440k.jsonl"),      # https://huggingface.co/datasets/crumb/Clean-Instruct-440k - Generate a story starting with the sentence "It was already late when they stepped out of the house".
  - "./datasets/openorca_4m.jsonl"),                    # https://huggingface.co/datasets/Open-Orca/OpenOrca
  - "./datasets/databricks_dolly15k.jsonl"),            # https://huggingface.co/datasets/databricks/databricks-dolly-15k - Common-sense reasoning.
  - "./datasets/teven_code_contests4m.jsonl"),          # https://huggingface.co/datasets/teven/code_contests - ['PYTHON', 'PYTHON3', 'JAVA', 'CPP']
  - "./datasets/squad-v2.0-summaries.jsonl"),
  - "./datasets/google-boolq.jsonl"),
  - "./datasets/stingning_ultrachat.jsonl"),            # https://huggingface.co/datasets/stingning/ultrachat
  - "./datasets/wikimovies-train.jsonl"),
  - "./datasets/kunishou-databricks-dolly-15k-ja.jsonl"),
  - "./datasets/wizardlm_evol_instruct_70k.jsonl"),     # https://huggingface.co/datasets/WizardLM/WizardLM_evol_instruct_70k
  - "./datasets/map_codefeedback.jsonl"),
</code></pre>
              Sorry for bad formatting!
              <p>...continues in reply due to 4000 char. limit.</p>
            </div>
          </section>
        </section>
        <section id="39745183">
          <h3>
            <a
              class="item"
              href="https://shkspr.mobi/blog/2024/03/well-known-avatar/"
              >.well-known/avatar</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 14:39:15</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39745183"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39745072">
          <h3>
            <a
              class="item"
              href="https://wedistribute.org/2024/03/activitypub-nomadic-identity/"
              >Nomadic Identity Is Coming to ActivityPub</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 14:30:20</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39745072"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39744595">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/03/18/arts/design/unsolved-gardner-museum-heist.html"
              >Empty Frames and Other Oddities from the Unsolved Gardner Museum
              Heist</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 13:56:53</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39744595"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39743594">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2024/03/tick-killing-pill-shows-promising-results-in-human-trial/"
              >Tick-killing pill shows promising results in human trial</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 12:45:49</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39743594"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39742916">
          <h3>
            <a
              class="item"
              href="https://www.pinaraf.info/2024/03/look-ma-i-wrote-a-new-jit-compiler-for-postgresql/"
              >I wrote a new JIT compiler for PostgreSQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 11:57:24</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39742916"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39742692">
          <h3>
            <a
              class="item"
              href="https://lwn.net/SubscriberLink/964735/8b795f23495af1d4/"
              >Cranelift code generation comes to Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 11:39:42</span
              ><span class="points-container"
                >Points: <span class="points">226</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39742692"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39742188">
          <h3>
            <a
              class="item"
              href="https://www.sheshbabu.com/posts/thoughts-on-the-future-of-software-development/"
              >Thoughts on the Future of Software Development</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 10:29:44</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39742188"
                  >Comments</a
                ><span class="descendants">: 179</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39742114">
          <h3>
            <a class="item" href="https://github.com/plankanban/planka"
              >Elegant open source project tracking, Trello like but
              self-hosted</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 10:16:16</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39742114"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39741956">
          <h3>
            <a class="item" href="https://gitlab.com/dalibo/transqlate"
              >Transpile Any SQL to PostgreSQL Dialect</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 09:46:57</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39741956"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39741600">
          <h3>
            <a
              class="item"
              href="https://www.arroyo.dev/blog/why-arrow-and-datafusion"
              >Building a streaming SQL engine with Arrow and DataFusion</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 08:45:52</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39741600"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39740654">
          <h3>
            <a
              class="item"
              href="https://placesjournal.org/article/step-by-step-repair-manuals-political-ecology/"
              >Step by Step: Thinking through and beyond the repair manual</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 04:59:35</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39740654"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39740607">
          <h3>
            <a
              class="item"
              href="https://hakaimagazine.com/features/bats-of-the-midnight-sun/"
              >Bats of the Midnight Sun</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 04:48:12</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39740607"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39740518">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39740518"
              >Ask HN: Do You Also Marvel at the Complexity of Everyday
              Objects?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 04:26:03</span
              ><span class="points-container"
                >Points: <span class="points">280</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39740518"
                  >Comments</a
                ><span class="descendants">: 207</span></span
              >
            </h4>
            <div class="text">
              <p>
                Maybe it was the solder fumes, but I started thinking about what
                it <i>actually</i> took to create that spool of wire --
                everything from the geologists and miners extracting ore,
                through all the metallurgy, industrial engineering, and plastics
                work. And I started to marvel at all the work and expertise it
                took to make something that I normally would've just considered
                a semi-disposable consumable item. It made me wonder whether
                that spool of wire was actually a piece of technology on par in
                sophistication with all the software that I build every day.
              </p>
              <p>
                It was such an odd moment, but it's has caused a lasting
                perspective shift. almost every day I'll look at some
                commonplace object I took for granted and think "this is
                actually so complex, no single human has all the knowledge or
                expertise to create it".
              </p>
              <p>
                I'm curious if anybody else has had a similar experience and/or
                what are some simple everyday objects that give you pause when
                you stop to think about their complexity
              </p>
            </div>
          </section>
        </section>
        <section id="39735716">
          <h3>
            <a
              class="item"
              href="https://crookedtimber.org/2024/03/16/occasional-paper-when-armor-met-lips"
              >When Armor Met Lips</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-17 @ 16:44:12</span
              ><span class="points-container"
                >Points: <span class="points">432</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39735716"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39735093">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/science-nature/inside-the-quest-to-find-evidence-of-auroras-in-ancient-texts-180983844/"
              >Ancient Texts Can Shed Light on Auroras</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-17 @ 15:27:57</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39735093"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39730748">
          <h3>
            <a
              class="item"
              href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC1119282/"
              >Instinctive Sleeping and Resting Postures (2000)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-17 @ 00:33:38</span
              ><span class="points-container"
                >Points: <span class="points">266</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39730748"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39723041">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=ha3fDU-1wHk"
              >VR Powered by N64 [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-16 @ 03:13:59</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39723041"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
