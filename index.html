<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44808794">
          <h3>
            <a class="item" href="https://grell.dev/blog/ai_rejection"
              >Anthropic rejects the main developer of the library they use</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 07:25:43</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44808794"
                  >Comments</a
                ><span class="descendants">: 119</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44808693">
          <h3>
            <a
              class="item"
              href="https://blog.computationalcomplexity.org/2025/08/some-thoughts-on-journals-refereeing.html"
              >Some thoughts on journals, refereeing, and the P vs. NP
              problem</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 07:12:08</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44808693"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44808550">
          <h3>
            <a
              class="item"
              href="https://www.davelu.com/p/learn-to-embrace-conflict"
              >Why there are so many more South Asian CEOs than East Asian CEOs
              in the US</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 06:52:49</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44808550"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44808542">
          <h3>
            <a
              class="item"
              href="https://acko.net/blog/html-is-dead-long-live-html/"
              >HTML Is Dead, Long Live HTML</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 06:51:13</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44808542"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44808423">
          <h3>
            <a class="item" href="https://wiki.why2025.org/Badge/Fire_hazard"
              >Fire hazard of WHY2025 badge due to 18650 Li-Ion cells</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 06:29:21</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44808423"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44808122">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2025/Aug/5/greyduet-on-rteachers/"
              >Teacher AI Use Is Already Out of Control and It's Not Ok</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 05:44:29</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44808122"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44807868">
          <h3>
            <a class="item" href="https://github.com/KittenML/KittenTTS"
              >Show HN: Kitten TTS â€“ 25MB CPU-Only, Open-Source TTS Model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 05:04:36</span
              ><span class="points-container"
                >Points: <span class="points">265</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44807868"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
            <div class="text">
              <p>
                This release supports English text-to-speech applications in
                eight voices: four male and four female. The model is quantized
                to int8 + fp16, and it uses onnx for runtime. The model is
                designed to run literally anywhere eg. raspberry pi, low-end
                smartphones, wearables, browsers etc. No GPU required!
              </p>
              <p>
                We're releasing this to give early users a sense of the latency
                and voices that will be available in our next release (hopefully
                next week). We'd love your feedback! Just FYI, this model is an
                early checkpoint trained on less than 10% of our total data.
              </p>
              <p>
                We started working on this because existing expressive OSS
                models require big GPUs to run them on-device and the cloud
                alternatives are too expensive for high frequency use. We think
                there's a need for frontier open-source models that are tiny
                enough to run on edge devices!
              </p>
            </div>
          </section>
        </section>
        <section id="44807410">
          <h3>
            <a
              class="item"
              href="https://amaranth-lang.org/docs/amaranth/latest/intro.html#the-amaranth-language"
              >The Amaranth hardware description language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 03:49:02</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44807410"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44807210">
          <h3>
            <a
              class="item"
              href="https://github.com/Picocrypt/Picocrypt/issues/134"
              >I'm Archiving Picocrypt</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 03:14:22</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44807210"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44807154">
          <h3>
            <a
              class="item"
              href="https://www.marinecorpstimes.com/news/your-marine-corps/2025/08/04/the-marines-now-have-an-official-drone-fighting-handbook/"
              >Marines now have an official drone-fighting handbook</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 03:05:17</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44807154"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44807002">
          <h3>
            <a class="item" href="https://permacomputing.net/software_rot/"
              >Software Rot</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-06 @ 02:35:19</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44807002"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44804411">
          <h3>
            <a
              class="item"
              href="https://blog.google/products/gemini/storybooks/"
              >Create personal illustrated storybooks in the Gemini app</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 21:14:49</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44804411"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44804230">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/kyber/jobs/6RvaAVR-enterprise-account-executive-ae"
              >Kyber (YC W23) is hiring enterprise account executives</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 21:02:21</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44802916">
          <h3>
            <a
              class="item"
              href="https://www.bloodinthemachine.com/p/the-ai-bubble-is-so-big-its-propping"
              >AI is propping up the US economy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 19:19:25</span
              ><span class="points-container"
                >Points: <span class="points">234</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44802916"
                  >Comments</a
                ><span class="descendants">: 269</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44802886">
          <h3>
            <a class="item" href="https://ergaster.org/til/base64-encoded-json/"
              >Spotting base64 encoded JSON, certificates, and private keys</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 19:17:38</span
              ><span class="points-container"
                >Points: <span class="points">284</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44802886"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44802414">
          <h3>
            <a class="item" href="https://ollama.com/turbo">Ollama Turbo</a>
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 18:46:18</span
              ><span class="points-container"
                >Points: <span class="points">352</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44802414"
                  >Comments</a
                ><span class="descendants">: 191</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44801027">
          <h3>
            <a class="item" href="https://github.com/w3c/png/issues/39"
              >Consider using Zstandard and/or LZ4 instead of Deflate</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 17:18:37</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44801027"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44800746">
          <h3>
            <a class="item" href="https://openai.com/open-models/"
              >Open models by OpenAI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 17:02:02</span
              ><span class="points-container"
                >Points: <span class="points">1764</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44800746"
                  >Comments</a
                ><span class="descendants">: 664</span></span
              >
            </h4>
            <div class="text">
              <a href="https://openai.com/index/introducing-gpt-oss/"
                >https://openai.com/index/introducing-gpt-oss/</a
              >
            </div>
          </section>
        </section>
        <section id="44800185">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/news/claude-opus-4-1"
              >Claude Opus 4.1</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 16:28:05</span
              ><span class="points-container"
                >Points: <span class="points">763</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44800185"
                  >Comments</a
                ><span class="descendants">: 284</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44798410">
          <h3>
            <a
              class="item"
              href="https://trial.medpath.com/news/5c43f09ebb6d0f8e/ozempic-shows-anti-aging-effects-in-first-clinical-trial-reversing-biological-age-by-3-1-years"
              >Ozempic shows anti-aging effects in trial</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 14:28:39</span
              ><span class="points-container"
                >Points: <span class="points">270</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44798410"
                  >Comments</a
                ><span class="descendants">: 430</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44798189">
          <h3>
            <a
              class="item"
              href="https://colton.dev/blog/curing-your-ai-10x-engineer-imposter-syndrome/"
              >Things that helped me get out of the AI 10x engineer imposter
              syndrome</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 14:10:42</span
              ><span class="points-container"
                >Points: <span class="points">818</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44798189"
                  >Comments</a
                ><span class="descendants">: 585</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44798166">
          <h3>
            <a
              class="item"
              href="https://deepmind.google/discover/blog/genie-3-a-new-frontier-for-world-models/"
              >Genie 3: A new frontier for world models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 14:08:52</span
              ><span class="points-container"
                >Points: <span class="points">1311</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44798166"
                  >Comments</a
                ><span class="descendants">: 441</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44796953">
          <h3>
            <a class="item" href="https://www.buildyourownlisp.com/"
              >Build Your Own Lisp</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 11:55:20</span
              ><span class="points-container"
                >Points: <span class="points">250</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44796953"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44796526">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/scientific-fraud-has-become-industry-alarming-analysis-finds"
              >Scientific fraud has become an 'industry,' analysis finds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 10:56:07</span
              ><span class="points-container"
                >Points: <span class="points">362</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44796526"
                  >Comments</a
                ><span class="descendants">: 316</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44795825">
          <h3>
            <a
              class="item"
              href="https://apps.apple.com/app/ublock-origin-lite/id6745342698"
              >uBlock Origin Lite now available for Safari</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-05 @ 09:01:54</span
              ><span class="points-container"
                >Points: <span class="points">1048</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44795825"
                  >Comments</a
                ><span class="descendants">: 402</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44782690">
          <h3>
            <a class="item" href="https://kartproject.org/"
              >Kart â€“ Distributed version-control for geospatial and tabular
              data</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-04 @ 06:35:17</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44782690"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44778304">
          <h3>
            <a
              class="item"
              href="https://www.melaniedunea.com/essays/blog-post-title-one-phd62"
              >Bourdain, My Camera, and Me (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-03 @ 17:51:41</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44778304"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44766771">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44766771"
              >Ask HN: Have you ever regretted open-sourcing something?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-02 @ 11:37:00</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44766771"
                  >Comments</a
                ><span class="descendants">: 280</span></span
              >
            </h4>
            <div class="text">
              <p>
                Maybe it became a burden to maintain, attracted the wrong users,
                or got used in ways you didnâ€™t expect.
              </p>
              <p>Would love to hear your experience - good or bad.</p>
            </div>
          </section>
        </section>
        <section id="44765981">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/the-first-widespread-cure-for-hiv-could-be-in-children/"
              >The first widespread cure for HIV could be in children</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-02 @ 09:20:42</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44765981"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44765748">
          <h3>
            <a
              class="item"
              href="https://www.reachablecode.com/2025/07/31/c26-reflections-adventures-compile-time-uml/"
              >C++26 Reflections adventures and compile time UML</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-02 @ 08:29:23</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44765748"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
