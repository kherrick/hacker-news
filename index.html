<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45722733">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45722733"
              >Ask HN: Is AWS Down Again?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 16:16:05</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45722733"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                Downdetector is also recording failure reports:
                https://downdetector.com/status/aws-amazon-web-services/
              </p>
            </div>
          </section>
        </section>
        <section id="45722639">
          <h3>
            <a class="item" href="https://www.claude.com/claude-for-excel"
              >Claude for Excel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 16:09:22</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45722639"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45722069">
          <h3>
            <a
              class="item"
              href="https://blog.pabloecortez.com/its-insulting-to-read-your-ai-generated-blog-post/"
              >It's insulting to read your AI-generated blog post</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 15:27:38</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45722069"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45721904">
          <h3>
            <a
              class="item"
              href="https://pyfound.blogspot.com/2025/10/NSF-funding-statement.html"
              >PSF has withdrawn $1.5M proposal to US Government grant
              program</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 15:12:08</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45721904"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45721801">
          <h3>
            <a
              class="item"
              href="https://exhibitdb.cmog.org/opacimages/Images/Pyrex/Rakow_1000132877.pdf"
              >Pyrex catalog from from 1938 with hand-drawn lab glassware
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 15:04:05</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45721801"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45721682">
          <h3>
            <a
              class="item"
              href="https://www.accc.gov.au/media-release/microsoft-in-court-for-allegedly-misleading-millions-of-australians-over-microsoft-365-subscriptions"
              >Microsoft in court for allegedly misleading Australians over 365
              subscriptions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 14:54:14</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45721682"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45721410">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/business/companies-hiring-jobs-ai-9ef675b6"
              >More big companies bet they can still grow without hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 14:30:18</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45721410"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45721160">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2510.02330"
              >EntropyLong: Effective Long-Context Training via Predictive
              Uncertainty</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 14:04:48</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45721160"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45720345">
          <h3>
            <a
              class="item"
              href="https://github.com/bchiha/Ready-Z80/tree/main/29-Multitasking"
              >Pre-emptive Z80 multitasking explainer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 12:39:52</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45720345"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719996">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45719996"
              >Artifact (YC W25) is hiring engineers in NYC to build modern
              ECAD</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 12:00:30</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                People are using Artifact to design their supersonic jets,
                reusable satellites, marine robots, and autonomous drones.
              </p>
              <p>
                We're looking for full-stack software engineers to join us at
                our office in Manhattan - to help design and build how hardware
                teams do their electrical systems engineering.
              </p>
              <p>
                Learn more here:
                <a href="https://www.artifact.engineer/"
                  >https://www.artifact.engineer/</a
                >
              </p>
              <p>If you're interested, shoot me an email with your resume:</p>
              <p>- Antony antony@artifact.engineer</p>
            </div>
          </section>
        </section>
        <section id="45719927">
          <h3>
            <a
              class="item"
              href="https://www.source-material.org/amazon-leak-reveals-true-data-centres-water-usage-secret-plan/"
              >Amazon strategised about keeping water use secret</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 11:53:22</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719927"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719788">
          <h3>
            <a class="item" href="https://boz.com/articles/you-are-how-you-act"
              >You are how you act</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 11:35:58</span
              ><span class="points-container"
                >Points: <span class="points">234</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719788"
                  >Comments</a
                ><span class="descendants">: 153</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719669">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/tech/ai/microsoft-needs-to-open-up-more-about-its-openai-dealings-59102de8"
              >Microsoft needs to open up more about its OpenAI dealings</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 11:19:27</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719669"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719140">
          <h3>
            <a
              class="item"
              href="https://blog.jim-nielsen.com/2025/dont-forget-these-html-tags/"
              >Don't forget these tags to make HTML work like you expect</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 10:01:12</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719140"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45719004">
          <h3>
            <a class="item" href="https://github.com/longbridge/gpui-component"
              >Rust cross-platform GPUI components</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 09:44:18</span
              ><span class="points-container"
                >Points: <span class="points">339</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45719004"
                  >Comments</a
                ><span class="descendants">: 135</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45718665">
          <h3>
            <a
              class="item"
              href="https://hackaday.com/2025/10/22/what-happened-to-running-what-you-wanted-on-your-own-machine/"
              >What happened to running what you wanted on your own machine?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 08:50:10</span
              ><span class="points-container"
                >Points: <span class="points">305</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45718665"
                  >Comments</a
                ><span class="descendants">: 188</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45718231">
          <h3>
            <a
              class="item"
              href="https://github.com/rolflobker/recall-for-linux"
              >Recall for Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 07:24:19</span
              ><span class="points-container"
                >Points: <span class="points">448</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45718231"
                  >Comments</a
                ><span class="descendants">: 182</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45717724">
          <h3>
            <a
              class="item"
              href="https://www.npmjs.com/package/vite-plugin-use-golang"
              >Show HN: Write Go code in JavaScript files</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 05:36:13</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45717724"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
            <div class="text">
              I built a Vite plugin that lets you write Go code directly in .js
              files using a "use golang" directive. It compiles to WebAssembly
              automatically.
            </div>
          </section>
        </section>
        <section id="45717397">
          <h3>
            <a class="item" href="https://tgvaughan.github.io/sicm/toc.html"
              >Structure and Interpretation of Classical Mechanics (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 04:27:45</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45717397"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45716109">
          <h3>
            <a
              class="item"
              href="https://lalinsky.com/2025/10/26/zio-async-io-for-zig.html"
              >How I turned Zig into my favorite language to write network
              programs in</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 00:01:17</span
              ><span class="points-container"
                >Points: <span class="points">297</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45716109"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45715055">
          <h3>
            <a class="item" href="https://github.com/dvir-biton/MyraOS"
              >Show HN: MyraOS – My 32-bit operating system in C and ASM (Hack
              Club project)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-26 @ 20:43:40</span
              ><span class="points-container"
                >Points: <span class="points">216</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45715055"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
            <div class="text">
              <p>
                This took me on the most interesting ride, where I’ve learned
                about OS theory and low level programming on a whole new level.
                I’ve spent hours upon hours, blood and tears, reading different
                OS theory blogs, learning low level concepts, debugging, testing
                and working on this project.
              </p>
              <p>
                I started by reading University books and online blogs, while
                also watching videos. Some sources that helped me out were OSDev
                Wiki (<a href="https://wiki.osdev.org/Expanded_Main_Page"
                  >https://wiki.osdev.org/Expanded_Main_Page</a
                >), OSTEP (<a href="https://pages.cs.wisc.edu/~remzi/OSTEP"
                  >https://pages.cs.wisc.edu/~remzi/OSTEP</a
                >), open-source repositories like MellOS and LemonOS (more
                advanced), DoomGeneric, and some friends that have built an OS
                before.
              </p>
              <p>
                This part was the longest, but also the easiest. I felt like I
                understood the theory, but still could not connect it into
                actual code. Sitting down and starting to code was difficult,
                but I knew that was the next step I needed to take! I began by
                working on the bootloader, which is optional since you can use a
                pre-made one (I switched to GRUB later), but implementing it was
                mainly for learning purposes and to warm up on ASM. These were
                my steps after that:
              </p>
              <p></p>
              <pre><code>  1) I started implementing the VGA driver, which gave me the ability to display text.
  2) Interrupts - IDT, ISR, IRQ, which signal to the CPU that a certain event occurred and needs handling (such as faults, hardware connected device actions, etc).
  3) Keyboard driver, which enables me to display the same text I type on my keyboard.
  4) PMM (Physical memory management)
  5) Paging and virtual memory management
  6) RTC driver - clock addition (which was, in my opinion, optional)
  7) PIT driver - Ticks every certain amount of time, and also  
  8) FS (File System) and physical HDD drivers - for the HDD I chose PATA (HDD communication protocol) for simplicity (SATA is a newer but harder option as well).
     For the FS I chose EXT2 (The Second Extended FileSystem), which is a foundational linux FS structure introduced in 1993. This FS structure is not the simplest,
     but is very popular in hobby-OS, it is very supported, easy to set up and upgrade to newer EXT versions, it has a lot of materials online, compared to other
     options. This was probably the longest and largest feature I had worked on.
  9) Syscall support.
  10) Libc implementation.
  11) Processing and scheduling for multiprocessing.
  12) Here I also made a shell to test it all.
</code></pre>
              At this point, I had a working shell, but later decided to go
              further and add a GUI! I was working on the FS (stage 8), when I
              heard about Hack Club’s Summer of Making (SoM). This was my first
              time practicing in HackClub, and I want to express my gratitude
              and share my enjoyment of participating in it.
              <p>
                At first I just wanted to declare the OS as finished after
                completing the FS, and a bit of other drivers, but because of
                SoM my perspective was changed completely. Because of the
                competition, I started to think that I needed to ship a complete
                OS, with processing, GUI and the bare minimum ability to run
                Doom. I wanted to show the community in SoM how everything
                works.
              </p>
              <p>
                Then I worked on it for another 2 months, after finishing the
                shell, just because of SoM!, totalling my project to almost 7
                months of work. At this time I added full GUI support, with
                dirty rectangles and double buffering, I made a GUI mouse
                driver, and even made a full Doom port! things I would've never
                even thought about without participating in SoM.
              </p>
              <p>
                This is my SoM project:
                <a href="https://summer.hackclub.com/projects/5191"
                  >https://summer.hackclub.com/projects/5191</a
                >.
              </p>
              <p>
                Every project has challenges, especially in such a low level
                project. I had to do a lot of debugging while working on this,
                and it is no easy task. I highly recommend using GDB which
                helped me debug so many of my problems, especially memory ones.
              </p>
              <p>
                The first major challenge I encountered was during the coding of
                processes - I realized that a lot of my paging code was
                completely wrong, poorly tested, and had to be reworked. During
                this time I was already in the competition and it was difficult
                keeping up with devlogs and new features while fixing old
                problems in a code I wrote a few months ago.
              </p>
              <p>
                Some more major problems occurred when trying to run Doom, and
                unlike the last problem, this was a disaster. I had random PFs
                and memory problems, one run could work while the next one
                wouldn’t, and the worst part is that it was only on the Doom,
                and not on processes I created myself. These issues took a lot
                of time to figure out. I began to question the Doom code itself,
                and even thought about giving up on the whole project.
              </p>
              <p>
                After a lot of time spent debugging, I fixed the issues. It was
                a combination of scheduling issues, Libc issues and the Qemu not
                having enough (wrongfully assuming 128MB for the whole OS was
                enough).
              </p>
              <p>
                Finally, I worked throughout all the difficulties, and shipped
                the project! In the end, the experience working on this project
                was amazing. I learned a lot, grew and improved as a developer,
                and I thank SoM for helping to increase my motivation and make
                the project memorable and unique like I never imagined it would
                be.
              </p>
              <p>
                The repo is at
                <a href="https://github.com/dvir-biton/MyraOS"
                  >https://github.com/dvir-biton/MyraOS</a
                >. I’d love to discuss any aspect of this with you all in the
                comments!
              </p>
            </div>
          </section>
        </section>
        <section id="45713359">
          <h3>
            <a
              class="item"
              href="https://thenewstack.io/ken-thompson-recalls-unixs-rowdy-lock-picking-origins/"
              >Ken Thompson recalls Unix's rowdy, lock-picking origins</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-26 @ 16:57:12</span
              ><span class="points-container"
                >Points: <span class="points">224</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45713359"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://computerhistory.org/blog/a-computing-legend-speaks/"
                >https://computerhistory.org/blog/a-computing-legend-speaks/</a
              >
              <p>
                The full 4-1/2 hours:
                <a href="https://www.youtube.com/watch?v=OmVHkL0IWk4"
                  >https://www.youtube.com/watch?v=OmVHkL0IWk4</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45693871">
          <h3>
            <a class="item" href="https://openbsd.llvm.moe/"
              >OpenBSD C/C++ Toolchain in the Browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 12:17:48</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45693871"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45683643">
          <h3>
            <a
              class="item"
              href="https://www.su.se/english/news/unexpected-patterns-in-historical-astronomical-observations-1.855042"
              >Unexpected patterns in historical astronomical observations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-23 @ 16:16:35</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45683643"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45680583">
          <h3>
            <a class="item" href="https://fly.io/blog/corrosion/">Corrosion</a>
          </h3>
          <section>
            <h4>
              <span>2025-10-23 @ 11:21:04</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45680583"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45672615">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/science-nature/these-sandhill-cranes-have-adopted-a-canadian-gosling-and-birders-have-flocked-to-watch-the-strange-family-180986828/"
              >Sandhill cranes have adopted a Canada gosling</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 17:45:21</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45672615"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45669394">
          <h3>
            <a
              class="item"
              href="https://www.hacktivate.app/why-teach-kids-to-hack"
              >Why I'm teaching kids to hack computers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 14:07:03</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45669394"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45665617">
          <h3>
            <a class="item" href="https://daily.jstor.org/enchanting-imposters/"
              >Enchanting Imposters</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 06:41:09</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45665617"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45664765">
          <h3>
            <a
              class="item"
              href="https://www.vice.com/en/article/viral-free-potatoes-post-cost-this-farmer-150-tons-of-crops/"
              >Viral 'Free Potatoes' Post Cost This Farmer 150 Tons of Crops</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-22 @ 03:59:42</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45664765"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45652998">
          <h3>
            <a class="item" href="https://geoutil.com"
              >Geoutil.com – Measure distances, areas, and convert geo data in
              the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-21 @ 06:20:38</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45652998"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
