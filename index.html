<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="38288444">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Oink%27s_Pink_Palace"
              >OiNK's Pink Palace was shut down 16 years ago</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 11:53:31</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38288444"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38288130">
          <h3>
            <a
              class="item"
              href="https://twitter.com/multikev/status/1724908185361011108"
              >I think I need to go lie down</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 11:07:23</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38288130"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38288061">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/info/2023/nov/15/removed-document"
              >Removed: Document</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 10:57:00</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38288061"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38288020">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/music/2023/nov/16/archive-of-contemporary-music-new-york"
              >'No one else is saving it': the fight to protect a historic music
              collection</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 10:52:11</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38288020"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38287554">
          <h3>
            <a class="item" href="https://dosdeck.com/"
              >DOS_deck: Play DOS games in the browser with full controller
              support</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 09:52:40</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38287554"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38287095">
          <h3>
            <a
              class="item"
              href="https://lwn.net/SubscriberLink/950466/0999d63fdf270781/"
              >The push to save the Itanium architecture in Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 08:46:36</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38287095"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38287043">
          <h3>
            <a
              class="item"
              href="https://deepmind.google/discover/blog/transforming-the-future-of-music-creation/"
              >Google: Transforming the Future of Music Creation</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 08:39:29</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38287043"
                  >Comments</a
                ><span class="descendants">: 190</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38286761">
          <h3>
            <a
              class="item"
              href="https://github.com/vectara/hallucination-leaderboard"
              >LLMs by Hallucination Rate</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 07:44:25</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38286761"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38286750">
          <h3>
            <a
              class="item"
              href="http://www.positiveatheism.org/hist/russell1.htm"
              >Bertrand Russell: A Free Man's Worship</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 07:42:16</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38286750"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38286130">
          <h3>
            <a
              class="item"
              href="http://zandarvts.blogspot.com/2023/11/last-post-please-read.html"
              >Last Post, Please Read</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 05:38:42</span
              ><span class="points-container"
                >Points: <span class="points">165</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38286130"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38285482">
          <h3>
            <a class="item" href="https://github.com/agentcasa/doda"
              >Show HN: OpenAI dev assistant GUI with local code interpreter</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 03:13:00</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38285482"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38285251">
          <h3>
            <a
              class="item"
              href="https://becomingaleader.substack.com/p/how-to-build-trust"
              >How to build trust as a new engineering manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 02:29:30</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38285251"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38285228">
          <h3>
            <a class="item" href="https://github.com/abi/screenshot-to-code"
              >Show HN: Convert any screenshot into clean HTML code using GPT
              Vision (OSS tool)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 02:27:40</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38285228"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built a simple React/Python app that takes screenshots of
                websites and converts them to clean HTML/Tailwind code.
              </p>
              <p>
                It uses GPT-4 Vision to generate the code, and DALL-E 3 to
                create placeholder images.
              </p>
              <p>
                To run it, all you need is an OpenAI key with GPT vision access.
              </p>
              <p>
                I’m quite pleased with how well it works most of the time.
                Sometimes, the image generations can be hilariously off. See
                here for a replica of Taylor Swift’s Instagram page:
                <a href="https://streamable.com/70gow1"
                  >https://streamable.com/70gow1</a
                >
                I initially had a hard time getting it to work on full page
                screenshots. GPT4 would code up the first couple of sections and
                then, get lazy and output placeholder comments for the rest of
                the page. With some prompt engineering, full page screenshots
                work a whole lot better now. It’s great for landing pages.
              </p>
              <p>
                Lots of ideas of where to go from here! Let me know if you have
                feedback and you find this useful :)
              </p>
            </div>
          </section>
        </section>
        <section id="38284196">
          <h3>
            <a
              class="item"
              href="https://neurofusionresearchinc.notion.site/Investigating-the-Impact-of-Cold-Plunges-on-Brain-Activity-99cdaa69889542fc8ef123ee9fe5130c?pvs=4"
              >Investigating the impact of cold plunges on brain activity</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 00:06:12</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38284196"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38284150">
          <h3>
            <a class="item" href="https://www.faa.gov/media/69476"
              >SpaceX Starship/Super Heavy OFT-2 Launch Authorized</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-16 @ 00:00:35</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38284150"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38283936">
          <h3>
            <a
              class="item"
              href="https://ivan.sanchezortega.es/development/2023/11/13/scintillocartography.html"
              >Scintillocartography</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 23:34:48</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38283936"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38283860">
          <h3>
            <a
              class="item"
              href="https://energyhistory.yale.edu/grand-ball-given-by-the-whales-vanity-fair-april-20-1861/"
              >"Grand Ball Given by the Whales," Vanity Fair, April 20, 1861</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 23:23:01</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38283860"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38283504">
          <h3>
            <a
              class="item"
              href="http://smalldatum.blogspot.com/2023/11/fixing-bug-109595-makes-mysql-almost-4x.html"
              >Fixing bug 109595 makes MySQL almost 4X faster on the Insert
              Benchmark</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 22:27:17</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38283504"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38282950">
          <h3>
            <a
              class="item"
              href="https://matklad.github.io/2023/11/15/push-ifs-up-and-fors-down.html"
              >Push ifs up and fors down</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 21:41:20</span
              ><span class="points-container"
                >Points: <span class="points">479</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38282950"
                  >Comments</a
                ><span class="descendants">: 216</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38282166">
          <h3>
            <a
              class="item"
              href="https://younganimator.uk/winner/1699875910225x437970782709919500"
              >Blender 16yo winner of UK young animator of the year</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 20:42:30</span
              ><span class="points-container"
                >Points: <span class="points">1368</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38282166"
                  >Comments</a
                ><span class="descendants">: 196</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38279459">
          <h3>
            <a
              class="item"
              href="https://razberry.substack.com/p/btree-factorio"
              >B-trees in Factorio</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 17:25:12</span
              ><span class="points-container"
                >Points: <span class="points">266</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38279459"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38278246">
          <h3>
            <a
              class="item"
              href="https://www.britishecologicalsociety.org/new-deep-learning-ai-tool-helps-ecologists-monitor-rare-birds-through-their-songs/"
              >AI tool helps ecologists monitor rare birds through their
              songs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 16:09:19</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38278246"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38278171">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2023/11/15/23960345/microsoft-cpu-gpu-ai-chips-azure-maia-cobalt-specifications-cloud-infrastructure"
              >The first two custom silicon chips designed by Microsoft for its
              cloud</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 16:02:51</span
              ><span class="points-container"
                >Points: <span class="points">223</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38278171"
                  >Comments</a
                ><span class="descendants">: 252</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38277926">
          <h3>
            <a class="item" href="https://simonwillison.net/2023/Nov/15/gpts/"
              >Exploring GPTs: ChatGPT in a trench coat?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 15:44:23</span
              ><span class="points-container"
                >Points: <span class="points">447</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38277926"
                  >Comments</a
                ><span class="descendants">: 193</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38277361">
          <h3>
            <a
              class="item"
              href="https://www.atlasobscura.com/articles/canned-food-history"
              >Canned food went from military rations to fancy appetizers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 15:06:19</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38277361"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38276743">
          <h3>
            <a
              class="item"
              href="https://www.raptitude.com/2023/10/the-truth-is-always-made-of-details/"
              >The truth is always made of details</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 14:09:17</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38276743"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38276680">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2023/11/study-reveals-how-natural-processes-helped-sculpt-the-great-sphinx-of-giza/"
              >The Great Sphinx of Giza may have have started out as a natural
              formation</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 14:02:50</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38276680"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38276075">
          <h3>
            <a class="item" href="https://wasmbyexample.dev/home.en-us.html"
              >WASM by example</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 12:46:58</span
              ><span class="points-container"
                >Points: <span class="points">303</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38276075"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38274642">
          <h3>
            <a
              class="item"
              href="https://blog.jgc.org/2023/11/my-primality-testing-code-is-6x-faster.html"
              >My primality testing code is faster than Sir Roger Penrose's</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 08:51:45</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38274642"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38273488">
          <h3>
            <a class="item" href="https://accentual.com/bmc64/"
              >Bare Metal Emulation on the Raspberry Pi – Commodore 64</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-15 @ 04:56:18</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38273488"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
