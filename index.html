<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42843989">
          <h3>
            <a class="item" href="https://lupyuen.org/articles/rust7.html"
              >Using the Rust standard library with the NuttX RTOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 18:16:23</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42843989"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42843817">
          <h3>
            <a
              class="item"
              href="https://cutlefish.substack.com/p/tbm-333-lean-graph-theory"
              >TBM 333: Lean Graph Theory</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 17:59:49</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42843817"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42843623">
          <h3>
            <a class="item" href="https://www.scd31.com/posts/taylorator"
              >The Taylorator – All Your Frequencies Are Belong to Us</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 17:42:36</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42843623"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42843335">
          <h3>
            <a
              class="item"
              href="https://blog.startifact.com/posts/the-curious-case-of-quentell/"
              >The Curious Case of Quentell</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 17:15:48</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42843335"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42843252">
          <h3>
            <a
              class="item"
              href="https://victorpoughon.fr/non-random-uniform-disk-sampling/"
              >Non-random uniform disk sampling</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 17:09:20</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42843252"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42843131">
          <h3>
            <a
              class="item"
              href="https://github.com/deepseek-ai/Janus/blob/main/janus_pro_tech_report.pdf"
              >DeepSeek releases Janus Pro, a text-to-image generator [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 16:57:45</span
              ><span class="points-container"
                >Points: <span class="points">325</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42843131"
                  >Comments</a
                ><span class="descendants">: 195</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42842270">
          <h3>
            <a
              class="item"
              href="https://bartwronski.com/2021/02/15/bilinear-down-upsampling-pixel-grids-and-that-half-pixel-offset/"
              >Bilinear down/upsampling, aligning pixel grids, and that infamous
              GPU half pixel (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 15:42:02</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42842270"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42842257">
          <h3>
            <a
              class="item"
              href="https://www.rafbf.org/news-and-stories/raf-history/operation-leg-pilot-unlike-any-other"
              >Operation Leg: When the RAF airdropped a prosthetic leg into a
              German POW castle</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 15:41:12</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42842257"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42842123">
          <h3>
            <a class="item" href="https://github.com/Tsadoq/ErisForge"
              >Show HN: I Created ErisForge, a Python Library for Abliteration
              of LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 15:29:54</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42842123"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
            <div class="text">
              <p>
                It is also quite useful to perform studies on propaganda and
                bias in LLMs (planning to experiment with deepseek).
              </p>
              <p>
                Features - Modify internal layers of LLMs to produce altered
                behaviors. - Ablate or enhance model responses with the
                AblationDecoderLayer and AdditionDecoderLayer classes. - Measure
                refusal expressions in model responses using the
                ExpressionRefusalScorer. - Supports custom behavior directions
                for applying specific types of transformations.
              </p>
            </div>
          </section>
        </section>
        <section id="42841409">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/the-ocean-teems-with-networks-of-interconnected-bacteria-20250106/"
              >The Ocean Teems with Networks of Interconnected Bacteria</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 14:24:05</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42841409"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42840548">
          <h3>
            <a
              class="item"
              href="https://evanhahn.com/my-failed-attempt-to-shrink-all-npm-packages-by-5-percent/"
              >My failed attempt to shrink all NPM packages by 5%</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 12:44:39</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42840548"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42840352">
          <h3>
            <a
              class="item"
              href="https://www.pa3fwm.nl/technotes/tn28-heaviside-transmission-lines.html"
              >Oliver Heaviside and the theory of transmission lines (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 12:18:35</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42840352"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42839502">
          <h3>
            <a
              class="item"
              href="https://distrowatch.com/weekly-mobile.php?issue=20250127#sitenews"
              >Facebook ban on discussing Linux?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 10:32:36</span
              ><span class="points-container"
                >Points: <span class="points">173</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42839502"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42839501">
          <h3>
            <a
              class="item"
              href="https://chipsandcheese.com/p/inside-sifives-p550-microarchitecture"
              >SiFive's P550 Microarchitecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 10:32:35</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42839501"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42838875">
          <h3>
            <a class="item" href="https://defn.io/2024/11/16/podcatcher/"
              >Show HN: I Made an iOS Podcast Player with Racket</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 08:56:16</span
              ><span class="points-container"
                >Points: <span class="points">147</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42838875"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42838700">
          <h3>
            <a
              class="item"
              href="https://mertbulan.com/2025/01/26/once-you-are-laid-off-you-will-never-be-the-same-again/"
              >A layoff fundamentally changed how I perceive work</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 08:22:41</span
              ><span class="points-container"
                >Points: <span class="points">764</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42838700"
                  >Comments</a
                ><span class="descendants">: 708</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42838355">
          <h3>
            <a class="item" href="https://ordinary.space/"
              >Show HN: Making AR experiences is still painful – had to make my
              own editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 07:32:43</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42838355"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
            <div class="text">
              <p>
                My co-founder and I have spent over a decade building mixed
                reality projects and have been growing more and more frustrated
                with the process. From the number of tools needed, to client
                sign-off, to the complex esoteric tech stacks. And especially
                how slow the iteration loop is when dealing with interactivity
                and UX.
              </p>
              <p>
                Two years ago we decided to stop whining and fix the fundamental
                issues. Ordinary Objects [0] was built with our core needs for
                AR prototyping: a very tight iteration loop between editor and
                real device, real-time interactivity while editing and clear and
                concise flow management + mapping. There are many things that
                layered on to make all of that possible: making it multi-user
                from the ground up, handling assets without a fuss, and building
                up a new interaction language.
              </p>
              <p>
                From a technical standpoint we wanted to be native on the all of
                the platforms that we support, and do that as quickly as
                possible. Two years ago the best tool to achieve that was Unity,
                and I believe that is still the case today. Everything else is
                inside our custom C# Redux implementation. Our multi-user needs
                are very different from games, and it helped a lot to learn from
                Figma's technical notes to implement our pseudo eventual
                consistency setup. Its been super nice to be multi-user from the
                get go, we've been able to explore much more functionality this
                way.
              </p>
              <p>
                Once the core churn eases up a bit more we will be open sourcing
                this particular C# Redux setup. As it has nothing to do with any
                engine code.
              </p>
              <p>
                The website has some quick examples of how the design tool works
                [0]. But if you want to view a more complete prototype here is
                something Gregor, my co-founder, put together recently [1]. We
                now also have an easy getting started playlist [2].
              </p>
              <p>
                Over the past year we've been testing with closed groups, and
                have been excited by what everyone is making. Now we are ready
                to open it up for all of you to try! Give it a spin and let me
                know what you think! And happy to answer any questions here :)
              </p>
              <p>
                [0]: <a href="https://ordinary.space">https://ordinary.space</a>
              </p>
              <p>
                [1]:
                <a
                  href="https://www.linkedin.com/posts/onlinegregor_mixedreality-sportsinnovation-wearabletech-activity-7275472488883462144-dT7j"
                  >https://www.linkedin.com/posts/onlinegregor_mixedreality-spo...</a
                >
              </p>
              <p>
                [2]:
                <a
                  href="https://www.youtube.com/watch?v=S_A9gShKENE&amp;list=PLidKy8OpOyFMa5oynAjF1viiT7ynKYYbJ"
                  >https://www.youtube.com/watch?v=S_A9gShKENE&amp;list=PLidKy8OpOy...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="42837636">
          <h3>
            <a class="item" href="https://www.hedy.org/"
              >Hedy: Textual programming made easy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 05:11:07</span
              ><span class="points-container"
                >Points: <span class="points">185</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42837636"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42835772">
          <h3>
            <a class="item" href="https://github.com/seemoo-lab/openhaystack"
              >Openhaystack: Build 'AirTags' – track Bluetooth devices via
              Apple's network</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-27 @ 00:11:27</span
              ><span class="points-container"
                >Points: <span class="points">390</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42835772"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42835282">
          <h3>
            <a
              class="item"
              href="https://estherschindler.medium.com/the-old-family-photos-project-lessons-in-creating-family-photos-that-people-want-to-keep-ea3909129943"
              >Lessons in creating family photos that people want to keep
              (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-26 @ 23:13:01</span
              ><span class="points-container"
                >Points: <span class="points">336</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42835282"
                  >Comments</a
                ><span class="descendants">: 132</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42834648">
          <h3>
            <a class="item" href="https://www.jasonthorsness.com/20"
              >Show HN: DeepSeek My User Agent</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-26 @ 22:03:39</span
              ><span class="points-container"
                >Points: <span class="points">333</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42834648"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42831509">
          <h3>
            <a
              class="item"
              href="https://mort.coffee/home/wayland-input-latency/"
              >Hard numbers in the Wayland vs. X11 input latency discussion</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-26 @ 16:57:52</span
              ><span class="points-container"
                >Points: <span class="points">562</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42831509"
                  >Comments</a
                ><span class="descendants">: 435</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42828833">
          <h3>
            <a class="item" href="https://github.com/EnhancedJax/Bagels"
              >Show HN: Bagels – TUI expense tracker</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-26 @ 08:57:51</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42828833"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
            <div class="text">
              <p>
                Other than challenging myself to learn Python, I built this
                mainly around the habit of budget tracking at the end of the
                day. (I tried tracking on-the-go, but the balance was always out
                of sync.) All data is stored in a single sqlite file, so you can
                export and process them all you want!
              </p>
              <p>
                The app is built using the textual API for Python! Awesome
                framework which feels like I'm doing webdev haha.
              </p>
              <p>
                You can check out some screenshots on gh:
                <a href="https://github.com/EnhancedJax/Bagels"
                  >https://github.com/EnhancedJax/Bagels</a
                >
              </p>
              <p>Thanks!</p>
            </div>
          </section>
        </section>
        <section id="42822162">
          <h3>
            <a
              class="item"
              href="https://youtubetranscriptoptimizer.com/blog/05_the_short_case_for_nvda"
              >The impact of competition and DeepSeek on Nvidia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-25 @ 15:30:25</span
              ><span class="points-container"
                >Points: <span class="points">516</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42822162"
                  >Comments</a
                ><span class="descendants">: 331</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42815454">
          <h3>
            <a
              class="item"
              href="https://www.nist.gov/blogs/taking-measure/going-nuts-over-nists-standard-reference-peanut-butter"
              >Peanut Butter Day: Going Nuts over NIST's Standard Reference
              Peanut Butter (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-24 @ 17:38:11</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42815454"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42813058">
          <h3>
            <a class="item" href="https://www.pugetsystems.com/mineral-oil-pc/"
              >Mineral Oil Cooled PC (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-24 @ 13:57:46</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42813058"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42812029">
          <h3>
            <a
              class="item"
              href="https://blog.julik.nl/2025/01/supercharge-sqlite-with-ruby-functions"
              >Supercharge SQLite with Ruby Functions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-24 @ 10:59:19</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42812029"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42811550">
          <h3>
            <a
              class="item"
              href="https://medium.com/@0xold/null-byte-on-steroids-23f8104a25ec"
              >Null Byte on Steroids</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-24 @ 08:49:51</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42811550"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42807387">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2501.12414"
              >A Faster Quantum Fourier Transform</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-23 @ 19:49:59</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42807387"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42798649">
          <h3>
            <a
              class="item"
              href="https://resobscura.substack.com/p/the-leading-ai-models-are-now-very"
              >Using generative AI as part of historical research: three case
              studies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-01-22 @ 23:29:21</span
              ><span class="points-container"
                >Points: <span class="points">243</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42798649"
                  >Comments</a
                ><span class="descendants">: 196</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
