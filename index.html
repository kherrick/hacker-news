<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41558183">
          <h3>
            <a class="item" href="https://marimo.io/blog/sandboxed-notebooks"
              >Package reproducibility in Python notebooks using uv isolated
              environments</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 17:09:10</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41558183"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41558114">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41558114"
              >GoGoGrandparent (YC S16) Is Hiring Back End and Full-Stack
              Engineers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 17:02:51</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                The positions: FULLY REMOTE | Full-time | US, UK, or able to
                work 4+ hours overlap with mainland US (UK time working hours
                also OK) | $100k to $160k (partially location-dependent)
              </p>
              <p>
                Build high-quality, robust engineering at the rarest of things -
                a Silicon Valley startup that is both wholesome AND profitable.
                We have 8-figure revenue, are YC-backed, and growing fast.
              </p>
              <p>
                Tech stack (<i>required): Back-end heavy (Node</i>, Typescript<i
                  >, MySQL</i
                >, REST*+GraphQL), front-end (Vue), deploy (AWS, Docker/K8s)
              </p>
              <p>Minimum 6 years experience (mostly Node/Vue)</p>
              <p>2-stage interview process.</p>
              <p>
                If you want to help older adults and people with disabilities,
                send your LinkedIn/CV to william@gogograndparent.com (keep it
                brief) or apply at
                <a
                  href="https://www.ycombinator.com/companies/gogograndparent/jobs"
                  >https://www.ycombinator.com/companies/gogograndparent/jobs</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41557851">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2024/09/16/apple-watch-sleep-apnea-detection-gets-fda-approval/"
              >Apple Watch sleep apnea detection gets FDA approval</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 16:35:47</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41557851"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41557383">
          <h3>
            <a class="item" href="https://javascript.tm/"
              >Oracle, it's time to free JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 15:56:21</span
              ><span class="points-container"
                >Points: <span class="points">114</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41557383"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41557345">
          <h3>
            <a
              class="item"
              href="https://www.latacora.com/blog/2024/09/13/datomic-and-content-addressable-techniques/"
              >Datomic and Content Addressable Techniques</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 15:53:33</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41557345"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41557030">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41557030"
              >Ask HN: What runs L4-related microkernels/hypervisors these
              days?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 15:26:18</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41557030"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Has anyone here worked on a device that used an L4-related
                kernel or hypervisor? I know one major area they're used in is
                defense and full of NDAs, but hopefully some of the other
                industries they're used in (medical devices, automotive, IoT)
                are a little less restrictive. Thanks in advance!
              </p>
            </div>
          </section>
        </section>
        <section id="41556844">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/health-wellbeing/golden-lettuce-genetically-engineered-30-times-vitamins/"
              >“Golden Lettuce” is genetically engineered to have higher
              beta-carotene levels</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 15:08:10</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41556844"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41556519">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41556519"
              >Launch HN: Silurian (YC S24) – Simulate the Earth</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 14:32:38</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41556519"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
            <div class="text">
              <a href="https://silurian.ai">https://silurian.ai</a>). Silurian
              builds foundation models to simulate the Earth, starting with the
              weather. Some of our recent hurricane forecasts can be visualized
              at
              <a href="https://hurricanes2024.silurian.ai/"
                >https://hurricanes2024.silurian.ai/</a
              >.
              <p>
                What is it worth to know the weather forecast 1 day earlier?
                That’s not a hypothetical question, traditional forecasting
                systems have been improving their skill at a rate of 1 day per
                decade. In other words, today’s 6-day forecast is as accurate as
                the 5-day forecast ten years ago. No one expects this rate of
                improvement to hold steady, it has to slow down eventually,
                right? Well in the last couple years GPUs and modern deep
                learning have actually sped it up.
              </p>
              <p>
                Since 2022 there has been a flurry of weather deep learning
                systems research at companies like NVIDIA, Google DeepMind,
                Huawei and Microsoft (some of them built by yours truly). These
                models have little to no built-in physics and learn to forecast
                purely from data. Astonishingly, this approach, done correctly,
                produces better forecasts than traditional simulations of the
                physics of our atmosphere.
              </p>
              <p>
                Jayesh and Cris came face-to-face with this technology’s
                potential while they were respectively leading the [ClimaX](<a
                  href="https://arxiv.org/abs/2301.10343"
                  >https://arxiv.org/abs/2301.10343</a
                >) and [Aurora](<a href="https://arxiv.org/abs/2405.13063"
                  >https://arxiv.org/abs/2405.13063</a
                >) projects at Microsoft. The foundation models they built
                improved on the ECMWF’s forecasts, considered the gold standard
                in weather prediction, while only using a fraction of the
                available training data. Our mission at Silurian is to scale
                these models to their full potential and push them to the limits
                of physical predictability. Ultimately, we aim to model all
                infrastructure that is impacted by weather including the energy
                grid, agriculture, logistics, and defense. Hence: simulate the
                Earth.
              </p>
              <p>
                Before we do all that, this summer we’ve built our own
                foundation model, GFT (Generative Forecasting Transformer), a
                1.5B parameter frontier model that simulates global weather up
                to 14 days ahead at approximately 11km resolution (<a
                  href="https://www.ycombinator.com/launches/Lcz-silurian-simulate-the-earth"
                  >https://www.ycombinator.com/launches/Lcz-silurian-simulate-t...</a
                >). Despite the scarce amount of extreme weather data in
                historical records, we have seen that GFT is performing
                extremely well on predicting 2024 hurricane tracks (<a
                  href="https://silurian.ai/posts/001/hurricane_tracks"
                  >https://silurian.ai/posts/001/hurricane_tracks</a
                >). You can play around with our hurricane forecasts at
                <a href="https://hurricanes2024.silurian.ai"
                  >https://hurricanes2024.silurian.ai</a
                >. We visualize these using [cambecc/earth] (<a
                  href="https://github.com/cambecc/earth"
                  >https://github.com/cambecc/earth</a
                >), one of our favorite open source weather visualization tools.
              </p>
              <p>
                We’re excited to be launching here on HN and would love to hear
                what you think!
              </p>
            </div>
          </section>
        </section>
        <section id="41556378">
          <h3>
            <a class="item" href="https://xnapper.com/app"
              >Show HN: Xnapper Studio – Web tool for creating
              attention-grabbing screenshots</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 14:21:16</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41556378"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                Compared to our macOS app, we've doubled down on making the
                screenshots look better by adding device mockups (i.e. iPhone,
                Macbook, Safari, etc.), more social media dimensions, and image
                positioning.
              </p>
              <p>
                Currently we're working on adding an option to share the image
                with a link (cloud storage and share).
              </p>
              <p>Would love to get your feedback on our beta!</p>
            </div>
          </section>
        </section>
        <section id="41556195">
          <h3>
            <a
              class="item"
              href="https://stephenfry.substack.com/p/ai-a-means-to-an-end-or-a-means-to"
              >Stephen Fry – AI: A Means to an End or a Means to Our End?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 14:04:00</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41556195"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41554791">
          <h3>
            <a class="item" href="https://github.com/frost-beta/sisi"
              >Show HN: Sisi – Semantic Image Search CLI tool, locally without
              third party APIs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 10:59:13</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41554791"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                The unusual thing with my version is, it is in pure Node.js,
                with the power of node-mlx, a Node.js machine learning
                framework.
              </p>
              <p>
                The repo in the link is mostly about implementing indexing and
                CLI, the code of the model implementation lives as a Node.js
                module:
                <a href="https://github.com/frost-beta/clip"
                  >https://github.com/frost-beta/clip</a
                >
                .
              </p>
              <p>Hope this helps other learners!</p>
            </div>
          </section>
        </section>
        <section id="41554177">
          <h3>
            <a class="item" href="https://github.com/muze-nl/jaqt"
              >Show HN: JAQT – JavaScript Queries and Transformations</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 09:08:25</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41554177"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've made a javascript library to simplify
                searching/sorting/filtering in arrays of objects. Its inspired
                by both GraphQL and SQL, but implemented using javascript
                Proxies. Instead of creating a new language, its all just
                javascript.
              </p>
              <p>
                I've made it as part of an experimental database, which uses
                javascript as the query engine. The normal javascript
                map/reduce/sort functions are quite difficult to master for
                junior developers. JAQT is easier to explain, and can still be
                used in combination with any existing array functions.
              </p>
              <p>
                Please let me know what you think of the API and its ease of
                use!
              </p>
            </div>
          </section>
        </section>
        <section id="41554157">
          <h3>
            <a
              class="item"
              href="https://www.truesec.com/hub/blog/attacking-powershell-clixml-deserialization"
              >Attacking PowerShell Clixml Deserialization</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 09:04:59</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41554157"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41552804">
          <h3>
            <a
              class="item"
              href="https://www.ietf.org/archive/id/draft-ietf-httpbis-safe-method-w-body-05.html"
              >The HTTP Query Method</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-16 @ 04:36:09</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41552804"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41551084">
          <h3>
            <a class="item" href="https://usenothing.com/"
              >Nothing: Simply Do Nothing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 22:40:03</span
              ><span class="points-container"
                >Points: <span class="points">313</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41551084"
                  >Comments</a
                ><span class="descendants">: 126</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41550603">
          <h3>
            <a class="item" href="https://plaintextaccounting.org/"
              >Plain Text Accounting (PTA)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 21:30:57</span
              ><span class="points-container"
                >Points: <span class="points">259</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41550603"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41550417">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/09/14/world/americas/paraguay-mickey-mouse-disney.html"
              >Paraguay Loves Mickey, the Cartoon Mouse. Disney Doesn't</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 21:09:22</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41550417"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41550364">
          <h3>
            <a class="item" href="https://github.com/bklieger-groq/g1"
              >g1: Using Llama-3.1 70B on Groq to create o1-like reasoning
              chains</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 21:02:44</span
              ><span class="points-container"
                >Points: <span class="points">279</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41550364"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41550017">
          <h3>
            <a
              class="item"
              href="https://peterszasz.com/how-to-lead-your-team-when-the-house-is-on-fire/"
              >How to Lead Your Team When the House Is on Fire</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 20:16:55</span
              ><span class="points-container"
                >Points: <span class="points">329</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41550017"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41549649">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2024/Sep/15/how-to-succeed-in-mrbeast-production/"
              >How to Succeed in Mr Beast Production (Leaked PDF)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 19:24:24</span
              ><span class="points-container"
                >Points: <span class="points">1726</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41549649"
                  >Comments</a
                ><span class="descendants">: 1104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41547395">
          <h3>
            <a
              class="item"
              href="https://www.blockchain.com/explorer/addresses/btc/13zb1hQbWVsc2S7ZTZnP2G4undNNpdh5so"
              >Bitcoin puzzle #66 was solved: 6.6 BTC (~$400k) withdrawn</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 13:30:49</span
              ><span class="points-container"
                >Points: <span class="points">391</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41547395"
                  >Comments</a
                ><span class="descendants">: 331</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41547008">
          <h3>
            <a class="item" href="https://wiki.xxiivv.com/site/fractran.html"
              >Fractran: Computer architecture based on the multiplication of
              fractions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 12:09:07</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41547008"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41546803">
          <h3>
            <a class="item" href="https://www.blogofholding.com/?p=7182"
              >D&amp;amp;D is Anti-Medieval</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 11:24:44</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41546803"
                  >Comments</a
                ><span class="descendants">: 224</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41545810">
          <h3>
            <a
              class="item"
              href="https://www.jjinux.com/2015/07/the-waterfall-model-was-straw-man.html"
              >The Waterfall Model was a straw man argument from the beginning
              (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-15 @ 07:12:10</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41545810"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41542409">
          <h3>
            <a class="item" href="https://github.com/satmihir/fair"
              >Fair: A Go library for serving resources fairly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-14 @ 20:00:28</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41542409"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41530040">
          <h3>
            <a class="item" href="http://skarnet.org/software/s6/"
              >S6 – skarnet's small supervision suite</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-13 @ 11:09:45</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41530040"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41528919">
          <h3>
            <a
              class="item"
              href="https://lepisma.xyz/2024/09/12/emacs-dictation-mode/index.html"
              >Speech Dictation Mode for Emacs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-13 @ 07:40:41</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41528919"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41519229">
          <h3>
            <a
              class="item"
              href="https://mango.pdf.zone/i-give-you-feedback-on-your-blog-post-draft-but-you-dont-send-it-to-me"
              >I give you feedback on your blog post draft but you don't send it
              to me (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-12 @ 10:10:12</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41519229"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41519046">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41519046"
              >Ask HN: Does anyone use sound effects in their dev
              environment?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-12 @ 09:24:45</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41519046"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
            <div class="text">
              It occurred to me that we often use colours in our terminals and
              code editors to highlight test failures, linting errors etc, but
              we don't typically use sounds. Has anyone integrated sound effects
              in any way?
            </div>
          </section>
        </section>
        <section id="41512213">
          <h3>
            <a class="item" href="https://kristoff.it/blog/first-html-lsp/"
              >The First HTML LSP That Reports Syntax Errors</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-11 @ 15:21:30</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41512213"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
