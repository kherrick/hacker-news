<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44274447">
          <h3>
            <a
              class="item"
              href="https://www.businessinsider.com/y-combinator-yc-demo-day-spring-ai-agent-startups-2025-6"
              >AI agent startups at Y Combinator’s Spring ’25 Demo Day</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-14 @ 05:41:12</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44274447"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44274338">
          <h3>
            <a
              class="item"
              href="https://sfstandard.com/2025/06/12/caltrain-employee-secret-apartment-burlingame-station-photos/"
              >Caltrain official lived in secret apartment built illegally
              inside train station</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-14 @ 05:14:12</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44274338"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44274133">
          <h3>
            <a class="item" href="https://github.com/golang/go/issues/73581"
              >Green Tea Garbage Collector</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-14 @ 04:10:56</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44274133"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44274031">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/$100_hamburger"
              >$100 Hamburger</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-14 @ 03:41:14</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44274031"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44274001">
          <h3>
            <a
              class="item"
              href="http://0x80.pl/notesen/2016-11-28-simd-strfind.html"
              >SIMD-friendly algorithms for substring searching</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-14 @ 03:31:18</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44274001"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44273900">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/06/13/jisc_java_oracle/"
              >UK unis to cough up to £10M on Java to keep Oracle off their
              backs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-14 @ 02:57:50</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44273900"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44273857">
          <h3>
            <a class="item" href="https://github.com/rajivharlalka/filedb"
              >Filedb: Disk-based key-value store inspired by Bitcask</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-14 @ 02:45:03</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44273857"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44272933">
          <h3>
            <a
              class="item"
              href="https://www.owlposting.com/p/endometriosis-is-an-incredibly-interesting"
              >Endometriosis is an interesting disease</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 22:40:22</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44272933"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44272467">
          <h3>
            <a
              class="item"
              href="https://btmc.substack.com/p/implementing-logic-programming"
              >Implementing Logic Programming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 21:32:21</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44272467"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44271630">
          <h3>
            <a
              class="item"
              href="https://omc345.substack.com/p/from-skeuomorphic-to-liquid-glass"
              >Apple's Liquid Glass is prep work for AR interfaces, not just a
              design refresh</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 19:44:58</span
              ><span class="points-container"
                >Points: <span class="points">231</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44271630"
                  >Comments</a
                ><span class="descendants">: 222</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44271284">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2506.10943"
              >Self-Adapting Language Models</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 19:03:42</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44271284"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
            <div class="text">
              <a href="https://jyopari.github.io/posts/seal"
                >https://jyopari.github.io/posts/seal</a
              >
            </div>
          </section>
        </section>
        <section id="44270709">
          <h3>
            <a
              class="item"
              href="https://philmckinney.substack.com/p/i-convinced-hps-board-to-buy-palm"
              >I convinced HP's board to buy Palm and watched them kill it</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 18:03:30</span
              ><span class="points-container"
                >Points: <span class="points">527</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44270709"
                  >Comments</a
                ><span class="descendants">: 437</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44270434">
          <h3>
            <a class="item" href="https://akkartik.name/freewheeling/"
              >Using computers more freely and safely (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 17:27:20</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44270434"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44270144">
          <h3>
            <a
              class="item"
              href="https://quomodocumque.wordpress.com/2017/06/27/when-random-people-give-money-to-random-other-people/"
              >When random people give money to random other people (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 16:49:46</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44270144"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44269822">
          <h3>
            <a class="item" href="https://math.stackexchange.com/a/5075056/6708"
              >Peano arithmetic is enough, because Peano arithmetic encodes
              computation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 16:10:38</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44269822"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44269289">
          <h3>
            <a
              class="item"
              href="https://www.nhatcher.com/post/on-hats-and-sats/"
              >The Hat, the Spectre and SAT Solvers (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 15:14:20</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44269289"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44269002">
          <h3>
            <a
              class="item"
              href="https://research.mietek.io/mi.MartinLof2006.html"
              >100 years of Zermelo's axiom of choice: What was the problem with
              it? (2006)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 14:46:15</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44269002"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44268782">
          <h3>
            <a class="item" href="https://oxcaml.org/"
              >OxCaml - a set of extensions to the OCaml programming
              language.</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 14:20:38</span
              ><span class="points-container"
                >Points: <span class="points">282</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44268782"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44268644">
          <h3>
            <a class="item" href="https://tattoy.sh"
              >Show HN: Tattoy – a text-based terminal compositor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 14:04:35</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44268644"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
            <div class="text">
              <p>
                Firstly it solves the age-old problem of low-contrast text, like
                when you `ls` a broken symlink and the red background colour is
                too near your current theme's foreground colour. Tattoy solves
                this by using none other than the web's WCAG 2.1 contrast
                algorithm for accessible text.
              </p>
              <p>
                Secondly, an explicit design goal is that Tattoy should be able
                to polyfill new terminal protocols, the `xwayland` of the TTY if
                you will. Say if we want to experiment with completely
                deprecating ANSI codes, then any application that uses a new
                protocol can be run in Tattoy which itself runs in any
                ANSI-standard terminal emulator as normal. You can read more
                about this idea here:
                <a href="https://tattoy.sh/news/an-end-to-terminal-ansi-codes/"
                  >https://tattoy.sh/news/an-end-to-terminal-ansi-codes/</a
                >
              </p>
              <p>
                But ultimately this has been something more akin to an art
                project, something to enjoy for the sheer aesthetic pleasure.
              </p>
            </div>
          </section>
        </section>
        <section id="44268547">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/tech/army-reserve-tech-executives-meta-palantir-796f5360"
              >The Army’s Newest Recruits: Tech Execs From Meta, OpenAI and
              More</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 13:51:42</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44268547"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44266828">
          <h3>
            <a
              class="item"
              href="https://joshworth.com/dev/pixelspace/pixelspace_solarsystem.html"
              >If the moon were only 1 pixel: A tediously accurate solar system
              model (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-13 @ 08:40:05</span
              ><span class="points-container"
                >Points: <span class="points">733</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44266828"
                  >Comments</a
                ><span class="descendants">: 227</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44261777">
          <h3>
            <a
              class="item"
              href="https://tailscale.com/blog/frequent-reath-security"
              >Frequent reauth doesn't make you more secure</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-12 @ 19:05:12</span
              ><span class="points-container"
                >Points: <span class="points">1156</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44261777"
                  >Comments</a
                ><span class="descendants">: 487</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44258633">
          <h3>
            <a class="item" href="https://www.akpain.net/blog/s10-upu/"
              >The international standard for identifying postal items</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-12 @ 15:02:23</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44258633"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44249338">
          <h3>
            <a
              class="item"
              href="https://blogsystem5.substack.com/p/whatever-happened-to-sandboxfs"
              >Whatever Happened to Sandboxfs?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-11 @ 16:37:09</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44249338"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44243059">
          <h3>
            <a
              class="item"
              href="https://wvutoday.wvu.edu/stories/2025/06/02/wvu-student-makes-long-awaited-discovery-of-mystery-fungus-sought-by-lsd-s-inventor"
              >Student discovers fungus predicted by Albert Hoffman</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-11 @ 00:36:00</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44243059"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44241797">
          <h3>
            <a
              class="item"
              href="https://opg.optica.org/optica/fulltext.cfm?uri=optica-12-5-674&amp;id=570897"
              >High-speed fluorescence light field tomography of whole freely
              moving organisms</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-10 @ 21:43:33</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44241797"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44235612">
          <h3>
            <a
              class="item"
              href="https://developer.apple.com/videos/play/wwdc2025/219"
              >Liquid Glass – WWDC25 [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-10 @ 11:48:47</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44235612"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44234626">
          <h3>
            <a
              class="item"
              href="https://hardcoresoftware.learningbyshipping.com/p/233-the-illusion-of-thinking-thoughts"
              >"The Illusion of Thinking" – Thoughts on This Important Paper</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-10 @ 09:40:19</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44234626"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44234286">
          <h3>
            <a
              class="item"
              href="https://blog.maximeheckel.com/posts/shaping-light-volumetric-lighting-with-post-processing-and-raymarching/"
              >Shaping Light – Volumetric Lighting</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-06-10 @ 08:56:03</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44234286"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44233063">
          <h3><a class="item" href="https://timeguessr.com/">TimeGuessr</a></h3>
          <section>
            <h4>
              <span>2025-06-10 @ 05:56:23</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44233063"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
