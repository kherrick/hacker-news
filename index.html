<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="35237830">
          <h3>
            <a
              class="item"
              href="https://blog.adamchalmers.com/why-rust-on-backend/"
              >Why use Rust on the back end?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 20:06:58</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35237830"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35237799">
          <h3>
            <a class="item" href="https://chronologyclock.com/"
              >Chronology Clock</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 20:05:08</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35237799"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35237787">
          <h3>
            <a class="item" href="https://fluxus.org/FluxusMidwest/doorknobs/"
              >Doors I touched today (1999)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 20:04:31</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35237787"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35237269">
          <h3>
            <a class="item" href="https://spack.io/"
              >Spack – scientific software package manager for supercomputers,
              Linux, and macOS</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 19:28:23</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35237269"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35237253">
          <h3>
            <a class="item" href="https://www.greatbookshomeschool.com"
              >Show HN: Great Books Homeschool beta program</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 19:27:04</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35237253"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
            <div class="text">
              <p>
                One of the main benefits of homeschooling is the ability to
                design customized programs of study that let kids learn at their
                level of challenge in each subject. But since designing custom
                curricula from scratch requires a huge time commitment and
                familiarity with children's literature and academic materials,
                most homeschooling parents don't take advantage of this
                potential and instead opt for prepackaged curricula.
              </p>
              <p>
                Great Books Homeschool eliminates a lot of the work involved in
                designing a complete and rigorous curriculum for homeschooled
                students. The website generates a default program of study for
                each student, then helps parents customize it. Transcripts and
                other records are generated automatically.
              </p>
              <p>
                Pricing is normally subscription based, but we're offering
                complimentary access for twelve months to the first 50 users who
                sign up for our beta testing program. In return, beta testers
                are requested to complete a monthly questionnaire about their
                experience with the curriculum.
              </p>
              <p>
                If you would like to participate in the beta testing program,
                please first create a free trial account at
                <a href="https://www.greatbookshomeschool.com"
                  >https://www.greatbookshomeschool.com</a
                >. Once signed in, go to
                <a
                  href="https://www.greatbookshomeschool.com/parent/beta-application?via=hn"
                  >https://www.greatbookshomeschool.com/parent/beta-application...</a
                >
                and complete the application form.
              </p>
              <p>Questions and comments are welcome!</p>
            </div>
          </section>
        </section>
        <section id="35236467">
          <h3>
            <a
              class="item"
              href="https://status.openai.com/incidents/jq9232rcmktd"
              >ChatGPT is down</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 18:38:40</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35236467"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35236275">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35236275"
              >Launch HN: Bloop (YC S21) – Code Search with GPT-4</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 18:27:32</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35236275"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
            <div class="text">
              <a href="https://bloop.ai/">https://bloop.ai/</a>), a code search
              engine which combines semantic search with GPT-4 to answer
              questions. We let you search your private codebases either the
              traditional way (regex or literal) or via semantic search, ask
              questions in natural language thanks to GPT-4, and jump between
              refs/defs with precise code navigation. Here’s a quick demo:
              <a
                href="https://www.loom.com/share/8e9d59b88dd2409482ec02cdda5b9185"
                >https://www.loom.com/share/8e9d59b88dd2409482ec02cdda5b9185</a
              >
              <p>
                Traditional code search tools match the terms in your query
                against the codebase, but often you don’t know the right terms
                to start with, e.g. ‘Which library do we use for model
                inference?’ (These types of questions are particularly common
                when you’re learning a new codebase.) bloop uses a combination
                of neural semantic code search (comparing the meaning - encoded
                in vector representations - of queries and code snippets) and
                chained LLM calls to retrieve and reason about abstract queries.
              </p>
              <p>
                Ideally, a LLM could answer questions about your code directly,
                but there is significant overhead (and expense) in fine-tuning
                the largest LLMs on private data. And although they’re
                increasing, prompt sizes are still a long way off being able to
                fit a whole organisation’s codebase.
              </p>
              <p>
                We get around these limitations with a two-step process. First,
                we use GPT-4 to generate a keyword query which is passed to a
                semantic search engine. This embeds the query and compares it to
                chunks of code in vector space (we use Qdrant as our vector DB).
                We’ve found that using a semantic search engine for retrieval
                improves recall, allowing the LLM to retrieve code that doesn’t
                have any textual overlap with the query but is still relevant.
                Second, the retrieved code snippets are ranked and inserted into
                a final LLM prompt. We pass this to GPT-4 and its phenomenal
                understanding of code does the rest.
              </p>
              <p>
                Let’s work through an example. You start off by asking ‘Where is
                the query parsing logic?’ and then want to find out ‘Which
                library does it use?’. We use GPT-4 to generate the standalone
                keyword query: ‘query parser library’, which we then pass to a
                semantic search engine that returns a snippet demonstrating the
                parser in action: ‘let pair = PestParser::parse(Rule::query,
                query);’. We insert this snippet into a prompt to GPT-4, which
                is able to work out that pest is the library doing the legwork
                here, generating the answer ‘The query parser uses the pest
                library’.
              </p>
              <p>
                You can also filter your search by repo or language - What’s the
                readiness delay repo:myApp lang:yaml. GPT-4 will generate an
                answer constrained to the respective repo and language.
              </p>
              <p>
                We also know that LLMs are not always (at least not yet) the
                best tool for the job. Sometimes you know exactly what you’re
                looking for. For this, we’ve built a fast, trigram index based
                regex search engine based on Tantivy. Because of this, bloop is
                fast at traditional search too. For code navigation, we’ve built
                a precise go-to-ref/def engine based on scope resolution that
                uses Tree-sitter.
              </p>
              <p>
                bloop is fully open-source. Semantic search, LLM prompts, regex
                search and code navigation are all contained in one repo:
                <a href="https://github.com/bloopAI/bloop"
                  >https://github.com/bloopAI/bloop</a
                >.
              </p>
              <p>
                Our software is standalone and doesn’t run in your IDE. We were
                originally IDE-based but moved away from this due to constraints
                on how we could display code to the user.
              </p>
              <p>
                bloop runs as a free desktop app on Mac, Windows and Linux:
                <a href="https://github.com/bloopAI/bloop/releases"
                  >https://github.com/bloopAI/bloop/releases</a
                >. On desktop, your code is indexed with a MiniLM embedding
                model and stored locally, meaning at index time your codebase
                stays private. Indexing is fast, except on the very largest
                repos (GPU indexing coming soon). ‘Private’ here means that no
                code is shared with us or OpenAI at index time, and when a
                search is made only relevant code snippets are shared to
                generate the response. (This is more or less the same data usage
                as Copilot).
              </p>
              <p>
                We also have a paid cloud offering for teams ($12 per user per
                month). Members of the same organisation can search a shared
                index hosted by us.
              </p>
              <p>
                We’d love to hear your thoughts about the product and where you
                think we should take it next, and your thoughts on code search
                in general. We look forward to your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="35236272">
          <h3>
            <a
              class="item"
              href="https://www.wingolog.org/archives/2023/03/20/a-world-to-win-webassembly-for-the-rest-of-us"
              >A world to win: WebAssembly for the rest of us</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 18:27:22</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35236272"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35236043">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/opinion/articles/2023-03-20/ubs-got-credit-suisse-for-almost-nothing"
              >UBS got Credit Suisse for almost nothing</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 18:14:07</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35236043"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35235732">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35235732"
              >Tell HN: MailChimp blacklists your IP if you open the browser's
              dev tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 17:56:59</span
              ><span class="points-container"
                >Points: <span class="points">339</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35235732"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
            <div class="text">
              Anyone else noticing this while editing an email? It seems just
              crazy.
            </div>
          </section>
        </section>
        <section id="35235616">
          <h3>
            <a
              class="item"
              href="https://www.popsci.com/technology/garmi-germany-elderly-robot/"
              >Garmi, a robot nurse and companion for Germany’s elderly
              population</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 17:50:32</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35235616"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35234708">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/ivy/jobs"
              >Ivy (YC W23) is hiring engineers to unify ML</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 17:00:39</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35234276">
          <h3>
            <a class="item" href="https://github.com/andyk/recursive_llm"
              >Show HN: Recursive LLM Prompts</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 16:38:55</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35234276"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/andyk/recursive_llm"
                >https://github.com/andyk/recursive_llm</a
              >
              <p>
                The idea I'm starting with is to implement recursion using
                English as the programming language and GPT as the runtime.
              </p>
              <p>
                It’s kind of like traditional recursion in code, but instead of
                having a function that calls itself with a different set of
                arguments, there is a prompt that returns itself with specific
                parts updated to reflect the new arguments.
              </p>
              <p>
                Here is a prompt for infinitely generating Fibonacci numbers:
              </p>
              <p>
                &gt; You are a recursive function. Instead of being written in a
                programming language, you are written in English. You have
                variables FIB_INDEX = 2, MINUS_TWO = 0, MINUS_ONE = 1,
                CURR_VALUE = 1. Output this paragraph but with updated variables
                to compute the next step of the Fibbonaci sequence.
              </p>
              <p>
                Interestingly, I found that to get a base case to work I had to
                add quite a bit more text (i.e. the prompt I arrived at is more
                than twice as long
                <a
                  href="https://raw.githubusercontent.com/andyk/recursive_llm/main/prompt_fibonnaci_include_math.txt"
                  >https://raw.githubusercontent.com/andyk/recursive_llm/main/p...</a
                >)
              </p>
            </div>
          </section>
        </section>
        <section id="35233725">
          <h3>
            <a
              class="item"
              href="https://lucumr.pocoo.org/2023/3/20/lessons-from-a-pessimist/"
              >Lessons from a Pessimist: Make Your Pessimism Productive</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 16:10:33</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35233725"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35233484">
          <h3>
            <a
              class="item"
              href="https://github.com/minborg/articles/tree/jep442/2023/March/22-jep442-FFM-Third-Preview"
              >JEP 442: Foreign Function and Memory API (Third Preview)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 15:56:39</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35233484"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35233479">
          <h3>
            <a
              class="item"
              href="https://asahilinux.org/2023/03/road-to-vulkan/"
              >Paving the Road to Vulkan on Asahi Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 15:56:12</span
              ><span class="points-container"
                >Points: <span class="points">402</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35233479"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35232326">
          <h3>
            <a
              class="item"
              href="https://tinker-board.asus.com/product/tinker-v.html?s=09"
              >Tinker V: Single-board RISC-V computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 14:50:04</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35232326"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35232171">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35232171"
              >Launch HN: Lume (YC W23) – Generate custom data integrations with
              AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 14:40:35</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35232171"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
            <div class="text">
              <a href="https://lume.ai">https://lume.ai</a>). Lume uses AI to
              generate custom data integrations. We transform data between any
              start and end schema and pipe the data directly to your desired
              destination. There’s a demo video here:
              <a
                href="https://www.loom.com/share/bed137eb38884270a2619c71cebc1213"
                >https://www.loom.com/share/bed137eb38884270a2619c71cebc1213</a
              >.
              <p>
                Companies spend countless engineering hours manually
                transforming data for custom integrations, or pay large amounts
                to consulting firms to do it for them. Engineers have to work
                through massive data schemas and create hacky scripts to
                transform data. Dynamic schemas from different clients or apps
                require custom integration pipelines. Many non-tech companies
                are even still relying on schemas from csv and pdf file formats.
                Days, weeks, and even months are spent just building
                integrations.
              </p>
              <p>
                We ran into this problem first-hand as engineers: Nebyou during
                his time as a ML engineer at Opendoor, where he spent months
                manually creating data transformations, while Nicolas did the
                same at his time working at Apple Health. Talking to other
                engineers, we learned this problem was everywhere. Because of
                the dynamic and one-off nature of different data integrations,
                it has been a challenging problem to automate. We believe that
                with recent improvements in LLMs (large language models),
                automation has become feasible and now is the right time to
                tackle it.
              </p>
              <p>
                Lume solves this problem head-on by generating data
                transformations, which makes the integration process 10x faster.
                This is provided through a self-serve managed platform where
                engineers can manage and create new data integrations.
              </p>
              <p>
                How it works: users can specify their data source and data
                destination, both of which specify the desired data formats,
                a.k.a. schemas. Data source and destinations can be specified
                through our 300+ app connectors, or custom data schemas can be
                connected by either providing access to your data warehouse, or
                a manual file upload (csv, json, etc) of your end schema. Lume,
                which includes AI and rule-based models, creates the desired
                transformation under the hood by drafting the necessary SQL
                code, and deploys it to your destination.
              </p>
              <p>
                At the same time, engineers don’t want to rely on low- or
                no-code tools without visibility under the hood. Thus, we also
                provide features to ensure visibility, confidence, and
                editability of each integration: Data Preview allows you to view
                samples of the transformed data, SQL Editor allows you to see
                the SQL used to create the transformation and to change the
                assumptions made my Lume’s model, if needed (most of the time,
                you don’t!). In addition, Lineage Graph (launching soon) shows
                you the dependencies of your new integration, giving more
                visibility for maintenance.
              </p>
              <p>
                Our clients have two primary use cases. One common use case is
                to transform data source(s) into one unified ontology. For
                example, you can create a unified schema between Salesforce,
                Hubspot, Quickbooks, and Pipedrive in your data warehouse.
                Another common use case is to create data integrations between
                external apps, such as custom syncs between your SaaS apps. For
                example, you can create an integration directly between your CRM
                and BI tools.
              </p>
              <p>
                The most important thing about our solution is our generative
                system: our model ingests and understands your schemas, and uses
                that to generate transformations that map one schema to another.
                Other integration tools, such as Mulesoft and Informatica, ask
                users to manually map columns between schemas—which takes a long
                time. Data transformation tools such as dbt have improved the
                data engineering process significantly (we love dbt!) but still
                require extensive manual work to understand the data and to
                program. We abstract all of this and do all the transformations
                for our customers under the hood - which reduces the time taken
                to manually map and engineer these integrations from days/weeks
                to minutes. Our solution handles the truly dynamic nature of
                data integrations.
              </p>
              <p>
                We don’t have a public self-serve option yet (sorry!) because
                we’re at the early stage of working closely with specific
                customers to get their use cases into production. If you’re
                interested in becoming one of those, we’d love to hear from you
                at <a href="https://lume.ai">https://lume.ai</a>. Once the core
                feature set has stabilized, we’ll build out the public product.
                In the meantime, our demo video shows it in action:
                <a
                  href="https://www.loom.com/share/bed137eb38884270a2619c71cebc1213"
                  >https://www.loom.com/share/bed137eb38884270a2619c71cebc1213</a
                >.
              </p>
              <p>
                We currently charge a flat monthly fee that varies based on the
                quantity of data integrations. In the future, we plan on having
                more transparent pricing that’s made up of a fixed platform fee
                + compute-based charges. To not have surprise charges, we
                currently run the compute in your data warehouse.
              </p>
              <p>
                We’re looking forward to hearing any of your comments,
                questions, ideas, experiences, and feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="35232150">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2023/03/20/amazon-layoffs-company-to-cut-off-9000-more-workers.html"
              >Amazon to lay off 9,000 more workers after earlier cuts</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 14:39:08</span
              ><span class="points-container"
                >Points: <span class="points">546</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35232150"
                  >Comments</a
                ><span class="descendants">: 638</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35231276">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/the-quantum-state-of-a-tcp-port/"
              >When can two TCP sockets share a local address?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 13:35:21</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35231276"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35231111">
          <h3>
            <a
              class="item"
              href="https://www.forbes.com/sites/carltonreid/2023/03/01/cyclists-now-outnumber-motorists-in-city-of-london/"
              >Cyclists now outnumber motorists in City of London</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 13:22:50</span
              ><span class="points-container"
                >Points: <span class="points">839</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35231111"
                  >Comments</a
                ><span class="descendants">: 685</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35231012">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/environment/2023/mar/20/ipcc-climate-crisis-report-delivers-final-warning-on-15c"
              >IPCC climate crisis report delivers ‘final warning on 1.5C’</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 13:14:40</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35231012"
                  >Comments</a
                ><span class="descendants">: 253</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35230766">
          <h3>
            <a class="item" href="https://argbash.dev"
              >Argbash – Bash Argument Parsing Code Generator</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 12:53:22</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35230766"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35229945">
          <h3>
            <a
              class="item"
              href="https://commodoreformatarchive.com/games-of-the-90s-the-covertapes/"
              >The British computer magazine cover tape</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 11:17:24</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35229945"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35229331">
          <h3>
            <a
              class="item"
              href="https://www.nationthailand.com/thailand/general/40025846"
              >Cesium-137 missing and found in junk yard in Thailand</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 09:54:17</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35229331"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35229045">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=35229045"
              >Ask HN: Where can I find a primer on how computers boot?</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 09:15:18</span
              ><span class="points-container"
                >Points: <span class="points">349</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35229045"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
            <div class="text">
              As a developer, I recently encountered challenges with GRUB and
              discovered I lacked knowledge about my computer's boot process. I
              realized terms like EFI partition, MBR, GRUB, and Bootloader were
              unfamiliar to me and many of my colleagues. I'm seeking
              introductory and easy-to-understand resources to learn about these
              concepts. Any recommendations would be appreciated!
            </div>
          </section>
        </section>
        <section id="35228884">
          <h3>
            <a class="item" href="https://www.commandlinefu.com/commands/browse"
              >Command Line One-Liners</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 08:52:46</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35228884"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35227635">
          <h3>
            <a class="item" href="https://tinyvg.tech/"
              >TinyVG – an alternative binary encoded vector graphics format</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 05:27:07</span
              ><span class="points-container"
                >Points: <span class="points">299</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35227635"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35227600">
          <h3>
            <a class="item" href="https://previous.unixdude.net/"
              >Previous: A NeXT Computer Emulator</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 05:21:04</span
              ><span class="points-container"
                >Points: <span class="points">220</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35227600"
                  >Comments</a
                ><span class="descendants">: 93</span></span
              >
            </h4>
          </section>
        </section>
        <section id="35227564">
          <h3>
            <a class="item" href="https://www.pacificpinball.org"
              >Pacific Pinball Museum</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-03-20 @ 05:15:20</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=35227564"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
