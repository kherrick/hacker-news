<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43634582">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/policy/645399/trump-doj-cryptocurrency-fraud-prosecutions-memo"
              >Trump's DOJ will no longer prosecute cryptocurrency fraud</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 17:10:24</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43634582"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43633568">
          <h3>
            <a
              class="item"
              href="http://arcturus-labs.com/blog/2025/03/31/visual-reasoning-is-coming-soon/"
              >Visual Reasoning Is Coming Soon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 15:58:30</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43633568"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43633457">
          <h3>
            <a
              class="item"
              href="https://pypy.org/posts/2025/04/prospero-in-rpython.html"
              >Doing the Prospero-Challenge in RPython</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 15:48:50</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43633457"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43633383">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/news/anthropic-education-report-how-university-students-use-claude"
              >How University Students Use Claude</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 15:41:38</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43633383"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43633330">
          <h3>
            <a class="item" href="https://osf.io/preprints/osf/zhm54_v3"
              >Major Flaws in 2025 Meta-Analysis on Fluoride and Children IQ
              Scores</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 15:36:52</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43633330"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43633298">
          <h3>
            <a class="item" href="https://github.com/herol3oy/austen"
              >Show HN: I built an app to generate story relationships using
              Mermaidjs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 15:34:27</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43633298"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43633005">
          <h3>
            <a
              class="item"
              href="https://www.hodinkee.com/articles/introducing-rolex-land-dweller"
              >Rolex Caliber 7135: new indirect impulse escapement and high
              frequency movement</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 15:07:53</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43633005"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43632831">
          <h3>
            <a class="item" href="https://productrank.ai/"
              >Show HN: Comparing product rankings by OpenAI, Anthropic, and
              Perplexity</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 14:53:01</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43632831"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re interested in seeing how AI decides to recommend products,
                especially now that they are actively searching the web. Now
                that we can retrieve citations by API, we can learn a bit more
                about what sources the various models use.
              </p>
              <p>
                This is increasingly becoming important - Guillermo Rauch said
                that ChatGPT now refers ~5% of Vercel signups, which is up 5x
                over the last six months. [1]
              </p>
              <p>
                It’s been fascinating to see the somewhat strange sources that
                the models pull from; one hypothesis is that most of the high
                quality sources have opted out of training data, leaving a
                pretty exotic long tail of citations. For example, a search for
                car brands yielded citations including Lux Mag and a class
                action filing against Chevy for batteries. [2]
              </p>
              <p>
                We'd love for you to give it a try and let me know what you
                think! What other data would you want to see?
              </p>
              <p>
                [1]
                <a href="https://x.com/rauchg/status/1898122330653835656"
                  >https://x.com/rauchg/status/1898122330653835656</a
                >
              </p>
              <p>
                [2]
                <a href="https://productrank.ai/topic/car-brands"
                  >https://productrank.ai/topic/car-brands</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43632379">
          <h3>
            <a
              class="item"
              href="https://livesys.se/posts/the-chroot-technique/"
              >The chroot Technique – a Swiss army multitool for Linux
              systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 14:12:47</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43632379"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43632278">
          <h3>
            <a class="item" href="https://fermi-game.andrewnoble.me/"
              >Show HN: Fermi – A Wordle-style game for order-of-magnitude
              thinking</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 14:04:17</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43632278"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                You build a rough logic chain using a few sliders and fixed
                quantities (e.g. weeks per year), and the goal is to get within
                an order of magnitude of the true answer. The math is simple;
                the thinking is the game.
              </p>
              <p>Would love feedback.</p>
            </div>
          </section>
        </section>
        <section id="43631822">
          <h3>
            <a class="item" href="https://spacetimedb.com/">SpacetimeDB</a>
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 13:27:30</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631822"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43631672">
          <h3>
            <a
              class="item"
              href="https://whynothugo.nl/journal/2025/04/09/man-pages-are-great-man-readers-are-the-problem/"
              >Man pages are great, man readers are the problem</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 13:11:50</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631672"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43631656">
          <h3>
            <a class="item" href="https://jcarlosroldan.com/post/355"
              >Quality-of-Life in Tetris Games</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 13:10:44</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631656"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43631543">
          <h3>
            <a
              class="item"
              href="https://threadreaderapp.com/thread/1909741170953273353.html"
              >How much do you think it costs to make a pair of Nike shoes in
              Asia?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 12:58:39</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631543"
                  >Comments</a
                ><span class="descendants">: 207</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43631450">
          <h3>
            <a
              class="item"
              href="https://softwaredoug.com/blog/2025/04/08/llm-query-understand"
              >An LLM Query Understanding Service</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 12:46:59</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631450"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43631384">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2025/04/08/fake-job-seekers-use-ai-to-interview-for-remote-jobs-tech-ceos-say.html"
              >Fake job seekers are flooding US companies that are hiring for
              remote positions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 12:39:16</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631384"
                  >Comments</a
                ><span class="descendants">: 168</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43631381">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/a2a-a-new-era-of-agent-interoperability/"
              >The Agent2Agent Protocol (A2A)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 12:38:20</span
              ><span class="points-container"
                >Points: <span class="points">231</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631381"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43631276">
          <h3>
            <a
              class="item"
              href="https://stratechery.com/2025/american-disruption/"
              >American Disruption</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 12:24:36</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631276"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43631274">
          <h3>
            <a
              class="item"
              href="https://blog.google/products/google-cloud/ironwood-tpu-age-of-inference/"
              >Ironwood: The first Google TPU for the age of inference</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 12:24:19</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631274"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43631004">
          <h3>
            <a
              class="item"
              href="https://overreacted.io/react-for-two-computers/"
              >React for Two Computers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 11:35:36</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43631004"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43630733">
          <h3>
            <a class="item" href="https://buzzed.chat"
              >Show HN: I built a Yahoo Messenger-inspired web chat app – pure
              nostalgia</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 10:47:20</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43630733"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
            <div class="text">
              <p>
                Room owners can customize things like backgrounds and even
                cursors of their room. Users can format their messages with
                basic markdown like bold, italics, and color texts (kind of like
                the old Yahoo! days).
              </p>
              <p>
                I even brought back the classic Yahoo! Messenger emoticons
                because… well, why not?
              </p>
              <p>
                You can try it out here:
                <a href="https://buzzed.chat">https://buzzed.chat</a> (Heads up:
                it's still pretty barebones, so excuse any bugs you might run
                into!)
              </p>
              <p>I'm thinking of adding a few more features next, like:</p>
              <p>• Audibles</p>
              <p>• A buddy list so you can add friends</p>
              <p>• Private chats between buddies</p>
              <p>
                Before I keep building, I wanted to check in and see what people
                think. Anyone else remember using Yahoo! Messenger back in the
                day? Any features you’d love to see again?
              </p>
              <p>Would genuinely love to hear your thoughts and ideas</p>
            </div>
          </section>
        </section>
        <section id="43630661">
          <h3>
            <a
              class="item"
              href="https://speedbumpapp.com/en/blog/how-to-reduce-screen-time/"
              >A guide to reduce screen time</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 10:34:42</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43630661"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43630624">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/technology/2025/03/27/cbp-cell-phones-devices-traveling-us/"
              >How to lock down your phone if you're traveling to the U.S.</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 10:27:36</span
              ><span class="points-container"
                >Points: <span class="points">166</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43630624"
                  >Comments</a
                ><span class="descendants">: 143</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43630388">
          <h3>
            <a
              class="item"
              href="https://attackanddefense.dev/2025/04/09/hardening-the-firefox-frontend-with-content-security-policies.html"
              >Hardening the Firefox Front End with Content Security Policies</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 09:34:16</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43630388"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43629887">
          <h3>
            <a
              class="item"
              href="https://www.centauri-dreams.org/2025/04/08/on-sun-like-stars/"
              >'Sun-Like' Stars</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 08:01:38</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43629887"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43629307">
          <h3>
            <a class="item" href="https://endler.dev/2025/best-programmers/"
              >The best programmers I know</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 06:02:01</span
              ><span class="points-container"
                >Points: <span class="points">360</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43629307"
                  >Comments</a
                ><span class="descendants">: 229</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43627646">
          <h3>
            <a
              class="item"
              href="https://blog.vectorchord.ai/postgresql-full-text-search-fast-when-done-right-debunking-the-slow-myth"
              >PostgreSQL Full-Text Search: Fast When Done Right (Debunking the
              Slow Myth)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-09 @ 00:00:15</span
              ><span class="points-container"
                >Points: <span class="points">370</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43627646"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43625474">
          <h3>
            <a
              class="item"
              href="https://yuxi-liu-wired.github.io/essays/posts/cyc/"
              >Obituary for Cyc</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-08 @ 19:13:50</span
              ><span class="points-container"
                >Points: <span class="points">412</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43625474"
                  >Comments</a
                ><span class="descendants">: 217</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43602652">
          <h3>
            <a class="item" href="https://avisoft.com/recorder-tests/"
              >Microphone Input Noise Comparison – Avisoft Bioacoustics</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-06 @ 16:23:53</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43602652"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43597632">
          <h3>
            <a
              class="item"
              href="https://github.com/naver/lispe/wiki/6.1-Pattern-Matching-in-LispE"
              >Beyond Traditional Pattern Matching in Lisp</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-05 @ 23:21:52</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43597632"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
