<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41205439">
          <h3>
            <a
              class="item"
              href="https://www.ans.org/news/article-6276/darpa-wants-to-bypass-the-thermal-middleman-in-nuclear-power-systems/"
              >DARPA wants to bypass the thermal middleman in nuclear power
              systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 21:12:34</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41205439"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41205372">
          <h3>
            <a class="item" href="https://www.tesorio.com/careers#job-openings"
              >Tesorio (YC S15) Is Hiring a Senior GenAI/LLM Engineer (100%
              Remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 21:01:00</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41205176">
          <h3>
            <a
              class="item"
              href="https://urchin.biz/urchin-software-corp-89a1f5292999"
              >Urchin Software Corp: The unlikely origin story of Google
              Analytics, 1996–2005</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 20:32:11</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41205176"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41204881">
          <h3>
            <a class="item" href="https://github.com/facebookresearch/vfusion3d"
              >VFusion3D: Learning Scalable 3D Generative Models from Video
              Diffusion Models</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 19:55:42</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41204881"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41204622">
          <h3>
            <a
              class="item"
              href="https://www.themarginalian.org/2024/08/08/margaret-watts-hughes-voice-figures/"
              >Voice Is a Garden: Margaret Watts Hughes's Victorian Sound
              Visualizations</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 19:21:21</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41204622"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41204378">
          <h3>
            <a
              class="item"
              href="https://extkits.co.uk/what-the-hell-is-a-luminiferous-theremin/"
              >What the hell is a luminiferous theremin?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 18:49:45</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41204378"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41203509">
          <h3>
            <a
              class="item"
              href="https://lareviewofbooks.org/article/infinite-proofs-the-effects-of-mathematics-on-david-foster-wallace/"
              >Infinite Proofs: The Effects of Mathematics on David Foster
              Wallace (2012)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 16:55:14</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41203509"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41203475">
          <h3>
            <a class="item" href="https://www.thundercompute.com/"
              >Show HN: Attaching to a virtual GPU over TCP</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 16:50:41</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41203475"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
            <div class="text">
              We developed a tool to trick your computer into thinking it’s
              attached to a GPU which actually sits across a network. This
              allows you to switch the number or type of GPUs you’re using with
              a single command.
            </div>
          </section>
        </section>
        <section id="41203368">
          <h3>
            <a
              class="item"
              href="https://www.icann.org/en/board-activities-and-meetings/materials/approved-resolutions-special-meeting-of-the-icann-board-29-07-2024-en#section2.a"
              >.INTERNAL is now reserved for private-use applications</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 16:36:50</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41203368"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41203307">
          <h3>
            <a
              class="item"
              href="https://github.com/hwchase17/langgraph-engineer"
              >LangGraph Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 16:28:43</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41203307"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41203306">
          <h3>
            <a
              class="item"
              href="https://github.com/Dicklesworthstone/llm_aided_ocr"
              >Show HN: LLM-aided OCR – Correcting Tesseract OCR errors with
              LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 16:28:39</span
              ><span class="points-container"
                >Points: <span class="points">244</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41203306"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
            <div class="text">
              <p>
                Well, it's amazing how things have changed since then. Not only
                have models gotten a lot better, but the latest "low tier"
                offerings from OpenAI (GPT4o-mini) and Anthropic (Claude3-Haiku)
                are incredibly cheap and incredibly fast. So cheap and fast, in
                fact, that you can now break the document up into little chunks
                and submit them to the API concurrently (where each chunk can go
                through a multi-stage process, in which the output of the first
                stage is passed into another prompt for the next stage) and
                assemble it all in a shockingly short amount of time, and for
                basically a rounding error in terms of cost.
              </p>
              <p>
                My original project had all sorts of complex stuff for detecting
                hallucinations and incorrect, spurious additions to the text
                (like "Here is the corrected text" preambles). But the newer
                models are already good enough to eliminate most of that stuff.
                And you can get very impressive results with the multi-stage
                approach. In this case, the first pass asks it to correct OCR
                errors and to remove line breaks in the middle of a word and
                things like that. The next stage takes that as the input and
                asks the model to do things like reformat the text using
                markdown, to suppress page numbers and repeated page headers,
                etc. Anyway, I think the samples (which take less than 1-2
                minutes to generate) show the power of the approach:
              </p>
              <p>
                Original PDF:
                <a
                  href="https://github.com/Dicklesworthstone/llm_aided_ocr/blob/main/160301289-Warren-Buffett-Katharine-Graham-Letter.pdf"
                  >https://github.com/Dicklesworthstone/llm_aided_ocr/blob/main...</a
                >
              </p>
              <p>
                Raw OCR Output:
                <a
                  href="https://github.com/Dicklesworthstone/llm_aided_ocr/blob/main/160301289-Warren-Buffett-Katharine-Graham-Letter__raw_ocr_output.txt"
                  >https://github.com/Dicklesworthstone/llm_aided_ocr/blob/main...</a
                >
              </p>
              <p>
                LLM-Corrected Markdown Output:
                <a
                  href="https://github.com/Dicklesworthstone/llm_aided_ocr/blob/main/160301289-Warren-Buffett-Katharine-Graham-Letter_llm_corrected.md"
                  >https://github.com/Dicklesworthstone/llm_aided_ocr/blob/main...</a
                >
              </p>
              <p>
                One interesting thing I found was that almost all my attempts to
                fix/improve things using "classical" methods like regex and
                other rule based things made everything worse and more brittle,
                and the real improvements came from adjusting the prompts to
                make things clearer for the model, and not asking the model to
                do too much in a single pass (like fixing OCR mistakes AND
                converting to markdown format).
              </p>
              <p>
                Anyway, this project is very handy if you have some old scanned
                books you want to read from Archive.org or Google Books on a
                Kindle or other ereader device and want things to be re-flowable
                and clear. It's still not perfect, but I bet within the next
                year the models will improve even more that it will get closer
                to 100%. Hope you like it!
              </p>
              <p>
                [0]
                <a href="https://news.ycombinator.com/item?id=36976333"
                  >https://news.ycombinator.com/item?id=36976333</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41202694">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41202694"
              >Launch HN: Roe AI (YC W24) – AI-powered data warehouse to query
              multimodal data</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 15:17:06</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41202694"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
            <div class="text">
              <a href="https://getroe.ai">https://getroe.ai</a>). We’re building
              a query engine that lets data people do SQL queries on various
              kinds of unstructured data (videos, images, webpages, documents)
              using LLM-powered data processors.
              <p>
                Here is a 3-minute video:
                <a href="https://www.youtube.com/watch?v=9-WwJk1v5mI"
                  >https://www.youtube.com/watch?v=9-WwJk1v5mI</a
                >, showing how to create an LLM data processor to process
                videos, build a semantic search for image data, and use it with
                SQL. The problem we tackle is that data analysts cannot quickly
                answer their business questions around unstructured, multimodal
                data. For example, product teams want to understand user session
                replay videos to understand the painpoints of using their
                product. Ads teams need to know everything about an advertiser
                based on their web pages, such as the products they offer,
                payment methods, etc. Marketing teams need to know how product
                placement or music in a marketing campaign could get more views.
                And so on.
              </p>
              <p>
                For data that is structured, questions like these can be
                answered quickly with SQL queries in Snowflake / BigQuery. But
                when you have unstructured multimodal data, it becomes a complex
                analysis process: open a Python notebook, write custom logic to
                get these multimodal data from blob storage (or write a crawler
                first if you need webpage data), find an AI model, do prompt
                engineering, do data ops to productionize the workload in a data
                workflow, etc. We simplify this process to a few lines of SQL.
              </p>
              <p>
                How it works: first, we leverage multimodal LLMs as data
                processors because they’re good at unstructured data information
                extraction, classification or any arbitrary tasks. Next, we’ve
                built a user interface for data people to explore multimodal
                data and manage AI components. Then we have a quick semantic
                index builder for multimodal data. (We often see databases
                provide vector search functionality but not indexing building,
                so we built that.) Utility functions deal with multimodal data,
                like video cutter, PDF page selector, etc. Finally, SQL is the
                command line for slicing and dicing multimodal data.
              </p>
              <p>
                How we got here: I’ve experienced 3 data evolutions in the last
                10 years. At UC Berkeley, I was a data researcher using a
                supercomputer cluster called Savio. It was a bare-metal way to
                analyze the data—I had to move CSV between machines. Then at
                LinkedIn, I had Hadoop + Pig / Scala Spark. That abstracted most
                of the work, but I spent hours tuning jobs and had a headache
                manipulating HDFS directories. Later I joined Snowflake, and was
                like, holy – data analysis can be this simple – I can just use
                SQL to do everything within this data warehouse! I asked myself:
                why can’t we make something like Snowflake for unstructured
                data? That was the impulse behind Roe.ai and it’s been driving
                me ever since.
              </p>
              <p>
                To get started, you can sign in at
                <a href="https://app.roe-ai.com/">https://app.roe-ai.com/</a>
                and there are docs at
                <a href="https://docs.roe-ai.com/">https://docs.roe-ai.com/</a>.
                You can load unstructured data via our SQL and File API,
                Snowflake Staging Data Connector, S3 Blob Storage Data
                connector, Zapier Roe AI Zap, or the SQL function
                load_url_file() to get a file from a URL.
              </p>
              <p>
                Some logistics: the product is free to start, and we’ve
                preloaded $50 AI credits—enough to process 3000 one-pager PDFs.
                If you use all $50, just email us, and we’ll give you more. The
                solution is not open-sourced because it is too complex to be
                self-hosted, but let us know if you see the potential for
                open-source.
              </p>
              <p>
                The product is early and could have bugs and UX problems. It’d
                be incredible if you could give it a spin anyway and we hope it
                will be interesting and that you’ll let us know what you think!
                Jason and I will be around in the thread and are really
                interested in hearing from you!
              </p>
            </div>
          </section>
        </section>
        <section id="41202064">
          <h3>
            <a class="item" href="https://github.com/TrafficGuard/nous"
              >Show HN: Nous – Open-Source Agent Framework with Autonomous, SWE
              Agents, WebUI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 14:16:09</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41202064"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
            <div class="text">
              <p>
                It's a bit of CrewAI, OpenDevon, LangFuse/Cloud all in one,
                providing devs who prefer TypeScript an integrated framework
                thats provides a lot out of the box to start experimenting and
                building agents with.
              </p>
              <p>
                It started after peeking at the LangChain docs a few times and
                never liking the example code. I began experimenting with
                automating a simple Jira request from the engineering team to
                add an index to one of our Google Spanner databases (for context
                I'm the DevOps/SRE lead for an AdTech company).
              </p>
              <p>
                It incudes the tooling we're building out to automate processes
                from a DevOps/SRE perspective, which initially includes a
                configurable GitLab merge request AI reviewer.
              </p>
              <p>
                The initial layer above Aider (<a href="https://aider.chat/"
                  >https://aider.chat/</a
                >) grew into coding agent and an autonomous agent with
                LLM-independent function calling with auto-generated function
                schemas.
              </p>
              <p>
                And as testing via the CLI became unwieldy soon grew database
                persistence, tracing, a Web UI and human-in-the-loop
                functionality.
              </p>
              <p>
                One of the more interesting additions is the new autonomous
                agent which generates Python code that can call the available
                functions. Using the pyodide library the tool objects are
                proxied into the Python scope and executed in a WebAssembly
                sandbox.
              </p>
              <p>
                As its able to perform multiple calls and validation logic in a
                single control loop, it can reduce the cost and latency, getting
                the most out of the frontier LLMs calls with better reasoning.
              </p>
              <p>
                Benchmark runners for the autonomous agent and coding benchmarks
                are in the works to get some numbers on the capabilities so far.
                I'm looking forward to getting back to implementing all the
                ideas around improving the code and autonomous agents from a
                metacognitive perspective after spending time on docs,
                refactorings and tidying up recently.
              </p>
              <p>
                Check it out at
                <a href="https://github.com/trafficguard/nous"
                  >https://github.com/trafficguard/nous</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41201555">
          <h3>
            <a
              class="item"
              href="https://marginalrevolution.com/marginalrevolution/2024/08/jake-seliger-is-dead.html"
              >Jake Seliger has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 13:19:03</span
              ><span class="points-container"
                >Points: <span class="points">599</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41201555"
                  >Comments</a
                ><span class="descendants">: 118</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41199567">
          <h3>
            <a class="item" href="https://otranscribe.com/"
              >OTranscribe: A free and open tool for transcribing audio
              interviews</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-09 @ 07:31:15</span
              ><span class="points-container"
                >Points: <span class="points">363</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41199567"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41197300">
          <h3>
            <a
              class="item"
              href="https://blog.smithsecurity.biz/hacking-the-scammers"
              >USPS text scammers duped his wife, so he hacked their
              operation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 23:00:21</span
              ><span class="points-container"
                >Points: <span class="points">359</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41197300"
                  >Comments</a
                ><span class="descendants">: 247</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41195872">
          <h3>
            <a class="item" href="https://marta.sh/blog/back-on-track/"
              >Marta File Manager: Back on Track</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 20:28:43</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41195872"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41194929">
          <h3>
            <a class="item" href="https://rya.nc/vpp-hack.html"
              >Hacking a Virtual Power Plant</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 18:52:57</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41194929"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41193922">
          <h3>
            <a
              class="item"
              href="https://georgemauer.net/2024/08/01/a-heck-of-a-wild-bug-chase.html"
              >A heck of a wild bug chase</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 17:17:19</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41193922"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41191069">
          <h3>
            <a
              class="item"
              href="https://dmitry.gr/?r=06.%20Thoughts&amp;proj=11.%20RP2350"
              >I got almost all of my wishes granted with RP2350</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 13:03:22</span
              ><span class="points-container"
                >Points: <span class="points">654</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41191069"
                  >Comments</a
                ><span class="descendants">: 325</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41188769">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=yxBC6XzuMPs"
              >Using the Moon as an Echo [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 06:47:26</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41188769"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41188260">
          <h3>
            <a
              class="item"
              href="https://charity.wtf/2024/08/07/is-it-time-to-version-observability-signs-point-to-yes/"
              >Is it time to version observability?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-08 @ 04:58:54</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41188260"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41171142">
          <h3>
            <a class="item" href="https://benlo.com/visicalc/"
              >VisiCalc – The Early Days (2003)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 14:25:35</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41171142"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41169437">
          <h3>
            <a class="item" href="https://github.com/LostArtefacts/TR1X"
              >TR1X: Open-source re-implementation of Tomb Raider 1</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 10:23:20</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41169437"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41167921">
          <h3>
            <a class="item" href="https://github.com/fukamachi/qlot"
              >Qlot: Common Lisp Library Manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 05:04:04</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41167921"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41161672">
          <h3>
            <a class="item" href="https://plateplanner.nitro.bio/"
              >Show HN: PlatePlanner – Design Beautiful Platemaps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-05 @ 14:27:53</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41161672"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              Spend less time in excel and more time doing science. Design a
              platemap in seconds, share it with your team, and reuse it for
              future experiments.
            </div>
          </section>
        </section>
        <section id="41159075">
          <h3>
            <a class="item" href="http://tom7.org/papers/murphy2022harder.pdf"
              >Harder Drive: Hard drives we didn't want or need (2022) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-05 @ 08:10:04</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41159075"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41158333">
          <h3>
            <a
              class="item"
              href="https://www.altaonline.com/dispatches/a43145605/sonoran-desert-survival-julian-smith-pablo-valencia-bill-broyles/"
              >'Agua, Agua'</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-05 @ 05:13:06</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41158333"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41156534">
          <h3>
            <a class="item" href="https://www.tryphotino.io/"
              >Photino: A lighter Electron</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 21:44:38</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41156534"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41154895">
          <h3><a class="item" href="https://ivanish.ca/jerk/">Jerk</a></h3>
          <section>
            <h4>
              <span>2024-08-04 @ 17:10:23</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41154895"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
