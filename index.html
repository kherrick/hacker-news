<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39792640">
          <h3>
            <a
              class="item"
              href="https://www.raycast.com/jobs/software-engineer-rust"
              >Raycast (YC W20) is hiring Rust engineer (Remote, Europe, €104k –
              €160k)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 17:00:55</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39792383">
          <h3>
            <a
              class="item"
              href="https://www.livescience.com/planet-earth/earthquakes/2000-earthquakes-in-1-day-off-canada-coast-suggest-the-ocean-floor-is-ripping-apart-scientists-say"
              >2K earthquakes in 1 day off Canada coast suggest ocean floor is
              ripping apart</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 16:40:03</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39792383"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39792136">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39792136"
              >Launch HN: DryMerge (YC W24) – Automate Workflows with Plain
              English</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 16:15:53</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39792136"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
            <div class="text">
              <a href="https://drymerge.com">https://drymerge.com</a>), a tool
              to automate workflows with plain English. For example, a user can
              say "When I get an email from a potential customer, add their
              details to a google sheet and send me a text", and DryMerge sets
              that up end-to-end in seconds. Other examples might be “When I
              finish a Google Meet with a customer, record any issues reported
              in Linear”, or “Every morning at 9 am, text me a summary of my
              calendar events for the day”.
              <p>
                Here’s a video walkthrough:
                <a href="https://youtu.be/S4L3B21vXGY"
                  >https://youtu.be/S4L3B21vXGY</a
                >.
              </p>
              <p>
                We initially set out to build a dev tool for API integration,
                and while building in the integration space, we realized
                existing workflow automation tools have a few key limitations.
                They still force users to do a lot of work like: Navigate
                through a sea of menus; Break down their workflow into discrete
                steps; Manually configure data transformations.
              </p>
              <p>
                This led us to explore how we could make workflow automation way
                simpler by letting users describe what they want in plain
                English and having AI take care of the automation setup,
                replacing no-code GUIs or scripts.
              </p>
              <p>Under the hood, DryMerge has two key components:</p>
              <p>
                - A semantic layer that uses LLMs to interpret the user's
                request and map it to a series of pre-defined triggers and
                actions (we've built hundreds of these integrations).
              </p>
              <p>
                - A data plane that orchestrates the actual execution, complete
                with smart field mapping, conditional logic, and
                human-in-the-loop checks.
              </p>
              <p>
                When a user describes a workflow, our semantic layer generates
                multiple candidate plans, scores them, and selects the best
                based on prior successful/failed workflows. It extracts key
                entities and fields needed, and auto-generates a simple form for
                the user to fill in any missing details. Users can then
                iteratively describe, tweak, and test their workflow in the same
                chat.
              </p>
              <p>
                The data plane then subscribes to the relevant event streams,
                executes the workflow steps, and handles gnarly aspects like
                pagination, retries, and rollbacks invisibly. We allow the
                semantic layer to delegate some values for runtime dependency
                injection from the data plane, to handle open-ended logic like
                classifying an email as urgent or summarizing a Google Meet
                transcript.
              </p>
              <p>
                We integrate with 14 common services — we’d love for you to try
                it out and share what you think. Check it out at
                <a href="https://drymerge.com/app">https://drymerge.com/app</a>.
              </p>
            </div>
          </section>
        </section>
        <section id="39791301">
          <h3>
            <a class="item" href="https://github.com/leapingio/leaping"
              >Show HN: Leaping – Debug Python tests instantly with an LLM
              debugger</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 14:52:06</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39791301"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re currently working on a platform that ingests logs and then
                automatically reproduces, root causes and ultimately fixes
                production bugs as they happen. You can see some of our work on
                this here -
                <a href="https://news.ycombinator.com/item?id=39528087"
                  >https://news.ycombinator.com/item?id=39528087</a
                >
              </p>
              <p>
                As we were building the root-cause phase of our automated
                debugger, we realized that we developed something that resembled
                an omniscient debugger. Like an omniscient debugger, it also
                keeps track of variable assignments over time but, you can
                interact with it at a higher level than a debugger using natural
                language. We ended up sticking it in a pytest plugin and have
                been using it ourselves for development over the past few weeks.
              </p>
              <p>
                Using this pytest plugin, you’re able to reason at a much higher
                level than conventional debuggers and can ask questions like:
              </p>
              <p>- Why did function x get hit?</p>
              <p>- Why was variable y set to this value?</p>
              <p>
                - What changes can I make to this code to make this test pass?
              </p>
              <p>
                Here’s a brief demo of this in action:
                <a
                  href="https://www.loom.com/share/94ebe34097a343c39876d7109f2a1428"
                  >https://www.loom.com/share/94ebe34097a343c39876d7109f2a1428</a
                >
              </p>
              <p>
                To achieve this, we first instrument the test using sys.settrace
                (or, on versions of python &gt;3.12, the far better
                sys.monitoring!) to keep a history of all the functions that
                were called, along with the calling line numbers. We then re-run
                the test and use AST parsing to find all the variable
                assignments and keep track of those changes over time. We also
                use AST parsing to obtain the source code for these functions.
                We then neatly format and pass all this context to GPT.
              </p>
              <p>
                We’d love it if you checked the pytest plugin out and we welcome
                all feedback :) . If you want to chat bugs, our emails are also
                always open - kanav@leaping.io
              </p>
            </div>
          </section>
        </section>
        <section id="39791182">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2024-03-backpacks-neutrophils-immune-cancer.html"
              >'Backpacks' attached to neutrophils activate the immune system
              against cancer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 14:39:09</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39791182"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39790567">
          <h3>
            <a
              class="item"
              href="https://dannb.org/blog/2024/obsidian-use-your-notes/"
              >How to actually use the notes you take</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 13:33:12</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39790567"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39790365">
          <h3>
            <a
              class="item"
              href="https://github.com/jgthms/bulma/releases/tag/1.0.0"
              >The Bulma CSS framework reaches 1.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 13:12:43</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39790365"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39790003">
          <h3>
            <a class="item" href="https://webtag.io"
              >Show HN: Free Plain-Text Bookmarking</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 12:28:46</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39790003"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39789920">
          <h3>
            <a
              class="item"
              href="https://www.construction-physics.com/p/why-is-it-so-hard-to-build-an-airport"
              >Why is it so hard to build an airport?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 12:18:38</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39789920"
                  >Comments</a
                ><span class="descendants">: 367</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39789139">
          <h3>
            <a
              class="item"
              href="https://aeon.co/essays/my-grandfather-paul-tillich-the-unbelieving-theologian"
              >My grandfather Paul Tillich, the unbelieving theologian</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 10:19:53</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39789139"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39788456">
          <h3>
            <a
              class="item"
              href="https://hivekit.io/blog/the-headaches-of-distributed-spatial-indices/"
              >Hexagons and Hilbert curves – The headaches of distributed
              spatial indices</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 08:20:47</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39788456"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39788322">
          <h3>
            <a
              class="item"
              href="https://umarbutler.com/mapping-almost-every-law-regulation-and-case-in-australia/"
              >Show HN: Mapping almost every law, regulation and case in
              Australia</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 07:53:38</span
              ><span class="points-container"
                >Points: <span class="points">274</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39788322"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
            <div class="text">
              <p>
                After months of hard work, I am excited to share the first ever
                semantic map of Australian law.
              </p>
              <p>
                My map represents the first attempt to map Australian laws,
                cases and regulations across the Commonwealth, States and
                Territories semantically, that is, by their underlying meaning.
              </p>
              <p>
                Each point on the map is a unique document in the Open
                Australian Legal Corpus, the largest open database of Australian
                law (which, full disclosure, I created). The closer any two
                points are on the map, the more similar they are in underlying
                meaning.
              </p>
              <p>
                As I cover in my article, there’s a lot you can learn by mapping
                Australian law. Some of the most interesting insights to come
                out of this initiative are that:
              </p>
              <p>
                ⦁ Migration, family and substantive criminal law are the most
                isolated branches of case law on the map;
              </p>
              <p>
                ⦁ Migration, family and substantive criminal law are the most
                distant branches of case law from legislation on the map;
              </p>
              <p>
                ⦁ Development law is the closest branch of case law to
                legislation on the map;
              </p>
              <p>
                ⦁ Case law is more of a continuum than a rigidly defined
                structure and the borders between branches of case law can often
                be quite porous; and
              </p>
              <p>
                ⦁ The map does not reveal any noticeable distinctions between
                Australian state and federal law, whether it be in style,
                principles of interpretation or general jurisprudence.
              </p>
              <p>
                If you’re interested in learning more about what the map has to
                teach us about Australian law or if you’d like to find out how
                you can create semantic maps of your own, check out the full
                article on my blog, which provides a detailed analysis of my map
                and also covers the finer details of how I built it, with code
                examples offered along the way.
              </p>
            </div>
          </section>
        </section>
        <section id="39787932">
          <h3>
            <a class="item" href="https://hnrankings.info"
              >Hacker News Rankings. Graphs of HN posts rank on timeline</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 06:33:11</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39787932"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39787176">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2403.07815"
              >Chronos: Learning the Language of Time Series</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 03:25:13</span
              ><span class="points-container"
                >Points: <span class="points">162</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39787176"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39786984">
          <h3>
            <a class="item" href="https://www.lexaloffle.com/picotron.php"
              >Picotron Is a Fantasy Workstation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 02:48:23</span
              ><span class="points-container"
                >Points: <span class="points">558</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39786984"
                  >Comments</a
                ><span class="descendants">: 149</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39786666">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/how-chain-of-thought-reasoning-helps-neural-networks-compute-20240321/"
              >How Chain-of-Thought Reasoning Helps Neural Networks Compute</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 01:50:47</span
              ><span class="points-container"
                >Points: <span class="points">188</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39786666"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39786124">
          <h3>
            <a
              class="item"
              href="https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2023CN000231"
              >The Origins of the Generic Mapping Tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-22 @ 00:25:59</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39786124"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39784656">
          <h3>
            <a
              class="item"
              href="http://xahlee.info/math/algorithmic_math_art.html"
              >Algorithmic Mathematical Art (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 21:31:47</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39784656"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39784395">
          <h3>
            <a
              class="item"
              href="https://essopenarchive.org/users/527743/articles/673415-new-views-of-lunar-seismicity-brought-by-analysis-of-newly-discovered-moonquakes-in-apollo-short-period-seismic-data"
              >Apollo Data Uncovers Lunar Seismic Events</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 21:05:39</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39784395"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39784355">
          <h3>
            <a
              class="item"
              href="https://sites.wustl.edu/meteoritesite/items/meteorite-fusion-crust/"
              >Meteorite Self-test check-list</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 21:02:08</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39784355"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39782761">
          <h3>
            <a
              class="item"
              href="https://www.cockroachlabs.com/blog/demonic-nondeterminism/"
              >Antithesis of a One-in-a-Million Bug: Taming Demonic
              Nondeterminism</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 18:48:55</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39782761"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39781776">
          <h3>
            <a
              class="item"
              href="https://reactormag.com/silent-running-a-1970s-environmental-fable-remains-depressingly-all-too-relevant/"
              >Silent Running: 1970s Environmental Fable Remains Depressingly
              All Too Relevant</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 17:35:39</span
              ><span class="points-container"
                >Points: <span class="points">166</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39781776"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39778999">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/03/21/technology/apple-doj-lawsuit-antitrust.html"
              >U.S. sues Apple, accusing it of maintaining an iPhone monopoly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 14:37:43</span
              ><span class="points-container"
                >Points: <span class="points">2432</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39778999"
                  >Comments</a
                ><span class="descendants">: 2344</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39778412">
          <h3>
            <a class="item" href="https://difftastic.wilfred.me.uk/"
              >Difftastic, a structural diff tool that understands syntax</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-21 @ 13:42:46</span
              ><span class="points-container"
                >Points: <span class="points">1060</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39778412"
                  >Comments</a
                ><span class="descendants">: 175</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39768434">
          <h3>
            <a
              class="item"
              href="https://www.flightradar24.com/blog/gps-jamming-map/"
              >Flightradar24's new GPS jamming map</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-20 @ 16:03:21</span
              ><span class="points-container"
                >Points: <span class="points">958</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39768434"
                  >Comments</a
                ><span class="descendants">: 269</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39761418">
          <h3>
            <a
              class="item"
              href="https://www.6sqft.com/how-researchers-used-nyc-buildings-to-measure-the-1925-solar-eclipse/"
              >Researchers used NYC buildings to measure the 1925 solar
              eclipse</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 23:32:18</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39761418"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39757394">
          <h3>
            <a
              class="item"
              href="https://webkit.org/blog/15190/implementing-vertical-form-controls/"
              >Implementing Vertical Form Controls</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 16:24:29</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39757394"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39754403">
          <h3>
            <a class="item" href="https://www.goto10retro.com/p/atari-falcon030"
              >Atari Falcon030</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-19 @ 10:35:52</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39754403"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39750836">
          <h3>
            <a class="item" href="https://www.henrikkarlsson.xyz/p/limitatons"
              >On limitations that hide in your blindspot</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 22:29:39</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39750836"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39742921">
          <h3>
            <a class="item" href="https://github.com/AviSoori1x/makeMoE"
              >Implementation of mixture of experts language model in a single
              file of PyTorch</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-18 @ 11:57:46</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39742921"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
