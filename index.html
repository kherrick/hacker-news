<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="47183907">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/kyber/jobs/59yPaCs-enterprise-account-executive-ae"
              >Kyber (YC W23) Is Hiring an Enterprise Account Executive</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 18:37:53</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47183660">
          <h3>
            <a
              class="item"
              href="https://twitter.com/BullTheoryio/status/2027250361816486085"
              >Block spent $68M on a single party in September 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 18:18:58</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47183660"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47183578">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Dan_Simmons"
              >Dan Simmons, author of Hyperion, Song of Kali, dead at 77</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 18:13:39</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47183578"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47183503">
          <h3>
            <a
              class="item"
              href="https://blog.skypilot.co/openclaw-on-skypilot/"
              >Don't run OpenClaw on your main machine</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 18:06:26</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47183503"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47183435">
          <h3>
            <a
              class="item"
              href="https://smallstep.com/blog/ncsc-zero-trust-device-identity/"
              >Your Device Identity Is Probably a Liability</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 18:01:25</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47183435"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47183191">
          <h3>
            <a
              class="item"
              href="http://theoryofconstraints.blogspot.com/2007/06/toc-stories-2-blue-light-creating.html"
              >Theory of Constraints: "Blue Light" creating capacity for nothing
              (2007)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 17:41:30</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47183191"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47183176">
          <h3>
            <a class="item" href="https://signalcend.com/"
              >Show HN: SignalCend – API that resolves conflicting IoT device
              state in 47ms</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 17:39:42</span
              ><span class="points-container"
                >Points: <span class="points">3</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47183176"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47182659">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2026/02/27/lovable_app_vulnerabilities/"
              >Vibe coded Lovable-hosted app littered with basic flaws exposed
              18K users</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 16:48:02</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47182659"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47182487">
          <h3>
            <a class="item" href="https://go.dev/blog/allocation-optimizations"
              >Allocating on the Stack</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 16:34:05</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47182487"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47182483">
          <h3>
            <a
              class="item"
              href="https://www.cbsnews.com/news/nasa-artemis-moon-program-overhaul/"
              >NASA announces major overhaul of Artemis program amid safety
              concerns, delays</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 16:33:39</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47182483"
                  >Comments</a
                ><span class="descendants">: 93</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47181841">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/technology/2026/feb/26/chatgpt-health-fails-recognise-medical-emergencies"
              >Experts sound alarm after ChatGPT Health fails to recognise
              medical emergencies</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 15:44:33</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47181841"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47181801">
          <h3>
            <a
              class="item"
              href="https://www.mendral.com/blog/llms-are-good-at-sql"
              >We gave terabytes of CI logs to an LLM</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 15:41:13</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47181801"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47181753">
          <h3>
            <a
              class="item"
              href="https://github.com/c3d/db48x/commit/7819972b641ac808d46c54d3f5d1df70d706d286"
              >Open source calculator firmware DB48X forbids CA/CO use due to
              age verification</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 15:37:53</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47181753"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47181471">
          <h3>
            <a
              class="item"
              href="https://github.com/qwibitai/nanoclaw/tree/main/repo-tokens"
              >Show HN: Badge that shows how well your codebase fits in an LLM's
              context window</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 15:14:42</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47181471"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
            <div class="text">
              <p>
                Repo Tokens is a GitHub Action that counts your codebase's size
                in tokens (using tiktoken) and updates a badge in your README.
                The badge color reflects what percentage of an LLM's context
                window the codebase fills: green for under 30%, yellow for
                50-70%, red for 70%+. Context window size is configurable and
                defaults to 200k (size of Claude models).
              </p>
              <p>
                It's a composite action. Installs tiktoken, runs ~60 lines of
                inline Python, takes about 10 seconds. The action updates the
                README but doesn't commit, so your workflow controls the git
                strategy.
              </p>
              <p>
                The idea is to make token size a visible metric, like bundle
                size badges for JS libraries. Hopefully a small nudge to keep
                codebases lean and agent-friendly.
              </p>
              <p>
                GitHub:
                <a
                  href="https://github.com/qwibitai/nanoclaw/tree/main/repo-tokens"
                  >https://github.com/qwibitai/nanoclaw/tree/main/repo-tokens</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="47181391">
          <h3>
            <a
              class="item"
              href="https://www.eff.org/deeplinks/2026/02/victory-tenth-circuit-finds-fourth-amendment-doesnt-support-broad-search-0"
              >Tenth Circuit: 4th Amendment Doesn't Support Broad Search of
              Protesters' Devices</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 15:09:04</span
              ><span class="points-container"
                >Points: <span class="points">304</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47181391"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47180569">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/a-better-web-streams-api/"
              >A better streams API is possible for JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 14:02:53</span
              ><span class="points-container"
                >Points: <span class="points">263</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47180569"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47180083">
          <h3>
            <a class="item" href="https://retrotick.com/"
              >Show HN: RetroTick – Run classic Windows EXEs in the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 13:06:50</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47180083"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
            <div class="text">
              <p>
                Demo: <a href="https://retrotick.com">https://retrotick.com</a>
              </p>
              <p>
                GitHub:
                <a href="https://github.com/lqs/retrotick"
                  >https://github.com/lqs/retrotick</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="47178863">
          <h3>
            <a
              class="item"
              href="https://f-droid.org/2026/02/26/board-of-directors-nominations.html"
              >F-Droid Board of Directors nominations 2026</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 10:27:29</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47178863"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47178678">
          <h3>
            <a class="item" href="https://www.forbrukerradet.no/breakingfree/"
              >Breaking Free</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 09:56:42</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47178678"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47178371">
          <h3>
            <a
              class="item"
              href="https://claude.com/contact-sales/claude-for-oss"
              >Get free Claude max 20x for open-source maintainers</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 09:08:58</span
              ><span class="points-container"
                >Points: <span class="points">269</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47178371"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47177186">
          <h3>
            <a
              class="item"
              href="https://gwern.net/doc/sociology/2003-ashforth.pdf"
              >The normalization of corruption in organizations (2003) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 06:21:23</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47177186"
                  >Comments</a
                ><span class="descendants">: 135</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47176257">
          <h3>
            <a
              class="item"
              href="https://moultano.wordpress.com/2026/02/22/the-hunt-for-dark-breakfast/"
              >The Hunt for Dark Breakfast</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-27 @ 03:49:48</span
              ><span class="points-container"
                >Points: <span class="points">472</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47176257"
                  >Comments</a
                ><span class="descendants">: 171</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47173121">
          <h3>
            <a
              class="item"
              href="https://www.anthropic.com/news/statement-department-of-war"
              >Statement from Dario Amodei on our discussions with the
              Department of War</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 22:42:47</span
              ><span class="points-container"
                >Points: <span class="points">2753</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47173121"
                  >Comments</a
                ><span class="descendants">: 1462</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47172238">
          <h3>
            <a class="item" href="https://www.unfudged.io/"
              >Show HN: Unfudged – version every change between commits -
              local-first</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-26 @ 21:30:19</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47172238"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
            <div class="text">
              <i>unf</i> after I pasted a prompt into the wrong agent terminal
              and it overwrote hours of hand-edits across a handful of files.
              Git couldn't help because I hadn't finished/committed my in
              progress work. I wanted something that recorded every save
              automatically so I could rewind to any point in time. I wanted to
              make it difficult for an agent to permanently screw anything up,
              even with an errant <i>rm -rf</i>
              <p>
                <i>unf</i> is a background daemon that watches directories you
                choose (via CLI) and snapshots every text file on save. It
                stores file contents in an object store, tracks metadata in
                SQLite, and gives you a CLI to query and restore any version.
                The install includes a UI, as well to explore the history
                through time.
              </p>
              <p>
                The tool skips binaries and respects `.gitignore` if one exists.
                The interface borrows from git so it should feel familiar:
                <i>unf log</i>, <i>unf diff</i>, <i>unf restore</i>.
              </p>
              <p>
                I say "UN-EF" vs U.N.F, but that's for y'all to decide: I
                started by calling the project Unfucked and got unfucked.ai,
                which if you know me and the messes I get myself into, is a
                fitting purchase.
              </p>
              <p>
                The CLI command is `unf` and the Tauri desktop app is called
                "Unfudged".
              </p>
              <p>
                How it works:
                <a href="https://www.unfudged.io/tech"
                  >https://www.unfudged.io/tech</a
                >
                (summary below)
              </p>
              <p>
                The daemon uses FSEvents on macOS and inotify on Linux. When a
                file changes, `unf` hashes the content with BLAKE3 and checks
                whether that hash already exists in the object store — if it
                does, it just records a new metadata entry pointing to the
                existing blob. If not, it writes the blob and records the entry.
                Each snapshot is a row in SQLite. Restores read the blob back
                from the object store and overwrite the file, after taking a
                safety snapshot of the current state first (so restoring is
                itself reversible).
              </p>
              <p>
                There are two processes. The core daemon does the real work of
                managing FSEvents/inotify subscriptions across multiple watched
                directories and writing snapshots. A sentinel watchdog
                supervises it, kept alive and aligned by launchd on macOS and
                systemd on Linux. If the daemon crashes, the sentinel respawns
                it and reconciles any drift between what you asked to watch and
                what's actually being watched. It was hard to build the second
                daemon because it felt like conceding that the core wasn't solid
                enough, but I didn't want to ship a tool that demanded
                perfection to deliver on the product promise, so the sentinel is
                the safety net.
              </p>
              <p>
                Fingers crossed, I haven’t seen it crash in over a week of
                personal usage on my Mac. But, I don't want to trigger "works
                for me" trauma.
              </p>
              <p>
                The part I like most: On the UI, I enjoy viewing files through
                time. You can select a time section and filter your projects on
                a histogram of activity. That has been invaluable in seeing what
                the agent was doing.
              </p>
              <p>
                On the CLI, the commands are composable. Everything outputs to
                stdout so you can pipe it into whatever you want. I use these
                regularly and AI agents are better with the tool than I am:
              </p>
              <p></p>
              <pre><code>  # What did my config look like before we broke it?
  unf cat nginx.conf --at 1h | nginx -t -c /dev/stdin

  # Grep through a deleted file
  unf cat old-routes.rs --at 2d | grep "pub fn"

  # Count how many lines changed in the last 10 minutes
  unf diff --at 10m | grep '^[+-]' | wc -l

  # Feed the last hour of changes to an AI for review
  unf diff --at 1h | pbcopy

  # Compare two points in time with your own diff tool
  diff &lt;(unf cat app.tsx --at 1h) &lt;(unf cat app.tsx --at 5m)

  # Restore just the .rs files that changed in the last 5 minutes
  unf diff --at 5m --json | jq -r '.changes[].file' | grep '\.rs$' | xargs -I{} unf restore {} --at 5m

  # Watch for changes in real time
  watch -n5 'unf diff --at 30s'
</code></pre>
              What was new for me: I came to Rust in Nov. 2025 honestly because
              of HN enthusiasm and some FOMO. No regrets. I enjoy the language
              enough that I'm now working on custom clippy lints to enforce
              functional programming practices. This project was also my first
              Apple-notarized DMG, my first Homebrew tap, and my second Tauri
              app (first one I've shared).
              <p>Install &amp; Usage:</p>
              <p></p>
              <pre><code>  &gt; brew install cyrusradfar/unf/unfudged
</code></pre>
              Then <i>unf watch</i> in a directory. <i>unf help</i> covers the
              details (or ask your agent to coach).
            </div>
          </section>
        </section>
        <section id="47151961">
          <h3>
            <a
              class="item"
              href="https://svpow.com/2026/02/02/what-was-the-first-life-restoration-of-a-sauropod/"
              >What was the first life restoration of a sauropod?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-25 @ 14:29:48</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47151961"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47146487">
          <h3>
            <a
              class="item"
              href="https://blog.janestreet.com/can-you-reverse-engineer-our-neural-network/"
              >Can you reverse engineer our neural network?</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-25 @ 02:20:13</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47146487"
                  >Comments</a
                ><span class="descendants">: 151</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47142225">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gaming/2026/02/inside-the-quixotic-team-trying-to-build-an-entire-world-in-a-20-year-old-game/"
              >The quixotic team trying to build a world in a 20-year-old
              game</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 20:11:04</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47142225"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47139911">
          <h3>
            <a class="item" href="https://growingswe.com/blog/quadtrees"
              >An interactive intro to quadtrees</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 17:31:05</span
              ><span class="points-container"
                >Points: <span class="points">175</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47139911"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47137199">
          <h3>
            <a
              class="item"
              href="https://www.oranlooney.com/post/grifters-skeptics-marks/"
              >Modeling Cycles of Grift with Evolutionary Game Theory</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 13:54:21</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47137199"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47135159">
          <h3>
            <a
              class="item"
              href="https://www.joshwcomeau.com/animation/sprites/"
              >Sprites on the Web</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-24 @ 10:06:43</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47135159"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
