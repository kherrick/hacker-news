<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40922929">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/codecrafters/jobs/s2MPHPu-marketing-writer-technical"
              >CodeCrafters (YC S22) Is Hiring a Marketing Writer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 01:29:48</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40922739">
          <h3>
            <a class="item" href="https://github.com/lm-sys/RouteLLM"
              >RouteLLM: A framework for serving and evaluating LLM routers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-10 @ 00:35:38</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40922739"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40922548">
          <h3>
            <a
              class="item"
              href="https://open.nytimes.com/enhancing-the-new-york-times-web-performance-with-react-18-d6f91a7c5af8"
              >Enhancing the New York Times Web Performance with React 18</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 23:59:06</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40922548"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40921336">
          <h3>
            <a
              class="item"
              href="https://frame.work/blog/framework-laptop-13-deep-dive---a-laptop-webcam-with-smartphone-technology"
              >Framework Laptop 13 Deep Dive: A laptop webcam with smartphone
              technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 21:24:42</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40921336"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40920681">
          <h3>
            <a
              class="item"
              href="https://github.com/maelstrom-software/maelstrom"
              >Show HN: Maelstrom – A Hermetic, Clustered Test Runner for Python
              and Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 20:23:12</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40920681"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                Maelstrom is a suite of tools for running tests in hermetic
                micro-containers locally on your machine or distributed across
                arbitrarily large clusters. Maelstrom currently has test runners
                for Rust and Python, with more on the way. You might use
                Maelstrom to run your tests because:
              </p>
              <p></p>
              <pre><code>  * It's easy. Maelstrom functions as a drop-in replacement for cargo test and pytest. In most cases, it just works with your existing tests with minimal configuration.
  * It's reliable. Maelstrom runs every test hermetically in its own lightweight container, eliminating confusing errors caused by inter-test or implicit test-environment dependencies.
  * It's scalable. Maelstrom can be run as a cluster. You can add more worker machines to linearly increase test throughput.
  * It's clean. Maelstrom has built a rootless container implementation (not relying on Docker or RunC) from scratch, in Rust, optimized to be low-overhead and start quickly.
  * It's fast. In most cases, Maelstrom is faster than cargo test, even without using clustering. Maelstrom’s test-per-process model is inherently slower than pytest’s shared-process model, but Maelstrom provides test isolation at a low performance cost.
</code></pre>
              While our focus thus far has been on running tests, Maelstrom's
              underlying job execution system is general-purpose. We provide a
              command line utility to run arbitrary commands, as well a
              gRPC-based API and Rust bindings for programmatic access and
              control.
              <p>
                Feedback and questions are welcome! Thanks for giving it a
                whirl.
              </p>
            </div>
          </section>
        </section>
        <section id="40920246">
          <h3>
            <a
              class="item"
              href="https://flyingcarcomputer.com/posts/how-to-validate-market-with-development-board/"
              >How to validate a market with development boards and SD cards</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 19:47:32</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40920246"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40920122">
          <h3>
            <a
              class="item"
              href="https://tedium.co/2024/07/06/compact-disc-pregap-history/"
              >How CD Pregaps Gained Their Hidden Track Superpowers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 19:38:36</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40920122"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40919505">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/artanddesign/gallery/2024/jul/08/tokyos-oldest-train-line-jr-yamanote-in-pictures"
              >Tokyo's oldest train line – in pictures</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 18:51:28</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40919505"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40919253">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2024/07/08/github_copilot_dmca/"
              >Judge dismisses DMCA copyright claim in GitHub Copilot suit</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 18:25:03</span
              ><span class="points-container"
                >Points: <span class="points">150</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40919253"
                  >Comments</a
                ><span class="descendants">: 201</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40918152">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40918152"
              >Ask HN: How do browsers isolate internal audio from microphone
              input?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 16:45:01</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40918152"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
            <div class="text">
              <p>
                Does anyone know how Chrome and Chromium achieve this audio
                isolation?
              </p>
              <p>
                Given that Chromium is open source, it would be helpful if
                someone could point me to the specific part of the codebase that
                handles this. Any insights or technical details would be greatly
                appreciated!
              </p>
            </div>
          </section>
        </section>
        <section id="40918052">
          <h3>
            <a
              class="item"
              href="https://twitter.com/lcasdev/status/1810696257137959018"
              >Google Chrome has an API accesible only from *.google.com</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 16:35:11</span
              ><span class="points-container"
                >Points: <span class="points">699</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40918052"
                  >Comments</a
                ><span class="descendants">: 281</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40917358">
          <h3>
            <a
              class="item"
              href="https://www.writethedocs.org/guide/docs-as-code/"
              >Docs as code (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 15:37:25</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40917358"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40917312">
          <h3>
            <a
              class="item"
              href="https://stackdiary.com/linksys-velop-routers-send-wi-fi-passwords-in-plaintext-to-us-servers/"
              >Linksys Velop routers send Wi-Fi passwords in plaintext to US
              servers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 15:33:29</span
              ><span class="points-container"
                >Points: <span class="points">405</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40917312"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40916786">
          <h3>
            <a class="item" href="https://turbopuffer.com/blog/turbopuffer"
              >Turbopuffer: Fast search on object storage</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 14:48:59</span
              ><span class="points-container"
                >Points: <span class="points">173</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40916786"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40916193">
          <h3>
            <a
              class="item"
              href="https://www.orionreed.com/posts/scoped-propagators"
              >Scoped Propagators</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 13:54:59</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40916193"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40915082">
          <h3>
            <a class="item" href="https://robertheaton.com/pyskywifi/"
              >PySkyWiFi: Free stupid wi-fi on long-haul flights</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 12:01:37</span
              ><span class="points-container"
                >Points: <span class="points">607</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40915082"
                  >Comments</a
                ><span class="descendants">: 324</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40915005">
          <h3>
            <a class="item" href="https://github.com/facebookresearch/MobileLLM"
              >MobileLLM: Optimizing Sub-Billion Parameter Language Models for
              On-Device Use</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 11:48:42</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40915005"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40914958">
          <h3>
            <a class="item" href="https://circos.ca/"
              >Circos – Circular Visualization</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 11:44:40</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40914958"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40914475">
          <h3>
            <a
              class="item"
              href="https://thiscontext.com/2023/07/26/dynamic-translation-of-smalltalk-to-webassembly/"
              >Dynamic translation of Smalltalk to WebAssembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 10:34:20</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40914475"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40913793">
          <h3>
            <a
              class="item"
              href="https://blog.apnic.net/2022/01/26/beyond-bufferbloat-end-to-end-congestion-control-cannot-avoid-latency-spikes/"
              >End-to-end congestion control cannot avoid latency spikes
              (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 08:42:03</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40913793"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40913736">
          <h3>
            <a class="item" href="https://crawlee.dev/python/"
              >Show HN: Crawlee for Python – a web scraping and browser
              automation library</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 08:30:38</span
              ><span class="points-container"
                >Points: <span class="points">207</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40913736"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
            <div class="text">
              <p>
                This is Jan, the founder of Apify (<a href="https://apify.com/"
                  >https://apify.com/</a
                >) — a full-stack web scraping platform. After the success of
                Crawlee for JavaScript (<a
                  href="https://github.com/apify/crawlee/"
                  >https://github.com/apify/crawlee/</a
                >) and the demand from the Python community, we're launching
                Crawlee for Python today!
              </p>
              <p>The main features are:</p>
              <p>
                - A unified programming interface for both HTTP (HTTPX with
                BeautifulSoup) &amp; headless browser crawling (Playwright)
              </p>
              <p>
                - Automatic parallel crawling based on available system
                resources
              </p>
              <p>
                - Written in Python with type hints for enhanced developer
                experience
              </p>
              <p>
                - Automatic retries on errors or when you’re getting blocked
              </p>
              <p>- Integrated proxy rotation and session management</p>
              <p>
                - Configurable request routing - direct URLs to the appropriate
                handlers
              </p>
              <p>- Persistent queue for URLs to crawl</p>
              <p>- Pluggable storage for both tabular data and files</p>
              <p>
                For details, you can read the announcement blog post:
                <a href="https://crawlee.dev/blog/launching-crawlee-python"
                  >https://crawlee.dev/blog/launching-crawlee-python</a
                >
              </p>
              <p>
                Our team and I will be happy to answer here any questions you
                might have.
              </p>
            </div>
          </section>
        </section>
        <section id="40912920">
          <h3>
            <a class="item" href="https://github.com/tegonhq/tegon"
              >Show HN: Tegon: Open-source alternative to Jira, Linear</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 06:01:47</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40912920"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/tegonhq/tegon"
                >https://github.com/tegonhq/tegon</a
              >), open-source issue tracking software that uses AI to smartly
              automate manual workflows or provide more context to engineers for
              a given task. There's a demo video here:
              <a
                href="https://www.loom.com/share/b664b01e9b064a02be5791c12b77a107"
                >https://www.loom.com/share/b664b01e9b064a02be5791c12b77a107</a
              >, and you can try out the product at
              <a href="https://demo.tegon.ai">https://demo.tegon.ai</a> using
              these credentials:
              <p></p>
              <pre><code>  Email: elon@xyz.com
  Password: XfFNw6GwVJVQv6PA
</code></pre>
              As engineers, our experience with traditional tools like Jira
              hasn't been great. It is slow, bloated and often acts as a burden
              to engineers. These tools didn't help engineers in getting the
              work done faster, they only helped the management in tracking the
              work which enabled a lot of processes and micro-management which
              used to kill our productivity.
              <p>
                With the rise of LLMs, we thought about how project management
                and issue tracking would look 5-10 years from now. The current
                tools didn't match our vision, which excited us and started the
                journey of Tegon. We aim to build a tool where manual workflows
                are either automated or handled by AI. This tool will provide
                better context about a task to an engineer by smartly gathering
                data from all sources, helping teams with better prioritization.
              </p>
              <p>
                Tegon loads all the data from local (indexed db) thus making it
                super fast to load and navigate. We make all of this happen by
                real-time sync in the background. Tegon also uses AI to simplify
                the issue-creation process by automatically creating titles,
                suggesting labels and assignees and identifying duplicates.
                Tegon also simplifies the issue creation process from Slack,
                just apply an emoji to a Slack message and a tegon issue will be
                created making it easier for other teams to raise bugs or
                feature requests to engineering teams.
              </p>
              <p>
                We deeply value the feedback from this community and have spent
                the last month revamping Tegon's design based on the feedback
                from our last launch. We just got started and there's a lot more
                to come. We're eager to get more feedback and keep building. Let
                us know what you think in the comments :)
              </p>
            </div>
          </section>
        </section>
        <section id="40911500">
          <h3>
            <a class="item" href="https://github.com/zherczeg/sljit"
              >Sljit: Platform independent low-level JIT compiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-09 @ 00:54:13</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40911500"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40905904">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40905904"
              >Ask HN: Should I consolidate my blogs into one?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-08 @ 14:45:49</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40905904"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've been writing 2 blogs for the past couple of years, one
                focused on Software Engineering and the other on general life
                things (e.g. philosophy, psychology, self-improvement, etc).
                Recently, I've created another blog focused on Entrepreneurship.
                At the moment, they all live on their own domains.
              </p>
              <p>
                My purpose in writing the blogs is (1) I really enjoy writing,
                and (2) I want to build a personal brand (all of my blogs
                mention my name, and each link to another). However, it's
                becoming hard to maintain the blogs. They each run their own
                instance of the software, meaning any change I make in terms of
                design/security fixes/SEO/etc, needs to be replicated to other
                blogs (where applicable). I need to keep separate contact emails
                per blog, and in general this setup is too complicated, thus
                discouraging me from writing. Moreover, building domain
                authority is hard, since every blog essentially starts from 0.
              </p>
              <p>
                I also own a domain for my name. It shows some about me
                information and links to all the blogs. I was considering
                consolidating all the 3 blogs into one under my domain name, and
                do a 301 redirect from the old domains to the new one (I don't
                mind owning the domains for some time, as links to them are
                circulating on the web already). This will eliminate the hassle
                of bootstrapping and managing each blog individually.
              </p>
              <p>
                In order to keep proper audience segmentations, I could create a
                high level category and put each blog into its own category (for
                example, as subdirectory
                `https://examples.com/blog/category/software-engineering`). I
                doubt many people check the blogs themselves, and most traffic
                is coming from me sharing links to new content, or people
                searching for a particular thing that is indexed by Google, thus
                leading to a specific blog post. But even if there are people
                who read the blogs by RSS or check the website directly, they
                still can use dedicated RSS per category, or just access a
                domain with subdirectory for the category.
              </p>
              <p>
                I understand that it will probably hurt SEO in the beginning,
                but I'm fine with that. It can also lead to some readers
                churning, however with proper categorization I don't see a
                reason why (things like "similar posts" or "next/previous" could
                be category segmented, thus creating the illusion that the
                reader still reads a blog about, say, software engineering).
              </p>
              <p>
                What are your thoughts about it? Am I missing something? Is it a
                good or a bad plan?
              </p>
            </div>
          </section>
        </section>
        <section id="40902554">
          <h3>
            <a
              class="item"
              href="https://www.tolidano.com/micropython-smartwatch.html"
              >MicroPython Smartwatch</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-08 @ 04:12:55</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40902554"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40898525">
          <h3>
            <a
              class="item"
              href="https://www.amiplus.ca/m/eCGPTwFA/deep-sky-eye?seriesId=Show%2FOur+Community"
              >Tim Doucette, a blind astronomer who built the Deep Sky Eye
              Observatory</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-07 @ 16:04:41</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40898525"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40898118">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/International_reply_coupon"
              >International Reply Coupon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-07 @ 14:52:57</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40898118"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40891846">
          <h3>
            <a
              class="item"
              href="https://xenodium.com/inline-previous-result-and-why-you-should-edebug/"
              >Inline previous result in Emacs Lisp</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-06 @ 17:33:51</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40891846"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40889272">
          <h3>
            <a
              class="item"
              href="https://medium.com/@abdulgh/compile-time-json-deserialization-in-c-1e3d41a73628"
              >Compile-time JSON deserialization in C++</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-06 @ 09:35:33</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40889272"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40883942">
          <h3>
            <a
              class="item"
              href="https://www.alexreichert.com/blog/graph-based-ceramics"
              >Graph-Based Ceramics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-05 @ 16:09:51</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40883942"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
