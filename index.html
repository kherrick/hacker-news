<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44916233">
          <h3>
            <a
              class="item"
              href="https://www.pnas.org/doi/10.1073/pnas.2420092122"
              >Entities enabling scientific fraud at scale are large, and
              growing rapidly</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 19:01:36</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44916233"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44915220">
          <h3>
            <a class="item" href="https://github.com/wyattjoh/jmap-mcp"
              >Show HN: JMAP MCP – Email for your agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 17:39:02</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44915220"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              I wrote this JMAP MCP server that adds email management tools to
              Claude for searching, reading, and sending emails through FastMail
              and other JMAP providers in Deno!
            </div>
          </section>
        </section>
        <section id="44915206">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44915206"
              >Launch HN: Embedder (YC S25) – Claude Code for Embedded
              Software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 17:38:05</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44915206"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
            <div class="text">
              <a href="https://embedder.dev">https://embedder.dev</a>), a
              hardware-aware AI coding agent that can write firmware and test it
              on physical hardware.
              <p>
                Here’s a demo in which we integrate a magnetometer for the
                Pebble 2 smartwatch:
                <a href="https://www.youtube.com/watch?v=WOpAfeiFQkQ"
                  >https://www.youtube.com/watch?v=WOpAfeiFQkQ</a
                >
              </p>
              <p>
                We were frustrated by the gap between coding agents and the
                realities of writing firmware. We'd ask Cursor to, say, write an
                I2C driver for a new sensor on an STM32, and it would
                confidently spit out code that used non-existent registers or
                HAL functions from the wrong chip family. It had no context, so
                it would just guess and the code is always wrong.
              </p>
              <p>
                Even when it wrote the right code, the agent had no way of
                interacting with your board and the developer would have to
                manually test it and prompt the agent again to fix any bugs they
                found. Making current solutions not ideal when working in an
                embedded context.
              </p>
              <p>
                That’s why we are building Embedder, a hardware-aware coding
                agent that is optimized for work in embedded contexts. It
                understands your datasheets and schematics and can also flash
                and test on your hardware.
              </p>
              <p>
                First, you give it context by uploading datasheets, reference
                manuals, schematics, or any other documentation on our web
                console and our coding agent will automatically have context
                when it executes tasks in the command line.
              </p>
              <p>
                Second, Embedder can directly interact with your hardware to
                close the development loop. The agent is able to use a serial
                console just like a regular developer to read from your board
                and verify outputs. To solve more complex bugs or identify
                hardware issues the coding agent is also able to launch a
                debugging agent optimized for step through debugging workloads
                and interact with local or remote gbdservers.
              </p>
              <p>
                You can try it out today. It’s an npm package you can install
                and run from your terminal:
              </p>
              <p></p>
              <pre><code>  npm i -g @embedder/embedder &amp;&amp; embedder
</code></pre>
              It's free for the rest of this month while we're in beta. After
              that, we're planning a usage based model for individual developers
              and a team plan with more advanced features.
              <p>
                We’d love to get feedback from the community, or hear about your
                experiences of embedded development. We’ll be in the comments to
                respond!
              </p>
            </div>
          </section>
        </section>
        <section id="44915187">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/announcing-imagen-4-fast-and-imagen-4-family-generally-available-in-the-gemini-api/"
              >Imagen 4 is now generally available</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 17:36:15</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44915187"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44915164">
          <h3>
            <a class="item" href="https://edka.io"
              >Show HN: Edka – Deploy Kubernetes on your own Hetzner account in
              minutes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 17:34:54</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44915164"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’ve been working with Kubernetes for over a decade, since the
                alpha days, and was involved in kube-aws project before AWS
                launched EKS. For the past four years, I’ve been helping friends
                and small businesses cut costs by running Kubernetes on Hetzner
                Cloud, which I’ve found to be rock solid and by far the best
                priced provider.
              </p>
              <p>
                Provisioning a cluster on Hetzner is now straightforward, thanks
                to tools like k3s and hetzner-k3s, but configuring it for your
                specific needs still takes time and expertise. I built Edka to
                make that part easy: spin up a production ready cluster in ~2
                minutes, then choose how low level or automated you want to go.
              </p>
              <p>How it works:</p>
              <p>
                Layer 1 – Cluster provisioning - Creates a k3s-based Kubernetes
                cluster on Hetzner (lightweight, easy to manage, scales well).
              </p>
              <p>
                Layer 2 – Add-ons - One-click deploy for metrics-server,
                cert-manager, and various operators; preconfigured for Hetzner,
                no extra setup needed.
              </p>
              <p>
                Layer 3 – Applications - Minimal config UIs for apps built on
                top of add-ons. - Example: Need PostgreSQL? Fill a few fields →
                platform installs CloudNativePG → provisions HA PostgreSQL with
                PITR → gives ready to use endpoints. Backups can be restored to
                any point in time with a click. Quick demo:
                <a href="https://edka.io/apps/">https://edka.io/apps/</a>
              </p>
              <p>
                Layer 4 – Deployments - Connect your CI to push container images
                to a public/private registry. - Edka updates deployments
                automatically (with semantic versioning rules), supports instant
                rollbacks, autoscaling, persistent volumes, secrets/env imports,
                and quick public exposure. Quick demo:
                <a href="https://edka.io/deployments/"
                  >https://edka.io/deployments/</a
                >
              </p>
              <p>
                Tech stack: TypeScript, React + Tailwind CSS, PostgreSQL, Redis,
                BullMQ, Vault + AWS KMS to encrypted sensitive data.
              </p>
              <p>
                The platform is still in beta and I’m building it in my spare
                time, so there are some rough edges, but I’d love feedback from
                anyone running Kubernetes on Hetzner, exploring alternatives to
                EKS/GKE/AKS or looking to automate their infrastructure with
                Kubernetes.
              </p>
              <p>
                More details: <a href="https://edka.io/">https://edka.io/</a>
              </p>
              <p>Thank you!</p>
            </div>
          </section>
        </section>
        <section id="44914771">
          <h3>
            <a class="item" href="https://www.easypost.com/careers"
              >EasyPost (YC S13) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 17:01:23</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44914149">
          <h3>
            <a
              class="item"
              href="https://www.filfre.net/2025/08/bullfrog-in-the-dungeon/"
              >Bullfrog in the Dungeon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 16:10:18</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44914149"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44914061">
          <h3>
            <a
              class="item"
              href="https://www.openculture.com/2025/08/2178-occult-books-now-digitized-put-online.html"
              >Occult books digitized and put online by Amsterdam’s Ritman
              Library</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 16:03:36</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44914061"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://embassyofthefreemind.com/en/library/online-catalogue/?mode=gallery&amp;view=horizontal&amp;sort=random%7B1517048201764%7D%20asc&amp;page=1&amp;fq%5B%5D=search_s_digitized_publication:%22Ja%22&amp;reverse=0"
                >https://embassyofthefreemind.com/en/library/online-catalogue...</a
              >
            </div>
          </section>
        </section>
        <section id="44914040">
          <h3>
            <a
              class="item"
              href="https://overbring.com/blog/2025-08-13-writing-an-elixir-nif-with-genai/"
              >I let LLMs write an Elixir NIF in C; it mostly worked</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 16:02:25</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44914040"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44913682">
          <h3>
            <a
              class="item"
              href="https://mattsayar.com/letting-inmates-run-the-asylum-using-ai-to-secure-ai/"
              >Letting inmates run the asylum: Using AI to secure AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 15:36:06</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44913682"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44913663">
          <h3>
            <a class="item" href="https://soonly.com/electric-fences/"
              >The Electric Fence Stopped Working Years Ago</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 15:34:43</span
              ><span class="points-container"
                >Points: <span class="points">118</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44913663"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44913359">
          <h3>
            <a class="item" href="https://paulgraham.com/ds.html"
              >Do Things That Don't Scale (2013)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 15:07:04</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44913359"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44912727">
          <h3>
            <a class="item" href="https://quaternion.cafe/"
              >An interactive guide to sensor fusion with quaternions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 14:17:07</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44912727"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44912646">
          <h3>
            <a class="item" href="https://jenson.org/timmy/">The Timmy Trap</a>
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 14:10:45</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44912646"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44911571">
          <h3>
            <a
              class="item"
              href="https://academic.oup.com/eurheartj/article/46/17/1634/8023896?login=false"
              >Non-invasive vagus nerve stimulation and exercise capacity in
              healthy volunteers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 12:32:43</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44911571"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44911560">
          <h3>
            <a
              class="item"
              href="https://github.com/dani-garcia/vaultwarden/pull/3899"
              >Vaultwarden commit introduces SSO using OpenID Connect</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 12:31:54</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44911560"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44911423">
          <h3>
            <a
              class="item"
              href="https://www.josefprusa.com/articles/open-hardware-in-3d-printing-is-dead/"
              >Open hardware desktop 3D printing is dead?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 12:14:46</span
              ><span class="points-container"
                >Points: <span class="points">555</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44911423"
                  >Comments</a
                ><span class="descendants">: 347</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44911412">
          <h3>
            <a
              class="item"
              href="https://wisewolfmedia.substack.com/p/the-investigation-that-should-have"
              >When the CIA got away with building a heart attack gun</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 12:13:39</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44911412"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44911169">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-07-fairness-powerful.html"
              >Fairness is what the powerful 'can get away with' study shows</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 11:46:17</span
              ><span class="points-container"
                >Points: <span class="points">160</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44911169"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44909133">
          <h3>
            <a class="item" href="https://blog.foletta.net/post/2025-07-14-clt/"
              >Simulating and Visualising the Central Limit Theorem</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 06:11:51</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44909133"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44907531">
          <h3>
            <a
              class="item"
              href="https://aethermug.com/posts/i-used-to-know-how-to-write-in-japanese"
              >I used to know how to write in Japanese</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-15 @ 01:01:13</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44907531"
                  >Comments</a
                ><span class="descendants">: 185</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44906305">
          <h3>
            <a
              class="item"
              href="https://www.colincornaby.me/2025/08/your-mac-game-is-probably-rendering-blurry/"
              >Blurry rendering of games on Mac</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-14 @ 22:11:47</span
              ><span class="points-container"
                >Points: <span class="points">425</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44906305"
                  >Comments</a
                ><span class="descendants">: 276</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44905808">
          <h3>
            <a
              class="item"
              href="https://mitchellh.com/writing/ghostty-gtk-rewrite"
              >We rewrote the Ghostty GTK application</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-14 @ 21:19:00</span
              ><span class="points-container"
                >Points: <span class="points">411</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44905808"
                  >Comments</a
                ><span class="descendants">: 197</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44902127">
          <h3>
            <a
              class="item"
              href="https://danielchasehooper.com/posts/syscall-build-snooping/"
              >I made a real-time C/C++/Rust build visualizer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-14 @ 16:06:55</span
              ><span class="points-container"
                >Points: <span class="points">391</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44902127"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44882754">
          <h3>
            <a class="item" href="https://reversing.info/posts/guardedregions/"
              >In-depth analysis on Valorant's Guarded Regions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-12 @ 23:00:46</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44882754"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44877201">
          <h3>
            <a class="item" href="https://masatohagiwara.net/recto.html"
              >Recto – A Truly 2D Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-12 @ 15:06:08</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44877201"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44876346">
          <h3>
            <a
              class="item"
              href="https://newsroom.arm.com/news/arm-announces-arm-neural-technology"
              >ARM adds neural accelerators to GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-12 @ 14:03:47</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44876346"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44872584">
          <h3>
            <a
              class="item"
              href="https://osec.io/blog/2025-08-11-compiler-bug-causes-compiler-bug/"
              >Compiler Bug Causes Compiler Bug: How a 12-Year-Old G++ Bug Took
              Down Solidity</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-12 @ 05:04:21</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44872584"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44869601">
          <h3>
            <a class="item" href="https://blog.tangled.sh/pulls"
              >The Lifecycle of a Pull Request</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-11 @ 21:21:01</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44869601"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44867842">
          <h3>
            <a class="item" href="https://openreview.net/forum?id=4tDNvQe2G0"
              >Rain: Transiently Leaking Data from Public Clouds Using Old
              Vulnerabilities</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-08-11 @ 18:42:11</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44867842"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
