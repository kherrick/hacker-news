<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43730545">
          <h3>
            <a
              class="item"
              href="https://www.404media.co/judge-rules-blanket-search-of-cell-tower-data-unconstitutional/"
              >Judge Rules Blanket Search of Cell Tower Data Unconstitutional</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 18:16:27</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43730545"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43730458">
          <h3>
            <a
              class="item"
              href="https://github.com/ncruces/go-sqlite3/tree/main/sqlite3/libc"
              >Show HN: (bits) of a Libc, Optimized for Wasm</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 18:06:25</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43730458"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <p>
                To compile SQLite, I use wasi-sdk, which uses wasi-libc, which
                is based on musl. It's been said that musl is slow(er than
                glibc), which is true, to a point.
              </p>
              <p>
                musl uses SWAR on a size_t to implement various functions in
                string.h. This is fine, except size_t is just 32-bit on Wasm.
              </p>
              <p>
                I found that implementing a few of those functions with Wasm
                SIMD128 can make them go around 4x faster.
              </p>
              <p>
                Other functions don't even use SWAR; redoing <i>those</i> can
                make them 16x faster.
              </p>
              <p>
                Smooth sort also has trouble pulling its own weight; a Shell
                sort seems both simpler and faster, while similarly avoiding
                recursion, allocations and the addressable stack.
              </p>
              <p>
                I found that using SIMD intrinsics (rather than SWAR) makes it
                easier to avoid UB, but the code would definitely benefit from
                more eyeballs.
              </p>
              <p>
                See this for some benchmarks on both x86-64 and Aarch64:
                <a
                  href="https://github.com/ncruces/go-sqlite3/actions/runs/14516931864"
                  >https://github.com/ncruces/go-sqlite3/actions/runs/145169318...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43729932">
          <h3>
            <a
              class="item"
              href="https://www.inkandswitch.com/ink/notes/phase-2-constraint-system/"
              >Ink and Switch Constraint System (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 17:09:53</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43729932"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43729850">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/dot/jobs/XSmklFa-customer-success-sales-engineer-remote"
              >Dot (YC S21) is hiring a sales engineer to automate analytics
              (fully remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 17:00:27</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43729683">
          <h3>
            <a class="item" href="https://github.com/Kuberwastaken/backdooms"
              >Show HN: I made a Doom-like game fit inside a QR code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 16:40:25</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43729683"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43729609">
          <h3>
            <a
              class="item"
              href="https://www.governance.fyi/p/college-towns-urbanism-from-a-past"
              >College Towns: Urbanism from a Past Era with Ryan Allen</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 16:31:11</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43729609"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43729427">
          <h3>
            <a class="item" href="https://github.com/attunehq/attune"
              >Show HN: Attune - Build and publish APT repositories in
              seconds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 16:14:18</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43729427"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <p>
                Previously, we worked at other startups building open source
                developer tools that ran on our customers’ CI and development
                machines. For many of them, being able to `apt-get install` our
                tools was a requirement.
              </p>
              <p>
                When we went to actually set up APT repositories, we were really
                surprised by the state of tooling around package publishing. The
                open source tools we found were old, slow, and difficult to
                figure out how to run in CI. The commercial tools we found were
                not much better. The cloud-hosted vendors required us to provide
                our signing keys to a cloud vendor (which was a non-starter),
                while the self-hosted vendors required us to operate our own
                specialized hosting servers.
              </p>
              <p>
                We just wanted something simple: sign locally, run quickly, be
                easy to use, and deploy to managed object storage.
              </p>
              <p>
                We couldn’t find it, so we built it. If you want to try it out,
                you can create a repository with three commands:
              </p>
              <p></p>
              <pre><code>    attune repo create --uri https://apt.releases.example.com
    attune repo pkg add --repo-id 123 package.deb
    attune repo sync --repo-id 123
</code></pre>
              You can get the tool at
              <a href="https://github.com/attunehq/attune"
                >https://github.com/attunehq/attune</a
              >. There are a lot of rough edges right now since it's so new -
              sorry in advance, we're working on sanding those down.
              <p>
                It’s fully open source under Apache 2. We’re also working with
                some early customers to build enterprise features like audit
                logging, RBAC, and HSM integrations, and we’re thinking about
                building a managed cloud hosting service as well.
              </p>
              <p>
                We’d love your feedback on whether this is useful for you, and
                what you’d like to see next. We’re well aware that publishing is
                a small piece of CI/CD, but we think a lot of the tooling in
                this area (publishing, artifact registries, package
                repositories) could really use some love.
              </p>
              <p>
                What do you think? Comment here, or email us at
                founders@attunehq.com.
              </p>
            </div>
          </section>
        </section>
        <section id="43729063">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2504.11212"
              >SDFs from Unoriented Point Clouds Using Neural Variational Heat
              Distances</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 15:35:30</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43729063"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43728279">
          <h3>
            <a
              class="item"
              href="https://blog.trailofbits.com/2025/04/18/sneak-peek-a-new-asn.1-api-for-python/"
              >A New ASN.1 API for Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 14:11:40</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43728279"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43727743">
          <h3>
            <a class="item" href="https://github.com/ashvardanian/less_slow.cpp"
              >Less Slow C++</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 13:09:50</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43727743"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
            <div class="text">
              <p></p>
              <pre><code>  - Are coroutines viable for high-performance work?
  - Should I use SIMD intrinsics for clarity or drop to assembly for easier library distribution?
  - Has hardware caught up with vectorized scatter/gather in AVX-512 &amp; SVE?
  - How do secure enclaves &amp; pointer tagging differ on Intel, Arm, &amp; AMD?
  - What's the throughput gap between CPU and GPU Tensor Cores (TCs)?
  - How costly are misaligned memory accesses &amp; split-loads, and what gains do non-temporal loads/stores offer?
  - Which parts of the standard library hit performance hardest?
  - How do error-handling strategies compare overhead-wise?
  - What's the compile-time vs. run-time trade-off for lazily evaluated ranges?
  - What practical, non-trivial use cases exist for meta-programming?
  - How challenging is Linux Kernel bypass with io_uring vs. POSIX sockets?
  - How close are we to effectively using Networking TS or heterogeneous Executors in C++?
  - What are best practices for propagating stateful allocators in nested containers, and which libraries support them?
</code></pre>
              These questions span from micro-kernel optimizations (nanoseconds)
              to distributed systems (micro/millisecond latencies). Rather than
              tackling them all in one post, I compiled my explorations into a
              repository—extending my previous Google Benchmark tutorial (&lt;<a
                href="https://ashvardanian.com/posts/google-benchmark"
                >https://ashvardanian.com/posts/google-benchmark</a
              >&gt;)—to serve as a sandbox for performance experimentation.
              <p>Some fun observations:</p>
              <p></p>
              <pre><code>  - Compilers now vectorize 3x3x3 and 4x4x4 single/double precision multiplications well! The smaller one is ~60% slower despite 70% fewer operations, outperforming my vanilla SSE/AVX and coming within 10% of AVX-512.

  - Nvidia TCs vary dramatically across generations in numeric types, throughput, tile shapes, thread synchronization (thread/quad-pair/warp/warp-groups), and operand storage. Post-Volta, manual PTX is often needed (as intrinsics lag), though the new TileIR (introduced at GTC) promises improvements for dense linear algebra kernels.

  - The AI wave drives CPUs and GPUs to converge in mat-mul throughput &amp; programming complexity. It took me a day to debug TMM register initialization, and SME is equally odd. Sierra Forest packs 288 cores/socket, and AVX10.2 drops 256-bit support for 512-bit... I wonder if discrete Intel GPUs are even needed, given CPU advances?

  - In common floating-point ranges, scalar sine approximations can be up to 40x faster than standard implementations, even without SIMD. It's a bit hand-wavy, though; I wish more projects documented error bounds and had 1 &amp; 3.5 ULP variants like Sleef.

  - Meta-programming tools like CTRE can outperform typical RegEx engines by 5x and simplify building parsers compared to hand-crafted FSMs.

  - Once clearly distinct in complexity and performance (DPDK/SPDK vs. io_uring), the gap is narrowing. While pre-5.5 io_uring can boost UDP throughput by 4x on loopback IO, newer zero-copy and concurrency optimizations remain challenging.
</code></pre>
              The repository is loaded with links to favorite CppCon lectures,
              GitHub snippets, and tech blog posts. Recognizing that many
              high-level concepts are handled differently across languages, I've
              also started porting examples to Rust &amp; Python in separate
              repos. Coroutines look bad everywhere :(
              <p>
                Overall, this research project was rewarding! Most questions
                found answers in code — except pointer tagging and secure
                enclaves, which still elude me in public cloud. I'd love to hear
                from others, especially on comparing High-Level Synthesis for
                small matrix multiplications on FPGAs versus hand-written
                VHDL/Verilog for integral types. Let me know if you have ideas
                for other cool, obscure topics to cover!
              </p>
            </div>
          </section>
        </section>
        <section id="43726413">
          <h3>
            <a class="item" href="https://alichraghi.github.io/blog/zig-gpu/"
              >Zig and GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 09:33:50</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43726413"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43726051">
          <h3>
            <a class="item" href="https://defold.com"
              >Defold: cross-platform game engine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 08:15:20</span
              ><span class="points-container"
                >Points: <span class="points">285</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43726051"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43726037">
          <h3>
            <a
              class="item"
              href="https://dl.acm.org/doi/10.1145/3552326.3587458"
              >Unikernel Linux (UKL) (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 08:11:45</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43726037"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43725865">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/blog/whatever-happened-to-amp-email"
              >AMP and why emails are not (and should never be) interactive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 07:31:04</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43725865"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43724870">
          <h3>
            <a
              class="item"
              href="https://www.historyextra.com/period/general-history/good-friday-facts-why-called/"
              >Why is Good Friday called Good Friday?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-18 @ 03:59:35</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43724870"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43723088">
          <h3>
            <a
              class="item"
              href="https://blog.luden.io/what-do-i-think-about-lua-after-shipping-a-project-with-60-000-lines-of-code-bf72a1328733"
              >What do I think about Lua after shipping a project with 60k lines
              of code?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 22:55:55</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43723088"
                  >Comments</a
                ><span class="descendants">: 105</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43723020">
          <h3>
            <a
              class="item"
              href="https://www.cantgetmuchhigher.com/p/i-analyzed-chord-progressions-in"
              >I analyzed chord progressions in 680k songs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 22:44:11</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43723020"
                  >Comments</a
                ><span class="descendants">: 123</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43722486">
          <h3>
            <a class="item" href="https://facts.usps.com/mailing-potatoes/"
              >Potatoes in the Mail</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 21:35:45</span
              ><span class="points-container"
                >Points: <span class="points">436</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43722486"
                  >Comments</a
                ><span class="descendants">: 218</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43720845">
          <h3>
            <a
              class="item"
              href="https://developers.googleblog.com/en/start-building-with-gemini-25-flash/"
              >Gemini 2.5 Flash</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 19:03:39</span
              ><span class="points-container"
                >Points: <span class="points">976</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43720845"
                  >Comments</a
                ><span class="descendants">: 513</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43716616">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=3L_OU-fMW_w"
              >Show HN: LTE-connected IoT module with remote programming and NL
              data analysis</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-17 @ 13:35:58</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43716616"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <p>The main challenges I'm trying to solve are:</p>
              <p>
                1. Eliminating infrastructure setup headaches for IoT
                deployments 2. Making remote programming and debugging practical
                for devices that might be difficult to access physically 3.
                Using natural language for analyzing sensor data, and possibly
                taking actions based on the analysis
              </p>
              <p>I'd really appreciate feedback on:</p>
              <p>
                1. Is this approach to IoT development interesting to you? 2.
                What use cases would you want to explore with this kind of
                platform? 3. What concerns would you have about adopting
                something like this? 4. Could anyone recommend workflows or
                tools for making the AI agent more reliable? Currently using
                LLMs to generate isolated SQL queries to extract data, but
                ensuring consistent responses has been challenging.
              </p>
              <p>
                Thanks for any thoughts, and feel free to ask any questions
                about how the hardware or platform works. Happy to dive into the
                details!
              </p>
            </div>
          </section>
        </section>
        <section id="43706429">
          <h3>
            <a class="item" href="https://www.atypography.com"
              >Atypography – Art Movement Introduction</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-16 @ 15:00:21</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43706429"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43700714">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2025/04/the-physics-of-bowling-strike-after-strike/"
              >The physics of bowling strike after strike</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-16 @ 02:16:51</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43700714"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43699564">
          <h3>
            <a
              class="item"
              href="https://smarimccarthy.is/posts/2024-12-02-four-years-of-jai/"
              >Four Years of Jai (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 23:17:13</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43699564"
                  >Comments</a
                ><span class="descendants">: 118</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43698522">
          <h3>
            <a class="item" href="https://www.onemetre.net/Design/Design.htm"
              >How a yacht works: sailboat physics and design</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 21:19:33</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43698522"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43698327">
          <h3>
            <a
              class="item"
              href="https://culture.pl/en/article/cyberpunk-1958-the-early-days-of-the-polish-it-industry"
              >Cyberpunk 1958: The Early Days of the Polish IT Industry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 21:01:02</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43698327"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43697445">
          <h3>
            <a class="item" href="https://travisbumgarner.dev/blog/somehash"
              >Show HN: Somehash – A Blurhash-inspired exploration</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 19:36:48</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43697445"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43697252">
          <h3>
            <a
              class="item"
              href="https://core2.gsfc.nasa.gov/ggfc/tides/intro.html"
              >Ocean Tides and the Earth's Rotation (2001)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 19:19:31</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43697252"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43695093">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s44271-025-00247-0"
              >Decreased CO2 during breathwork: emergence of altered states of
              consciousness</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-15 @ 16:23:40</span
              ><span class="points-container"
                >Points: <span class="points">304</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43695093"
                  >Comments</a
                ><span class="descendants">: 151</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43687583">
          <h3>
            <a class="item" href="https://www.howequipmentworks.com/apollo_13/"
              >The most famous carbon dioxide absorber</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-14 @ 23:56:34</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43687583"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43683130">
          <h3>
            <a class="item" href="https://langev.com/pdf/steele99growing.pdf"
              >Growing a Language [pdf] (1998)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-14 @ 16:34:08</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43683130"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
