<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39303537">
          <h3>
            <a
              class="item"
              href="https://www.npr.org/2024/02/07/1229233837/octopus-farm-spain-controversy"
              >A seafood firm wants to farm octopus. Activists say they're too
              smart for that</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 16:03:06</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39303537"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39303357">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2024/02/07/pakistan-suspends-mobile-phone-services-on-election-day/"
              >Pakistan cuts off phone and internet services on election day</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 15:50:23</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39303357"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39303160">
          <h3>
            <a
              class="item"
              href="https://ferd.ca/a-distributed-systems-reading-list.html"
              >A distributed systems reading list</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 15:38:18</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39303160"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39302870">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39302870"
              >Launch HN: AgentHub (YC W24) – A no-code automation platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 15:17:05</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39302870"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re Rahul and Max, co-founders of AgentHub.dev (<a
                  href="https://www.agenthub.dev/"
                  >https://www.agenthub.dev/</a
                >). We automate repetitive workflows for businesses using
                LLM-powered automations. Our platform lets you build and host
                these automations to emulate employee workflows in a scalable
                way. Here’s a demo video:
                <a href="https://www.youtube.com/watch?v=BD9aoyKPOjs"
                  >https://www.youtube.com/watch?v=BD9aoyKPOjs</a
                >
              </p>
              <p>
                We started 9 months ago while lurking in the Auto-GPT discord
                and seeing thousands of non-technical users struggle to clone
                the repo or set up their environments. We were excited by the
                concepts of Agents so we built and deployed a (very ugly) web
                app within a few days so anyone could experiment. We started to
                see people literally begging the Agents to complete simple tasks
                and giving up due to cost/frustration. Seeing the type of
                relatively simple work people were trying to automate with AI
                was the catalyst for what we ended up building.
              </p>
              <p>
                We decided to make a drag-and-drop automation builder so these
                users could piece together their ideal automations instead of
                begging the agent to do that same task and failing. V1 was a
                borderline un-usable series of drop down menus but evolved into
                the canvas based workflow builder it is now.
              </p>
              <p>
                It’s somewhat similar in concept to Zapier or Make.com except
                we’re aiming to automate much more complex work end to end
                instead of just speeding up simple tasks. We originally
                described it as Zapier on crack but as it's gotten more complex,
                some people compare it to existing RPA platforms like UI Path.
                We like to call it an 'LLM-based Intelligent Automation
                Platform'.
              </p>
              <p>
                Our biggest challenge from the very beginning has been balancing
                usability and complexity. We wanted anyone to be able to
                understand it while still being powerful enough for people to
                get creative. Building the framework has been an extremely
                iterative process of users getting confused (for good reason)
                and us tweaking our approach. We still have a ways to go in
                terms of usability but are proud of where it’s at. Eager to hear
                your feedback!
              </p>
              <p>
                Here are 3 template automations we built to give people a
                starting point. I think the real beauty of the platform is how
                personalized the automations users create are but these general
                templates give a nice idea of how it works.
              </p>
              <p>
                <a
                  href="https://www.agenthub.dev/templates/hr_hiring/linkedin_profile_processor"
                  >https://www.agenthub.dev/templates/hr_hiring/linkedin_profil...</a
                >
                <a
                  href="https://www.agenthub.dev/templates/media_news/autonomous_twitter_bot"
                  >https://www.agenthub.dev/templates/media_news/autonomous_twi...</a
                >
                <a
                  href="https://www.agenthub.dev/templates/sales_crm/automated_sales_emails"
                  >https://www.agenthub.dev/templates/sales_crm/automated_sales...</a
                >
              </p>
              <p>
                These templates are on the simpler side. Our power users nest
                automations, trigger them via webhook and have them running at a
                pretty surprising scale. The highest we’ve seen was last Friday
                with a single user running 5k automations within a few hours.
                The unofficial record before that for most automations runs was
                one of our users who discovered infinite-recursion by accident,
                but that doesn't count.
              </p>
              <p>
                We have two main types of users at the moment, people automating
                their existing businesses work and people using the no-code
                builder to build new ideas. The first was our original
                intention, letting any semi technical person in a company spot
                inefficiency and quickly get a solution deployed to address it.
                The second and more unexpected type of user has been
                non-technical founders spotting problems and being able to build
                APIs to serve niches they’ve found without needing to code.
              </p>
              <p>
                It’s called AgentHub because I bought the domain for 10 dollars
                on day 2 of building when I thought we’d be a hub to host and
                share agents and never bothered rebranding. If anyone wants to
                take a crack at a better name, we’d be interested!(I speak kind
                of quickly and people think I’m saying ‘asian-hub’ pretty often…
              </p>
              <p>
                We’re really excited to share the platform with you all and look
                forward to your feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="39302744">
          <h3>
            <a
              class="item"
              href="https://fortune.com/2024/02/08/mozilla-firefox-ceo-laura-chambers-mitchell-baker-leadership-transition/"
              >Mozilla names new CEO as it pivots to data privacy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 15:06:47</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39302744"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39302436">
          <h3>
            <a
              class="item"
              href="https://github.com/codebyamir/school-district-locator"
              >Show HN: Lookup the school district associated with a street
              address</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 14:41:02</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39302436"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <p>Here’s how it works:</p>
              <p>
                An address corresponds to a single point on the map. The U.S
                Census Bureau has a geocoder that converts an address to
                latitude and longitude coordinates.
              </p>
              <p>
                School district boundaries can be represented as polygons on the
                map. The National Center for Education Statistics (NECS) has
                geographic data on school district boundaries.
              </p>
              <p>
                Once we determine which polygon the point resides in, we know
                the school district.
              </p>
            </div>
          </section>
        </section>
        <section id="39301830">
          <h3>
            <a
              class="item"
              href="https://nltimes.nl/2024/02/08/police-intelligence-services-unlawfully-spied-whole-population-groups"
              >Dutch Police intelligence services unlawfully spied on whole
              population groups</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 13:45:42</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39301830"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39301586">
          <h3>
            <a class="item" href="https://reportmill.com/SnapCode/"
              >Show HN: SnapCode – a real Java IDE in the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 13:17:33</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39301586"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39301163">
          <h3>
            <a
              class="item"
              href="https://www.pcgamer.com/an-old-amd-athlon-k7-easter-egg-has-a-revolver-and-map-of-texas-etched-onto-the-chip-they-dont-make-em-like-that-anymore-eh/"
              >AMD Athlon K7 Easter egg has a revolver and map of Texas etched
              onto the chip</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 12:31:50</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39301163"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39301034">
          <h3>
            <a class="item" href="https://www.curated.design/"
              >Web design inspiration catalog</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 12:12:28</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39301034"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39300946">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/nimbus-3/jobs/TgQFIkz-founding-engineer"
              >Nimbus (YC W21) Is Hiring Founding Engineer to Make Datadog
              Affordable Again</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 12:00:07</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39300741">
          <h3>
            <a
              class="item"
              href="https://support.apple.com/guide/itunes/how-itunes-is-changing-itns5ecc4f3c/windows"
              >How iTunes Is Changing on PC</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 11:33:23</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39300741"
                  >Comments</a
                ><span class="descendants">: 158</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39300679">
          <h3>
            <a
              class="item"
              href="https://blog.google/products/gemini/bard-gemini-advanced-app/"
              >Bard is now Gemini, and we’re rolling out a mobile app and Gemini
              Advanced</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 11:21:04</span
              ><span class="points-container"
                >Points: <span class="points">365</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39300679"
                  >Comments</a
                ><span class="descendants">: 427</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39300373">
          <h3>
            <a
              class="item"
              href="https://www.bleepingcomputer.com/news/security/no-3-million-electric-toothbrushes-were-not-used-in-a-ddos-attack/"
              >3M electric toothbrushes were not used in a DDoS attack</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 10:29:13</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39300373"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39300317">
          <h3>
            <a
              class="item"
              href="https://cyberus-technology.de/articles/vbox-kvm-public-release"
              >VirtualBox KVM Public Release</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 10:20:25</span
              ><span class="points-container"
                >Points: <span class="points">338</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39300317"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39298652">
          <h3>
            <a
              class="item"
              href="https://engineering.fb.com/2024/02/07/production-engineering/simple-precision-time-protocol-sptp-meta/"
              >Simple Precision Time Protocol at Meta</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 05:36:54</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39298652"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39298451">
          <h3>
            <a
              class="item"
              href="https://flawless.dev/essays/when-letting-it-crash-is-not-enough/"
              >When "letting it crash" is not enough</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 05:07:57</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39298451"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39297949">
          <h3>
            <a class="item" href="https://concrete.style">Concrete.css</a>
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 04:04:33</span
              ><span class="points-container"
                >Points: <span class="points">262</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39297949"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39297776">
          <h3>
            <a class="item" href="https://github.com/coleifer/sqlite-web"
              >SQLite-Web: Web-based SQLite database browser written in
              Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 03:43:31</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39297776"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39297185">
          <h3>
            <a
              class="item"
              href="https://scanalyst.fourmilab.ch/t/john-walker-1949-2024/4305"
              >John Walker, founder of Autodesk, has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 02:33:50</span
              ><span class="points-container"
                >Points: <span class="points">877</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39297185"
                  >Comments</a
                ><span class="descendants">: 160</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39296905">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2024-02-drug-brains-concussions.html"
              >Novel drug could protect brains from damage after repeat
              concussions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 01:56:48</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39296905"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39296178">
          <h3>
            <a
              class="item"
              href="https://www.cycleworld.com/motorcycle-reviews/kawasaki-ninja-7-hybrid-motorcycle-first-ride-review/"
              >2024 Kawasaki Ninja 7 hybrid motorcycle first ride review</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-08 @ 00:24:40</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39296178"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39286609">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/lifeandstyle/2024/feb/05/phone-screentime-detox-reflection"
              >My experiment in phonelessness was a failure, and it also changed
              my life</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-07 @ 10:00:58</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39286609"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39286229">
          <h3>
            <a
              class="item"
              href="https://hakaimagazine.com/news/anchovy-sex-is-a-force-of-nature/"
              >Anchovy Sex Is a Force of Nature</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-07 @ 09:07:02</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39286229"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39286111">
          <h3>
            <a class="item" href="https://princess.sh/"
              >Princess: Coding Like Royalty</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-07 @ 08:51:08</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39286111"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39286084">
          <h3>
            <a
              class="item"
              href="https://kylehigginson.medium.com/how-programming-languages-got-their-names-df85277de4c3"
              >How Programming Languages Got Their Names</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-07 @ 08:46:27</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39286084"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39283595">
          <h3>
            <a
              class="item"
              href="https://brooker.co.za/blog/2012/01/17/two-random.html"
              >The power of two random choices</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-07 @ 02:05:24</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39283595"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39282360">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=0mBurvPxNRI"
              >The Ridiculous Journey of the First Email from Space</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-06 @ 23:27:58</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39282360"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39277516">
          <h3>
            <a class="item" href="https://boz.com/articles/incentives"
              >Incentives and the Cobra Effect</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-06 @ 17:35:21</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39277516"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39273085">
          <h3>
            <a class="item" href="https://blog.liw.fi/posts/2024/billion/"
              >Billion File Filesystem</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-06 @ 11:11:48</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39273085"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
