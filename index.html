<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45586219">
          <h3>
            <a
              class="item"
              href="https://twitter.com/DropSiteNews/status/1977795050206576763"
              >Meta Erases Gaza Journalist's Instagram</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 23:28:56</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45585869">
          <h3>
            <a
              class="item"
              href="https://www.androidauthority.com/graphene-os-major-android-oem-partnership-3606853/"
              >GrapheneOS is finally ready to break free from Pixels and it may
              never look back</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 22:36:40</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45585869"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45584498">
          <h3>
            <a
              class="item"
              href="https://www.lighthousereports.com/investigation/surveillance-secrets/"
              >Surveillance data challenges what we thought we knew about
              location tracking</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 20:36:01</span
              ><span class="points-container"
                >Points: <span class="points">240</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45584498"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45584464">
          <h3>
            <a class="item" href="https://www.sqlite.org/whyc.html"
              >Why Is SQLite Coded in C and not Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 20:32:32</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45584464"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45584418">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/business/u-s-sanctions-cambodian-conglomerate-citing-role-in-pig-butchering-scams-0cf2e0ff"
              >U.S. Sanctions Cambodian Conglomerate, Citing Role in
              'Pig-Butchering' Scams</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 20:28:43</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45584418"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45584281">
          <h3>
            <a
              class="item"
              href="https://blog.cloudflare.com/unpacking-cloudflare-workers-cpu-performance-benchmarks/"
              >Unpacking Cloudflare Workers CPU Performance Benchmarks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 20:17:44</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45584281"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45584226">
          <h3>
            <a
              class="item"
              href="https://www.benedelman.org/applovin-nonconsensual-installs/"
              >AppLovin nonconsensual installs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 20:13:53</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45584226"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45584017">
          <h3>
            <a class="item" href="https://wispbit.com"
              >Show HN: Wispbit - Linter for AI coding agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 19:52:39</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45584017"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <a href="https://wispbit.com">https://wispbit.com</a>) - a tool
              that helps keep codebase standards alive.
              <p>
                With the help of AI coding tools, engineers are writing more
                code than ever. Code output has increased, but the tooling to
                manage this hasn't improved. Background agents still write bad
                code, and your IDE still writes slop without the right context.
              </p>
              <p>
                So we built wispbit. It works by scanning your codebase for
                patterns you already use, and coming up with rules. Rules are
                kept up to date as standards change, and you can edit rules any
                time.
              </p>
              <p>
                You can enforce these rules during code review, and because we
                have this rules system, you can run a CLI locally to review
                using these rules. You can think of it as a portable rules file
                that you can bring anywhere.
              </p>
              <p>
                We put a lot of work into making a system that produces good
                rules and avoids slop. For repository crawling, we have an agent
                that dispatches subagents, similar to Anthropic's research
                agent. These subagents will go through and look for common
                patterns within modules and directories, and report back to the
                main agent, which synthesizes the results. We also do a
                historical scan on your pull request comments, determine which
                ones were addressed, filter out comments that wouldn't make a
                good rule, and use that to create or update rules.
              </p>
              <p>
                Our early users are seeing 80%+ resolution rates, meaning that
                80% of comments that wispbit makes are resolved.
              </p>
              <p>
                Long-term, we see ourselves being a validation layer for
                AI-written code. With tools like Devin and Cursor, we find
                ourselves having to re-prompt the same solution many times. We
                still don't know the long-term implications on AI-assisted
                codebases, so we want to get in front of that as soon as
                possible.
              </p>
              <p>
                We've opened up signups for free to HN folks at
                <a href="https://wispbit.com">https://wispbit.com</a>. We're
                also around to chat and answer questions!
              </p>
            </div>
          </section>
        </section>
        <section id="45583667">
          <h3>
            <a class="item" href="https://github.com/tempesta-tech/webshield"
              >Show HN: An open source access logs analytics script to block bot
              attacks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 19:15:57</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45583667"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We'll be happy to gather initial feedback on usability and
                features, especialy from people having good or bad experience
                wit bots.
              </p>
              <p>*Requirements*</p>
              <p>
                The analyzer relies on 3 Tempesta FW specific features which you
                still can get with other HTTP servers or accelerators:
              </p>
              <p>
                1. JA5 client fingerprinting (<a
                  href="https://tempesta-tech.com/knowledge-base/Traffic-Filtering-by-Fingerprints/"
                  >https://tempesta-tech.com/knowledge-base/Traffic-Filtering-b...</a
                >). This is a HTTP and TLS layers fingerprinting, similar to JA4
                (<a href="https://blog.foxio.io/ja4%2B-network-fingerprinting"
                  >https://blog.foxio.io/ja4%2B-network-fingerprinting</a
                >) and JA3 fingerprints. The last is also available in Envoy (<a
                  href="https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/listener/tls_inspector/v3/tls_inspector.proto.html"
                  >https://www.envoyproxy.io/docs/envoy/latest/api-v3/extension...</a
                >) or Nginx module (<a
                  href="https://github.com/fooinha/nginx-ssl-ja3"
                  >https://github.com/fooinha/nginx-ssl-ja3</a
                >), so check the documentation for your web server
              </p>
              <p>
                2. Access logs are directly written to Clickhouse analytics
                database, which can cunsume large data batches and quickly run
                analytic queries. For other web proxies beside Tempesta FW, you
                typically need to build a custom pipeline to load access logs
                into Clickhouse. Such pipeliens aren't so rare though.
              </p>
              <p>
                3. Abbility to block web clients by IP or JA5 hashes. IP
                blocking is probably available in any HTTP proxy.
              </p>
              <p>*How does it work*</p>
              <p>This is a daemon, which</p>
              <p>
                1. Learns normal traffic profiles: means and standard deviations
                for client requests per second, error responses, bytes per
                second and so on. Also it remembers client IPs and fingerprints.
              </p>
              <p>
                2. If it sees a spike in z-score (<a
                  href="https://en.wikipedia.org/wiki/Standard_score"
                  >https://en.wikipedia.org/wiki/Standard_score</a
                >) for traffic characteristics or can be triggered manually.
                Next, it goes in data model search mode
              </p>
              <p>
                3. For example, the first model could be top 100 JA5 HTTP
                hashes, which produce the most error responses per second
                (typical for password crackers). Or it could be top 1000 IP
                addresses generating the most requests per second (L7 DDoS).
                Next, this model is going to be verified
              </p>
              <p>
                4. The daemon repeats the query, but for some time, long enough
                history, in the past to see if in the past we saw a hige
                fraction of clients in both the query results. If yes, then the
                model is bad and we got to previous step to try another one. If
                not, then we (likely) has found the representative query.
              </p>
              <p>
                5. Transfer the IP addresses or JA5 hashes from the query
                results into the web proxy blocking configuration and reload the
                proxy configuration (on-the-fly).
              </p>
            </div>
          </section>
        </section>
        <section id="45583336">
          <h3>
            <a
              class="item"
              href="https://ourworldindata.org/does-the-news-reflect-what-we-die-from"
              >What Americans die from vs. what the news reports on</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 18:40:23</span
              ><span class="points-container"
                >Points: <span class="points">316</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45583336"
                  >Comments</a
                ><span class="descendants">: 183</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45583180">
          <h3>
            <a class="item" href="https://boydkane.com/essays/boss"
              >Why your boss isn't worried about AI – "can't you just turn it
              off?"</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 18:26:00</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45583180"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45583129">
          <h3>
            <a
              class="item"
              href="https://www.cam.ac.uk/research/news/new-lab-grown-human-embryo-model-produces-blood-cells"
              >New lab-grown human embryo model produces blood cells</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 18:22:04</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45583129"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45582758">
          <h3>
            <a class="item" href="https://smolbsd.org"
              >SmolBSD – build your own minimal BSD system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 17:43:33</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45582758"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45582462">
          <h3>
            <a
              class="item"
              href="https://excamera.substack.com/p/how-bad-can-a-297-adc-be"
              >How bad can a $2.97 ADC be?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 17:12:10</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45582462"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45582268">
          <h3>
            <a
              class="item"
              href="https://github.com/ashtonsix/perf-portfolio/tree/main/delta"
              >Prefix sum: 20 GB/s (2.6x baseline)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 16:53:24</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45582268"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45581735">
          <h3>
            <a class="item" href="https://accent-explorer.boldvoice.com/"
              >How AI hears accents: An audible visualization of accent
              clusters</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 16:07:37</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45581735"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45580699">
          <h3>
            <a
              class="item"
              href="https://www.mpg.de/25518363/1007-asph-astronomers-image-a-mysterious-dark-object-in-the-distant-universe-155031-x"
              >Astronomers 'image' a mysterious dark object in the distant
              Universe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 14:45:02</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45580699"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45578990">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/kyber/jobs/BQRRSrZ-enterprise-account-executive-ae"
              >Kyber (YC W23) Is Hiring an Enterprise AE</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 12:00:56</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45578540">
          <h3>
            <a class="item" href="https://ktye.github.io/"
              >Zoo of array languages</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 11:01:43</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45578540"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45578383">
          <h3>
            <a class="item" href="https://adsb.exposed/">ADS-B Exposed</a>
          </h3>
          <section>
            <h4>
              <span>2025-10-14 @ 10:38:48</span
              ><span class="points-container"
                >Points: <span class="points">268</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45578383"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
            <div class="text">
              <a href="https://github.com/ClickHouse/adsb.exposed/"
                >https://github.com/ClickHouse/adsb.exposed/</a
              >
              <p>
                <i>Show HN: ADS-B visualizer</i> -
                <a href="https://news.ycombinator.com/item?id=39990346"
                  >https://news.ycombinator.com/item?id=39990346</a
                >
                - April 2024 (76 comments)
              </p>
            </div>
          </section>
        </section>
        <section id="45525168">
          <h3>
            <a
              class="item"
              href="https://www.stavros.io/posts/why-is-everything-so-scalable/"
              >Why is everything so scalable?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-09 @ 08:53:30</span
              ><span class="points-container"
                >Points: <span class="points">355</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45525168"
                  >Comments</a
                ><span class="descendants">: 328</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45516134">
          <h3>
            <a
              class="item"
              href="https://wasp.sh/blog/2025/10/07/how-we-test-a-web-framework"
              >Testing a compiler-driven full-stack web framework</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 13:45:30</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45516134"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45515915">
          <h3>
            <a class="item" href="https://writings.agg.im/posts/hacking_ai_pin/"
              >Hacking the Humane AI Pin</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 13:24:53</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45515915"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45514378">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/future/article/20251007-how-ultrasound-is-ushering-a-new-era-of-surgery-free-cancer-treatment"
              >Ultrasound is ushering a new era of surgery-free cancer
              treatment</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 10:18:58</span
              ><span class="points-container"
                >Points: <span class="points">362</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45514378"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45512351">
          <h3>
            <a
              class="item"
              href="https://github.com/toredash/automatic-zone-placement"
              >Automatic K8s pod placement to match external service zones</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 05:21:27</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45512351"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45508462">
          <h3>
            <a
              class="item"
              href="https://turso.tech/blog/beyond-the-single-writer-limitation-with-tursos-concurrent-writes"
              >Beyond the SQLite Single-Writer Limitation with Concurrent
              Writes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 20:32:55</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45508462"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45504902">
          <h3>
            <a
              class="item"
              href="https://webdev.bryanhogan.com/miscellaneous/styling-markdown/"
              >CSS for Styling a Markdown Post</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 16:05:01</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45504902"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45503560">
          <h3>
            <a
              class="item"
              href="https://codetiger.github.io/blog/the-day-my-smart-vacuum-turned-against-me/"
              >The day my smart vacuum turned against me</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 14:34:06</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45503560"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45498887">
          <h3>
            <a
              class="item"
              href="https://www.trthaber.com/foto-galeri/karahantepede-12-bin-yil-oncesine-ait-insan-yuzlu-dikili-tas-bulundu/73912.html"
              >A 12,000-year-old obelisk with a human face was found in Karahan
              Tepe</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 02:43:03</span
              ><span class="points-container"
                >Points: <span class="points">218</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45498887"
                  >Comments</a
                ><span class="descendants">: 92</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45490737">
          <h3>
            <a
              class="item"
              href="https://mrkaran.dev/posts/ai-home-cooked-software/"
              >AI and Home-Cooked Software</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-06 @ 12:41:52</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45490737"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
