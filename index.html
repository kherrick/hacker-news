<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45823358">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2511.02824"
              >Kosmos: An AI Scientist for Autonomous Discovery</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 14:43:26</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45823358"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45823234">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45823234"
              >Ask HN: My family business runs on a 1993-era text-based-UI
              (TUI). Anybody else?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 14:29:49</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45823234"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
            <div class="text">
              <p>
                My family company is a wholesale distribution firm (with
                lightweight manufacturing) and has been using the same TUI
                application (on prem unix box) since 1993. We use it for
                customer management, ordering, invoicing, kit management/build
                tickets, financials - everything. We've transitioned from green
                screen terminals to modern emulators, but the core system
                remains. I spent many summers running serial and ethernet
                cables.
              </p>
              <p>
                I left the business years ago to become a full time software
                engineer, but I got my start as a script kiddie writing
                automations for this system with Microsoft Access, VBA, and
                SendKeys to automate data entry. Amazingly, they still have a
                Windows XP machine running many of those tasks I wrote back in
                2004! It's brittle, but cumulatively has probably saved years of
                time. That XP machine could survive a nuclear winter lol.
              </p>
              <p>
                I recently stepped back in to help my parents and spent a day
                converting many of those old scripts to a more modern system
                (with actual error-handling instead of strategic sleep()s and
                prayers) using Python and telnetlib3. I had a blast and still
                love this application. I can fly around in it. Training new
                people was always a pain, but for those that got it—they had
                super powers.
              </p>
              <p>
                This got me thinking: Are other companies still using this type
                of interface to drive their core operations? I’m reflecting on
                whether the only reason my family's business still uses this
                system is because of the efficiency hacks I put in place 20+
                years ago. Without them, would they have been forced to switch
                to a modern cloud/GUI system? I’m not sure if I’m blinded by
                nostalgia or if this application is truly as wonderful as I
                remember it.
              </p>
              <p>
                I’d love to hear if and how these are still being utilized in
                the real world.
              </p>
              <p>
                P.S. The system we use was originally sold by ADP and has had
                different names (D2K, Prophet21). I believe Epicor owns it now
                (Activant before).
              </p>
              <p>
                P.P.S. Is anybody migrating their old TUI automation scripts to
                a more modern framework or creating new ones? I’m super curious
                to compare notes and see what other people are doing.
              </p>
            </div>
          </section>
        </section>
        <section id="45823186">
          <h3>
            <a class="item" href="https://www.caricecars.com/"
              >Carice TC2 – A non-digital electric car</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 14:25:36</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45823186"
                  >Comments</a
                ><span class="descendants">: 50</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45823162">
          <h3>
            <a
              class="item"
              href="https://www.phoronix.com/news/GNOME-Mutter-Drops-X11"
              >Gnome Mutter Now "Completely Drops the Whole X11 Back End"</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 14:24:15</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45823162"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45823141">
          <h3>
            <a
              class="item"
              href="https://gods.art/articles/equation_shadows.html"
              >The shadows lurking in the equations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 14:21:13</span
              ><span class="points-container"
                >Points: <span class="points">126</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45823141"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45823059">
          <h3>
            <a
              class="item"
              href="https://developer.chrome.com/docs/web-platform/deprecating-xslt"
              >Removing XSLT for a more secure browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 14:14:23</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45823059"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45822982">
          <h3>
            <a
              class="item"
              href="https://seemann.io/posts/2024-10-26---p2p-quic/"
              >A P2P Vision for QUIC (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 14:06:22</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45822982"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45822902">
          <h3>
            <a
              class="item"
              href="https://www.forbes.com/sites/emmawoollacott/2025/07/22/microsoft-cant-keep-eu-data-safe-from-us-authorities/"
              >Microsoft Can't Keep EU Data Safe from US Authorities</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 14:00:41</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45822902"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45822559">
          <h3>
            <a class="item" href="https://radiant.computer">Radiant Computer</a>
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 13:22:35</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45822559"
                  >Comments</a
                ><span class="descendants">: 67</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45822539">
          <h3>
            <a
              class="item"
              href="https://gothamist.com/news/ny-smartphone-ban-has-made-lunch-loud-again"
              >NY smartphone ban has made lunch loud again</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 13:20:16</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45822539"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45822302">
          <h3>
            <a
              class="item"
              href="https://www.macrumors.com/2025/11/05/ios-26-2-third-party-app-stores-japan/"
              >iOS 26.2 to allow third-party app stores in Japan ahead of
              regulatory deadline</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 12:51:44</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45822302"
                  >Comments</a
                ><span class="descendants">: 116</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45822071">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/travel/article/20200902-the-grim-truth-behind-the-pied-piper"
              >The grim truth behind the Pied Piper (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 12:21:39</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45822071"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45821921">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45821921"
              >Founder in Residence at Woz (San Francisco)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 12:00:17</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re opening one of the coolest jobs ever (only slightly
                biased).
              </p>
              <p>
                At Woz, we’ve built the world's first AI App Factory, capable of
                building business quality mobile apps in just hours.
              </p>
              <p>
                Now we’re handing over the keys to aspiring founders and
                challenging them to build real, revenue generating app
                businesses. Founders get full internal access to our platform, a
                salary, a dedicated marketing budget, and meaningful upside in
                any revenue they generate. This is a rare chance to operate like
                a founder inside a YC startup that recently raised a $6M seed
                round, surrounded by experienced engineers and builders in the
                heart of San Francisco.
              </p>
              <p>
                Who we’re looking for: - A technical builder who can ship,
                iterate and problem solve independently (experience with React
                Native and TypeScript is a plus) - Someone who has launched
                products, apps, or businesses before, or has a strong track
                record of building things on their own - Someone who understands
                go-to-market and growth, especially creative or viral marketing
                - Someone eager to learn, experiment, and build alongside our
                team in San Francisco (able to work in-person for at least the
                first three months)
              </p>
              <p>
                Interested? Submit your info here. We’ll be in touch
                <a href="https://forms.gle/h8ZWjgRfQUpaTQf8A"
                  >https://forms.gle/h8ZWjgRfQUpaTQf8A</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45820872">
          <h3>
            <a class="item" href="https://simonwillison.net/2025/Nov/5/brenda/"
              >I’m worried that they put co-pilot in Excel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 08:54:11</span
              ><span class="points-container"
                >Points: <span class="points">291</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45820872"
                  >Comments</a
                ><span class="descendants">: 206</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45818562">
          <h3>
            <a class="item" href="https://hypothesis.readthedocs.io/en/latest/"
              >Hypothesis: Property-Based Testing for Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 03:15:37</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45818562"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45818471">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/oldnewthing/20251104-00/?p=111758"
              >The Microsoft SoftCard for the Apple II: Getting two processors
              to share memory</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-05 @ 02:58:25</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45818471"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45817114">
          <h3>
            <a class="item" href="https://github.com/pythops/bluetui"
              >Bluetui – A TUI for managing Bluetooth on Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-04 @ 23:29:31</span
              ><span class="points-container"
                >Points: <span class="points">223</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45817114"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45816963">
          <h3>
            <a
              class="item"
              href="https://avherald.com/h?article=52f5748f&amp;opt=0"
              >UPS plane crashes near Louisville airport</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-04 @ 23:10:53</span
              ><span class="points-container"
                >Points: <span class="points">276</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45816963"
                  >Comments</a
                ><span class="descendants">: 253</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45816853">
          <h3>
            <a class="item" href="https://inventingthefuture.ghost.io/mr-tiff/"
              >Mr TIFF</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-04 @ 22:57:12</span
              ><span class="points-container"
                >Points: <span class="points">860</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45816853"
                  >Comments</a
                ><span class="descendants">: 117</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45816673">
          <h3>
            <a class="item" href="https://github.com/zserge/grayskull"
              >Grayskull: A tiny computer vision library in C for embedded
              systems, etc.</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-04 @ 22:35:58</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45816673"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45812756">
          <h3>
            <a
              class="item"
              href="https://loopholelabs.io/blog/xdp-for-egress-traffic"
              >An eBPF Loophole: Using XDP for Egress Traffic</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-04 @ 16:26:09</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45812756"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45788385">
          <h3>
            <a class="item" href="https://github.com/Athe-kunal/intervaltree_rs"
              >Intervaltree with Rust Back End</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 07:04:59</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45788385"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45788086">
          <h3>
            <a
              class="item"
              href="https://ananthakumaran.in/2025/11/02/moving-tables-across-postgres-instances.html"
              >Moving tables across PostgreSQL instances</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-11-02 @ 05:47:46</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45788086"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45763262">
          <h3>
            <a
              class="item"
              href="https://blog.ml.cmu.edu/2025/10/27/learning-from-failure-to-tackle-extremely-hard-problems/"
              >Learning from failure to tackle hard problems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 18:18:40</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45763262"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45761594">
          <h3>
            <a
              class="item"
              href="https://antocuni.eu/2025/10/29/inside-spy-part-1-motivations-and-goals/"
              >SPy: An interpreter and compiler for a fast statically typed
              variant of Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 16:08:25</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45761594"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45761433">
          <h3>
            <a
              class="item"
              href="https://www.cnet.com/tech/computing/apple-talks-to-me-about-vision-pro-personas-where-is-our-virtual-presence-headed/"
              >Apple’s Persona technology uses Gaussian splatting to create 3D
              facial scans</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 15:53:21</span
              ><span class="points-container"
                >Points: <span class="points">189</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45761433"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45759839">
          <h3>
            <a
              class="item"
              href="https://riscv.org/blog/risc-v-jtc1-pas-submitter/"
              >RISC-V takes first step toward international ISO/IEC
              standardization</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-30 @ 13:30:37</span
              ><span class="points-container"
                >Points: <span class="points">212</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45759839"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45733204">
          <h3>
            <a
              class="item"
              href="https://press.asus.com/news/press-releases/asus-proart-display-8k-pa32kcx-availability/"
              >Asus Announces October Availability of ProArt Display 8K
              PA32KCX</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-28 @ 14:17:04</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45733204"
                  >Comments</a
                ><span class="descendants">: 209</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45727173">
          <h3>
            <a
              class="item"
              href="https://novalis.org/blog/2025-10-27-blue-prince-1989.html"
              >Blue Prince (1989)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-27 @ 22:38:48</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45727173"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45697414">
          <h3>
            <a
              class="item"
              href="https://re.factorcode.org/2025/10/parsing-chemistry.html"
              >Parsing Chemistry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-24 @ 18:07:53</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45697414"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
