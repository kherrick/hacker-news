<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40321901">
          <h3>
            <a
              class="item"
              href="https://twitter.com/elevenlabsio/status/1788628171044053386"
              >ElevenLabs Music</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 17:58:15</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40321901"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40321867">
          <h3>
            <a
              class="item"
              href="https://krystalgamer.github.io/spidey-decomp-status-may/"
              >Spider-Man (Neversoft) Decompilation Project Progress Checkpoint
              – May 2024</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 17:55:08</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40321867"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40321821">
          <h3>
            <a
              class="item"
              href="https://www.spaceweatherlive.com/en/news/view/533/20240510-cme-impact-imminent-two-more-earth-directed-cmes.html"
              >Coronal mass ejection impact imminent, Two more earth-directed
              CMEs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 17:50:52</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40321821"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40320900">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/space-based-solar-power-2667878868"
              >A Skeptic's Take on Beaming Power to Earth from Space</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 16:32:41</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40320900"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40320406">
          <h3>
            <a
              class="item"
              href="https://www.simonsfoundation.org/2024/05/10/simons-foundation-co-founder-mathematician-and-investor-jim-simons-dies-at-86/"
              >Jim Simons has died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 15:51:01</span
              ><span class="points-container"
                >Points: <span class="points">511</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40320406"
                  >Comments</a
                ><span class="descendants">: 162</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40318714">
          <h3>
            <a class="item" href="https://github.com/MHNightCat/superfile"
              >Superfile – A fancy, pretty terminal file manager</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 13:27:20</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40318714"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40318542">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=40318542"
              >Show HN: A web debugger an ex-Cloudflare team has been working on
              for 4 years</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 13:08:38</span
              ><span class="points-container"
                >Points: <span class="points">437</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40318542"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
            <div class="text">
              <a href="https://jam.dev">https://jam.dev</a>
              <p>
                It’s called Jam and it prevents product managers (like I used to
                be) from being able to create vague and un-reproducible bug
                tickets (like I used to create).
              </p>
              <p>
                It’s actually really hard as a non-engineer to file useful bug
                tickets for engineers. Like, sometimes I thought I included a
                screenshot, but the important information the engineer needed
                was what was actually right outside the boundary of the
                screenshot I took. Or I'd write that something "didn't work" but
                the engineer wasn't sure if I meant that it returned an error or
                if it was unresponsive. So the engineer would be frustrated, I
                would be frustrated, and fixing stuff would slow to a halt while
                we went back and forth to clarify how to repro the issue over
                async Jira comments.
              </p>
              <p>
                It’s actually pretty crazy that while so much has changed in how
                we develop software (heck, we have types in javascript now*),
                the way we capture and report bugs is just as manual and lossy
                as it was in the 1990’s. We can run assembly in the browser but
                there’s still no tooling to help a non-engineer show a bug to an
                engineer productively.
              </p>
              <p>
                So that’s what Jam is. Dev tools + video in a link. It’s like a
                shareable HAR file synced to a video recording of the session.
                And besides video, you can use it to share an instant replay of
                a bug that just happened — basically a 30 second playback of the
                DOM as a video.
              </p>
              <p>
                We’ve spent a lot of time adding in a ton of niceties, like Jam
                writes automatic repro steps for you, and Jam’s dev tools use
                the same keyboard shortcuts you’re used to in Chrome dev tools,
                and our team’s personal favorite: Jam parses GraphQL responses
                and pulls out mutation names and errors (which is important
                because GraphQL uses one endpoint for all requests and always
                returns a 200, meaning you usually have to sift through every
                GraphQL request when debugging to find the one you’re looking
                for)
              </p>
              <p>
                We’re now 2 years in to the product being live and people have
                used Jam to fix more than 2 million bugs - which makes me so
                happy - but there’s still a ton to do. I wanted to open up for
                discussion here and get your feedback and opinions how can we
                make it even more valuable for you debugging?
              </p>
              <p>
                The worst part of the engineering job is debugging and not even
                being able to repro the issue, it’s not even really engineering,
                it’s just a communication gap, one that we should be able to
                solve with tools. So yeah excited to get your feedback and hear
                your thoughts how we can make debugging just a little less
                frustrating.
              </p>
              <p>
                (Jam is free to use forever — there is a paid tier for features
                real companies would need, but we’re keeping a large free plan
                forever. We learned to build products at Cloudflare and free
                tier is in our ethos, both my co-founder and I and about half
                the team is ex-Cloudflare) and what we loved there is how much
                great feedback we’d get because the product was mostly free to
                use. We definitely want to keep that going at Jam.)
              </p>
              <p>
                By the way, we’re hiring engineers and if this is a problem that
                excites you, we’d love to chat: jam.dev/careers
              </p>
            </div>
          </section>
        </section>
        <section id="40318538">
          <h3>
            <a
              class="item"
              href="https://www.fabianzeindl.com/posts/the-api-database-architecture"
              >The API database architecture – Stop writing HTTP-GET
              endpoints</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 13:08:23</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40318538"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40318487">
          <h3>
            <a
              class="item"
              href="https://www.swisstopo.admin.ch/en/swipos-gisgeo-for-rtk-and-postprocessing-applications"
              >Swipos-GIS/GEO, nationwide GNSS RTK correction for centimeter
              accurate location</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 13:02:54</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40318487"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40318468">
          <h3>
            <a class="item" href="https://github.com/getmeemaw/meemaw"
              >Show HN: Meemaw – Trustless and grandma-friendly wallet as a
              service</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 13:01:44</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40318468"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <p>
                Marceau here, founder of Meemaw. I was working on a different
                project (communities with better aligned incentives) for which I
                needed users to have access to a crypto wallet. I couldn't
                afford users to have to deal with private keys and what not, and
                I did not feel comfortable being locked to a non-transparent
                third-party provider for something as important. So I built an
                internal "wallet-as-a-service" around audited librairies. I
                dropped the original project since then and that service evolved
                into Meemaw.
              </p>
              <p>
                Many "web3 projects" would be better off without any web3
                component. But if you do need your users to have a wallet, there
                are a few good reasons to use something like Meemaw:
              </p>
              <p>
                - great UX (no faffing around with private keys or seed phrases,
                easily customisable)
              </p>
              <p>
                - great DX (get up and running quickly, integrate with your
                existing system easily)
              </p>
              <p>- more secure (MPC, trustless)</p>
              <p>
                - low dependency risk (you've always got the option to self-host
                or export existing wallets)
              </p>
              <p>
                If you'd like a refresher on MPC wallets or Wallet-as-a-Service,
                I did my best to explain it without BS industry jargon:
                <a href="https://getmeemaw.com/blog/mpc-wallet"
                  >https://getmeemaw.com/blog/mpc-wallet</a
                >
              </p>
              <p>
                If you have Docker and Node installed on your machine, you can
                have a full example running in less than 5 minutes:
                <a href="https://getmeemaw.com/docs/getting-started"
                  >https://getmeemaw.com/docs/getting-started</a
                >
              </p>
              <p>
                You can already self-host Meemaw, and there will soon be cloud
                hosting as well, with the option to easily switch from one to
                the other at any time.
              </p>
              <p>
                The closed-source competitors are all (very) well-funded, but I
                think we can provide a better developer experience with higher
                security and reduced dependency risks. Right now, Meemaw is
                probably not ready for production, but we'll get there sooner
                rather than later. Your feedback would be greatly appreciated to
                continue moving in the right direction :)
              </p>
            </div>
          </section>
        </section>
        <section id="40317740">
          <h3>
            <a
              class="item"
              href="https://developer.mozilla.org/en-US/docs/Web/API/Popover_API"
              >Popover API</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 11:41:12</span
              ><span class="points-container"
                >Points: <span class="points">287</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40317740"
                  >Comments</a
                ><span class="descendants">: 138</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40316814">
          <h3>
            <a
              class="item"
              href="https://www.think-cell.com/en/career/devblog/trip-report-cpp-now-2024"
              >Trip C++Now 2024 – think-cell</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 09:06:05</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40316814"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40316788">
          <h3>
            <a
              class="item"
              href="https://mathoverflow.net/questions/470951/is-the-largest-root-of-a-random-polynomial-more-likely-to-be-real-than-complex"
              >Is the largest root of a random real polynomial more likely real
              or complex?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 09:01:05</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40316788"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40316121">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/bloop/jobs/iCrEllp-ai-engineer"
              >Bloop (YC S21) Is Hiring AI Engineers. Devin for Legacy Code
              (London, Onsite)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 07:00:38</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40316039">
          <h3>
            <a class="item" href="https://github.com/travisdoor/tine"
              >Tine Text Editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 06:43:36</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40316039"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40316021">
          <h3>
            <a
              class="item"
              href="https://johncarlosbaez.wordpress.com/2024/05/04/hexagonal-tiling-honeycomb/"
              >Hexagonal Tiling Honeycomb</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 06:40:14</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40316021"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40315970">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/cjje132jvygo"
              >Roman Tyrian purple snail dye found in UK for first time</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 06:31:34</span
              ><span class="points-container"
                >Points: <span class="points">160</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40315970"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40315032">
          <h3>
            <a
              class="item"
              href="http://www.bramblyhill.com/admin/Pages/page/Membership-Card-Serial-Adapter.aspx"
              >Serial to Parallel Port Converter</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 02:48:47</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40315032"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40314236">
          <h3>
            <a
              class="item"
              href="https://www.cs.utexas.edu/~gdurrett/courses/online-course/materials.html"
              >CS388: Natural Language Processing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-10 @ 00:09:11</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40314236"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40313733">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2024/5/9/24153113/apple-ipad-ad-crushing-apology"
              >Apple apologizes for iPad 'Crush' ad that 'missed the mark'</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 22:50:05</span
              ><span class="points-container"
                >Points: <span class="points">534</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40313733"
                  >Comments</a
                ><span class="descendants">: 1214</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40313451">
          <h3>
            <a
              class="item"
              href="https://www.sustainabilitybynumbers.com/p/peak-pollution"
              >The world has probably passed peak pollution</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 22:11:41</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40313451"
                  >Comments</a
                ><span class="descendants">: 244</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40313264">
          <h3>
            <a class="item" href="https://ventrella.com/Clusters/"
              >Life-like particle system</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 21:47:13</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40313264"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40312192">
          <h3>
            <a
              class="item"
              href="https://americanhistory.si.edu/collections/object-groups/slide-rules/cylindrical-slide-rules"
              >Cylindrical Slide Rules</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 19:43:11</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40312192"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40297642">
          <h3>
            <a
              class="item"
              href="https://medium.com/@malikpiara/introducing-logicola-3-1aa4047ee335"
              >Logicola 3</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 13:03:12</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40297642"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40294660">
          <h3>
            <a class="item" href="https://aestuans.github.io/blob/"
              >Show HN: A simple 2D fluid and gravity simulation with WASM and
              WebGL</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 05:30:03</span
              ><span class="points-container"
                >Points: <span class="points">56</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40294660"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
            <div class="text">
              <p>
                Mainly an excuse for me to experiment with wasm and WebGL, but
                it makes for a surprisingly good fidget toy.
              </p>
            </div>
          </section>
        </section>
        <section id="40291012">
          <h3>
            <a
              class="item"
              href="https://news.mit.edu/2024/sound-suppressing-silk-can-create-quiet-spaces-0507"
              >Sound-suppressing silk can create quiet spaces</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-07 @ 20:23:29</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40291012"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40290228">
          <h3>
            <a
              class="item"
              href="https://hakaimagazine.com/features/how-viking-age-hunters-took-down-the-biggest-animal-on-earth/"
              >Medieval Icelanders were likely hunting blue whales before
              industrial technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-07 @ 19:12:15</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40290228"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40271057">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Laudatio_Turiae"
              >Laudatio Turiae</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 04:06:09</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40271057"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40265928">
          <h3>
            <a
              class="item"
              href="https://melmagazine.com/en-us/story/orson-welles-drunk-wine-commercial"
              >I was at the clapperboard for Orson Welles' drunk wine commercial
              (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-05 @ 16:12:30</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40265928"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40258903">
          <h3>
            <a class="item" href="https://deno.com/blog/building-deno-kv"
              >Deno KV internals: building a database for the modern web</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-04 @ 17:01:25</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40258903"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
