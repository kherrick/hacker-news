<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="38096076">
          <h3>
            <a
              class="item"
              href="https://www.npr.org/2023/10/31/1208800238/the-telegram-app-has-been-a-key-platform-for-hamas-now-its-being-restricted-ther"
              >The Telegram app has been a key platform for Hamas. Now it's
              being restricted</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-01 @ 09:12:14</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38096076"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38095699">
          <h3>
            <a
              class="item"
              href="https://herman.bearblog.dev/how-bear-does-analytics-with-css/"
              >Bear Does Analytics with CSS</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-01 @ 08:08:09</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38095699"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38095542">
          <h3>
            <a
              class="item"
              href="https://ludic.mataroa.blog/blog/what-the-goddamn-hell-is-going-on-in-the-tech-industry/"
              >What the Goddamn Hell Is Going on in the Tech Industry? –
              Ludicity</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-01 @ 07:40:07</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38095542"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38095239">
          <h3>
            <a class="item" href="https://antonz.org/sqlite-3-44/"
              >SQLite 3.44: Interactive release notes</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-01 @ 06:39:04</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38095239"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38094620">
          <h3>
            <a
              class="item"
              href="https://github.com/gorhill/uBlock/releases/tag/1.53.0"
              >uBlock Origin 1.53</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-01 @ 04:33:02</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38094620"
                  >Comments</a
                ><span class="descendants">: 128</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38093353">
          <h3>
            <a class="item" href="https://github.com/huggingface/distil-whisper"
              >Distil-Whisper: distilled version of Whisper that is 6 times
              faster, 49% smaller</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-01 @ 00:55:41</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38093353"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38093083">
          <h3>
            <a class="item" href="https://joel.tools/halloween/"
              >Show HN: Halloween game to show off my new Terminal</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-11-01 @ 00:14:03</span
              ><span class="points-container"
                >Points: <span class="points">111</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38093083"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
            <div class="text">
              <p>
                I made a little Halloween themed game this week to show off my
                new terminal. You can play it in the browser. at
                <a href="https://joel.tools/halloween/"
                  >https://joel.tools/halloween/</a
                >
              </p>
              <p>
                Two years ago, I started building an experiment tracking tool
                for myself as I have been venturing into ai research, and it has
                morphed into a terminal with rich content support and a bunch of
                fancy features.
                <a href="https://github.com/JoelEinbinder/snail/"
                  >https://github.com/JoelEinbinder/snail/</a
                >
              </p>
              <p>
                I can't recommend people start using snail for important stuff
                today, but I think the game is fun and it shows off a lot of the
                capabilities of the terminal.
              </p>
              <p>Joel Einbinder</p>
            </div>
          </section>
        </section>
        <section id="38092624">
          <h3>
            <a
              class="item"
              href="https://www.culturehustleusa.com/products/black-4-0"
              >Black 4.0</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 23:11:29</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38092624"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38092596">
          <h3>
            <a class="item" href="https://esawebb.org/images/potm2308a/"
              >M51: A Feast for the Eyes</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 23:08:51</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38092596"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38091679">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/article/giant-european-telescope-rises-u-s-rivals-await-rescue"
              >A giant European telescope rises as U.S. rivals await rescue</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 21:32:02</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38091679"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38091569">
          <h3>
            <a
              class="item"
              href="https://catacombs.space1999.net/main/cguide/umtravel.html"
              >Moonbase Alpha Travel Tube Details</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 21:23:11</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38091569"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38090521">
          <h3>
            <a class="item" href="https://openrw.org/"
              >A Grand Theft Auto III Re-Implementation</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 19:53:00</span
              ><span class="points-container"
                >Points: <span class="points">227</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38090521"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38089980">
          <h3>
            <a
              class="item"
              href="https://blog.datomic.com/2017/01/the-ten-rules-of-schema-growth.html"
              >Rules of schema growth (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 19:15:44</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38089980"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38089342">
          <h3>
            <a
              class="item"
              href="https://github.com/AsahiLinux/docs/wiki/macOS-Sonoma-Boot-Failures"
              >macOS Sonoma Boot Failures</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 18:33:52</span
              ><span class="points-container"
                >Points: <span class="points">540</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38089342"
                  >Comments</a
                ><span class="descendants">: 208</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38089247">
          <h3>
            <a
              class="item"
              href="https://twitter.com/javilopen/status/1719363262179938401"
              >Copying Angry Birds with nothing but AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 18:27:15</span
              ><span class="points-container"
                >Points: <span class="points">472</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38089247"
                  >Comments</a
                ><span class="descendants">: 230</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38088856">
          <h3>
            <a
              class="item"
              href="https://www.linaro.org/blog/upstream-linux-support-now-available-for-the-the-qualcomm-snapdragon-8-gen-3-mobile-platform/"
              >Upstream Linux support available for Qualcomm Snapdragon 8 Gen 3
              Mobile Platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 18:01:27</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38088856"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38088538">
          <h3>
            <a class="item" href="https://www.phind.com/phindmodelhn"
              >Phind Model beats GPT-4 at coding, with GPT-3.5 speed and 16k
              context</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 17:40:47</span
              ><span class="points-container"
                >Points: <span class="points">740</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38088538"
                  >Comments</a
                ><span class="descendants">: 300</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re excited to announce that Phind now defaults to our own
                model that matches and exceeds GPT-4’s coding abilities while
                running 5x faster. You can now get high quality answers for
                technical questions in 10 seconds instead of 50.
              </p>
              <p>
                The current 7th-generation Phind Model is built on top of our
                open-source CodeLlama-34B fine-tunes that were the first models
                to beat GPT-4’s score on HumanEval and are still the best open
                source coding models overall by a wide margin:
                <a
                  href="https://huggingface.co/spaces/bigcode/bigcode-models-leaderboard"
                  >https://huggingface.co/spaces/bigcode/bigcode-models-leaderb...</a
                >.
              </p>
              <p>
                This new model has been fine-tuned on an additional 70B+ tokens
                of high quality code and reasoning problems and exhibits a
                HumanEval score of 74.7%. However, we’ve found that HumanEval is
                a poor indicator of real-world helpfulness. After deploying
                previous iterations of the Phind Model on our service, we’ve
                collected detailed feedback and noticed that our model matches
                or exceeds GPT-4’s helpfulness most of the time on real-world
                questions. Many in our Discord community have begun using Phind
                exclusively with the Phind Model despite also having unlimited
                access to GPT-4.
              </p>
              <p>
                One of the Phind Model’s key advantages is that it's very fast.
                We’ve been able to achieve a 5x speedup over GPT-4 by running
                our model on H100s using the new TensorRT-LLM library from
                NVIDIA. We can achieve up to 100 tokens per second single-stream
                while GPT-4 runs around 20 tokens per second at best.
              </p>
              <p>
                Another key advantage of the Phind Model is context – it
                supports up to 16k tokens. We currently allow inputs of up to
                12k tokens on the website and reserve the remaining 4k for web
                results.
              </p>
              <p>
                There are still some rough edges with the Phind Model and we’ll
                continue improving it constantly. One area where it still
                suffers is consistency — on certain challenging questions where
                it is capable of getting the right answer, the Phind Model might
                take more generations to get to the right answer than GPT-4.
              </p>
              <p>We’d love to hear your feedback.</p>
              <p>Cheers,</p>
              <p>The Phind Team</p>
            </div>
          </section>
        </section>
        <section id="38088435">
          <h3>
            <a
              class="item"
              href="https://www.dpag.ox.ac.uk/news/we-show-that-in-fruit-flies-a-subpopulation-of-reward-encoding-dopaminergic-neurons-antagonizes-punishment-encoding-neurons-and-can-override-punishment-or-hunger-cues-in-favour-of-reward-seeking-behaviour"
              >Flies neglect food and endure shocks to seek a dopamine reward</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 17:33:47</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38088435"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38086894">
          <h3>
            <a
              class="item"
              href="http://www.righto.com/2023/10/reverse-engineering-ethernet-backoff-on.html"
              >Reverse-engineering Ethernet backoff on the Intel 82586 network
              chip's die</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 15:59:57</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38086894"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38086598">
          <h3>
            <a class="item" href="https://github.com/cozis/microtcp"
              >Show HN: MicroTCP, a minimal TCP/IP stack</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 15:43:12</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38086598"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38086387">
          <h3>
            <a class="item" href="https://github.com/streamdal/streamdal"
              >Show HN: Streamdal – an open-source tail -f for your data</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 15:31:33</span
              ><span class="points-container"
                >Points: <span class="points">122</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38086387"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
            <div class="text">
              <i>`tail -f`</i> for your data, with a UI. We call it
              <i>"Streamdal"</i> which is a word salad for streaming systems
              (because we love them) and DAL or data access layer (because we’re
              nerds).
              <p>
                Here's the repo:
                <a href="https://github.com/streamdal/streamdal"
                  >https://github.com/streamdal/streamdal</a
                >
              </p>
              <p>
                Here's the site:
                <a href="https://streamdal.com">https://streamdal.com</a>
              </p>
              <p>
                And here's a live demo:
                <a href="https://demo.streamdal.com"
                  >https://demo.streamdal.com</a
                >
                (github repo has an explanation of the demo)
              </p>
              <p>— — —</p>
              <p>THE PROBLEM</p>
              <p>
                We built this because the current observability tooling is not
                able to provide real-time insight into the actual data that your
                software is reading or writing. Meaning that it takes longer to
                identify issues and longer to resolve them. That’s time, money,
                and customer satisfaction at stake.
              </p>
              <p>
                Want to build something in-house? Prepare to deploy a team,
                spend months of development time, and tons of money bringing it
                to production. Then be ready to have engineers around to babysit
                your new monitoring tool instead of working on your product.
              </p>
              <p>— — —</p>
              <p>THE BASIC FLOW</p>
              <p>So, wtf is a “tail -f for your data”. What we mean is this:</p>
              <p>
                1. We give you an SDK for your language, a server, and a UI.
              </p>
              <p>
                2. You instrument your code with
                <i>`StreamdalSDK.Process(yourData)`</i> anytime you read or
                write data in your app.
              </p>
              <p>3. You deploy your app/service.</p>
              <p>
                4. Go to the provided UI (or run the CLI app) and be able to
                peek into what your app is reading or writing, like with
                <i>`tail -f`</i>.
              </p>
              <p>
                And that's basically it. There's a bunch more functionality in
                the project but we find this to be the most immediately useful
                part. Every developer we've shown this to has said "I wish I had
                this at my gig at $company" - and we feel exactly the same. We
                are devs and this is what we’ve always wanted, hundreds of times
                - a way to just quickly look at the data our software is
                producing in real-time, without having to jump through any
                hoops.
              </p>
              <p>
                <i
                  >If you want to learn more about the "why" and the origin of
                  this project - you can read about it here:
                  <a href="https://streamdal.com/manifesto"
                    >https://streamdal.com/manifesto</a
                  ></i
                >
              </p>
              <p>— — —</p>
              <p>HOW DOES IT WORK?</p>
              <p>
                The SDK establishes a long-running session with the server
                (using gRPC) and "listens" for commands that are forwarded to it
                all the way from the <i>UI -&gt; server -&gt; SDK</i>.
              </p>
              <p>
                The commands are things like:
                <i>"show me the data that you are currently consuming"</i>,
                <i>"apply these rules to all data that you produce"</i>,
                <i>"inspect the schema for all data"</i>, and so on.
              </p>
              <p>
                The SDK interprets the command and either executes Wasm-based
                rules against the data it's processing or if it's a
                <i>`tail`</i> request - it'll send the data to the server, which
                will forward it to the UI for display.
              </p>
              <p>
                The SDK <i>IS</i> part of the critical path but it does not have
                a dependency on the server. If the server is gone, you won't be
                able to use the UI or send commands to the SDKs, but that's
                about it - the SDKs will continue to work and attempt to
                reconnect to the server behind the scenes.
              </p>
              <p>— — —</p>
              <p>TECHNICAL BITS</p>
              <p>
                The project consists of a lot of "buzzwordy" tech: we use gRPC,
                grpc-Web, protobuf, redis, Wasm, Deno, ReactFlow, and probably a
                few other things.
              </p>
              <p>
                The server is written in Go, all of the Wasm is Rust and the UI
                is Typescript. There are SDKs for Go, Python, and Node. We chose
                these languages for the SDKs because we've been working in them
                daily for the past 10+ years.
              </p>
              <p>
                <i
                  >The reasons for the tech choices are explained in detail
                  here:</i
                >
                <a
                  href="https://docs.streamdal.com/en/resources-support/open-source/"
                  >https://docs.streamdal.com/en/resources-support/open-source/</a
                >
              </p>
              <p>— — —</p>
              <p>LAST PART</p>
              <p>
                OK, that's it. What do you think? Is it useful? Can we answer
                anything?
              </p>
              <p>
                - If you like what you're seeing, give our repo a star:
                <a href="https://github.com/streamdal/streamdal"
                  >https://github.com/streamdal/streamdal</a
                >
              </p>
              <p>
                - And If you <i>really</i> like what you're seeing, come talk to
                us on our discord:
                <a href="https://discord.gg/streamdal"
                  >https://discord.gg/streamdal</a
                >
              </p>
              <p>Talk soon!</p>
              <p>- Daniel &amp; Ustin</p>
            </div>
          </section>
        </section>
        <section id="38085417">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/education/interactive/2023/homeschooling-growth-data-by-district/"
              >Home schooling's rise from fringe to fastest-growing form of
              education</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 14:29:51</span
              ><span class="points-container"
                >Points: <span class="points">394</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38085417"
                  >Comments</a
                ><span class="descendants">: 967</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38083484">
          <h3>
            <a class="item" href="https://darkhotels.co"
              >I've overlayed stays on a light pollution satellite map</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-31 @ 12:04:58</span
              ><span class="points-container"
                >Points: <span class="points">506</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38083484"
                  >Comments</a
                ><span class="descendants">: 199</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38063687">
          <h3>
            <a
              class="item"
              href="https://isonomiaquarterly.com/archive/volume-1-issue-2/life-lessons-from-the-death-bed/"
              >Life Lessons from the Death Bed</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-29 @ 22:56:38</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38063687"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38060517">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Atari_Video_Music"
              >Atari Video Music</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-29 @ 17:05:18</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38060517"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38059047">
          <h3>
            <a class="item" href="https://archive.org/details/rattlecad"
              >RattleCAD</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-29 @ 14:42:07</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38059047"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38059018">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=Hi1johHhYlY"
              >Evaluating embedding based retrieval beyond historical search
              results [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-29 @ 14:39:03</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38059018"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38058843">
          <h3>
            <a class="item" href="https://terebess.hu/english/tao/gia.html"
              >Tao Te Ching – Gia-Fu Feng, Jane English Translation (1989)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-29 @ 14:14:07</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38058843"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38058765">
          <h3>
            <a
              class="item"
              href="https://blog.brixit.nl/building-a-digital-audio-mixer/"
              >Building a Digital Audio Mixer</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-29 @ 14:04:15</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38058765"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="38057293">
          <h3>
            <a class="item" href="https://www.pictorial64.com/"
              >The Pictorial C64 Fault Guide</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-10-29 @ 10:37:26</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=38057293"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
