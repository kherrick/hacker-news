<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41080485">
          <h3>
            <a
              class="item"
              href="https://mcognetta.github.io/posts/leetcode-random-seed/"
              >Finding a random seed that solves a LeetCode problem (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 17:31:03</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41080485"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41080442">
          <h3>
            <a
              class="item"
              href="https://www.lumafield.com/article/how-does-a-car-cigarette-lighter-work"
              >How a car cigarette lighter works, in CT scans</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 17:25:14</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41080442"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41080373">
          <h3>
            <a
              class="item"
              href="https://statmodeling.stat.columbia.edu/2024/07/10/three-cultures-bayes-subjective-objective-pragmatic/"
              >Bayesian Statistics: The Three Cultures</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 17:15:15</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41080373"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41080367">
          <h3>
            <a
              class="item"
              href="https://en.wikipedia.org/wiki/Androgynous_Peripheral_Attach_System"
              >Androgynous Peripheral Attach System</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 17:14:52</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41080367"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41080222">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41080222"
              >Sample (YC W24) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 17:00:19</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re starting by automating billing for clinical labs. Clinical
                labs often go unpaid for &gt;30% of the tests they run, and
                pathologists will inevitably get roped into insurance paperwork
                over helping patients. Our product automatically gets the right
                documentation together for reimbursement, sends paperwork to
                insurance, and follows up over the phone to make sure clinicians
                get paid for their work.
              </p>
              <p>
                Labs are just the start: our goal is to become the payment rails
                for medical benefits. Instead of doctors spending their time on
                paperwork, we’re building the infrastructure to let them focus
                on patients again. After winning in labs, we'll support more
                specialties with their billing and sell directly to health
                insurance.
              </p>
              <p>
                We’re based in San Francisco, and are hiring an on-site founding
                engineer to join our team. We’re profitable and backed by some
                of the best founders &amp; leaders in the industry, including
                Homebrew Ventures, Hummingbird VC, Y Combinator, Kulveer Taggar
                (CEO, Zeus), Zack Kanter (CEO, Stedi), and great folks from
                Retool, Stripe, Ambience Healthcare, and Watershed.
              </p>
              <p>
                If this sounds interesting, send by an email to
                ankit@samplehc.com with HN in the title. Looking forward to
                meeting you!
              </p>
            </div>
          </section>
        </section>
        <section id="41080063">
          <h3>
            <a
              class="item"
              href="https://www.fastcompany.com/91159743/skip-and-arcteryx-built-an-amazing-new-exoskeleton-heres-what-its-like-to-walk-in-it"
              >Skip and Arc'teryx built a futuristic exoskeleton</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 16:44:35</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41080063"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41080018">
          <h3>
            <a
              class="item"
              href="https://www.lemonsqueezy.com/blog/stripe-acquires-lemon-squeezy"
              >Stripe Acquires Lemon Squeezy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 16:39:59</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41080018"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41079819">
          <h3>
            <a
              class="item"
              href="https://moonbearmusings.com/lets-talk-about-how-mihoyos-monetization-works/"
              >Let's talk about how Mihoyo's monetization works</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 16:14:45</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41079819"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41079571">
          <h3>
            <a
              class="item"
              href="https://lemire.me/blog/2024/07/26/safer-code-in-c-with-lifetime-bounds/"
              >Safer code in C++ with lifetime bounds</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 15:47:28</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41079571"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41079083">
          <h3>
            <a class="item" href="https://siboehm.com/articles/22/CUDA-MMM"
              >How to Optimize a CUDA Matmul Kernel for CuBLAS-Like Performance:
              A Worklog</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 14:50:10</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41079083"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41079027">
          <h3>
            <a class="item" href="https://text.npr.org/nx-s1-5049970"
              >So how do you 'accurately' speak English in ancient Rome?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 14:44:35</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41079027"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41078020">
          <h3>
            <a class="item" href="https://wordslicer.com"
              >Show HN: Word Slicer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 12:24:48</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41078020"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              Hi. I created a small word game and would love someone to give it
              a try and let me know what you think. Thanks!
            </div>
          </section>
        </section>
        <section id="41077496">
          <h3>
            <a
              class="item"
              href="https://fika.bar/blogs/paoramen/fear-of-over-engineering-has-killed-engineering-altogether-01J3MM2Y3RGK8AZWYHHFJMAGJJ"
              >Fear of over-engineering has killed engineering altogether</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 10:39:03</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41077496"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41076375">
          <h3>
            <a class="item" href="https://lwn.net/Articles/972580/"
              >A hash table by any other name</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 06:53:50</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41076375"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41075766">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2024-07-26/zurich-bern-consider-billboard-bans-after-vernier-outlaws-visual-pollution"
              >A Swiss Town Banned Billboards. Zurich, Bern May Soon Follow</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-26 @ 04:26:53</span
              ><span class="points-container"
                >Points: <span class="points">461</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41075766"
                  >Comments</a
                ><span class="descendants">: 458</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41074002">
          <h3>
            <a
              class="item"
              href="https://rein.pk/startup-finance-for-founders-part-i-accounting"
              >Startup Finance for Founders – Part I, Accounting (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 22:20:28</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41074002"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41073777">
          <h3>
            <a
              class="item"
              href="https://stamen.com/the-many-lives-of-null-island/"
              >The Many Lives of Null Island</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 21:52:21</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41073777"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41073741">
          <h3>
            <a class="item" href="https://lav.io/notes/exploring-cop-data/"
              >NYPD Coppelgänger: Exploring Cop Data</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 21:47:57</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41073741"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41073698">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-07-pongamia-trees-citrus-flourished-renewable.html"
              >Pongamia trees grow where citrus once flourished</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 21:41:58</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41073698"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41072616">
          <h3>
            <a class="item" href="https://aml4td.org/"
              >Applied Machine Learning for Tabular Data</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 19:48:35</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41072616"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41069829">
          <h3>
            <a
              class="item"
              href="https://deepmind.google/discover/blog/ai-solves-imo-problems-at-silver-medal-level/"
              >AI solves International Math Olympiad problems at silver medal
              level</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 15:29:41</span
              ><span class="points-container"
                >Points: <span class="points">1293</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41069829"
                  >Comments</a
                ><span class="descendants">: 494</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41053148">
          <h3>
            <a
              class="item"
              href="https://www.cnbc.com/2024/07/23/ftc-launches-probe-into-surveillance-pricing.html"
              >FTC launches probe into 'surveillance pricing'</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 02:39:17</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41053148"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41041995">
          <h3>
            <a class="item" href="https://cloudbsd.xyz/"
              >From Linux to NetBSD, with SSH Only</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 02:36:03</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41041995"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41040520">
          <h3>
            <a class="item" href="https://tonsky.me/blog/clojure-macros/"
              >Clojure macros continue to surprise me</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 22:28:08</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41040520"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41036370">
          <h3>
            <a
              class="item"
              href="https://standardsmanual.com/products/nasa-graphics-standards-manual"
              >NASA Graphics Standards Manual</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 16:34:23</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41036370"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41036267">
          <h3>
            <a
              class="item"
              href="https://www.therailwayhub.co.uk/67072/from-the-archive-operation-smash-hit-84/"
              >When British Railways Deliberately Crashed a Train</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 16:27:59</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41036267"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41035909">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/science/article/2024/jul/21/rosemary-grant-peter-grant-charles-darwin-finches-evolutionary-biology-princeton-one-step-sideways-three-steps-forward-memoir"
              >'Evolution happens much quicker than Darwin thought'</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 15:59:19</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41035909"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41031288">
          <h3>
            <a
              class="item"
              href="https://dmiller.github.io/clojure-clr-next/general/2024/07/21/whats-the-point.html"
              >What's the Point? BigDecimal in review</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 05:59:09</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41031288"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41030693">
          <h3>
            <a class="item" href="https://alok.github.io/2022/11/09/dissection/"
              >What it's like to dissect a cadaver</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 03:33:44</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41030693"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41026726">
          <h3>
            <a class="item" href="https://halb.it/posts/x64-moving-data/"
              >An interactive guide to x86-64 assembly – moving data</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-21 @ 17:48:08</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41026726"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
