<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46207505">
          <h3>
            <a
              class="item"
              href="https://stephenramsay.net/posts/vibe-coding.html"
              >If You're Going to Vibe Code, Why Not Do It in C?</a
            >
          </h3>
        </section>
        <section id="46207464">
          <h3>
            <a class="item" href="https://www.digitalpublicgoods.net/r/peertube"
              >PeerTube is recognized as a digital public good by Digital Public
              Goods Alliance</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 17:08:37</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46207464"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46207360">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/clearspace/jobs/yamWTLr-founding-designer-at-clearspace"
              >Clearspace (YC W23) Is Hiring a Founding Designer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 17:01:11</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46207017">
          <h3>
            <a class="item" href="https://playground.ctgt.ai"
              >Launch HN: Mentat (YC F24) – Controlling LLMs with Runtime
              Intervention</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 16:37:55</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46207017"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://docs.ctgt.ai/api-reference/endpoint/chat-completions"
                >https://docs.ctgt.ai/api-reference/endpoint/chat-completions</a
              >), an API that gives developers deterministic control over LLM
              behavior, steering reasoning and removing bias on the fly, without
              the compute of fine-tuning or the brittleness of prompt
              engineering. We use feature-level intervention and graph-based
              verification to fix hallucinations and enforce policies.
              <p>
                This resonates in highly regulated industries or otherwise risky
                applications of AI where the fallout from incorrect or
                underperforming output can be significant. In financial
                services, using GenAI to scan for noncompliant communications
                can be arduous without an easy way to embed complex policies
                into the model. Similarly, a media outlet might want to scale
                AI-generated summaries of their content, but reliability and
                accuracy is paramount. These are both applications where Fortune
                500 companies have utilized our technology to improve subpar
                performance from existing models, and we want to bring this
                capability to more people.
              </p>
              <p>
                Here’s a quick 2-minute demo video showing the process:
                <a
                  href="https://video.ctgt.ai/video/ctgt-ai-compliance-playground-cfnl"
                  >https://video.ctgt.ai/video/ctgt-ai-compliance-playground-cf...</a
                >
              </p>
              <p>
                Standard "guardrails" like RAG and system prompts are
                fundamentally probabilistic: you are essentially asking the
                model nicely to behave. This often fails in two ways. First, RAG
                solves knowledge <i>availability</i> but not <i>integration</i>.
                In our benchmarks, a model given context that "Lerwick is 228
                miles SE of Tórshavn" failed to answer "What is 228 miles NW of
                Lerwick?" because it couldn't perform the spatial inversion.
              </p>
              <p>
                Second, prompt engineering is brittle because it fights against
                the model's pre-training priors. For example, on the TruthfulQA
                benchmark, base models fail ~80% of the time because they mimic
                common misconceptions found on the internet (e.g. "chameleons
                change color for camouflage"). We found that we could literally
                turn up the feature for "skeptical reasoning" to make the model
                ignore the popular myth and output the scientific fact. This
                matters because for high-stakes use cases (like Finance or
                Pharma), "mostly safe" isn't acceptable—companies need
                audit-grade reliability.
              </p>
              <p>
                Our work stems from the CS dungeon at UCSD, with years spent
                researching efficient and interpretable AI, trying to "open the
                black box" of neural networks. We realized that the industry was
                trying to patch model behavior from the outside
                (prompts/filters) when the problem was on the inside (feature
                activations). We knew this was important when we saw enterprises
                struggling to deploy basic models despite having unlimited
                compute, simply because they couldn't guarantee the output
                wouldn't violate compliance rules. I ended up leaving my
                research at Stanford to focus on this.
              </p>
              <p>
                Our breakthrough came while researching the DeepSeek-R1 model.
                We identified the "censorship" feature vector in its latent
                space. Amplifying it guaranteed refusal; subtracting it
                instantly unlocked answers to sensitive questions. This proved
                the model <i>had</i> the knowledge but was suppressing it. We
                realized we could apply this same logic to hallucinations,
                suppressing "confabulation" features to reveal the grounded
                truth. While some hallucinations stem from the inherent
                randomness of generative models, many can be identified with the
                concerted activation of a feature or group of features.
              </p>
              <p>
                Instead of filtering outputs, we intervene at the activation
                level during the forward pass. We identify latent feature
                vectors (v) associated with specific behaviors (bias,
                misconception) and mathematically modify the hidden state (h):
              </p>
              <p></p>
              <pre><code>  h_prime = h - alpha * (h @ v) * v
</code></pre>
              This arithmetic operation lets us "edit" behavior
              deterministically with negligible overhead (&lt;10ms on R1). For
              factual claims, we combine this with a graph verification pipeline
              (which works on closed weight models). We check semantic entropy
              (is the model babbling?) and cross-reference claims against a
              dynamic knowledge graph to catch subtle relational hallucinations
              that vector search misses.
              <p>
                On GPT-OSS-120b, this approach improved TruthfulQA accuracy from
                21% to 70% by suppressing misconception features. We also
                improved the performance of this model to frontier levels on
                HaluEval-QA, where we reached 96.5% accuracy, solving the
                spatial reasoning failures where the baseline failed. It also
                handles noisy inputs, inferring "David Icke" from the typo
                "David Of me" where base models gave up. Full benchmarks at
                <a href="https://ctgt.ai/benchmarks"
                  >https://ctgt.ai/benchmarks</a
                >.
              </p>
              <p>
                Most startups in this space are observability tools that tell
                you only after the model failed. Or they are RAG pipelines that
                stuff context into the window. Mentat is an infrastructure layer
                that modifies the model's processing during inference. We fix
                the reasoning, not just the context. For example, that’s how our
                system was able to enforce that if A is SE of B, then B is NW of
                A.
              </p>
              <p>
                We believe that our policy engine is a superior control
                mechanism to RAG or prompting. If you’re frustrated with current
                guardrails, we’d love it if you would stress-test our API!
              </p>
              <p>
                API: Our endpoint is drop-in compatible with OpenAI’s
                /v1/chat/completions:
                <a
                  href="https://docs.ctgt.ai/api-reference/endpoint/chat-completions"
                  >https://docs.ctgt.ai/api-reference/endpoint/chat-completions</a
                >
              </p>
              <p>
                Playground: We’ve built an "Arena" view to run side-by-side
                comparisons of an Ungoverned vs. Governed model to visualize the
                intervention delta in real-time. No signup is required:
                <a href="https://playground.ctgt.ai/"
                  >https://playground.ctgt.ai/</a
                >
              </p>
              <p>
                We’d love to hear your feedback on the approach and see what
                edge cases you can find that break standard models. We will be
                in the comments all day. All feedback welcome!
              </p>
            </div>
          </section>
        </section>
        <section id="46206531">
          <h3>
            <a class="item" href="https://bruno-simon.com/"
              >Handsdown one of the coolest 3D websites</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 16:06:58</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46206531"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46205661">
          <h3>
            <a
              class="item"
              href="https://repebble.com/blog/meet-pebble-index-01-external-memory-for-your-brain"
              >New Pebble Device</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 15:03:09</span
              ><span class="points-container"
                >Points: <span class="points">198</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46205661"
                  >Comments</a
                ><span class="descendants">: 202</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46205632">
          <h3>
            <a
              class="item"
              href="https://dosaygo-studio.github.io/hn-front-page-2035/news"
              >Show HN: Gemini Pro 3 hallucinates the HN front page 10 years
              from now</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 15:00:38</span
              ><span class="points-container"
                >Points: <span class="points">378</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46205632"
                  >Comments</a
                ><span class="descendants">: 178</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46205519">
          <h3>
            <a class="item" href="https://github.com/KaijuEngine/kaiju"
              >Kaiju – General purpose 3D/2D game engine in Go and Vulkan with
              built in editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 14:51:46</span
              ><span class="points-container"
                >Points: <span class="points">77</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46205519"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46205461">
          <h3>
            <a
              class="item"
              href="https://www.corsix.org/content/my-favourite-small-hash-table"
              >My favourite small hash table</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 14:47:20</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46205461"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46205437">
          <h3>
            <a class="item" href="https://mistral.ai/news/devstral-2-vibe-cli"
              >Mistral Releases Devstral 2 (72.2% SWE-Bench Verified) and Vibe
              CLI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 14:45:01</span
              ><span class="points-container"
                >Points: <span class="points">198</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46205437"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46204853">
          <h3>
            <a
              class="item"
              href="https://www.newyorker.com/magazine/2025/12/15/oliver-sacks-put-himself-into-his-case-studies-what-was-the-cost"
              >Oliver Sacks Put Himself into His Case Studies. What Was the
              Cost?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 13:45:01</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46204853"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46203986">
          <h3>
            <a
              class="item"
              href="https://www.tbray.org/ongoing/When/202x/2025/12/07/Thin-Spots-In-the-AI-Bubble"
              >After the Bubble</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 12:02:02</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46203986"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46203611">
          <h3>
            <a
              class="item"
              href="https://retroscience.net/brents-c-programming-rules.html"
              >Brent's Encapsulated C Programming Rules (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 11:16:10</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46203611"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46203581">
          <h3>
            <a class="item" href="https://algodrill.io"
              >Show HN: AlgoDrill – Interactive drills to stop forgetting
              LeetCode patterns</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 11:09:06</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46203581"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
            <div class="text">
              <p>
                AlgoDrill turns NeetCode 150 and more into pattern-based drills:
                you rebuild the solution line by line with active recall, get
                first principles editorials that explain why each step exists,
                and everything is tagged by patterns like sliding window, two
                pointers, and DP so you can hammer the ones you keep forgetting.
                The goal is simple: turn familiar patterns into code you can
                write quickly and confidently in a real interview.
              </p>
              <p><a href="https://algodrill.io">https://algodrill.io</a></p>
              <p>
                Would love feedback on whether this drill-style approach feels
                like a real upgrade over just solving problems once, and what’s
                most confusing or missing when you first land on the site.
              </p>
            </div>
          </section>
        </section>
        <section id="46203499">
          <h3>
            <a
              class="item"
              href="https://retrogamecoders.com/zx-spectrum-next-on-the-internet-xberry-pi-esp01-and-pi-zero-upgrades/"
              >ZX Spectrum Next on the Internet: Xberry Pi ESP01 and Pi Zero
              Upgrades</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 10:52:58</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46203499"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46203138">
          <h3>
            <a
              class="item"
              href="https://www.segasaturnshiro.com/2025/11/27/the-joy-of-playing-grandia-on-sega-saturn/"
              >The Joy of Playing Grandia, on Sega Saturn</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 09:48:55</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46203138"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46202921">
          <h3>
            <a
              class="item"
              href="https://www.jorsys.org/archive/december_2025.html#newsitem_2025-12-09T07:42:19Z"
              >30 Year Anniversary of WarCraft II: Tides of Darkness</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 09:13:56</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46202921"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46199623">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2512.05117"
              >The universal weight subspace hypothesis</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 00:16:46</span
              ><span class="points-container"
                >Points: <span class="points">340</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46199623"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46199530">
          <h3>
            <a class="item" href="https://type.today/en/journal/spaces"
              >Manual: Spaces</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 00:07:42</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46199530"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46199411">
          <h3>
            <a
              class="item"
              href="https://www.grocerydive.com/news/kroger-ocado-close-automated-fulfillment-centers-robotics-grocery-ecommerce/805931/"
              >Kroger acknowledges that its bet on robotics went too far</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-08 @ 23:53:52</span
              ><span class="points-container"
                >Points: <span class="points">235</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46199411"
                  >Comments</a
                ><span class="descendants">: 266</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46198430">
          <h3>
            <a class="item" href="https://withdocket.com"
              >Show HN: I built a system for active note-taking in regular
              meetings like 1-1s</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-08 @ 22:21:26</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46198430"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
            <div class="text">
              <p>
                Over the years I've learned the value of active note taking in
                these meetings. Meaning: not minutes, not transcriptions or AI
                summaries, but <i>me</i> using my brain to actively pull out the
                key points in short form bullet-like notes, as the meeting is
                going on, as I'm talking and listening (and probably typing with
                one hand). This could be agenda points to cover, any interesting
                sidebars raised, insights gotten to in a discussion, actions
                agreed to (and a way to track whether they got done next time!).
              </p>
              <p>
                It's both useful just to track what's going on in all these
                different meetings week to week (at one point I was doing about
                a dozen 1-1s per week, and it just becomes impossible to hold it
                in RAM) but also really valuable over time when you can look
                back and see the full history of a particular meeting, what was
                discussed when, how themes and structure are changing, is the
                meetings effective, etc.
              </p>
              <p>
                Anyway, I've tried a bunch of different tools for taking these
                notes over the years. All the obvious ones you've probably used
                too. And I've always just been not <i>quite</i> satisfied with
                the experience. They work, obviously (it's just text based notes
                at the end of the day) but nothing is first-class for this
                usecase.
              </p>
              <p>
                So, I decided to build the tool I've always felt I want to use,
                specifically for regular 1-1s and other types of regular
                meetings. I've been using it myself and with friends for a while
                already now, and I think it's got to that point where I actually
                prefer to reach for it over other general purpose note taking
                tools now, and I want to share it more widely.
              </p>
              <p>
                There's a free tier so you can use it right away, in fact
                without even signing up.
              </p>
              <p>
                If you've also been wanting a better system to manage your notes
                for regular meetings, give it a go and let me know what you
                think!
              </p>
            </div>
          </section>
        </section>
        <section id="46196688">
          <h3>
            <a
              class="item"
              href="https://blog.jim-nielsen.com/2025/icons-in-menus/"
              >Icons in Menus Everywhere – Send Help</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-08 @ 19:44:00</span
              ><span class="points-container"
                >Points: <span class="points">750</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46196688"
                  >Comments</a
                ><span class="descendants">: 306</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46171703">
          <h3>
            <a class="item" href="https://lair.masot.net/gamma/"
              >The Gamma Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-06 @ 08:42:38</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46171703"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46151600">
          <h3>
            <a
              class="item"
              href="https://newsletter.semianalysis.com/p/aws-trainium3-deep-dive-a-potential"
              >AWS Trainium3 Deep Dive – A Potential Challenger Approaching</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-04 @ 19:19:05</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46151600"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46137596">
          <h3>
            <a class="item" href="https://www.arxiv.org/pdf/2511.10811"
              >Transformers know more than they can tell: Learning the Collatz
              sequence</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-03 @ 17:50:17</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46137596"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46124425">
          <h3>
            <a
              class="item"
              href="https://www.gilesthomas.com/2025/12/llm-from-scratch-28-training-a-base-model-from-scratch"
              >LLM from scratch, part 28 – training a base model from scratch on
              an RTX 3090</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-02 @ 18:17:48</span
              ><span class="points-container"
                >Points: <span class="points">353</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46124425"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46123307">
          <h3>
            <a
              class="item"
              href="https://www.futilitycloset.com/2025/10/10/velato/"
              >Velato</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-02 @ 16:55:29</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46123307"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46121105">
          <h3>
            <a
              class="item"
              href="https://airbus-seclab.github.io/qemu_blog/tcg_p1.html"
              >A deep dive into QEMU: The Tiny Code Generator (TCG), part 1
              (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-02 @ 13:42:43</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46121105"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46114440">
          <h3>
            <a
              class="item"
              href="https://stackchk.fail/blog/jxl_hashquine_writeup"
              >Constructing the Word's First JPEG XL MD5 Hash Quine</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-01 @ 22:44:15</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46114440"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46102311">
          <h3>
            <a class="item" href="https://github.com/ziggy42/epsilon"
              >Epsilon: A WASM virtual machine written in Go</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-01 @ 01:12:03</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46102311"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
