<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42455992">
          <h3>
            <a
              class="item"
              href="https://9to5mac.com/2024/12/18/apple-collaborates-with-nvidia-to-research-faster-llm-performance/"
              >Apple collaborates with Nvidia to research faster LLM
              performance</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 22:08:46</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42455992"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42455938">
          <h3>
            <a
              class="item"
              href="https://abcnews.go.com/Health/cdc-confirms-1st-case-severe-bird-flu-us/story?id=116908574"
              >CDC confirms first case of bird flu in US</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 22:02:40</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42455938"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42455372">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42455372"
              >Corvus Robotics (YC S18) is hiring a Head of Software to help
              inventory drones</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 21:20:03</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re the founders of Corvus Robotics. We’ve built the world’s
                first fully autonomous drones that help warehouses track
                inventory. No human pilots, no location stickers, no
                localization beacons, fully onboard real-time autonomy:
                <a href="https://www.youtube.com/watch?v=C-gO7dCocV8"
                  >https://www.youtube.com/watch?v=C-gO7dCocV8</a
                >
              </p>
              <p>
                We have product-market fit. Dozens of Global 2000-sized
                companies use our drones every day, across the US, to track
                millions of pieces of inventory. Our customers are expanding and
                growing quickly.
              </p>
              <p>
                You: - Experienced IC SWE, probably with GraphQL, Node,
                Postgres, React experience. - Have experience with, or at least
                curiosity in, WMS / supply chain software, and high ambition.
                Like, what does the ideal AI-first inventory tracking of the
                world’s physical economy look like in the future? - Obviously,
                you extensively use AI-enabled tools as a force multiplier.
              </p>
              <p>
                <a
                  href="https://blog.corvus-robotics.com/corvus-one-launch-and-series-a-funding"
                  >https://blog.corvus-robotics.com/corvus-one-launch-and-serie...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="42454934">
          <h3>
            <a
              class="item"
              href="https://news.northwestern.edu/stories/2024/12/what-is-metformins-secret-sauce/?fj=1"
              >What is metformin's secret sauce?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 20:43:22</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42454934"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42454929">
          <h3>
            <a
              class="item"
              href="https://horstmann.com/unblog/2024-12-11/index.html"
              >Java in the Small</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 20:42:54</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42454929"
                  >Comments</a
                ><span class="descendants">: 88</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42454723">
          <h3>
            <a
              class="item"
              href="https://sveltos.projectsveltos.io/k8sCleaner.html"
              >Show HN: K8s Cleaner – Roomba for Kubernetes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 20:27:41</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42454723"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm excited to share K8s Cleaner, a tool designed to help you
                clean up your Kubernetes clusters.
              </p>
              <p>
                As Kubernetes environments grow, they often accumulate unused
                resources, leading to confusion, waste, and clutter. K8s-cleaner
                simplifies the process of identifying and removing unnecessary
                components.
              </p>
              <p>
                The tool scans your Kubernetes clusters for unused or orphaned
                resources—including pods, services, ingresses, and secrets—and
                removes them safely. You can fully customize which resources to
                scan and delete, maintaining complete control over what stays
                and what goes.
              </p>
              <p>Getting Started:</p>
              <p>
                Visit
                <a href="https://sveltos.projectsveltos.io/k8sCleaner.html"
                  >https://sveltos.projectsveltos.io/k8sCleaner.html</a
                >
                and click the "Getting Started" button to try K8s-cleaner.
              </p>
              <p>Key Features:</p>
              <p>
                - Easy to Use: No complex setup or configuration
                required—perfect for developers and operators alike - Open
                Source: Modify the code to better fit your specific needs -
                Community Driven: We welcome your feedback, feature ideas, and
                bug reports to help improve K8s-cleaner for everyone
              </p>
              <p>
                I'm here to answer questions, address feedback, and discuss
                ideas for future improvements.
              </p>
              <p>
                Looking forward to your thoughts! And make sure your all you
                kubernetes clusters are sparkling clean for the holidays. :-)
              </p>
              <p>Simone</p>
            </div>
          </section>
        </section>
        <section id="42454586">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/health/2024/12/18/bird-flu-human-case-severe-louisiana/"
              >CDC confirms first severe human case of bird flu in U.S.</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 20:15:16</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42454586"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42454454">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/harvard-ai-training-dataset-openai-microsoft/"
              >Harvard Is Releasing a Free AI Training Dataset</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 20:05:17</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42454454"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42454405">
          <h3>
            <a class="item" href="https://www.historylink.org/File/5136"
              >Windshield pitting incidents in Washington reach fever pitch on
              April 15, 1954 (2003)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 20:01:18</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42454405"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42454359">
          <h3>
            <a class="item" href="https://github.com/pwr-Solaar/Solaar"
              >Solaar is a Linux manager for many Logitech keyboards, mice, and
              other devices</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 19:57:58</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42454359"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42454139">
          <h3>
            <a
              class="item"
              href="https://www.eqtylab.io/blog/verifiable-compute-press-release"
              >On-silicon real-time AI compute governance from Nvidia, Intel,
              EQTY Labs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 19:39:59</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42454139"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42453660">
          <h3>
            <a
              class="item"
              href="https://help.openai.com/en/articles/10193193-1-800-chatgpt-calling-and-messaging-chatgpt-with-your-phone"
              >1-800-ChatGPT</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 19:03:13</span
              ><span class="points-container"
                >Points: <span class="points">285</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42453660"
                  >Comments</a
                ><span class="descendants">: 246</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42453650">
          <h3>
            <a class="item" href="https://github.com/Puchaczov/Musoq"
              >Show HN: Musoq – Query Anything with SQL Syntax (Git, C#, CSV,
              Can DBC)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 19:02:56</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42453650"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                It allows you to query various things from niche ones like CAN
                DBC files, weird ones like C# code, interesting ones with Git
                querying to regular stuff like CSV, TSV and various others.
              </p>
              <p>
                I am quite a bit experimenting with various things so I'm
                hybridizing the engine with LLMs or doing other weird stuff that
                are more or less practical :-)
              </p>
              <p>
                I wanted also to share some recent developments in this little
                project as I hope it might be interesting to some of you.
              </p>
              <p>
                New Experimental Plugins: * <i>Git Plugin (Beta)</i>: I've been
                working on Git repository querying - managed to test it on the
                EF Core repo (16k commits) and it seems to work okay *
                <i>Roslyn Plugin (Beta)</i>: Added basic C# code analysis
                capabilities
              </p>
              <p>
                For the very first time: I've extended CROSS APPLY to use
                computed results as arguments! Now the operator can use values
                from the current row as inputs. Here's an example:
              </p>
              <p></p>
              <pre><code>  SELECT
    f.DirectoryName,
    f.FileName
  FROM #os.directories('/some/path', false) d
  CROSS APPLY #os.files(d.FullName, true) f
  WHERE d.Name IN ('Folder1', 'Folder2')
</code></pre>
              After another pack of fixes I'm finally able to query multiple git
              repositories AT ONCE!
              <p></p>
              <pre><code>  with ProjectsToAnalyze as (
    select
        dir2.FullName as FullName
    from #os.directories('D:\repos', false) dir1
    cross apply #os.directories(dir1.FullName, false) dir2
    where
        dir2.Name = '.git'
  )
  select
    c.Message,
    c.Author,
    c.CommittedWhen
  from ProjectsToAnalyze p cross apply #git.repository(p.FullName) r 
  cross apply r.Commits c
  where c.AuthorEmail = 'my-email@email.ok'
  order by c.CommittedWhen desc
</code></pre>
              Under the Hood: - Added a <i>Buckets</i> feature for memory
              management (currently just testing it with the Roslyn plugin)
              <p>- Moved to <i>.NET 8</i></p>
              <p>- Added <i>CROSS/OUTER APPLY</i> operators</p>
              <p>
                - Made some improvements to error messages and runtime behavior
              </p>
              <p>
                New piping features: I've been experimenting with piping
                capabilities: * <i>Image Analysis with LLMs</i>:
              </p>
              <p></p>
              <pre><code>  ./Musoq.exe image encode "image.jpg" | ./Musoq.exe run query "select s.Shop, s.ProductName, s.Price from ..."
</code></pre>
              * <i>Text Data Extraction</i>:
              <p></p>
              <pre><code>  Get-Content "ticket.txt" | ./Musoq.exe run query "select t.TicketNumber, t.CustomerName ... from #stdin.text('Ollama', 'llama3.1') t"
</code></pre>
              * <i>Data Source Combination</i>:
              <p></p>
              <pre><code>  { docker image ls; ./Musoq.exe separator; docker container ls } | ./Musoq.exe run query "..."
</code></pre>
              I'm working on comprehensive documentation: I encourage you
              especially to look at section "Practical Examples and
              Applications" and "Data Sources" where you can look at all the
              tables the tool currently provides. &lt;<a
                href="https://puchaczov.github.io/Musoq/"
                >https://puchaczov.github.io/Musoq/</a
              >&gt;
              <p>Other Changes:</p>
              <p>
                - Made some improvements to OS and Archive data sources (OS can
                now query metadata like EXIF)
              </p>
              <p>- Added a few fields to CAN DBC plugin</p>
              <p>- Command outputs can now be used as inputs for queries</p>
              <p>I'm hoping to:</p>
              <p>- Improve stability and add more tests</p>
              <p>- Flesh out the documentation</p>
              <p>- Work on package distribution (Scoop, Ubuntu packages)</p>
              <p>- Share some examples of source code querying with Roslyn</p>
              <p>Ideas for later:</p>
              <p>- WHERE robust analysis and optimizations</p>
              <p>- DISTINCT operator implementation</p>
              <p>- PROTOBUF schema support</p>
              <p>- Performance improvements</p>
              <p>- Query parallelization</p>
              <p>- Recursive CTEs</p>
              <p>- Subqueries</p>
              <p>I'd really appreciate any thoughts or feedback!</p>
              <p>
                The documentation section where I write a short analysis of EF
                Core with git plugin: &lt;<a
                  href="https://puchaczov.github.io/Musoq/practical-examples-and-applications/analysis-of-the-efcore-repository.html"
                  >https://puchaczov.github.io/Musoq/practical-examples-and-app...</a
                >&gt;
              </p>
            </div>
          </section>
        </section>
        <section id="42453341">
          <h3>
            <a class="item" href="https://github.com/features/copilot"
              >GitHub Copilot is now available for free</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 18:29:55</span
              ><span class="points-container"
                >Points: <span class="points">370</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42453341"
                  >Comments</a
                ><span class="descendants">: 176</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42452358">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/formally-modeling-dreidel-the-sequel/"
              >Formally Modeling Dreidel, the Sequel</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 17:05:24</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42452358"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42452285">
          <h3>
            <a class="item" href="https://github.com/Neoteroi/BlackSheep"
              >BlackSheep: Fast ASGI web framework for Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 16:58:03</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42452285"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42451707">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42451707"
              >Launch HN: Innate (YC F24) – Home robots as easy to program as AI
              agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 16:09:56</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42451707"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
            <div class="text">
              <a href="https://innate.bot">https://innate.bot</a>). We build
              general-purpose home robots that you can teach new tasks to simply
              by demonstrating them.
              <p>
                Our system combines a robotic platform (we call the first one
                Maurice) with an AI agent that understands the environment,
                plans actions, and executes them using skills you've taught it
                or programmed within our SDK.
              </p>
              <p>
                If you’ve been building AI agents powered by LLMs before, and in
                particular Claude Computer use, this is how we intend the
                experience of building on it to be, but acting on the real
                world!
              </p>
              <p>
                You can see Maurice serving a glass here (<a
                  href="https://bit.ly/innate-hn-vid-serving"
                  >https://bit.ly/innate-hn-vid-serving</a
                >). Here is another example (<a
                  href="https://bit.ly/innate-hn-vid-officer"
                  >https://bit.ly/innate-hn-vid-officer</a
                >) in which it was given a digital ability (through the SDK) to
                send a notification to your phone, to use when it sees someone
                in the house. In both these cases, the only work you have to do
                is spend 30mn per physical skill to collect data to train the
                arm, and a couple minutes to write a system prompt.
              </p>
              <p>
                You can read more about how it works, about the paradigm we’re
                creating and find our Discord in our documentation (<a
                  href="https://docs.innate.bot"
                  >https://docs.innate.bot</a
                >). We’ll be open-sourcing parts of the system there soon.
              </p>
              <p>
                We want to lower the barrier to entry to robotics. Programming
                robots is usually complicated, time-consuming, and limited to
                experts even with AI helping you write code. We think it should
                be easier.
              </p>
              <p>
                We’re coming from an AI for robotics and HCI background as
                researchers at Stanford, and we’ve worked on multiple hardware +
                agentic AI projects this past year, but this one was clearly the
                most surprising one.
              </p>
              <p>
                The first time we put GPT-4 in a body - after a couple tweaks -
                we were surprised at how well it worked. The robot started
                moving around, figuring out when to use a tiny gripper, and we
                had only written 40 lines of python on a tiny RC car with an
                arm. We decided to combine that with recent advancements in
                robot imitation learning such as ALOHA to make the arm quickly
                teachable to do any task.
              </p>
              <p>
                We think it should be simple to teach robots to do tasks for us.
                AI agents offer a completely new paradigm for this, easy enough
                to help many non-roboticists start in the field, but still
                expandable enough to make a robot able to do very complex tasks.
              </p>
              <p>
                The part of it that excites us most is that for every builder
                teaching their robot to perform a task, every other robot learns
                faster and better. We believe that by spreading our platforms as
                much as possible, we could crowdsource massive and diverse
                datasets to make robotics foundations models that everyone
                contributes to.
              </p>
              <p>
                Under the hood, our brain (running in the cloud) uses 9
                different models and runs in the cloud. A YOLO, a SAM, and 7
                VLMs, from OpenAI, Google, Anthropic, and most importantly a
                couple Llamas running on groq to make the system think and act
                faster. Each model has a responsibility. Together, they act as
                if it was only one model with ability to navigate, talk,
                memorize and activate skills. As a bonus, since these models
                keep getting better and smaller, every new release gets our
                robots smarter and faster!
              </p>
              <p>
                Our first robot Maurice is 25cm-high, has a 5DoF arm, a Jetson
                Orin Nano onboard, and comes equipped with our software
                installed and a mobile app to control it. Our first batch of
                users wants to teach it to clean floors, tidy up after kids,
                wake them up in the morning, play with them, or be a
                professional assistant connected to emails and socials. You can
                go wild quickly!
              </p>
              <p>
                We’re making a small batch available for HackerNews at $2,000
                each for early builders who want to experiment, with $50 free of
                agent per month for a year. You can book one on our website with
                a (refundable) deposit if you’re in the US. These units will
                start shipping in March - the first 10 were booked already for
                February.
              </p>
              <p>
                We’d love your thoughts, experiences, and critiques. If you have
                ideas on what you’d use a home robot for, or feedback on how to
                make these systems more accessible, we’re hanging around for the
                coming hours in the comments. Let us know what you think!
              </p>
            </div>
          </section>
        </section>
        <section id="42450950">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2412.10270"
              >Cultural Evolution of Cooperation Among LLM Agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 15:00:52</span
              ><span class="points-container"
                >Points: <span class="points">194</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42450950"
                  >Comments</a
                ><span class="descendants">: 95</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42450413">
          <h3>
            <a
              class="item"
              href="https://www.uscis.gov/newsroom/news-releases/dhs-strengthens-h-1b-program-allowing-us-employers-to-more-quickly-fill-critical-jobs"
              >Updates to H-1B</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 13:54:05</span
              ><span class="points-container"
                >Points: <span class="points">198</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42450413"
                  >Comments</a
                ><span class="descendants">: 546</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42449602">
          <h3>
            <a
              class="item"
              href="https://www.cell.com/neuron/abstract/S0896-6273(24)00808-0?_returnURL=https%3A%2F%2Flinkinghub.elsevier.com%2Fretrieve%2Fpii%2FS0896627324008080%3Fshowall%3Dtrue"
              >The unbearable slowness of being: Why do we live at 10 bits/s?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 11:14:09</span
              ><span class="points-container"
                >Points: <span class="points">223</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42449602"
                  >Comments</a
                ><span class="descendants">: 260</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42448939">
          <h3>
            <a
              class="item"
              href="https://archaeologymag.com/2024/12/oldest-evidence-of-christianity-north-of-the-alps/"
              >Silver amulet is the oldest evidence of Christianity north of the
              Alps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 08:31:12</span
              ><span class="points-container"
                >Points: <span class="points">238</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42448939"
                  >Comments</a
                ><span class="descendants">: 210</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42446846">
          <h3>
            <a
              class="item"
              href="https://byroot.github.io/ruby/json/2024/12/15/optimizing-ruby-json-part-1.html"
              >Optimizing Ruby's JSON, Part 1</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-18 @ 00:08:52</span
              ><span class="points-container"
                >Points: <span class="points">228</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42446846"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42443737">
          <h3>
            <a
              class="item"
              href="https://www.cambridge.org/core/journals/antiquity/article/darker-angels-of-our-nature-early-bronze-age-butchered-human-remains-from-charterhouse-warren-somerset-uk/93EBB135C857C7B7992FC80A4ED927AF"
              >Early Bronze Age Butchered Human Remains from Charterhouse
              Warren, Somerset, UK</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-17 @ 18:18:52</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42443737"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42443229">
          <h3><a class="item" href="https://ciechanow.ski/moon/">Moon</a></h3>
          <section>
            <h4>
              <span>2024-12-17 @ 17:26:26</span
              ><span class="points-container"
                >Points: <span class="points">2789</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42443229"
                  >Comments</a
                ><span class="descendants">: 233</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42442354">
          <h3>
            <a
              class="item"
              href="https://increase.com/articles/iso-8583-the-language-of-credit-cards"
              >ISO 8583: The language of credit cards</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-17 @ 15:53:52</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42442354"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42435267">
          <h3>
            <a
              class="item"
              href="https://bento.cdn.pbs.org/hostedbento-prod/filer_public/Images%20of%20the%20Past/TheCusterWolf/USDA-NewsRelease.pdf"
              >"The Custer Wolf is Dead." (1921) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-16 @ 20:49:30</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42435267"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42435254">
          <h3>
            <a class="item" href="https://dkcproject.ocremix.org/index.html"
              >Kong in Concert (2004)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-16 @ 20:48:25</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42435254"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42434331">
          <h3>
            <a
              class="item"
              href="https://dontvacuum.me/rocketflashrecovery/index.html"
              >Crashing rockets and recovering data from damaged flash chips</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-16 @ 19:20:49</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42434331"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42432374">
          <h3>
            <a
              class="item"
              href="https://abishekmuthian.com/apple-watch-with-android/"
              >Apple Watch with Android</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-16 @ 16:15:43</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42432374"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42428256">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/12/12/science/oldest-human-genomes-lrj-neanderthals.html"
              >Oldest human genomes reveal how a small group burst out of
              Africa</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-12-16 @ 05:41:56</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42428256"
                  >Comments</a
                ><span class="descendants">: 80</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
