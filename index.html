<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41302445">
          <h3>
            <a
              class="item"
              href="https://blog.simplejustice.us/2024/08/17/2d-circuit-holds-lawfully-possessed-gun-does-not-constitute-probable-cause/"
              >2d Circuit Holds Lawfully Possessed Gun Does Not Constitute
              Probable Cause</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 18:11:51</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41302445"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41302350">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/lago/jobs/Y4jNcwj-head-of-marketing"
              >Lago (OSS Usage Based Billing) Is Hiring a Head of Product
              Marketing (SF)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 18:02:02</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41302103">
          <h3>
            <a
              class="item"
              href="https://www.sciencedirect.com/science/article/pii/S1353829224001564"
              >Higher ultraviolet light exposure is associated with lower
              mortality</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 17:36:58</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41302103"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41302068">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/business/article/2024/aug/20/spacecraft-explodes-during-launch-test-at-uks-new-spaceport-in-shetland"
              >Rocket explodes during testing at UK's new spaceport in
              Shetland</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 17:32:22</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41302068"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41301673">
          <h3>
            <a class="item" href="https://openai.com/index/gpt-4o-fine-tuning/"
              >Fine-tuning now available for GPT-4o</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 16:50:52</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41301673"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41301639">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=s--2X0kwe4Y"
              >Roc Lang – Elm but for everywhere [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 16:46:57</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41301639"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41301612">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2024/8/19/24221884/google-photos-magic-editor-ai-reimagine"
              >The AI photo editing era is here, and it's every person for
              themselves</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 16:43:52</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41301612"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41301572">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=obX2WdINsZo"
              >The YouTube like button glows when you say "smash that like
              button" [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 16:38:59</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41301572"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41301463">
          <h3>
            <a
              class="item"
              href="https://www.okmog.de/index.php/training/articles/can-digital-emulations-ever-be-as-good-as-analog-hardware"
              >Can Digital Emulations (Plugins) Ever Be as Good as Analog
              Hardware?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 16:25:26</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41301463"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41301448">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41301448"
              >Launch HN: MinusX (YC S24) – AI assistant for data tools like
              Jupyter/Metabase</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 16:24:02</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41301448"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
            <div class="text">
              <a href="https://minusx.ai">https://minusx.ai</a>), a data science
              assistant for Jupyter and Metabase. MinusX is a Chrome extension
              (<a href="https://minusx.ai/chrome-extension"
                >https://minusx.ai/chrome-extension</a
              >) that adds an AI sidechat to your analytics apps. Given an
              instruction, our agent operates your app (by clicking and typing,
              just like you would) to analyze data and answer queries. Broadly,
              you can do 3 types of things: ask for hypotheses and explore data,
              extend existing notebooks/dashboards, or select a region and ask
              questions. There's a simple video walkthrough here:
              <a href="https://www.youtube.com/watch?v=BbHPyX2lJGI"
                >https://www.youtube.com/watch?v=BbHPyX2lJGI</a
              >. The core idea is to "upgrade" existing tools, where people
              already do most of their data work, rather than building a new
              platform.
              <p>
                I (Vivek) spent 6 years working in various parts of the data
                stack, from data analysis at a 1000+ person ride hailing company
                to research at comma.ai, where I also handled most of the
                metrics and dashboarding infrastructure. The problems with data,
                surprisingly, were pretty much the same. Developers and product
                managers just want answers, or want to set up a quick view of
                some metric they care about. They often don't know which table
                contains what information, or what specific secret filters need
                to be kept in mind to get clean data. At large companies,
                analysts/scientists take care of most of these requests over a
                thousand back-and-forths. In small companies, most data projects
                end up being one-off efforts, and many die midway.
              </p>
              <p>
                I've tried every new shiny analytics app out there and none of
                them fully solve this core issue. New tools also come with a
                massive cost: you have to convince everyone around you to move,
                change all your workflows and hope the new tool has all features
                your trusty old one did. Most people currently go to ChatGPT
                with barely any real background context, and admonish the model
                till it sputters some useful code, SQL or hypothesis.This is the
                kind of user we're trying to help.
              </p>
              <p>
                The philosophy of MinusX mirrors that of comma. Just as comma is
                working on "an AI upgrade for your car", we want to retrofit
                analytics software with abilities that LLMs have begun to
                unlock. We also get a kick out of the fact that we use the same
                APIs humans use (clicking and typing), so we don't really need
                "permission" from any analytics app (just like comma.ai does not
                need permission from Mr Toyota Corolla) :)
              </p>
              <p>
                How it works: Given an instruction, the MinusX chrome extension
                first constructs a simplified representation of the host
                application's state using the DOM, and a bunch of application
                specific cues. We also have a set of (currently) predefined
                actions (eg: clicking and typing) that the agent can use to
                interact with the host application. Any "complex action" can be
                described as a combination of these action-primitives. We send
                this entire context, the instruction and the actions to an LLM.
                The LLM responds with a sequence of actions which are executed
                and the revised state is computed and sent back to the LLM. This
                loop terminates when the LLM evaluates that the desired goals
                are met. Our architecture allows users to extend the
                capabilities of the agent by specifying new actions as
                combinations of the action-primitives. We're working on enabling
                users to do this through the extension itself.
              </p>
              <p>
                "Retrofitting" is a weird concept for software, and we've found
                that it takes a while for people to grasp what this actually
                implies. We think, with AI, it will be more of a thing. Most
                software we use will be "upgraded" and not always by the people
                making the original software.
              </p>
              <p>
                We ourselves are focused on data analytics because we've worked
                in and around data science / data analysis / data engineering
                all our careers - working at startups, Google, Meta, etc - and
                understand it decently well. But since "retrofitting" can be
                just as useful for a bunch of other field-specific software,
                we're going to open-source the entire extension and associated
                plumbing in the near future.
              </p>
              <p>
                Also, let's be real - a sequence of function calls rammed
                through a decision tree does not make any for-loop "agentic".
                The reality is that a large amount of in-the-loop data needed
                for tasks such as ours does not exist yet! Getting this data
                flywheel running is a very exciting axis as well.
              </p>
              <p>
                The product is currently free to use. In the future, we'll
                probably charge a monthly subscription fee, and support local
                models / bring-your-own-keys. But we're still working that out.
              </p>
              <p>
                We'd be super stoked for you to try out MinusX! You can find the
                extension here:
                <a href="https://minusx.ai/chrome-extension"
                  >https://minusx.ai/chrome-extension</a
                >. We've also created a playground with data, for both Jupyter
                and Metabase, so once the extension is installed you can take it
                for a spin:
                <a href="https://minusx.ai/playground"
                  >https://minusx.ai/playground</a
                >
              </p>
              <p>
                We'd love to hear what you think about the idea, and anything
                else you'd like to share! Suggestions on which tools to support
                next are most welcome :)
              </p>
            </div>
          </section>
        </section>
        <section id="41301447">
          <h3>
            <a
              class="item"
              href="https://www.economist.com/science-and-technology/2024/08/12/exposure-to-the-suns-uv-radiation-may-be-good-for-you"
              >Exposure to the Sun's UV radiation may be good for you</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 16:23:56</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41301447"
                  >Comments</a
                ><span class="descendants">: 107</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41300368">
          <h3>
            <a
              class="item"
              href="https://zarar.dev/anatomy-of-a-mental-breakdown/"
              >The anatomy of a 2AM mental breakdown</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 14:25:03</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41300368"
                  >Comments</a
                ><span class="descendants">: 164</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41300111">
          <h3>
            <a
              class="item"
              href="https://jakevdp.github.io/blog/2018/09/13/waiting-time-paradox/"
              >Waiting Time Paradox or Why Is My Bus Always Late? (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 13:55:08</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41300111"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41300071">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/compression-algorithms"
              >Nasir Ahmed's digital-compression breakthrough helped make
              JPEGs/MPEGs possible</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 13:52:21</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41300071"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41299594">
          <h3>
            <a class="item" href="https://sudoku.dotslashdan.com/"
              >Show HN: Visual Sudoku Solver in the Browser (With OpenCV and
              TensorFlow)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 12:49:15</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41299594"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text">
              <p>
                I recently wanted to learn a bit about computer vision.
                Initially, I wanted to build something which could solve a
                jigsaw puzzle, but figured I should start with something (much)
                simpler, so I've built this instead.
              </p>
              <p>
                This is a visual Sudoku solver which runs in the browser. It
                works by using OpenCV to identify and process the Sudoku grid,
                passing this to a simple ML model to identify the digits, and
                then solving the puzzle with a backtracking algorithm. The ML
                model was trained on the TMNIST data set using a model built
                with Keras, also a completely new area to me.
              </p>
              <p>
                It's far from perfect, and doesn't like non perfectly lit or
                overly warped puzzles, but the main goal here was learning,
                which I did, a lot.
              </p>
              <p>
                As this was primarily a learning project, I've tried to document
                my approach as much as possible, which can be found in this
                Python notebook:
              </p>
              <p>
                <a
                  href="https://github.com/Taiters/sudoku-solver/blob/main/notebooks/explore.ipynb"
                  >https://github.com/Taiters/sudoku-solver/blob/main/notebooks...</a
                >
              </p>
              <p>
                I used Python while exploring OpenCV and training the models
                etc, and eventually ported this over to web (OpenCV.js +
                Tensorflow.js) to get something I could actually share with
                people.
              </p>
              <p>
                Feel free to have a dig around the source or play around with
                the solver!
              </p>
              <p>
                Github:
                <a href="https://github.com/Taiters/sudoku-solver"
                  >https://github.com/Taiters/sudoku-solver</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41299211">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=gwf5mAlI7Ug"
              >1953 US Navy training film on mechanical computers [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 12:02:00</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41299211"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41299148">
          <h3>
            <a class="item" href="https://github.com/ankane/transformers-ruby"
              >Transformers for Ruby</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 11:54:07</span
              ><span class="points-container"
                >Points: <span class="points">200</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41299148"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41298899">
          <h3>
            <a
              class="item"
              href="https://notes.eatonphil.com/2024-08-20-deterministic-simulation-testing.html"
              >What's the big deal about Deterministic Simulation Testing?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 11:16:47</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41298899"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41298794">
          <h3>
            <a class="item" href="https://maxschmitt.me/posts/toasts-bad-ux"
              >Toasts Are Bad UX</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 10:57:27</span
              ><span class="points-container"
                >Points: <span class="points">312</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41298794"
                  >Comments</a
                ><span class="descendants">: 228</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41297609">
          <h3>
            <a class="item" href="https://pragtical.dev/"
              >Pragtical: Practical and pragmatic code editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 07:15:34</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41297609"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41296481">
          <h3>
            <a
              class="item"
              href="https://eric-fritz.com/articles/sourcegraph-went-dark/"
              >Sourcegraph went dark</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-20 @ 03:30:27</span
              ><span class="points-container"
                >Points: <span class="points">324</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41296481"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41294202">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-08-rare-species-area-years-arizona.html"
              >'Rare species' not seen in the area for 50 years spotted on
              Arizona trail camera</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-19 @ 20:10:48</span
              ><span class="points-container"
                >Points: <span class="points">165</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41294202"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41293929">
          <h3>
            <a
              class="item"
              href="https://www.instructables.com/Lenticular-Clock/"
              >Lenticular Clock</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-19 @ 19:32:02</span
              ><span class="points-container"
                >Points: <span class="points">176</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41293929"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41291700">
          <h3>
            <a class="item" href="https://github.com/srcbookdev/srcbook"
              >Show HN: Srcbook – A TypeScript notebook for rapid prototyping</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-19 @ 15:09:56</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41291700"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
            <div class="text">
              <p>Key features:</p>
              <p>- Full npm ecosystem access</p>
              <p>
                - AI-assisted coding (OpenAI, Anthropic, or local models), it
                can iterate on the cells for you with a code diff UX that you
                accept/reject for a given code cell, generate entire Srcbooks,
                fix compilation issues, etc…
              </p>
              <p>
                - Exports to valid markdown for easy sharing and version control
              </p>
              <p>Try it now: `npx srcbook start`</p>
              <p>
                Examples Srcbooks to explore:
                <a href="https://hub.srcbook.com">https://hub.srcbook.com</a>
              </p>
              <p>
                We built this because we needed a Jupyter-like environment for
                TypeScript, we hope others like it as much as we do! Feedback
                and contributions are super appreciated.
              </p>
              <p>(edit: formatting)</p>
            </div>
          </section>
        </section>
        <section id="41282798">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2408.07710"
              >Uniqueness Bias: Why It Matters, How to Curb It</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-18 @ 15:06:01</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41282798"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41282212">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/books/article/2024/aug/18/i-wag-therefore-i-am-the-philosophy-of-dogs"
              >I wag, therefore I am: the philosophy of dogs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-18 @ 13:18:04</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41282212"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41282157">
          <h3>
            <a class="item" href="https://github.com/TimoKats/mdrss"
              >Convert Markdown files to RSS feed</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-18 @ 13:09:53</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41282157"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41262739">
          <h3>
            <a
              class="item"
              href="https://blog.scudata.com/a-programming-language-coding-in-a-grid/"
              >SPL: A programming language coding in a grid</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-16 @ 02:59:24</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41262739"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41262010">
          <h3>
            <a
              class="item"
              href="https://teresaelsey.medium.com/when-nothing-ever-goes-out-of-print-maintaining-backlist-ebooks-fcd63e680667"
              >When Nothing Ever Goes Out of Print: Maintaining Backlist Ebooks
              (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-16 @ 00:45:19</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41262010"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41253850">
          <h3>
            <a
              class="item"
              href="https://signalsmith-audio.co.uk/writing/2021/lets-write-a-reverb/"
              >Let's Write a Reverb (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-15 @ 07:37:54</span
              ><span class="points-container"
                >Points: <span class="points">340</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41253850"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
