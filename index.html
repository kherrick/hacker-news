<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43758999">
          <h3>
            <a class="item" href="https://mcr21.org.uk/"
              >Welcome to our website for the 1963 BBC MCR21 OB Van</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 04:07:04</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43758999"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43758965">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/arts-culture/books/world-war-zoos-review-of-bombs-and-beasts-a037c4b6"
              >'World War Zoos' Review: Of Bombs and Beasts</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 03:57:47</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43758965"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43757916">
          <h3>
            <a
              class="item"
              href="https://github.com/stefanrodrigues2/Prolog-Adventure-game"
              >Prolog Adventure Game</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-22 @ 00:25:12</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43757916"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43757341">
          <h3>
            <a
              class="item"
              href="https://github.com/maurymarkowitz/101-BASIC-Computer-Games"
              >101 BASIC Computer Games</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 22:47:38</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43757341"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43757037">
          <h3>
            <a class="item" href="https://github.com/ericjenott/Evertop"
              >Evertop: E-ink IBM XT clone with 100+ hours of battery life</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 22:07:49</span
              ><span class="points-container"
                >Points: <span class="points">287</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43757037"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43756926">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2503.04389"
              >Pydrofoil: Accelerating Sail-based instruction set simulators</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 21:52:29</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43756926"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43756871">
          <h3>
            <a class="item" href="https://mcyoung.xyz/2025/04/21/go-arenas/"
              >Cheating the Reaper in Go</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 21:46:32</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43756871"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43756723">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2504.05001"
              >Ultra-precision formation flying demonstration for space-based
              interferometry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 21:31:40</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43756723"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43756417">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/cekura-2/jobs/xaoCPco-founding-engineer"
              >Cekura (Formerly Vocera) (YC F24) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 21:00:53</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43756309">
          <h3>
            <a class="item" href="https://www.epic.com/visiting/"
              >Visiting Us</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 20:49:20</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43756309"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43755321">
          <h3>
            <a class="item" href="https://windsurf.com/blog/pricing-v2"
              >An update to our pricing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 19:05:23</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43755321"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43755286">
          <h3>
            <a
              class="item"
              href="https://interfacinglinux.com/2025/04/18/magewell-eco-m-2-hdmi-capture-card/"
              >A M.2 HDMI capture card</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 19:01:55</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43755286"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43755017">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-04-astronomers-lone-black-hole.html"
              >Astronomers confirm the existence of a lone black hole</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 18:36:23</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43755017"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43754953">
          <h3>
            <a
              class="item"
              href="https://blog.infected.systems/posts/2025-04-21-this-blog-is-hosted-on-a-nintendo-wii/"
              >Blog hosted on a Nintendo Wii</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 18:29:04</span
              ><span class="points-container"
                >Points: <span class="points">410</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43754953"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43754620">
          <h3>
            <a class="item" href="https://github.com/codingmoh/open-codex"
              >Show HN: Open Codex – OpenAI Codex CLI with open-source LLMs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 17:57:03</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43754620"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’ve built Open Codex, a fully local, open-source alternative to
                OpenAI’s Codex CLI.
              </p>
              <p>
                My initial plan was to fork their project and extend it. I even
                started doing that. But it turned out their code has several
                leaky abstractions, which made it hard to override core behavior
                cleanly. Shortly after, OpenAI introduced breaking changes.
                Maintaining my customizations on top became increasingly
                difficult.
              </p>
              <p>
                So I rewrote the whole thing from scratch using Python. My
                version is designed to support local LLMs.
              </p>
              <p>
                Right now, it only works with phi-4-mini (GGUF) via
                lmstudio-community/Phi-4-mini-instruct-GGUF, but I plan to
                support more models. Everything is structured to be extendable.
              </p>
              <p>
                At the moment I only support single-shot mode, but I intend to
                add interactive (chat mode), function calling, and more.
              </p>
              <p>You can install it using Homebrew:</p>
              <p></p>
              <pre><code>   brew tap codingmoh/open-codex
   brew install open-codex

</code></pre>
              It's also published on PyPI:
              <p></p>
              <pre><code>   pip install open-codex

</code></pre>
              Source:
              <a href="https://github.com/codingmoh/open-codex"
                >https://github.com/codingmoh/open-codex</a
              >
            </div>
          </section>
        </section>
        <section id="43754274">
          <h3>
            <a
              class="item"
              href="https://www.ftc.gov/news-events/news/press-releases/2025/04/ftc-takes-action-against-uber-deceptive-billing-cancellation-practices"
              >FTC takes action against Uber for deceptive billing and
              cancellation practices</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 17:22:55</span
              ><span class="points-container"
                >Points: <span class="points">353</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43754274"
                  >Comments</a
                ><span class="descendants">: 202</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43754124">
          <h3>
            <a class="item" href="https://github.com/nari-labs/dia"
              >Show HN: Dia, an open-weights TTS model for generating realistic
              dialogue</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 17:07:07</span
              ><span class="points-container"
                >Points: <span class="points">403</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43754124"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43753651">
          <h3>
            <a
              class="item"
              href="https://bsky.social/about/blog/04-21-2025-verification"
              >A new form of verification on Bluesky</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 16:16:51</span
              ><span class="points-container"
                >Points: <span class="points">267</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43753651"
                  >Comments</a
                ><span class="descendants">: 177</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43752492">
          <h3>
            <a
              class="item"
              href="https://matthewsinclair.com/blog/0178-why-llm-powered-programming-is-more-mech-suit-than-artificial-human"
              >LLM-powered tools amplify developer capabilities rather than
              replacing them</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 14:36:14</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43752492"
                  >Comments</a
                ><span class="descendants">: 148</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43752262">
          <h3>
            <a
              class="item"
              href="https://simonwillison.net/2025/Apr/21/ai-assisted-search/"
              >AI assisted search-based research works now</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 14:15:17</span
              ><span class="points-container"
                >Points: <span class="points">171</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43752262"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43752176">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43752176"
              >Launch HN: Magic Patterns (YC W23) – AI Design and Prototyping
              for Product Teams</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 14:07:03</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43752176"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.magicpatterns.com"
                >https://www.magicpatterns.com</a
              >), an AI prototyping tool that helps PMs and designers create
              functional, interactive designs and websites. There’s a demo video
              at
              <a href="https://www.youtube.com/watch?v=SK8C_tQBwIU"
                >https://www.youtube.com/watch?v=SK8C_tQBwIU</a
              >, as well as video walkthroughs of specific examples at
              <a
                href="https://www.magicpatterns.com/docs/documentation/tutorials/video-tutorials"
                >https://www.magicpatterns.com/docs/documentation/tutorials/v...</a
              >
              <p>
                While other tools help with “AI-assisted coding,” we have been
                quietly focused on “AI-assisted designing.” With Magic Patterns
                you can visually communicate your idea, get hands on feedback
                from customers, and test new features.
              </p>
              <p>
                Teddy and I are best friends and former frontend engineers
                turned founders. We arrived at Magic Patterns after several
                pivots—always in the design tooling space, but different
                products that all struggled to get usage. We started working on
                Magic Patterns after an internal hackathon. Teddy built a UI
                library catalog and I messed around with GPT 3.5. We thought
                it’d be fun to combine the two: an AI component generator.
                Describe whatever you want, and get back a React component!
              </p>
              <p>
                That started to take off and we gained users, but it wasn’t
                developers using the tool. Instead, it was PMs, designers, and
                leadership who could finally communicate their ideas. They use
                it to test new ideas quickly, get feedback from customers, and
                improve communication with internal teams. Also, hobbyists (and
                programmers who aren’t designers) use us to create designs and
                UIs that they wouldn’t be able to otherwise.
              </p>
              <p>
                We use Sonnet 3.5 and 3.7, and leverage a fine-tuned model for
                fast-applying edits. The most challenging part is determining
                the most relevant context to feed to the LLM. We attempt to
                solve this with our click to update feature and by letting users
                define a brand preset, or default prompt.
              </p>
              <p>
                Unlike other tools in this space, we’re specifically focused on
                (1) product teams—we're realtime and collaborative; and (2)
                frontend only—we don't spin up a database or backend because we
                aren't solving "idea to fullstack app."
              </p>
              <p>
                A common workflow is a product manager building an interactive
                prototype and then passing it off to a designer for more polish
                or directly to engineers. Many teams are even skipping Figma
                entirely now, telling us that it feels like an unnecessary
                middleman. Teams are instead generating clickable prototypes,
                collaborating directly with stakeholders, and using that as the
                mockup.
              </p>
              <p>
                With Magic Patterns, you can: - Collaborate with your team on
                our infinite canvas; - Match your existing designs by creating
                reusable components directly; - Brainstorm features and flows.
                (The latter is what we use it for internally.)
              </p>
              <p>
                We started as a way to build small, custom components, but now
                people are one-shotting entire websites and hosting them with
                us, or building dashboards that they share internally or in
                customer demos. People have sold $10k/mo contracts with Magic
                Patterns designs!
              </p>
              <p>
                Small business owners—everyone from fishermen to driving
                instructors to hotel managers—are using us to build their
                websites and then hosting them with us. Example sites built by
                Magic Patterns include
                <a href="https://getdealflow.ai/">https://getdealflow.ai/</a>
                and <a href="https://joinringo.com/">https://joinringo.com/</a>.
                It’s amazing how people who couldn’t have done that before are
                now able to, and super gratifying to us to be empowering people
                in this way.
              </p>
              <p>
                You can get started with our docs here:
                <a
                  href="https://www.magicpatterns.com/docs/documentation/get-started/introduction"
                  >https://www.magicpatterns.com/docs/documentation/get-started...</a
                >, and you can try the actual product. Simply go to
                <a href="https://www.magicpatterns.com"
                  >https://www.magicpatterns.com</a
                >
                and prompt for any UI you want.
              </p>
              <p>
                Today no login is required, just click “Coming from Hackernews?”
                and you’ll get 5 messages free to try. Once you hit the limit,
                you’ll then be prompted to login. Plans start at $19/mo for
                another 100 messages a month (<a
                  href="https://www.magicpatterns.com/pricing"
                  >https://www.magicpatterns.com/pricing</a
                >).
              </p>
              <p>
                We’re stoked to be sharing with HN today and are open to all
                feedback!
              </p>
            </div>
          </section>
        </section>
        <section id="43751168">
          <h3>
            <a
              class="item"
              href="https://sam.elborai.me/articles/tabular-programming/"
              >Tabular Programming: A New Paradigm for Expressive Computing</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 12:26:16</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43751168"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43751076">
          <h3>
            <a
              class="item"
              href="https://herecomesthemoon.net/2025/04/pipelining/"
              >Pipelining might be my favorite programming language feature</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 12:16:16</span
              ><span class="points-container"
                >Points: <span class="points">288</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43751076"
                  >Comments</a
                ><span class="descendants">: 253</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43750535">
          <h3>
            <a
              class="item"
              href="https://philiplaine.com/posts/getting-forked-by-microsoft/"
              >Getting forked by Microsoft</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 11:05:44</span
              ><span class="points-container"
                >Points: <span class="points">1626</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43750535"
                  >Comments</a
                ><span class="descendants">: 862</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43749271">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/data-center-energy-consumption"
              >Reworking 30 lines of Linux code could cut power use by up to 30
              percent</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-21 @ 07:34:07</span
              ><span class="points-container"
                >Points: <span class="points">286</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43749271"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43746433">
          <h3>
            <a
              class="item"
              href="https://akselmo.dev/posts/how-i-use-kate-editor/"
              >How I use Kate editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-20 @ 20:50:07</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43746433"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43736172">
          <h3>
            <a
              class="item"
              href="https://statmodeling.stat.columbia.edu/2025/04/18/dumb-statistical-models-always-making-people-look-bad/"
              >Dumb statistical models, always making people look bad</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-19 @ 13:12:26</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43736172"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43736061">
          <h3>
            <a
              class="item"
              href="https://www.sciencedaily.com/releases/2025/04/250417145019.htm"
              >A new record for California's highest tree</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-19 @ 12:49:53</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43736061"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43735764">
          <h3>
            <a class="item" href="https://lwn.net/Articles/1016243/"
              >An Update on Pahole</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-19 @ 11:43:08</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43735764"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43733468">
          <h3>
            <a
              class="item"
              href="https://www.finestresullarte.info/en/travel/the-labyrinth-of-villa-pisani-in-stra-suggestions-of-d-annunzio-and-an-intricate-pathway"
              >The Labyrinth of Villa Pisani in Stra, an Intricate Pathway</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-19 @ 01:34:12</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43733468"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
