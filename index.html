<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39448021">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=Z3dSkkEr-wk"
              >YouTube's search function is atrocious now [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 22:49:47</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39448021"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39447947">
          <h3>
            <a
              class="item"
              href="https://enderman.ch/blog/the-windows-context-menu"
              >The Windows Context Menu – Is It a Lost Cause?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 22:41:24</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39447947"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39447041">
          <h3>
            <a class="item" href="https://sidekick.kagi.com/"
              >Kagi Sidekick (alpha)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 21:18:20</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39447041"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39446866">
          <h3>
            <a class="item" href="https://azure-enum.lolware.net/"
              >Show HN: Enumerate Office365/Azure Domains</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 21:02:58</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39446866"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39446853">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/spine-ai/jobs/Z1hz3BZ-lead-applied-ml-scientist"
              >Spine AI (YC S23) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 21:01:42</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39446814">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/02/12/science/bird-evolution-asteroid-dinosaurs.html"
              >An asteroid wiped out dinosaurs – did it help birds flourish?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 20:57:59</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39446814"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39446617">
          <h3>
            <a
              class="item"
              href="https://popey.com/blog/2024/02/exodus-bitcoin-wallet-490k-swindle/"
              >Exodus Bitcoin Wallet: $490k swindle</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 20:41:32</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39446617"
                  >Comments</a
                ><span class="descendants">: 65</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39446591">
          <h3>
            <a class="item" href="https://allrgb.com/kd-tree">RGB K-D Tree</a>
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 20:39:39</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39446591"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39446537">
          <h3>
            <a class="item" href="https://mitxela.com/projects/ledstud"
              >LED Matrix Earrings</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 20:34:12</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39446537"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39445997">
          <h3>
            <a
              class="item"
              href="https://www.livescience.com/space/cosmology/there-may-be-a-dark-mirror-universe-within-ours-where-atoms-failed-to-form-new-study-suggests"
              >Study suggests a 'dark mirror' universe within ours where atoms
              failed to form</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 19:48:03</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39445997"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39445713">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-02-saturn-largest-moon-uninhabitable.html"
              >Saturn's largest moon most likely uninhabitable</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 19:27:38</span
              ><span class="points-container"
                >Points: <span class="points">66</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39445713"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39444995">
          <h3>
            <a class="item" href="https://oxide.computer/blog/moores-scofflaws"
              >Moore's Scofflaws</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 18:36:15</span
              ><span class="points-container"
                >Points: <span class="points">86</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39444995"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39444674">
          <h3>
            <a
              class="item"
              href="http://jlouisramblings.blogspot.com/2010/12/response-to-erlang-overhyped-or.html"
              >A response to "Erlang – overhyped or underestimated" (2010)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 18:14:13</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39444674"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39444500">
          <h3>
            <a
              class="item"
              href="https://signal.org/blog/phone-number-privacy-usernames/"
              >Keep your phone number private with Signal usernames</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 18:01:05</span
              ><span class="points-container"
                >Points: <span class="points">799</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39444500"
                  >Comments</a
                ><span class="descendants">: 512</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39443972">
          <h3>
            <a
              class="item"
              href="https://blog.llamaindex.ai/introducing-llamacloud-and-llamaparse-af8cedf9006b"
              >LlamaCloud and LlamaParse</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 17:20:46</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39443972"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39443965">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=zduSFxRajkE"
              >Let's Build the GPT Tokenizer [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 17:20:30</span
              ><span class="points-container"
                >Points: <span class="points">293</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39443965"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39443679">
          <h3>
            <a
              class="item"
              href="http://databasearchitects.blogspot.com/2024/02/ssds-have-become-ridiculously-fast.html"
              >SSDs have become fast, except in the cloud</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 16:59:43</span
              ><span class="points-container"
                >Points: <span class="points">338</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39443679"
                  >Comments</a
                ><span class="descendants">: 249</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39442368">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39442368"
              >Launch HN: Dart (YC W22) – Project management with automatic
              report generation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 15:24:05</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39442368"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
            <div class="text">
              <a href="https://itsdart.com">https://itsdart.com</a>). Dart is a
              fully-featured project management tool that can automatically
              create reports, fill in task properties, generate subtasks, detect
              duplicate tasks, and more. Here’s a quick demo of some of the
              highlight features:
              <a href="https://youtu.be/CMsBAv9CCyU"
                >https://youtu.be/CMsBAv9CCyU</a
              >
              <p>
                Like many others we grew frustrated with the constant upkeep in
                creating and organizing tickets in Jira and other PM tools. We
                routinely wasted as much as seven hours a week on repetitive PM
                chores like cleaning up the backlog or drafting changelog
                updates. At Zack’s previous company he even built a system to
                try to automate some of this work. In conversations with other
                founders and engineers we learned that he was far from the only
                person doing this.
              </p>
              <p>
                We started Dart when we realized we could bring a new approach
                to this problem through techniques enabled by generative AI.
                There are of course a lot of project management tools out there,
                but none have the ability to automate most of the busywork
                without having to configure long sets of rules.
              </p>
              <p>
                For example, one of the most helpful functions is summarizing
                work that was accomplished over some time interval, by
                automatically creating a changelog update for it that can be
                pasted into company blogs or elsewhere. Another highly used
                feature is giving Dart a large task or PRD and generating a
                recommendation for how to break it up into more manageable
                subtasks.
              </p>
              <p>
                Over the last two years we’ve continued to build a broad set of
                PM functionality in Dart (task management, docs, roadmaps, etc.)
                along with what we hope is a neatly vertically integrated
                application of gen AI that adds value.
              </p>
              <p>
                Dart is built with Vue on the frontend, Django on the backend,
                and uses various gen AI models such as GPT-4. We embed almost
                all of the content that goes into the app for later retrieval
                and search. Over time we build up context for users, workspaces,
                working patterns, etc. and are able to provide this context to
                do situation specific few-shot prompting or RAG, depending on
                the situation. For better or worse we’ve implemented most of our
                LLM infrastructure internally and are largely calling OpenAI
                APIs directly.
              </p>
              <p>
                While Dart improves its recommendations as users work on more
                tasks, ultimately it’s not quite ready to replace your product
                manager. You’ll probably still need to evaluate if the
                recommendations make sense for your team, and make any
                adjustments before confirming them. By having a helpful
                companion offering suggestions as you go we’ve still found that
                this process ends up net saving time–about 12% of time spent in
                PM tools according to our users. You can think of it like a
                helpful tool for generating ideas as opposed to a product that
                will fully strategize and do all of your work for you (at least
                for now!).
              </p>
              <p>
                Our current users come from a wide range of backgrounds
                including other founders, developers, writers, small business
                owners, consultants, researchers, etc.
              </p>
              <p>
                You can try out Dart for free at
                <a href="https://app.itsdart.com/sign-up"
                  >https://app.itsdart.com/sign-up</a
                >. We’d really appreciate any and all feedback or ideas in the
                comments!
              </p>
            </div>
          </section>
        </section>
        <section id="39442344">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/d41586-024-00481-2"
              >Implants and other technologies that decode neural activity</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 15:22:15</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39442344"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39441677">
          <h3>
            <a class="item" href="https://github.com/hyperdiv/hyperdiv"
              >Show HN: Hyperdiv – Reactive, immediate-mode web UI framework for
              Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 14:23:50</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39441677"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm releasing Hyperdiv (<a href="https://hyperdiv.io"
                  >https://hyperdiv.io</a
                >), a framework for rapidly developing reactive browser UIs in
                Python, with immediate-mode syntax and using Shoelace (<a
                  href="https://shoelace.style"
                  >https://shoelace.style</a
                >) as its built-in component system.
              </p>
              <p>
                This short coding video will give you a good idea of what it is:
                <a href="https://www.youtube.com/watch?v=4XJKfxaqvGE"
                  >https://www.youtube.com/watch?v=4XJKfxaqvGE</a
                >
              </p>
              <p>
                I wrote a brief article about the motivation and approach:
                <a href="https://hyperdiv.io/intro.html"
                  >https://hyperdiv.io/intro.html</a
                >
              </p>
              <p>
                Hyperdiv doesn't aim to compete with serious full-stack
                frameworks. The core aim was to make it easy and fast to
                prototype apps and build UI-based tools. I was originally
                motivated by internal tools at work -- feeling the need to
                quickly put together UI-based tools to share with both technical
                and non-technical coworkers, without having to stand up and
                maintain a full internal stack.
              </p>
              <p>
                This is my first major open source release. I really appreciate
                your feedback and support. - Marius
              </p>
            </div>
          </section>
        </section>
        <section id="39440808">
          <h3>
            <a class="item" href="https://github.com/Speykious/cve-rs"
              >Cve-rs: Fast memory vulnerabilities, written in safe Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 13:17:01</span
              ><span class="points-container"
                >Points: <span class="points">239</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39440808"
                  >Comments</a
                ><span class="descendants">: 112</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39440179">
          <h3>
            <a class="item" href="https://danluu.com/simple-architectures/"
              >In Defense of Simple Architectures (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 11:50:34</span
              ><span class="points-container"
                >Points: <span class="points">499</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39440179"
                  >Comments</a
                ><span class="descendants">: 373</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39440025">
          <h3>
            <a
              class="item"
              href="https://wcedmisten.fyi/post/keyboard-shortcuts-userscripts/"
              >Adding keyboard shortcuts to a 24 year-old government website
              with userscripts</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 11:25:11</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39440025"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39439771">
          <h3>
            <a
              class="item"
              href="https://googlemapsmania.blogspot.com/2024/02/ai-your-home-on-street-view.html"
              >AI your home on street view</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 10:48:01</span
              ><span class="points-container"
                >Points: <span class="points">226</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39439771"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39439655">
          <h3>
            <a
              class="item"
              href="https://mary.codes/blog/programming/translating_openstreetmaps_to_HTML5_canvas_rust_wasm/"
              >Translating OpenStreetMap data to HTML5 Canvas with Rust and
              WebAssembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 10:28:01</span
              ><span class="points-container"
                >Points: <span class="points">303</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39439655"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39439505">
          <h3>
            <a class="item" href="https://samwho.dev/bloom-filters/"
              >A visual interactive guide to Bloom filters</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-20 @ 09:58:36</span
              ><span class="points-container"
                >Points: <span class="points">180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39439505"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39436095">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/arts-culture/inside-biggest-art-fraud-history-180983692/"
              >A decades-long art forgery scheme</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 23:26:51</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39436095"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39426569">
          <h3>
            <a
              class="item"
              href="https://www.daviddegner.com/blog/a-birds-eye-view/"
              >Capturing Avian Perspectives: Pigeon photography</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 05:46:31</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39426569"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39420056">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=DfYlLns0els"
              >Canned Air is Unexpectedly Supersonic [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 15:54:41</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39420056"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39418106">
          <h3>
            <a
              class="item"
              href="https://karthinks.com/software/fifteen-ways-to-use-embark/"
              >Ways to use Embark (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 11:07:40</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39418106"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
