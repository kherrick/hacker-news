<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45567770">
          <h3>
            <a class="item" href="https://sqliteonline.com/"
              >Show HN: SQLite Online – 11 years of solo development, 11K daily
              users</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 12:46:52</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45567770"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45567153">
          <h3>
            <a
              class="item"
              href="https://www.nobelprize.org/prizes/economic-sciences/2025/summary/"
              >The Sveriges Riksbank Prize in Economic Sciences in Memory of
              Alfred Nobel 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 11:23:20</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45567153"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566766">
          <h3>
            <a
              class="item"
              href="https://www.sjbaker.org/steve/omniv/matrices_can_be_your_friends.html"
              >Matrices can be your Friends</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 10:23:08</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566766"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566660">
          <h3>
            <a
              class="item"
              href="https://ednutting.com/2025/10/05/cheri-vs-oma.html"
              >Two Paths to Memory Safety: CHERI and OMA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 10:05:50</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566660"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566548">
          <h3>
            <a
              class="item"
              href="https://ikrima.dev/dev-notes/linux/linux-modern-tools/"
              >Modern Linux tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 09:44:28</span
              ><span class="points-container"
                >Points: <span class="points">129</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566548"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566532">
          <h3>
            <a class="item" href="https://github.com/pvonmoradi/gsay"
              >gsay: Fetch pronunciation of English vocabulary from Google</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 09:39:47</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566532"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566441">
          <h3>
            <a class="item" href="https://www.mptcp.dev/">MPTCP for Linux</a>
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 09:25:45</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566441"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566421">
          <h3>
            <a
              class="item"
              href="https://www.stavros.io/posts/switch-to-jujutsu-already-a-tutorial/"
              >Switch to Jujutsu Already: A Tutorial</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 09:22:33</span
              ><span class="points-container"
                >Points: <span class="points">71</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566421"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566253">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/business/2025/oct/13/lab-to-fab-are-promises-of-a-graphene-revolution-finally-coming-true"
              >Some graphene firms have reaped its potential but others are
              struggling</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 08:53:17</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566253"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566139">
          <h3>
            <a
              class="item"
              href="https://chezsoi.org/lucas/blog/spotlight-on-pdfly.html"
              >Spotlight on pdfly, the Swiss Army knife for PDF files</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 08:36:33</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566139"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45566123">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2510.03761"
              >LaTeXpOsEd: A Systematic Analysis of Information Leakage in
              Preprint Archives</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 08:33:34</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45566123"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45565646">
          <h3>
            <a class="item" href="https://http3-explained.haxx.se"
              >HTTP3 Explained</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-13 @ 07:15:28</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45565646"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45561672">
          <h3>
            <a class="item" href="https://xenodium.com/introducing-agent-shell"
              >Emacs agent-shell (powered by ACP)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 20:37:16</span
              ><span class="points-container"
                >Points: <span class="points">204</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45561672"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              <a href="https://xenodium.com/agent-shell-0-5-improvements"
                >https://xenodium.com/agent-shell-0-5-improvements</a
              >
            </div>
          </section>
        </section>
        <section id="45561428">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45561428"
              >Ask HN: What are you working on? (October 2025)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 20:09:14</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45561428"
                  >Comments</a
                ><span class="descendants">: 768</span></span
              >
            </h4>
            <div class="text">
              What are you working on? Any new ideas that you're thinking about?
            </div>
          </section>
        </section>
        <section id="45559857">
          <h3>
            <a
              class="item"
              href="https://github.com/chili-chips-ba/wireguard-fpga"
              >Wireguard FPGA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 17:12:00</span
              ><span class="points-container"
                >Points: <span class="points">588</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559857"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45559767">
          <h3>
            <a
              class="item"
              href="https://sam-cooper.medium.com/the-country-that-broke-kotlin-84bdd0afb237"
              >A years-long Turkish alphabet bug in the Kotlin compiler</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 17:02:09</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45559767"
                  >Comments</a
                ><span class="descendants">: 148</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45555727">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/three-ways-formally-verified-code-can-go-wrong-in/"
              >Three ways formally verified code can go wrong in practice</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-12 @ 06:17:52</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45555727"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45549392">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=45549392"
              >Show HN: Aidlab – Health Data for Devs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-11 @ 14:24:35</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45549392"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <p>
                Unlike health trackers with locked-down APIs, Aidlab ships with
                a free SDK [1] across 6+ platforms so you can just
                <i>pip install aidlabsdk</i> or
                <i>flutter pub add aidlab_sdk</i> or whatever platform (even
                Unity), and start streaming raw health data and events in real
                time with simple <i>didReceive*(timestamp, value)</i> callbacks.
              </p>
              <p>
                Currently, we are exposing 13 data types including raw ECG,
                cough/snoring, motion, raw respiration, skin temperature,
                bodyweight reps, body position, and 20 high-level stats like
                stress or readiness through the API.
              </p>
              <p>The most common questions I got are:</p>
              <p>1) "how is it better than my smartwatch?"</p>
              <p>2) "why we built it?"</p>
              <p>
                Chest-mounted wearables are considered the gold standard for
                physiological measurements. For example, whenever Apple
                validates their watch, they benchmark against chest straps [2],
                as some signals can only be reliably measured (or measured at
                all!) near the heart including continuous ECG, true respiration
                (based on lung volume changes) or body position/orientation.
              </p>
              <p>
                As for the second question: the problem for us was that
                smartwatches were too simple and the data too inaccurate, while
                advanced medical devices were too pricey or too complicated. We
                found a sweet spot between accuracy and accessibility - Aidlab
                delivers medical-grade signals without the hospital-level
                complexity. As "medical-grade" is a bold statement, we’ve
                published validation papers comparing Aidlab’s performance with
                other certified medical devices [3].
              </p>
              <p>
                Today Aidlab is already a pretty mature concept. We've been
                building Aidlab for 2 years, shipped our first version in 2020,
                we got our first clients, including Bryan Johnson from
                Kernel/Blueprint (longevity research) or Boeing/Jeppesen
                (monitoring pilots’ bio-signals during tests&amp;training).
              </p>
              <p>
                Now we're about to release Aidlab 2 [4] - with additional
                signals like EDA and GPS, and a bunch of new features, including
                on-device ML (we've trained a few small LSTM models running
                inference with TensorFlow Lite for Micro). The cool part is that
                we've built a custom shell on top of FreeRTOS, letting anyone
                invoke POSIX-like commands directly on the device, for example:
              </p>
              <p>
                <i
                  >timeout 10 temperature --sampling-rate 1 | tee
                  /data/temperature.csv | tail -n 5</i
                >
              </p>
              <p>
                The biggest breakthrough for us was realizing that cloud-based
                processing was the wrong approach. In the beginning, we pushed
                most of the computation to the cloud - it seemed natural, but
                turned out to be slow, costly, and devs didn't want it ("hey, is
                there a way to use your product without cloud?"). For example,
                our ECG analysis pipeline used to send raw data to an external
                microservice, processing it in 30-minute chunks through Bull
                queues. A 24-hour Holter analysis could spawn 100k+ event
                objects and take significant time to complete. Now we're doing
                everything we can to move computation to the edge. In an ideal
                world, the cloud wouldn't store or process anything - just
                receive already-analyzed, privacy-preserving results straight
                from the device.
              </p>
              <p>
                Another lesson: don't hand-solder prototypes at 3 a.m. to save
                money -&gt; please pay professionals to assemble PCBs.
              </p>
              <p>We decided to showcase this now for three reasons:</p>
              <p>
                - health feels more relevant than ever with the rise of
                longevity research and biohacking,
              </p>
              <p>- we are close to finalizing Aidlab 2,</p>
              <p>
                - and I am super curious to see if anyone here finds it useful!
              </p>
              <p>
                If you'd like to check the quality of Aidlab for yourself, we
                are publishing free datasets every week during different
                activities [5].
              </p>
              <p>
                [1]
                <a href="https://github.com/Aidlab"
                  >https://github.com/Aidlab</a
                >
              </p>
              <p>
                [2]
                <a
                  href="https://www.apple.com/health/pdf/Heart_Rate_Calorimetry_Activity_on_Apple_Watch_November_2024.pdf"
                  >https://www.apple.com/health/pdf/Heart_Rate_Calorimetry_Acti...</a
                >
              </p>
              <p>
                [3]
                <a href="https://aidlab.com/validation"
                  >https://aidlab.com/validation</a
                >
              </p>
              <p>
                [4]
                <a href="https://aidlab.com/aidlab-2"
                  >https://aidlab.com/aidlab-2</a
                >
              </p>
              <p>
                [5]
                <a href="https://aidlab.com/datasets"
                  >https://aidlab.com/datasets</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45529331">
          <h3>
            <a class="item" href="https://3dpaws.comet.ucar.edu"
              >3D-Printed Automatic Weather Station</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-09 @ 15:45:49</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45529331"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45525804">
          <h3>
            <a class="item" href="https://micropythonos.com"
              >MicroPythonOS – An Android-like OS for microcontrollers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-09 @ 10:35:40</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45525804"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45515978">
          <h3>
            <a
              class="item"
              href="https://wip.tf/posts/telefonefix-building-babys-first-international-landline/"
              >Show HN: Baby's first international landline</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 13:31:35</span
              ><span class="points-container"
                >Points: <span class="points">183</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45515978"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
            <div class="text">
              <p>
                As a weekend project, I hacked together a physical phone, a
                Raspberry Pi running Asterisk and Twilio, to let toddlers safely
                make international calls.
              </p>
              <p>
                I’ve documented the setup in this write-up and published the
                code + Ansible playbooks on GitHub so others can replicate it.
              </p>
              <p>
                I built this so kids of expats can easily stay in touch with
                family on other continents.
              </p>
              <p>
                Would love feedback from anyone who’s worked on something
                similar or tries building this themselves!
              </p>
              <p>
                writeup:
                <a
                  href="https://wip.tf/posts/telefonefix-building-babys-first-international-landline/"
                  >https://wip.tf/posts/telefonefix-building-babys-first-intern...</a
                >
                github repos: -
                <a href="https://github.com/nbr23/ansible-role-telefonefix"
                  >https://github.com/nbr23/ansible-role-telefonefix</a
                >
                -
                <a href="https://github.com/nbr23/allo-wed"
                  >https://github.com/nbr23/allo-wed</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="45513313">
          <h3>
            <a class="item" href="https://clockss.org/"
              >Clockss: Digital preservation services run by academic publishers
              and libraries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 07:53:29</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45513313"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45512962">
          <h3>
            <a class="item" href="https://github.com/pytauri/pytauri"
              >Tauri binding for Python through Pyo3</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-08 @ 06:58:00</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45512962"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45507444">
          <h3>
            <a
              class="item"
              href="https://colincogle.name/blog/byo-weather-station/"
              >Putting a dumb weather station on the internet</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 19:11:04</span
              ><span class="points-container"
                >Points: <span class="points">94</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45507444"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45506397">
          <h3>
            <a class="item" href="https://en.wikipedia.org/wiki/Jeffrey_Hudson"
              >Jeffrey Hudson the Court Dwarf of the English Queen Henrietta
              Maria of France</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 17:51:46</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45506397"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45504604">
          <h3>
            <a class="item" href="https://github.com/JulianSchroden/cine_remote"
              >Control your Canon Camera wirelessly</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 15:44:54</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45504604"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45502503">
          <h3>
            <a
              class="item"
              href="https://norwegianscitechnews.com/2025/10/making-regular-gps-ultra-precise/"
              >Making regular GPS ultra-precise</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 12:54:27</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45502503"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45502322">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-10-ancient-patagonian-hunter-disabled.html"
              >Ancient Patagonian hunter-gatherers took care of their injured
              and disabled</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-07 @ 12:34:47</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45502322"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45490938">
          <h3>
            <a
              class="item"
              href="https://chollinger.com/blog/2025/10/more-homelab-things-ive-recently-learned/"
              >More random home lab things I've recently learned</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-06 @ 13:02:38</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45490938"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45487232">
          <h3>
            <a
              class="item"
              href="https://www.thisiscolossal.com/2025/09/2025-bird-photographer-of-the-year-contest/"
              >Bird photographer of the year gives a lesson in planning and
              patience</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-06 @ 02:53:17</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45487232"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
