<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44009999">
          <h3>
            <a
              class="item"
              href="https://www.ft.com/content/e456ea34-c6ad-43fe-abe9-d4ce781c07b4"
              >Moody's strips US of top-notch triple-A credit rating</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 21:39:15</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44009999"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44009894">
          <h3>
            <a class="item" href="https://github.com/vcms-io/solidis"
              >Show HN: Solidis – Tiny TS Redis client, no deps, for
              serverless</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 21:20:15</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44009894"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Over the past two years I threw myself back into full-time
                engineering with a simple goal: write code that
                <i>gives back</i> to the community. After a lot of late-night
                FOMO (“AI will do it all for us, right?”) and some painful
                production incidents, I finally turned my weekend project into
                an open-source library.
              </p>
              <p>[ What is <i>Solidis</i>? ]</p>
              <p>
                - <i>Super-light (&lt; 30 KB) RESP2/RESP3 client</i> with zero
                runtime deps and first-class ESM/CJS support.
              </p>
              <p>
                - Fully <i>tree-shakable</i> – import only the commands you
                need.
              </p>
              <p>
                - Written with SOLID principles &amp; full TypeScript typings
                for every command.
              </p>
              <p>
                - Designed for <i>cold-start sensitive</i> serverless platforms
                (small bundle + tiny memory footprint).
              </p>
              <p>[ Why I built it ]</p>
              <p>1. <i>node-redis &amp; ioredis pain</i></p>
              <p>- ESM is still an after-thought.</p>
              <p>- Hidden deadlocks on RST, vague error surfaces.</p>
              <p>- Everything gets bundled, even commands you’ll never call.</p>
              <p>
                2. I refuse to add a dependency I don’t fully understand – I
                literally read candidates 10× before `npm i`.
              </p>
              <p>
                3. Serverless bills love to remind me that every KB and
                millisecond matters.
              </p>
              <p>[ Key features ]</p>
              <p>- Protocols: RESP2 and RESP3 (auto-negotiation)</p>
              <p>- Bundle size: `&lt;30 KB` (core) / `&lt;105 KB` (full)</p>
              <p>- Dependencies: <i>0</i></p>
              <p>
                - Extensibility: Drop-in command plugins, custom transactions
              </p>
              <p>
                - Reliability: Auto-reconnect, per-command timeouts,
                type-checked replies
              </p>
              <p>[ Roadmap / Help wanted ]</p>
              <p>
                - <i>Benchmarks</i> against `node-redis` &amp; `ioredis` (PRs
                welcome!)
              </p>
              <p>- More first-class <i>Valkey</i> love</p>
              <p>- <i>Fuzz-testing</i> the parser</p>
              <p>
                - <i>Docs site</i> – the README came first; I’d love help
                polishing full docs
              </p>
              <p>
                This might be my last big OSS push for a while, so
                <i>stars, issues, and PRs mean the world</i>.
              </p>
              <p>
                If Solidis saves you some cold-start time or just scratches a
                TypeScript itch, let me know!
              </p>
              <p>
                <i>Repo:</i>
                <a href="https://github.com/vcms-io/solidis"
                  >https://github.com/vcms-io/solidis</a
                >
              </p>
              <p><i>License:</i> MIT</p>
              <p>Thanks for reading, and happy hacking!</p>
              <p><i>(Feel free to AMA in the comments – I’m around.)</i></p>
            </div>
          </section>
        </section>
        <section id="44009848">
          <h3>
            <a
              class="item"
              href="https://cloud.google.com/blog/products/databases/techniques-for-improving-text-to-sql"
              >Getting AI to write good SQL: Text-to-SQL techniques explained</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 21:10:12</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44009848"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44009621">
          <h3>
            <a
              class="item"
              href="https://aeon.co/essays/who-needs-ai-text-generation-when-theres-erasmus-of-rotterdam"
              >Methodical Banality</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 20:39:30</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44009621"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44009464">
          <h3>
            <a
              class="item"
              href="https://clojurescript.org/news/2025-05-16-release"
              >ClojureScript forks Google Closure Library to guarantee backward
              compatibility</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 20:20:20</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44009464"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44009321">
          <h3>
            <a class="item" href="https://github.com/dipampaul17/KVSplit"
              >Show HN: KVSplit – Run 2-3x longer contexts on Apple Silicon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 20:04:58</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44009321"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <p>
                I patched llama.cpp to enable different bit-widths for keys vs.
                values on Apple Silicon. The results are surprising:
              </p>
              <p>
                - K8V4 (8-bit keys, 4-bit values): 59% memory reduction with
                only 0.86% perplexity loss - K4V8 (4-bit keys, 8-bit values):
                59% memory reduction but 6.06% perplexity loss - The
                configurations use the same number of bits, but K8V4 is 7×
                better for quality
              </p>
              <p>
                This means you can run LLMs with 2-3× longer context on the same
                Mac. Memory usage scales with sequence length, so savings
                compound as context grows.
              </p>
              <p>
                Implementation was straightforward: 1. Added --kvq-key and
                --kvq-val flags to llama.cpp 2. Applied existing quantization
                logic separately to K and V tensors 3. Validated with perplexity
                metrics across context lengths 4. Used Metal for acceleration
                (with -mlong-calls flag to avoid vectorization issues)
              </p>
              <p>
                Benchmarked on an M4 MacBook Pro running TinyLlama with 8K
                context windows. Compatible with Metal/MPS and optimized for
                Apple Silicon.
              </p>
              <p>
                GitHub:
                <a href="https://github.com/dipampaul17/KVSplit"
                  >https://github.com/dipampaul17/KVSplit</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44008843">
          <h3>
            <a class="item" href="https://dcurt.is/thinking"
              >Thoughts on thinking</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 19:09:55</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44008843"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44008412">
          <h3>
            <a
              class="item"
              href="https://www.lrb.co.uk/the-paper/v47/n09/david-thomson/cool-tricking"
              >The Magic Hours: The Films and Hidden Life of Terrence Malick</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 18:23:26</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44008412"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44007854">
          <h3>
            <a class="item" href="https://bobacollection.staxmuseum.org/"
              >Stax Museum Bob Abrahamian Collection</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 17:21:28</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44007854"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44007714">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/new-superdiffusion-proof-probes-the-mysterious-math-of-turbulence-20250516/"
              >New 'Superdiffusion' Proof Probes the Mysterious Math of
              Turbulence</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 17:08:02</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44007714"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44007644">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/foundry/jobs/uwi8b6I-founding-engineer-ml-x-swe"
              >Foundry (YC F24) Is Hiring – Founding Engineer (ML × SWE)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 17:01:00</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44007065">
          <h3>
            <a class="item" href="https://github.com/browser-use/workflow-use"
              >Show HN: Workflow Use – Deterministic, self-healing browser
              automation (RPA 2.0)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 16:05:00</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44007065"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
            <div class="text">
              <p>
                A few months ago, we launched Browser Use (<a
                  href="https://news.ycombinator.com/item?id=43173378"
                  >https://news.ycombinator.com/item?id=43173378</a
                >), which let LLMs perform tasks in the browser using natural
                language prompts. It was great for one-off tasks like booking
                flights or finding products—but we soon realized enterprises
                have somewhat different needs:
              </p>
              <p>
                They typically have one workflow with dynamic variables (e.g.,
                filling out a form and downloading a PDF) that they want to
                reliably run a million times without breaking. Pure LLM agents
                were slow, expensive, and unpredictable for these high-frequency
                tasks.
              </p>
              <p>So we just started working on Workflow Use:</p>
              <p>
                - You show the browser what to do (by manually recording steps;
                show don’t tell).
              </p>
              <p>
                - An LLM converts these recordings into deterministic scripts
                with variables (scripts include AI steps as well, where it’s
                100% agentic)
              </p>
              <p>
                - Scripts run reliably, 10x faster, and ~90% cheaper than
                Browser Use.
              </p>
              <p>
                - If a step breaks, workflow will fallback to Browser Use and
                agentically run the step. (This self-healing functionality is
                still very early.)
              </p>
              <p>
                This project just kicked off, so lots of things will break, it’s
                definitely not production-ready yet, and plenty of stuff is
                still missing (like a solid editor and proper self-healing). But
                we wanted to share early, get feedback, and figure out what
                workflows you’d want to automate this way.
              </p>
              <p>Try it out and let us know what you think!</p>
            </div>
          </section>
        </section>
        <section id="44006824">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2505.09814"
              >X X^t can be faster</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 15:45:30</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44006824"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44006735">
          <h3>
            <a class="item" href="https://github.com/A2-ai/rv"
              >Show HN: Rv, a Package Manager for R</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 15:37:30</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44006735"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
            <div class="text">
              <p>
                If you have used Cargo/npm/any Python package manager/etc, it
                will be very familiar.
              </p>
            </div>
          </section>
        </section>
        <section id="44006426">
          <h3>
            <a
              class="item"
              href="https://economics.mit.edu/news/assuring-accurate-research-record"
              >MIT asks arXiv to take down preprint of paper on AI and
              scientific discovery</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 15:09:25</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44006426"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44006381">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44006381"
              >I'm Peter Roberts, immigration attorney, who does work for YC and
              startups. AMA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 15:05:32</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44006381"
                  >Comments</a
                ><span class="descendants">: 322</span></span
              >
            </h4>
            <div class="text">
              <p>
                Edit: I am taking a break now and will return later this
                afternoon/evening to respond to any comments and answer any
                questions. Thank you everyone for a great and engaged AMA so
                far.
              </p>
            </div>
          </section>
        </section>
        <section id="44006345">
          <h3>
            <a class="item" href="https://openai.com/index/introducing-codex/"
              >A Research Preview of Codex</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 15:02:02</span
              ><span class="points-container"
                >Points: <span class="points">325</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44006345"
                  >Comments</a
                ><span class="descendants">: 249</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44006231">
          <h3>
            <a class="item" href="https://github.com/gorenje/erlang-red"
              >Show HN: Visual flow-based programming for Erlang, inspired by
              Node-RED</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 14:54:13</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44006231"
                  >Comments</a
                ><span class="descendants">: 84</span></span
              >
            </h4>
            <div class="text">
              <p>
                Erlang-RED has been my project for the last couple of months and
                I would love to get some feedback from the HN community.
              </p>
              <p>
                The idea is to take advantage of Erlangs message passing and low
                overhead processes to have true concurrency in Node-RED flows.
                Plus also to bring low-code visual flow-based programming to
                Erlang.
              </p>
            </div>
          </section>
        </section>
        <section id="44005195">
          <h3>
            <a
              class="item"
              href="https://kobzol.github.io/rust/rustc/2025/05/16/evolution-of-rustc-errors.html"
              >Evolution of Rust Compiler Errors</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 13:22:40</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44005195"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44005008">
          <h3>
            <a
              class="item"
              href="https://thenewstack.io/java-at-30-the-genius-behind-the-code-that-changed-tech/"
              >Java at 30: Interview with James Gosling</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 13:05:25</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44005008"
                  >Comments</a
                ><span class="descendants">: 148</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44004827">
          <h3>
            <a class="item" href="https://github.com/pgjones/sql-tstring"
              >Show HN: SQL-tString a t-string SQL builder in Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 12:48:22</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44004827"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
            <div class="text">
              <a href="https://peps.python.org/pep-0750/"
                >https://peps.python.org/pep-0750/</a
              >, t-strings to build SQL queries, for example,
              <p></p>
              <pre><code>    from sql_tstring import sql
    
    val = 2
    query, values = sql(t"SELECT x FROM y WHERE x = {val}")
    assert query == "SELECT x FROM y WHERE x = ?"
    assert values == [2]
    db.execute(query, values)  # Most DB engines support this
</code></pre>
              The placeholder ? protects against SQL injection, but cannot be
              used everywhere. For example, a column name cannot be a
              placeholder. If you try this SQL-tString will raise an error,
              <p></p>
              <pre><code>    col = "x"
    sql(t"SELECT {col} FROM y")  # Raises ValueError
</code></pre>
              To proceed you'll need to declare what the valid values of col can
              be,
              <p></p>
              <pre><code>    from sql_tstring import sql_context
    
    with sql_context(columns="x"):
        query, values = sql(t"SELECT {col} FROM y")
    assert query == "SELECT x FROM y"
    assert values == []
</code></pre>
              Thus allowing you to protect against SQL injection.
              <p>
                As t-strings are format strings you can safely format the
                literals you'd like to pass as variables,
              </p>
              <p></p>
              <pre><code>    text = "world"
    query, values = sql(t"SELECT x FROM y WHERE x LIKE '%{text}'")
    assert query == "SELECT x FROM y WHERE x LIKE ?"
    assert values == ["%world"]
</code></pre>
              This is especially useful when used with the Absent rewriting
              value.
              <p>
                SQL-tString is a SQL builder and as such you can use special
                RewritingValues to alter and build the query you want at
                runtime. This is best shown by considering a query you sometimes
                want to search by one column a, sometimes by b, and sometimes
                both,
              </p>
              <p></p>
              <pre><code>    def search(
        *,
        a: str | AbsentType = Absent,
        b: str | AbsentType = Absent
    ) -&gt; tuple[str, list[str]]:
        return sql(t"SELECT x FROM y WHERE a = {a} AND b = {b}")
    
    assert search() == "SELECT x FROM y", []
    assert search(a="hello") == "SELECT x FROM y WHERE a = ?", ["hello"]
    assert search(b="world") == "SELECT x FROM y WHERE b = ?", ["world"]
    assert search(a="hello", b="world") == (
        "SELECT x FROM y WHERE a = ? AND b = ?", ["hello", "world"]
    )
</code></pre>
              Specifically Absent (which is an alias of RewritingValue.ABSENT)
              will remove the expression it is present in, and if there an no
              expressions left after the removal it will also remove the clause.
              <p>
                The other rewriting values I've included are handle the
                frustrating case of comparing to NULL, for example the following
                is valid but won't work as you'd likely expect,
              </p>
              <p></p>
              <pre><code>    optional = None
    sql(t"SELECT x FROM y WHERE x = {optional}")
</code></pre>
              Instead you can use IsNull to achieve the right result,
              <p></p>
              <pre><code>    from sql_tstring import IsNull

    optional = IsNull
    query, values = sql(t"SELECT x FROM y WHERE x = {optional}")
    assert query == "SELECT x FROM y WHERE x IS NULL"
    assert values == []
</code></pre>
              There is also a IsNotNull for the negated comparison.
              <p>
                The final feature allows for complex query building by nesting a
                t-string within the existing,
              </p>
              <p></p>
              <pre><code>    inner = t"x = 'a'"
    query, _ = sql(t"SELECT x FROM y WHERE {inner}")
    assert query == "SELECT x FROM y WHERE x = 'a'"
</code></pre>
              This library can be used today without Python3.14's t-strings with
              some limitations,
              <a
                href="https://github.com/pgjones/sql-tstring?tab=readme-ov-file#pre-python-314-usage"
                >https://github.com/pgjones/sql-tstring?tab=readme-ov-file#pr...</a
              >, and I've been doing so this year. Thoughts and feedback very
              welcome.
            </div>
          </section>
        </section>
        <section id="44003445">
          <h3>
            <a
              class="item"
              href="https://labs.quansight.org/blog/free-threaded-one-year-recap"
              >The first year of free-threaded Python</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-16 @ 09:42:31</span
              ><span class="points-container"
                >Points: <span class="points">227</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44003445"
                  >Comments</a
                ><span class="descendants">: 206</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43976504">
          <h3>
            <a class="item" href="https://dancrimp.nz/2025/03/31/hardware/"
              >Returning to My Roots in Hardware</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 19:12:01</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43976504"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43975404">
          <h3>
            <a
              class="item"
              href="https://nick-lane.net/books/transformer-the-deep-chemistry-of-life-and-death/"
              >Transformer: The Deep Chemistry of Life and Death</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 17:25:34</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43975404"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43975352">
          <h3>
            <a
              class="item"
              href="https://design.google/library/expressive-material-design-google-research"
              >Material 3 Expressive</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 17:20:11</span
              ><span class="points-container"
                >Points: <span class="points">284</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43975352"
                  >Comments</a
                ><span class="descendants">: 480</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43972449">
          <h3>
            <a class="item" href="https://www.jasonthorsness.com/26"
              >Tower Defense: Cache Control</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 12:59:06</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43972449"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43972154">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41467-025-58659-9"
              >Lawful kinematics link eye movements to the limits of high-speed
              perception</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 12:27:55</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43972154"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43971944">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/space/2025/05/tuesday-telescope-taking-a-look-at-the-next-generation-of-telescopes/"
              >Taking a look at the next generation of telescopes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 12:03:00</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43971944"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43971616">
          <h3>
            <a
              class="item"
              href="https://devblogs.microsoft.com/oldnewthing/20250507-00/?p=111157"
              >What were the MS-DOS programs that the moricons.dll icons were
              intended for?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 11:06:58</span
              ><span class="points-container"
                >Points: <span class="points">230</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43971616"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43970953">
          <h3>
            <a
              class="item"
              href="https://lpython.org/blog/2023/07/lpython-novel-fast-retargetable-python-compiler/"
              >LPython: Novel, Fast, Retargetable Python Compiler (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-13 @ 09:01:40</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43970953"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
