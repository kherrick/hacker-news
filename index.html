<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43540622">
          <h3>
            <a
              class="item"
              href="https://fortune.com/2025/03/26/elon-musk-tesla-under-investigation-canada-wrongfully-boosting-sales/"
              >Canada investigates whether Tesla helped itself to a
              subsidy-fueled sales boom</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 22:25:27</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43540622"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43540326">
          <h3>
            <a
              class="item"
              href="https://carly.substack.com/p/everything-is-ghibli"
              >Everything Is Ghibli</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 21:44:54</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43540326"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43539585">
          <h3>
            <a class="item" href="https://goperf.dev/">Go Optimization Guide</a>
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 20:29:58</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43539585"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43538919">
          <h3>
            <a class="item" href="https://openjdk.org/jeps/8349536"
              >JEP Draft: Prepare to Make Final Mean Final</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 19:35:51</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43538919"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43538338">
          <h3>
            <a
              class="item"
              href="https://help.kagi.com/kagi/plans/family-plan.html#kidslogin"
              >Kagi for Kids</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 18:47:30</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43538338"
                  >Comments</a
                ><span class="descendants">: 115</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43538192">
          <h3>
            <a
              class="item"
              href="https://www.righto.com/2025/03/pentium-microcde-rom-circuitry.html"
              >Notes on the Pentium's Microcode Circuitry</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 18:35:37</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43538192"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43538164">
          <h3>
            <a class="item" href="https://github.com/astronomer/airflow-ai-sdk"
              >LLM Workflows then Agents: Getting Started with Apache Airflow</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 18:32:28</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43538164"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43538113">
          <h3>
            <a
              class="item"
              href="https://9to5google.com/2025/03/31/honey-extension-users-dropped-chrome-march-2025/"
              >Honey has now lost 4M Chrome users after shady tactics were
              revealed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 18:28:03</span
              ><span class="points-container"
                >Points: <span class="points">361</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43538113"
                  >Comments</a
                ><span class="descendants">: 181</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43537593">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/tech-policy/2025/03/france-fines-apple-e150m-for-excessive-pop-ups-that-let-users-reject-tracking/"
              >France fines Apple €150M for “excessive” pop-ups that let users
              reject tracking</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 17:38:16</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43537593"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43537505">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43537505"
              >Launch HN: Augento (YC W25) – Fine-tune your agents with
              reinforcement learning</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 17:29:04</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43537505"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
            <div class="text">
              <a href="https://augento.ai/">https://augento.ai/</a>). We’re
              building Deepseek R1-like fine-tuning as a service. You connect
              your agent, tell us when it’s right or wrong, and we deliver an
              LLM optimized for that agent. There’s a demo video
              <a href="https://www.youtube.com/watch?v=j5RQaTdRrKE"
                >https://www.youtube.com/watch?v=j5RQaTdRrKE</a
              >, and our docs are at
              <a href="https://docs.augento.ai/">https://docs.augento.ai/</a>.
              It’s open for anyone to use at
              <a href="https://augento.ai">https://augento.ai</a>.
              <p>
                Agents fail all the time, especially when you try to use them
                for something actually useful. Current solution approaches suck:
                prompting has intrinsic limits and supervised fine-tuning
                requires big explicit datasets that are hard to collect.
              </p>
              <p>
                Two months ago, the DeepSeek R1 paper outlined a way to
                post-train LLMs with (almost) pure reinforcement learning. We
                took up their research and built a fine-tuning platform around
                that.
              </p>
              <p>
                You let us intercept your agent's data flow, and we deliver you
                a fine-tuned open-source model, that is trained on the agent's
                specific task. Instead of providing big datasets of explicit
                fine-tuning samples, you provide a reward function, judging the
                model's outputs.
              </p>
              <p>Here are examples of what this can be used for:</p>
              <p>
                Coding Agent: We fine-tuned a coding agent that was constantly
                making syntax errors and failed to handle semantic edge cases
                properly. By providing a reward function that evaluated code
                against the compiler, the agent learned not to produce these
                errors. The fine-tuned model reduced critical bugs by 40% with
                just 20 training samples.
              </p>
              <p>
                MCP Tool Specialization: Imagine you have a custom set of
                internal tools using the MCP protocol, but your agent keeps
                selecting the wrong tool or passing incompatible parameters. You
                could fine-tune with a reward function that scores tool
                selection and parameter matching.
              </p>
              <p>
                Browser Agent Navigation: If you're building a browser agent
                that struggles with complex web UIs or specific sites, you could
                fine-tune it to better understand UI elements and navigation
                patterns. With a reward function that scores successful task
                completion (like "find the best price for this product" or
                "complete this multi-step form"), you could train an agent that
                better identifies clickable elements, understands form
                validation errors, and navigates through complex SPAs without
                getting stuck.
              </p>
              <p>
                VLA Robot Control: If you're using vision-language models to
                control robotic arms or other hardware, you could fine-tune for
                your specific actuator setup. With a reward function based on
                high-level task completion, you could train a
                Vision-Langauge-Action (VLA) model that translates natural
                language commands like "move the red block behind the blue
                cylinder" into actuator controls for your specific hardware.
              </p>
              <p>
                As you see from these examples, the current paradigm is best
                suited for "verifiable domains”, where it is possible to give an
                explicit function judging the model’s outputs. However, up next,
                we will also support an "alignment mode", where you don't have
                to provide a reward function but provide high-level feedback on
                past failure runs of your agent. Just tag where things went
                wrong, and we'll handle the rest. This makes it even easier to
                improve your agents without needing to write formal reward
                functions.
              </p>
              <p>
                Our platform is not itself open source, but it fine-tunes
                open-source language models. I.e. it is an alternative to the
                reinforcement fine-tuning API from OpenAI, but with Qwen, LLama,
                Deepseek, etc., and more customizability on the reward model. We
                charge users for the training and for their
                inference/interaction with the model later on ($0 monthly flat
                fee + training cost + inference cost).
              </p>
              <p>
                The platform is self-serving and open to use at
                <a href="https://augento.ai/dashboard"
                  >https://augento.ai/dashboard</a
                >. We’ll give you $20 in training credits, which should be
                enough for connecting your agent and delivering some observable
                improvement on your use case.
              </p>
              <p>We’d love to hear your thoughts and feedback!</p>
            </div>
          </section>
        </section>
        <section id="43537194">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/distro/jobs/hJQCfVH-lead-solutions-engineer"
              >Distro (YC S24) Is Hiring a Lead Solutions Engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 17:00:06</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43536463">
          <h3>
            <a
              class="item"
              href="https://blog.tendollaradventure.com/automating-story-logic-with-llms/"
              >Automating Interactive Fiction Logic Generation with LLMs in
              Emacs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 15:57:15</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43536463"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43536146">
          <h3>
            <a
              class="item"
              href="https://thelibertyline.com/2025/03/30/yankees-new-torpedo-bat/"
              >MLB says Yankees' new "torpedo bats" are legal and likely
              coming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 15:27:03</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43536146"
                  >Comments</a
                ><span class="descendants">: 286</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43536105">
          <h3>
            <a
              class="item"
              href="https://blog.jgc.org/2025/03/debugging-lotus-1-2-3-by-fax.html"
              >Debugging Lotus 1-2-3 by fax</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 15:23:50</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43536105"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43535953">
          <h3>
            <a
              class="item"
              href="https://doublepulsar.com/oracle-attempt-to-hide-serious-cybersecurity-incident-from-customers-in-oracle-saas-service-9231c8daff4a"
              >Oracle attempt to hide cybersecurity incident from customers?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 15:11:33</span
              ><span class="points-container"
                >Points: <span class="points">448</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43535953"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43535943">
          <h3>
            <a
              class="item"
              href="https://turso.tech/blog/turso-offline-sync-public-beta"
              >Turso SQLite Offline Sync Public Beta</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 15:10:39</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43535943"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43535889">
          <h3>
            <a class="item" href="https://github.com/gumloop/guMCP"
              >Show HN: GuMCP – Open-source MCP servers, hosted for free</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 15:06:23</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43535889"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>problems we're hoping to solve:</p>
              <p>
                - Many people are creating MCP servers for the same apps.
                They're scattered across different repos but flavors of the same
                thing. We're making one standardized mono project for all MCP
                servers.
              </p>
              <p>
                - Startups are charging for hosting MCP servers. This is
                blocking tons of people from being able to play around with MCP
                casually. We're hosting them for free.
              </p>
              <p>
                - Non-technical people should be able to use MCP without needing
                to learn how to clone a repo and set up a venv. We're trying to
                enable a one click integration if people want to use the free
                hosted service.
              </p>
              <p>
                The plan is to keep contributing until we have an MCP server for
                basically every useful app anyone could want.
              </p>
            </div>
          </section>
        </section>
        <section id="43535688">
          <h3>
            <a
              class="item"
              href="https://www.thephcheese.com/theres-white-stuff-growing-on-your-cheese-that-isnt-mold"
              >It’s not mold, it’s calcium lactate (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 14:49:42</span
              ><span class="points-container"
                >Points: <span class="points">301</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43535688"
                  >Comments</a
                ><span class="descendants">: 185</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43535653">
          <h3>
            <a
              class="item"
              href="https://www.sergey.fyi/articles/reliability-vs-capability"
              >AI agents: Less capability, more reliability, please</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 14:45:35</span
              ><span class="points-container"
                >Points: <span class="points">289</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43535653"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43534533">
          <h3>
            <a class="item" href="https://aumont.fr/posts/FreeBSD-Home-Server/"
              >Why I run FreeBSD for my home servers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 12:59:23</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43534533"
                  >Comments</a
                ><span class="descendants">: 118</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43533516">
          <h3>
            <a
              class="item"
              href="https://best.openssf.org/Compiler-Hardening-Guides/Compiler-Options-Hardening-Guide-for-C-and-C++.html"
              >Compiler Options Hardening Guide for C and C++</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 11:01:50</span
              ><span class="points-container"
                >Points: <span class="points">169</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43533516"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43533496">
          <h3>
            <a
              class="item"
              href="https://www.science.org/content/blog-post/things-i-won-t-work-dioxygen-difluoride"
              >Things I Won't Work With: Dioxygen Difluoride (2010)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 10:58:53</span
              ><span class="points-container"
                >Points: <span class="points">205</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43533496"
                  >Comments</a
                ><span class="descendants">: 96</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43533362">
          <h3>
            <a
              class="item"
              href="https://www.goto80.com/the-demoscene-as-a-unesco-heritage-in-sweden"
              >The demoscene as a UNESCO heritage in Sweden</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 10:39:57</span
              ><span class="points-container"
                >Points: <span class="points">506</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43533362"
                  >Comments</a
                ><span class="descendants">: 68</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43533306">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/smart-news/james-webb-space-telescope-reveals-that-most-galaxies-rotate-clockwise-180986224/"
              >James Webb Space Telescope reveals that most galaxies rotate
              clockwise</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 10:31:39</span
              ><span class="points-container"
                >Points: <span class="points">260</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43533306"
                  >Comments</a
                ><span class="descendants">: 236</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43532830">
          <h3>
            <a
              class="item"
              href="https://developer.chrome.com/blog/a-customizable-select"
              >The element can now be customized with CSS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-31 @ 09:11:47</span
              ><span class="points-container"
                >Points: <span class="points">332</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43532830"
                  >Comments</a
                ><span class="descendants">: 130</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43516411">
          <h3>
            <a
              class="item"
              href="https://nautil.us/the-surprising-history-of-scientific-ballooning-in-11-missions-1200217/"
              >The Surprising History of Scientific Ballooning in 11 Missions</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 15:47:22</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43516411"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43515622">
          <h3>
            <a class="item" href="https://knightride.rakhim.org/"
              >Show HN: I made a little puzzle game about a rogue chess
              knight</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 14:02:53</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43515622"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43514246">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-03-symmetry-quarks-broken.html"
              >Symmetry between up and down quarks is more broken than
              expected</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 10:12:03</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43514246"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43511529">
          <h3>
            <a
              class="item"
              href="https://nymag.com/intelligencer/article/how-the-guardian-us-flourishes-without-a-paywall.html"
              >The Guardian flourishes without a paywall</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-29 @ 00:31:27</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43511529"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43510393">
          <h3>
            <a
              class="item"
              href="https://newslttrs.com/yes-in-the-1980s-we-downloaded-games-from-the-radio/"
              >In the 1980s we downloaded games from the radio</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-28 @ 22:14:33</span
              ><span class="points-container"
                >Points: <span class="points">257</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43510393"
                  >Comments</a
                ><span class="descendants">: 137</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
