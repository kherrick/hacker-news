<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43293487">
          <h3>
            <a class="item" href="https://theins.press/en/inv/279034"
              >Europe's most wanted man plotted my murder and that of my
              colleague</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 19:28:31</span
              ><span class="points-container"
                >Points: <span class="points">72</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43293487"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43293121">
          <h3>
            <a
              class="item"
              href="https://www.newsguardrealitycheck.com/p/a-well-funded-moscow-based-global"
              >Moscow-based global news network has infected Western AI tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 19:01:30</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43293121"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292946">
          <h3>
            <a
              class="item"
              href="https://techstartups.com/2025/03/07/microsoft-is-plotting-a-future-without-openai/"
              >Microsoft is plotting a future without OpenAI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 18:44:34</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292946"
                  >Comments</a
                ><span class="descendants">: 107</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292920">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2025/03/they-curdle-like-milk-wb-dvds-from-2006-2008-are-rotting-away-in-their-cases/"
              >WB offers replacements, but no refunds, for DVDs rotting
              prematurely</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 18:42:41</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292920"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292836">
          <h3>
            <a
              class="item"
              href="https://www.propublica.org/article/connecticut-dmv-employee-sells-towed-cars"
              >How a Connecticut DMV Employee Made Thousands by Selling Towed
              Cars</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 18:35:27</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292836"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292820">
          <h3>
            <a
              class="item"
              href="https://www.eff.org/deeplinks/2025/03/first-porn-now-skin-cream-age-verification-bills-are-out-control"
              >Age Verification Laws: A Backdoor to Surveillance</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 18:34:02</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292820"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292805">
          <h3>
            <a
              class="item"
              href="https://www.thefp.com/p/trumps-crypto-fort-knox"
              >Cliff Asness: The New 'Crypto Fort Knox' Is as Dumb as It
              Sounds</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 18:33:14</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292805"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292471">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/science/2025/mar/07/athena-spacecraft-mission-dead"
              >Athena spacecraft declared dead after toppling over on moon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 18:06:45</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292471"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292058">
          <h3>
            <a class="item" href="https://contentfoundry.com/"
              >Show HN: A big tech dev experience for an open source CMS</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:24:26</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292058"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
            <div class="text">
              <p>
                We're showing our tiny first step: A tool designed to take in a
                Twitter username and produce an "identity card" based on it. We
                expect to use an approach similar to [Constitutional AI] with an
                explicit focus on repeatability, testability, and verification
                of an "identity card." We think this approach could be used to
                create finetuning examples for training changes, or serve as
                inference time insight for LLMs, or most likely a combination of
                the two.
              </p>
              <p>
                The tooling we're showing today is extremely simplistic (and the
                AI is frankly bad) but this is intentional. We're more focused
                on showing the dev experience and community aspects. We'd like
                to make it easier to contribute to this project than edit
                Wikipedia. Communities are frustrated with things like
                Wordpress, Apache, and other open source foundations focusing on
                things other than software. We have a lot of community ideas
                (governance via vote by jury is perhaps the most interesting).
              </p>
              <p>
                We're a team of 5, and we've bounced around a few companies with
                each other. We're all professional creators (video + music) and
                we're creating tooling for ourselves first.
              </p>
              <p>
                Previously, we did a startup called Vidpresso (YC W14) that was
                acquired by Facebook in 2018. We all worked at Facebook for 5
                years on creator tooling, and have since left to start this
                thing.
              </p>
              <p>
                After leaving FB, it was painful for us to leave the warm
                embrace of the Facebook infra team where we had amazing tooling.
                Since then, we've pivoted a bunch of times trying to figure out
                our "real" product. While we think we've finally nailed it, the
                developer experience we built is one we think others could
                benefit from.
              </p>
              <p>
                Our tooling is designed so any developer can easily jump in and
                start contributing. It's an AI-first dev environment designed
                with a few key principles in mind:
              </p>
              <p>
                1. You should be able to discover any command you need to run
                without looking at docs. 2. To make a change, as much context as
                possible should be provided as close to the code as possible. 3.
                AIs are "people too", in the sense that they benefit from
                focused context, and not being distracted by having to search
                deeply through multiple files or documentation to make changes.
              </p>
              <p>
                We have a few non-traditional elements to our stack which we
                think are worth exploring. [Isograph] helps us simplify our
                component usage with GraphQL. [Replit] lets people use AI coding
                without needing to set up any additional tooling. We've learned
                how to treat it like a junior developer, and think it will be
                the best platform for AI-first open source projects going
                forward. [Sapling] (and Git together) for version control. It
                might sound counter intuitive, but we use Git to manage agent
                interactionsand we use Sapling to manage "purposeful" commits.
              </p>
              <p>
                My last [Show HN post in 2013] ended up helping me find my
                Vidpresso cofounder so I have high hopes for this one. I'm
                excited to meet anyone, developers, creators, or nice people in
                general, and start to work with them to make this project work.
                I have good references of being a nice guy, and aim to keep that
                going with this project.
              </p>
              <p>
                The best way to work with us is [remix our Replit app] and [join
                our Discord].
              </p>
              <p>
                Thanks for reading and checking us out! It's super early, but
                we're excited to work with you!
              </p>
              <p>
                [Constitutional AI]:
                <a
                  href="https://www.anthropic.com/research/constitutional-ai-harmlessness-from-ai-feedback"
                  >https://www.anthropic.com/research/constitutional-ai-harmles...</a
                >
              </p>
              <p>
                [Isograph]:
                <a href="https://isograph.dev">https://isograph.dev</a>
              </p>
              <p>
                [Replit]: <a href="https://replit.com">https://replit.com</a>
              </p>
              <p>
                [Sapling]:
                <a href="https://sapling-scm.com">https://sapling-scm.com</a>
              </p>
              <p>
                [Show HN post in 2013]:
                <a href="https://news.ycombinator.com/item?id=6993981"
                  >https://news.ycombinator.com/item?id=6993981</a
                >
              </p>
              <p>
                [remix our Replit app]:
                <a
                  href="https://replit.com/t/bolt-foundry/repls/Content-Foundry/view#README.md"
                  >https://replit.com/t/bolt-foundry/repls/Content-Foundry/view...</a
                >
              </p>
              <p>
                [join our Discord]:
                <a href="https://discord.gg/TjQZfWjSQ7"
                  >https://discord.gg/TjQZfWjSQ7</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43292056">
          <h3>
            <a
              class="item"
              href="https://developer.chrome.com/blog/command-and-commandfor"
              >Introducing command And commandfor In HTML</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:24:02</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292056"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43292050">
          <h3>
            <a class="item" href="https://cedardb.com/blog/optimistic_btrees/"
              >Optimistic Locking in B-Trees</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:23:28</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43292050"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291946">
          <h3>
            <a class="item" href="https://github.com/directvt/vtm"
              >Vtm: Text-Based Desktop Environment</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:12:30</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43291946"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291922">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=43291922"
              >Ask HN: Do your eyes bug you even though your prescription is
              "correct"?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:09:20</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43291922"
                  >Comments</a
                ><span class="descendants">: 89</span></span
              >
            </h4>
            <div class="text">
              <p>Pure research, zero selling.</p>
              <p>
                Interested? Drop a comment below or email me directly at
                jbornhorst [at] gmail.com. I’ll coordinate a convenient time to
                talk.
              </p>
            </div>
          </section>
        </section>
        <section id="43291839">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/kraftful/jobs/NdXFHyV-founding-engineer"
              >Kraftful (YC S19) is hiring a founding eng to support our
              hockey-stick growth</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 17:00:44</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291678">
          <h3>
            <a class="item" href="https://github.com/Interactive-Echoes/IEMidi"
              >Show HN: IEMidi –  Cross-platform MIDI map editor for arbitrary
              controllers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 16:44:20</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43291678"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291541">
          <h3>
            <a
              class="item"
              href="https://aeon.co/essays/why-reading-martha-c-nussbaums-philosophy-is-pure-pleasure"
              >The necessity of Nussbaum</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 16:29:18</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43291541"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43291299">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-02-laser-based-device-scan-sample.html"
              >Laser-based device can scan almost any sample of gas and tell you
              what's in it</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 16:06:37</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43291299"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43290892">
          <h3>
            <a
              class="item"
              href="https://nodumbideas.com/p/betting-on-the-pope-was-the-original"
              >Betting on the Pope was the original prediction market</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 15:25:13</span
              ><span class="points-container"
                >Points: <span class="points">98</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43290892"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43290555">
          <h3>
            <a
              class="item"
              href="https://engineering.fb.com/2025/01/21/production-engineering/strobelight-a-profiling-service-built-on-open-source-technology/"
              >Strobelight: A profiling service built on open source
              technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 14:43:24</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43290555"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43289245">
          <h3>
            <a
              class="item"
              href="https://medicalxpress.com/news/2025-03-naturally-molecule-rivals-ozempic-weight.html"
              >Natural occurring molecule rivals Ozempic in weight loss,
              sidesteps side effects</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 11:16:41</span
              ><span class="points-container"
                >Points: <span class="points">320</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43289245"
                  >Comments</a
                ><span class="descendants">: 270</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43288861">
          <h3>
            <a class="item" href="https://www.jjj.de/fxt/fxtbook.pdf"
              >Matters Computational (2010) [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 10:06:38</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43288861"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43287821">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2503.00735"
              >Ladder: Self-improving LLMs through recursive problem
              decomposition</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-07 @ 06:45:57</span
              ><span class="points-container"
                >Points: <span class="points">285</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43287821"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43286161">
          <h3>
            <a
              class="item"
              href="https://google-research.github.io/self-organising-systems/difflogic-ca/?hn"
              >Differentiable Logic Cellular Automata</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 23:43:37</span
              ><span class="points-container"
                >Points: <span class="points">398</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43286161"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43284420">
          <h3>
            <a
              class="item"
              href="https://openpipe.ai/blog/using-grpo-to-beat-o1-o3-mini-and-r1-on-temporal-clue"
              >Using GRPO to Beat o1, o3-mini and R1 at “Temporal Clue”</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 19:51:55</span
              ><span class="points-container"
                >Points: <span class="points">190</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43284420"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43282905">
          <h3>
            <a class="item" href="https://mistral.ai/fr/news/mistral-ocr"
              >Mistral OCR</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-06 @ 17:39:39</span
              ><span class="points-container"
                >Points: <span class="points">1642</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43282905"
                  >Comments</a
                ><span class="descendants">: 402</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43266546">
          <h3>
            <a class="item" href="https://www.pythonmorsels.com/help-features/"
              >The features of Python's help() function</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-05 @ 14:07:24</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43266546"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43257460">
          <h3>
            <a class="item" href="https://genna.win/blog/convolution-simd/"
              >Performance optimization, and how to do it wrong</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-04 @ 17:14:26</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43257460"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43252994">
          <h3>
            <a class="item" href="https://spectrum.ieee.org/quantum-mechanics"
              >Why Quantum Engineering Is Emerging as a Distinct Industrial
              Sector</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-04 @ 10:51:59</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43252994"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43243110">
          <h3>
            <a
              class="item"
              href="https://leancrew.com/all-this/2025/03/a-sciam-bolt-puzzle/"
              >A Scientific American bolt puzzle</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-03 @ 16:06:51</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43243110"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43239284">
          <h3>
            <a
              class="item"
              href="https://pompeiisites.org/en/comunicati/pompeii-discovery-of-a-room-with-frescoes-depicting-the-initiation-into-the-mysteries-and-the-dionysiac-procession/"
              >Discovery of fresco portraying Dionysian mysteries at Pompeii</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-03 @ 07:47:49</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43239284"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
