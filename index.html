<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39710455">
          <h3>
            <a
              class="item"
              href="https://abovethelaw.com/2024/03/new-york-disbars-infamous-copyright-troll/"
              >New York Disbars Infamous Copyright Troll</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 23:53:20</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39710455"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39710454">
          <h3>
            <a
              class="item"
              href="https://www.openculture.com/2024/03/the-getty-makes-nearly-88000-art-images-free-to-use-however-you-like.html"
              >The Getty Makes Nearly 88,000 Art Images Free to Use However You
              Like</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 23:53:15</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39710454"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39709991">
          <h3>
            <a
              class="item"
              href="https://static01.nyt.com/newsgraphics/documenttools/0a813fc8e0ac1b6c/6c03d310-full.pdf"
              >Class Action Against General Motors LLC, OnStar LLC, LexisNexis
              Risk Solutions [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 23:00:24</span
              ><span class="points-container"
                >Points: <span class="points">250</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39709991"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39709981">
          <h3>
            <a
              class="item"
              href="https://www.hereisoregon.com/experiences/2024/03/oregon-outback-is-now-the-largest-dark-sky-sanctuary-in-the-world.html"
              >Oregon Outback is now the largest Dark Sky Sanctuary in the
              world</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 22:59:35</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39709981"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39709912">
          <h3>
            <a class="item" href="https://huyenchip.com/2024/03/14/ai-oss.html"
              >What I learned from looking at 900 most popular open source AI
              tools</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 22:51:25</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39709912"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39709835">
          <h3>
            <a
              class="item"
              href="https://www.macrumors.com/2024/03/14/apple-acquires-darwinai/"
              >Apple Buys DarwinAI Ahead of Major Generative AI Updates Coming
              in iOS 18</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 22:43:45</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39709835"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39709089">
          <h3>
            <a
              class="item"
              href="https://krebsonsecurity.com/2024/03/ceo-of-data-privacy-company-onerep-com-founded-dozens-of-people-search-firms/"
              >CEO of data privacy company Onerep.com founded dozens of
              people-search firms</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 21:17:33</span
              ><span class="points-container"
                >Points: <span class="points">251</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39709089"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39708957">
          <h3>
            <a
              class="item"
              href="https://www.pcmag.com/news/fcc-officially-raises-minimum-broadband-metric-from-25mbps-to-100mbps"
              >FCC Officially Raises Minimum Broadband Metric from 25Mbps to
              100Mbps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 21:04:14</span
              ><span class="points-container"
                >Points: <span class="points">298</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39708957"
                  >Comments</a
                ><span class="descendants">: 157</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39708591">
          <h3>
            <a class="item" href="https://go.dev/blog/execution-traces-2024"
              >More powerful Go execution traces</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 20:30:17</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39708591"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39707828">
          <h3>
            <a class="item" href="https://gnet.host/"
              >Gnet is the fastest networking framework in Go</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 19:14:12</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39707828"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39707356">
          <h3>
            <a
              class="item"
              href="https://generalrobots.substack.com/p/the-mythical-non-roboticist"
              >The Mythical Non-Roboticist</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 18:29:10</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39707356"
                  >Comments</a
                ><span class="descendants">: 66</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39707017">
          <h3>
            <a
              class="item"
              href="https://hazyresearch.stanford.edu/blog/2024-03-14-evo"
              >Learning From DNA: a grand challenge in biology</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 17:56:02</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39707017"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39706968">
          <h3>
            <a
              class="item"
              href="https://www.figma.com/blog/how-figmas-databases-team-lived-to-tell-the-scale/"
              >How Figma's databases team lived to tell the scale</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 17:51:30</span
              ><span class="points-container"
                >Points: <span class="points">400</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39706968"
                  >Comments</a
                ><span class="descendants">: 179</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39706582">
          <h3>
            <a
              class="item"
              href="https://kviklet.dev/blog/parsing-the-postgres-protocol/"
              >Parsing the Postgres protocol – logging executed statements</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 17:18:15</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39706582"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39706535">
          <h3>
            <a class="item" href="https://github.com/swapneel/hnsw-rust"
              >Show HN: A fast HNSW implementation in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 17:14:36</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39706535"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39706471">
          <h3>
            <a
              class="item"
              href="https://blog.beeper.com/p/new-beeper-android-app-open-beta"
              >New Beeper Android app – Open beta test</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 17:08:54</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39706471"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39706330">
          <h3>
            <a
              class="item"
              href="https://www.dwell.com/article/dtc-sofa-crisis-32304b9e"
              >Why are most sofas so bad?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 16:57:00</span
              ><span class="points-container"
                >Points: <span class="points">228</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39706330"
                  >Comments</a
                ><span class="descendants">: 296</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39706253">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39706253"
              >Launch HN: Meticulate (YC W24) – LLM pipelines for business
              research</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 16:51:23</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39706253"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <a href="https://youtu.be/aJ-slHcp32c)and"
                >https://youtu.be/aJ-slHcp32c)and</a
              >
              we’ve taken down the signup wall today so you can try it directly
              at <a href="https://meticulate.ai/">https://meticulate.ai/</a>.
              <p>
                Some background on “business research”: investment and
                consulting teams sink many hours a week into researching
                companies, markets, and products. This work is time-sensitive
                and exhausting, but crucial to big decisions like company
                acquisitions or pricing model changes.
              </p>
              <p>
                At large financial services firms, much of this work is
                offshored to external providers, who charge thousands of dollars
                per project and are often slow and low-quality. Small teams lack
                the budget and consistent flow of work to employ these
                resources. We’re building an automation solution that brings a
                fast, easily accessible, and defendable research resource.
              </p>
              <p>
                Meticulate uses LLMs to emulate analyst research processes. For
                example, to manually build a competitive landscape like this
                one:
                <a
                  href="https://meticulate.ai/workflow/65dbfeec44da6238abaaa059"
                  >https://meticulate.ai/workflow/65dbfeec44da6238abaaa059</a
                >, an analyst needs to spend ~2 hours digging through company
                websites, forums, and market reports. Meticulate replicates this
                same process of discovering, researching, and mapping companies
                using ~1500 LLM calls and ~500 webpages and database pulls,
                delivering results 50x faster at 50x less cost.
              </p>
              <p>
                At each step, we use an LLM as an agent to run searches, select
                and summarize articles, devise frameworks of analysis, and make
                small decisions like ranking and sorting companies. Compared to
                approaches where an LLM is being used directly to answer
                questions, this lets us deliver results that (a) come from real
                time searches and (b) are traceable back to the original
                sources.
              </p>
              <p>
                We’ve released two workflows: building competitive landscapes
                and market maps. We designed it with an investor running
                diligence on a company as the target use case but we’re seeing
                lots of other use cases that we didn’t originally have in
                mind—things like founders looking for alternative vendors for a
                product they’re purchasing; sales reps searching for more
                prospects like one they’ve already sold to; consultants trying
                to understand a new market they are unfamiliar with, and more.
              </p>
              <p>
                The main challenges we’ve been overcoming are preventing quality
                degradation along multi-step LLM pipelines where an error on one
                step can propagate widely, and dealing with a wide range of data
                quality. We’re working hard on our next set of workflows and
                would love for you to give it a try at
                <a href="https://meticulate.ai">https://meticulate.ai</a> and
                would appreciate feedback at any level!
              </p>
            </div>
          </section>
        </section>
        <section id="39706045">
          <h3>
            <a
              class="item"
              href="https://brianfitzgerald.xyz/prompt-augmentation/"
              >SuperPrompt: Better Text to Image Prompts in 77M Parameters</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 16:35:05</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39706045"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39706004">
          <h3>
            <a class="item" href="https://github.com/Skyvern-AI/skyvern"
              >Show HN: Skyvern – Browser automation using LLMs and computer
              vision</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 16:31:34</span
              ><span class="points-container"
                >Points: <span class="points">269</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39706004"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.skyvern.com">https://www.skyvern.com</a>), an
              open-source tool that uses LLMs and computer vision to help
              companies automate browser-based workflows. You can see some
              examples here:
              <a
                href="https://github.com/Skyvern-AI/skyvern#real-world-examples-of-skyvern"
                >https://github.com/Skyvern-AI/skyvern#real-world-examples-of...</a
              >
              and there's a demo video at
              <a href="https://github.com/Skyvern-AI/skyvern#demo"
                >https://github.com/Skyvern-AI/skyvern#demo</a
              >, along with some instructions on running it locally.
              <p>
                We provide a natural-language API to automate repetitive manual
                workflows that happen within the companies' backoffices. You can
                check out our code and play with Skyvern here:
                <a href="https://github.com/Skyvern-AI/Skyvern"
                  >https://github.com/Skyvern-AI/Skyvern</a
                >
              </p>
              <p>
                We talked to hundreds of companies about things they do in the
                background and found that most of them depend on repetitive
                manual workflows. The breadth of these workflows surprised us –
                most companies started off doing things manually, and eventually
                either hired people to scale the manual work, or wrote scripts
                using Selenium-like browser automation libraries.
              </p>
              <p>
                In these conversations, one common point stood out: scaling is a
                pain either way. Companies relying on hiring struggled to adjust
                team sizes with fluctuating demand. Companies using Selenium and
                similar tools had a different problem: it can take days or even
                weeks to get a new workflow automated, and then would require
                ongoing maintenance any time the underlying websites changed
                because their XPath based interaction logic suddenly became
                invalid.
              </p>
              <p>
                We felt like there was a way to get the best of both worlds with
                LLMs. We could use LLMs to reason through a website’s layout,
                while preserving the advantage of traditional browser
                automations allowing it to scale alongside demand. This led us
                to build Skyvern with a few core functionalities:
              </p>
              <p>
                1. Skyvern can operate on websites it’s never seen before by
                connecting visible elements with the natural language
                instructions provided to us. We use a blend of computer vision
                and DOM parsing to identify a set of possible actions on a
                website, and multi-modal LLMs to map the natural language
                instructions to the available actions on the page.
              </p>
              <p>
                2. Skyvern is resistant to website layout changes, as it doesn’t
                depend on any predetermined XPaths or other selectors. If a
                layout ever changes, we can leverage the methodology in #1 to
                complete the user-specified goal.
              </p>
              <p>
                3. Skyvern accepts a blob of information when navigating
                workflows—basically just a json blob of whatever information you
                want to put, and then we use LLMs to map that to information on
                the screen. For example: if you're generating a quote from
                Geico, they commonly ask “Were you eligible to drive at 21?”.
                The answer could be inferred from the driver receiving their
                license in 2012, and having a birth date of 1996.
              </p>
              <p>
                The above strategy adapts well to a number of use cases that
                Skyvern is helping companies with today: (1) Automating
                materials procurement by searching for, adding to cart, and
                transacting products through vendor websites that don’t have
                APIs; (2) Registering accounts, filing forms, and searching for
                information on government websites (ex: registering franchise
                tax information for Delaware C-corps); (3) Generating insurance
                quotes by completing multi-step dynamic forms on insurance
                websites; (4) Automating the job application process by mapping
                user-specified information (such as a Resume) to a job posting.
              </p>
              <p>
                And here are some use-cases we’re actively looking to expand
                into: (1) Automating post-checkup data entry with patient data
                inside medical EHR systems (ie submitting billing codes, adding
                notes, etc), an (2) Doing customer research ahead of discovery
                calls by analyzing landing pages and other metadata about a
                specific business.
              </p>
              <p>We’re still very early and would love to get your feedback!</p>
            </div>
          </section>
        </section>
        <section id="39704712">
          <h3>
            <a class="item" href="https://pykidos.github.io/"
              >Show HN: PyKidos, Teach Your Kid Python in the Browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 14:45:33</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39704712"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39703010">
          <h3>
            <a class="item" href="https://www.tesorio.com/careers#job-openings"
              >Tesorio (YC S15) Is Hiring a Head of Cloud
              Infrastructure/Operations (Remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 12:27:42</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39702604">
          <h3>
            <a
              class="item"
              href="https://www.techdirt.com/2024/03/13/oregon-passes-right-to-repair-law-apple-lobbied-to-kill/"
              >Oregon passes right-to-repair law Apple lobbied to kill</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 11:42:36</span
              ><span class="points-container"
                >Points: <span class="points">515</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39702604"
                  >Comments</a
                ><span class="descendants">: 131</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39702479">
          <h3>
            <a
              class="item"
              href="https://blogs.loc.gov/international-collections/2018/03/the-good-soldier-vejk/"
              >The Good Soldier Švejk (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 11:23:13</span
              ><span class="points-container"
                >Points: <span class="points">276</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39702479"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39702457">
          <h3>
            <a class="item" href="https://sondehub.org"
              >Real time weather balloon tracking</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 11:18:09</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39702457"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39701848">
          <h3>
            <a class="item" href="https://mjg59.dreamwidth.org/69507.html"
              >Digital forgeries are hard</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 09:26:14</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39701848"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39701177">
          <h3>
            <a
              class="item"
              href="https://macleans.ca/society/sen%cc%93a%e1%b8%b5w-vancouver/"
              >Vancouver’s new mega-development is big, ambitious and
              Indigenous</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 06:52:40</span
              ><span class="points-container"
                >Points: <span class="points">237</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39701177"
                  >Comments</a
                ><span class="descendants">: 260</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39700692">
          <h3><a class="item" href="https://www.resolume.com/">Resolume</a></h3>
          <section>
            <h4>
              <span>2024-03-14 @ 04:47:45</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39700692"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39700256">
          <h3>
            <a
              class="item"
              href="https://spreadsheets-are-all-you-need.ai/index.html"
              >Spreadsheets are all you need</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-14 @ 03:15:14</span
              ><span class="points-container"
                >Points: <span class="points">1113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39700256"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39684567">
          <h3>
            <a
              class="item"
              href="https://blogs.windows.com/windowsdeveloper/2024/03/06/sandboxing-python-with-win32-app-isolation/"
              >Sandboxing Python with Win32 App Isolation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 20:32:46</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39684567"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
