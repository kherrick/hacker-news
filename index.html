<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39114576">
          <h3>
            <a
              class="item"
              href="https://elphnt.io/build-your-own-max-for-live-devices/"
              >Learn How to Build Your Own Max for Live Devices</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 07:24:12</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39114576"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39114453">
          <h3>
            <a
              class="item"
              href="https://www.mcmillen.dev/language_checklist.html"
              >Programming Language Checklist (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 06:59:43</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39114453"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39114192">
          <h3>
            <a
              class="item"
              href="https://www.cnn.com/2023/12/19/business/us-production-oil-reserves-crude/index.html"
              >The United States is producing more oil than any country in
              history</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 06:10:52</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39114192"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39113972">
          <h3>
            <a class="item" href="https://github.com/nlmatics/nlm-ingestor"
              >Show HN: Open-source Rule-based PDF parser for RAG</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 05:31:11</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39113972"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>The PDF Parser offers the following features:</p>
              <p>
                * Sections and subsections along with their levels. * Paragraphs
                - combines lines. * Links between sections and paragraphs. *
                Tables along with the section the tables are found in. * Lists
                and nested lists. * Join content spread across pages. * Removal
                of repeating headers and footers. * Watermark removal. * OCR
                with boundary boxes
              </p>
            </div>
          </section>
        </section>
        <section id="39113879">
          <h3>
            <a class="item" href="https://teachyourselfmath.app/"
              >Show HN: I wished for a site with a growing list of math
              problems, I built it</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 05:12:49</span
              ><span class="points-container"
                >Points: <span class="points">47</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39113879"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
            <div class="text">
              <p>
                teachyourselfmath is a side project that was born out of this
                need. At its core, it is a math PDF extraction engine. The
                engine has some machine learning going on behind the scenes to
                extract math problems in LaTeX from any image or document.
              </p>
              <p>
                A little bit about me: I am Vivek, a software engineer based out
                of India with a diverse set of interests including math. This
                project is close to my heart for many different reasons and
                nothing would make me happier than finding people on the
                internet who would find this website to be useful.
              </p>
              <p>I’d love to hear your feedback on this. Thanks!</p>
            </div>
          </section>
        </section>
        <section id="39113583">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39113583"
              >Ask HN: Does (or why does) anyone use MapReduce anymore?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 04:20:36</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39113583"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
            <div class="text">
              Excluding the Hadoop ecosystem, I see some references to MapReduce
              in other database and analysis tools (e.g., MatLab). My perception
              was that Spark completely superseded MapReduce. Are there just
              different implementations of MapReduce and the one that Hadoop
              implemented was replaced by Spark?
            </div>
          </section>
        </section>
        <section id="39113168">
          <h3>
            <a class="item" href="https://overpass-turbo.eu/"
              >Overpass Turbo: A Web Based Data Mining Tool for OpenStreetMap</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 03:13:32</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39113168"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39112907">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-01-global-carbon-overcredit-cookstove-greenhouse.html"
              >Global carbon markets overcredit cookstove greenhouse gas
              reductions by 10</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 02:31:11</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39112907"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39112848">
          <h3>
            <a
              class="item"
              href="https://www.fishmanafnewsletter.com/p/balancing-engineering-cultures-debate-vs-do"
              >Balancing engineering cultures: Debate everything vs. just tell
              me what to build</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 02:21:10</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39112848"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39112486">
          <h3>
            <a
              class="item"
              href="https://kobzol.github.io/rust/cargo/2024/01/23/making-rust-binaries-smaller-by-default.html"
              >Making Rust binaries smaller by default</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 01:29:02</span
              ><span class="points-container"
                >Points: <span class="points">84</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39112486"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39112346">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39112346"
              >Imbue (Formerly Generally Intelligent) (YC S17) Is Hiring a
              Research Scientist</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 01:09:25</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                Machine Learning Engineer (SF or Remote, Contract or Full-time):
                <a
                  href="https://jobs.lever.co/imbue/9411e2ec-502a-403f-a39a-0d44c676b6af?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/9411e2ec-502a-403f-a39a-0d44c676...</a
                >
              </p>
              <p>
                Research Scientist (SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/6c25a25c-35ec-4d7b-8d7e-40e9c4c85fba?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/6c25a25c-35ec-4d7b-8d7e-40e9c4c8...</a
                >
              </p>
              <p>
                Machine Learning Research Engineer (SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/c2f4a435-1eef-489a-9972-fba95e4a0296?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/c2f4a435-1eef-489a-9972-fba95e4a...</a
                >
              </p>
              <p>
                Systems Engineer (Remote or SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/7afede07-8f22-4c49-b247-19e1a0ca6953?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/7afede07-8f22-4c49-b247-19e1a0ca...</a
                >
              </p>
              <p>
                Technical Lead Manager (SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/9ce44b67-04ca-4da1-b845-6995c62aaf8b?lever-origin=applied&amp;lever-source%5B%5D=YCombinator"
                  >https://jobs.lever.co/imbue/9ce44b67-04ca-4da1-b845-6995c62a...</a
                >
              </p>
              <p>
                Infrastructure Engineer (Remote or SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/e66a55a3-a117-406c-9b07-8ba055047cea?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/e66a55a3-a117-406c-9b07-8ba05504...</a
                >
              </p>
              <p>
                Senior Software Engineer (Remote or SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/38a93a78-fb8d-4614-bb12-b6277a7f874e?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/38a93a78-fb8d-4614-bb12-b6277a7f...</a
                >
              </p>
              <p>
                Engineering Manager (SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/75fac008-22e5-49ab-9f4e-a4c459b52b41?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/75fac008-22e5-49ab-9f4e-a4c459b5...</a
                >
              </p>
              <p>
                Founding Product Engineer (SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/0764f1c0-89e5-452f-ab41-ff1d1ba8fd6a?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/0764f1c0-89e5-452f-ab41-ff1d1ba8...</a
                >
              </p>
              <p>
                Head of Data Engineering (SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/05c940e7-ec08-4eb1-87c1-3dbb05a91e76?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/05c940e7-ec08-4eb1-87c1-3dbb05a9...</a
                >
              </p>
              <p>
                Prototype Engineer (SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/d856bff5-776c-477d-a621-ffbe79bf429f?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/d856bff5-776c-477d-a621-ffbe79bf...</a
                >
              </p>
              <p>
                Software Engineer, Data (SF, Full-time):
                <a
                  href="https://jobs.lever.co/imbue/b7e42bb4-e3e4-4022-a563-556f890bbe68?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/b7e42bb4-e3e4-4022-a563-556f890b...</a
                >
              </p>
              <p>
                Technical Interviewer (Remote or SF, Full-time/Contract):
                <a
                  href="https://jobs.lever.co/imbue/8443234d-a8c7-439f-bb8a-8142e713edc4?lever-origin=applied&amp;lever-source%5B%5D=Y%20Combinator"
                  >https://jobs.lever.co/imbue/8443234d-a8c7-439f-bb8a-8142e713...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39111991">
          <h3>
            <a class="item" href="http://worrydream.com/MagicInk/"
              >Magic Ink (2006)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-24 @ 00:28:13</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39111991"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39111539">
          <h3>
            <a
              class="item"
              href="https://reason.com/2024/01/23/appeals-court-fbis-safe-deposit-box-seizures-violated-fourth-amendment/"
              >Appeals Court: FBI's Safe-Deposit Box Seizures Violated Fourth
              Amendment</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 23:36:24</span
              ><span class="points-container"
                >Points: <span class="points">267</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39111539"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39111114">
          <h3>
            <a class="item" href="https://github.com/ashvardanian/SimSIMD"
              >SimSIMD: Hardware-accelerated similarity metrics and distance
              functions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 22:53:11</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39111114"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39110434">
          <h3>
            <a class="item" href="https://waterwaymap.org">Waterway Map</a>
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 21:51:06</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39110434"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39109811">
          <h3>
            <a
              class="item"
              href="https://www.maddyness.com/uk/2024/01/17/oxccu-converting-co₂-into-fuels-chemicals-and-plastics/"
              >Oxxcu, converting CO₂ into fuels, chemicals and plastics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 21:04:59</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39109811"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39109591">
          <h3>
            <a class="item" href="https://model.energy/future/"
              >Future power systems with today's weather</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 20:49:58</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39109591"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39109481">
          <h3>
            <a
              class="item"
              href="https://ai.stanford.edu/~zayd/why-is-machine-learning-hard.html"
              >Why is machine learning 'hard'? (2016)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 20:43:25</span
              ><span class="points-container"
                >Points: <span class="points">199</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39109481"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39109304">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2401.12070"
              >Spotting LLMs with Binoculars: Zero-Shot Detection of
              Machine-Generated Text</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 20:29:35</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39109304"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39107854">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2024-01-23/apple-car-ev-set-to-debut-in-2028-with-limited-autonomous-driving"
              >Apple dials back car's self-driving features and delays launch to
              2028</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 18:53:18</span
              ><span class="points-container"
                >Points: <span class="points">265</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39107854"
                  >Comments</a
                ><span class="descendants">: 504</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39107620">
          <h3>
            <a
              class="item"
              href="https://crowsonkb.github.io/hourglass-diffusion-transformers/"
              >Direct pixel-space megapixel image generation with diffusion
              models</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 18:38:58</span
              ><span class="points-container"
                >Points: <span class="points">223</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39107620"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39106972">
          <h3>
            <a class="item" href="https://sourcegraph.com/blog/slow-to-simd"
              >From slow to SIMD: A Go optimization story</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 17:57:31</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39106972"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39106464">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/01/23/health/deaf-gene-therapy.html"
              >Gene therapy allows an 11-year-old boy to hear</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 17:26:34</span
              ><span class="points-container"
                >Points: <span class="points">276</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39106464"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39106355">
          <h3>
            <a
              class="item"
              href="https://www.404media.co/these-are-the-notorious-nsa-furby-documents-showing-spy-agency-freaking-out-about-childrens-toy/"
              >The NSA Furby Documents</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 17:21:04</span
              ><span class="points-container"
                >Points: <span class="points">210</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39106355"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39104504">
          <h3>
            <a class="item" href="https://bernsteinbear.com/blog/scrapscript/"
              >scrapscript.py</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 15:19:22</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39104504"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39100406">
          <h3>
            <a
              class="item"
              href="https://www.washingtonpost.com/books/2024/01/19/rebels-clinic-frantz-fanon-biography-adam-shatz-review/"
              >The Rebel’s Clinic: A biography of Frantz Fanon</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 07:05:38</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39100406"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39100151">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/food/2024/jan/23/nicholas-saunders-forgotten-genius-changed-british-food"
              >Hippy, capitalist, guru, grocer: Nicholas Saunders and
              "Alternative London"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 06:13:32</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39100151"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39097504">
          <h3>
            <a class="item" href="https://www.abortretry.fail/p/the-itanic-saga"
              >The Itanic Saga: The History of VLIW and Itanium</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-23 @ 00:14:45</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39097504"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39094875">
          <h3>
            <a
              class="item"
              href="https://github.com/Dicklesworthstone/introduction_to_temporal_logic"
              >An introduction to temporal logic and how it can be used to
              analyze concurrency</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 20:21:48</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39094875"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39088075">
          <h3>
            <a
              class="item"
              href="https://jmglov.net/blog/2024-01-17-clickr.html"
              >Clickr, or a young man's Flickr clonejure</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-01-22 @ 10:35:05</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39088075"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
