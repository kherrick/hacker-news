<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="37035178">
          <h3>
            <a class="item" href="https://mofi.loud.red/blog/wasm-and-workers"
              >Snappy UIs with WebAssembly and Web Workers</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 14:45:28</span
              ><span class="points-container"
                >Points: <span class="points">4</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37035178"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37034994">
          <h3>
            <a
              class="item"
              href="https://matklad.github.io/2023/08/06/fantastic-learning-resources.html"
              >Fantastic Learning Resources</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 14:33:02</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37034994"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37034912">
          <h3>
            <a
              class="item"
              href="https://bugs.chromium.org/p/chromium/issues/detail?id=1451807"
              >Request: Re-open JPEG XL issue</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 14:26:06</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37034912"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37034906">
          <h3>
            <a
              class="item"
              href="https://chipsandcheese.com/2023/08/04/sandy-bridge-setting-intels-modern-foundation/"
              >Sandy Bridge: Setting Intel’s Modern Foundation</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 14:25:52</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37034906"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37034654">
          <h3>
            <a
              class="item"
              href="https://omarshehata.me/notebook/glimpse_into_recent_news_in_egypt"
              >A brief glimpse at recent events in Egypt</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 14:08:04</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37034654"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37034575">
          <h3>
            <a class="item" href="https://github.com/axilla-io/ax"
              >Show HN: Axilla – Open-source TypeScript framework for LLM
              apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 14:00:38</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37034575"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>
                Ben and I met while working at Cruise on the ML platform for
                self-driving cars. We spent many years there and learned the
                hard way that shipping AI is not quite the same as shipping
                regular code. There are many parts of the ML lifecycle, e.g.,
                mining, processing, and labeling data and training, evaluating,
                and deploying models. Although none of them are rocket science,
                most of the inefficiencies tend to come from integrating them
                together. At Cruise, we built an integrated framework that
                accelerated the speed of shipping models to the car by 80%.
              </p>
              <p>
                With the explosion of generative AI, we are seeing software
                teams building applications and features with the same
                inefficiencies we experienced at Cruise.
              </p>
              <p>
                This got us excited about building an opinionated, end-to-end
                platform. We started building in Python but quickly noticed that
                most of the teams we talked to weren’t using Python, but instead
                building in TypeScript. This is because most teams are not
                training their own models, but rather using foundational ones
                served by third parties over HTTP, like openAI, anthropic or
                even OSS ones from hugging face.
              </p>
              <p>
                Because of this, we’ve decided to build Axilla as a TypeScript
                first library.
              </p>
              <p>
                Our goal is to build a modular framework that can be adopted
                incrementally yet benefits from full integration. For example,
                the production responses coming from the LLM should be able to
                be sent — with all necessary metadata — to the eval module or
                the labeling tooling.
              </p>
              <p>
                So far, we’ve shipped 2 modules, that are available to use today
                on npm:
              </p>
              <p>
                * *axgen*: focused on RAG type workflows. Useful if you want to
                ingest data, get the embeddings, store it in a vector store and
                then do similarity search retrieval. It’s how you give LLMs
                memory or more context about private data sources.
              </p>
              <p>
                * *axeval*: a lightweight evaluation library, that feels like
                jest (so, like unit tests). In our experience, evaluation should
                be really easy to setup, to encourage continuous quality
                monitoring, and slowly build ground truth datasets of edge cases
                that can be used for regression testing, and fine-tuning.
              </p>
              <p>
                We are working on a serving module and a data processing one
                next and would love to hear what functionality you need us to
                prioritize!
              </p>
              <p>
                We built an open-source demo UI for you to discover the
                framework more:
                <a href="https://github.com/axilla-io/demo-ui"
                  >https://github.com/axilla-io/demo-ui</a
                >
              </p>
              <p>
                And here's a video of Nicholas walking through the UI that gives
                an idea of what axgen can do:
                <a
                  href="https://www.loom.com/share/458f9b6679b740f0a5c78a33fffee3dc"
                  >https://www.loom.com/share/458f9b6679b740f0a5c78a33fffee3dc</a
                >
              </p>
              <p>
                We’d love to hear your feedback on the framework, you can let us
                know here, create an issue on the GitHub repo or send me an
                email at nicholas@axilla.io
              </p>
              <p>And of course, contributions welcome!</p>
            </div>
          </section>
        </section>
        <section id="37034350">
          <h3>
            <a
              class="item"
              href="https://archive.org/details/mit_press_open_access?tab=collection"
              >MIT Press: Open Access Materials</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 13:43:25</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37034350"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37034145">
          <h3>
            <a class="item" href="https://the.webm.ink/not-using-zoom"
              >Not Using Zoom</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 13:26:38</span
              ><span class="points-container"
                >Points: <span class="points">187</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37034145"
                  >Comments</a
                ><span class="descendants">: 103</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37034021">
          <h3>
            <a
              class="item"
              href="https://nikmav.blogspot.com/2011/12/self-modifying-code-using-gcc.html"
              >Self-modifying code using GCC (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 13:16:15</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37034021"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37033899">
          <h3>
            <a
              class="item"
              href="https://www.espn.com/nba/story/_/id/36146138/million-dollar-shot-michael-jordan-chicago-bulls-1993"
              >The $1M shot that changed sports contests</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 13:07:13</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37033899"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37033753">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=37033753"
              >Launch HN: GitStart (YC S19) – Remote junior devs working on
              production PRs</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 12:54:18</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37033753"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
            <div class="text">
              <a href="https://gitstart.com/">https://gitstart.com/</a>). We’re
              building a service for engineering teams to assign tickets and get
              back PRs. Here’s a video of how it works:
              <a
                href="https://www.loom.com/share/61d46a5b07e04b45a51af2a5008ee173"
                >https://www.loom.com/share/61d46a5b07e04b45a51af2a5008ee173</a
              >
              <p>
                We recruit devs who want to grow from remote countries, to work
                full-time on these tickets and review each other’s PRs. For tech
                teams it’s pay as you go, and they only pay if they merge the
                PRs (we pay our devs a base regardless). GitStart is very
                personal to me because I struggled myself to start my career as
                a junior dev. Being born in Pakistan made it super hard to find
                my first remote job. Things changed with Google Summer of Code,
                which was the first time I got paid to contribute to a large
                production codebase.
              </p>
              <p>
                When I became a staff engineer, I started mentoring junior devs
                on their solo projects. I then realized what they really needed
                was production code experience, so I started sending them
                tickets from my backlog to grow them through code reviews. I
                also paid them for it. They learned a lot and I got a lot done,
                which started GitStart.
              </p>
              <p>
                That’s why, in the description above, we say “devs who want to
                grow”. This is key to what we do—we are not just a body shop or
                middleman, and we don’t charge by the hour. We provide useful
                mentorship to junior devs. We want to be a meaningful part of
                their career path.
              </p>
              <p>
                Our thesis (to use that slightly pretentious word) is that the
                economics work better this way as well. There is a lot of junior
                dev talent in these countries whose potential will bever be
                realized by hourly piecework. What’s needed are longer term
                relationships and work engagements, over the course of which a
                junior dev can learn and grow on a large production codebase.
                Much of this has to do with learning the culture of effective
                tech teams.
              </p>
              <p>
                On the other side, effective tech teams don’t want hourly
                piecework either. Clients tell us they love having developers
                dedicated to their project, becoming more familiar with the code
                over time. This is the way for value to be maximized on both
                sides.
              </p>
              <p>
                A number of commercial open source repos already use us, so you
                can check out some of the PRs created by GitStart here:
              </p>
              <p>
                Cal.com:
                <a
                  href="https://github.com/calcom/cal.com/pulls?q=is%3Apr+author%3Agitstart-calcom+is%3Aclosed"
                  >https://github.com/calcom/cal.com/pulls?q=is%3Apr+author%3Ag...</a
                >
              </p>
              <p>
                SourceGraph:
                <a
                  href="https://github.com/sourcegraph/sourcegraph/pulls?q=is%3Apr+author%3Agitstart-sourcegraph+is%3Aclosed"
                  >https://github.com/sourcegraph/sourcegraph/pulls?q=is%3Apr+a...</a
                >
              </p>
              <p>
                StoryBooks:
                <a
                  href="https://github.com/storybookjs/storybook/pulls?q=is%3Apr+author%3Agitstart+is%3Aclosed"
                  >https://github.com/storybookjs/storybook/pulls?q=is%3Apr+aut...</a
                >
              </p>
              <p>
                Strapi:
                <a
                  href="https://github.com/strapi/strapi/pulls?q=is%3Aclosed+is%3Apr+author%3Agitstart"
                  >https://github.com/strapi/strapi/pulls?q=is%3Aclosed+is%3Apr...</a
                >
              </p>
              <p>
                Supabase:
                <a
                  href="https://github.com/supabase/supabase/pulls?q=is%3Apr+author%3Agitstart+is%3Aclosed"
                  >https://github.com/supabase/supabase/pulls?q=is%3Apr+author%...</a
                >
              </p>
              <p>
                Twenty:
                <a
                  href="https://github.com/twentyhq/twenty/pulls?q=is%3Apr+author%3Agitstart-twenty+is%3Aclosed"
                  >https://github.com/twentyhq/twenty/pulls?q=is%3Apr+author%3A...</a
                >
              </p>
              <p>
                Our main technical challenge has been securing code sharing. One
                solution was building GitSlice, which enables creating sub-repos
                that sync with the upstream repo. When GitStart devs create PRs
                on the platform, GitSlice syncs them upstream while pulling back
                CI/CD checks and review comments. This enables our devs to
                contribute with limited codebase access.
              </p>
              <p>
                To prevent slices from breaking, we verify they run within a
                docker container, which also enables us to build review
                environments. Fun fact: we managed to support native iOS and
                Android codebases by building and running them on appetize.io
                instead of docker.
              </p>
              <p>
                There have been countless attempts at this space so we would
                love to hear your feedback on how we approached this problem or
                your past experiences working with junior devs in this way. We
                look forward to a good conversation!
              </p>
            </div>
          </section>
        </section>
        <section id="37033702">
          <h3>
            <a
              class="item"
              href="https://www.santafe.edu/research/results/working-papers/the-future-of-time-series"
              >The Santa Fe Time Series Prediction and Analysis Competition</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 12:49:49</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37033702"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37033475">
          <h3>
            <a
              class="item"
              href="https://www.techpowerup.com/312122/psa-intel-graphics-drivers-now-collect-telemetry-by-default"
              >PSA: Intel Graphics Drivers Now Collect Telemetry by Default</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 12:26:36</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37033475"
                  >Comments</a
                ><span class="descendants">: 150</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37033403">
          <h3>
            <a
              class="item"
              href="https://jvns.ca/blog/2023/08/07/tactics-for-writing-in-public/"
              >Some Tactics for Writing in Public</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 12:18:41</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37033403"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37033398">
          <h3>
            <a
              class="item"
              href="https://www.fastcompany.com/90933474/taylor-swifts-eras-tour-is-a-reminder-that-social-media-is-not-real-life"
              >Vocal minority sets online discourse, distorting real-life
              perception</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 12:18:11</span
              ><span class="points-container"
                >Points: <span class="points">157</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37033398"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37033014">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2023/08/turning-my-framework-laptop-into-a-tiny-desktop-was-fun-now-it-needs-a-job/"
              >Turning my Framework laptop into a tiny desktop</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 11:27:03</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37033014"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37031944">
          <h3>
            <a
              class="item"
              href="https://getwaitlist.com/blog/solo-dev-startup-stack"
              >My frugal indie dev startup stack (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 08:45:21</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37031944"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37031724">
          <h3>
            <a
              class="item"
              href="https://forums.spacebattles.com/threads/claims-of-room-temperature-and-ambient-pressure-superconductor.1106083/page-13"
              >Compilation of claims/reports of LK-99 replication efforts</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 08:12:19</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37031724"
                  >Comments</a
                ><span class="descendants">: 243</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37031673">
          <h3>
            <a class="item" href="https://gitlab.com/hsleisink/orb"
              >Orb is a free and open source web desktop</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 08:07:33</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37031673"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37030258">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/books/2023/aug/01/the-slip-new-york-agnes-martin-ellsworth-kelly"
              >Remembering the Slip: the Manhattan street that birthed a
              generation of artists</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 04:46:12</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37030258"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37030230">
          <h3>
            <a
              class="item"
              href="https://yalereview.org/article/kamran-javadizadeh-ahead-time"
              >Ahead of Time: On Poetry and Mourning</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 04:41:51</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37030230"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37030159">
          <h3>
            <a class="item" href="https://github.com/chebykinn/sedmario"
              >Sedmario: NES Super Mario Bros level 1 written in pure sed
              (2015)</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 04:32:11</span
              ><span class="points-container"
                >Points: <span class="points">166</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37030159"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37030044">
          <h3>
            <a
              class="item"
              href="https://www.fastcompany.com/90930810/google-maps-eyesore-5-examples-apple-maps"
              >Google Maps has become an eyesore</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 04:16:28</span
              ><span class="points-container"
                >Points: <span class="points">606</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37030044"
                  >Comments</a
                ><span class="descendants">: 540</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37030027">
          <h3>
            <a
              class="item"
              href="https://calnewport.com/edsger-dijkstras-one-day-workweek/"
              >Edsger Dijkstra’s One-Day Workweek</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-07 @ 04:14:24</span
              ><span class="points-container"
                >Points: <span class="points">172</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37030027"
                  >Comments</a
                ><span class="descendants">: 70</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37026592">
          <h3><a class="item" href="https://oimo.io/works/water/">Water</a></h3>
          <section>
            <h4>
              <span>2023-08-06 @ 20:52:05</span
              ><span class="points-container"
                >Points: <span class="points">1099</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37026592"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37021933">
          <h3>
            <a
              class="item"
              href="https://clojure-goes-fast.com/blog/clojures-deadly-sin/"
              >Critique of Lazy Sequences in Clojure</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-06 @ 13:54:17</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37021933"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37011977">
          <h3>
            <a
              class="item"
              href="https://www.jpl.nasa.gov/news/nasa-helps-spot-wine-grape-disease-from-skies-above-california"
              >NASA helps spot wine grape disease from skies above California</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-05 @ 13:47:59</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37011977"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37011776">
          <h3>
            <a
              class="item"
              href="https://www.physics.ox.ac.uk/news/number-theory-and-evolutionary-genetics"
              >Unexpected link between pure mathematics and genetics</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-05 @ 13:24:02</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37011776"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="37008627">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=O9E77WZGCpQ"
              >The process of making fake food [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-05 @ 03:13:31</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=37008627"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="36995940">
          <h3>
            <a
              class="item"
              href="https://fly.io/blog/livebook-for-app-documentation/"
              >Elixir Livebook is a secret weapon for documentation</a
            >
          </h3>
          <section>
            <h4>
              <span>2023-08-04 @ 05:51:40</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=36995940"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
