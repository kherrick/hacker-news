<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="47048633">
          <h3>
            <a class="item" href="https://priceperball.net/"
              >Show HN: Price Per Ball – Site that sorts golf balls on Amazon by
              price per ball</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 15:36:46</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47048633"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
            <div class="text">
              <p>
                For someone who can't always keep it in the fairway, golf balls
                can get rather expensive, so I decided to build a way for me to
                view Amazon listings by how much they cost per ball in the hopes
                of finding some good deals. Hence the name of the website.
              </p>
              <p>
                The site is hosted on Cloudflare pages and I use Github actions
                to trigger a python script that fetches and checks the prices.
                It runs twice a day. If the script encounters any new ASINs, it
                stores them for future checks, so the list of golf balls being
                price checked should keep growing over time. Changes are then
                pushed to Cloudflare pages.
              </p>
              <p>
                There can sometimes be some pricing oddities when the product
                title says one count, but the unit count being returned from
                Amazon is another number, so I'm trying to add some checks to
                help accommodate for that. Right now, I just have some manual
                overrides for certain ASINs, but I'm looking to improve on it in
                the future.
              </p>
              <p>The frontend is just some basic HTML, CSS and JavaScript.</p>
              <p>
                Listings on Amazon can be inconsistent sometimes because, for
                example, product titles will say used balls, but the seller
                lists them as new. I added some filters to that allow you to
                exclude used/recycled balls, plastic golf balls, etc... You can
                also filter by brand.
              </p>
              <p>
                Give it a spin and let me know if you run into any issues or
                have any feature ideas to make it more useful.
              </p>
            </div>
          </section>
        </section>
        <section id="47048248">
          <h3>
            <a
              class="item"
              href="https://www.governance.fyi/p/americas-pensions-cant-beat-a-vanguard"
              >America's Pensions Can't Beat Vanguard but They Can Close Your
              Hospital</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 15:04:18</span
              ><span class="points-container"
                >Points: <span class="points">167</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47048248"
                  >Comments</a
                ><span class="descendants">: 239</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47048004">
          <h3>
            <a class="item" href="https://aeris.edbn.me/?city=SFO"
              >I converted 2D conventional flight tracking into 3D</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 14:43:14</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47048004"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47047443">
          <h3>
            <a
              class="item"
              href="https://utcc.utoronto.ca/~cks/space/blog/unix/ViUndoMyViews"
              >Undo in Vi and Its Successors</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 13:47:56</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47047443"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47045612">
          <h3>
            <a class="item" href="https://blog.tomaszdunia.pl/grapheneos-eng/"
              >GrapheneOS – Break Free from Google and Apple</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 10:02:36</span
              ><span class="points-container"
                >Points: <span class="points">786</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47045612"
                  >Comments</a
                ><span class="descendants">: 500</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47044179">
          <h3>
            <a class="item" href="https://gabrielcabrera.co/"
              >Xbox UI Portfolio Site</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 05:53:31</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47044179"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47042895">
          <h3>
            <a
              class="item"
              href="https://surfingcomplexity.blog/2026/02/16/poor-deming-never-stood-a-chance/"
              >Poor Deming never stood a chance</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-17 @ 02:13:37</span
              ><span class="points-container"
                >Points: <span class="points">178</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47042895"
                  >Comments</a
                ><span class="descendants">: 109</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47041836">
          <h3>
            <a class="item" href="https://forestrydiary.com/"
              >Show HN: Scanned 1927-1945 Daily USFS Work Diary</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 23:40:33</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47041836"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                <a href="https://forestrydiary.com/"
                  >https://forestrydiary.com/</a
                >
              </p>
              <p>
                This is one of those projects I've sat on for years, but with
                Claude and Mistral helping with the handwriting recognition, and
                even helping me write a custom scanning app that would auto scan
                each page and put it into a database as I assembled everything.
              </p>
              <p>
                As far as I know, this is the only US Forestry Diary that has
                been fully scanned in and published. I understand that there are
                other diaries in some collections, but none have been scanned
                in. I hope this helps somebody. Please let me know if it does.
              </p>
              <p>
                This is the sort of project Claude and AI can help with - A
                personal project that sits on the shelf forever, but now a
                reasonable project that can be published in my spare time. I'm
                not trying to earn money on this, but just improving our
                knowledge and history just a little bit.
              </p>
            </div>
          </section>
        </section>
        <section id="47041456">
          <h3>
            <a
              class="item"
              href="https://www.docker.com/blog/run-nanoclaw-in-docker-shell-sandboxes/"
              >Running NanoClaw in a Docker Shell Sandbox</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 22:53:02</span
              ><span class="points-container"
                >Points: <span class="points">154</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47041456"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47040524">
          <h3>
            <a
              class="item"
              href="https://dolphin-emu.org/blog/2026/02/16/rise-of-the-triforce/"
              >Rise of the Triforce</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 21:24:04</span
              ><span class="points-container"
                >Points: <span class="points">381</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47040524"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47040375">
          <h3>
            <a class="item" href="https://github.com/zachlatta/freeflow"
              >Show HN: Free alternative to Wispr Flow, Superwhisper, and
              Monologue</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 21:10:44</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47040375"
                  >Comments</a
                ><span class="descendants">: 113</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47039478">
          <h3>
            <a
              class="item"
              href="https://blog.sturdystatistics.com/posts/show_hn/"
              >State of Show HN: 2025</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 19:55:23</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47039478"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47038731">
          <h3>
            <a
              class="item"
              href="https://essays.debugyourpain.com/p/you-are-not-just-your-brain"
              >Neurons outside the brain</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 18:54:37</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47038731"
                  >Comments</a
                ><span class="descendants">: 74</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47038546">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/innovation/this-14-year-old-is-using-origami-to-design-emergency-shelters-that-are-sturdy-cost-efficient-and-easy-to-deploy-180988179/"
              >14-year-old Miles Wu folded origami pattern that holds 10k times
              its own weight</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 18:41:50</span
              ><span class="points-container"
                >Points: <span class="points">862</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47038546"
                  >Comments</a
                ><span class="descendants">: 181</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47038318">
          <h3>
            <a
              class="item"
              href="https://jkap.io/token-anxiety-or-a-slot-machine-by-any-other-name/"
              >"Token anxiety", a slot machine by any other name</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 18:23:36</span
              ><span class="points-container"
                >Points: <span class="points">229</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47038318"
                  >Comments</a
                ><span class="descendants">: 207</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47035560">
          <h3>
            <a
              class="item"
              href="https://blog.dmcc.io/journal/2026-bluetooth-privacy-bluehood/"
              >What your Bluetooth devices reveal</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 14:39:32</span
              ><span class="points-container"
                >Points: <span class="points">502</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47035560"
                  >Comments</a
                ><span class="descendants">: 182</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47033954">
          <h3>
            <a class="item" href="https://glitchycam.com"
              >Show HN: Glitchy camera – a circuit-bent camera simulator in the
              browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 11:57:01</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47033954"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <p>
                Here are some photos taken:
                <a href="https://glitchycam.com/gallery"
                  >https://glitchycam.com/gallery</a
                >
              </p>
              <p>
                I intentionally leaned towards skeuomorphic design for
                nostalgia. I miss the days where I'd spend hours making a button
                to look like a physical button. Here I chose to make it look
                like a "good enough" Teenage Engineering device UI.
              </p>
              <p>
                I tested/used GPT-5.3-Codex to build this from scratch, since
                there was a lot of hype around it on X. Maybe I wasn’t using it
                right, but I found it needed a lot of code cleanup at every step
                and a lot of hand holding along the way. It missed
                details/nuances and didn't land the skeuomorphic buttons or the
                interaction polish. It mostly helped with boilerplate where
                there wasn't much thinking/detailing. It did give a basic
                starting point for the effect calculations, but didn't really
                move the needle on the details.
              </p>
              <p>
                Please give it a go and let me know what you think - your photos
                and video never leave your browser (you can download them if you
                choose to). Everything is processed locally in your browser
                (works offline), nothing is uploaded or seen by anyone.
              </p>
            </div>
          </section>
        </section>
        <section id="47031334">
          <h3>
            <a class="item" href="https://jmail.world/jemini"
              >Show HN: Jemini – Gemini for the Epstein Files</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-16 @ 05:53:03</span
              ><span class="points-container"
                >Points: <span class="points">444</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47031334"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
            <div class="text">
              <i>Show HN: JeffTube</i> -
              <a href="https://news.ycombinator.com/item?id=47030797"
                >https://news.ycombinator.com/item?id=47030797</a
              >
            </div>
          </section>
        </section>
        <section id="47022270">
          <h3>
            <a
              class="item"
              href="https://garbagecollected.org/2017/01/31/four-column-ascii/"
              >Four Column ASCII (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-15 @ 09:15:16</span
              ><span class="points-container"
                >Points: <span class="points">292</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47022270"
                  >Comments</a
                ><span class="descendants">: 69</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47021711">
          <h3>
            <a
              class="item"
              href="https://notnotp.com/notes/hamming-distance-for-hybrid-search-in-sqlite/"
              >Hamming Distance for Hybrid Search in SQLite</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-15 @ 07:21:58</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47021711"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47017450">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=chpgT_VTEjE"
              >This is What It's Like to Spend Your Life in Prison (2023)
              [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 19:23:52</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47017450"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47015342">
          <h3>
            <a class="item" href="https://ratfactor.com/tech-nope2"
              >A Programmer's Loss of Identity</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 15:41:59</span
              ><span class="points-container"
                >Points: <span class="points">188</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47015342"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47014002">
          <h3>
            <a class="item" href="https://dbg.re/posts/car-file-format/"
              >A deep dive into Apple's .car file format</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 12:18:04</span
              ><span class="points-container"
                >Points: <span class="points">148</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47014002"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47012895">
          <h3>
            <a class="item" href="https://brandonli.net/spectra/doc/"
              >Rendering the Visible Spectrum</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 08:56:46</span
              ><span class="points-container"
                >Points: <span class="points">133</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47012895"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47012486">
          <h3>
            <a class="item" href="https://stonetools.ghost.io/dbase-cpm/"
              >DBASE on the Kaypro II</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 07:35:41</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47012486"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47011548">
          <h3>
            <a
              class="item"
              href="https://github.com/NationalSecurityAgency/ghidra"
              >Ghidra by NSA</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-14 @ 04:24:18</span
              ><span class="points-container"
                >Points: <span class="points">420</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47011548"
                  >Comments</a
                ><span class="descendants">: 208</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47006587">
          <h3>
            <a
              class="item"
              href="https://chromewebstore.google.com/detail/github-lines-viewed/npledcbofpmjjammgkkoeaehbphhdopi"
              >Show HN: GitHub "Lines Viewed" extension to keep you sane
              reviewing long AI PRs</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-13 @ 19:19:45</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47006587"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              <p>
                Designed to look like a stock Github UI element - even respects
                light/dark theme. Runs fully locally, no API calls.
              </p>
              <p>
                Splits insertions and deletions by default, but you can also
                merge them into a single "lines" figure in the settings.
              </p>
            </div>
          </section>
        </section>
        <section id="47004629">
          <h3>
            <a
              class="item"
              href="https://www.newscientist.com/article/2513815-how-teaching-molecules-to-think-is-revealing-what-a-mind-really-is/"
              >How teaching molecules to think is revealing what a 'mind' is</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-13 @ 16:37:22</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47004629"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47002231">
          <h3>
            <a
              class="item"
              href="https://0byte.io/articles/pytorch_introduction.html"
              >Visual introduction to PyTorch</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-13 @ 12:59:33</span
              ><span class="points-container"
                >Points: <span class="points">372</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47002231"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="47000708">
          <h3>
            <a
              class="item"
              href="https://www.openculture.com/2021/06/hear-the-amati-king-cello-the-oldest-known-cello-in-existence-c-1560.html"
              >Hear the "Amati King Cello", the Oldest Known Cello in
              Existence</a
            >
          </h3>
          <section>
            <h4>
              <span>2026-02-13 @ 09:17:54</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=47000708"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2026/index.md"
              >2026</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
