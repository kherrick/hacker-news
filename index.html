<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="40308657">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/05/06/well/eat/ultraprocessed-foods-harmful-health.html"
              >How Bad Are Ultraprocessed Foods, Really?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 14:35:25</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40308657"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40308571">
          <h3>
            <a class="item" href="https://eprint.iacr.org/2021/626.pdf"
              >Breaking Signal Messenger's Post-Compromise Security Through a
              Malicious Device [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 14:27:04</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40308571"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40308261">
          <h3>
            <a
              class="item"
              href="https://seclists.org/fulldisclosure/2024/May/5"
              >Microsoft PlayReady – Complete Client Identity Compromise</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 13:53:06</span
              ><span class="points-container"
                >Points: <span class="points">104</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40308261"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40308063">
          <h3>
            <a
              class="item"
              href="https://grist.org/accountability/microsoft-employees-spent-years-fighting-the-tech-giants-oil-ties-now-theyre-speaking-out/"
              >Microsoft employees spent years fighting the tech giant's oil
              ties</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 13:33:33</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40308063"
                  >Comments</a
                ><span class="descendants">: 64</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40308044">
          <h3>
            <a
              class="item"
              href="https://research.google/blog/videoprism-a-foundational-visual-encoder-for-video-understanding/"
              >VideoPrism: A foundational visual encoder for video
              understanding</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 13:32:04</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40308044"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40307519">
          <h3>
            <a class="item" href="https://blog.wilsonl.in/hackerverse/"
              >Exploring HN by mapping and analyzing 40M posts and comments for
              fun</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 12:31:04</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40307519"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40307454">
          <h3>
            <a class="item" href="https://github.com/tembo-io/pgmq"
              >Show HN: An SQS Alternative on Postgres</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 12:21:53</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40307454"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40307108">
          <h3>
            <a
              class="item"
              href="https://cigrainger.com/elixirconf-eu-2024-keynote/"
              >What I mean when I say that machine learning in Elixir is
              production-ready</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 11:33:49</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40307108"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40307098">
          <h3>
            <a class="item" href="https://github.com/Hirrolot/datatype99"
              >Algebraic Data Types for C99</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 11:31:27</span
              ><span class="points-container"
                >Points: <span class="points">145</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40307098"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40307089">
          <h3>
            <a class="item" href="https://github.com/alefore/knit"
              >Show HN: Browser-based knitting (pattern) software</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 11:29:32</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40307089"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
            <div class="text">
              <a href="https://alefore.github.io/knit/"
                >https://alefore.github.io/knit/</a
              >
              (and read about it in
              <a href="https://github.com/alefore/knit"
                >https://github.com/alefore/knit</a
              >).
              <p>
                Right now I only implemented on simple pattern: Sophie scarfs.
                After knitting one that came out somewhat … asymmetric, I
                decided to just write some software to help me (1) easily adjust
                the length/width of the scarf (using Bézier curves), and (2)
                keep track of which row I'm on (so that I can make sure I apply
                increases/decreases at the right places). In the future, I
                expect to extend this with many other knitting patterns for
                other types of items.
              </p>
              <p>
                The application is 100% browser (JavaScript, tested in only in
                Chrome in Linux/Android) based (no server-side component): all
                state is kept in the URL hash. I've used it to knit two scarves,
                including
                <a
                  href="https://github.com/alefore/knit/blob/main/images/000.jpg"
                  >https://github.com/alefore/knit/blob/main/images/000.jpg</a
                >.
              </p>
              <p>
                The current state of knitting patterns is far from optional,
                stuck in pre-computer times. Perhaps knitters are not the most
                technically minded group. Most knitters just download patterns
                as PDF files. These files will show multiple numbers from which
                you should choose one depending on the size you're knitting,
                saying things like "Purl 24 (32 38 42 50 64) times" (you're
                supposed to pick the right number depending on the size you're
                knitting). They'll say things like "repeat rows 4 to 6 sixteen
                times".
              </p>
              <p>
                I think software can display patterns much better (including not
                being limited to a few pre-selected sizes, but letting you
                choose the _exact_ size you want, and adjusting everything
                accordingly), and keep track of your progress much more easily.
                For example, for my scarf, the user inputs the desired number of
                rows (based on the desired length, which makes the pattern
                agnostic to the needle size), and the software computes where to
                apply increases/decreases.
              </p>
              <p>
                I have many other ideas for improvements (e.g., track how much
                time I've spent in each row, show a clock), but I figured I'd
                share this early and ask for feedback. Hopefully there are other
                fellow knitters in HN. :-) Check it out and let me know what you
                think!
              </p>
            </div>
          </section>
        </section>
        <section id="40307078">
          <h3>
            <a
              class="item"
              href="https://testing.googleblog.com/2024/05/test-failures-should-be-actionable.html"
              >Test Failures Should Be Actionable</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 11:28:30</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40307078"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40306463">
          <h3>
            <a class="item" href="https://lovehindpa.ws/posts/xilinx-hbm2/"
              >Xilinx HBM2 Internals</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 09:08:06</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40306463"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40306352">
          <h3>
            <a class="item" href="https://cr.yp.to/proto/utctai.html"
              >UTC, Tai, and Unix Time (2001)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 08:40:27</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40306352"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40306249">
          <h3>
            <a
              class="item"
              href="https://e360.yale.edu/features/marcel-gomes-interview"
              >Tracking Illicit Brazilian Beef from the Amazon to Your Burger</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 08:09:54</span
              ><span class="points-container"
                >Points: <span class="points">193</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40306249"
                  >Comments</a
                ><span class="descendants">: 170</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40305947">
          <h3>
            <a
              class="item"
              href="https://www.workatastartup.com/companies/codestory"
              >CodeStory (YC S23) Is Hiring a Founding Engineer for Building
              AI-Native IDE</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 07:00:03</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40304717">
          <h3>
            <a class="item" href="https://www.sony.com.hk/reonpocket/en/"
              >Sony Wearable Thermal Device</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 02:33:51</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40304717"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40304453">
          <h3>
            <a
              class="item"
              href="https://GrumpyOldDev.com/post/the-one-where-i-lie-to-the-cto/"
              >The Time I Lied to the CTO and Saved the Day</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-09 @ 01:39:27</span
              ><span class="points-container"
                >Points: <span class="points">398</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40304453"
                  >Comments</a
                ><span class="descendants">: 295</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40303661">
          <h3>
            <a
              class="item"
              href="https://hereket.com/posts/from-scratch-x11-windowing/"
              >Opening Windows in Linux with sockets, bare hands and 200 lines
              of C</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 23:14:28</span
              ><span class="points-container"
                >Points: <span class="points">177</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40303661"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40303425">
          <h3>
            <a
              class="item"
              href="https://www.outsideonline.com/outdoor-adventure/everest/everest-hillary-norgay-1953-news/"
              >A Man Who Raced to Tell the World That Mount Everest Had Been
              Climbed</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 22:36:58</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40303425"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40302201">
          <h3>
            <a class="item" href="https://hao-ai-lab.github.io/blogs/cllm/"
              >Consistency LLM: converting LLMs to parallel decoders accelerates
              inference 3.5x</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 19:55:07</span
              ><span class="points-container"
                >Points: <span class="points">399</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40302201"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40302200">
          <h3>
            <a
              class="item"
              href="https://www.researchsquare.com/article/rs-3976380/v1"
              >Breathwork supports emergence of altered states of
              consciousness</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 19:54:58</span
              ><span class="points-container"
                >Points: <span class="points">188</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40302200"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40300454">
          <h3>
            <a class="item" href="https://chromakode.com/post/xkcd-machine/"
              >Development Notes from xkcd's "Machine"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 17:09:17</span
              ><span class="points-container"
                >Points: <span class="points">633</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40300454"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40300126">
          <h3>
            <a class="item" href="https://www.grafychat.com"
              >Show HN: I built a non-linear UI for ChatGPT</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 16:41:12</span
              ><span class="points-container"
                >Points: <span class="points">395</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40300126"
                  >Comments</a
                ><span class="descendants">: 110</span></span
              >
            </h4>
            <div class="text">
              <p>
                I built this out of frustration of the evergrowing list of AI
                models and features to try and to fit my workflow.
              </p>
              <p>
                The visual approach clicks for me so i went with it, it provides
                more freedom and control of the outcome, because predictable
                results and increased productivity is what I’m after when using
                conversational AI.
              </p>
              <p>
                The app is packed with features, my most used are prompt
                library, voice input and text search, narration is useful too.
              </p>
              <p>
                The app is local-first and works right in the browser, no sign
                up needed and it's absolutely free to try.
              </p>
              <p>BYOAK – bring your own API Keys.</p>
              <p>Let me know what you think, any feedback is appreciated!</p>
            </div>
          </section>
        </section>
        <section id="40298927">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/ai/google-deepmind-isomorphic-alphafold-3-ai-model/"
              >AlphaFold 3 predicts the structure and interactions of life's
              molecules</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 15:07:10</span
              ><span class="points-container"
                >Points: <span class="points">995</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40298927"
                  >Comments</a
                ><span class="descendants">: 421</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40297946">
          <h3>
            <a class="item" href="https://github.com/google-research/timesfm"
              >TimesFM: Time Series Foundation Model for time-series
              forecasting</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-08 @ 13:34:34</span
              ><span class="points-container"
                >Points: <span class="points">282</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40297946"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40290735">
          <h3>
            <a class="item" href="https://github.com/tegonhq/tegon"
              >Show HN: Tegon: AI-first open source alternative to Jira and
              Linear</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-07 @ 19:52:08</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40290735"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
            <div class="text">
              <a href="https://tegon.ai/">https://tegon.ai/</a>) an open-source
              issue-tracker that uses AI to automate manual tasks and workflows,
              and to provide context to engineers for a given task. Here is a
              demo video: (<a
                href="https://www.loom.com/share/1a4ba45cb1254fdba3ea98af23a1e6f1?sid=510be885-4be1-4f62-b646-2d1ee2cf0f3d"
                >https://www.loom.com/share/1a4ba45cb1254fdba3ea98af23a1e6f1?...</a
              >)
              <p>
                As engineers we hated Jira, it is slow and too complicated and
                enables a lot of processes and micro-management which used to
                kill our productivity.
              </p>
              <p>What makes Tegon faster:</p>
              <p>
                We load all the data from local (indexed db), making it super
                fast to load and navigate. We make this happen by doing a
                real-time sync in the background. Then we use AI to
                automatically create a title from the description, so you don't
                have to spend time figuring out a title. We then suggest labels,
                assignees and duplicate issues when you are creating a new issue
              </p>
              <p>Then we have a "Command Center" of agents:</p>
              <p>
                1. Code Review Agent reviews linked pull requests for new tasks,
                ensuring code quality by preventing the incorporation of
                suboptimal code.
              </p>
              <p>
                2. Bug Agent, upon bug assignment, will attempt to reproduce the
                bug, propose solutions, and in some cases, even implement these
                solutions in a new PR.
              </p>
              <p>
                3. Task Prioritisation Agent assists team leaders in managing
                the sprint by doing real-time assessments of the tasks,
                priority, and bandwidth and suggesting changes to be made.
              </p>
              <p>
                We got started on this a few months ago with lots more to come.
                We’re eager to get feedback and keep building, so please let us
                know what you think!
              </p>
            </div>
          </section>
        </section>
        <section id="40287341">
          <h3>
            <a
              class="item"
              href="https://temporal.io/blog/durable-distributed-asyncio-event-loop"
              >Temporal Python – A durable, distributed asyncio event loop
              (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-07 @ 15:56:41</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40287341"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40283954">
          <h3>
            <a
              class="item"
              href="https://www.core77.com/posts/132088/Fantastic-Industrial-Design-Student-Work-How-Long-Should-Objects-Last"
              >Industrial Design Student Work: "How Long Should Objects
              Last?"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-07 @ 10:10:33</span
              ><span class="points-container"
                >Points: <span class="points">202</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40283954"
                  >Comments</a
                ><span class="descendants">: 135</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40272514">
          <h3>
            <a
              class="item"
              href="https://ifesunmola.com/how-to-use-the-foreign-function-api-in-java-22-to-call-c-libraries/"
              >How to Use the Foreign Function API in Java 22 to Call C
              Libraries</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 08:40:02</span
              ><span class="points-container"
                >Points: <span class="points">197</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40272514"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="40272339">
          <h3>
            <a class="item" href="https://climbing.ai/"
              >Show HN: AI climbing coach – visualize how to climb any route
              based on your body</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-05-06 @ 08:09:38</span
              ><span class="points-container"
                >Points: <span class="points">286</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=40272339"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
            <div class="text">
              <p>
                You can see the demo here:
                <a href="https://www.youtube.com/watch?v=cnvNPWoYZz4"
                  >https://www.youtube.com/watch?v=cnvNPWoYZz4</a
                >
              </p>
              <p>
                Will be open sourcing the model, backend, and frontend codebase
                soon!
              </p>
            </div>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
