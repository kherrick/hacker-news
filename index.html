<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41153158">
          <h3>
            <a class="item" href="https://www.belenios.org/"
              >Belenios: A Verifiable Online Voting System</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 12:41:33</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41153158"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41153093">
          <h3>
            <a
              class="item"
              href="https://www.politico.com/news/magazine/2024/08/04/us-spies-soviet-technology-00164126"
              >The Untold Story of How US Spies Sabotaged Soviet Technology</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 12:26:33</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41153093"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41153054">
          <h3>
            <a
              class="item"
              href="https://www.latimes.com/environment/story/2024-07-22/are-robots-the-answer-to-harmful-agricultural-herbicides"
              >Could AI robots with lasers make herbicides – and farm workers –
              obsolete?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 12:20:53</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41153054"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41153035">
          <h3>
            <a class="item" href="https://candix.com"
              >Show HN: Candix, a confidential, reverse recruiting platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 12:15:37</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41153035"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                It's free for candidates, while we charge companies for access
                to the pool. They’re charged a subscription fee, not a
                traditional success fee, because it’s the only way to remain
                forever candidate-centric and not obsessed with placing profiles
                at any cost, like agencies are.
              </p>
              <p>
                I'm opposed to the AI trends in recruitment. Recruitment is
                opaque and needs more humanity in the process, not less.
                Consequently, we're stubborn about keeping humans involved at
                every level, from onboarding to support. This results in high
                operational costs, which we are working hard to streamline.
              </p>
              <p>
                Confidentiality is what truly sets Candix apart. It's a tricky
                concept in recruitment, though, as it needs to be balanced with
                recruiters' need to know about your background to make hiring
                decisions. Our approach is to protect access to the pool with
                NDAs and limit profile visibility to relevant companies only.
                Additionally, we limit points of access to one per company and
                thoroughly monitor all recruiter activity on the site to prevent
                any leakage.
              </p>
              <p>
                For those who are not open to receiving offers, one interesting
                feature is the option to mark your profile as unavailable.
                Interested companies won’t reach out, but they will be able to
                place an alert on your profile to be notified when this changes,
                effectively boosting your future search.
              </p>
              <p>
                We operate in the US and European markets, helping people
                connect with over seventy companies, such as OpenAI and Ramp.
              </p>
              <p>What do you think about the tool and its positioning?</p>
            </div>
          </section>
        </section>
        <section id="41152249">
          <h3>
            <a
              class="item"
              href="https://www.nextplatform.com/2024/07/30/so-who-is-building-that-100000-gpu-cluster-for-xai/"
              >So Who Is Building That 100k GPU Cluster for XAI?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 09:36:32</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41152249"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41151572">
          <h3>
            <a
              class="item"
              href="https://devopsprojectshq.com/blog/introduction-to-kubernetes-k8-a-lookback-after-6-years/"
              >Introduction to Kubernetes (k8) – a quick lookback</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 06:50:52</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41151572"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41151476">
          <h3>
            <a class="item" href="https://github.com/ataradov/usb-sniffer-lite"
              >USB Sniffer Lite for RP2040</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 06:24:53</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41151476"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41150275">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2312.01454"
              >LLM as Database Administrator (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 00:28:44</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41150275"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41150249">
          <h3>
            <a
              class="item"
              href="https://www.johndcook.com/blog/2024/08/03/polylog/"
              >Evaluating a class of infinite sums in closed form</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-04 @ 00:20:10</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41150249"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41150095">
          <h3>
            <a class="item" href="https://farm.bot/"
              >Open Source Farming Robot</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 23:37:52</span
              ><span class="points-container"
                >Points: <span class="points">429</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41150095"
                  >Comments</a
                ><span class="descendants">: 210</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41150069">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/games/sega-jet-rocket-arcade-game/"
              >Sega Jet Rocket: The '70s arcade game with no computer or
              screen</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 23:32:04</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41150069"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41149832">
          <h3>
            <a class="item" href="https://scottaaronson.blog/?p=762"
              >The First Law of Complexodynamics (2011)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 22:40:47</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41149832"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41148650">
          <h3>
            <a class="item" href="https://www.anarsec.guide/posts/tamper/"
              >Make your electronics tamper-evident</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 19:25:58</span
              ><span class="points-container"
                >Points: <span class="points">222</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41148650"
                  >Comments</a
                ><span class="descendants">: 120</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41148633">
          <h3>
            <a
              class="item"
              href="http://jpkoning.blogspot.com/2024/05/monetagium.html"
              >Monetagium – monetary extortion in feudal Europe</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 19:23:09</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41148633"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41148575">
          <h3>
            <a
              class="item"
              href="https://relistan.com/parsing-protobuf-files-with-treesitter"
              >Parsing Protobuf Definitions with Tree-sitter</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 19:13:59</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41148575"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41148532">
          <h3>
            <a
              class="item"
              href="https://cloud.google.com/blog/transform/ai-specialized-chips-tpu-history-gen-ai"
              >TPU transformation: A look back at 10 years of our AI-specialized
              chips</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 19:07:15</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41148532"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41148517">
          <h3>
            <a
              class="item"
              href="https://learnhowtolearn.org/how-to-build-extremely-quickly/"
              >How to build quickly</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 19:05:02</span
              ><span class="points-container"
                >Points: <span class="points">476</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41148517"
                  >Comments</a
                ><span class="descendants">: 106</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41148450">
          <h3>
            <a
              class="item"
              href="https://tylercipriani.com/blog/2024/07/31/git-as-a-password-prompt/"
              >Git: The Stupid Password Store</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 18:54:48</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41148450"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41147754">
          <h3>
            <a
              class="item"
              href="https://www.uninformativ.de/blog/postings/2024-08-03/0/POSTING-en.html"
              >Revisiting Linux CPU Scheduling</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 17:01:05</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41147754"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41147643">
          <h3>
            <a
              class="item"
              href="http://www.righto.com/2024/08/space-shuttle-interim-teleprinter.html"
              >Reverse engineering the 59-pound printer onboard the Space
              Shuttle</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 16:43:09</span
              ><span class="points-container"
                >Points: <span class="points">273</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41147643"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41146860">
          <h3>
            <a class="item" href="https://blog.cr.yp.to/20240803-clang.html"
              >Clang vs. Clang</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 14:45:17</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41146860"
                  >Comments</a
                ><span class="descendants">: 273</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41146779">
          <h3>
            <a
              class="item"
              href="https://9to5mac.com/2024/08/02/developers-trick-app-store-review/"
              >Techniques used by developers to bypass App Store review</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 14:28:45</span
              ><span class="points-container"
                >Points: <span class="points">146</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41146779"
                  >Comments</a
                ><span class="descendants">: 130</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41146642">
          <h3>
            <a
              class="item"
              href="https://www.niemanlab.org/2024/07/to-preserve-their-work-and-drafts-of-history-journalists-take-archiving-into-their-own-hands/"
              >To preserve their work journalists take archiving into their own
              hands</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 13:57:49</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41146642"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41146563">
          <h3>
            <a
              class="item"
              href="https://media.ccc.de/v/cosin2024-56234-fpga-selber-bauen-mit-74"
              >An FPGA built with 7400 series logic [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 13:40:07</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41146563"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41146393">
          <h3>
            <a class="item" href="https://github.com/flavioribeiro/donut"
              >Go Donut: Convert Live Streaming to WebRTC</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 12:59:46</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41146393"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41146278">
          <h3>
            <a
              class="item"
              href="https://matklad.github.io/2024/08/01/primitive-recursive-functions.html"
              >Primitive Recursive Functions for a Working Programmer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 12:32:01</span
              ><span class="points-container"
                >Points: <span class="points">155</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41146278"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41146239">
          <h3>
            <a
              class="item"
              href="https://jimmyhmiller.github.io/ugliest-beautiful-codebase"
              >"We ran out of columns"</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 12:26:03</span
              ><span class="points-container"
                >Points: <span class="points">1279</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41146239"
                  >Comments</a
                ><span class="descendants">: 446</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41141553">
          <h3>
            <a
              class="item"
              href="https://twitter.com/VictorTaelin/status/1819208143638831404"
              >Discovering algorithms by enumerating terms in Haskell</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-02 @ 18:57:05</span
              ><span class="points-container"
                >Points: <span class="points">121</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41141553"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41140623">
          <h3>
            <a
              class="item"
              href="https://www.nature.com/articles/s41467-024-48693-4"
              >Additive manufacturing of an ultrastrong, deformable aluminum
              alloy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-02 @ 17:09:19</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41140623"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41132937">
          <h3>
            <a
              class="item"
              href="https://nathangoldwag.wordpress.com/2024/08/01/from-mcmurdo-sound-to-flanders-fields-the-end-of-the-heroic-age-of-antarctic-exploration/"
              >From McMurdo Sound to Flanders Fields</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-01 @ 19:57:11</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41132937"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
