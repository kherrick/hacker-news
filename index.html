<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41064645">
          <h3>
            <a
              class="item"
              href="https://jordaneldredge.com/notes/corrupted-skins/"
              >The secrets I found investigating corrupt Winamp skins</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 04:14:57</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41064645"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41064414">
          <h3>
            <a
              class="item"
              href="https://www.scmp.com/news/people-culture/article/3271333/japan-supermarket-chain-uses-ai-gauge-staff-smiles-speech-tones-quality-service-push"
              >Japan chain uses AI to gauge staff smiles, speech tones in QoS
              push</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 03:15:10</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41064414"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41064351">
          <h3>
            <a class="item" href="https://github.com/nodejs/node/pull/53725"
              >Node.js adds experimental support for TypeScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 02:57:37</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41064351"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41064333">
          <h3>
            <a class="item" href="http://landley.net/toybox/"
              >What Is Toybox?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 02:53:14</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41064333"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41064279">
          <h3>
            <a
              class="item"
              href="https://www.bbc.com/news/articles/cmj2578r873o"
              >Namibia turns the visa tables on Western nations</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 02:41:36</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41064279"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41063853">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/500-million-year-old-alien-fish-taco-was-among-first-creatures-with-jaws/"
              >500M-Year-Old 'Alien Fish Taco' Was Among First Creatures with
              Jaws</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-25 @ 01:10:21</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41063853"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41063307">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/07/24/science/fossil-mammal-jurassic-age.html"
              >Fossil Hints That Jurassic Mammals Lived Slow and Died Old</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 23:27:57</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41063307"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41062451">
          <h3>
            <a class="item" href="https://www.hooper.gg"
              >Show HN: Hooper – AI-driven stats and highlights for basketball
              play</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 21:39:55</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41062451"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              <p>
                The way Hooper works is you can record yourself using the app
                and ideally a tripod (optional). The app will track everyone,
                whether its a solo practice, a 3v3, or a 5v5. We think there’s a
                lot of stuff out there for basketball drills but what we really
                wanted Hooper to be for is actual game play. That means, it can
                do things like track multiple players, sync two half court
                recordings, and differentiate 2s vs 3s.
              </p>
              <p>
                Once you finish recording, it’ll process for a bit and then ask
                you to tag yourself (and optionally other players). Then it
                spits back out a few things: you can watch the full footage as
                well as a clipped version that's only the interesting plays; you
                can see highlights and offensive box stats for every player.
              </p>
              <p>
                When you sign up, you get a Hooper profile that tracks your
                overall stats across the sessions. You can also do things like
                build a mixtape from your highlights for insta. You can friend
                other players on Hooper to see their profile &amp; comment on
                their games (also add us “grub” and “kangexpress”!)
              </p>
              <p>
                We’ve been in a closed beta for about 3 months now, fixing bugs
                and getting things to work with a set of early adopters. We are
                now starting our open beta ! If anyone here wants to try it out,
                you can just download the app on
                <a href="https://www.hooper.gg/?utm_campaign=h1"
                  >https://www.hooper.gg/?utm_campaign=h1</a
                >. We are early in our journey, and lots of improvements to be
                made in the next few months, but we would love your feedback and
                ideas!
              </p>
            </div>
          </section>
        </section>
        <section id="41061755">
          <h3>
            <a
              class="item"
              href="https://ericwbailey.website/published/dungeons-and-dragons-taught-me-how-to-write-alt-text/"
              >Dungeons and Dragons taught me how to write alt text</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 20:35:49</span
              ><span class="points-container"
                >Points: <span class="points">160</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41061755"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41061390">
          <h3>
            <a class="item" href="https://github.com/mlfoundations/MINT-1T"
              >A multimodal dataset with one trillion tokens</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 20:04:24</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41061390"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41060834">
          <h3>
            <a
              class="item"
              href="https://www.dive.club/ideas/will-figma-become-an-awkward-middle-ground"
              >Will Figma become an awkward middle ground?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 19:22:37</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41060834"
                  >Comments</a
                ><span class="descendants">: 94</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41060102">
          <h3>
            <a
              class="item"
              href="https://trufflesecurity.com/blog/anyone-can-access-deleted-and-private-repo-data-github"
              >Anyone can access deleted and private repository data on
              GitHub</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 18:24:02</span
              ><span class="points-container"
                >Points: <span class="points">1180</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41060102"
                  >Comments</a
                ><span class="descendants">: 220</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41059821">
          <h3>
            <a class="item" href="https://www.simpltech.ai"
              >Show HN: NoteTech – Create personal automations by writing
              notes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 18:00:17</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41059821"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41059412">
          <h3>
            <a
              class="item"
              href="https://math.andrej.com/2024/01/30/space-filling-curves-constructively/"
              >Space-filling curves, constructively</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 17:20:44</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41059412"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41059148">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41059148"
              >Join YC's Ruby Meetup on August 13th at Our New SF
              Headquarters</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 17:00:07</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>Speakers so far:</p>
              <p>
                - Jared Friedman (YC Group Partner &amp; Scribd, S06) will give
                an opening talk about the history of software at YC: how we
                chose Rails, who wrote the first MR to our codebase, why
                Bookface is a YC founder’s secret weapon, and how Rails powers
                all of YC.
              </p>
              <p>
                - Daniel Farina (Ubicloud, W24) has been building infrastructure
                control planes in Ruby for 13 years - first at Heroku and now at
                Ubicloud. Daniel will share some war stories, as well as his
                five favorite “features” that make Ruby particularly powerful
                for building infrastructure code.
              </p>
              <p>
                - Kelsey Pedersen (Capsule, S22) built Capsule on a V1 vector
                database with Rails, Postgres and Active Record with the
                PGVector plugin. She’s happy to share learnings at pitfalls, as
                well as how she uses webhooks and rakes to automate workflows
                and help keep the team small.
              </p>
              <p>
                - Keith Schacht (Mystery.org, S17) started coding Ruby in ‘05,
                and is still at it — building ChatGPT in Rails (vs Python) and
                keeping up with stimulus, new morphing, and Turbo Native. He’ll
                do some live coding of these new features, and wants to hear
                what you think!
              </p>
              <p>
                We'll be providing dinner &amp; refreshments for attendees, and
                there will be ample opportunity to meet with speakers, folks
                from YC and network as well.
              </p>
              <p>
                Also note: many YC companies are hiring for ruby engineers —
                including Y Combinator’s Software Team. Ask us about open roles!
              </p>
              <p>
                If you’re interested, please RSVP below to join us -- we have
                limited capacity, but we'll try to get as many Rubyistas in the
                room as possible.
              </p>
              <p>
                <a href="https://events.ycombinator.com/yc-ruby-meetup"
                  >https://events.ycombinator.com/yc-ruby-meetup</a
                >
              </p>
              <p>
                Let me know if you have questions, and hope to see you at our
                new SF office!
              </p>
            </div>
          </section>
        </section>
        <section id="41058671">
          <h3>
            <a class="item" href="https://biocircuits.github.io/index.html"
              >Biological Circuit Design</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 16:22:58</span
              ><span class="points-container"
                >Points: <span class="points">91</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41058671"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41058424">
          <h3>
            <a
              class="item"
              href="https://krebsonsecurity.com/2024/07/phish-friendly-domain-registry-top-put-on-notice/"
              >Phish-friendly domain registry ".top" put on notice</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 16:03:30</span
              ><span class="points-container"
                >Points: <span class="points">151</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41058424"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41058292">
          <h3>
            <a
              class="item"
              href="https://righteousit.com/2024/07/24/hiding-linux-processes-with-bind-mounts/"
              >Hiding Linux Processes with Bind Mounts</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 15:52:06</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41058292"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41057766">
          <h3>
            <a class="item" href="https://interactivenn.net/index.html"
              >InteractiVenn – Interactive Venn Diagrams</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 14:57:14</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41057766"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41056694">
          <h3>
            <a
              class="item"
              href="https://www.newscientist.com/article/2440445-physicists-may-now-have-a-way-to-make-element-120-the-heaviest-ever/"
              >Physicists may now have a way to make element 120</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 13:06:41</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41056694"
                  >Comments</a
                ><span class="descendants">: 136</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41056463">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2404.14394"
              >A Multimodal Automated Interpretability Agent</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 12:42:53</span
              ><span class="points-container"
                >Points: <span class="points">60</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41056463"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41053761">
          <h3>
            <a
              class="item"
              href="http://www.kohala.com/start/papers.others/doors.html"
              >"Doors" in Solaris: Lightweight RPC Using File Descriptors
              (1996)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 05:02:30</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41053761"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41053645">
          <h3>
            <a
              class="item"
              href="https://www.crowdstrike.com/blog/falcon-content-update-preliminary-post-incident-report/"
              >Preliminary Post Incident Review</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 04:35:27</span
              ><span class="points-container"
                >Points: <span class="points">141</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41053645"
                  >Comments</a
                ><span class="descendants">: 158</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41052593">
          <h3>
            <a
              class="item"
              href="https://onlisp.co.uk/On-the-Origin-of-Emacs-in-1976.html"
              >The Origin of Emacs in 1976</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-24 @ 00:49:26</span
              ><span class="points-container"
                >Points: <span class="points">225</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41052593"
                  >Comments</a
                ><span class="descendants">: 99</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41044657">
          <h3>
            <a
              class="item"
              href="https://tigerbeetle.com/blog/2024-07-23-rediscovering-transaction-processing-from-history-and-first-principles"
              >Rediscovering Transaction Processing from History and First
              Principles</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 10:52:57</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41044657"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41042929">
          <h3>
            <a
              class="item"
              href="https://www.wsj.com/tech/amazon-alexa-devices-echo-losses-strategy-25f2581a"
              >Alexa is in millions of households and Amazon is losing
              billions</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-23 @ 05:54:39</span
              ><span class="points-container"
                >Points: <span class="points">281</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41042929"
                  >Comments</a
                ><span class="descendants">: 524</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41036506">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/the-puzzle-of-how-large-scale-order-emerges-in-complex-systems/"
              >The Puzzle of How Large-Scale Order Emerges in Complex Systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 16:47:10</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41036506"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41034297">
          <h3>
            <a
              class="item"
              href="https://d-star.ai/solving-the-out-of-context-chunk-problem-for-rag"
              >Solving the out-of-context chunk problem for RAG</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-22 @ 13:44:19</span
              ><span class="points-container"
                >Points: <span class="points">215</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41034297"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41025341">
          <h3>
            <a
              class="item"
              href="https://www.popularfintech.com/p/why-discover-is-no-american-express"
              >Why Discover is no American Express</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-21 @ 14:28:35</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41025341"
                  >Comments</a
                ><span class="descendants">: 193</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41025267">
          <h3>
            <a
              class="item"
              href="https://www.lacrux.com/en/videos/when-eyesight-fades-and-climbing-provides-comfort/"
              >When eyesight fades and climbing provides comfort</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-07-21 @ 14:17:01</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41025267"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
