<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="46223577">
          <h3>
            <a class="item" href="https://www.apple.com/support/systemstatus/"
              >Apple Services Experiencing Outage</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 20:47:15</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46223577"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46223389">
          <h3>
            <a
              class="item"
              href="https://www.eff.org/press/releases/eff-launches-age-verification-hub-resource-against-misguided-laws"
              >EFF Launches Age Verification Hub as Resource Against Misguided
              Laws</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 20:35:07</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46223389"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46222237">
          <h3>
            <a class="item" href="https://dnhkng.github.io/posts/hopper/"
              >I got an Nvidia GH200 server for €7.5k on Reddit and converted it
              to a desktop</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 19:19:17</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46222237"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46221925">
          <h3>
            <a class="item" href="https://github.com/malucard/sm64-psx"
              >Super Mario 64 for the PS1</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 18:58:55</span
              ><span class="points-container"
                >Points: <span class="points">95</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46221925"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46221594">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2512.08309"
              >Terrain Diffusion: A Diffusion-Based Successor to Perlin Noise</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 18:37:27</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46221594"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46221404">
          <h3>
            <a
              class="item"
              href="https://onlinelibrary.wiley.com/doi/10.1111/psyp.70161"
              >Intermittent hypoxia increases blood flow and benefits executive
              function</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 18:24:13</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46221404"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46220902">
          <h3>
            <a class="item" href="https://k-keyboard.com/Why-QWERTY-mini"
              >Show HN: A 2-row, 16-key keyboard designed for smartphones</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 17:49:28</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46220902"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
            <div class="text">
              Mobile keyboards today are almost entirely based on the 26-key,
              3-row QWERTY layout. Here’s a new 2-row, 16-key alternative
              designed specifically for smartphones.
            </div>
          </section>
        </section>
        <section id="46220794">
          <h3>
            <a class="item" href="https://alpranalysis.com"
              >Show HN: Automated license plate reader coverage in the USA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 17:42:30</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46220794"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
            <div class="text">
              <p>
                These have gotten more controversial in recent months, due to
                their indiscriminate large scale data collection, with 404 Media
                publishing many original pieces (<a
                  href="https://www.404media.co/tag/flock/"
                  >https://www.404media.co/tag/flock/</a
                >) about their adoption and (ab)use across the country. I wanted
                to use open source datasets to track the rapid expansion,
                especially per-county, as this data can be crucial for 'deflock'
                movements to petition counties and city governments to ban and
                remove them.
              </p>
              <p>
                In some counties, the tracking becomes so widespread that most
                people can't go anywhere without being photographed. This
                includes possibly sensitive areas, like places of worship and
                medical facilities.
              </p>
              <p>
                The argument for their legality rests upon the notion that these
                cameras are equivalent to 'mere observation', but the enormous
                scope and data sharing agreements in place to share and access
                <i>millions</i> of records without warrants blurs the lines of
                the fourth amendment.
              </p>
            </div>
          </section>
        </section>
        <section id="46220540">
          <h3>
            <a class="item" href="https://karpathy.bearblog.dev/auto-grade-hn/"
              >Auto-grading decade-old Hacker News discussions with hindsight</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 17:23:53</span
              ><span class="points-container"
                >Points: <span class="points">182</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46220540"
                  >Comments</a
                ><span class="descendants">: 108</span></span
              >
            </h4>
            <div class="text">
              <i
                >Show HN: Gemini Pro 3 imagines the HN front page 10 years from
                now</i
              >
              -
              <a href="https://news.ycombinator.com/item?id=46205632"
                >https://news.ycombinator.com/item?id=46205632</a
              >
            </div>
          </section>
        </section>
        <section id="46220488">
          <h3>
            <a
              class="item"
              href="https://www.heise.de/en/news/Valve-HDMI-Forum-Continues-to-Block-HDMI-2-1-for-Linux-11107440.html"
              >Valve: HDMI Forum Continues to Block HDMI 2.1 for Linux</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 17:20:06</span
              ><span class="points-container"
                >Points: <span class="points">351</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46220488"
                  >Comments</a
                ><span class="descendants">: 206</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46220211">
          <h3>
            <a class="item" href="https://app.dover.com/jobs/9mothers"
              >9 Mothers (YC X26) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 17:00:22</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46219853">
          <h3>
            <a
              class="item"
              href="https://finance.yahoo.com/news/china-deepseek-uses-banned-nvidia-131207746.html"
              >DeepSeek uses banned Nvidia chips for AI model, report says</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 16:34:52</span
              ><span class="points-container"
                >Points: <span class="points">260</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46219853"
                  >Comments</a
                ><span class="descendants">: 224</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.theinformation.com/articles/deepseek-using-banned-nvidia-chips-race-build-next-model"
                >https://www.theinformation.com/articles/deepseek-using-banne...</a
              >
              but hardwalled)
            </div>
          </section>
        </section>
        <section id="46219538">
          <h3>
            <a
              class="item"
              href="https://qwen.ai/blog?id=qwen3-omni-flash-20251201"
              >Qwen3-Omni-Flash-2025-12-01：a next-generation native multimodal
              large model</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 16:13:38</span
              ><span class="points-container"
                >Points: <span class="points">153</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46219538"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46219386">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=46219386"
              >Launch HN: InspectMind (YC W24) – AI agent for reviewing
              construction drawings</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 16:05:03</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46219386"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.inspectmind.ai/"
                >https://www.inspectmind.ai/</a
              >), an AI “plan checker” that finds issues in construction
              drawings, details, and specs.
              <p>
                Construction drawings quietly go out with lots of errors:
                dimension conflicts, co-ordination gaps, material mismatches,
                missing details and more. These errors turn into delays and
                hundreds of thousands of dollars of rework during construction.
                InspectMind reviews the full drawing set of a construction
                project in minutes. It cross-checks architecture, engineering,
                and specifications to catch issues that cause rework before
                building begins.
              </p>
              <p>
                Here’s a video with some examples:
                <a href="https://www.youtube.com/watch?v=Mvn1FyHRlLQ"
                  >https://www.youtube.com/watch?v=Mvn1FyHRlLQ</a
                >.
              </p>
              <p>
                Before this, I (Aakash) built an engineering firm that worked on
                ~10,000 buildings across the US. One thing that always
                frustrated us: a lot of design coordination issues don’t show up
                until construction starts. By then, the cost of a mistake can be
                10–100x higher, and everyone is scrambling to fix problems that
                could have been caught earlier.
              </p>
              <p>
                We tried everything including checklists, overlay reviews, peer
                checks but scrolling through 500–2000 PDF sheets and remembering
                how every detail connects to every other sheet is a brittle
                process. City reviewers and GC pre-con teams try to catch issues
                too, yet they still sneak through.
              </p>
              <p>
                We thought: if models can parse code and generate working
                software, maybe they can also help reason about the built
                environment on paper. So we built something we wished we had!
              </p>
              <p>
                You upload drawings and specs (PDFs). The system breaks them
                into disciplines and detail hierarchies, parses geometry and
                text, and looks for inconsistencies: - Dimensions that don’t
                reconcile across sheets; - Clearances blocked by
                mechanical/architectural elements; - Fire/safety details missing
                or mismatched; - Spec requirements that never made it into
                drawings; - Callouts referencing details that don’t exist.
              </p>
              <p>
                The output is a list of potential issues with sheet refs and
                locations for a human to review. We don’t expect automation to
                replace design judgment, just to help ACE professionals not miss
                the obvious stuff. Current AIs are good at obvious stuff, plus
                can process data at quantities way beyond what humans can
                accurately do, so this is a good application for them.
              </p>
              <p>
                Construction drawings aren't standardized and every firm names
                things differently. Earlier “automated checking” tools relied
                heavily on manually-written rules per customer, and break when
                naming conventions change. Instead, we’re using multimodal
                models for OCR + vector geometry, callout graphs across the
                entire set, constraint-based spatial checks, and
                retrieval-augmented code interpretation. No more hard-coded
                rules!
              </p>
              <p>
                We’re processing residential, commercial, and industrial
                projects today. Latency ranges from minutes to a few hours
                depending on sheet count. There’s no onboarding required, simply
                upload PDFs. There are still lots of edge cases (PDF extraction
                weirdness, inconsistent layering, industry jargon), so we’re
                learning a lot from failures, maybe more than successes. But the
                tech is already delivering results that couldn’t be done with
                previous tools.
              </p>
              <p>
                Pricing is pay-as-you-go: we give an instant online quote per
                project after you upload the project drawings. It’s hard to do
                regular SaaS pricing since one project may be a home remodel and
                another may be a highrise. We’re open to feedback on that too,
                we’re still figuring it out.
              </p>
              <p>
                If you work with drawings as an architect, engineer, MEP, GC
                preconstruction, real estate developer, plan reviewer we’d love
                a chance to run a sample set and hear what breaks, what’s
                useful, and what’s missing!
              </p>
              <p>
                We’ll be here all day to go into technical details about
                geometry parsing, clustering failures, code reasoning attempts
                or real-world construction stories about how things go wrong.
                Thanks for reading! We’re happy to answer anything and look
                forward to your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="46219346">
          <h3>
            <a class="item" href="https://neal.fun/size-of-life/"
              >Size of Life</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 16:02:57</span
              ><span class="points-container"
                >Points: <span class="points">977</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46219346"
                  >Comments</a
                ><span class="descendants">: 141</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46218800">
          <h3>
            <a
              class="item"
              href="https://www.qualcomm.com/news/releases/2025/12/qualcomm-acquires-ventana-micro-systems--deepening-risc-v-cpu-ex"
              >Qualcomm acquires RISC-V focused Ventana Micro Systems</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 15:30:46</span
              ><span class="points-container"
                >Points: <span class="points">44</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46218800"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46218782">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-12-robocrop-robots-tomatoes.html"
              >RoboCrop: Teaching robots how to pick tomatoes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 15:29:14</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46218782"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46218640">
          <h3>
            <a
              class="item"
              href="https://the307.substack.com/p/revealed-israel-used-palantir-technologies"
              >Israel used Palantir technologies in pager attack in Lebanon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 15:18:47</span
              ><span class="points-container"
                >Points: <span class="points">335</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46218640"
                  >Comments</a
                ><span class="descendants">: 292</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46218538">
          <h3>
            <a class="item" href="https://tritium.legal/blog/outlook"
              >COM Like a Bomb: Rust Outlook Add-in</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 15:10:36</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46218538"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46216583">
          <h3>
            <a
              class="item"
              href="https://re.factorcode.org/2025/12/factor-0-101-now-available.html"
              >Factor 0.101 now available</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 11:33:31</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46216583"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46214693">
          <h3>
            <a
              class="item"
              href="https://eli.thegreenplace.net/2025/revisiting-lets-build-a-compiler/"
              >Revisiting "Let's Build a Compiler"</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-10 @ 06:22:19</span
              ><span class="points-container"
                >Points: <span class="points">240</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46214693"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46208348">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/legal/litigation/australia-social-media-ban-takes-effect-world-first-2025-12-09/"
              >Australia begins enforcing world-first teen social media ban</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-09 @ 18:12:29</span
              ><span class="points-container"
                >Points: <span class="points">358</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46208348"
                  >Comments</a
                ><span class="descendants">: 565</span></span
              >
            </h4>
            <div class="text">
              <a href="https://archive.md/i0VxX">https://archive.md/i0VxX</a>
              <p>
                <a href="https://www.bbc.com/news/live/cwy54q80gy9t"
                  >https://www.bbc.com/news/live/cwy54q80gy9t</a
                >
              </p>
              <p>
                <a
                  href="https://www.nytimes.com/2025/12/09/world/asia/australia-social-media-ban-under-16.html"
                  >https://www.nytimes.com/2025/12/09/world/asia/australia-soci...</a
                >
                (<a href="https://archive.ph/Ba2JR">https://archive.ph/Ba2JR</a
                >)
              </p>
            </div>
          </section>
        </section>
        <section id="46198606">
          <h3>
            <a class="item" href="https://frederikbraun.de/why-sethtml.html"
              >Why the Sanitizer API is just `setHTML()`</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-08 @ 22:37:28</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46198606"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46195679">
          <h3>
            <a
              class="item"
              href="https://sethmlarson.dev/deprecations-via-warnings-dont-work-for-python-libraries"
              >Deprecations via warnings don't work for Python libraries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-08 @ 18:13:59</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46195679"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46173600">
          <h3>
            <a class="item" href="https://dl.acm.org/doi/pdf/10.1145/3779120"
              >Kernel Float: Unlocking Mixed-Precision GPU Programming</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-06 @ 14:26:07</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46173600"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46170847">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/motorcycles/yadea-comes-to-europe/"
              >Largest EV manufacturer is coming to the Western market</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-06 @ 04:57:15</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46170847"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46162643">
          <h3>
            <a class="item" href="https://biosrhythm.com/?p=2143"
              >Typewriter Plotters (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-05 @ 15:34:49</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46162643"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46150797">
          <h3>
            <a
              class="item"
              href="https://www.isi.edu/news/81186/scientists-create-ultra-fast-memory-using-light/"
              >Scientists create ultra fast memory using light</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-04 @ 18:11:21</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46150797"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46150677">
          <h3>
            <a class="item" href="https://jhwlr.io/super-flat-ast/"
              >Super-Flat ASTs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-04 @ 18:01:09</span
              ><span class="points-container"
                >Points: <span class="points">69</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46150677"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="46123310">
          <h3>
            <a
              class="item"
              href="https://eli.li/gundam-is-just-the-same-as-jane-austen-but-happens-to-include-giant-mech-suits"
              >Gundam is just the same as Jane Austen but happens to include
              giant mech suits</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-12-02 @ 16:55:36</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=46123310"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
