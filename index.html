<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41183725">
          <h3>
            <a
              class="item"
              href="https://rethinkingsoftware.substack.com/p/scrum-is-the-symptom-not-the-problem"
              >Scrum is the Symptom, not the Problem</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 17:58:58</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41183725"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41183421">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2024/8/7/24211339/humane-ai-pin-more-daily-returns-than-sales"
              >Humane's daily returns are outpacing sales</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 17:22:32</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41183421"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41183240">
          <h3>
            <a
              class="item"
              href="https://github.com/dotnet/csharplang/blob/18a527bcc1f0bdaf542d8b9a189c50068615b439/proposals/TypeUnions.md"
              >Official proposal for Type Unions in C#</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 17:02:00</span
              ><span class="points-container"
                >Points: <span class="points">93</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41183240"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41183224">
          <h3>
            <a
              class="item"
              href="https://job-boards.greenhouse.io/flexport/jobs/5993812?gh_jid=5993812"
              >Flexport (YC W14) is hiring a product designer for our new
              Control Tower product</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 17:00:39</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41183115">
          <h3>
            <a class="item" href="https://icode4.coffee/?p=954"
              >Tony Hawk's Pro Strcpy</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 16:48:42</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41183115"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41182847">
          <h3>
            <a
              class="item"
              href="https://hacks.mozilla.org/2024/08/puppeteer-support-for-firefox/"
              >Official Puppeteer Support for Firefox</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 16:19:06</span
              ><span class="points-container"
                >Points: <span class="points">82</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41182847"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41182714">
          <h3>
            <a
              class="item"
              href="https://www.genengnews.com/topics/translational-medicine/cell-free-bioactive-scaffold-supports-cartilage-regeneration-in-large-animal-joints/"
              >Cell-Free Bioactive Scaffold Supports Cartilage
              Regeneration-Large Animal Joints</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 16:04:18</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41182714"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41182565">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41182565"
              >Ask HN: How different is AWS/GCP/Azure in everyday work</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 15:48:38</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41182565"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>
                When looking a job now, it's very common that I'm rejected
                before TI because I wasn't working with AWS. Is it really so
                fundamentally different from GCP or any other cloud provider for
                that matter? I have a wild feeling that 80-90% of the products
                all cloud providers offer are same toys but with different names
                and integrations mechanisms. There are surely some quirks that
                are exclusive for a specific cloud provider, but is it really
                that many to stifle your performance?
              </p>
            </div>
          </section>
        </section>
        <section id="41182395">
          <h3>
            <a
              class="item"
              href="http://www.numberworld.org/blogs/2024_8_7_zen5_avx512_teardown/"
              >Zen5's AVX512 Teardown and More</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 15:28:30</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41182395"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41182055">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41182055"
              >Launch HN: Release (YC W20) – Orchestrate AI Infrastructure and
              Applications</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 14:50:11</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41182055"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <a href="https://release.ai/">https://release.ai/</a>). We
              launched on HN in 2020 (<a
                href="https://news.ycombinator.com/item?id=22486031"
                >https://news.ycombinator.com/item?id=22486031</a
              >) after leaving TrueCar, where we managed a 300 person
              development team. Our original focus was making staging
              environments easier with ephemeral environments, but along the way
              AI applications started to emerge as an important and critical
              component of distributed applications. As we talked to customers
              using our original product, we realized we had built the
              underlying platform needed to address the needs of orchestrating
              AI applications and infrastructure. So here we are and we’re
              excited to share Release.ai with HN.
              <p>
                Here’s a video showcasing the platform and demonstrating how to
                easily manage new data and changes using the RAG stack of your
                choice:
                <a href="https://www.youtube.com/watch?v=-OdWRxMX1iA"
                  >https://www.youtube.com/watch?v=-OdWRxMX1iA</a
                >
              </p>
              <p>
                If you want to try release.ai out, we’re offering a sandbox
                account with limited free GPU cycles so you can play around and
                get a feel for Release.ai:
                <a href="https://release.ai">https://release.ai</a>. We suggest
                playing around with some of the RAG AI templates and adding
                custom workflows like in the demo video. The sandbox comes with
                5 free compute hours on an Amazon g5.2xlarge instance (A10 with
                24GB VRAM, 8vCPUs and 32GB). You will also get 16 GB and 4vCPUs
                for cpu workloads such as web servers. You will be able to run
                an inference engine plus things like an api server, etc.
              </p>
              <p>
                After the sandbox expires, you can switch to our free plan,
                which requires a credit card and associating an AWS/GCP account
                with Release to manage the compute in your cloud account. The
                free account provides 100 free managed environment hours a
                month. If you never go over, you never pay us anything. If you
                do, our pricing is here:
                <a href="https://release.com/pricing"
                  >https://release.com/pricing</a
                >.
              </p>
              <p>
                For those that like to read more, here’s the deeper background.
              </p>
              <p>
                It’s clear that open source AI and AI privacy are going to be
                big. Yes, many developers are going to choose SaaS offerings
                like OpenAI to build their AI applications, but as open source
                frameworks and models improve, we’re seeing a shift to open
                source running on cloud. Security and privacy is a top concern
                of companies leveraging these SaaS solutions, which forces them
                to look at running infrastructure themselves. That’s where we
                hope to come in: we’ve built Release.ai so all your data, models
                and infrastructure stay in your cloud account and open source
                frameworks are first class citizens.
              </p>
              <p>
                Orchestration - Integrating AI applications into a software
                development workflow and orchestrating their lifecycle is a new
                and different challenge than traditional web application
                development. Release also makes it possible to manage and
                integrate your web and AI apps using a single application and
                methodology.
              </p>
              <p>
                To make orchestrating AI applications easier, we built a
                workflow engine that can create the complex workflows that AI
                applications require. For example, you can automate the
                redeployment of an AI inference server easily when underlying
                data changes using webhooks and our workflow engine.
              </p>
              <p>
                Cost and expertise - Managing and scaling the hardware required
                to run AI workloads is hard and can be incredibly expensive.
                Release.ai lets you manage GPU compute resources across multiple
                clouds with different instance/node groups for various jobs
                within a single admin interface. We use K8s under the covers to
                pull this off. With over 5 years of building and running K8s
                infrastructure our customers have told us this is how it should
                be done.
              </p>
              <p>
                Getting started with AI frameworks is time consuming and
                requires some pretty in-depth expertise. We built out a library
                of AI templates (<a
                  href="https://docs.release.com/release.ai/release.ai-templates"
                  >https://docs.release.com/release.ai/release.ai-templates</a
                >) using our Application Template format (which is kind of a
                super docker-compose:
                <a
                  href="https://docs.release.com/reference-documentation/application-settings/application-template"
                  >https://docs.release.com/reference-documentation/application...</a
                >) for common open source frameworks to make it easy to get
                started developing AI applications. Setting up and getting these
                frameworks running is a hassle, so we made it one click to
                launch and deploy.
              </p>
              <p>
                We currently have over 20 templates including temples for RAG
                applications, fine tuning and useful tools like Juypter
                notebooks, Promptfoo, etc. We worked closely with Docker and
                Nvidia to support their frameworks: GenAI and Nvidia NEMO/Nims.
                We plan to launch community templates soon after launch. If you
                have suggestions for more templates we should support, please
                let us know in the comments.
              </p>
              <p>
                We’re thrilled to share Release.ai with you and would love to
                get your feedback. We hope you’ll try it out, and please let us
                know what you think!
              </p>
            </div>
          </section>
        </section>
        <section id="41181871">
          <h3>
            <a
              class="item"
              href="https://library.oapen.org/handle/20.500.12657/48282"
              >Gear Acquisition Syndrome</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 14:32:36</span
              ><span class="points-container"
                >Points: <span class="points">105</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41181871"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41181057">
          <h3>
            <a class="item" href="https://github.com/jank/curiosity"
              >Basic ReAct webapp using FastHTML and LangGraph</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 13:09:54</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41181057"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41180504">
          <h3>
            <a class="item" href="https://roometron.com"
              >Show HN: I've spent nearly 5y on a web app that creates 3D
              apartments</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 12:03:39</span
              ><span class="points-container"
                >Points: <span class="points">278</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41180504"
                  >Comments</a
                ><span class="descendants">: 107</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41180441">
          <h3>
            <a class="item" href="https://www.budgetflow.cc/"
              >Show HN: BudgetFlow – Budget planning using interactive Sankey
              diagrams</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 11:56:02</span
              ><span class="points-container"
                >Points: <span class="points">139</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41180441"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41179735">
          <h3>
            <a
              class="item"
              href="https://www.usgs.gov/news/featured-story/first-usgs-supercomputer-decommissioning-makes-way-successors"
              >First USGS supercomputer decommissioning makes way for
              successors</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 09:46:25</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41179735"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41178959">
          <h3>
            <a
              class="item"
              href="https://news.alvaroduran.com/p/cringey-but-true-how-uber-tests-payments"
              >How Uber tests payments in production</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 07:16:02</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41178959"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41177831">
          <h3>
            <a
              class="item"
              href="https://www.theparisreview.org/blog/2024/08/02/the-private-life-on-james-baldwin/"
              >The Private Life: On James Baldwin</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-07 @ 02:58:57</span
              ><span class="points-container"
                >Points: <span class="points">101</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41177831"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41176831">
          <h3>
            <a class="item" href="https://teenage.engineering/products/ep-1320"
              >Medieval</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 23:57:42</span
              ><span class="points-container"
                >Points: <span class="points">779</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41176831"
                  >Comments</a
                ><span class="descendants">: 291</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41176817">
          <h3>
            <a
              class="item"
              href="https://andypiper.co.uk/2024/08/06/mnt-pocket-reform-first-impressions/"
              >MNT Pocket Reform first impressions and hardware</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 23:56:05</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41176817"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41176461">
          <h3>
            <a
              class="item"
              href="https://practical.engineering/blog/2024/8/6/how-french-drains-work"
              >How French Drains Work</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 23:07:07</span
              ><span class="points-container"
                >Points: <span class="points">327</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41176461"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41175281">
          <h3>
            <a
              class="item"
              href="https://lithoz.com/en/lithoz-and-glassomer-launch-innovation-partnership-presenting-lithaglass-powered-by-glassomer-a-3d-printable-quartz-glass-for-high-performance-applications/"
              >A 3D-printable quartz glass for high-performance applications</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 20:56:13</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41175281"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41174890">
          <h3>
            <a
              class="item"
              href="https://www.amusingplanet.com/2016/04/blackhouses-of-scotland.html"
              >Blackhouses of Scotland</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 20:19:58</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41174890"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41173377">
          <h3>
            <a
              class="item"
              href="https://www.jointhefollowup.com/p/the-actual-wolf-of-wall-street-sales-script"
              >The real "Wolf of Wall Street" sales script</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 17:56:37</span
              ><span class="points-container"
                >Points: <span class="points">390</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41173377"
                  >Comments</a
                ><span class="descendants">: 235</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41173177">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/artanddesign/article/2024/aug/06/superfest-unbreakable-drinking-glasses-east-germany"
              >East Germany invented 'unbreakable' drinking glasses</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 17:37:51</span
              ><span class="points-container"
                >Points: <span class="points">305</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41173177"
                  >Comments</a
                ><span class="descendants">: 202</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41172883">
          <h3>
            <a
              class="item"
              href="https://www.chemistryworld.com/news/chemical-waves-used-to-encode-words-as-morse-code/4019908.article"
              >Chemical 'waves' used to encode words as Morse code</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 17:12:01</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41172883"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41170111">
          <h3>
            <a
              class="item"
              href="https://nowotarski.info/wordpress-nonce-authorization/"
              >Exploiting authorization by nonce in WordPress plugins</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 12:13:21</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41170111"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41169924">
          <h3>
            <a
              class="item"
              href="https://www.nytimes.com/2024/08/05/science/tsung-dao-lee-dead.html"
              >Tsung-Dao Lee, physicist who challenged a law of nature, has
              died</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-06 @ 11:49:57</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41169924"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41147393">
          <h3>
            <a
              class="item"
              href="https://news.ubc.ca/2024/07/ubc-super-black-wood-nxylon/"
              >Nxylon: New super-black material made from wood</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 16:06:24</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41147393"
                  >Comments</a
                ><span class="descendants">: 52</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41144909">
          <h3>
            <a class="item" href="https://github.com/Zirias/xmoji"
              >Emotional about X11: I'm creating a pure X11 “emoji keyboard”</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 05:50:10</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41144909"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41144685">
          <h3>
            <a
              class="item"
              href="https://lsd.gnunet.org/lsd0004/draft-schanzen-r5n.html"
              >R5N - Obfuscated mesh routing on hostile networks.</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-03 @ 04:30:27</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41144685"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
