<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43345297">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/artie/jobs/Vz704T1-founding-engineer-distributed-systems"
              >Artie (YC S23) Is Hiring Engineer #3</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 17:01:02</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43345285">
          <h3>
            <a
              class="item"
              href="https://wulinshu.com/2025/03/11/reverse-engineering-adventures-3-bug-or-not-bug/"
              >Shenmue (1999) Reverse Engineering Reveals Possible Sun Position
              Oversight</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 17:00:28</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43345285"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43344703">
          <h3>
            <a
              class="item"
              href="https://sugaku.net/content/understanding-the-cultural-divide-between-mathematics-and-ai/"
              >The Cultural Divide Between Mathematics and AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 16:07:35</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43344703"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43344673">
          <h3>
            <a
              class="item"
              href="https://twitter.com/benswerd/status/1899853533761200300"
              >Reverse Engineering OpenAI Code Execution to make it run C and
              JavaScript</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 16:04:54</span
              ><span class="points-container"
                >Points: <span class="points">64</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43344673"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43344595">
          <h3>
            <a class="item" href="https://github.com/MaxenceMaire/audionimbus"
              >Show HN: AudioNimbus – Steam Audio's immersive spatial audio, now
              in Rust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 15:58:36</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43344595"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                Steam Audio is a toolkit for spatial audio, developed by Valve.
                It simulates realistic sound propagation, including effects like
                directionality, distance attenuation, reflections, and reverb.
                It’s used in games like <i>Half-Life: Alyx</i> and
                <i>Counter-Strike 2</i>.
              </p>
              <p>
                Rust is increasingly being adopted in game development, but
                there’s a need to bridge the gap with industry-proven tools like
                Steam Audio. AudioNimbus aims to fill that gap, making it easier
                to integrate immersive audio into Rust projects.
              </p>
              <p>
                AudioNimbus supports a variety of spatial audio effects,
                including:
              </p>
              <p>
                - <i>Head-Related Transfer Function (HRTF)</i>: Simulates how
                the listener’s ears, head, and shoulders shape sound perception,
                providing the acoustic cues the brain uses to infer direction
                and distance.
              </p>
              <p>
                - <i>Ambisonics and surround sound</i>: Uses multiple audio
                channels to create the sensation of sound coming from specific
                directions.
              </p>
              <p>
                - <i>Sound propagation</i>: Models how sound is affected as it
                travels through its environment, including effects like distance
                attenuation and interaction with physical obstacles of varying
                materials.
              </p>
              <p>
                - <i>Reflections</i>: Simulates how sound waves reflect off
                surrounding geometry, mimicking real-world acoustic behavior.
              </p>
              <p>
                The project is open-source on GitHub:
                <a href="https://github.com/MaxenceMaire/audionimbus"
                  >https://github.com/MaxenceMaire/audionimbus</a
                >
              </p>
              <p>
                It includes code snippets and examples to help you get started.
                Contributions and feedback are welcome!
              </p>
              <p>
                I’d love to hear your thoughts and see what you build with
                AudioNimbus. Feel free to share your projects, ask questions, or
                suggest improvements.
              </p>
              <p>Happy hacking!</p>
            </div>
          </section>
        </section>
        <section id="43344129">
          <h3>
            <a
              class="item"
              href="https://www.sfgate.com/sf-culture/article/san-francisco-sony-bouncy-ball-ad-20204385.php"
              >'It was chaos': The history of San Francisco's most unforgettable
              ad</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 15:12:44</span
              ><span class="points-container"
                >Points: <span class="points">108</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43344129"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43344082">
          <h3>
            <a
              class="item"
              href="https://deepmind.google/discover/blog/gemini-robotics-brings-ai-into-the-physical-world/"
              >Gemini Robotics brings AI into the physical world</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 15:09:09</span
              ><span class="points-container"
                >Points: <span class="points">168</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43344082"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43343832">
          <h3>
            <a
              class="item"
              href="https://www.hillelwayne.com/post/javascript-puzzle/"
              >A Perplexing JavaScript Parsing Puzzle</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 14:46:02</span
              ><span class="points-container"
                >Points: <span class="points">30</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43343832"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43342712">
          <h3>
            <a class="item" href="https://duckdb.org/2025/03/12/duckdb-ui.html"
              >The DuckDB Local UI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 12:56:01</span
              ><span class="points-container"
                >Points: <span class="points">368</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43342712"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43342407">
          <h3>
            <a
              class="item"
              href="https://pmc.ncbi.nlm.nih.gov/articles/PMC10585277/"
              >How far neuroscience is from understanding brains (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 12:13:42</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43342407"
                  >Comments</a
                ><span class="descendants">: 46</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43342361">
          <h3>
            <a class="item" href="https://github.com/kern/filepizza"
              >Peer-to-peer file transfers in the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 12:08:43</span
              ><span class="points-container"
                >Points: <span class="points">258</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43342361"
                  >Comments</a
                ><span class="descendants">: 158</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43342178">
          <h3>
            <a class="item" href="https://ersei.net/en/blog/niri"
              >The Future Is Niri</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 11:42:16</span
              ><span class="points-container"
                >Points: <span class="points">195</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43342178"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43342101">
          <h3>
            <a class="item" href="https://www.getavid.dev"
              >Show HN: We built Lovable for Mobile Apps (uses Flutter)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 11:29:18</span
              ><span class="points-container"
                >Points: <span class="points">15</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43342101"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've gone through lots and lots of iterations to help the agent
                produce beautiful results. Would love your feedback.
              </p>
              <p>
                Ability to download App files and flutter code should be ready
                this coming week. Have a look and let me know what you think!
              </p>
            </div>
          </section>
        </section>
        <section id="43342071">
          <h3>
            <a
              class="item"
              href="https://spectrum.ieee.org/ammonia-fuel-2671266100"
              >First Ammonia-Fueled Ship Hits a Snag</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 11:24:40</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43342071"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43341789">
          <h3>
            <a
              class="item"
              href="https://www.computerarcheology.com/Arcade/SpaceInvaders/"
              >Space Invaders</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 10:46:18</span
              ><span class="points-container"
                >Points: <span class="points">48</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43341789"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43340505">
          <h3>
            <a
              class="item"
              href="https://binarysecurity.no/posts/2025/03/api-connections"
              >Azure's Weakest Link? How API Connections Spill Secrets</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 06:43:07</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43340505"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43340491">
          <h3>
            <a
              class="item"
              href="https://storage.googleapis.com/deepmind-media/gemma/Gemma3Report.pdf"
              >Gemma 3 Technical Report [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 06:39:17</span
              ><span class="points-container"
                >Points: <span class="points">318</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43340491"
                  >Comments</a
                ><span class="descendants">: 183</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43340385">
          <h3>
            <a class="item" href="https://nullprogram.com/blog/2025/03/06/"
              >A more robust raw OpenBSD syscall demo</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 06:11:41</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43340385"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43340196">
          <h3>
            <a
              class="item"
              href="https://soatok.blog/2025/03/12/on-the-insecurity-of-telecom-stacks-in-the-wake-of-salt-typhoon/"
              >The Insecurity of Telecom Stacks in the Wake of Salt Typhoon</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 05:21:33</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43340196"
                  >Comments</a
                ><span class="descendants">: 93</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43339629">
          <h3>
            <a class="item" href="https://xpipe.io/"
              >Show HN: XPipe, a shell connection hub for SSH, Docker, K8s, VMs,
              and more</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 03:16:28</span
              ><span class="points-container"
                >Points: <span class="points">135</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43339629"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
            <div class="text">
              <p>
                XPipe is a new type of connection hub that allows you to access
                your entire server infrastructure from your local desktop. It
                can make your life easier when working with any kind of servers
                by eliminating all the commonly tedious tasks that come up when
                interacting with remote systems, either from the terminal or
                from a graphical interface. XPipe comes with integrations for
                SSH, docker and other containers, various hypervisors like
                Proxmox, Kubernetes clusters, tools like Teleport and Tailscale,
                and more without requiring any setup on your remote systems. You
                can link your favourite text/code editors, terminals, password
                managers, shells, command-line tools, and more with it, allowing
                you to keep using your own favourite tools when working with
                XPipe.
              </p>
              <p>
                The entire implementation of how it communicates with remote
                systems is completely different from most other solutions out
                there. What happens in the background can essentially be
                explained this way: It launches a local shell process like cmd
                or bash and executes a command that opens a remote shell
                connection such as ssh user@host in that shell process. All
                communication is then done through the stdin/stdout/stderr of
                that shell process. From there, it detects what kind of server
                and environment, such as shell type, os, user, etc. you have
                logged into and adjusts how it talks to the remote system. By
                then using, for example, file system related commands such as
                ls, rm, touch, etc. and its equivalents, it can realize a
                functional file manager that can connect to essentially every
                system.
              </p>
              <p>
                It is essentially the same idea as emacs TRAMP mode if you have
                ever used that. With the difference being that it works on all
                kinds of systems and is also not constrained to a certain
                editor/tool environment. VSCode also uses a similar approach for
                some of the remote development tools with SSH, but that one is
                more limited in scope and is a little bit sluggish to use. And
                it's also bound to the VSCode platform. The goal of XPipe's
                implementation is to not be limited by a certain environment or
                specific set of tools.
              </p>
              <p>
                The development took a while as this new approach requires a
                completely new implementation in many areas, but I am confident
                that it's ready now. I appreciate any kind of feedback from you
                to guide me in the right development direction from here.
              </p>
              <p>Enjoy!</p>
            </div>
          </section>
        </section>
        <section id="43339584">
          <h3>
            <a class="item" href="https://github.com/WW92030-STORAGE/VSC"
              >Show HN: VSC – An open source 3D Rendering Engine in C++</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 03:08:23</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43339584"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
            <div class="text">
              <p>
                Simply load a model or generate a mesh, add some lights, and
                render.
              </p>
            </div>
          </section>
        </section>
        <section id="43339563">
          <h3>
            <a
              class="item"
              href="https://lumalabs.ai/news/inductive-moment-matching"
              >Beyond Diffusion: Inductive Moment Matching</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 03:05:47</span
              ><span class="points-container"
                >Points: <span class="points">170</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43339563"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43339206">
          <h3>
            <a
              class="item"
              href="https://www.readtrung.com/p/why-i-love-bluey-and-hate-cocomelon"
              >A look at the creative process behind Bluey and Cocomelon
              (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-12 @ 01:54:35</span
              ><span class="points-container"
                >Points: <span class="points">140</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43339206"
                  >Comments</a
                ><span class="descendants">: 159</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43338405">
          <h3>
            <a class="item" href="https://ashwanirathee.com/blog/2025/sort2/"
              >Sorting algorithms with CUDA</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-11 @ 23:47:43</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43338405"
                  >Comments</a
                ><span class="descendants">: 38</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43337703">
          <h3>
            <a
              class="item"
              href="https://github.com/ZachGoldberg/Startup-CTO-Handbook/blob/main/StartupCTOHandbook.md"
              >The Startup CTO's Handbook</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-11 @ 22:18:42</span
              ><span class="points-container"
                >Points: <span class="points">462</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43337703"
                  >Comments</a
                ><span class="descendants">: 151</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43312527">
          <h3>
            <a class="item" href="https://i18n-puzzles.com/"
              >Internationalization-puzzles: Daily programming puzzles just like
              Advent of Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-09 @ 19:08:45</span
              ><span class="points-container"
                >Points: <span class="points">110</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43312527"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43309696">
          <h3>
            <a
              class="item"
              href="https://bitsandtheorems.com/definite-clause-grammars-and-symbolic-differentiation/"
              >Definite clause grammars and symbolic differentiation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-09 @ 15:10:38</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43309696"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43308278">
          <h3>
            <a class="item" href="https://github.com/openui/open-ui"
              >Open-UI: Maintain an open standard for UI and promote its
              adherence and adoption</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-09 @ 11:53:58</span
              ><span class="points-container"
                >Points: <span class="points">208</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43308278"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43306514">
          <h3>
            <a class="item" href="https://eprint.iacr.org/2025/435"
              >Constant-time coding will soon become infeasible</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-09 @ 05:21:41</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43306514"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43301095">
          <h3>
            <a
              class="item"
              href="https://www.medicaldevice-network.com/news/fda-issues-early-alert-for-baxter-spectrum-infusion-pump/"
              >FDA issues early alert for Baxter's Spectrum infusion pump</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-03-08 @ 15:49:47</span
              ><span class="points-container"
                >Points: <span class="points">17</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43301095"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
