<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41359270">
          <h3><a class="item" href="https://iographica.com/">IOGraphica</a></h3>
          <section>
            <h4>
              <span>2024-08-26 @ 17:06:55</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41359270"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41359214">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/prohostai/jobs/if61XBq-founding-engineer-ios"
              >ProhostAI (YC S24) Is Hiring an iOS Engineer (SF)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 17:01:15</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41359132">
          <h3>
            <a
              class="item"
              href="https://usbirdhistory.com/audubon-eating-americas-birds/"
              >Eating the Birds of America: Audubon's Culinary Reviews of
              America's Birds</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 16:55:16</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41359132"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41359109">
          <h3>
            <a
              class="item"
              href="https://www.tribunal-de-paris.justice.fr/sites/default/files/2024-08/2024-08-26%20-%20CP%20TELEGRAM%20.pdf"
              >Pavel Durov is questioned on 12 charges [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 16:53:01</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41359109"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41358490">
          <h3>
            <a class="item" href="https://bannerify.co/tools/remove-bg"
              >Show HN: Remove-bg – open-source remove background using
              WebGPU</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 15:58:09</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41358490"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                After a couple of hours, I created this and published the source
                code on
                <a href="https://github.com/ducan-ne/remove-bg"
                  >https://github.com/ducan-ne/remove-bg</a
                >
              </p>
              <p>It's still new so welcome any ideas and contributions</p>
              <p>Powered by WebGPU and Transformer.js (RMBG V1.4 model)</p>
            </div>
          </section>
        </section>
        <section id="41358132">
          <h3>
            <a
              class="item"
              href="https://sfstandard.com/2024/08/23/holden-karau-fight-health-insurance-appeal-claims-denials/"
              >Make your health insurance company cry: One woman's fight to turn
              the tables</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 15:31:54</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41358132"
                  >Comments</a
                ><span class="descendants">: 82</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41358020">
          <h3>
            <a class="item" href="https://hamel.dev/blog/posts/dokku/"
              >Dokku: My favorite personal serverless platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 15:21:56</span
              ><span class="points-container"
                >Points: <span class="points">189</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41358020"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41357969">
          <h3>
            <a
              class="item"
              href="https://www.theverge.com/2024/8/26/24228639/frontier-7-gig-fiber-speed-rollout-plan-pricing"
              >Frontier is about to offer 7-gig fiber across several states</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 15:17:05</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41357969"
                  >Comments</a
                ><span class="descendants">: 62</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41357853">
          <h3>
            <a
              class="item"
              href="https://linuxblog.io/linux-tiling-desktop-environments/"
              >Linux: We need tiling desktop environments</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 15:05:51</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41357853"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41357765">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41357765"
              >Launch HN: Parity (YC S24) – AI for on-call engineers working
              with Kubernetes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 14:55:56</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41357765"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
            <div class="text">
              <a href="https://tryparity.com">https://tryparity.com</a>), an AI
              SRE copilot for on-call engineers working with Kubernetes. Before
              you've opened your laptop, Parity has conducted an investigation
              to triage, determine root cause, and suggest a remediation for an
              issue. You can check out a quick demo of Parity here:
              <a href="https://tryparity.com/demo"
                >https://tryparity.com/demo</a
              >
              <p>
                We met working together as engineers at Crusoe, a cloud
                provider, and we always dreaded being on-call. It meant a week
                of putting our lives and projects on hold to be prepared to
                firefight an issue at any hour of the day. We experienced
                sleepless nights after being woken up by a PagerDuty alert to
                then find and follow a runbook. We canceled plans to make time
                to sift through dashboards and logs in search of the root cause
                of downtime in our k8s cluster.
              </p>
              <p>
                After speaking with other devs and SREs, we realized we weren’t
                alone. While every team wants better monitoring systems or a
                more resilient design, the reality is that time and resources
                are often too limited to make these investments.
              </p>
              <p>
                We’re building Parity to solve this problem. We’re enabling
                engineers working with Kubernetes to more easily handle their
                on-call by using AI agents to execute runbooks and conduct root
                cause analysis. We knew LLMs could help given their ability to
                quickly process and interpret large amounts of data. But we’ve
                found that LLMs alone aren’t sufficiently capable, so we’ve
                built agents to take on more complex tasks like root cause
                analysis. By allowing on-call engineers to handle these tasks
                more easily and eventually freeing them from such
                responsibilities, we create more time for them to focus on
                complex and valuable engineering investments.
              </p>
              <p>
                We built an agent to investigate issues in Kubernetes by
                following the same steps a human would: developing a possible
                root cause, validating it with logs and metrics, and iterating
                until a well-supported root cause is found. Given a symptom like
                “we’re seeing elevated 503 errors”, our agent develops
                hypotheses as to why this may be the case, such as nginx being
                misconfigured or application pods being under-resourced. Then,
                it gathers the necessary information from the cluster to either
                support or rule out those hypotheses. These results are
                presented to the engineer as a report with a summary and each
                hypothesis. It includes all the evidence the agent considered
                when coming to a conclusion so that an engineer can quickly
                review and validate the results. With the results of the
                investigation, an on-call engineer can focus on implementing a
                fix.
              </p>
              <p>
                We’ve built an additional agent to automatically execute
                runbooks when an alert is triggered. It follows steps of a
                runbook more rigorously than an LLM alone and with more
                flexibility than workflow automation tools like Temporal. This
                agent is a combination of separate LLM agents each responsible
                for a single step of the runbook. Each runbook step agent will
                execute arbitrary instructions like “look for nginx logs that
                could explain the 503 error”. A separate LLM will evaluate the
                results, ensuring the step agent followed the instructions, and
                determines which subsequent step of the runbook to execute. This
                allows us to execute runbooks with cycles, retries, and complex
                branching conditions.
              </p>
              <p>
                With these tools, we aim to handle the “what’s going wrong” part
                of on-call for engineers. We still believe it makes the most
                sense to continue to trust engineers with actually resolving
                issues as this requires potentially dangerous or irreversible
                commands. For that reason, our agents exclusively execute
                read-only commands.
              </p>
              <p>
                If this sounds like it could be useful for you, we’d love for
                you to give the product a try! Our service can be installed in
                your cluster via a helm repo in just a couple of minutes. For
                our HN launch, we’ve removed the billing requirement for new
                accounts, so you can test it out on your cluster for free.
              </p>
              <p>We’d love to hear your feedback in the comments!</p>
            </div>
          </section>
        </section>
        <section id="41357714">
          <h3>
            <a
              class="item"
              href="https://www.northjersey.com/story/news/essex/montclair/2024/06/20/tiny-montclair-radio-station-plays-one-song-over-and-over/74124151007/"
              >How a tiny radio station came to play a continuous loop since the
              late-1990s</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 14:50:26</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41357714"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41356528">
          <h3>
            <a
              class="item"
              href="https://www.nsa.gov/helpful-links/nsa-foia/declassification-transparency-initiatives/historical-releases/view/article/3880193/capt-grace-hopper-on-future-possibilities-data-hardware-software-and-people-1982/"
              >NSA releases 1982 Grace Hopper lecture</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 12:37:32</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41356528"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41356239">
          <h3>
            <a
              class="item"
              href="https://blog.api-fiddle.com/posts/coolify-revolution"
              >Coolify’s rise to fame, and why it could be a big deal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 11:50:20</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41356239"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41355800">
          <h3>
            <a
              class="item"
              href="https://leanpub.com/master-software-architecture"
              >Show HN: I published a book to save you from my software
              architecture mistakes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 10:35:11</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41355800"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
            <div class="text">
              <p>
                I just wanted to share that after five months of intense work
                and countless caffeine-fueled writing sessions, "Master Software
                Architecture: A Pragmatic Guide" is now available.
              </p>
              <p>
                Writing this book was a crazy time. I entirely focused on it,
                and it took exactly 753 hours of writing, editing, and image
                editing &amp; resizing(!) until the premiere.
              </p>
              <p>
                Yes, the last one (images) was a killer. If you ever think about
                writing a book, reserve a lot of time for it unless someone else
                does it for you.
              </p>
              <p>
                As a result, I am handing you the nearly 400-page book. It is a
                guide that will help you connect all the pieces while balancing
                the focus on understanding the domain and technology aspects,
                described using a pragmatic approach and super simple language.
              </p>
              <p>
                It is perfect for novice architects taking their first steps in
                software architecture. It is also an invaluable resource for
                software engineers looking to understand architectural concepts
                and those considering transitioning into an architect role.
              </p>
              <p>
                Several guest authors, including Vlad Khononov (Learning
                Domain-Driven Design book), Oskar Dudycz (Marten, Emmett,
                Pongo), and Milan Jovanović (.NET &amp; C# educator), shared
                their views on keys to successful software architecture.
              </p>
              <p>
                Here you can find a free chapter (the first link on this page):
              </p>
              <p>
                <a
                  href="https://www.fractionalarchitect.io/books/master-software-architecture"
                  >https://www.fractionalarchitect.io/books/master-software-arc...</a
                >
              </p>
              <p>To your success, Maciej "MJ" Jedrzejewski</p>
            </div>
          </section>
        </section>
        <section id="41355303">
          <h3>
            <a
              class="item"
              href="https://cprimozic.net/blog/fixing-a-bug-in-google-chrome/"
              >Fixing a bug in Google Chrome as a first-time contributor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 09:10:56</span
              ><span class="points-container"
                >Points: <span class="points">330</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41355303"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41355288">
          <h3>
            <a
              class="item"
              href="https://www.jerrypournelle.com/reports/jerryp/iron.html"
              >The Iron Law of Bureaucracy (2010)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 09:08:28</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41355288"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41353835">
          <h3>
            <a class="item" href="https://github.com/yetone/avante.nvim"
              >Avante.nvim: Use Your Neovim Like Using Cursor AI IDE</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 03:44:48</span
              ><span class="points-container"
                >Points: <span class="points">196</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41353835"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41353328">
          <h3>
            <a class="item" href="https://www.gkogan.co/removing-stuff/"
              >Removing stuff is never obvious yet often better</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 01:59:13</span
              ><span class="points-container"
                >Points: <span class="points">405</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41353328"
                  >Comments</a
                ><span class="descendants">: 174</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41352681">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/world/asia-pacific/australian-employees-now-have-right-ignore-work-emails-calls-after-hours-2024-08-25/"
              >Australian employees now have the right to ignore work emails,
              calls after hours</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-26 @ 00:08:07</span
              ><span class="points-container"
                >Points: <span class="points">432</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41352681"
                  >Comments</a
                ><span class="descendants">: 341</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41351380">
          <h3>
            <a
              class="item"
              href="http://electronupdate.blogspot.com/2024/08/pi-pico-2-extreme-teardown.html"
              >Pi Pico 2 Extreme Teardown</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 21:01:04</span
              ><span class="points-container"
                >Points: <span class="points">149</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41351380"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41351219">
          <h3>
            <a
              class="item"
              href="https://www.raphkoster.com/2009/01/08/database-sharding-came-from-uo/"
              >Database “sharding” came from Ultima Online? (2009)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 20:42:02</span
              ><span class="points-container"
                >Points: <span class="points">273</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41351219"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41351009">
          <h3>
            <a
              class="item"
              href="https://www.inexhibit.com/case-studies/olivetti-programma-101-at-the-origins-of-the-personal-computer/"
              >Olivetti Programma 101: At the Origins of the Personal
              Computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 20:20:56</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41351009"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41350468">
          <h3>
            <a
              class="item"
              href="https://github.com/getlago/lago/wiki/Stripe-Data-vs-Open%E2%80%90Source-Alternatives:-a-MRR-example"
              >Stripe Data vs. Open‐Source Alternatives: A MRR Example</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 19:28:26</span
              ><span class="points-container"
                >Points: <span class="points">134</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41350468"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41348844">
          <h3>
            <a
              class="item"
              href="https://qsantos.fr/2024/08/25/linux-pipes-are-slow/"
              >Linux Pipes Are Slow</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 16:52:14</span
              ><span class="points-container"
                >Points: <span class="points">290</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41348844"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41348631">
          <h3>
            <a class="item" href="https://github.com/buffdb/buffdb"
              >BuffDB is a Rust library to simplify multi-plexing on edge
              devices</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 16:34:05</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41348631"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41348204">
          <h3>
            <a class="item" href="https://github.com/flxzt/rnote"
              >Rnote – Sketch and take handwritten notes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-25 @ 15:51:11</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41348204"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41338193">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/gadgets/2024/08/acemagics-x1-is-a-clever-but-delicate-approach-to-dual-screen-laptops/"
              >Dual-screen laptops make more sense with this spiral
              notebook-like hinge</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-24 @ 13:33:42</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41338193"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41336657">
          <h3>
            <a
              class="item"
              href="https://terathon.com/blog/poor-foundations-ga.html"
              >Poor Foundations in Geometric Algebra</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-24 @ 08:51:00</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41336657"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41310508">
          <h3>
            <a class="item" href="https://github.com/makeecat/Peng"
              >Peng – A minimal Rust-based quadrotor simulation pipeline</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 14:13:33</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41310508"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41310311">
          <h3>
            <a class="item" href="https://initialneil.github.io/DEGAS"
              >Degas: Detailed Expressions on Full-Body Gaussian Avatars</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-21 @ 13:52:40</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41310311"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
