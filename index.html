<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="45453448">
          <h3>
            <a
              class="item"
              href="https://twitter.com/chetaslua/status/1973694615518880236"
              >Gemini 3.0 Pro – early tests</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 18:26:57</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45453448"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45453299">
          <h3>
            <a class="item" href="https://sfshortstories.com/?p=5983"
              >The Answer (1954)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 18:13:24</span
              ><span class="points-container"
                >Points: <span class="points">7</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45453299"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45453257">
          <h3>
            <a
              class="item"
              href="https://news.gallup.com/poll/695762/trust-media-new-low.aspx"
              >Dropping Trust in US Media</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 18:09:46</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45453257"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45453222">
          <h3>
            <a
              class="item"
              href="https://entropicthoughts.com/why-stick-to-emacs-blog"
              >I Keep Blogging with Emacs</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 18:06:41</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45453222"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45453135">
          <h3>
            <a
              class="item"
              href="https://www.fastmail.com/blog/not-written-with-ai/"
              >Email immutability matters more in a world with AI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 18:00:27</span
              ><span class="points-container"
                >Points: <span class="points">35</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45453135"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45452299">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/liva-ai/jobs/6xM8JYU-founding-operations-lead"
              >Liva AI (YC S25) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 17:01:16</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45452261">
          <h3>
            <a
              class="item"
              href="https://andregarzia.com/2025/03/why-i-choose-lua-for-this-blog.html"
              >Why I chose Lua for this blog</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 16:58:55</span
              ><span class="points-container"
                >Points: <span class="points">21</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45452261"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45451961">
          <h3>
            <a
              class="item"
              href="https://blog.google/technology/research/scaling-quantum-computing-even-faster-with-atlantic-quantum/"
              >The Atlantic Quantum team is joining Google</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 16:36:53</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45451961"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45451577">
          <h3>
            <a class="item" href="https://github.com/paaatrick/playball"
              >Watch MLB games from the comfort of your own terminal</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 16:09:15</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45451577"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45451547">
          <h3>
            <a class="item" href="https://www.simplex.sh/"
              >Launch HN: Simplex (YC S24) – Browser automation platform for
              developers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 16:07:23</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45451547"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
            <div class="text">
              <a href="https://www.simplex.sh/">https://www.simplex.sh/</a>).
              We’re building all the infrastructure you need for modern browser
              automation – including remote browsers, steerable web agents, and
              more.
              <p>
                Here’s a demo:
                <a href="https://youtu.be/7KpWJbOcm1Y"
                  >https://youtu.be/7KpWJbOcm1Y</a
                >
              </p>
              <p>
                We’re excited to be posting on HN again! Back in January, we
                Show HN’d the earliest version of Simplex (<a
                  href="https://news.ycombinator.com/item?id=42704160"
                  >https://news.ycombinator.com/item?id=42704160</a
                >). We’ve now spent close to a year working with real customers,
                forward-deploying into their codebases, and building web agent
                systems for them from the ground up to understand what it takes
                to get agents working in production.
              </p>
              <p>
                We built Simplex because we started seeing a pattern: companies
                would initially roll their own Playwright/Stagehand web
                automation solutions. This worked fine in the early prototype
                stages, but they’d quickly get overwhelmed with technical
                challenges as they productionized automations across all the
                websites their customers use.
              </p>
              <p>As they scaled, they’d have to build and manage:</p>
              <p>
                - Chrome infrastructure: You'll need remote browsers, extension
                support, browser settings for anti-bot detection/stealth, and a
                hundred more small fixes.
              </p>
              <p>
                - DOM parsing: We’ve seen many web portals have really weird
                quirks (nested iframes, shadow DOM elements, dynamic loading,
                popups, unstable selectors, etc..) that are hard to parse with
                traditional/existing browser agents.
              </p>
              <p>
                - Agent context engineering: Website state, user prompts, system
                prompts, past actions all take up a massive amount of context.
                Without managing this, agents can get caught in loops or take
                wrong actions.
              </p>
              <p>
                - Caching/reliability: No matter how perfect your prompts are,
                it’s hard to guarantee consistency without caching/deterministic
                actions.
              </p>
              <p>
                - Login/2FA: Solve captcha, fetch 2FA from email/text/Google
                Auth, encrypt/decrypt credentials to access portals blocked by
                login.
              </p>
              <p>
                - Automation management: You’ll have to store all your prompts,
                scrapers, and agents, and find a way to make them reusable if
                you have the same workflows across different portals.
              </p>
              <p>
                - User interface: Creating new workflows + debugging can take
                time. You’ll have to find easy ways to expose this to your
                engineers to make the process more efficient when you have
                hundreds of automations to build.
              </p>
              <p>
                Simplex is a proper solution that handles all of the above for
                you. We offer both an UI/dashboard (which is what we use even as
                technical developers) and an extensive API for customers who are
                using Simplex in their existing AI agents. Our dashboard/API
                docs are here:
                <a href="https://simplex.sh/docs">https://simplex.sh/docs</a>.
                We’d love for you to check them out!
              </p>
              <p>
                You can get started for free with Simplex at (<a
                  href="https://www.simplex.sh/"
                  >https://www.simplex.sh/</a
                >) (you have to register to prevent abuse since we’re giving you
                a remote browser that connects to the internet).
              </p>
              <p>
                Our first users have been AI companies across different
                industries like accounting, logistics/transportation, customer
                service, and healthtech. We’ve seen them:
              </p>
              <p>
                - Fill out prior authorization forms on medical provider portals
              </p>
              <p>
                - Download hundreds of PDFs from grocer portals across the US
              </p>
              <p>
                - Automate and scrape structured data from traditional ERPs like
                NetSuite
              </p>
              <p>- Submit bids/shipments on logistics/TMS portals</p>
              <p>
                - Scrape lawyer/doctor license information across public
                government portals
              </p>
              <p>- And more!</p>
              <p>
                We’re excited to see more use cases as we open up the platform –
                this is our first time doing self-serve.
              </p>
              <p>
                Wanted to end with a quick thank you to HN. The feedback on our
                first Show HN gave us confidence to steer our product in this
                direction, and has deeply shaped the last year of our lives.
                We’d love feedback, especially from anyone who’s tried solving
                this problem or built similar tools.
              </p>
              <p>
                Happy to answer questions and looking forward to your comments!
              </p>
            </div>
          </section>
        </section>
        <section id="45451527">
          <h3>
            <a class="item" href="https://signal.org/blog/spqr/"
              >Signal Protocol and Post-Quantum Ratchets</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 16:06:10</span
              ><span class="points-container"
                >Points: <span class="points">221</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45451527"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45450694">
          <h3>
            <a
              class="item"
              href="https://www.economist.com/business/2025/10/02/does-big-pharma-gouge-americans"
              >Pharma is a small component of US health care spending</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 15:07:48</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45450694"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45450525">
          <h3>
            <a
              class="item"
              href="https://www.leadingsapiens.com/surviving-institutional-stupidity/"
              >Work is not school: Surviving institutional stupidity</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 14:58:04</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45450525"
                  >Comments</a
                ><span class="descendants">: 79</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45450449">
          <h3>
            <a
              class="item"
              href="https://www.abc15.com/news/region-west-valley/tolleson/two-amazon-delivery-drones-crash-into-crane-in-commercial-area-of-tolleson"
              >Two Amazon delivery drones crash into crane in commercial area of
              Tolleson, AZ</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 14:52:49</span
              ><span class="points-container"
                >Points: <span class="points">146</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45450449"
                  >Comments</a
                ><span class="descendants">: 142</span></span
              >
            </h4>
            <div class="text">
              <a
                href="https://www.theverge.com/news/790636/amazon-prime-mk30-drone-delivery-crash-arizona-pause"
                >https://www.theverge.com/news/790636/amazon-prime-mk30-drone...</a
              >
            </div>
          </section>
        </section>
        <section id="45450044">
          <h3>
            <a
              class="item"
              href="https://community.n8n.io/t/data-tables-are-here/192256"
              >N8n added native persistent storage with DataTables</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 14:26:23</span
              ><span class="points-container"
                >Points: <span class="points">75</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45450044"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45449348">
          <h3>
            <a
              class="item"
              href="https://mastodon.social/@bagder/115241241075258997"
              >Daniel Stenberg on 22 curl bugs found by AI and fixed</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 13:29:55</span
              ><span class="points-container"
                >Points: <span class="points">259</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45449348"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45448825">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/10/02/eu_spyware_funding/"
              >EU funds are flowing into spyware companies and politicians
              demanding answers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 12:34:43</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45448825"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45448772">
          <h3>
            <a
              class="item"
              href="https://www.bleepingcomputer.com/news/security/red-hat-confirms-security-incident-after-hackers-claim-github-breach/"
              >Red Hat confirms security incident after hackers breach GitLab
              instance</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 12:28:27</span
              ><span class="points-container"
                >Points: <span class="points">164</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45448772"
                  >Comments</a
                ><span class="descendants">: 36</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45448326">
          <h3>
            <a
              class="item"
              href="https://www.bitsoffreedom.nl/2025/10/02/judge-in-the-bits-of-freedom-vs-meta-lawsuit-meta-must-respect-users-choice/"
              >NL Judge: Meta must respect user's choice of recommendation
              system</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 11:32:19</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45448326"
                  >Comments</a
                ><span class="descendants">: 208</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45447699">
          <h3>
            <a
              class="item"
              href="https://www.cnn.com/2025/10/02/middleeast/gaza-famine-causes-vis-intl"
              >How Israeli actions caused famine in Gaza, visualized</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-02 @ 09:23:50</span
              ><span class="points-container"
                >Points: <span class="points">309</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45447699"
                  >Comments</a
                ><span class="descendants">: 178</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45444694">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/arts-culture/two-years-cormac-mccarthys-death-rare-access-to-personal-library-reveals-man-behind-myth-180987150/"
              >Cormac McCarthy's personal library</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 23:06:55</span
              ><span class="points-container"
                >Points: <span class="points">252</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45444694"
                  >Comments</a
                ><span class="descendants">: 101</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45437759">
          <h3>
            <a
              class="item"
              href="https://db.cs.cmu.edu/papers/2025/zeng-sigmod2025.pdf"
              >F3: Open-source data file format for the future [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-10-01 @ 13:52:41</span
              ><span class="points-container"
                >Points: <span class="points">335</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45437759"
                  >Comments</a
                ><span class="descendants">: 111</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45416552">
          <h3>
            <a
              class="item"
              href="https://blog.gustavoleite.me/llvm-riscv-instruction"
              >Adding a new instruction to RISC-V back end in LLVM</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 17:39:02</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45416552"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45414718">
          <h3>
            <a class="item" href="https://www.asimov.press/p/cataracts"
              >The history of cataract surgery</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 15:04:07</span
              ><span class="points-container"
                >Points: <span class="points">166</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45414718"
                  >Comments</a
                ><span class="descendants">: 107</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45413717">
          <h3>
            <a class="item" href="https://github.com/vnglst/pong-wars"
              >Pong Wars: A battle between day and night, good and bad</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 13:44:02</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45413717"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45411799">
          <h3>
            <a class="item" href="https://taqib.dev/blog/stealing-from-google/"
              >Stealing from Google</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 09:27:00</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45411799"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45411514">
          <h3>
            <a class="item" href="https://kriztalz.sh/traceroute-visualizer/"
              >Show HN: Traceroute Visualizer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 08:31:36</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45411514"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
            <div class="text">
              <p>Supports MTR, flyingroutes and of course, traceroute.</p>
              <p>The existing solutions were too limited so I made that.</p>
              <p>Let me know if you have any feedback</p>
            </div>
          </section>
        </section>
        <section id="45410068">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=VaeI9YgE1o8"
              >I built ChatGPT with Minecraft redstone [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-29 @ 03:22:27</span
              ><span class="points-container"
                >Points: <span class="points">356</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45410068"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45407953">
          <h3>
            <a
              class="item"
              href="https://hazyresearch.stanford.edu/blog/2025-09-28-tp-llama-main"
              >We bought the whole GPU, so we're damn well going to use the
              whole GPU</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-28 @ 21:00:18</span
              ><span class="points-container"
                >Points: <span class="points">376</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45407953"
                  >Comments</a
                ><span class="descendants">: 61</span></span
              >
            </h4>
          </section>
        </section>
        <section id="45406804">
          <h3>
            <a
              class="item"
              href="https://americanart.si.edu/blog/throne-james-hampton"
              >Throne of the Third Heaven of the Nations' Millennium General
              Assembly (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-09-28 @ 18:46:22</span
              ><span class="points-container"
                >Points: <span class="points">40</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=45406804"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
