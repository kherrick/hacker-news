<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43863418">
          <h3>
            <a class="item" href="https://github.com/kubetail-org/kubetail"
              >Show HN: Kubetail – Real-time log search for Kubernetes</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 21:11:38</span
              ><span class="points-container"
                >Points: <span class="points">12</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43863418"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
            <div class="text">
              <p>
                Kubetail is a general-purpose logging dashboard for Kubernetes,
                optimized for tailing logs across multi-container workloads in
                real-time. With Kubetail, you can view logs from all the
                containers in a workload (e.g. Deployment or DaemonSet) merged
                into a single chronological timeline, delivered to your browser
                or terminal.
              </p>
              <p>
                I launched Kubetail on HN last year and at that time the top
                request was to add search. Now I'm happy to say we finally have
                search available in our latest official release (cli/v0.4.3,
                helm/v0.10.1). You can check it out in action here:
              </p>
              <p>
                <a href="https://www.kubetail.com/demo"
                  >https://www.kubetail.com/demo</a
                >
              </p>
              <p>
                Kubetail normally fetches logs using the Kubernetes API, which
                does not have search built-in. To enable search, click the
                “Install” button in the GUI or run `kubetail cluster install` in
                the CLI to deploy a DaemonSet that places a Kubetail agent on
                every node. Each agent runs a custom Rust binary powered by
                ripgrep; it scans the node’s log files and streams only matching
                lines to your browser or terminal. You can think of a Kubetail
                search as "remote grep" for your Kubernetes logs. Now you don’t
                need to download an entire log file just to grep it locally.
              </p>
              <p>
                Since last year we've also added some other neat features that
                users find helpful. In particular, we built a simple CLI tool
                that starts the web dashboard on your desktop:
              </p>
              <p></p>
              <pre><code>    # Install
    brew install kubetail

    # Run
    kubetail serve
</code></pre>
              We also added a powerful logs sub-command to the CLI that you can
              use to follow container logs or even fetch all the records in a
              given time window to analyze them in more detail locally
              (quick-start):
              <p></p>
              <pre><code>    # Follow example
    $ kubetail logs deployments/web \
        --with-ts \
        --with-pod \
        --follow

    # Fetch example
    $ kubetail logs deployments/web \
        --since 2025-04-20T00:00:00Z \
        --until 2025-04-21T00:00:00Z \
        --all &gt; logs.txt
</code></pre>
              We’ve added a lot more features since last year but these are the
              ones I wanted to highlight.
              <p>
                I hope you like what we're doing with Kubetail! Your feedback is
                very valuable so please let us know what you think in the
                comments here or in our Discord chat.
              </p>
              <p>Andres</p>
            </div>
          </section>
        </section>
        <section id="43862774">
          <h3>
            <a
              class="item"
              href="https://maheshba.bitbucket.io/blog/2025/02/09/2025-skunks.html"
              >The Art of Managing Skunks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 20:08:48</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43862774"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43862487">
          <h3>
            <a
              class="item"
              href="https://oxide.computer/blog/oxides-compensation-model-how-is-it-going"
              >Oxide’s compensation model: how is it going?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 19:46:10</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43862487"
                  >Comments</a
                ><span class="descendants">: 75</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43861828">
          <h3>
            <a
              class="item"
              href="https://waymo.com/blog/2025/05/waymo-making-streets-safer-for-vru"
              >New Study: Waymo is reducing serious crashes and making streets
              safer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 18:49:51</span
              ><span class="points-container"
                >Points: <span class="points">161</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43861828"
                  >Comments</a
                ><span class="descendants">: 190</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43861669">
          <h3>
            <a
              class="item"
              href="https://www.sandordargo.com/blog/2025/04/30/cpp26-constexpr-library-changes"
              >C++26: more constexpr in the standard library</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 18:36:58</span
              ><span class="points-container"
                >Points: <span class="points">24</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43861669"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43860726">
          <h3>
            <a
              class="item"
              href="https://picower.mit.edu/news/dopamine-signals-when-fear-can-be-forgotten"
              >Dopamine signals when a fear can be forgotten</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 17:29:16</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43860726"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43860428">
          <h3>
            <a class="item" href="https://www.srimech.com/MHZ5.html"
              >Millihertz 5 Mechanical Computer (2022)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 17:04:47</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43860428"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43860368">
          <h3>
            <a class="item" href="https://www.workatastartup.com/jobs/75517"
              >Waypoint Transit (YC W25) is hiring a software engineer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 17:00:45</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43860207">
          <h3>
            <a
              class="item"
              href="https://www.theregister.com/2025/02/12/arizona_woman_laptop_farm_guilty/"
              >Arizona laptop farmer pleads guilty for funneling $17M to Kim
              Jong Un</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 16:48:26</span
              ><span class="points-container"
                >Points: <span class="points">128</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43860207"
                  >Comments</a
                ><span class="descendants">: 58</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43860137">
          <h3>
            <a class="item" href="https://llasatts.github.io/llasatts/"
              >Llasa: Llama-Based Speech Synthesis</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 16:43:37</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43860137"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43860108">
          <h3>
            <a
              class="item"
              href="https://www.fivetran.com/blog/why-fivetran-and-census-are-joining-forces"
              >Fivetran to acquire Census</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 16:41:49</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43860108"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43859536">
          <h3>
            <a class="item" href="https://www.anthropic.com/news/integrations"
              >Claude Integrations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 16:02:14</span
              ><span class="points-container"
                >Points: <span class="points">332</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43859536"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43859464">
          <h3>
            <a class="item" href="https://whomtech.com/show-hn/"
              >Show HN: Roons – Mechanical Computer Kit</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 15:57:43</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43859464"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
            <div class="text">
              <a href="https://whomtech.com/show-hn"
                >https://whomtech.com/show-hn</a
              >
              <p>
                tl;dr: it's a cellular automaton on a "loom" of alternating
                bars, using contoured tiles to guide marbles through logic
                gates.
              </p>
              <p>
                It's not just "Turing complete, job done"; I've tried to make it
                actually practical. Devices are compact, e.g. you can fit a
                binary adder into a 3cm square. It took me nearly two years and
                dozens of different approaches.
              </p>
              <p>
                There's a sequence of interactive tutorials to try out, demo
                videos, and a janky simulator. I've also sent out a few
                prototype kits and have some more ready to go.
              </p>
              <p>Please ask me anything, I will talk about this for hours.</p>
              <p>-- Jesse</p>
            </div>
          </section>
        </section>
        <section id="43859446">
          <h3>
            <a class="item" href="https://antirez.com/news/151"
              >Redis is open source again</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 15:56:35</span
              ><span class="points-container"
                >Points: <span class="points">950</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43859446"
                  >Comments</a
                ><span class="descendants">: 342</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43859165">
          <h3>
            <a
              class="item"
              href="https://store.steampowered.com/app/3318050/Robot_Unlock/"
              >Show HN: Robot Unlock – an open-ended programming
              game/zachlike</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 15:38:53</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43859165"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
            <div class="text">
              <p>
                In 2010 I made an open-ended programming game based on Befunge
                and Brainf*k. I was young and didn't know what I was doing -
                coding it in AutoIT of all things and using borderless windows
                for sprites. Nevertheless, it was a full game and some people
                actually played it, sharing solutions with each other. I took it
                as a sign that the game had some potential - I appreciated this
                very much at the time.
              </p>
              <p>
                It was zachlike at its core, except that it came out earlier
                than SpaceChem and the term hadn't been coined yet.
              </p>
              <p>
                Years passed, I worked in the game industry, had some fun,
                learned a few things and eventually burned out. Meanwhile,
                Zachtronics kept making games and managed to define a genre,
                proving that there indeed was a market for such games. I'm very
                happy about that.
              </p>
              <p>
                Now I want to have a shot at going indie and almost 15 years
                later I'm launching the sequel to my 2010 game. One of my
                playtesters has been at it for 26 hours so I know it can be a
                real nerd sniper. It's a game for the type of person who loves
                quirky languages and optimizing their programs under extreme
                constraints.
              </p>
              <p>
                I have been hanging out on HN for a long time and thought some
                in this community might like the game. I want to keep doing this
                and I will as long as I can afford it.
              </p>
              <p>Looking forward to your questions and feedback.</p>
              <p>
                <a
                  href="https://store.steampowered.com/app/3318050/Robot_Unlock"
                  >https://store.steampowered.com/app/3318050/Robot_Unlock</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43858970">
          <h3>
            <a
              class="item"
              href="https://lapcatsoftware.com/articles/2024/2/3.html"
              >Mac app launches slowed by malware scan (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 15:25:36</span
              ><span class="points-container"
                >Points: <span class="points">70</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43858970"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
            <div class="text">
              <a href="https://lapcatsoftware.com/articles/2025/5/1.html"
                >https://lapcatsoftware.com/articles/2025/5/1.html</a
              >
            </div>
          </section>
        </section>
        <section id="43858826">
          <h3>
            <a
              class="item"
              href="https://www.thenewatlantis.com/publications/how-water-system-works"
              >How the Water System Works</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 15:16:48</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43858826"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43858568">
          <h3>
            <a
              class="item"
              href="https://www.nih.gov/about-nih/who-we-are/nih-director/statements/accelerating-access-research-results-new-implementation-date-2024-nih-public-access-policy"
              >Starting July 1, academic publishers can't paywall NIH-funded
              research</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 15:01:44</span
              ><span class="points-container"
                >Points: <span class="points">350</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43858568"
                  >Comments</a
                ><span class="descendants">: 47</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43857856">
          <h3>
            <a class="item" href="https://hyperparam.app/about/opensource"
              >Show HN: Hyperparam: OSS tools for exploring datasets locally in
              the browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 14:06:55</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43857856"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <p>- Hyparquet: Read any Parquet file in browser/node.js</p>
              <p>
                - Icebird: Explore Iceberg tables without needing Spark/Presto
              </p>
              <p>- HighTable: Virtual scrolling of millions of rows</p>
              <p>- Hyparquet-Writer: Export Parquet easily from JS</p>
              <p>- Hyllama: Read llama.cpp .gguf LLM metadata efficiently</p>
              <p>CLI for viewing local files: npx hyperparam dataset.parquet</p>
              <p>
                Example dataset on Hugging Face Space:
                <a
                  href="https://huggingface.co/spaces/hyperparam/hyperparam?url=https%3A%2F%2Fhuggingface.co%2Fdatasets%2Fglaiveai%2Freasoning-v1-20m%2Fblob%2Frefs%2Fconvert%2Fparquet%2Fdefault%2Ftrain%2F0000.parquet"
                  >https://huggingface.co/spaces/hyperparam/hyperparam?url=http...</a
                >
              </p>
              <p>
                No cloud uploads. No backend servers. A better way to build
                frontend data applications.
              </p>
              <p>
                GitHub:
                <a href="https://github.com/hyparam"
                  >https://github.com/hyparam</a
                >
                Feedback and PRs welcome!
              </p>
            </div>
          </section>
        </section>
        <section id="43857643">
          <h3>
            <a
              class="item"
              href="https://www.greptile.com/blog/ai-code-reviews-conflict"
              >AI code review: Should the author be the reviewer?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 13:50:38</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43857643"
                  >Comments</a
                ><span class="descendants">: 35</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43856801">
          <h3>
            <a class="item" href="https://linkwarden.app/"
              >Linkwarden: FOSS self-hostable bookmarking with AI-tagging and
              page archival</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 12:28:21</span
              ><span class="points-container"
                >Points: <span class="points">179</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43856801"
                  >Comments</a
                ><span class="descendants">: 72</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43856795">
          <h3>
            <a
              class="item"
              href="https://www.thebignewsletter.com/p/judge-rules-apple-executive-lied"
              >Judge rules Apple executive lied under oath, makes criminal
              contempt referral</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 12:27:51</span
              ><span class="points-container"
                >Points: <span class="points">709</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43856795"
                  >Comments</a
                ><span class="descendants">: 250</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43856656">
          <h3>
            <a
              class="item"
              href="https://blog.extensiontotal.com/trust-me-im-local-chrome-extensions-mcp-and-the-sandbox-escape-1875a0ee4823"
              >Trust Me, I'm Local: Chrome Extensions, MCP, and the Sandbox
              Escape</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 12:14:25</span
              ><span class="points-container"
                >Points: <span class="points">113</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43856656"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43856186">
          <h3>
            <a
              class="item"
              href="https://alexwlchan.net/2025/copying-sqlite-databases/"
              >A faster way to copy SQLite databases between computers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 11:15:08</span
              ><span class="points-container"
                >Points: <span class="points">375</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43856186"
                  >Comments</a
                ><span class="descendants">: 146</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43854776">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/when-chatgpt-broke-an-entire-field-an-oral-history-20250430/"
              >When ChatGPT broke the field of NLP: An oral history</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 07:51:39</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43854776"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43852446">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2025-04-blood-droplets-inclined-surfaces-reveal.html"
              >Blood droplets on inclined surfaces reveal new cracking
              patterns</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 00:48:11</span
              ><span class="points-container"
                >Points: <span class="points">6</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43852446"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43852315">
          <h3>
            <a
              class="item"
              href="https://electrical-engineering-portal.com/download-center/books-and-guides/electricity-generation-t-d/hybrid-ac-dc-distribution"
              >Hybrid AC/DC distribution system with a shared neutral (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 00:30:34</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43852315"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43852162">
          <h3>
            <a
              class="item"
              href="https://www.pcworld.com/article/2651749/office-is-too-slow-so-microsoft-is-making-it-load-at-windows-startup.html"
              >Office is too slow, so Microsoft is making it load at Windows
              startup</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-01 @ 00:06:00</span
              ><span class="points-container"
                >Points: <span class="points">693</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43852162"
                  >Comments</a
                ><span class="descendants">: 860</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43850309">
          <h3>
            <a
              class="item"
              href="https://blog.headius.com/2025/04/beautiful-charts-with-jruby-and-jfreechart.html"
              >Creating beautiful charts with JRuby and JFreeChart</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-04-30 @ 20:30:01</span
              ><span class="points-container"
                >Points: <span class="points">18</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43850309"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43828099">
          <h3>
            <a class="item" href="https://dectalk.nu/">DECtalk Archive</a>
          </h3>
          <section>
            <h4>
              <span>2025-04-29 @ 02:09:48</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43828099"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
