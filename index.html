<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="43112036">
          <h3>
            <a class="item" href="https://plan9foundation.org/"
              >The Plan 9 Foundation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-20 @ 07:27:55</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43112036"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43111898">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/the-forecasting-company/jobs/yxUzVUm-founding-machine-learning-engineer"
              >The Forecasting Company (YC S24) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-20 @ 07:00:22</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43111889">
          <h3>
            <a
              class="item"
              href="https://www.politico.eu/article/jd-vance-britain-ai-safety-institute-aisi-security/"
              >Britain dances to JD Vance's tune as it renames AI institute</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-20 @ 06:58:49</span
              ><span class="points-container"
                >Points: <span class="points">14</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43111889"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43111474">
          <h3>
            <a
              class="item"
              href="https://techcrunch.com/2025/02/19/mistrals-le-chat-tops-1m-downloads-in-just-14-days/"
              >Mistral's Le Chat tops 1M downloads in just 14 days</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-20 @ 05:35:57</span
              ><span class="points-container"
                >Points: <span class="points">25</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43111474"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43110265">
          <h3>
            <a class="item" href="https://microsoft.github.io/Magma/"
              >Magma: A foundation model for multimodal AI agents</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-20 @ 02:11:25</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43110265"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43110173">
          <h3>
            <a class="item" href="https://github.com/vlm-run/vlmrun-hub"
              >Run structured extraction on documents/images locally with Ollama
              and Pydantic</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-20 @ 01:54:10</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43110173"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43109903">
          <h3>
            <a class="item" href="https://obscura.net/"
              >Obscura VPN â€“ Privacy that's more than a promise</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-20 @ 01:06:56</span
              ><span class="points-container"
                >Points: <span class="points">67</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43109903"
                  >Comments</a
                ><span class="descendants">: 15</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43109366">
          <h3>
            <a
              class="item"
              href="https://newatlas.com/environment/indoor-air-pollution-scented-terpenes/"
              >Scented products cause indoor air pollution on par with car
              exhaust</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 23:53:28</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43109366"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43109255">
          <h3>
            <a
              class="item"
              href="https://faculty.washington.edu/ajko/dissertations/Li2016Dissertation.pdf"
              >What Makes a Great Software Engineer (Dissertation) (2016)
              [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 23:40:03</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43109255"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43108614">
          <h3>
            <a
              class="item"
              href="https://blog.sylver.dev/build-your-own-sqlite-part-5-evaluating-queries"
              >Build your own SQLite in Rust, Part 5: Evaluating queries</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 22:32:18</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43108614"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43108157">
          <h3>
            <a
              class="item"
              href="https://civileats.com/2025/02/18/op-ed-egg-prices-are-soaring-bring-out-the-backyard-hens/"
              >Egg prices are soaring. Are backyard chickens the answer?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 21:46:02</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43108157"
                  >Comments</a
                ><span class="descendants">: 100</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43108091">
          <h3>
            <a
              class="item"
              href="https://www.tuhs.org/pipermail/tuhs/2025-February/031420.html"
              >1972 Unix V2 "Beta" Resurrected</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 21:41:07</span
              ><span class="points-container"
                >Points: <span class="points">281</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43108091"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43105028">
          <h3>
            <a class="item" href="https://jazco.dev/2025/02/19/imperfection/"
              >When imperfect systems are good: Bluesky's lossy timelines</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 17:48:08</span
              ><span class="points-container"
                >Points: <span class="points">560</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43105028"
                  >Comments</a
                ><span class="descendants">: 210</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43103604">
          <h3>
            <a
              class="item"
              href="https://peter.horne-khan.com/relaxed-radix-balanced-trees/"
              >Relaxed Radix Balanced Trees (2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 16:05:10</span
              ><span class="points-container"
                >Points: <span class="points">152</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43103604"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43103073">
          <h3>
            <a class="item" href="https://github.com/mastra-ai/mastra"
              >Show HN: Mastra â€“ Open-source JS agent framework, by the
              developers of Gatsby</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 15:25:08</span
              ><span class="points-container"
                >Points: <span class="points">357</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43103073"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
            <div class="text">
              <a href="https://mastra.ai">https://mastra.ai</a>), an open-source
              JavaScript SDK for building agents on top of Vercelâ€™s AI SDK.
              <p>
                You can start a Mastra project with `npm create mastra` and
                create workflow graphs that can suspend/resume, build a RAG
                pipeline and write evals, give agents memory, create multi-agent
                workflows, and view it all in a local playground.
              </p>
              <p>
                Previously, we built Gatsby, the open-source React web
                framework. Later, we worked on an AI-powered CRM but it felt
                like we were having to roll all the AI bits (agentic workflows,
                evals, RAG) ourselves. We also noticed our friends building AI
                applications suffering from long iteration cycles: they were
                getting stuck debugging prompts, figuring out why their agents
                called (or didnâ€™t call) tools, and writing lots of custom memory
                retrieval logic.
              </p>
              <p>
                At some point we just looked at each other and were like, why
                aren't we trying to make this part easier, and decided to work
                on Mastra.
              </p>
              <p>
                Demo video:
                <a href="https://www.youtube.com/watch?v=8o_Ejbcw5s8"
                  >https://www.youtube.com/watch?v=8o_Ejbcw5s8</a
                >
              </p>
              <p>
                One thing we heard from folks is that seeing input/output of
                every step, of every run of every workflow, is very useful. So
                we took XState and built a workflow graph primitive on top with
                OTel tracing. We wrote the APIs to make control flow explicit:
                `.step()` for branching, `.then()` for chaining, and `.after()`
                for merging. We also added .`.suspend()/.resume()` for
                human-in-the-loop.
              </p>
              <p>
                We abstracted the main RAG verbs like `.chunk()`, `embed()`,
                `.upsert(),â€™ `.query()`, and `rerank()` across document types
                and vector DBs. We shipped an eval runner with evals like
                completeness and relevance, plus the ability to write your own.
              </p>
              <p>
                Then we read the MemGPT paper and implemented agent memory on
                top of AI SDK with a `lastMessages` key, `topK` retrieval, and a
                `messageRange` for surrounding context (think `grep -C`).
              </p>
              <p>
                But we still werenâ€™t sure whether our agents were behaving as
                expected, so we built a local dev playground that lets you curl
                agents/workflows, chat with agents, view evals and traces across
                runs, and iterate on prompts with an assistant. The playground
                uses a local storage layer powered by libsql (thanks Turso
                team!) and runs on localhost with `npm run dev` (no Docker).
              </p>
              <p>
                Mastra agents originally ran inside a Next.js app. But we
                noticed that AI teamsâ€™ development was increasingly decoupled
                from the rest of their organization, so we built Mastra so that
                you can also run it as a standalone endpoint or service.
              </p>
              <p>
                Some things people have been building so far: one user automates
                support for an iOS app he owns with tens of thousands of paying
                users. Another bundled Mastra inside an Electron app that
                ingests aerospace PDFs and outputs CAD diagrams. Another is
                building WhatsApp bots that let you chat with objects like your
                house.
              </p>
              <p>
                We did (for now) adopt an Elastic v2 license. The agent space is
                pretty new, and we wanted to let users do whatever they want
                with Mastra but prevent, eg, AWS from grabbing it.
              </p>
              <p>
                If you want to get started: - On npm: npm create mastra@latest -
                Github repo:
                <a href="https://github.com/mastra-ai/mastra"
                  >https://github.com/mastra-ai/mastra</a
                >
                - Demo video:
                <a href="https://www.youtube.com/watch?v=8o_Ejbcw5s8"
                  >https://www.youtube.com/watch?v=8o_Ejbcw5s8</a
                >
                - Our website homepage:
                <a href="https://mastra.ai">https://mastra.ai</a> (includes some
                nice diagrams and code samples on agents, RAG, and links to
                examples) - And our docs:
                <a href="https://mastra.ai/docs">https://mastra.ai/docs</a>
              </p>
              <p>
                Excited to share Mastra with everyone here â€“ let us know what
                you think!
              </p>
            </div>
          </section>
        </section>
        <section id="43102528">
          <h3>
            <a
              class="item"
              href="https://research.google/blog/accelerating-scientific-breakthroughs-with-an-ai-co-scientist/"
              >Accelerating scientific breakthroughs with an AI co-scientist</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 14:32:54</span
              ><span class="points-container"
                >Points: <span class="points">327</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43102528"
                  >Comments</a
                ><span class="descendants">: 171</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43102284">
          <h3>
            <a
              class="item"
              href="https://cloud.google.com/blog/topics/threat-intelligence/russia-targeting-signal-messenger"
              >Multiple Russia-aligned threat actors actively targeting Signal
              Messenger</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 14:05:23</span
              ><span class="points-container"
                >Points: <span class="points">689</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43102284"
                  >Comments</a
                ><span class="descendants">: 251</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43101430">
          <h3>
            <a
              class="item"
              href="https://www.ubicloud.com/blog/debugging-hetzner-uncovering-failures-with-powerstat-sensors-and-dmidecode"
              >Debugging Hetzner: Uncovering failures with powerstat, sensors,
              and dmidecode</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 12:40:58</span
              ><span class="points-container"
                >Points: <span class="points">310</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43101430"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43101383">
          <h3>
            <a
              class="item"
              href="https://www.scientificamerican.com/article/broken-legs-and-ankles-heal-better-if-you-walk-on-them-within-weeks/"
              >Broken legs and ankles heal better if you walk on them within
              weeks</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-19 @ 12:36:06</span
              ><span class="points-container"
                >Points: <span class="points">457</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43101383"
                  >Comments</a
                ><span class="descendants">: 255</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43096477">
          <h3>
            <a class="item" href="https://github.com/subtrace/subtrace"
              >Show HN: Subtrace â€“ Wireshark for Docker Containers</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 23:29:17</span
              ><span class="points-container"
                >Points: <span class="points">256</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43096477"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
            <div class="text">
              <a href="https://subtrace.dev">https://subtrace.dev</a>) to let
              you see all incoming and outgoing requests in your backend
              serverâ€”like Wireshark, but for Docker containers. It comes with a
              Chrome DevTools-like interface. Check out this video:
              <a href="https://www.youtube.com/watch?v=OsGa6ZwVxdA"
                >https://www.youtube.com/watch?v=OsGa6ZwVxdA</a
              >, and see our docs for examples:
              <a href="https://docs.subtrace.dev">https://docs.subtrace.dev</a>.
              <p>
                Subtrace lets you see every request with full payload, headers,
                status code, and latency details. Tools like Sentry and
                OpenTelemetry often leave out these crucial details, making prod
                debugging slow and annoying. Most of the time, all I want to see
                are the headers and JSON payload of real backend requests, but
                it's impossible to do that in today's tools without excessive
                logging, which just makes everything slower and more annoying.
              </p>
              <p>
                Subtrace shows you every backend request flowing through your
                system. You can use simple filters to search for the requests
                you care about and inspect their details.
              </p>
              <p>
                Internally, Subtrace intercepts all network-related Linux
                syscalls using Seccomp BPF so that it can act as a proxy for all
                incoming and outgoing TCP connections. It then parses HTTP
                requests out of the proxied TCP stream and sends them to the
                browser over WebSocket. The Chrome DevTools Network tab is
                already ubiquitous for viewing HTTP requests in the frontend, so
                we repurposed it to work in the browser like any other app (we
                were surprised that it's just a bunch of TypeScript).
              </p>
              <p>
                Setup is just one command for any Linux program written in any
                language.
              </p>
              <p>
                You can use Subtrace by adding a `subtrace run` prefix to your
                backend server startup command. No signup required. Try for
                yourself:
                <a href="https://docs.subtrace.dev"
                  >https://docs.subtrace.dev</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="43089238">
          <h3>
            <a class="item" href="https://httl.dev/docs/cli"
              >Show HN: A Fast HTTP Request CLI Powered by HTTL</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 13:31:49</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43089238"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43088124">
          <h3>
            <a
              class="item"
              href="https://experience.prfalken.dev/english/subway-poker/"
              >A secret poker game you can play on the subway</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-18 @ 10:37:55</span
              ><span class="points-container"
                >Points: <span class="points">232</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43088124"
                  >Comments</a
                ><span class="descendants">: 85</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43083429">
          <h3>
            <a
              class="item"
              href="https://fosdem.org/2025/schedule/event/fosdem-2025-4902-f8-an-8-bit-architecture-designed-for-c-and-memory-efficiency/"
              >F8 â€“ an 8 bit architecture designed for C and memory efficiency
              [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 21:24:17</span
              ><span class="points-container"
                >Points: <span class="points">20</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43083429"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43082649">
          <h3>
            <a
              class="item"
              href="https://carimbo.run/play/1.0.43/willtobyte/MOS6502/1.0.3/480p/"
              >Show HN: MOS6502 in pure Lua running in WebAssembly</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 19:47:26</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43082649"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43076088">
          <h3>
            <a
              class="item"
              href="https://blog.reverberate.org/2025/02/10/tail-call-updates.html"
              >A tail calling interpreter for Python (already landed in
              CPython)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-17 @ 07:12:38</span
              ><span class="points-container"
                >Points: <span class="points">74</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43076088"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43070558">
          <h3>
            <a
              class="item"
              href="https://bumbershootsoft.wordpress.com/2025/02/15/the-8-bit-eras-weird-uncle-the-ti-99-4a/"
              >The 8-Bit Era's Weird Uncle: The TI-99/4A</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-16 @ 18:56:34</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43070558"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43067230">
          <h3>
            <a class="item" href="https://humanaigc.github.io/animate-anyone-2/"
              >Animate Anyone 2: High-Fidelity Character Image Animation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-16 @ 11:20:42</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43067230"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43066328">
          <h3>
            <a
              class="item"
              href="https://www.scattered-thoughts.net/writing/speed-matters/"
              >Speed matters (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-16 @ 08:20:25</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43066328"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43066047">
          <h3>
            <a
              class="item"
              href="https://kyunghyuncho.me/softmax-forever-or-why-i-like-softmax/"
              >Softmax forever, or why I like softmax</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-16 @ 07:08:51</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43066047"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="43063140">
          <h3>
            <a class="item" href="https://github.com/yolhan83/BloodFlowTrixi.jl"
              >Bloodflowtrixi.jl â€“ 1D and 2D blood flow models for arterial
              circulation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-02-15 @ 22:36:17</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=43063140"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
