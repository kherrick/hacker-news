<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="44078813">
          <h3>
            <a
              class="item"
              href="https://thewalrus.ca/how-to-make-a-living-as-a-writer/"
              >How to Make a Living as a Writer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-24 @ 04:36:31</span
              ><span class="points-container"
                >Points: <span class="points">13</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44078813"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44078434">
          <h3>
            <a class="item" href="https://antelang.org/blog/why_effects/"
              >Why Algebraic Effects?</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-24 @ 03:00:53</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44078434"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44078314">
          <h3>
            <a class="item" href="https://www.sweepiq.com"
              >Show HN: SweepIQ – A simple AI tool to help you learn more,
              faster</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-24 @ 02:30:08</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44078314"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44078100">
          <h3>
            <a class="item" href="https://davia.ai/"
              >Show HN: Web Apps for Python Devs with Auto-Generated UI</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-24 @ 01:26:23</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44078100"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re Afnan, Theo and Ruben. We’re all ML engineers or data
                scientists, and we kept running into the same thing: we’d write
                useful Python functions, either for ourselves or internal tools,
                and then hit a wall when we wanted to share them as actual apps.
              </p>
              <p>
                We tried Streamlit and Gradio. They’re great to get something up
                quickly. But as soon as we needed more flexibility or something
                more polished, there wasn’t really a path forward. Rebuilding
                the frontend properly in React isn’t where we bring the most
                value.
              </p>
              <p>
                So we started building Davia. You keep your code in Python,
                decorate the functions you want to expose, and Davia starts a
                FastAPI server on your localhost. It opens a window connected to
                your localhost where you describe the interface with a prompt.
                It then builds the interface, and you can deploy everything in
                one step. Think of it as Lovable, but for Python developers.
              </p>
              <p>
                It works especially well for building AI tools. We built it to
                integrate tightly with LangGraph, so if you’re writing agents or
                workflows, you can turn them into real apps without leaving
                Python.
              </p>
              <p>
                Docs and examples here:
                <a href="https://docs.davia.ai">https://docs.davia.ai</a>
                GitHub:
                <a href="https://github.com/davia-ai/davia"
                  >https://github.com/davia-ai/davia</a
                >
              </p>
              <p>
                We’re still in early stages and would love feedback from others
                building internal tools or AI apps in Python.
              </p>
            </div>
          </section>
        </section>
        <section id="44078024">
          <h3>
            <a class="item" href="https://github.com/imdj/HNRelevant"
              >Show HN: HNRelevant – Add a "related" section to Hacker News</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-24 @ 01:07:08</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44078024"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
            <div class="text">
              <a href="https://news.ycombinator.com/item?id=36102610"
                >https://news.ycombinator.com/item?id=36102610</a
              >). The initial version was a very basic prototype which was not
              available anywhere beyond the GitHub repo. You had to install it
              as a userscript or load the extension manually.
              <p>
                Since then, it remained simple but better, new features include:
              </p>
              <p>
                - Improved accuracy by also using comments to help gauge the
                topic of discussion and the right keywords.
              </p>
              <p>
                - Published as plugin for more browsers: Chrome, Firefox
                (including android), and more recently Microsoft Edge.
              </p>
              <p>- Support for narrow screens and mobile devices.</p>
              <p>- Added preference controls.</p>
              <p>
                You're here because you love interesting HN discussions but
                they're often buried away like hidden gems, so give it a try and
                let me know what you think.
              </p>
            </div>
          </section>
        </section>
        <section id="44077850">
          <h3>
            <a
              class="item"
              href="https://www.societyforscience.org/regeneron-sts/2025-student-finalists/chloe-lee/"
              >Modification of acetaminophen to reduce liver toxicity and
              enhance drug efficacy</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-24 @ 00:29:28</span
              ><span class="points-container"
                >Points: <span class="points">142</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44077850"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44077533">
          <h3>
            <a
              class="item"
              href="https://josephthacker.com/personal/2025/05/13/root-for-your-friends.html"
              >Root for your friends</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 23:28:11</span
              ><span class="points-container"
                >Points: <span class="points">130</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44077533"
                  >Comments</a
                ><span class="descendants">: 32</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44076501">
          <h3>
            <a
              class="item"
              href="https://strangecomforts.com/the-strange-world-of-japans-pc-98-computer/"
              >The world of Japan's PC-98 computer</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 20:51:29</span
              ><span class="points-container"
                >Points: <span class="points">80</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44076501"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44076449">
          <h3>
            <a class="item" href="https://contextch.at"
              >Show HN: I built a more productive way to manage AI chats</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 20:46:04</span
              ><span class="points-container"
                >Points: <span class="points">87</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44076449"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44076300">
          <h3>
            <a class="item" href="https://undo.io/"
              >UndoDB – The interactive time travel debugger for Linux C/C++ for
              debugging</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 20:22:09</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44076300"
                  >Comments</a
                ><span class="descendants">: 25</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44076170">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2505.16963"
              >A Formal Proof of Complexity Bounds on Diophantine Equations</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 20:09:01</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44076170"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44075911">
          <h3>
            <a
              class="item"
              href="https://attentionmech.github.io/genetic-boids/"
              >Show HN: Genetic Boids Web Simulation</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 19:40:03</span
              ><span class="points-container"
                >Points: <span class="points">115</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075911"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44075451">
          <h3>
            <a class="item" href="https://doublememory.com"
              >Show HN: DoubleMemory – more efficient local-first read-it-later
              app</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:55:28</span
              ><span class="points-container"
                >Points: <span class="points">107</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075451"
                  >Comments</a
                ><span class="descendants">: 31</span></span
              >
            </h4>
            <div class="text">
              <p>
                My motivation was not to create a read-it-later app, yet it
                evolved into this unique yet cohesive form of a read-it-later +
                bookmarking organizer + clipboard manager + card based
                note-taking app over the last 6 months. It also launches from
                the menu bar with a shortcut and navigates with keyboard
                shortcuts. My favorite part is instead of rendering a list of
                article titles, everything is rendered as pretty preview cards
                in a translucent Pinterest-like mood board. It also has a nifty
                iOS app, that will allow you to swipe with your thumbs between
                articles just like on iOS Safari...
              </p>
              <p>
                Now that Pocket is closing, this is after Instapaper going back
                to indie and Omnivore and UpNext and numerous others closing
                over the years. All of these are cloud-hosted services, which
                got me reflecting: maybe this local-first architecture would be
                well positioned to build in this space.
              </p>
              <p>Here is my not-so-scientific comparison:</p>
              <p>## Domain</p>
              <p>$10 vs $1M = 100,000x difference.</p>
              <p>## Server running cost</p>
              <p>
                No servers other than what's running by iCloud vs $1M per year =
                1mX difference
              </p>
              <p>## Platforms</p>
              <p>
                Apple only (mac + iphone + ipad) vs Multi platforms (windows,
                linux, android also supported) = 20X maintenance cost difference
              </p>
              <p>## Capturing</p>
              <p>
                No browser extensions required v.s. maintain all extensions for
                various browsers and extension stores = 5x difference
              </p>
              <p>## Architecture</p>
              <p>
                App receives the link, Apple generates the rich preview cards
                for thousands of different types of links, app caches these
                preview cards. vs. Someone write some custom code for each link
                type or with Open Graph, one designer created one generic card
                that works for all links. = 100x cost difference.
              </p>
              <p>
                I know, Apple is coming for clipboards with more restrictions,
                which is basically a shared global state on Mac systems,
                DoubleMemory does also support other ways to capture:
                drag-n-drop to app/menubar icon/app icon, right
                click-&gt;Services menu, or Share sheet. We will add more
                auto-importers.
              </p>
              <p>
                Also vibe coded some importers for Pocket, Omnivore and ReadWise
                here:
                <a href="https://doublememory.com/posts/tools"
                  >https://doublememory.com/posts/tools</a
                >
              </p>
              <p>
                Everything in the app is free with no limits. Capturing is
                really step 0. You giving us a chance to save your content,
                doesn't mean you are getting any values out of it (ain't that
                the typical story of read-it-later apps? save-it and
                never-read-it). the eventual goal is to easily retrieve these
                content, and eventually consuming them. I hope to eventually
                launch paid features that aligns with these value generating
                workflows.
              </p>
              <p>
                App Store link:
                <a
                  href="https://apps.apple.com/us/app/doublememory/id6737529034"
                  >https://apps.apple.com/us/app/doublememory/id6737529034</a
                >
              </p>
              <p>Let me know what you think...</p>
            </div>
          </section>
        </section>
        <section id="44075254">
          <h3>
            <a
              class="item"
              href="https://www.pencilofrays.com/lens-design-forms/"
              >Types of optical systems in a lens designer's toolbox (2020)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 18:33:07</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44075254"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074668">
          <h3>
            <a
              class="item"
              href="https://www.cip.org/blog/llm-judges-are-unreliable"
              >Positional preferences, order effects, prompt sensitivity
              undermine AI judgments</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 17:20:40</span
              ><span class="points-container"
                >Points: <span class="points">116</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074668"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074340">
          <h3>
            <a
              class="item"
              href="https://shagbark.substack.com/p/how-to-live-on-432-a-month-in-america"
              >How to live on $432 a month in America</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 16:40:55</span
              ><span class="points-container"
                >Points: <span class="points">247</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074340"
                  >Comments</a
                ><span class="descendants">: 397</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074111">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2505.13775"
              >Beyond Semantics: Unreasonable Effectiveness of Reasonless
              Intermediate Tokens</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 16:13:43</span
              ><span class="points-container"
                >Points: <span class="points">109</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074111"
                  >Comments</a
                ><span class="descendants">: 55</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44074017">
          <h3>
            <a
              class="item"
              href="https://foundersatwork.posthaven.com/find-your-people"
              >Find Your People</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 16:02:02</span
              ><span class="points-container"
                >Points: <span class="points">458</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44074017"
                  >Comments</a
                ><span class="descendants">: 186</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44073867">
          <h3>
            <a
              class="item"
              href="https://www.abc.net.au/news/science/2025-05-20/metre-treaty-anniversary-metric-system-measurement-metrology/105302024"
              >The metre originated in the French Revolution</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 15:43:16</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44073867"
                  >Comments</a
                ><span class="descendants">: 140</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44073588">
          <h3>
            <a
              class="item"
              href="https://techcommunity.microsoft.com/blog/adforpostgresql/announcing-a-new-ide-for-postgresql-in-vs-code-from-microsoft/4414648"
              >Postgres IDE in VS Code</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 15:12:44</span
              ><span class="points-container"
                >Points: <span class="points">760</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44073588"
                  >Comments</a
                ><span class="descendants">: 304</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44073185">
          <h3>
            <a
              class="item"
              href="https://charliesabino.com/caesars-last-breath/"
              >Caesar's Last Breath</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 14:22:53</span
              ><span class="points-container"
                >Points: <span class="points">136</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44073185"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44073181">
          <h3>
            <a
              class="item"
              href="https://peterfrankopan.substack.com/p/a-bead-too-far-rethinking-global"
              >A Bead Too Far: Rethinking Global Connections Before Columbus</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 14:22:48</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44073181"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44071690">
          <h3>
            <a class="item" href="https://rachelbythebay.com/w/2025/05/22/ssl/"
              >Why I no longer have an old-school cert on my HTTPS site</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 10:56:12</span
              ><span class="points-container"
                >Points: <span class="points">264</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44071690"
                  >Comments</a
                ><span class="descendants">: 259</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44070812">
          <h3>
            <a class="item" href="https://getstack.dev"
              >Show HN: GetStack.dev – Track GitHub open-source trends</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-23 @ 07:50:54</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44070812"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
            <div class="text">
              <p>
                I’ve been working on getstack.dev[1], a tool to help developers
                track GitHub open-source trends, tech adoption, and repository
                stacks — updated weekly.
              </p>
              <p>
                About a month ago, I broke my leg. While stuck on the couch, I
                figured I’d put the downtime to good use and finally build a
                side project I’d been thinking about for a while. So I put
                together an MVP and decided to release it publicly to gather
                feedback.
              </p>
              <p>
                I have always struggle to grasp how people are adopting
                technology and what's really hype or under the radar. As tech
                leader you also often want to know if your tech choices are the
                right one but it's hard to take a data driven solution. And as
                open-source lover I always want to know how my favorite projects
                are built.
              </p>
              <p>
                All the data is pulled and refreshed weekly from GitHub, stored
                on ClickHouse [2] but you can directly check how I built it in
                the website [3]
              </p>
              <p>[1] <a href="https://getstack.dev">https://getstack.dev</a></p>
              <p>
                [2]
                <a href="https://getstack.dev/tech/clickhouse"
                  >https://getstack.dev/tech/clickhouse</a
                >
              </p>
              <p>
                [3]
                <a href="https://getstack.dev/specfy/getstack"
                  >https://getstack.dev/specfy/getstack</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="44061028">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=44061028"
              >Show HN: Embedo – Word Equation Puzzle Game</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-22 @ 11:39:12</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44061028"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
            <div class="text">
              <p>Today's puzzle: pasta + noodle − lasagna = ?</p>
              <p>I built this for fun. Enjoy!</p>
              <p>
                <a href="https://plan9.kr/embedo/">https://plan9.kr/embedo/</a>
              </p>
            </div>
          </section>
        </section>
        <section id="44056097">
          <h3>
            <a class="item" href="https://github.com/r-follador/delta-relief"
              >Show HN: High-resolution surface analysis with Lidar data</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 20:40:02</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44056097"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44051646">
          <h3>
            <a
              class="item"
              href="https://news.mit.edu/2025/allium-engineering-enables-100-year-bridges-corrosion-resistant-steel-0520"
              >Startup enables 100-year bridges with corrosion-resistant
              steel</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 14:10:47</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44051646"
                  >Comments</a
                ><span class="descendants">: 40</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44049619">
          <h3>
            <a class="item" href="https://github.com/mermaid-js/mermaid"
              >Mermaid: Generation of diagrams like flowcharts or sequence
              diagrams from text</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-21 @ 09:06:46</span
              ><span class="points-container"
                >Points: <span class="points">112</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44049619"
                  >Comments</a
                ><span class="descendants">: 48</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44039604">
          <h3>
            <a
              class="item"
              href="https://code.visualstudio.com/blogs/2018/03/23/text-buffer-reimplementation"
              >Visual Studio Code: Text Buffer Reimplementation (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-20 @ 09:34:15</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44039604"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="44038172">
          <h3>
            <a
              class="item"
              href="https://books.substack.com/p/diary-j-m-coetzee-1-mother-tongue"
              >Diary: J. M. Coetzee, (1) Mother Tongue</a
            >
          </h3>
          <section>
            <h4>
              <span>2025-05-20 @ 05:48:15</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=44038172"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2025/index.md"
              >2025</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
