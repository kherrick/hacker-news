<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="42122690">
          <h3>
            <a
              class="item"
              href="https://blog.tealok.tech/post/docker-compose-isnt-enough/"
              >Why Docker Compose Falls Short as Self-Hosting Scales</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-13 @ 03:42:43</span
              ><span class="points-container"
                >Points: <span class="points">36</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42122690"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42122642">
          <h3>
            <a
              class="item"
              href="https://github.com/rodneyknaap/atx-286at-v1-mainboard"
              >80286 ATX mainboard based on the IBM 5170 AT PC</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-13 @ 03:34:57</span
              ><span class="points-container"
                >Points: <span class="points">16</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42122642"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42122434">
          <h3>
            <a
              class="item"
              href="https://www.micron.com/products/storage/ssd/data-center-ssd/6550-ion"
              >Micron launches 60TB PCIe gen5 SSD with 12GB/s read speeds</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-13 @ 02:53:13</span
              ><span class="points-container"
                >Points: <span class="points">58</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42122434"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42122258">
          <h3>
            <a
              class="item"
              href="https://tylercipriani.com/blog/2024/10/24/plain-text-accounting/"
              >Eventually consistent plain text accounting</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-13 @ 02:17:27</span
              ><span class="points-container"
                >Points: <span class="points">10</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42122258"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42121924">
          <h3>
            <a
              class="item"
              href="https://posthog.com/newsletter/how-to-give-feedback"
              >Why you're bad at giving feedback</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-13 @ 01:16:15</span
              ><span class="points-container"
                >Points: <span class="points">33</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42121924"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42121548">
          <h3>
            <a
              class="item"
              href="https://discuss.privacyguides.net/t/manjaro-is-experimenting-with-opt-out-telemetry/22305"
              >Manjaro is experimenting with **opt-out telemetry</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-13 @ 00:23:29</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42121548"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42120385">
          <h3>
            <a
              class="item"
              href="https://skatterbencher.com/2024/11/11/3600-mhz-raspberry-pi-5-with-liquid-nitrogen/"
              >3600 MHz Raspberry Pi 5 with Liquid Nitrogen</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 22:18:43</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42120385"
                  >Comments</a
                ><span class="descendants">: 33</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42120313">
          <h3>
            <a
              class="item"
              href="https://heather-buchel.com/blog/2024/11/carving-space/"
              >Carving your space</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 22:08:34</span
              ><span class="points-container"
                >Points: <span class="points">26</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42120313"
                  >Comments</a
                ><span class="descendants">: 6</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42120311">
          <h3>
            <a
              class="item"
              href="https://www.jeffgeerling.com/blog/2024/m4-mac-minis-efficiency-incredible"
              >M4 Mac mini's efficiency</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 22:08:17</span
              ><span class="points-container"
                >Points: <span class="points">404</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42120311"
                  >Comments</a
                ><span class="descendants">: 396</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42120090">
          <h3>
            <a
              class="item"
              href="https://buttondown.com/hillelwayne/archive/five-unusual-raku-features/"
              >Unusual Raku Features</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 21:48:05</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42120090"
                  >Comments</a
                ><span class="descendants">: 51</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42119674">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=42119674"
              >Nowadays (YC S23) Is Hiring</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 21:00:40</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                We’re looking for founding engineer at Nowadays — someone who’s
                proactive, generalist full-stack, loves bringing people
                together, and comfortable shipping end-to-end products. We use
                Next.js and Supabase to build our platform. Your role will
                involve continuously innovating, automating processes, and
                pushing the boundaries of what’s possible with AI in event
                planning.
              </p>
              <p>
                Learn more at Nowadays here:
                <a href="https://nowadays.ai/">https://nowadays.ai/</a>
              </p>
            </div>
          </section>
        </section>
        <section id="42119141">
          <h3>
            <a
              class="item"
              href="https://github.com/cdb-boop/Space-Quest-V-Voice-Acting-Mod"
              >Voice acting in Space Quest V</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 20:07:32</span
              ><span class="points-container"
                >Points: <span class="points">89</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42119141"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42119042">
          <h3>
            <a class="item" href="https://letsjelly.com/"
              >Show HN: Jelly – A simpler shared inbox for small teams</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 19:55:45</span
              ><span class="points-container"
                >Points: <span class="points">222</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42119042"
                  >Comments</a
                ><span class="descendants">: 90</span></span
              >
            </h4>
            <div class="text">
              <p>
                I wanted to share something we at Good Enough (<a
                  href="https://goodenough.us"
                  >https://goodenough.us</a
                >) built over the past year:
              </p>
              <p>
                Jelly! <a href="https://letsjelly.com">https://letsjelly.com</a>
              </p>
              <p>
                Jelly is a simpler shared inbox for small teams (like us) to
                answer team email. We had just been sharing a login to Fastmail
                previously, but as email started getting busier, that really
                started to stink as a solution — no one knew who was going to
                answer what, if someone else saw an email or not, etc etc. And a
                Google Group would prove to be worse, as replies too easily got
                lost to personal inboxes if someone accidentally didn’t “Reply
                All”. It wasn’t great!
              </p>
              <p>
                We went looking for a tool to solve these problems, but
                everything we found was way too much software, and really quite
                expensive charging per seat. We didn’t need a complex ticketing
                system. We just needed email, as a team, in a simple and sane
                way.
              </p>
              <p>
                So we built Jelly! And we’re not charging per seat, so you can
                bring your whole team for a very affordable price. (As a quick
                comparison for our team of six: Jelly’s lowest tier costs just
                $29/month while Zendesk’s costs upwards of $330/month.)
              </p>
              <p>
                We would love to hear thoughts from anyone on a small team that
                needs to handle shared email. Also, if you know of other teams
                in that same position, we’d appreciate you letting them know
                about Jelly. Thank you!
              </p>
            </div>
          </section>
        </section>
        <section id="42118496">
          <h3>
            <a
              class="item"
              href="https://www.fermyon.com/blog/introducing-spin-v3"
              >Spin 3.0 – open-source tooling for building and running WASM
              apps</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 19:00:55</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42118496"
                  >Comments</a
                ><span class="descendants">: 28</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42118399">
          <h3>
            <a
              class="item"
              href="https://lagrangepoint.substack.com/p/airpods-hearing-aid-hacking"
              >Bypassing regulatory locks, hacking AirPods and Faraday cages</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 18:50:45</span
              ><span class="points-container"
                >Points: <span class="points">317</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42118399"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42118286">
          <h3>
            <a
              class="item"
              href="https://community-scripts.github.io/ProxmoxVE/"
              >Show HN: Proxmox VE Helper Scripts: Make managing your Proxmox
              homelab a breeze</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 18:37:17</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42118286"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42118039">
          <h3>
            <a class="item" href="https://stretchmytimeoff.com"
              >Show HN: Stretch My Time Off – An Algorithm to Optimize Your
              Vacation Days</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 18:11:49</span
              ><span class="points-container"
                >Points: <span class="points">102</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42118039"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              <p>
                What it does: The site helps you get the most out of your
                vacation by suggesting optimal days to take off around national
                holidays, maximizing long breaks with minimal vacation days,
                anywhere in the world and for any calendar year.
              </p>
              <p>
                It's an idea I've had for a while, and building the algorithm
                with GPT was a fun challenge. Any feedback or ideas I'm all ears
                :)
              </p>
            </div>
          </section>
        </section>
        <section id="42117970">
          <h3>
            <a class="item" href="https://github.com/hyperdxio/hyperdx/tree/v2"
              >Show HN: Open-source Kibana alternative for logs and traces in
              ClickHouse</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 18:04:19</span
              ><span class="points-container"
                >Points: <span class="points">78</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42117970"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
            <div class="text">
              <p>
                Over the past year we've seen a ton of excitement in companies
                adopting Clickhouse-based observability stacks - but one of the
                biggest challenges we've seen is that the UI layer on top of
                Clickhouse is either clunky to use for observability use cases
                (ex. BI tools), or too tied to a specific ingestion architecture
                to scale to every use case (we used to be in this category!).
                For companies that needed more flexibility in how their data is
                ingested and stored (usually due to running at a large scale),
                there's really no good options for a developer experience (DX)
                focused observability layer on top of Clickhouse (Shopify spent
                3 years building it in-house!)
              </p>
              <p>
                Our current release works completely in the browser - and it
                does this by building on top of Clickhouse's HTTP interface,
                which our React app can directly talk to. This means you can
                actually try HyperDX in your browser on your own Clickhouse with
                no installation! This was fortunately easy for us to accomplish
                due to being full stack Typescript, making it incredibly easy to
                shift between server and client code. On top of this we've been
                spending time baking in performance optimizations to ensure that
                HyperDX can continue to leverage Clickhouse efficiently at
                larger data volumes. We do a few tricks like only fetching
                columns that are needed for the current search, and re-querying
                to expand the entire row if needed to fully leverage
                Clickhouse's columnar nature (40% faster, ymmv!) - or rewriting
                queries to use materialized columns to speed up Map column
                access when available (10x faster!).
              </p>
              <p>
                On the DX side: we support querying using both Lucene (ex.
                `fullText property:value`) and SQL syntax. We've found the
                former to be our favorite for how concise it is. Similarly for
                charts, our chart builder has been upgraded to accept SQL
                expressions as well, so you can leverage the full power of SQL,
                while avoiding typing paragraphs of boilerplate SQL for time
                series data. We also make it easy to switch between UTC/local
                timestamps! Lastly, we've added high cardinality outlier
                analysis by charting the delta between outlier and inlier events
                (a la bubble up) - which we've found really helpful in narrowing
                down causes of regressions/anomalies in our traces.
              </p>
              <p>
                We have a lot more planned for the full release - but wanted to
                get this out early to hear your feedback and opinions!
              </p>
              <p>
                In Browser Live Demo:
                <a href="https://play.hyperdx.io/search"
                  >https://play.hyperdx.io/search</a
                >
              </p>
              <p>
                Github Repo:
                <a href="https://github.com/hyperdxio/hyperdx/tree/v2"
                  >https://github.com/hyperdxio/hyperdx/tree/v2</a
                >
              </p>
              <p>
                Landing Page:
                <a href="https://hyperdx.io/v2">https://hyperdx.io/v2</a>
              </p>
              <p>
                [1]:
                <a href="https://www.uber.com/blog/logging/"
                  >https://www.uber.com/blog/logging/</a
                >
                [2]:
                <a
                  href="https://blog.cloudflare.com/log-analytics-using-clickhouse/"
                  >https://blog.cloudflare.com/log-analytics-using-clickhouse/</a
                >
                [3]:
                <a
                  href="https://www.youtube.com/watch?v=LDj3_jMsCXg&amp;list=PLvQF73bM4-5X9mt0lweCXL_v8xdvrLEvB"
                  >https://www.youtube.com/watch?v=LDj3_jMsCXg&amp;list=PLvQF73bM4-...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="42115310">
          <h3>
            <a
              class="item"
              href="https://aidantr.github.io/files/AI_innovation.pdf"
              >Artificial Intelligence, Scientific Discovery, and Product
              Innovation [pdf]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 13:29:30</span
              ><span class="points-container"
                >Points: <span class="points">120</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42115310"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42115072">
          <h3>
            <a
              class="item"
              href="https://hunsley.io/posts/2024/image-montage-is-resistor-network/"
              >Ohmaps: your image montage is a resistor network</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 12:44:03</span
              ><span class="points-container"
                >Points: <span class="points">54</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42115072"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42114990">
          <h3>
            <a
              class="item"
              href="https://www.wired.com/story/ecosia-qwant-eusp-take-on-google-search-index/"
              >Two upstart search engines are teaming up to take on Google</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 12:27:52</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42114990"
                  >Comments</a
                ><span class="descendants">: 127</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42111896">
          <h3>
            <a
              class="item"
              href="https://challahscript.com/what_i_wish_someone_told_me_about_postgres"
              >What I wish someone told me about Postgres</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 00:59:44</span
              ><span class="points-container"
                >Points: <span class="points">365</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42111896"
                  >Comments</a
                ><span class="descendants">: 155</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42111892">
          <h3>
            <a
              class="item"
              href="https://gitlab.brokenpipe.de/stettberger/avremu/tree/master"
              >Avremu: An 8-Bit AVR Microcontroller Simulator Written in
              LaTeX</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-12 @ 00:58:54</span
              ><span class="points-container"
                >Points: <span class="points">83</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42111892"
                  >Comments</a
                ><span class="descendants">: 16</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42110588">
          <h3>
            <a
              class="item"
              href="https://nathangoldwag.wordpress.com/2024/10/26/visualizing-the-past-world-war-ii/"
              >Visualizing World War II</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-11 @ 21:28:28</span
              ><span class="points-container"
                >Points: <span class="points">375</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42110588"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42093551">
          <h3>
            <a
              class="item"
              href="https://brooksblog.bearblog.dev/rusts-sneaky-deadlock-with-if-let-blocks/"
              >Rust's Sneaky Deadlock With `if let` Blocks</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-09 @ 10:02:52</span
              ><span class="points-container"
                >Points: <span class="points">73</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42093551"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42092453">
          <h3>
            <a
              class="item"
              href="https://allthatsinteresting.com/glyptodon-fossils"
              >Argentinian Farmer Finds Family of 20k-Year-Old Car-Sized
              Armadillos</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-09 @ 04:01:29</span
              ><span class="points-container"
                >Points: <span class="points">55</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42092453"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42087100">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/world/2024/nov/08/coffee-sandwiches-underwear-beer-day-in-the-life-japan-konbini-stores"
              >Coffee, sandwiches, underwear, beer: a day in the life of Japan's
              konbini</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-08 @ 14:30:44</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42087100"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42085053">
          <h3>
            <a
              class="item"
              href="https://weiyen.net/articles/an-unusual-google-keyboard-bug"
              >An unusual Google Keyboard bug</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-08 @ 07:47:07</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42085053"
                  >Comments</a
                ><span class="descendants">: 13</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42077886">
          <h3>
            <a
              class="item"
              href="https://www.disruptingjapan.com/the-forgotten-mistake-that-killed-japans-software-industry/"
              >A mistake that killed Japan's software industry? (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-07 @ 16:08:15</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42077886"
                  >Comments</a
                ><span class="descendants">: 130</span></span
              >
            </h4>
          </section>
        </section>
        <section id="42075535">
          <h3>
            <a
              class="item"
              href="https://www.hitsubscribe.com/how-to-delegate-effectively-as-your-responsibility-grows/"
              >How to delegate effectively as your responsibility grows</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-11-07 @ 10:51:48</span
              ><span class="points-container"
                >Points: <span class="points">31</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=42075535"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
