<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39433451">
          <h3>
            <a
              class="item"
              href="https://housefresh.com/david-vs-digital-goliaths/"
              >How Google is killing independent sites like ours</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 19:09:19</span
              ><span class="points-container"
                >Points: <span class="points">163</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39433451"
                  >Comments</a
                ><span class="descendants">: 57</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39433120">
          <h3>
            <a class="item" href="https://triword.net"
              >Show HN: I made a simple daily word puzzle</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 18:36:14</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39433120"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39432883">
          <h3>
            <a
              class="item"
              href="https://nymag.com/intelligencer/article/adderall-shortage-adhd-medication-ascent-pharmaceuticals.html"
              >The Empty Adderall Factory</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 18:14:39</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39432883"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39432876">
          <h3>
            <a class="item" href="https://jeffhuang.com/productivity_text_file/"
              >My productivity app is a never-ending .txt file</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 18:14:12</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39432876"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39432349">
          <h3>
            <a
              class="item"
              href="https://www.reuters.com/technology/eu-opens-formal-proceedings-against-tiktok-under-digital-services-act-2024-02-19/"
              >EU opens formal investigation into TikTok over possible online
              content breaches</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 17:31:54</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39432349"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39432085">
          <h3>
            <a
              class="item"
              href="https://adoptingerlang.org/docs/development/otp_high_level/"
              >OTP at a High Level (2019)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 17:06:58</span
              ><span class="points-container"
                >Points: <span class="points">88</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39432085"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39432015">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39432015"
              >About Y Combinator's software team (which is currently hiring)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 17:00:28</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
            <div class="text">
              <p>
                But I thought that rather than write a regular job post about
                them (boring!), it would be more fun to write about the history
                of the YC software team and what we've been up to. YC is a
                somewhat unusual place to work, and I wanted to give you a
                flavor of what it might be like.
              </p>
              <p>
                First off, a lot of people don't know that YC even has a
                software team, and for most of YC's history, we didn't. The
                first software YC wrote was Hacker News, and Paul Graham built
                and ran HN all by himself for many years.
              </p>
              <p>
                But around 2012, a young YC Partner named Garry Tan built this
                website to be a private directory and forum for the founders YC
                had funded. He called it "Bookface" as a tongue-in-cheek joke.
              </p>
              <p>
                Hacker News was built in Lisp (and still is), but Garry had used
                rails for his startup and didn't really want to learn lisp, so
                he built Bookface in rails. Bookface was an instant hit, but for
                several years after, the only people working on it were Garry
                Tan and a couple of other YC partners, who spent most of their
                time working with companies, and only really got to code on
                nights and weekends.
              </p>
              <p>
                In 2015 I joined YC, and my first job on literally my first day
                was to try to figure out what to do with our software. By then,
                Bookface was getting big enough that it seemed clear to me that
                we needed full-time people working on it, and so we ended up
                finding a few key people to do that.
              </p>
              <p>
                Now that we had a small but real team, for the first time we
                were able to think about doing more ambitious things. We
                launched a website (<a href="https://workatastartup.com/"
                  >https://workatastartup.com/</a
                >) to help our companies hire people, and that did well. Then we
                launched a website (<a href="https://www.startupschool.org/"
                  >https://www.startupschool.org/</a
                >) to turn YC's advice about startups into an online course (<a
                  href="https://news.ycombinator.com/item?id=13801376"
                  >https://news.ycombinator.com/item?id=13801376</a
                >). A few years later, we launched a co-founder matching
                platform (<a
                  href="https://news.ycombinator.com/item?id=27750298"
                  >https://news.ycombinator.com/item?id=27750298</a
                >).
              </p>
              <p>
                Along the way we built a lot of other stuff we haven't talked
                about publicly, like all the internal tools that run YC. We've
                tried to make YC scale by writing software to automate as much
                of our business as possible. We have software that helps us read
                60K applications every year, our own Calendly-like software for
                scheduling the 10K+ meetings we do with founders every year,
                software to automate our financial and legal reporting and lots
                more stuff like that.
              </p>
              <p>
                As we've launched new products, we've added one or two people
                per year to the team so we can work on more things in parallel.
                We're up to about 10 now.
              </p>
              <p>
                When people are interviewing with us, they often ask us what the
                culture of the team is, and the answer is that if you've read
                Paul Graham's essays or watched our videos on YouTube, you
                already know what our culture is like. We try to operate
                according to the same advice we give to our startups.
              </p>
              <p>
                We've also tried to make the YC software team as closely
                connected to the batch as possible, which is part of staying
                close to our users (who are mostly YC founders and employees).
                Most of us work on the third floor of the YC building, and the
                batch happens on the first and second floors. So if you want to
                join one of the famous YC batch dinners, you just walk down to
                the first floor.
              </p>
              <p>
                One of the things we hoped would happen was that some of the
                people on the team would take what they learned from working at
                YC and start their own YC companies. That turned out to work -
                there are now 7 people who have done exactly that.
              </p>
              <p>
                We've historically only hired a couple of people per year, but
                we've got a couple of roles open now. We're looking for someone
                to help Mark with infrastructure (see
                <a href="https://news.ycombinator.com/item?id=39019063"
                  >https://news.ycombinator.com/item?id=39019063</a
                >), and we're also hiring someone to work on YC's private
                founder community site Bookface, which is more traditional
                full-stack web development. It's a little hard to describe
                Bookface if you haven't seen it - it's like LinkedIn and
                Facebook and Quora rolled into one, but just for YC founders.
                Most YC founders use it every day.
              </p>
              <p>
                Working at YC isn't a good fit for most people. I think it could
                be a good fit if you have been following YC for a while, if you
                are confident building web products all by yourself, if you like
                having a lot of responsibility and owning the development of
                products end-to-end, and if you like startups and have already
                worked on one or likely will someday. You’ll also need to live
                in SF or want to move here.
              </p>
              <p>
                If you're interested, you can read a traditional job post and
                apply online here (<a
                  href="https://www.ycombinator.com/careers?ashby_jid=00c6950f-341f-4924-a456-ea32c9d5601d"
                  >https://www.ycombinator.com/careers?ashby_jid=00c6950f-341f-...</a
                >), or just email me at jared@ycombinator.com.
              </p>
            </div>
          </section>
        </section>
        <section id="39431809">
          <h3>
            <a
              class="item"
              href="https://www.adrianflux.co.uk/influx/culture/hip-square-70-years-citroen-h-van/"
              >Hip to be square – 70 years of the Citroën H Van</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 16:43:05</span
              ><span class="points-container"
                >Points: <span class="points">50</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39431809"
                  >Comments</a
                ><span class="descendants">: 22</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39430496">
          <h3>
            <a
              class="item"
              href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0297311"
              >Gender differences in Dutch research funding over time</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 15:03:57</span
              ><span class="points-container"
                >Points: <span class="points">22</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39430496"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39430336">
          <h3>
            <a
              class="item"
              href="https://www.universetoday.com/165774/theres-one-last-place-planet-9-could-be-hiding/"
              >There's one last place Planet 9 could be hiding</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 14:51:05</span
              ><span class="points-container"
                >Points: <span class="points">37</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39430336"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39430095">
          <h3>
            <a
              class="item"
              href="https://www.ft.com/content/b845e8ab-9cbc-482c-aa22-0b5c020be099"
              >AstraZeneca unveils successes in treatment of lung cancer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 14:31:18</span
              ><span class="points-container"
                >Points: <span class="points">218</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39430095"
                  >Comments</a
                ><span class="descendants">: 76</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39429627">
          <h3>
            <a class="item" href="https://gcc.gnu.org/gcc-14/porting_to.html#c"
              >Porting to GCC 14: C language issues</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 13:43:32</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39429627"
                  >Comments</a
                ><span class="descendants">: 91</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39429370">
          <h3>
            <a class="item" href="https://leanrada.com/htmz/"
              >Show HN: htmz – a low power tool for HTML</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 13:12:18</span
              ><span class="points-container"
                >Points: <span class="points">491</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39429370"
                  >Comments</a
                ><span class="descendants">: 121</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39428880">
          <h3>
            <a class="item" href="https://groq.com/"
              >Groq runs Mixtral 8x7B-32k with 500 T/s</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 12:06:01</span
              ><span class="points-container"
                >Points: <span class="points">306</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39428880"
                  >Comments</a
                ><span class="descendants">: 232</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39428766">
          <h3>
            <a class="item" href="https://coderev.app"
              >Show HN: CodeRev.app – Code Review as Interview</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 11:46:49</span
              ><span class="points-container"
                >Points: <span class="points">96</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39428766"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
            <div class="text">
              <p>
                Project-based interviews can also be challenging because it can
                end up filtering out folks who don't want to spend several hours
                building something in their free time.
              </p>
              <p>
                I met up with a friend last year -- a very senior dev -- who had
                taken some time off to study leetcode exercises while preparing
                for FAANG interviews. It struck me that one of the key measures
                of whether a candidate is a fit for a team is rather
                <i>synthetic</i>.
              </p>
              <p>
                CodeRev.app is a simple, lightweight tool that helps teams
                evaluate candidates using code reviews. While programming tends
                to be a more isolated activity, code reviews tend to be more
                open ended, collaborative, and reflective of how a candidate
                communicates, interacts, and provides feedback day-to-day. It
                may also be a better yardstick for roles that are biased towards
                reading code rather than writing code (engineering manager,
                support, QA).
              </p>
              <p>
                More interesting is that as we come to rely on AI generated code
                in our workflows, testing for the ability to read and evaluate
                the quality of generated code and whether it is fit-for-purpose
                becomes more important. Being able to quickly identify security
                flaws, logical flaws, and domain specific gaps (auditing,
                logging, etc.) becomes increasingly important.
              </p>
              <p>
                More in depth thoughts here:
                <a
                  href="https://chrlschn.dev/blog/2023/07/interviews-age-of-ai-ditch-leetcode-try-code-reviews-instead/"
                  >https://chrlschn.dev/blog/2023/07/interviews-age-of-ai-ditch...</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="39428677">
          <h3>
            <a class="item" href="https://www.youtube.com/watch?v=Uf4Ux4SlyT4"
              >GoPro Ride Through an Electron Beam Irradiator at Full Beam Power
              [video]</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 11:36:40</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39428677"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39428609">
          <h3>
            <a class="item" href="https://github.com/kaspermarstal/plprql"
              >Show HN: PRQL in PostgreSQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 11:27:51</span
              ><span class="points-container"
                >Points: <span class="points">203</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39428609"
                  >Comments</a
                ><span class="descendants">: 104</span></span
              >
            </h4>
            <div class="text">
              <p>
                When I first saw PRQL on Hacker News a few months ago, I was
                immediately captivated by the idea, yet equally disappointed
                that there was no integration for PostgreSQL. Having previous
                experience with writing PostgreSQL extensions in C, I thought
                this was a great opportunity to try out the pgrx framework and
                decided to integrate PRQL with PostgreSQL myself.
              </p>
              <p>
                The maintainers of both PRQL and pgrx were very nice to work
                with. Thanks guys.
              </p>
            </div>
          </section>
        </section>
        <section id="39428047">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2402.06184"
              >The boundary of neural network trainability is fractal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 10:27:52</span
              ><span class="points-container"
                >Points: <span class="points">138</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39428047"
                  >Comments</a
                ><span class="descendants">: 39</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39427940">
          <h3>
            <a class="item" href="https://whichbachcantata.be/"
              >Bach’s Cantata Calendar</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 10:11:11</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39427940"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39427202">
          <h3>
            <a
              class="item"
              href="https://www.smithsonianmag.com/smart-news/biologists-discover-four-new-octopus-species-deep-ocean-costa-rica-180983631/"
              >Biologists discover four new octopus species</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 08:00:43</span
              ><span class="points-container"
                >Points: <span class="points">160</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39427202"
                  >Comments</a
                ><span class="descendants">: 87</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39426631">
          <h3>
            <a class="item" href="https://castle-engine.io/"
              >Castle Engine – Free open-source cross-platform 3D/2D game engine
              using Pascal</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 06:03:38</span
              ><span class="points-container"
                >Points: <span class="points">291</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39426631"
                  >Comments</a
                ><span class="descendants">: 77</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39426341">
          <h3>
            <a class="item" href="https://a.exozy.me/posts/floats-weird/"
              >Floats Are Weird</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 04:52:38</span
              ><span class="points-container"
                >Points: <span class="points">124</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39426341"
                  >Comments</a
                ><span class="descendants">: 97</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39426310">
          <h3>
            <a
              class="item"
              href="https://github.com/akalenuk/the_namingless_programming_language"
              >The Namingless Programming Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-19 @ 04:45:08</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39426310"
                  >Comments</a
                ><span class="descendants">: 43</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39422778">
          <h3>
            <a
              class="item"
              href="https://www.tomshardware.com/desktops/house-cleaners-find-two-of-the-worlds-first-desktop-pcs-in-random-boxes"
              >House cleaners find two of the first desktop PCs in random
              boxes</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 20:23:25</span
              ><span class="points-container"
                >Points: <span class="points">92</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39422778"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39418196">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/features/2017-10-26/inside-fort-botox-where-a-deadly-toxin-yields-2-8-billion-drug"
              >Fort Botox, Where a Deadly Toxin Yields $2.8B Drug (2017)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 11:24:50</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39418196"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39417968">
          <h3>
            <a
              class="item"
              href="https://www.nvidia.com/en-us/design-visualization/a800/"
              >A800 40GB Active Graphics Card</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 10:39:33</span
              ><span class="points-container"
                >Points: <span class="points">29</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39417968"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39417905">
          <h3>
            <a
              class="item"
              href="https://github.com/noctuid/dotfiles/blob/master/emacs/editing.org"
              >Notes on Text Editing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-18 @ 10:28:15</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39417905"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39409140">
          <h3>
            <a class="item" href="https://fffuel.co/svg-spinner/"
              >Making SVG Loading Spinners: An Interactive Guide</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-17 @ 13:14:59</span
              ><span class="points-container"
                >Points: <span class="points">59</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39409140"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39408770">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/science/2024/02/its-a-fake-mysterious-280-million-year-old-fossil-is-mostly-just-black-paint/"
              >Mysterious 280M-year-old fossil is mostly just black paint</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-17 @ 12:17:13</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39408770"
                  >Comments</a
                ><span class="descendants">: 34</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39391675">
          <h3>
            <a
              class="item"
              href="https://www.orange-kiwi.com/posts/optimization-example-mandelbrot-part-1/"
              >Optimization Example: Mandelbrot Set (part 1)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-16 @ 01:01:03</span
              ><span class="points-container"
                >Points: <span class="points">61</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39391675"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
