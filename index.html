<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39691198">
          <h3>
            <a
              class="item"
              href="https://simpleflying.com/major-blow-united-airlines-tells-boeing-stop-building-max-10s-switch-max-9s/"
              >United Airlines tells Boeing to stop building Max 10s and to
              switch to max 9s</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 13:50:18</span
              ><span class="points-container"
                >Points: <span class="points">45</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39691198"
                  >Comments</a
                ><span class="descendants">: 63</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39690967">
          <h3>
            <a
              class="item"
              href="https://www.bloomberg.com/news/articles/2024-03-12/physical-intelligence-is-building-ai-for-robots-backed-by-openai"
              >Physical Intelligence Is Building a Brain for Robots</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 13:17:09</span
              ><span class="points-container"
                >Points: <span class="points">23</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39690967"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39690917">
          <h3>
            <a
              class="item"
              href="https://arstechnica.com/tech-policy/2024/03/irs-free-tax-filing-service-now-available-but-most-people-dont-qualify/"
              >IRS has launched its free tax filing service, Direct File, in 12
              states</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 13:11:00</span
              ><span class="points-container"
                >Points: <span class="points">125</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39690917"
                  >Comments</a
                ><span class="descendants">: 41</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39690725">
          <h3>
            <a class="item" href="https://marker.pages.dev/"
              >Show HN: A user-friendly UI for viewing and editing Markdown
              files</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 12:47:43</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39690725"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39690368">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39690368"
              >Show HN: I3wm Alt+Tab Workspace Switcher</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 11:53:44</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39690368"
                  >Comments</a
                ><span class="descendants">: 37</span></span
              >
            </h4>
            <div class="text">
              <p>
                The i3wm Alt+Tab Workspace Switcher is a tool designed to bring
                the familiar Alt+Tab window switching functionality to the i3
                window manager environment. It aims to enhance productivity by
                enabling users to switch between workspaces efficiently and
                intuitively, mimicking the window switching feature found in
                traditional desktop environments like Windows.
              </p>
              <p>
                In my experience, using the $mod+workspace number to switch
                workspaces feels slower. I suspect this might be because I
                process visual cues more quickly than I recall specific
                keystrokes for each workspace. Alternatively, it could simply be
                due to my familiarity with the Alt+Tab behavior from Windows and
                macOS, which has influenced my preferences and habits.
              </p>
            </div>
          </section>
        </section>
        <section id="39690354">
          <h3>
            <a
              class="item"
              href="https://www.europarl.europa.eu/news/en/press-room/20240308IPR19015/artificial-intelligence-act-meps-adopt-landmark-law"
              >Artificial Intelligence Act: MEPs adopt law</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 11:51:48</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39690354"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39689872">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-03-giant-sequoias-rapidly-feature-uk.html"
              >Giant sequoias are a rapidly growing feature of the UK
              landscape</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 10:31:32</span
              ><span class="points-container"
                >Points: <span class="points">76</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39689872"
                  >Comments</a
                ><span class="descendants">: 42</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39689685">
          <h3>
            <a class="item" href="https://sheetsql.io/"
              >Show HN: Query Your Sheets with SheetSQL</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 10:02:05</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39689685"
                  >Comments</a
                ><span class="descendants">: 44</span></span
              >
            </h4>
            <div class="text">
              <p>
                I've developed a tool named SheetSQL that allows you to query,
                join, export, and schedule your queries to Google Sheets through
                a straightforward SQL interface in the browser.
              </p>
              <p>
                This tool is a simple, first iteration of the idea, so I'm eager
                to receive feedback on it. You can contact me at taras [at]
                sheetsql.io :D. I'd love to find out if it could be useful for
                folks out there!
              </p>
              <p>
                As someone working in fintech, I constantly deal with sheets and
                often find it challenging to perform seemingly simple tasks like
                JOINs natively. However, I'm familiar with SQL, which inspired
                the creation of SheetSQL. It's designed to assist those who use
                sheets daily and have some SQL knowledge, making operations
                across multiple sheets and worksheets as easy as if they were
                interacting with a Postgres database.
              </p>
              <p>
                For those interested in the technical details, the engine
                powering the queries in the background is DuckDB. Therefore, you
                can expect support for all syntax from the latest version of
                DuckDB :)
              </p>
              <p>Cheers,</p>
            </div>
          </section>
        </section>
        <section id="39688545">
          <h3>
            <a class="item" href="https://fly.io/blog/jit-wireguard-peers/"
              >JIT WireGuard</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 06:13:09</span
              ><span class="points-container"
                >Points: <span class="points">300</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39688545"
                  >Comments</a
                ><span class="descendants">: 86</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39688443">
          <h3>
            <a class="item" href="https://cheswick.com/insults"
              >Insult Passphrase Generator</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 05:47:36</span
              ><span class="points-container"
                >Points: <span class="points">127</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39688443"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39687762">
          <h3>
            <a
              class="item"
              href="https://www.gutenberg.org/files/55084/55084-h/55084-h.htm"
              >Technical Manual TM 11-410: The Homing Pigeon (1945)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 03:18:36</span
              ><span class="points-container"
                >Points: <span class="points">100</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39687762"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39687711">
          <h3>
            <a
              class="item"
              href="https://portraitart.app/photo-to-coloring-page"
              >Show HN: Creating custom coloring pages from photos. Great for
              parents/teachers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 03:09:23</span
              ><span class="points-container"
                >Points: <span class="points">119</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39687711"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
            <div class="text">
              Making coloring pages out of your own personal photos is a fun and
              creative way to engage kids (and adults!) with art. Instead of
              generic coloring pages, you can turn special memories into custom
              works of art just waiting to be filled in with color.
            </div>
          </section>
        </section>
        <section id="39687132">
          <h3>
            <a class="item" href="https://github.com/Syllo/nvtop"
              >Nvtop: Linux Task Monitor for Nvidia, AMD and Intel GPUs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 01:36:14</span
              ><span class="points-container"
                >Points: <span class="points">371</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39687132"
                  >Comments</a
                ><span class="descendants">: 59</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39686585">
          <h3>
            <a
              class="item"
              href="https://www.irs.gov/newsroom/direct-file-officially-opens-in-12-pilot-states-following-positive-early-reviews-eligible-taxpayers-can-file-online-directly-with-the-irs-for-free"
              >Direct File officially opens in 12 pilot states</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-13 @ 00:26:45</span
              ><span class="points-container"
                >Points: <span class="points">246</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39686585"
                  >Comments</a
                ><span class="descendants">: 122</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39684043">
          <h3>
            <a
              class="item"
              href="https://stachu.net/im-really-excited-about-darklang/"
              >I'm Excited about Darklang</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 19:44:18</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39684043"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39684027">
          <h3>
            <a
              class="item"
              href="https://bsky.social/about/blog/03-12-2024-stackable-moderation"
              >Bluesky's stackable approach to moderation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 19:43:18</span
              ><span class="points-container"
                >Points: <span class="points">271</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39684027"
                  >Comments</a
                ><span class="descendants">: 133</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39683455">
          <h3>
            <a
              class="item"
              href="https://github.com/ProfJski/FloatCompMandelbrot"
              >How Mandelbrot set images are affected by floating point
              precision</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 19:01:53</span
              ><span class="points-container"
                >Points: <span class="points">231</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39683455"
                  >Comments</a
                ><span class="descendants">: 83</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39683059">
          <h3>
            <a
              class="item"
              href="https://www.rfleury.com/p/multi-threading-and-mutation"
              >Multi-Threading and Mutation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 18:27:55</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39683059"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39682852">
          <h3>
            <a
              class="item"
              href="https://guix.gnu.org/en/blog/2024/identifying-software/"
              >Identifying Software</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 18:12:33</span
              ><span class="points-container"
                >Points: <span class="points">49</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39682852"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39682183">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=39682183"
              >Launch HN: Glide (YC W24) – AI-assisted technical design docs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 17:21:06</span
              ><span class="points-container"
                >Points: <span class="points">158</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39682183"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
            <div class="text">
              <a href="https://glide.agenticlabs.com"
                >https://glide.agenticlabs.com</a
              >) that helps developers write technical design docs faster. It’s
              like an IDE with Copilot, but instead of directly editing your
              code, it helps you come up with a solid plan before implementing a
              change. There’s a basic demo here (<a
                href="https://youtu.be/5uEapdT6nYE"
                >https://youtu.be/5uEapdT6nYE</a
              >), and we also recorded a session with one of our early users
              running through an unusual task (calling a Fortran algorithm from
              Go,
              <a href="https://youtu.be/ppluB0Z1OIA"
                >https://youtu.be/ppluB0Z1OIA</a
              >)
              <p>
                Why use design docs? Mainly because on complex software
                projects, if you don’t have a careful strategy, a few lines of
                code can lead to a ripple effect across the whole codebase.
                You're working on a small new feature and suddenly, your PR is
                touching dozens of different files in a handful of directories,
                and you may be questioning if it still makes sense at all.
              </p>
              <p>
                Laying out your approach in a technical design document helps to
                avoid these situations, so tech companies often embed this
                practice in their engineering culture. Unfortunately, producing
                these write-ups is a manual and time-consuming process that
                keeps you switching between typing in Confluence, searching on
                GitHub, and drawing on a whiteboard.
              </p>
              <p>
                For example, one of our early users is building a RAG (Retrieval
                Augmented Generation) system in Rust, and needs to rewrite their
                original chunking algorithm that was created in Python. A change
                like that involves not only porting the chunking logic but also
                defining new structs, choosing the Rust libraries for text
                parsing, re-integrating with the Rust server, and changing the
                endpoint on the front end. Simple-sounding changes like these
                can end up with many "tentacles" devs have to work through. Our
                product helps teams like this spec out their approach more
                quickly.
              </p>
              <p>
                The need for this hit us when we were working on a product using
                LLMs to turn tickets into PRs. You can just assign a ticket to
                GPT-4 and review the PR, right? Turns out that most people
                (including us) don’t write very complete or specific tickets on
                the first pass, and when they do, that ends up being more effort
                than just doing the whole thing yourself.
              </p>
              <p>
                What was missing was a fast way to iterate on goals,
                requirements, and implementation plans for code that could then
                be useful to developers (whether AI assisted or not) to
                implement with high confidence. Our editor, Glide, splits this
                process into the following stages and lets you spend as much or
                as little time on each stage as makes sense.
              </p>
              <p>
                (1) We index your project code with Tree-Sitter and make it
                searchable, so you can add relevant parts of the codebase to the
                task context.
              </p>
              <p>
                (2) AI writes the first pass for a high-level solution outline
                given the code and the goal. It will try to point out missing
                details or ambiguities about the task so far.
              </p>
              <p>
                (3) As a developer you can easily edit the generated
                content—tweaks like “change step 3” or “remove the part about
                caching” don’t require additional back-and-forth conversation.
              </p>
              <p>
                (4) The next stage is a step-by-step plan—a pseudocode-level
                guide for how to complete the change. AI generates this, and
                again you can make adjustments in-line as needed.
              </p>
              <p>
                (5) There is a chat mode for deeper discussions about the
                content—just highlight any text and click chat. This works well
                for exploring alternatives, getting more specific on a
                particular point, or understanding why the AI wrote what it did.
              </p>
              <p>
                (6) Once the plan looks good, you can have AI generate code
                edits for each step. You’re free to make additional changes here
                or just open the markdown doc with code edits in your local
                VSCode via an extension, so you have it as a reference while you
                implement.
              </p>
              <p>
                This looks a lot like collaborative Chain of Thought, explicitly
                writing out each step in a line of reasoning, for both the
                developer and the LLM. Breaking down a high-level task with AI
                this way can work well for building consensus on the desired end
                state of your change.
              </p>
              <p>
                We plan to charge companies per seat, but today, it’s free for
                individual use as we get more feedback on the product. One
                future area we’re excited for is multiplayer mode—where a few
                developers can share, edit, and leave comments on the generated
                docs in a shared workspace. If you have ideas for this
                experience, we’d love to hear them.
              </p>
              <p>
                We would love for you to give it a try at
                <a href="https://glide.agenticlabs.com/"
                  >https://glide.agenticlabs.com/</a
                >
                and tell us what you think! We’re excited to discuss this with
                any comments you have!
              </p>
              <p>
                P.S. We only keep the indexed code in an in-memory cache while
                you’re using it. We don’t store your code or use it as training
                data!
              </p>
            </div>
          </section>
        </section>
        <section id="39681919">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/infisical/jobs/MteMdIQ-full-stack-engineer"
              >Infisical (YC W23) is hiring to build an open-source secret
              management platform</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 17:00:26</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39680997">
          <h3>
            <a
              class="item"
              href="https://engineering.fb.com/2024/03/12/data-center-engineering/building-metas-genai-infrastructure/"
              >Building Meta's GenAI infrastructure</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 15:52:35</span
              ><span class="points-container"
                >Points: <span class="points">619</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39680997"
                  >Comments</a
                ><span class="descendants">: 283</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39680122">
          <h3>
            <a
              class="item"
              href="https://buttondown.email/ownyourweb/archive/issue-11/"
              >Own Your Web – Issue 11: Welcome to the IndieWeb</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 14:41:08</span
              ><span class="points-container"
                >Points: <span class="points">46</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39680122"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39678783">
          <h3>
            <a class="item" href="https://ourworldindata.org/weather-forecasts"
              >Weather forecasts have become more accurate</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 12:42:35</span
              ><span class="points-container"
                >Points: <span class="points">335</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39678783"
                  >Comments</a
                ><span class="descendants">: 179</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39675807">
          <h3>
            <a class="item" href="https://www.trangram.com"
              >Show HN: I made a free animator. Think Adobe Illustrator but for
              animation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-12 @ 03:15:51</span
              ><span class="points-container"
                >Points: <span class="points">668</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39675807"
                  >Comments</a
                ><span class="descendants">: 211</span></span
              >
            </h4>
            <div class="text">
              Trangram is a free one-stop platform to create, and share motion
              graphics and svg animations with a free built-in powerful editor
              which is a fusion of Adobe Illustrator and animation tools.
            </div>
          </section>
        </section>
        <section id="39673087">
          <h3>
            <a
              class="item"
              href="https://www.esa.int/Science_Exploration/Space_Science/Webb/Webb_Hubble_confirm_Universe_s_expansion_rate"
              >Webb and Hubble confirm Universe's expansion rate</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-11 @ 20:49:35</span
              ><span class="points-container"
                >Points: <span class="points">638</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39673087"
                  >Comments</a
                ><span class="descendants">: 329</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39672965">
          <h3>
            <a
              class="item"
              href="https://toruzz.com/blog/how-to-colorize-gb-games-04/"
              >How to colorize Game Boy games – Backgrounds</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-11 @ 20:36:34</span
              ><span class="points-container"
                >Points: <span class="points">137</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39672965"
                  >Comments</a
                ><span class="descendants">: 18</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39665828">
          <h3>
            <a
              class="item"
              href="https://pywebview.flowrl.com/blog/pywebview5.html"
              >Show HN: Pywebview 5</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-11 @ 08:22:18</span
              ><span class="points-container"
                >Points: <span class="points">103</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39665828"
                  >Comments</a
                ><span class="descendants">: 29</span></span
              >
            </h4>
            <div class="text">
              I am happy to announce a new major version of pywebview
            </div>
          </section>
        </section>
        <section id="39665431">
          <h3>
            <a
              class="item"
              href="https://gregorygundersen.com/blog/2018/12/20/svd-proof/"
              >Proof of the Singular Value Decomposition</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-11 @ 06:42:45</span
              ><span class="points-container"
                >Points: <span class="points">85</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39665431"
                  >Comments</a
                ><span class="descendants">: 11</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39665031">
          <h3>
            <a
              class="item"
              href="https://hypebeast.com/2024/3/the-eames-institute-of-infinite-curiosity-opens"
              >The Eames Institute of Infinite Curiosity Now Open to the
              Public</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-03-11 @ 04:56:36</span
              ><span class="points-container"
                >Points: <span class="points">28</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39665031"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
