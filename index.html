<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="39332301">
          <h3>
            <a
              class="item"
              href="https://neurosciencenews.com/immunity-aging-brain-drainage-25573/"
              >Brain's Drainage System Provides New Insights into Aging and
              Immunity</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 02:58:20</span
              ><span class="points-container"
                >Points: <span class="points">11</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39332301"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39331771">
          <h3>
            <a
              class="item"
              href="https://www.independent.co.uk/news/world/americas/crime/swatting-nikki-haley-trump-fbi-stalkers-b2494097.html"
              >A man has been swatted 47 times for making a joke about Norm
              Macdonald</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 00:59:42</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39331771"
                  >Comments</a
                ><span class="descendants">: 114</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39331705">
          <h3>
            <a
              class="item"
              href="https://www.science.org/doi/10.1126/sciadv.adl4000"
              >ForceGen: End-to-end de novo protein generation</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-11 @ 00:48:57</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39331705"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39331383">
          <h3>
            <a class="item" href="https://keyboardconnect.com/"
              >Show HN: A platform for remote piano lessons based on the Web
              MIDI API</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 23:50:29</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39331383"
                  >Comments</a
                ><span class="descendants">: 26</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm surprised with how well the MVP has worked and would love to
                hear any feedback or suggestions!
              </p>
            </div>
          </section>
        </section>
        <section id="39330797">
          <h3>
            <a class="item" href="https://www.openttd.org/about">OpenTTD</a>
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 22:28:02</span
              ><span class="points-container"
                >Points: <span class="points">267</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39330797"
                  >Comments</a
                ><span class="descendants">: 45</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39330391">
          <h3>
            <a
              class="item"
              href="https://publicdomainreview.org/essay/eugene-francois-vidocq-and-the-birth-of-the-detective/"
              >Eugène-François Vidocq and the Birth of the Detective</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 21:28:35</span
              ><span class="points-container"
                >Points: <span class="points">34</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39330391"
                  >Comments</a
                ><span class="descendants">: 4</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39330377">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-02-adhesive-tape-2d-materials-easily.html"
              >New adhesive tape picks up and sticks down 2D materials easily</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 21:26:23</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39330377"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39330367">
          <h3>
            <a
              class="item"
              href="https://phys.org/news/2024-02-global-wild-megafauna-ecosystem-properties.html"
              >Global study: Wild megafauna shape ecosystem properties</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 21:25:30</span
              ><span class="points-container"
                >Points: <span class="points">19</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39330367"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39330330">
          <h3>
            <a class="item" href="https://mw.rat.bz/davgmsrl/"
              >Demoscene and video game music streaming radio links</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 21:19:19</span
              ><span class="points-container"
                >Points: <span class="points">106</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39330330"
                  >Comments</a
                ><span class="descendants">: 21</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39330281">
          <h3>
            <a class="item" href="https://github.com/ebanner/hexasm"
              >Show HN: Emacs minor mode for connecting assembly and assembled
              code buffers</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 21:13:38</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39330281"
                  >Comments</a
                ><span class="descendants">: 10</span></span
              >
            </h4>
            <div class="text">
              <p>
                I'm really fascinated by the idea of demystifying an operating
                system, so to be able to view the alignment between code and
                data I find really satisfying
              </p>
            </div>
          </section>
        </section>
        <section id="39330188">
          <h3>
            <a class="item" href="https://grabbyaliens.com/"
              >Grabby Aliens (2021)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 21:03:29</span
              ><span class="points-container"
                >Points: <span class="points">39</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39330188"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39330161">
          <h3>
            <a
              class="item"
              href="https://www.emergetools.com/careers/jobs/growth-engineer"
              >Emerge (YC W21) is hiring a growth engineer (small team, fully
              remote)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 21:00:46</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39330111">
          <h3>
            <a
              class="item"
              href="https://www.wlrn.org/environment/2023-10-12/floridas-coastal-savior-the-benefits-of-mangroves"
              >The Benefits of Mangroves (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 20:54:20</span
              ><span class="points-container"
                >Points: <span class="points">27</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39330111"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39329912">
          <h3>
            <a
              class="item"
              href="https://www.freep.com/story/news/local/michigan/2024/02/10/underground-tunnels-detroit-michigan/72060366007/"
              >Detroit's abandoned tunnel systems open door to another world</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 20:30:10</span
              ><span class="points-container"
                >Points: <span class="points">117</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39329912"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39329383">
          <h3>
            <a
              class="item"
              href="https://kobikobi.wordpress.com/2018/03/03/speak-friend-and-enter-do-people-actually-use-movie-passwords/"
              >Speak Friend and Enter – Do people use movie passwords? (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 19:24:46</span
              ><span class="points-container"
                >Points: <span class="points">8</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39329383"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39328684">
          <h3>
            <a
              class="item"
              href="https://gist.github.com/yoavg/8b98bbd70eb187cf1852b3485b8cda4f"
              >Grand-Master Level Chess Without Search: Modeling Choices and
              Their Implications</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 18:13:54</span
              ><span class="points-container"
                >Points: <span class="points">43</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39328684"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39328007">
          <h3>
            <a
              class="item"
              href="https://www.propelauth.com/post/interview-dungeon-master"
              >Becoming a dungeon master for an interview</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 17:13:19</span
              ><span class="points-container"
                >Points: <span class="points">143</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39328007"
                  >Comments</a
                ><span class="descendants">: 125</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39327734">
          <h3>
            <a
              class="item"
              href="https://cse.buffalo.edu/~rapaport/howtostudy.html"
              >How to Study (2023)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 16:50:30</span
              ><span class="points-container"
                >Points: <span class="points">175</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39327734"
                  >Comments</a
                ><span class="descendants">: 60</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39327561">
          <h3>
            <a class="item" href="https://niagaralauncher.app/"
              >Niagara Launcher</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 16:37:38</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39327561"
                  >Comments</a
                ><span class="descendants">: 73</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39327192">
          <h3>
            <a class="item" href="https://github.com/djanderson/aho"
              >Aho – a Git implementation in Awk</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 16:05:37</span
              ><span class="points-container"
                >Points: <span class="points">209</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39327192"
                  >Comments</a
                ><span class="descendants">: 81</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39326401">
          <h3>
            <a class="item" href="https://nbittich.github.io/adana/"
              >Show HN: Now my pet programming language can run in the
              browser</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 14:36:17</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39326401"
                  >Comments</a
                ><span class="descendants">: 12</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39324956">
          <h3>
            <a
              class="item"
              href="https://getdeploying.com/reference/data-egress"
              >Cloud Egress Costs</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-10 @ 09:55:37</span
              ><span class="points-container"
                >Points: <span class="points">217</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39324956"
                  >Comments</a
                ><span class="descendants">: 156</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39320003">
          <h3>
            <a
              class="item"
              href="https://onlinelibrary.wiley.com/doi/10.1002/spe.3313"
              >On-demand JSON: A better way to parse documents?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-09 @ 20:19:53</span
              ><span class="points-container"
                >Points: <span class="points">79</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39320003"
                  >Comments</a
                ><span class="descendants">: 24</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39319649">
          <h3>
            <a
              class="item"
              href="https://thewritetoroam.com/2024/02/how-to-write-stuff-no-one-else-can"
              >How to write stuff no one else can</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-09 @ 19:52:07</span
              ><span class="points-container"
                >Points: <span class="points">218</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39319649"
                  >Comments</a
                ><span class="descendants">: 56</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39317580">
          <h3>
            <a class="item" href="https://github.com/Textualize/toolong"
              >Toolong: Terminal application to view, tail, merge, and search
              log files</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-09 @ 17:27:35</span
              ><span class="points-container"
                >Points: <span class="points">150</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39317580"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39314153">
          <h3>
            <a class="item" href="https://cuecam-presenter.com?ct=hn"
              >Show HN: Presentations for your webcam, not a projector</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-09 @ 12:37:03</span
              ><span class="points-container"
                >Points: <span class="points">201</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39314153"
                  >Comments</a
                ><span class="descendants">: 54</span></span
              >
            </h4>
            <div class="text">
              <p>
                Editing cards should feel natural to anybody used to Markdown.
              </p>
              <p>
                I came to create CueCam as an "embedded entrepreneur". I had
                some success with my camera app "Shoot Pro Webcam" back in 2020
                and built on this by creating squares.tv.
              </p>
              <p>
                As I talked to more and more users, I discovered more
                opportunities to make their lives easier. I started with
                features in Shoot (camera options, pausing, drawing etc..)..
                Then I created Video Pencil (which connects to your computer and
                lets you draw on your webcam using your iPad). Then I created
                "Beat Sheet" which lets you run through "smart scripts",
                controlling Ecamm Live, OBS and mimoLive.
              </p>
              <p>
                CueCam Presenter is how I'm connecting all these elements. It
                gives you a virtual webcam, virtual mic, and seamlessly connects
                to Shoot and Video Pencil running on other devices. There are
                various ways you can use it as a teleprompter while maintaining
                eye contact.
              </p>
              <p>
                It's taken a lot to get it to this stage. The video pipeline has
                been through two major iterations and the audio pipeline even
                more. The UI has evolved and developed to cover the different
                ways it is understood by different people.
              </p>
              <p>
                Educational discounts are a must for me, as I want to help
                improve the quality of remote teaching around the world. For
                other professionals, I believe it transforms the way you
                interact with people on video calls. It's useful for recording
                software demos and running live streams.
              </p>
            </div>
          </section>
        </section>
        <section id="39313361">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2402.03067"
              >Multilingual transformer and BERTopic for topic modeling: The
              case of Serbian</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-09 @ 10:18:56</span
              ><span class="points-container"
                >Points: <span class="points">41</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39313361"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39311930">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/maze-proof-establishes-a-backbone-for-statistical-mechanics-20240207/"
              >Maze proof establishes a 'backbone' for statistical mechanics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-09 @ 06:13:10</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39311930"
                  >Comments</a
                ><span class="descendants">: 9</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39286218">
          <h3>
            <a
              class="item"
              href="https://www.thepsmiths.com/p/review-demons-by-fyodor-dostoevsky"
              >Review: Demons, by Fyodor Dostoevsky</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-07 @ 09:05:25</span
              ><span class="points-container"
                >Points: <span class="points">9</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39286218"
                  >Comments</a
                ><span class="descendants">: 1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="39281661">
          <h3>
            <a
              class="item"
              href="https://www.fpl.fs.usda.gov/documnts/pdf2018/fpl_2018_hunt002.pdf"
              >Understanding Wood Bonds – Going beyond what meets the eye [pdf]
              (2018)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-02-06 @ 22:26:01</span
              ><span class="points-container"
                >Points: <span class="points">38</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=39281661"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
