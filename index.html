<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
      name="viewport"
    />
    <meta name="description" content="Hacker News" />
    <meta name="theme-color" content="#fff" />
    <title>Hacker News</title>
    <link rel="manifest" href="manifest.json" />
    <link
      href="data:image/x-icon;base64,AAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQECAAEAAQA4AAAAFgAAACgAAAABAAAAAgAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAA"
      rel="icon"
      type="image/x-icon"
    />
    <link
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAA1BMVEUAAACnej3aAAAANklEQVR42u3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8G4IAAAFjdVCkAAAAAElFTkSuQmCC"
      rel="apple-touch-icon"
    />
    <style>
      /*<!--*/
      body {
        color: rgb(25, 25, 25);
        font-family: Verdana, Geneva, sans-serif;
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      a:link,
      a:focus,
      a:hover,
      a:active {
        color: rgb(75, 75, 125);
      }

      a:visited {
        color: rgb(25, 25, 25);
      }

      h1 > a,
      h1 > a:link,
      h1 > a:focus,
      h1 > a:hover,
      h1 > a:active,
      h1 > a:visited,
      h2 > a,
      h2 > a:link,
      h2 > a:focus,
      h2 > a:hover,
      h2 > a:active,
      h2 > a:visited {
        color: rgb(25, 25, 25);
      }

      h1 {
        background-color: rgb(255, 102, 0);
        margin: 0;
        padding: 1rem;
      }

      h2 {
        background-color: rgb(200, 200, 200);
        margin: 1rem 0;
        padding: 0.5rem 0.5rem 0.5rem 1rem;
      }

      #latest > section,
      #archives > section {
        margin: 0 1rem 1rem 1rem;
        padding-bottom: 1rem;
      }

      #latest > section:not(:last-child),
      #archives > section:not(:last-child) {
        border-bottom: 1px dotted rgb(200, 200, 200);
      }

      section > h3 {
        margin: 0 0 0.5rem 0;
      }

      section > h4 {
        font-weight: normal;
        margin: 0 0 0 1rem;
      }

      .descendants-container,
      .points-container {
        align-items: center;
        border-left: 1px solid #333;
        display: inline-flex;
        margin-left: 0.5rem;
        padding-left: 0.5rem;
        text-align: center;
      }

      .points {
        align-items: center;
        display: inline-flex;
        height: 1rem;
        margin-left: 1ch;
        min-width: 3ch;
      }

      .text {
        line-height: 1.5rem;
        margin: 1rem 1rem 0 1rem;
        overflow: auto;
      }

      .text > p:first-child {
        margin-top: 1rem;
      }

      .text > p:last-child {
        margin-bottom: 0;
      }
      /*-->*/
    </style>
  </head>

  <body>
    <main>
      <h1><a href="https://kherrick.github.io/hacker-news/">Hacker News</a></h1>
      <section id="latest">
        <h2>Latest</h2>
        <section id="41437214">
          <h3>
            <a
              class="item"
              href="https://news.bloombergtax.com/tax-insights-and-commentary/google-california-deal-falls-short-where-a-data-tax-would-succeed"
              >Google–California Deal Falls Short Where a Data Tax Would
              Succeed</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 17:39:31</span
              ><span class="points-container"
                >Points: <span class="points">5</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41437214"
                  >Comments</a
                ><span class="descendants">: 0</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41436843">
          <h3>
            <a
              class="item"
              href="https://www.ycombinator.com/companies/formance/jobs/cz7CHvV-technical-writer"
              >Formance (YC S21) Is Hiring a Technical Writer</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 17:00:02</span
              ><span class="points-container"
                >Points: <span class="points">1</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41436642">
          <h3>
            <a
              class="item"
              href="https://practical.engineering/blog/2024/9/3/the-hidden-engineering-of-landfills"
              >The Engineering of Landfills</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 16:40:51</span
              ><span class="points-container"
                >Points: <span class="points">68</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41436642"
                  >Comments</a
                ><span class="descendants">: 27</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41436372">
          <h3>
            <a
              class="item"
              href="https://www.quantamagazine.org/how-the-higgs-field-actually-gives-mass-to-elementary-particles-20240903/"
              >How the Higgs Field (Actually) Gives Mass to Elementary
              Particles</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 16:11:31</span
              ><span class="points-container"
                >Points: <span class="points">65</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41436372"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41436338">
          <h3>
            <a class="item" href="https://repaint.com"
              >Show HN: Repaint – a WebGL based website builder</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 16:08:52</span
              ><span class="points-container"
                >Points: <span class="points">52</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41436338"
                  >Comments</a
                ><span class="descendants">: 30</span></span
              >
            </h4>
            <div class="text">
              <p>
                It has panning, zooming, and dragging elements around. The
                settings closely follow html/css. We think an open canvas is a
                big improvement over other website builders. Everything is
                easier: styling, consistency, responsiveness…
              </p>
              <p>
                But making it work was hard! We thought HN would appreciate the
                tech behind it: - A custom WebGL rendering engine (w/text,
                shadows, blurs, gradients, &amp; opacity groups) - A partial
                implementation of the css spec - A custom text editor &amp; text
                shaper - A transformer to turn designs into publishable html/css
              </p>
              <p>
                Repaint is a design tool for html/css. But internally, it
                doesn’t actually use html/css itself. All your designs live in a
                single &lt;canvas&gt; element.
              </p>
              <p>
                We wanted users to be able to see all their content on one
                screen. We target +60fps, so frames only have 16ms to render.
                The browser’s layout engine couldn’t handle simple actions, like
                zooming, with many thousands of nodes on the screen. To fix
                that, we wrote a rendering engine in WebGL.
              </p>
              <p>
                Since we use custom rendering, we had to create a lot of
                built-in browser behavior ourselves.
              </p>
              <p>
                Users modify a large dom-like data-structure in our editor. Each
                node in the document has a set of css-like styles. We created a
                layout engine that turns this document into a list of positions
                and sizes. We feed these values into the rendering engine. Our
                layout engine lets us display proper html layouts without using
                the browser's layout engine. We support both flex and block
                layouts. We already support multiple layout units and properties
                (px, %, mins, maxes, etc.).
              </p>
              <p>
                We also can’t use the browser’s built-in text editor, so we made
                one ourselves. We implemented all the common text editor
                features regarding selection and content editing (clicking,
                selection, hotkeys, inline styling, etc.). The state consists of
                content and selection. The inputs are keystrokes, clicks, and
                style changes. The updated state is used to render text,
                selection boxes, and the cursor.
              </p>
              <p>
                When you publish a website, we turn our internal document into
                an html document. We've intentionally structured our document to
                feel similar to a dom tree. Each node has a 1:1 mapping with an
                html element. Nodes have a list of breakpoints which represent
                media-queries. We apply the styles by turning them into
                selectors. All of the html pages are saved and stored on our
                fileserver for hosting.
              </p>
              <p>
                We made a playground for HN, so you can try it yourself. Now
                that the tech works, we’d love feedback and ideas for improving
                the product experience.
              </p>
              <p>
                And we’d love to meet more builders interested in the space. If
                that’s you, feel free to say hello in the comments! Or you can
                reach Ben from his website.
              </p>
              <p>
                Playground:
                <a href="https://app.repaint.com/playground"
                  >https://app.repaint.com/playground</a
                >
              </p>
              <p>
                Demo Vid:
                <a
                  href="https://www.loom.com/share/03ee81317c224189bfa202d3eacfa3c3?sid=094a4888-5ca7-4c4f-ba57-bb24cffe169c"
                  >https://www.loom.com/share/03ee81317c224189bfa202d3eacfa3c3?...</a
                >
              </p>
              <p>
                Main Website:
                <a href="https://repaint.com/">https://repaint.com/</a>
              </p>
              <p>
                Contact:
                <a href="https://benshumaker.xyz/">https://benshumaker.xyz/</a>
              </p>
            </div>
          </section>
        </section>
        <section id="41436158">
          <h3>
            <a class="item" href="https://chromatone.center/"
              >Chromatone – Visual Music Language</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 15:54:37</span
              ><span class="points-container"
                >Points: <span class="points">99</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41436158"
                  >Comments</a
                ><span class="descendants">: 14</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41435676">
          <h3>
            <a
              class="item"
              href="https://www.npr.org/sections/the-picture-show/2024/09/03/g-s1-5057/photographer-captures-life-in-old-growth-forests"
              >A photographer captures life in America's last remaining
              old-growth forests</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 15:06:36</span
              ><span class="points-container"
                >Points: <span class="points">81</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41435676"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41435409">
          <h3>
            <a class="item" href="https://github.com/David-OConnor/plascad"
              >Show HN: PlasCAD: Open-source plasmid editor</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 14:38:01</span
              ><span class="points-container"
                >Points: <span class="points">63</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41435409"
                  >Comments</a
                ><span class="descendants">: 19</span></span
              >
            </h4>
            <div class="text">
              <p>
                From a technical standpoint, this is a standalone binary written
                using the EGUI library in rust. A project goal is performance,
                with small memory footprint, and small application and file
                sizes.
              </p>
              <p>
                This is a continuous work-in-progress, and I'm open to any and
                all feedback, criticism, and requested features.
              </p>
            </div>
          </section>
        </section>
        <section id="41434679">
          <h3>
            <a class="item" href="https://victortao.substack.com/p/song-pong"
              >Synchronizing pong to music with constrained optimization</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 13:19:33</span
              ><span class="points-container"
                >Points: <span class="points">144</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41434679"
                  >Comments</a
                ><span class="descendants">: 17</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41434637">
          <h3>
            <a
              class="item"
              href="https://blog.jgc.org/2024/09/steve-ballmers-binary-search-interview.html"
              >Steve Ballmer's incorrect binary search interview question</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 13:12:51</span
              ><span class="points-container"
                >Points: <span class="points">160</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41434637"
                  >Comments</a
                ><span class="descendants">: 145</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41434509">
          <h3>
            <a
              class="item"
              href="https://pncnmnp.github.io/blogs/ibm-ramac-and-1960-winter-olympics.html"
              >IBM 305 RAMAC and the 1960 Winter Olympics</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 12:57:19</span
              ><span class="points-container"
                >Points: <span class="points">57</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41434509"
                  >Comments</a
                ><span class="descendants">: 7</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41434315">
          <h3>
            <a
              class="item"
              href="https://www.wietzebeukema.nl/blog/why-bother-with-argv0"
              >Why bother with argv[0]?</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 12:30:06</span
              ><span class="points-container"
                >Points: <span class="points">132</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41434315"
                  >Comments</a
                ><span class="descendants">: 144</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41432013">
          <h3>
            <a class="item" href="https://aclanthology.org/2024.acl-long.245/"
              >Graph Language Models</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 06:49:29</span
              ><span class="points-container"
                >Points: <span class="points">90</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41432013"
                  >Comments</a
                ><span class="descendants">: 8</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41431560">
          <h3>
            <a class="item" href="https://arxiv.org/abs/2408.16737"
              >Smaller, Weaker, yet Better: Training LLM Reasoners via
              Compute-Optimal Sampling</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 05:26:08</span
              ><span class="points-container"
                >Points: <span class="points">42</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41431560"
                  >Comments</a
                ><span class="descendants">: 5</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41431293">
          <h3>
            <a
              class="item"
              href="https://sander.ai/2024/09/02/spectral-autoregression.html"
              >Diffusion Is Spectral Autoregression</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 04:33:36</span
              ><span class="points-container"
                >Points: <span class="points">184</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41431293"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41431244">
          <h3>
            <a class="item" href="https://computer.rip/2024-08-31-ipmi.html"
              >IPMI</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 04:23:09</span
              ><span class="points-container"
                >Points: <span class="points">226</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41431244"
                  >Comments</a
                ><span class="descendants">: 98</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41431177">
          <h3>
            <a
              class="item"
              href="https://www.timeextension.com/news/2024/09/wizardry-co-creator-andrew-greenberg-has-passed-away"
              >Wizardry Co-Creator Andrew Greenberg Has Passed Away</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 04:11:16</span
              ><span class="points-container"
                >Points: <span class="points">131</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41431177"
                  >Comments</a
                ><span class="descendants">: 49</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41430772">
          <h3>
            <a
              class="item"
              href="https://morizbuesing.com/blog/greppability-code-metric/"
              >Greppability is an underrated code metric</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 02:47:00</span
              ><span class="points-container"
                >Points: <span class="points">887</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41430772"
                  >Comments</a
                ><span class="descendants">: 472</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41430258">
          <h3>
            <a class="item" href="https://ismy.blue/">Is My Blue Your Blue?</a>
          </h3>
          <section>
            <h4>
              <span>2024-09-03 @ 01:17:24</span
              ><span class="points-container"
                >Points: <span class="points">1033</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41430258"
                  >Comments</a
                ><span class="descendants">: 432</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41428705">
          <h3>
            <a
              class="item"
              href="https://www.bytedrum.com/posts/art-of-finishing/"
              >The Art of Finishing</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-02 @ 20:51:00</span
              ><span class="points-container"
                >Points: <span class="points">602</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41428705"
                  >Comments</a
                ><span class="descendants">: 147</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41428274">
          <h3>
            <a class="item" href="https://blancas.io/blog/ai-web-scraper/"
              >Web scraping with GPT-4o: powerful but expensive</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-02 @ 19:50:53</span
              ><span class="points-container"
                >Points: <span class="points">319</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41428274"
                  >Comments</a
                ><span class="descendants">: 154</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41427563">
          <h3>
            <a class="item" href="https://github.com/pythonbrad/afrim"
              >Show HN: A modern way to type in African languages</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-02 @ 18:10:20</span
              ><span class="points-container"
                >Points: <span class="points">181</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41427563"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
            <div class="text">
              <p>
                Afrim want to simplify the typing in African languages and also
                digitalize the African typing systems. Basically, it wants to
                solve the problems encountered with current solutions: - slow
                typing - not easily configurable - keyboard layout dependent -
                constant bugs
              </p>
              <p>
                Additionally, Afrim offers the following features [1]: - Dataset
                easily customizable - Keyboard layout independent - Auto
                completion, autocorrection and autosuggestion - Support all
                sequential codes
              </p>
              <p>
                Technical details [2]: Afrim is written in Rust and his
                architecture is inspired of RIME.
              </p>
              <p>
                What's next? - Offer an android frontend of the Afrim (in
                development) [3] - Support more African input methods as
                possible
              </p>
              <p>
                I would like to have your opinions about this project. I have
                been working on it so far, and I would like to know how I can
                improve it.
              </p>
              <p>
                -------------- [1]
                <a
                  href="https://github.com/pythonbrad/afrim?tab=readme-ov-file#features"
                  >https://github.com/pythonbrad/afrim?tab=readme-ov-file#featu...</a
                >
                [2]
                <a href="https://pythonbrad.github.io/afrim-man/for_developers"
                  >https://pythonbrad.github.io/afrim-man/for_developers</a
                >
                [3]
                <a href="https://github.com/pythonbrad/afrim-keyboard/"
                  >https://github.com/pythonbrad/afrim-keyboard/</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41427185">
          <h3>
            <a
              class="item"
              href="https://www.somethingsimilar.com/2013/01/14/notes-on-distributed-systems-for-young-bloods/"
              >Notes on Distributed Systems for Young Bloods</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-02 @ 17:23:26</span
              ><span class="points-container"
                >Points: <span class="points">331</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41427185"
                  >Comments</a
                ><span class="descendants">: 53</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41425910">
          <h3>
            <a class="item" href="https://news.ycombinator.com/item?id=41425910"
              >Ask HN: Who is hiring? (September 2024)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-02 @ 15:00:06</span
              ><span class="points-container"
                >Points: <span class="points">305</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41425910"
                  >Comments</a
                ><span class="descendants">: 280</span></span
              >
            </h4>
            <div class="text">
              <i>not</i> an option.
              <p>
                Please only post if you personally are part of the hiring
                company—no recruiting firms or job boards. One post per company.
                If it isn't a household name, explain what your company does.
              </p>
              <p>
                Commenters: please don't reply to job posts to complain about
                something. It's off topic here.
              </p>
              <p>
                Readers: please only email if you are personally interested in
                the job.
              </p>
              <p>
                Searchers: try
                <a href="http://nchelluri.github.io/hnjobs/"
                  >http://nchelluri.github.io/hnjobs/</a
                >,
                <a href="https://hnresumetojobs.com"
                  >https://hnresumetojobs.com</a
                >,
                <a href="https://hnhired.fly.dev">https://hnhired.fly.dev</a>,
                <a href="https://kennytilton.github.io/whoishiring/"
                  >https://kennytilton.github.io/whoishiring/</a
                >,
                <a href="https://hnjobs.emilburzo.com"
                  >https://hnjobs.emilburzo.com</a
                >.
              </p>
              <p>Don't miss these other fine threads:</p>
              <p>
                <i>Who wants to be hired?</i>
                <a href="https://news.ycombinator.com/item?id=41425908"
                  >https://news.ycombinator.com/item?id=41425908</a
                >
              </p>
              <p>
                <i>Freelancer? Seeking freelancer?</i>
                <a href="https://news.ycombinator.com/item?id=41425909"
                  >https://news.ycombinator.com/item?id=41425909</a
                >
              </p>
            </div>
          </section>
        </section>
        <section id="41425563">
          <h3>
            <a
              class="item"
              href="https://news.yale.edu/2024/08/14/sleep-it-how-brain-processes-many-experiences-even-when-offline"
              >Sleep on it: How the brain processes many experiences, even when
              'offline'</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-02 @ 14:17:08</span
              ><span class="points-container"
                >Points: <span class="points">396</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41425563"
                  >Comments</a
                ><span class="descendants">: 129</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41425467">
          <h3>
            <a
              class="item"
              href="https://ferd.ca/my-blog-engine-is-the-erlang-build-tool.html"
              >My Blog Engine Is the Erlang Build Tool</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-02 @ 14:04:20</span
              ><span class="points-container"
                >Points: <span class="points">53</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41425467"
                  >Comments</a
                ><span class="descendants">: 2</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41424505">
          <h3>
            <a
              class="item"
              href="https://www.theguardian.com/artanddesign/photography-blog/2014/jun/13/photoshop-first-image-jennifer-in-paradise-photography-artefact-knoll-dullaart"
              >Jennifer in paradise: the story of the first Photoshopped image
              (2014)</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-02 @ 11:33:14</span
              ><span class="points-container"
                >Points: <span class="points">97</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41424505"
                  >Comments</a
                ><span class="descendants">: 78</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41418357">
          <h3>
            <a
              class="item"
              href="https://solidpixel.github.io/creating_invariant_accumulators"
              >Creating invariant floating-point accumulators</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-01 @ 16:52:20</span
              ><span class="points-container"
                >Points: <span class="points">32</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41418357"
                  >Comments</a
                ><span class="descendants">: 20</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41417538">
          <h3>
            <a
              class="item"
              href="https://londonist.com/london/maps/dickens-the-ultimate-map-history"
              >Dickens: The Map</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-09-01 @ 15:05:25</span
              ><span class="points-container"
                >Points: <span class="points">51</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41417538"
                  >Comments</a
                ><span class="descendants">: 3</span></span
              >
            </h4>
          </section>
        </section>
        <section id="41397901">
          <h3>
            <a
              class="item"
              href="https://simonindelicate.substack.com/p/the-occult-technology-of-the-rollercoaster"
              >The occult technology of the rollercoaster</a
            >
          </h3>
          <section>
            <h4>
              <span>2024-08-30 @ 05:15:06</span
              ><span class="points-container"
                >Points: <span class="points">62</span></span
              ><span class="descendants-container"
                ><a href="https://news.ycombinator.com/item?id=41397901"
                  >Comments</a
                ><span class="descendants">: 23</span></span
              >
            </h4>
          </section>
        </section>
      </section>
      <section id="archives">
        <h2>
          <a
            href="https://github.com/kherrick/hacker-news/blob/main/archives/index.md"
            >Archives</a
          >
        </h2>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2024/index.md"
              >2024</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2023/index.md"
              >2023</a
            >
          </h3>
        </section>
        <section>
          <h3>
            <a
              href="https://github.com/kherrick/hacker-news/blob/main/archives/2022/index.md"
              >2022</a
            >
          </h3>
        </section>
      </section>
    </main>
    <script type="module">
      import { buildDescendants } from "./lib/build-html-descendants.js";
      import { buildNextItem } from "./lib/build-html-next-item.js";
      import { getNextDateTime } from "./lib/date-time.js";

      const updateSectionById = (id) =>
        fetch(`https://hacker-news.firebaseio.com/v0/item/${id}.json`).then(
          (result) =>
            result.json().then(({ descendants, id, score, text, type }) => {
              const currentItem = document.getElementById(id);

              if (score) {
                currentItem.querySelector(".points").textContent = score;
              }

              if (descendants && (type === "poll" || type === "story")) {
                const currentDescendants =
                  currentItem.querySelector(".descendants");

                if (currentDescendants) {
                  currentDescendants.textContent = `: ${descendants}`;
                } else {
                  const comments = buildDescendants(
                    document,
                    descendants,
                    `https://news.ycombinator.com/item?id=${id}`
                  );

                  currentItem.querySelector("h4").appendChild(comments);
                }
              }

              if (text) {
                const currentText = currentItem.querySelector(".text");

                if (currentText) {
                  currentText.innerHTML = text.replace(/\0/g, "");
                } else {
                  const content = document.createElement("div");
                  content.innerHTML = text.replace(/\0/g, "");
                  content.setAttribute("class", "text");

                  currentItem.appendChild(content);
                }
              }
            })
        );

      class UpdateQueue {
        constructor() {
          this._ids = [];
          this._isUpdating = false;
        }

        addItemById(id) {
          this._ids.push(id);
        }

        async flush() {
          const id = this._ids.shift();

          if (id) {
            this._isUpdating = true;

            await updateSectionById(id);
            await this.flush();
          } else {
            this._isUpdating = false;

            setTimeout(async () => {
              if (!this._isUpdating && this._ids && this._ids.length) {
                await this.flush();
              }
            }, 0);
          }
        }
      }

      // get latest data
      const latestSection = document.getElementById("latest");

      for (let item of latestSection.querySelectorAll("section[id]")) {
        updateSectionById(item.getAttribute("id"));
      }

      if ("IntersectionObserver" in window) {
        window.hackerNewsState = { index: [], nextTimeIndex: -1 };

        const addNewsItem = async (newsItem, queue) => {
          try {
            const { date, time, itemComments, itemTitle, itemLink } = newsItem;
            const section = await buildNextItem({
              document,
              dateTime: `${date}, ${time}`,
              itemComments,
              itemLink,
              itemTitle: new DOMParser().parseFromString(
                itemTitle.replace(/\\/g, ""),
                "text/html"
              ).documentElement.textContent,
              fetchItemDetails: false,
            });

            // display loading indicator for section
            section.querySelector(".points-container").innerHTML =
              'Points: <span class="points"><img style="height: 100%;" src="lib/images/loading.svg" /></span>';

            const id = section.getAttribute("id");
            if (!document.getElementById(id)) {
              document.getElementById("latest").appendChild(section);

              queue.addItemById(id);
            }
          } catch (error) {}
        };

        const buildArchiveIndex = async (lastDateTime) => {
          const nextDate = lastDateTime.slice(0, 10);
          const nextYear = nextDate.slice(0, 4);

          return (
            await (
              await fetch(
                `https://raw.githubusercontent.com/kherrick/hacker-news/main/archives/${nextYear}/${nextDate}/index.md`
              )
            ).text()
          )
            .split("\n")
            .filter((line) => line.match(new RegExp("^\\* \\[")))
            .map((line) => {
              const segment = line.replace("* ", "").split("](");
              const pubDate = segment[0].slice(1);

              const itemComments = segment[1].split(") - [")[0];
              const itemTitle = segment[1].split(") - [")[1];
              const itemLink = segment[2].slice(0, -1);
              const date = pubDate.slice(0, 10);
              const time = pubDate.slice(-8);

              return {
                date,
                itemComments,
                itemLink,
                itemTitle,
                time,
              };
            });
        };

        const handleIntersectingEntry = async (entry, queue) => {
          if (entry.isIntersecting) {
            const lastDateTime = document
              .getElementById("latest")
              .querySelector(
                "section:last-child > section > h4 > span"
              ).textContent;

            const nextDateTime = getNextDateTime(lastDateTime ?? "", -1);
            const archiveIndex = await buildArchiveIndex(nextDateTime);
            const nextTimeIndex = archiveIndex.findIndex(
              ({ time }) => time === nextDateTime.slice(-8)
            );

            const handleIndexUpdate = (index, existingIndexValues = []) => {
              index.forEach((i) => {
                existingIndexValues.push(i);
              });
              return existingIndexValues;
            };

            window.hackerNewsState = {
              index: handleIndexUpdate(
                archiveIndex,
                window.hackerNewsState.index
              ),
              nextTimeIndex,
            };

            let currentTimeIndex = nextTimeIndex + 1;
            const items = Object.values(window.hackerNewsState.index);
            for (let item of items) {
              if (currentTimeIndex < window.hackerNewsState.index.length) {
                addNewsItem(items[currentTimeIndex], queue);

                currentTimeIndex = currentTimeIndex + 1;
              }
            }

            queue.flush();
          }
        };

        const archives = document.getElementById("archives");
        const archivesObserver = new IntersectionObserver(
          (entries) => {
            const queue = new UpdateQueue();

            entries.forEach((entry) => handleIntersectingEntry(entry, queue));
          },
          {
            root: null,
            rootMargin: "0px",
            threshold: 0,
          }
        );

        archivesObserver.observe(archives);

        let latestSectionsExpanded = true;
        const handleLatestHeaderClick = () => {
          latestSectionsExpanded = !latestSectionsExpanded;

          if (latestSectionsExpanded) {
            archivesObserver.observe(archives);
          } else {
            archivesObserver.disconnect(archives);
          }

          for (let section of document.querySelectorAll("#latest > section")) {
            section.style.display = latestSectionsExpanded ? "block" : "none";
          }
        };

        const latestHeader = document.querySelector("#latest > h2");
        latestHeader.style.cursor = "pointer";
        latestHeader.addEventListener("click", handleLatestHeaderClick);
      }
    </script>
    <script type="module">
      import { Workbox } from "https://storage.googleapis.com/workbox-cdn/releases/6.4.1/workbox-window.prod.mjs";

      if ("serviceWorker" in navigator) {
        const base = document.querySelector("base");
        const serviceWorkerPath = `${
          base ? base.href.replace(/\/$/, "") : ""
        }/service-worker.js`;

        const wb = new Workbox(serviceWorkerPath);

        // setup event listeners
        wb.addEventListener("waiting", (event) => {
          wb.addEventListener("controlling", () => {
            window.location.reload();
          });

          wb.messageSkipWaiting();
        });

        wb.register();
      }
    </script>
  </body>
</html>
